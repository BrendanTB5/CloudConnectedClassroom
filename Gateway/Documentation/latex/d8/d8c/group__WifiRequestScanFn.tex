\hypertarget{group__WifiRequestScanFn}{}\section{m2m\+\_\+wifi\+\_\+request\+\_\+scan}
\label{group__WifiRequestScanFn}\index{m2m\+\_\+wifi\+\_\+request\+\_\+scan@{m2m\+\_\+wifi\+\_\+request\+\_\+scan}}
\subsection*{Functions}
\begin{DoxyCompactItemize}
\item 
\hyperlink{group__BSPDefine_gaecc0323d771e41ef81a76b5f12783e22}{N\+M\+I\+\_\+\+A\+PI} \hyperlink{group__DataT_gae35f10ffd0ac8dd2bc3e794da9bdfbc7}{sint8} \hyperlink{group__WifiRequestScanFn_ga499dfa24a19c2e84776aeabedf897135}{m2m\+\_\+wifi\+\_\+request\+\_\+scan} (\hyperlink{group__DataT_ga4df709a77647e870bbf1d955b8edc9a6}{uint8} ch)
\item 
\hyperlink{group__BSPDefine_gaecc0323d771e41ef81a76b5f12783e22}{N\+M\+I\+\_\+\+A\+PI} \hyperlink{group__DataT_gae35f10ffd0ac8dd2bc3e794da9bdfbc7}{sint8} \hyperlink{group__WifiRequestScanFn_gac02213169dee5603574c3f364345f1f6}{m2m\+\_\+wifi\+\_\+request\+\_\+scan\+\_\+ssid} (\hyperlink{group__DataT_ga4df709a77647e870bbf1d955b8edc9a6}{uint8} ch, char $\ast$pcssid)
\end{DoxyCompactItemize}


\subsection{Detailed Description}
Asynchronous wi-\/fi scan request on the given channel. The scan status is delivered in the wi-\/fi event callback and then the application is to read the scan results sequentially. The number of A\+Ps found (N) is returned in event \hyperlink{group__WlanEnums_gga064de09dec1d5e88ed8d075fa40f57dead835febbe18b7e3cc6ce4693951354fe}{M2\+M\+\_\+\+W\+I\+F\+I\+\_\+\+R\+E\+S\+P\+\_\+\+S\+C\+A\+N\+\_\+\+D\+O\+NE} with the number of found A\+Ps. The application could read the list of A\+Ps by calling the function \hyperlink{group__WifiReqScanResult_ga2585ee08ee8ecac67155ec99dd4d0863}{m2m\+\_\+wifi\+\_\+req\+\_\+scan\+\_\+result} N times.

Asynchronous wi-\/fi scan request on the given channel, and scan for hidden A\+Ps with the given ssid. The scan status is delivered in the wi-\/fi event callback and then the application is to read the scan results sequentially. The number of A\+Ps found (N) is returned in event \hyperlink{group__WlanEnums_gga064de09dec1d5e88ed8d075fa40f57dead835febbe18b7e3cc6ce4693951354fe}{M2\+M\+\_\+\+W\+I\+F\+I\+\_\+\+R\+E\+S\+P\+\_\+\+S\+C\+A\+N\+\_\+\+D\+O\+NE} with the number of found A\+Ps. The application could read the list of A\+Ps by calling the function \hyperlink{group__WifiReqScanResult_ga2585ee08ee8ecac67155ec99dd4d0863}{m2m\+\_\+wifi\+\_\+req\+\_\+scan\+\_\+result} N times. 

\subsection{Function Documentation}
\mbox{\Hypertarget{group__WifiRequestScanFn_ga499dfa24a19c2e84776aeabedf897135}\label{group__WifiRequestScanFn_ga499dfa24a19c2e84776aeabedf897135}} 
\index{m2m\+\_\+wifi\+\_\+request\+\_\+scan@{m2m\+\_\+wifi\+\_\+request\+\_\+scan}!m2m\+\_\+wifi\+\_\+request\+\_\+scan@{m2m\+\_\+wifi\+\_\+request\+\_\+scan}}
\index{m2m\+\_\+wifi\+\_\+request\+\_\+scan@{m2m\+\_\+wifi\+\_\+request\+\_\+scan}!m2m\+\_\+wifi\+\_\+request\+\_\+scan@{m2m\+\_\+wifi\+\_\+request\+\_\+scan}}
\subsubsection{\texorpdfstring{m2m\+\_\+wifi\+\_\+request\+\_\+scan()}{m2m\_wifi\_request\_scan()}}
{\footnotesize\ttfamily \hyperlink{group__BSPDefine_gaecc0323d771e41ef81a76b5f12783e22}{N\+M\+I\+\_\+\+A\+PI} \hyperlink{group__DataT_gae35f10ffd0ac8dd2bc3e794da9bdfbc7}{sint8} m2m\+\_\+wifi\+\_\+request\+\_\+scan (\begin{DoxyParamCaption}\item[{\hyperlink{group__DataT_ga4df709a77647e870bbf1d955b8edc9a6}{uint8}}]{ch }\end{DoxyParamCaption})}



{\ttfamily \#include $<$\hyperlink{m2m__wifi_8h}{third\+\_\+party/atmel/devices/wilc1000/driver/include/m2m\+\_\+wifi.\+h}$>$}


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em ch} & RF Channel ID for S\+C\+AN operation. It should be set according to tenu\+M2m\+Scan\+Ch. With a value of M2\+M\+\_\+\+W\+I\+F\+I\+\_\+\+C\+H\+\_\+\+A\+L\+L(255)), means to scan all channels.\\
\hline
\end{DoxyParams}
\begin{DoxyPrecond}{Precondition}

\begin{DoxyItemize}
\item A Wi-\/\+Fi notification callback of type \hyperlink{group__WlanEnums_gac5302f32839285fe8375c159087aa8a1}{tpf\+App\+Wifi\+Cb} M\+U\+ST be implemented and registered at intialization. Registering the callback is done through passing it to the \hyperlink{group__WifiInitFn_ga73c734812e844d96d860c4e93e9daf35}{m2m\+\_\+wifi\+\_\+init}.
\item The events \hyperlink{group__WlanEnums_gga064de09dec1d5e88ed8d075fa40f57dead835febbe18b7e3cc6ce4693951354fe}{M2\+M\+\_\+\+W\+I\+F\+I\+\_\+\+R\+E\+S\+P\+\_\+\+S\+C\+A\+N\+\_\+\+D\+O\+NE} and \hyperlink{group__WlanEnums_gga064de09dec1d5e88ed8d075fa40f57deadfb48e88c3a8e5f9dac634d62d3f53e5}{M2\+M\+\_\+\+W\+I\+F\+I\+\_\+\+R\+E\+S\+P\+\_\+\+S\+C\+A\+N\+\_\+\+R\+E\+S\+U\+LT}. must be handled in the callback.
\item The \hyperlink{group__WifiHandleEventsFn_ga461a4edc057cec8c00cf124a07aa3b02}{m2m\+\_\+wifi\+\_\+handle\+\_\+events} function M\+U\+ST be called to receive the responses in the callback.
\end{DoxyItemize}
\end{DoxyPrecond}
\begin{DoxySeeAlso}{See also}
\hyperlink{group__WlanEnums_gga064de09dec1d5e88ed8d075fa40f57dead835febbe18b7e3cc6ce4693951354fe}{M2\+M\+\_\+\+W\+I\+F\+I\+\_\+\+R\+E\+S\+P\+\_\+\+S\+C\+A\+N\+\_\+\+D\+O\+NE} \hyperlink{group__WlanEnums_gga064de09dec1d5e88ed8d075fa40f57deadfb48e88c3a8e5f9dac634d62d3f53e5}{M2\+M\+\_\+\+W\+I\+F\+I\+\_\+\+R\+E\+S\+P\+\_\+\+S\+C\+A\+N\+\_\+\+R\+E\+S\+U\+LT} \hyperlink{group__WlanEnums_gac5302f32839285fe8375c159087aa8a1}{tpf\+App\+Wifi\+Cb} \hyperlink{structtstrM2mWifiscanResult}{tstr\+M2m\+Wifiscan\+Result} \hyperlink{group__WlanEnums_ga2a91dd671e2672dba1a7ed45230f3a99}{tenu\+M2m\+Scan\+Ch} \hyperlink{group__WifiInitFn_ga73c734812e844d96d860c4e93e9daf35}{m2m\+\_\+wifi\+\_\+init} \hyperlink{group__WifiHandleEventsFn_ga461a4edc057cec8c00cf124a07aa3b02}{m2m\+\_\+wifi\+\_\+handle\+\_\+events} \hyperlink{group__WifiReqScanResult_ga2585ee08ee8ecac67155ec99dd4d0863}{m2m\+\_\+wifi\+\_\+req\+\_\+scan\+\_\+result}
\end{DoxySeeAlso}
\begin{DoxyReturn}{Returns}
The function returns \hyperlink{nm__common_8h_a9ef27ba27aafdd1aa3a79d3ba2c36b8f}{M2\+M\+\_\+\+S\+U\+C\+C\+E\+SS} for successful operations and a negative value otherwise. 
\end{DoxyReturn}
\hypertarget{group__WifiEnableMonitorModeFn_Example}{}\subsection{Example}\label{group__WifiEnableMonitorModeFn_Example}
The code snippet demonstrates an example of how the scan request is called from the application\textquotesingle{}s main function and the handling of the events received in response. 
\begin{DoxyCode}
\textcolor{preprocessor}{#include "\hyperlink{m2m__wifi_8h}{m2m\_wifi.h}"}
\textcolor{preprocessor}{#include "\hyperlink{m2m__types_8h}{m2m\_types.h}"}

\textcolor{keywordtype}{void} wifi\_event\_cb(\hyperlink{group__DataT_ga4df709a77647e870bbf1d955b8edc9a6}{uint8} u8WiFiEvent, \textcolor{keywordtype}{void} * pvMsg)
\{
    \textcolor{keyword}{static} \hyperlink{group__DataT_ga4df709a77647e870bbf1d955b8edc9a6}{uint8}    u8ScanResultIdx = 0;
    
    \textcolor{keywordflow}{switch}(u8WiFiEvent)
    \{
    \textcolor{keywordflow}{case} \hyperlink{group__WlanEnums_gga064de09dec1d5e88ed8d075fa40f57dead835febbe18b7e3cc6ce4693951354fe}{M2M\_WIFI\_RESP\_SCAN\_DONE}:
        \{
            \hyperlink{structtstrM2mScanDone}{tstrM2mScanDone} *pstrInfo = (\hyperlink{structtstrM2mScanDone}{tstrM2mScanDone}*)pvMsg;
            
            printf(\textcolor{stringliteral}{"Num of AP found %d\(\backslash\)r\(\backslash\)n"},pstrInfo->\hyperlink{structtstrM2mScanDone_a1303b806dd93bfdd4b4a51ad750b023b}{u8NumofCh});
            \textcolor{keywordflow}{if}(pstrInfo->\hyperlink{structtstrM2mScanDone_adf06f5d0db8d0fb98e7674672ee8439d}{s8ScanState} == \hyperlink{nm__common_8h_a9ef27ba27aafdd1aa3a79d3ba2c36b8f}{M2M\_SUCCESS})
            \{
                u8ScanResultIdx = 0;
                \textcolor{keywordflow}{if}(pstrInfo->\hyperlink{structtstrM2mScanDone_a1303b806dd93bfdd4b4a51ad750b023b}{u8NumofCh} >= 1)
                \{
                    \hyperlink{group__WifiReqScanResult_ga2585ee08ee8ecac67155ec99dd4d0863}{m2m\_wifi\_req\_scan\_result}(u8ScanResultIdx);
                    u8ScanResultIdx ++;
                \}
                \textcolor{keywordflow}{else}
                \{
                    printf(\textcolor{stringliteral}{"No AP Found Rescan\(\backslash\)r\(\backslash\)n"});
                    \hyperlink{group__WifiRequestScanFn_ga499dfa24a19c2e84776aeabedf897135}{m2m\_wifi\_request\_scan}(\hyperlink{group__WlanEnums_gga2a91dd671e2672dba1a7ed45230f3a99a9ab262cc4f83b59a0710ffb80134c637}{M2M\_WIFI\_CH\_ALL});
                \}
            \}
            \textcolor{keywordflow}{else}
            \{
                printf(\textcolor{stringliteral}{"(ERR) Scan fail with error <%d>\(\backslash\)r\(\backslash\)n"},pstrInfo->
      \hyperlink{structtstrM2mScanDone_adf06f5d0db8d0fb98e7674672ee8439d}{s8ScanState});
            \}
        \}
        \textcolor{keywordflow}{break};
    
    \textcolor{keywordflow}{case} \hyperlink{group__WlanEnums_gga064de09dec1d5e88ed8d075fa40f57deadfb48e88c3a8e5f9dac634d62d3f53e5}{M2M\_WIFI\_RESP\_SCAN\_RESULT}:
        \{
            \hyperlink{structtstrM2mWifiscanResult}{tstrM2mWifiscanResult}       *pstrScanResult =(
      \hyperlink{structtstrM2mWifiscanResult}{tstrM2mWifiscanResult}*)pvMsg;
            \hyperlink{group__DataT_ga4df709a77647e870bbf1d955b8edc9a6}{uint8}                       u8NumFoundAPs = 
      \hyperlink{group__WifiGetNumAPFoundFn_gac92223273822358f4aee6e133b11815d}{m2m\_wifi\_get\_num\_ap\_found}();
            
            printf(\textcolor{stringliteral}{">>%02d RI %d SEC %s CH %02d BSSID %02X:%02X:%02X:%02X:%02X:%02X SSID %s\(\backslash\)r\(\backslash\)n"},
                pstrScanResult->\hyperlink{structtstrM2mWifiscanResult_a70c6b917a7693e2afcc8e912e10f1d96}{u8index},pstrScanResult->\hyperlink{structtstrM2mWifiscanResult_a34d94f696097c6c569b480fe4262a2cc}{s8rssi},
                pstrScanResult->\hyperlink{structtstrM2mWifiscanResult_a0b9dbf6b40e1def154c89c53a7ceb381}{u8AuthType},
                pstrScanResult->\hyperlink{structtstrM2mWifiscanResult_a345089f7fa5a6570886c340c08cfeb2e}{u8ch},
                pstrScanResult->\hyperlink{structtstrM2mWifiscanResult_ae1d4c47f31a39e2423d5c7894022b95c}{au8BSSID}[0], pstrScanResult->\hyperlink{structtstrM2mWifiscanResult_ae1d4c47f31a39e2423d5c7894022b95c}{au8BSSID}[1], pstrScanResult->
      \hyperlink{structtstrM2mWifiscanResult_ae1d4c47f31a39e2423d5c7894022b95c}{au8BSSID}[2],
                pstrScanResult->\hyperlink{structtstrM2mWifiscanResult_ae1d4c47f31a39e2423d5c7894022b95c}{au8BSSID}[3], pstrScanResult->\hyperlink{structtstrM2mWifiscanResult_ae1d4c47f31a39e2423d5c7894022b95c}{au8BSSID}[4], pstrScanResult->
      \hyperlink{structtstrM2mWifiscanResult_ae1d4c47f31a39e2423d5c7894022b95c}{au8BSSID}[5],
                pstrScanResult->\hyperlink{structtstrM2mWifiscanResult_a9636bd1e4481cde0a1523a97a394b185}{au8SSID});
            
            \textcolor{keywordflow}{if}(u8ScanResultIdx < u8NumFoundAPs)
            \{
                \textcolor{comment}{// Read the next scan result}
                \hyperlink{group__WifiReqScanResult_ga2585ee08ee8ecac67155ec99dd4d0863}{m2m\_wifi\_req\_scan\_result}(index);
                u8ScanResultIdx ++;
            \}
        \}
        \textcolor{keywordflow}{break};
    \textcolor{keywordflow}{default}:
        \textcolor{keywordflow}{break};
    \}
\}

\textcolor{keywordtype}{int} \hyperlink{demo_2microchip_2pic32mz__ef__curiosity_2wifi__http__server__demo_2src_2main_8c_ac5a1eca594b063e0d2dbccf86f96f221}{main}()
\{
    \hyperlink{structtstrWifiInitParam}{tstrWifiInitParam}   param;
    
    param.\hyperlink{group__WifiSetCustInfoElementFn_ga13d5fa7a0c71fd59bbf36a61923835cc}{pfAppWifiCb}   = wifi\_event\_cb;
    \textcolor{keywordflow}{if}(!\hyperlink{group__WifiInitFn_ga73c734812e844d96d860c4e93e9daf35}{m2m\_wifi\_init}(&param))
    \{
        \textcolor{comment}{// Scan all channels}
        \hyperlink{group__WifiRequestScanFn_ga499dfa24a19c2e84776aeabedf897135}{m2m\_wifi\_request\_scan}(\hyperlink{group__WlanEnums_gga2a91dd671e2672dba1a7ed45230f3a99a9ab262cc4f83b59a0710ffb80134c637}{M2M\_WIFI\_CH\_ALL});
        
        \textcolor{keywordflow}{while}(1)
        \{
            \hyperlink{group__WifiHandleEventsFn_ga461a4edc057cec8c00cf124a07aa3b02}{m2m\_wifi\_handle\_events}(\hyperlink{group__BSPDefine_ga070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL});
        \}
    \}
\}
\end{DoxyCode}
 

Definition at line 443 of file m2m\+\_\+wifi.\+c.


\begin{DoxyCode}
444 \{
445     \hyperlink{group__DataT_gae35f10ffd0ac8dd2bc3e794da9bdfbc7}{sint8}  s8Ret = \hyperlink{nm__common_8h_af3a40ba0f62490e78d5e7bda144bf691}{M2M\_ERR\_SCAN\_IN\_PROGRESS};
446 
447     \textcolor{keywordflow}{if}(!\hyperlink{m2m__wifi_8c_a76295f775841fc0f6533603c99da618e}{gu8scanInProgress})
448     \{
449         \hyperlink{structtstrM2MScan}{tstrM2MScan}* pstrtmp = &guCtrlStruct.strM2MScan;
450         \hyperlink{nm__common_8h_ad4de761e451e6416e7e21d6abc4fb776}{m2m\_memset}((\hyperlink{group__DataT_ga4df709a77647e870bbf1d955b8edc9a6}{uint8}*)pstrtmp,0,\textcolor{keyword}{sizeof}(\hyperlink{structtstrM2MScan}{tstrM2MScan}));
451         pstrtmp->u8ChNum = (\hyperlink{group__WlanEnums_ga2a91dd671e2672dba1a7ed45230f3a99}{tenuM2mScanCh})ch;
452         s8Ret = \hyperlink{m2m__hif_8c_a13ba8ad11b2ac39516ca787386d16ce0}{hif\_send}(\hyperlink{nm__common_8h_a9ab02eb1aea02a75c3f5aade4eef1276aeb9a7d57324ba4b8a6c2a5f46dd499c2}{M2M\_REQ\_GRP\_WIFI}, 
      \hyperlink{group__WlanEnums_gga064de09dec1d5e88ed8d075fa40f57deae522ee49cac55f1020a7aa527f172157}{M2M\_WIFI\_REQ\_SCAN}, (\hyperlink{group__DataT_ga4df709a77647e870bbf1d955b8edc9a6}{uint8}*)pstrtmp, \textcolor{keyword}{sizeof}(\hyperlink{structtstrM2MScan}{tstrM2MScan}),
      \hyperlink{group__BSPDefine_ga070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL}, 0,0);
453 
454         \textcolor{keywordflow}{if}(s8Ret == \hyperlink{nm__common_8h_a9ef27ba27aafdd1aa3a79d3ba2c36b8f}{M2M\_SUCCESS})
455         \{
456             \hyperlink{m2m__wifi_8c_a76295f775841fc0f6533603c99da618e}{gu8scanInProgress} = 1;
457         \}
458         \textcolor{keywordflow}{else}
459         \{
460             \hyperlink{nm__common_8h_a34d005df494e50b05cd38b80f318d7ac}{M2M\_ERR}(\textcolor{stringliteral}{"SCAN Failed Ret = %d\(\backslash\)r\(\backslash\)n"},s8Ret);
461         \}
462     \}
463     \textcolor{keywordflow}{else}
464     \{
465         \hyperlink{nm__common_8h_a34d005df494e50b05cd38b80f318d7ac}{M2M\_ERR}(\textcolor{stringliteral}{"SCAN In Progress\(\backslash\)r\(\backslash\)n"});
466     \}
467     \textcolor{keywordflow}{return} s8Ret;
468 \}
\end{DoxyCode}
\mbox{\Hypertarget{group__WifiRequestScanFn_gac02213169dee5603574c3f364345f1f6}\label{group__WifiRequestScanFn_gac02213169dee5603574c3f364345f1f6}} 
\index{m2m\+\_\+wifi\+\_\+request\+\_\+scan@{m2m\+\_\+wifi\+\_\+request\+\_\+scan}!m2m\+\_\+wifi\+\_\+request\+\_\+scan\+\_\+ssid@{m2m\+\_\+wifi\+\_\+request\+\_\+scan\+\_\+ssid}}
\index{m2m\+\_\+wifi\+\_\+request\+\_\+scan\+\_\+ssid@{m2m\+\_\+wifi\+\_\+request\+\_\+scan\+\_\+ssid}!m2m\+\_\+wifi\+\_\+request\+\_\+scan@{m2m\+\_\+wifi\+\_\+request\+\_\+scan}}
\subsubsection{\texorpdfstring{m2m\+\_\+wifi\+\_\+request\+\_\+scan\+\_\+ssid()}{m2m\_wifi\_request\_scan\_ssid()}}
{\footnotesize\ttfamily \hyperlink{group__BSPDefine_gaecc0323d771e41ef81a76b5f12783e22}{N\+M\+I\+\_\+\+A\+PI} \hyperlink{group__DataT_gae35f10ffd0ac8dd2bc3e794da9bdfbc7}{sint8} m2m\+\_\+wifi\+\_\+request\+\_\+scan\+\_\+ssid (\begin{DoxyParamCaption}\item[{\hyperlink{group__DataT_ga4df709a77647e870bbf1d955b8edc9a6}{uint8}}]{ch,  }\item[{char $\ast$}]{pcssid }\end{DoxyParamCaption})}



{\ttfamily \#include $<$\hyperlink{m2m__wifi_8h}{third\+\_\+party/atmel/devices/wilc1000/driver/include/m2m\+\_\+wifi.\+h}$>$}


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em ch} & RF Channel ID for S\+C\+AN operation. It should be set according to tenu\+M2m\+Scan\+Ch. With a value of M2\+M\+\_\+\+W\+I\+F\+I\+\_\+\+C\+H\+\_\+\+A\+L\+L(255)), means to scan all channels.\\
\hline
\end{DoxyParams}
pcssid Null terminated string holding S\+S\+ID to include in probe requests to scan for hidden AP having the same S\+S\+ID

\begin{DoxyWarning}{Warning}
This function is not allowed in P2P or AP modes. It works only for S\+TA mode (connected or disconnected).
\end{DoxyWarning}
\begin{DoxyPrecond}{Precondition}

\begin{DoxyItemize}
\item A Wi-\/\+Fi notification callback of type \hyperlink{group__WlanEnums_gac5302f32839285fe8375c159087aa8a1}{tpf\+App\+Wifi\+Cb} M\+U\+ST be implemented and registered at intialization. Registering the callback is done through passing it to the \hyperlink{group__WifiInitFn_ga73c734812e844d96d860c4e93e9daf35}{m2m\+\_\+wifi\+\_\+init}.
\item The events \hyperlink{group__WlanEnums_gga064de09dec1d5e88ed8d075fa40f57dead835febbe18b7e3cc6ce4693951354fe}{M2\+M\+\_\+\+W\+I\+F\+I\+\_\+\+R\+E\+S\+P\+\_\+\+S\+C\+A\+N\+\_\+\+D\+O\+NE} and \hyperlink{group__WlanEnums_gga064de09dec1d5e88ed8d075fa40f57deadfb48e88c3a8e5f9dac634d62d3f53e5}{M2\+M\+\_\+\+W\+I\+F\+I\+\_\+\+R\+E\+S\+P\+\_\+\+S\+C\+A\+N\+\_\+\+R\+E\+S\+U\+LT}. must be handled in the callback.
\item The \hyperlink{group__WifiHandleEventsFn_ga461a4edc057cec8c00cf124a07aa3b02}{m2m\+\_\+wifi\+\_\+handle\+\_\+events} function M\+U\+ST be called to receive the responses in the callback.
\end{DoxyItemize}
\end{DoxyPrecond}
\begin{DoxySeeAlso}{See also}
\hyperlink{group__WlanEnums_gga064de09dec1d5e88ed8d075fa40f57dead835febbe18b7e3cc6ce4693951354fe}{M2\+M\+\_\+\+W\+I\+F\+I\+\_\+\+R\+E\+S\+P\+\_\+\+S\+C\+A\+N\+\_\+\+D\+O\+NE} \hyperlink{group__WlanEnums_gga064de09dec1d5e88ed8d075fa40f57deadfb48e88c3a8e5f9dac634d62d3f53e5}{M2\+M\+\_\+\+W\+I\+F\+I\+\_\+\+R\+E\+S\+P\+\_\+\+S\+C\+A\+N\+\_\+\+R\+E\+S\+U\+LT} \hyperlink{group__WlanEnums_gac5302f32839285fe8375c159087aa8a1}{tpf\+App\+Wifi\+Cb} \hyperlink{structtstrM2mWifiscanResult}{tstr\+M2m\+Wifiscan\+Result} \hyperlink{group__WlanEnums_ga2a91dd671e2672dba1a7ed45230f3a99}{tenu\+M2m\+Scan\+Ch} \hyperlink{group__WifiInitFn_ga73c734812e844d96d860c4e93e9daf35}{m2m\+\_\+wifi\+\_\+init} \hyperlink{group__WifiHandleEventsFn_ga461a4edc057cec8c00cf124a07aa3b02}{m2m\+\_\+wifi\+\_\+handle\+\_\+events} \hyperlink{group__WifiReqScanResult_ga2585ee08ee8ecac67155ec99dd4d0863}{m2m\+\_\+wifi\+\_\+req\+\_\+scan\+\_\+result}
\end{DoxySeeAlso}
\begin{DoxyReturn}{Returns}
The function returns \hyperlink{nm__common_8h_a9ef27ba27aafdd1aa3a79d3ba2c36b8f}{M2\+M\+\_\+\+S\+U\+C\+C\+E\+SS} for successful operations and a negative value otherwise. 
\end{DoxyReturn}
\hypertarget{group__WifiEnableMonitorModeFn_Example}{}\subsection{Example}\label{group__WifiEnableMonitorModeFn_Example}
The code snippet demonstrates an example of how the scan request is called from the application\textquotesingle{}s main function and the handling of the events received in response. 

Definition at line 470 of file m2m\+\_\+wifi.\+c.


\begin{DoxyCode}
471 \{
472     \hyperlink{group__DataT_gae35f10ffd0ac8dd2bc3e794da9bdfbc7}{sint8}  s8Ret = \hyperlink{nm__common_8h_af3a40ba0f62490e78d5e7bda144bf691}{M2M\_ERR\_SCAN\_IN\_PROGRESS};
473 
474     \textcolor{keywordflow}{if}(!\hyperlink{m2m__wifi_8c_a76295f775841fc0f6533603c99da618e}{gu8scanInProgress})
475     \{
476         \hyperlink{structtstrM2MScan}{tstrM2MScan}* pstrtmp = &guCtrlStruct.strM2MScan;
477         \hyperlink{nm__common_8h_ad4de761e451e6416e7e21d6abc4fb776}{m2m\_memset}((\hyperlink{group__DataT_ga4df709a77647e870bbf1d955b8edc9a6}{uint8}*)pstrtmp,0,\textcolor{keyword}{sizeof}(\hyperlink{structtstrM2MScan}{tstrM2MScan}));
478         pstrtmp->u8ChNum = (\hyperlink{group__WlanEnums_ga2a91dd671e2672dba1a7ed45230f3a99}{tenuM2mScanCh})ch;
479         \textcolor{keywordflow}{if}(pcssid)
480         \{
481             \hyperlink{group__DataT_ga4df709a77647e870bbf1d955b8edc9a6}{uint8} len =    \hyperlink{nm__common_8h_a3c10c83b6b5eda6b18bbc40ca411eeb4}{m2m\_strlen}((\hyperlink{group__DataT_ga4df709a77647e870bbf1d955b8edc9a6}{uint8} *)pcssid);
482             \hyperlink{nm__common_8h_a62b30b611dfcc58e190254d1f663470a}{m2m\_memcpy}(pstrtmp->au8SSID,(\hyperlink{group__DataT_ga4df709a77647e870bbf1d955b8edc9a6}{uint8} *)pcssid,len+1);
483         \}
484         s8Ret = \hyperlink{m2m__hif_8c_a13ba8ad11b2ac39516ca787386d16ce0}{hif\_send}(\hyperlink{nm__common_8h_a9ab02eb1aea02a75c3f5aade4eef1276aeb9a7d57324ba4b8a6c2a5f46dd499c2}{M2M\_REQ\_GRP\_WIFI}, 
      \hyperlink{group__WlanEnums_gga064de09dec1d5e88ed8d075fa40f57deae522ee49cac55f1020a7aa527f172157}{M2M\_WIFI\_REQ\_SCAN}, (\hyperlink{group__DataT_ga4df709a77647e870bbf1d955b8edc9a6}{uint8}*)pstrtmp, \textcolor{keyword}{sizeof}(\hyperlink{structtstrM2MScan}{tstrM2MScan}),
      \hyperlink{group__BSPDefine_ga070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL}, 0,0);
485 
486         \textcolor{keywordflow}{if}(s8Ret == \hyperlink{nm__common_8h_a9ef27ba27aafdd1aa3a79d3ba2c36b8f}{M2M\_SUCCESS})
487         \{
488             \hyperlink{m2m__wifi_8c_a76295f775841fc0f6533603c99da618e}{gu8scanInProgress} = 1;
489         \}
490         \textcolor{keywordflow}{else}
491         \{
492             \hyperlink{nm__common_8h_a34d005df494e50b05cd38b80f318d7ac}{M2M\_ERR}(\textcolor{stringliteral}{"SCAN Failed Ret = %d\(\backslash\)r\(\backslash\)n"},s8Ret);
493         \}
494     \}
495     \textcolor{keywordflow}{else}
496     \{
497         \hyperlink{nm__common_8h_a34d005df494e50b05cd38b80f318d7ac}{M2M\_ERR}(\textcolor{stringliteral}{"SCAN In Progress\(\backslash\)r\(\backslash\)n"});
498     \}
499     \textcolor{keywordflow}{return} s8Ret;
500 \}
\end{DoxyCode}
