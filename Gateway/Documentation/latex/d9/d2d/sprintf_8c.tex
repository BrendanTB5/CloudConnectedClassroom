\hypertarget{sprintf_8c}{}\section{demo/microchip/pic32mz\+\_\+ef\+\_\+curiosity/wifi\+\_\+http\+\_\+server\+\_\+demo/src/sprintf.c File Reference}
\label{sprintf_8c}\index{demo/microchip/pic32mz\+\_\+ef\+\_\+curiosity/wifi\+\_\+http\+\_\+server\+\_\+demo/src/sprintf.\+c@{demo/microchip/pic32mz\+\_\+ef\+\_\+curiosity/wifi\+\_\+http\+\_\+server\+\_\+demo/src/sprintf.\+c}}
{\ttfamily \#include $<$stdio.\+h$>$}\newline
{\ttfamily \#include $<$stdarg.\+h$>$}\newline
\subsection*{Macros}
\begin{DoxyCompactItemize}
\item 
\#define \hyperlink{sprintf_8c_a6fd5dddc97219412ab1c4483ce144aef}{P\+A\+D\+\_\+\+R\+I\+G\+HT}~1
\item 
\#define \hyperlink{sprintf_8c_a0b08e2c1689b9348d321cdc8846950af}{P\+A\+D\+\_\+\+Z\+E\+RO}~2
\item 
\#define \hyperlink{sprintf_8c_a5bf270eda1fe4ed63535e31fab16433e}{P\+R\+I\+N\+T\+\_\+\+B\+U\+F\+\_\+\+L\+EN}~12
\end{DoxyCompactItemize}
\subsection*{Functions}
\begin{DoxyCompactItemize}
\item 
static void \hyperlink{sprintf_8c_a2958479a2b17cb4eafc47e8f584d0f97}{printchar} (char $\ast$$\ast$str, int \hyperlink{llmnr__common_8h_a2e5a04327b5658199f0f7bda2acceee1}{c})
\item 
static int \hyperlink{sprintf_8c_a8d00fb4b337425dfeb7aadc10e96fe87}{prints} (char $\ast$$\ast$out, const char $\ast$string, int width, int pad)
\item 
static int \hyperlink{sprintf_8c_ab435e05d19cb6284903b9904050e0b86}{printi} (char $\ast$$\ast$out, int i, int \hyperlink{nbns__common_8h_a4313c9563516f94387762ab05763456b}{b}, int sg, int width, int pad, int letbase)
\item 
static int \hyperlink{sprintf_8c_a3e674fecee68caf4578c95e85ba38253}{print} (char $\ast$$\ast$out, const char $\ast$format, va\+\_\+list args)
\item 
int \hyperlink{sprintf_8c_a0a45d384d3d798c59577a8f627557c7a}{\+\_\+sprintf} (char $\ast$out, const char $\ast$format,...)
\item 
int \hyperlink{sprintf_8c_a312eddc7605dc6cc27594acbba746361}{\+\_\+sprintf\+\_\+cdnopuxX} (char $\ast$out, const char $\ast$format,...)
\item 
int \hyperlink{sprintf_8c_a8a7ae0f992d00f3763ae98d1b1d99baf}{\+\_\+sprintf\+\_\+cdnopsuxX} (char $\ast$out, const char $\ast$format,...)
\end{DoxyCompactItemize}


\subsection{Macro Definition Documentation}
\mbox{\Hypertarget{sprintf_8c_a6fd5dddc97219412ab1c4483ce144aef}\label{sprintf_8c_a6fd5dddc97219412ab1c4483ce144aef}} 
\index{sprintf.\+c@{sprintf.\+c}!P\+A\+D\+\_\+\+R\+I\+G\+HT@{P\+A\+D\+\_\+\+R\+I\+G\+HT}}
\index{P\+A\+D\+\_\+\+R\+I\+G\+HT@{P\+A\+D\+\_\+\+R\+I\+G\+HT}!sprintf.\+c@{sprintf.\+c}}
\subsubsection{\texorpdfstring{P\+A\+D\+\_\+\+R\+I\+G\+HT}{PAD\_RIGHT}}
{\footnotesize\ttfamily \#define P\+A\+D\+\_\+\+R\+I\+G\+HT~1}



Definition at line 35 of file sprintf.\+c.

\mbox{\Hypertarget{sprintf_8c_a0b08e2c1689b9348d321cdc8846950af}\label{sprintf_8c_a0b08e2c1689b9348d321cdc8846950af}} 
\index{sprintf.\+c@{sprintf.\+c}!P\+A\+D\+\_\+\+Z\+E\+RO@{P\+A\+D\+\_\+\+Z\+E\+RO}}
\index{P\+A\+D\+\_\+\+Z\+E\+RO@{P\+A\+D\+\_\+\+Z\+E\+RO}!sprintf.\+c@{sprintf.\+c}}
\subsubsection{\texorpdfstring{P\+A\+D\+\_\+\+Z\+E\+RO}{PAD\_ZERO}}
{\footnotesize\ttfamily \#define P\+A\+D\+\_\+\+Z\+E\+RO~2}



Definition at line 36 of file sprintf.\+c.

\mbox{\Hypertarget{sprintf_8c_a5bf270eda1fe4ed63535e31fab16433e}\label{sprintf_8c_a5bf270eda1fe4ed63535e31fab16433e}} 
\index{sprintf.\+c@{sprintf.\+c}!P\+R\+I\+N\+T\+\_\+\+B\+U\+F\+\_\+\+L\+EN@{P\+R\+I\+N\+T\+\_\+\+B\+U\+F\+\_\+\+L\+EN}}
\index{P\+R\+I\+N\+T\+\_\+\+B\+U\+F\+\_\+\+L\+EN@{P\+R\+I\+N\+T\+\_\+\+B\+U\+F\+\_\+\+L\+EN}!sprintf.\+c@{sprintf.\+c}}
\subsubsection{\texorpdfstring{P\+R\+I\+N\+T\+\_\+\+B\+U\+F\+\_\+\+L\+EN}{PRINT\_BUF\_LEN}}
{\footnotesize\ttfamily \#define P\+R\+I\+N\+T\+\_\+\+B\+U\+F\+\_\+\+L\+EN~12}



Definition at line 69 of file sprintf.\+c.



\subsection{Function Documentation}
\mbox{\Hypertarget{sprintf_8c_a0a45d384d3d798c59577a8f627557c7a}\label{sprintf_8c_a0a45d384d3d798c59577a8f627557c7a}} 
\index{sprintf.\+c@{sprintf.\+c}!\+\_\+sprintf@{\+\_\+sprintf}}
\index{\+\_\+sprintf@{\+\_\+sprintf}!sprintf.\+c@{sprintf.\+c}}
\subsubsection{\texorpdfstring{\+\_\+sprintf()}{\_sprintf()}}
{\footnotesize\ttfamily int \+\_\+sprintf (\begin{DoxyParamCaption}\item[{char $\ast$}]{out,  }\item[{const char $\ast$}]{format,  }\item[{}]{... }\end{DoxyParamCaption})}



Definition at line 182 of file sprintf.\+c.


\begin{DoxyCode}
183 \{
184         va\_list args;
185 
186         va\_start(args, format);
187         \textcolor{keywordflow}{return} \hyperlink{sprintf_8c_a3e674fecee68caf4578c95e85ba38253}{print}(&out, format, args);
188 \}
\end{DoxyCode}
\mbox{\Hypertarget{sprintf_8c_a8a7ae0f992d00f3763ae98d1b1d99baf}\label{sprintf_8c_a8a7ae0f992d00f3763ae98d1b1d99baf}} 
\index{sprintf.\+c@{sprintf.\+c}!\+\_\+sprintf\+\_\+cdnopsuxX@{\+\_\+sprintf\+\_\+cdnopsuxX}}
\index{\+\_\+sprintf\+\_\+cdnopsuxX@{\+\_\+sprintf\+\_\+cdnopsuxX}!sprintf.\+c@{sprintf.\+c}}
\subsubsection{\texorpdfstring{\+\_\+sprintf\+\_\+cdnopsux\+X()}{\_sprintf\_cdnopsuxX()}}
{\footnotesize\ttfamily int \+\_\+sprintf\+\_\+cdnopsuxX (\begin{DoxyParamCaption}\item[{char $\ast$}]{out,  }\item[{const char $\ast$}]{format,  }\item[{}]{... }\end{DoxyParamCaption})}



Definition at line 198 of file sprintf.\+c.


\begin{DoxyCode}
199 \{
200         va\_list args;
201 
202         va\_start(args, format);
203         \textcolor{keywordflow}{return} \hyperlink{sprintf_8c_a3e674fecee68caf4578c95e85ba38253}{print}(&out, format, args);
204 \}
\end{DoxyCode}
\mbox{\Hypertarget{sprintf_8c_a312eddc7605dc6cc27594acbba746361}\label{sprintf_8c_a312eddc7605dc6cc27594acbba746361}} 
\index{sprintf.\+c@{sprintf.\+c}!\+\_\+sprintf\+\_\+cdnopuxX@{\+\_\+sprintf\+\_\+cdnopuxX}}
\index{\+\_\+sprintf\+\_\+cdnopuxX@{\+\_\+sprintf\+\_\+cdnopuxX}!sprintf.\+c@{sprintf.\+c}}
\subsubsection{\texorpdfstring{\+\_\+sprintf\+\_\+cdnopux\+X()}{\_sprintf\_cdnopuxX()}}
{\footnotesize\ttfamily int \+\_\+sprintf\+\_\+cdnopuxX (\begin{DoxyParamCaption}\item[{char $\ast$}]{out,  }\item[{const char $\ast$}]{format,  }\item[{}]{... }\end{DoxyParamCaption})}



Definition at line 190 of file sprintf.\+c.


\begin{DoxyCode}
191 \{
192         va\_list args;
193 
194         va\_start(args, format);
195         \textcolor{keywordflow}{return} \hyperlink{sprintf_8c_a3e674fecee68caf4578c95e85ba38253}{print}(&out, format, args);
196 \}
\end{DoxyCode}
\mbox{\Hypertarget{sprintf_8c_a3e674fecee68caf4578c95e85ba38253}\label{sprintf_8c_a3e674fecee68caf4578c95e85ba38253}} 
\index{sprintf.\+c@{sprintf.\+c}!print@{print}}
\index{print@{print}!sprintf.\+c@{sprintf.\+c}}
\subsubsection{\texorpdfstring{print()}{print()}}
{\footnotesize\ttfamily static int print (\begin{DoxyParamCaption}\item[{char $\ast$$\ast$}]{out,  }\item[{const char $\ast$}]{format,  }\item[{va\+\_\+list}]{args }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [static]}}



Definition at line 114 of file sprintf.\+c.


\begin{DoxyCode}
115 \{
116     \textcolor{keyword}{register} \textcolor{keywordtype}{int} width, pad;
117     \textcolor{keyword}{register} \textcolor{keywordtype}{int} pc = 0;
118     \textcolor{keywordtype}{char} scr[2];
119 
120     \textcolor{keywordflow}{for} (; *format != 0; ++format) \{
121         \textcolor{keywordflow}{if} (*format == \textcolor{charliteral}{'%'}) \{
122             ++format;
123             width = pad = 0;
124             \textcolor{keywordflow}{if} (*format == \textcolor{charliteral}{'\(\backslash\)0'}) \textcolor{keywordflow}{break};
125             \textcolor{keywordflow}{if} (*format == \textcolor{charliteral}{'%'}) \textcolor{keywordflow}{goto} out;
126             \textcolor{keywordflow}{if} (*format == \textcolor{charliteral}{'-'}) \{
127                 ++format;
128                 pad = \hyperlink{sprintf_8c_a6fd5dddc97219412ab1c4483ce144aef}{PAD\_RIGHT};
129             \}
130             \textcolor{keywordflow}{while} (*format == \textcolor{charliteral}{'0'}) \{
131                 ++format;
132                 pad |= \hyperlink{sprintf_8c_a0b08e2c1689b9348d321cdc8846950af}{PAD\_ZERO};
133             \}
134             \textcolor{keywordflow}{for} (; *format >= \textcolor{charliteral}{'0'} && *format <= \textcolor{charliteral}{'9'}; ++format) \{
135                 width *= 10;
136                 width += *format - \textcolor{charliteral}{'0'};
137             \}
138 
139             \textcolor{keywordflow}{if}(*format == \textcolor{charliteral}{'l'} || *format == \textcolor{charliteral}{'z'})
140                 format++;
141 
142             \textcolor{keywordflow}{if}(*format == \textcolor{charliteral}{'s'}) \{
143                 \textcolor{keyword}{register} \textcolor{keywordtype}{char} *\hyperlink{md2_8c_adf356ff381033f761b7de5f76e763a45}{s} = (\textcolor{keywordtype}{char} *)va\_arg(args, \textcolor{keywordtype}{int});
144                 pc += \hyperlink{sprintf_8c_a8d00fb4b337425dfeb7aadc10e96fe87}{prints} (out, s?s:\textcolor{stringliteral}{"(null)"}, width, pad);
145                 \textcolor{keywordflow}{continue};
146             \}
147             \textcolor{keywordflow}{if}(*format == \textcolor{charliteral}{'d'}) \{
148                 pc += \hyperlink{sprintf_8c_ab435e05d19cb6284903b9904050e0b86}{printi} (out, va\_arg(args, \textcolor{keywordtype}{int}), 10, 1, width, pad, \textcolor{charliteral}{'a'});
149                 \textcolor{keywordflow}{continue};
150             \}
151             \textcolor{keywordflow}{if}(*format == \textcolor{charliteral}{'x'}) \{
152                 pc += \hyperlink{sprintf_8c_ab435e05d19cb6284903b9904050e0b86}{printi} (out, va\_arg(args, \textcolor{keywordtype}{int}), 16, 0, width, pad, \textcolor{charliteral}{'a'});
153                 \textcolor{keywordflow}{continue};
154             \}
155             \textcolor{keywordflow}{if}(*format == \textcolor{charliteral}{'X'}) \{
156                 pc += \hyperlink{sprintf_8c_ab435e05d19cb6284903b9904050e0b86}{printi} (out, va\_arg(args, \textcolor{keywordtype}{int}), 16, 0, width, pad, \textcolor{charliteral}{'A'});
157                 \textcolor{keywordflow}{continue};
158             \}
159             \textcolor{keywordflow}{if}(*format == \textcolor{charliteral}{'u'}) \{
160                 pc += \hyperlink{sprintf_8c_ab435e05d19cb6284903b9904050e0b86}{printi} (out, va\_arg(args, \textcolor{keywordtype}{int}), 10, 0, width, pad, \textcolor{charliteral}{'a'});
161                 \textcolor{keywordflow}{continue};
162             \}
163             \textcolor{keywordflow}{if}(*format == \textcolor{charliteral}{'c'}) \{
164                 \textcolor{comment}{/* char are converted to int then pushed on the stack */}
165                 scr[0] = (char)va\_arg(args, \textcolor{keywordtype}{int});
166                 scr[1] = \textcolor{charliteral}{'\(\backslash\)0'};
167                 pc += \hyperlink{sprintf_8c_a8d00fb4b337425dfeb7aadc10e96fe87}{prints} (out, scr, width, pad);
168                 \textcolor{keywordflow}{continue};
169             \}
170         \}
171         \textcolor{keywordflow}{else} \{
172         out:
173             \hyperlink{sprintf_8c_a2958479a2b17cb4eafc47e8f584d0f97}{printchar} (out, *format);
174             ++pc;
175         \}
176     \}
177     \textcolor{keywordflow}{if} (out) **out = \textcolor{charliteral}{'\(\backslash\)0'};
178     va\_end(args);
179     \textcolor{keywordflow}{return} pc;
180 \}
\end{DoxyCode}
\mbox{\Hypertarget{sprintf_8c_a2958479a2b17cb4eafc47e8f584d0f97}\label{sprintf_8c_a2958479a2b17cb4eafc47e8f584d0f97}} 
\index{sprintf.\+c@{sprintf.\+c}!printchar@{printchar}}
\index{printchar@{printchar}!sprintf.\+c@{sprintf.\+c}}
\subsubsection{\texorpdfstring{printchar()}{printchar()}}
{\footnotesize\ttfamily static void printchar (\begin{DoxyParamCaption}\item[{char $\ast$$\ast$}]{str,  }\item[{int}]{c }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [static]}}



Definition at line 22 of file sprintf.\+c.


\begin{DoxyCode}
23 \{
24     \textcolor{keywordflow}{if} (str)
25         \{
26         **str = \hyperlink{aria_8c_a5dadc28804036d1b82e1dc027e95c9a6}{c};
27         ++(*str);
28     \}
29     \textcolor{keywordflow}{else}
30         \{
31             \hyperlink{demo_2microchip_2pic32mz__ef__curiosity_2wifi__http__server__demo_2src_2debug_8c_a61c59f5945c9c859460377ad6924cfb1}{fputc}(\hyperlink{aria_8c_a5dadc28804036d1b82e1dc027e95c9a6}{c}, stdout);
32         \}
33 \}
\end{DoxyCode}
\mbox{\Hypertarget{sprintf_8c_ab435e05d19cb6284903b9904050e0b86}\label{sprintf_8c_ab435e05d19cb6284903b9904050e0b86}} 
\index{sprintf.\+c@{sprintf.\+c}!printi@{printi}}
\index{printi@{printi}!sprintf.\+c@{sprintf.\+c}}
\subsubsection{\texorpdfstring{printi()}{printi()}}
{\footnotesize\ttfamily static int printi (\begin{DoxyParamCaption}\item[{char $\ast$$\ast$}]{out,  }\item[{int}]{i,  }\item[{int}]{b,  }\item[{int}]{sg,  }\item[{int}]{width,  }\item[{int}]{pad,  }\item[{int}]{letbase }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [static]}}



Definition at line 71 of file sprintf.\+c.


\begin{DoxyCode}
72 \{
73     \textcolor{keywordtype}{char} print\_buf[\hyperlink{sprintf_8c_a5bf270eda1fe4ed63535e31fab16433e}{PRINT\_BUF\_LEN}];
74     \textcolor{keyword}{register} \textcolor{keywordtype}{char} *\hyperlink{md2_8c_adf356ff381033f761b7de5f76e763a45}{s};
75     \textcolor{keyword}{register} \textcolor{keywordtype}{int} \hyperlink{llmnr__common_8h_a2d03918f4f9edabaf3c9f43abcc2d85b}{t}, neg = 0, pc = 0;
76     \textcolor{keyword}{register} \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} u = i;
77 
78     \textcolor{keywordflow}{if} (i == 0) \{
79         print\_buf[0] = \textcolor{charliteral}{'0'};
80         print\_buf[1] = \textcolor{charliteral}{'\(\backslash\)0'};
81         \textcolor{keywordflow}{return} \hyperlink{sprintf_8c_a8d00fb4b337425dfeb7aadc10e96fe87}{prints} (out, print\_buf, width, pad);
82     \}
83 
84     \textcolor{keywordflow}{if} (sg && \hyperlink{dtls__misc_8h_ab590318ac859d0e57e15c3dd6c62a605}{b} == 10 && i < 0) \{
85         neg = 1;
86         u = -i;
87     \}
88 
89     s = print\_buf + \hyperlink{sprintf_8c_a5bf270eda1fe4ed63535e31fab16433e}{PRINT\_BUF\_LEN}-1;
90     *s = \textcolor{charliteral}{'\(\backslash\)0'};
91 
92     \textcolor{keywordflow}{while} (u) \{
93         t = u % \hyperlink{dtls__misc_8h_ab590318ac859d0e57e15c3dd6c62a605}{b};
94         \textcolor{keywordflow}{if}(t >= 10)
95             t += letbase - \textcolor{charliteral}{'0'} - 10;
96         *--s = t + \textcolor{charliteral}{'0'};
97         u /= \hyperlink{dtls__misc_8h_ab590318ac859d0e57e15c3dd6c62a605}{b};
98     \}
99 
100     \textcolor{keywordflow}{if} (neg) \{
101         \textcolor{keywordflow}{if}(width && (pad & \hyperlink{sprintf_8c_a0b08e2c1689b9348d321cdc8846950af}{PAD\_ZERO})) \{
102             \hyperlink{sprintf_8c_a2958479a2b17cb4eafc47e8f584d0f97}{printchar} (out, \textcolor{charliteral}{'-'});
103             ++pc;
104             --width;
105         \}
106         \textcolor{keywordflow}{else} \{
107             *--s = \textcolor{charliteral}{'-'};
108         \}
109     \}
110 
111     \textcolor{keywordflow}{return} pc + \hyperlink{sprintf_8c_a8d00fb4b337425dfeb7aadc10e96fe87}{prints} (out, s, width, pad);
112 \}
\end{DoxyCode}
\mbox{\Hypertarget{sprintf_8c_a8d00fb4b337425dfeb7aadc10e96fe87}\label{sprintf_8c_a8d00fb4b337425dfeb7aadc10e96fe87}} 
\index{sprintf.\+c@{sprintf.\+c}!prints@{prints}}
\index{prints@{prints}!sprintf.\+c@{sprintf.\+c}}
\subsubsection{\texorpdfstring{prints()}{prints()}}
{\footnotesize\ttfamily static int prints (\begin{DoxyParamCaption}\item[{char $\ast$$\ast$}]{out,  }\item[{const char $\ast$}]{string,  }\item[{int}]{width,  }\item[{int}]{pad }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [static]}}



Definition at line 38 of file sprintf.\+c.


\begin{DoxyCode}
39 \{
40     \textcolor{keyword}{register} \textcolor{keywordtype}{int} pc = 0, padchar = \textcolor{charliteral}{' '};
41 
42     \textcolor{keywordflow}{if} (width > 0) \{
43         \textcolor{keyword}{register} \textcolor{keywordtype}{int} len = 0;
44         \textcolor{keyword}{register} \textcolor{keyword}{const} \textcolor{keywordtype}{char} *ptr;
45         \textcolor{keywordflow}{for} (ptr = \textcolor{keywordtype}{string}; *ptr; ++ptr) ++len;
46         \textcolor{keywordflow}{if} (len >= width) width = 0;
47         \textcolor{keywordflow}{else} width -= len;
48         \textcolor{keywordflow}{if} (pad & \hyperlink{sprintf_8c_a0b08e2c1689b9348d321cdc8846950af}{PAD\_ZERO}) padchar = \textcolor{charliteral}{'0'};
49     \}
50     \textcolor{keywordflow}{if} (!(pad & \hyperlink{sprintf_8c_a6fd5dddc97219412ab1c4483ce144aef}{PAD\_RIGHT})) \{
51         \textcolor{keywordflow}{for} (; width > 0; --width) \{
52             \hyperlink{sprintf_8c_a2958479a2b17cb4eafc47e8f584d0f97}{printchar} (out, padchar);
53             ++pc;
54         \}
55     \}
56     \textcolor{keywordflow}{for} (; *string ; ++string) \{
57         \hyperlink{sprintf_8c_a2958479a2b17cb4eafc47e8f584d0f97}{printchar} (out, *\textcolor{keywordtype}{string});
58         ++pc;
59     \}
60     \textcolor{keywordflow}{for} (; width > 0; --width) \{
61         \hyperlink{sprintf_8c_a2958479a2b17cb4eafc47e8f584d0f97}{printchar} (out, padchar);
62         ++pc;
63     \}
64 
65     \textcolor{keywordflow}{return} pc;
66 \}
\end{DoxyCode}
