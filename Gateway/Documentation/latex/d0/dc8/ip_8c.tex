\hypertarget{ip_8c}{}\section{cyclone\+\_\+tcp/core/ip.c File Reference}
\label{ip_8c}\index{cyclone\+\_\+tcp/core/ip.\+c@{cyclone\+\_\+tcp/core/ip.\+c}}


I\+Pv4 and I\+Pv6 common routines.  


{\ttfamily \#include \char`\"{}core/net.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}core/ethernet.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}core/ip.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}ipv4/ipv4.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}ipv4/ipv4\+\_\+misc.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}ipv6/ipv6.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}ipv6/ipv6\+\_\+misc.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}debug.\+h\char`\"{}}\newline
\subsection*{Macros}
\begin{DoxyCompactItemize}
\item 
\#define \hyperlink{ip_8c_afcdf5e66fd927a7f4cc64295acd20407}{T\+R\+A\+C\+E\+\_\+\+L\+E\+V\+EL}~\hyperlink{net__config_8h_a38924ec2d411ac5a3215293c64739a27}{I\+P\+\_\+\+T\+R\+A\+C\+E\+\_\+\+L\+E\+V\+EL}
\end{DoxyCompactItemize}
\subsection*{Functions}
\begin{DoxyCompactItemize}
\item 
\hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689c}{error\+\_\+t} \hyperlink{ip_8c_ac39710faa96e88364ef7007fee711c5e}{ip\+Send\+Datagram} (\hyperlink{net_8h_a2234db8911a1148c9159979d8f5e0d6b}{Net\+Interface} $\ast$interface, \hyperlink{structIpPseudoHeader}{Ip\+Pseudo\+Header} $\ast$pseudo\+Header, \hyperlink{structNetBuffer}{Net\+Buffer} $\ast$buffer, size\+\_\+t \hyperlink{pic32mz_2isr__support_8h_ac0542d92dfcd62c19170fd963f9e5052}{offset}, \hyperlink{compiler__port_8h_a12a1e9b3ce141648783a82445d02b58d}{uint\+\_\+t} \hyperlink{nbns__common_8h_a1e87af3c18a2fd36c61faf89949bdc3f}{flags})
\begin{DoxyCompactList}\small\item\em Send an IP datagram. \end{DoxyCompactList}\item 
\hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689c}{error\+\_\+t} \hyperlink{ip_8c_a453a712a9fa25badbfbc5d0c0201c0be}{ip\+Select\+Source\+Addr} (\hyperlink{net_8h_a2234db8911a1148c9159979d8f5e0d6b}{Net\+Interface} $\ast$$\ast$interface, const \hyperlink{structIpAddr}{Ip\+Addr} $\ast$\hyperlink{ndp_8h_ab217f0ee2104c7c5529a4ece1f77e02c}{dest\+Addr}, \hyperlink{structIpAddr}{Ip\+Addr} $\ast$\hyperlink{ethernet_8h_a522a68dc3582289088de6b36018e9ea0}{src\+Addr})
\begin{DoxyCompactList}\small\item\em IP source address selection. \end{DoxyCompactList}\item 
\hyperlink{compiler__port_8h_a812d16e5494522586b3784e55d479912}{bool\+\_\+t} \hyperlink{ip_8c_ae42b27fb0c6c86b8e29c86f39f0aa449}{ip\+Comp\+Addr} (const \hyperlink{structIpAddr}{Ip\+Addr} $\ast$ip\+Addr1, const \hyperlink{structIpAddr}{Ip\+Addr} $\ast$ip\+Addr2)
\begin{DoxyCompactList}\small\item\em Compare IP addresses. \end{DoxyCompactList}\item 
\hyperlink{compiler__port_8h_a812d16e5494522586b3784e55d479912}{bool\+\_\+t} \hyperlink{ip_8c_aba51017dec530411809b07309cdc7f64}{ip\+Is\+Unspecified\+Addr} (const \hyperlink{structIpAddr}{Ip\+Addr} $\ast$\hyperlink{ipcp_8h_a11542dd5a4de5976a89188df3d53b42d}{ip\+Addr})
\begin{DoxyCompactList}\small\item\em Compare an IP address against the unspecified address. \end{DoxyCompactList}\item 
\hyperlink{compiler__port_8h_a812d16e5494522586b3784e55d479912}{bool\+\_\+t} \hyperlink{ip_8c_a8e993fccc7e63d23280530d3c263dea8}{ip\+Is\+Multicast\+Addr} (const \hyperlink{structIpAddr}{Ip\+Addr} $\ast$\hyperlink{ipcp_8h_a11542dd5a4de5976a89188df3d53b42d}{ip\+Addr})
\begin{DoxyCompactList}\small\item\em Determine whether an IP address is a multicast address. \end{DoxyCompactList}\item 
\hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689c}{error\+\_\+t} \hyperlink{ip_8c_acf118410dcf7a82cb1a22ef1a9956b5d}{ip\+Join\+Multicast\+Group} (\hyperlink{net_8h_a2234db8911a1148c9159979d8f5e0d6b}{Net\+Interface} $\ast$interface, const \hyperlink{structIpAddr}{Ip\+Addr} $\ast$\hyperlink{igmp_8h_ac208f5a1e420b51de0e6e1b18b6ac872}{group\+Addr})
\begin{DoxyCompactList}\small\item\em Join the specified host group. \end{DoxyCompactList}\item 
\hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689c}{error\+\_\+t} \hyperlink{ip_8c_a7c1cdc9285c33d9d872876778432674e}{ip\+Leave\+Multicast\+Group} (\hyperlink{net_8h_a2234db8911a1148c9159979d8f5e0d6b}{Net\+Interface} $\ast$interface, const \hyperlink{structIpAddr}{Ip\+Addr} $\ast$\hyperlink{igmp_8h_ac208f5a1e420b51de0e6e1b18b6ac872}{group\+Addr})
\begin{DoxyCompactList}\small\item\em Leave the specified host group. \end{DoxyCompactList}\item 
\hyperlink{stdint_8h_a273cf69d639a59973b6019625df33e30}{uint16\+\_\+t} \hyperlink{ip_8c_afd9054199d0e6af3029f7326d9b4c2f1}{ip\+Calc\+Checksum} (const void $\ast$\hyperlink{tftp__common_8h_a5c239a1bb87b52b0f1d6d68c4749cd2a}{data}, size\+\_\+t \hyperlink{ppp_8h_ab2b3adeb2a67e656ff030b56727fd0ac}{length})
\begin{DoxyCompactList}\small\item\em IP checksum calculation. \end{DoxyCompactList}\item 
\hyperlink{stdint_8h_a273cf69d639a59973b6019625df33e30}{uint16\+\_\+t} \hyperlink{ip_8c_a888dbaa377c95a06a4d511cb9ec4f278}{ip\+Calc\+Checksum\+Ex} (const \hyperlink{structNetBuffer}{Net\+Buffer} $\ast$buffer, size\+\_\+t \hyperlink{pic32mz_2isr__support_8h_ac0542d92dfcd62c19170fd963f9e5052}{offset}, size\+\_\+t \hyperlink{ppp_8h_ab2b3adeb2a67e656ff030b56727fd0ac}{length})
\begin{DoxyCompactList}\small\item\em Calculate IP checksum over a multi-\/part buffer. \end{DoxyCompactList}\item 
\hyperlink{stdint_8h_a273cf69d639a59973b6019625df33e30}{uint16\+\_\+t} \hyperlink{ip_8c_add813cf9f7b42d261b87ee5488aa8bb4}{ip\+Calc\+Upper\+Layer\+Checksum} (const void $\ast$pseudo\+Header, size\+\_\+t pseudo\+Header\+Len, const void $\ast$\hyperlink{tftp__common_8h_a5c239a1bb87b52b0f1d6d68c4749cd2a}{data}, size\+\_\+t data\+Len)
\begin{DoxyCompactList}\small\item\em Calculate IP upper-\/layer checksum. \end{DoxyCompactList}\item 
\hyperlink{stdint_8h_a273cf69d639a59973b6019625df33e30}{uint16\+\_\+t} \hyperlink{ip_8c_a9ec0593d9dbb2adf3e67894c0349cef3}{ip\+Calc\+Upper\+Layer\+Checksum\+Ex} (const void $\ast$pseudo\+Header, size\+\_\+t pseudo\+Header\+Len, const \hyperlink{structNetBuffer}{Net\+Buffer} $\ast$buffer, size\+\_\+t \hyperlink{pic32mz_2isr__support_8h_ac0542d92dfcd62c19170fd963f9e5052}{offset}, size\+\_\+t \hyperlink{ppp_8h_ab2b3adeb2a67e656ff030b56727fd0ac}{length})
\begin{DoxyCompactList}\small\item\em Calculate IP upper-\/layer checksum over a multi-\/part buffer. \end{DoxyCompactList}\item 
\hyperlink{structNetBuffer}{Net\+Buffer} $\ast$ \hyperlink{ip_8c_a2222fb64b1b18140283119eea309c1b3}{ip\+Alloc\+Buffer} (size\+\_\+t \hyperlink{ppp_8h_ab2b3adeb2a67e656ff030b56727fd0ac}{length}, size\+\_\+t $\ast$\hyperlink{pic32mz_2isr__support_8h_ac0542d92dfcd62c19170fd963f9e5052}{offset})
\begin{DoxyCompactList}\small\item\em Allocate a buffer to hold an IP packet. \end{DoxyCompactList}\item 
\hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689c}{error\+\_\+t} \hyperlink{ip_8c_abb33f7bf7752d5465c08a873fe040b03}{ip\+String\+To\+Addr} (const \hyperlink{compiler__port_8h_a40bb5262bf908c328fbcfbe5d29d0201}{char\+\_\+t} $\ast$str, \hyperlink{structIpAddr}{Ip\+Addr} $\ast$\hyperlink{ipcp_8h_a11542dd5a4de5976a89188df3d53b42d}{ip\+Addr})
\begin{DoxyCompactList}\small\item\em Convert a string representation of an IP address to a binary IP address. \end{DoxyCompactList}\item 
\hyperlink{compiler__port_8h_a40bb5262bf908c328fbcfbe5d29d0201}{char\+\_\+t} $\ast$ \hyperlink{ip_8c_aecdb577de79f65f8c814d5f101c7c6ae}{ip\+Addr\+To\+String} (const \hyperlink{structIpAddr}{Ip\+Addr} $\ast$\hyperlink{ipcp_8h_a11542dd5a4de5976a89188df3d53b42d}{ip\+Addr}, \hyperlink{compiler__port_8h_a40bb5262bf908c328fbcfbe5d29d0201}{char\+\_\+t} $\ast$str)
\begin{DoxyCompactList}\small\item\em Convert a binary IP address to a string representation. \end{DoxyCompactList}\end{DoxyCompactItemize}
\subsection*{Variables}
\begin{DoxyCompactItemize}
\item 
const \hyperlink{structIpAddr}{Ip\+Addr} \hyperlink{ip_8c_a132481a9d89ddf554ea8bbbe342e5d5a}{I\+P\+\_\+\+A\+D\+D\+R\+\_\+\+A\+NY} = \{0\}
\item 
const \hyperlink{structIpAddr}{Ip\+Addr} \hyperlink{ip_8c_ac447cc6e663e8997d7904e712dff7645}{I\+P\+\_\+\+A\+D\+D\+R\+\_\+\+U\+N\+S\+P\+E\+C\+I\+F\+I\+ED} = \{0\}
\end{DoxyCompactItemize}


\subsection{Detailed Description}
I\+Pv4 and I\+Pv6 common routines. 

\hypertarget{pic32mz__ef__curiosity_8h_License}{}\subsection{License}\label{pic32mz__ef__curiosity_8h_License}
S\+P\+D\+X-\/\+License-\/\+Identifier\+: G\+P\+L-\/2.\+0-\/or-\/later

Copyright (C) 2010-\/2019 Oryx Embedded S\+A\+RL. All rights reserved.

This file is part of Cyclone\+T\+CP Open.

This program is free software; you can redistribute it and/or modify it under the terms of the G\+NU General Public License as published by the Free Software Foundation; either version 2 of the License, or (at your option) any later version.

This program is distributed in the hope that it will be useful, but W\+I\+T\+H\+O\+UT A\+NY W\+A\+R\+R\+A\+N\+TY; without even the implied warranty of M\+E\+R\+C\+H\+A\+N\+T\+A\+B\+I\+L\+I\+TY or F\+I\+T\+N\+E\+SS F\+OR A P\+A\+R\+T\+I\+C\+U\+L\+AR P\+U\+R\+P\+O\+SE. See the G\+NU General Public License for more details.

You should have received a copy of the G\+NU General Public License along with this program; if not, write to the Free Software Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-\/1301, U\+SA.

\begin{DoxyAuthor}{Author}
Oryx Embedded S\+A\+RL (www.\+oryx-\/embedded.\+com) 
\end{DoxyAuthor}
\begin{DoxyVersion}{Version}
1.\+9.\+6 
\end{DoxyVersion}


\subsection{Macro Definition Documentation}
\mbox{\Hypertarget{ip_8c_afcdf5e66fd927a7f4cc64295acd20407}\label{ip_8c_afcdf5e66fd927a7f4cc64295acd20407}} 
\index{ip.\+c@{ip.\+c}!T\+R\+A\+C\+E\+\_\+\+L\+E\+V\+EL@{T\+R\+A\+C\+E\+\_\+\+L\+E\+V\+EL}}
\index{T\+R\+A\+C\+E\+\_\+\+L\+E\+V\+EL@{T\+R\+A\+C\+E\+\_\+\+L\+E\+V\+EL}!ip.\+c@{ip.\+c}}
\subsubsection{\texorpdfstring{T\+R\+A\+C\+E\+\_\+\+L\+E\+V\+EL}{TRACE\_LEVEL}}
{\footnotesize\ttfamily \#define T\+R\+A\+C\+E\+\_\+\+L\+E\+V\+EL~\hyperlink{net__config_8h_a38924ec2d411ac5a3215293c64739a27}{I\+P\+\_\+\+T\+R\+A\+C\+E\+\_\+\+L\+E\+V\+EL}}



Definition at line 32 of file ip.\+c.



\subsection{Function Documentation}
\mbox{\Hypertarget{ip_8c_aecdb577de79f65f8c814d5f101c7c6ae}\label{ip_8c_aecdb577de79f65f8c814d5f101c7c6ae}} 
\index{ip.\+c@{ip.\+c}!ip\+Addr\+To\+String@{ip\+Addr\+To\+String}}
\index{ip\+Addr\+To\+String@{ip\+Addr\+To\+String}!ip.\+c@{ip.\+c}}
\subsubsection{\texorpdfstring{ip\+Addr\+To\+String()}{ipAddrToString()}}
{\footnotesize\ttfamily \hyperlink{compiler__port_8h_a40bb5262bf908c328fbcfbe5d29d0201}{char\+\_\+t}$\ast$ ip\+Addr\+To\+String (\begin{DoxyParamCaption}\item[{const \hyperlink{structIpAddr}{Ip\+Addr} $\ast$}]{ip\+Addr,  }\item[{\hyperlink{compiler__port_8h_a40bb5262bf908c328fbcfbe5d29d0201}{char\+\_\+t} $\ast$}]{str }\end{DoxyParamCaption})}



Convert a binary IP address to a string representation. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em ip\+Addr} & Binary representation of the IP address \\
\hline
\mbox{\tt out}  & {\em str} & N\+U\+L\+L-\/terminated string representing the IP address \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Pointer to the formatted string 
\end{DoxyReturn}


Definition at line 726 of file ip.\+c.


\begin{DoxyCode}
727 \{
728 \textcolor{preprocessor}{#if (IPV4\_SUPPORT == ENABLED)}
729    \textcolor{comment}{//IPv4 address?}
730    \textcolor{keywordflow}{if}(ipAddr->\hyperlink{structIpAddr_ae61478bd1e79361fca7dd04a21aeb2f8}{length} == \textcolor{keyword}{sizeof}(\hyperlink{ipv4_8h_a411debb3d770caa0c06d3f73367da37f}{Ipv4Addr}))
731    \{
732       \textcolor{comment}{//Convert IPv4 address to string representation}
733       \textcolor{keywordflow}{return} \hyperlink{ipv4_8c_a6d826409fb54a5cc0ce23c5f88f5c7c1}{ipv4AddrToString}(ipAddr->\hyperlink{structIpAddr_a8de6f49cb0461f57c1eda49bb1088916}{ipv4Addr}, str);
734    \}
735    \textcolor{keywordflow}{else}
736 \textcolor{preprocessor}{#endif}
737 \textcolor{preprocessor}{#if (IPV6\_SUPPORT == ENABLED)}
738    \textcolor{comment}{//IPv6 address?}
739    \textcolor{keywordflow}{if}(ipAddr->\hyperlink{structIpAddr_ae61478bd1e79361fca7dd04a21aeb2f8}{length} == \textcolor{keyword}{sizeof}(\hyperlink{ipv6_8h_aed0cbc40c61ed5b4fb681ebc55237e89}{Ipv6Addr}))
740    \{
741       \textcolor{comment}{//Convert IPv6 address to string representation}
742       \textcolor{keywordflow}{return} \hyperlink{ipv6_8c_a96e27d88ffdf1b2ca6fca448dc6b4e7e}{ipv6AddrToString}(&ipAddr->\hyperlink{structIpAddr_a9bc2340a9c0bc5a0b8aa9695b74e2ee6}{ipv6Addr}, str);
743    \}
744    \textcolor{keywordflow}{else}
745 \textcolor{preprocessor}{#endif}
746    \textcolor{comment}{//Invalid IP address?}
747    \{
748       \textcolor{keyword}{static} \hyperlink{compiler__port_8h_a40bb5262bf908c328fbcfbe5d29d0201}{char\_t} \hyperlink{aria_8c_a5dadc28804036d1b82e1dc027e95c9a6}{c};
749 
750       \textcolor{comment}{//The last parameter is optional}
751       \textcolor{keywordflow}{if}(str == \hyperlink{group__BSPDefine_ga070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL})
752       \{
753          str = &\hyperlink{aria_8c_a5dadc28804036d1b82e1dc027e95c9a6}{c};
754       \}
755 
756       \textcolor{comment}{//Properly terminate the string}
757       str[0] = \textcolor{charliteral}{'\(\backslash\)0'};
758 
759       \textcolor{comment}{//Return an empty string}
760       \textcolor{keywordflow}{return} str;
761    \}
762 \}
\end{DoxyCode}
\mbox{\Hypertarget{ip_8c_a2222fb64b1b18140283119eea309c1b3}\label{ip_8c_a2222fb64b1b18140283119eea309c1b3}} 
\index{ip.\+c@{ip.\+c}!ip\+Alloc\+Buffer@{ip\+Alloc\+Buffer}}
\index{ip\+Alloc\+Buffer@{ip\+Alloc\+Buffer}!ip.\+c@{ip.\+c}}
\subsubsection{\texorpdfstring{ip\+Alloc\+Buffer()}{ipAllocBuffer()}}
{\footnotesize\ttfamily \hyperlink{structNetBuffer}{Net\+Buffer}$\ast$ ip\+Alloc\+Buffer (\begin{DoxyParamCaption}\item[{size\+\_\+t}]{length,  }\item[{size\+\_\+t $\ast$}]{offset }\end{DoxyParamCaption})}



Allocate a buffer to hold an IP packet. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em length} & Desired payload length \\
\hline
\mbox{\tt out}  & {\em offset} & Offset to the first byte of the payload \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
The function returns a pointer to the newly allocated buffer. If the system is out of resources, N\+U\+LL is returned 
\end{DoxyReturn}


Definition at line 637 of file ip.\+c.


\begin{DoxyCode}
638 \{
639    \textcolor{keywordtype}{size\_t} headerLen;
640    \hyperlink{structNetBuffer}{NetBuffer} *buffer;
641 
642 \textcolor{preprocessor}{#if (IPV6\_SUPPORT == ENABLED)}
643    \textcolor{comment}{//Maximum overhead when using IPv6}
644    headerLen = \textcolor{keyword}{sizeof}(\hyperlink{ipv6_8h_ad553284c12e3a0d96dc8a4da1c5f6ea0}{Ipv6Header}) + \textcolor{keyword}{sizeof}(\hyperlink{ipv6_8h_a913212d430a91f9afdf68306327c7cb3}{Ipv6FragmentHeader});
645 \textcolor{preprocessor}{#else}
646    \textcolor{comment}{//Maximum overhead when using IPv4}
647    headerLen = \textcolor{keyword}{sizeof}(\hyperlink{ipv4_8h_a294daf3717d3c22ffb24cbd3485ddbfc}{Ipv4Header});
648 \textcolor{preprocessor}{#endif}
649 
650 \textcolor{preprocessor}{#if (ETH\_SUPPORT == ENABLED)}
651    \textcolor{comment}{//Allocate a buffer to hold the Ethernet header and the IP packet}
652    buffer = \hyperlink{ethernet_8c_aadabeac7d0393741647e30f80f482c84}{ethAllocBuffer}(\hyperlink{dtls__misc_8h_ab43ca82dd7fa2a0e56f941032ef324c4}{length} + headerLen, \hyperlink{pic32mz_2isr__support_8h_a12a5aed8a193ebbf9a641104a310610d}{offset});
653 \textcolor{preprocessor}{#elif (PPP\_SUPPORT == ENABLED)}
654    \textcolor{comment}{//Allocate a buffer to hold the PPP header and the IP packet}
655    buffer = \hyperlink{ppp_8c_a9100186e00aec050c4952fd462b035aa}{pppAllocBuffer}(\hyperlink{dtls__misc_8h_ab43ca82dd7fa2a0e56f941032ef324c4}{length} + headerLen, \hyperlink{pic32mz_2isr__support_8h_a12a5aed8a193ebbf9a641104a310610d}{offset});
656 \textcolor{preprocessor}{#else}
657    \textcolor{comment}{//Allocate a buffer to hold the IP packet}
658    buffer = \hyperlink{net__mem_8c_a986c9991e530e99528faa4c43efadc6f}{netBufferAlloc}(\hyperlink{dtls__misc_8h_ab43ca82dd7fa2a0e56f941032ef324c4}{length} + headerLen);
659    \textcolor{comment}{//Clear offset value}
660    *\hyperlink{pic32mz_2isr__support_8h_a12a5aed8a193ebbf9a641104a310610d}{offset} = 0;
661 \textcolor{preprocessor}{#endif}
662 
663    \textcolor{comment}{//Successful memory allocation?}
664    \textcolor{keywordflow}{if}(buffer != \hyperlink{group__BSPDefine_ga070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL})
665    \{
666       \textcolor{comment}{//Offset to the first byte of the payload}
667       *\hyperlink{pic32mz_2isr__support_8h_a12a5aed8a193ebbf9a641104a310610d}{offset} += headerLen;
668    \}
669 
670    \textcolor{comment}{//Return a pointer to the freshly allocated buffer}
671    \textcolor{keywordflow}{return} buffer;
672 \}
\end{DoxyCode}
\mbox{\Hypertarget{ip_8c_afd9054199d0e6af3029f7326d9b4c2f1}\label{ip_8c_afd9054199d0e6af3029f7326d9b4c2f1}} 
\index{ip.\+c@{ip.\+c}!ip\+Calc\+Checksum@{ip\+Calc\+Checksum}}
\index{ip\+Calc\+Checksum@{ip\+Calc\+Checksum}!ip.\+c@{ip.\+c}}
\subsubsection{\texorpdfstring{ip\+Calc\+Checksum()}{ipCalcChecksum()}}
{\footnotesize\ttfamily \hyperlink{stdint_8h_a273cf69d639a59973b6019625df33e30}{uint16\+\_\+t} ip\+Calc\+Checksum (\begin{DoxyParamCaption}\item[{const void $\ast$}]{data,  }\item[{size\+\_\+t}]{length }\end{DoxyParamCaption})}



IP checksum calculation. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em data} & Pointer to the data over which to calculate the IP checksum \\
\hline
\mbox{\tt in}  & {\em length} & Number of bytes to process \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Checksum value 
\end{DoxyReturn}


Definition at line 392 of file ip.\+c.


\begin{DoxyCode}
393 \{
394    \hyperlink{stdint_8h_a435d1572bf3f880d55459d9805097f62}{uint32\_t} temp;
395    \hyperlink{stdint_8h_a435d1572bf3f880d55459d9805097f62}{uint32\_t} \hyperlink{tcp_8h_a6796c847bbd16253ce2538754c250bd6}{checksum};
396    \textcolor{keyword}{const} \hyperlink{stdint_8h_aba7bc1797add20fe3efdf37ced1182c5}{uint8\_t} *\hyperlink{ndp_8h_a6519522ad9a6f45e7a8d25d31392a977}{p};
397 
398    \textcolor{comment}{//Checksum preset value}
399    checksum = 0x0000;
400 
401    \textcolor{comment}{//Point to the data over which to calculate the IP checksum}
402    p = (\textcolor{keyword}{const} \hyperlink{stdint_8h_aba7bc1797add20fe3efdf37ced1182c5}{uint8\_t} *) \hyperlink{dtls__misc_8h_a5c239a1bb87b52b0f1d6d68c4749cd2a}{data};
403 
404    \textcolor{comment}{//Pointer not aligned on a 16-bit boundary?}
405    \textcolor{keywordflow}{if}(((\hyperlink{compiler__port_8h_a12a1e9b3ce141648783a82445d02b58d}{uint\_t}) p & 1) != 0)
406    \{
407       \textcolor{keywordflow}{if}(\hyperlink{dtls__misc_8h_ab43ca82dd7fa2a0e56f941032ef324c4}{length} >= 1)
408       \{
409 \textcolor{preprocessor}{#ifdef \_CPU\_BIG\_ENDIAN}
410          \textcolor{comment}{//Update checksum value}
411          checksum += (\hyperlink{stdint_8h_a435d1572bf3f880d55459d9805097f62}{uint32\_t}) *p;
412 \textcolor{preprocessor}{#else}
413          \textcolor{comment}{//Update checksum value}
414          checksum += (\hyperlink{stdint_8h_a435d1572bf3f880d55459d9805097f62}{uint32\_t}) *p << 8;
415 \textcolor{preprocessor}{#endif}
416          \textcolor{comment}{//Restore the alignment on 16-bit boundaries}
417          p++;
418          \textcolor{comment}{//Number of bytes left to process}
419          \hyperlink{dtls__misc_8h_ab43ca82dd7fa2a0e56f941032ef324c4}{length}--;
420       \}
421    \}
422 
423    \textcolor{comment}{//Pointer not aligned on a 32-bit boundary?}
424    \textcolor{keywordflow}{if}(((\hyperlink{compiler__port_8h_a12a1e9b3ce141648783a82445d02b58d}{uint\_t}) p & 2) != 0)
425    \{
426       \textcolor{keywordflow}{if}(\hyperlink{dtls__misc_8h_ab43ca82dd7fa2a0e56f941032ef324c4}{length} >= 2)
427       \{
428          \textcolor{comment}{//Update checksum value}
429          checksum += (\hyperlink{stdint_8h_a435d1572bf3f880d55459d9805097f62}{uint32\_t}) *((\hyperlink{stdint_8h_a273cf69d639a59973b6019625df33e30}{uint16\_t} *) \hyperlink{ndp_8h_a6519522ad9a6f45e7a8d25d31392a977}{p});
430 
431          \textcolor{comment}{//Restore the alignment on 32-bit boundaries}
432          p += 2;
433          \textcolor{comment}{//Number of bytes left to process}
434          \hyperlink{dtls__misc_8h_ab43ca82dd7fa2a0e56f941032ef324c4}{length} -= 2;
435       \}
436    \}
437 
438    \textcolor{comment}{//Process the data 4 bytes at a time}
439    \textcolor{keywordflow}{while}(\hyperlink{dtls__misc_8h_ab43ca82dd7fa2a0e56f941032ef324c4}{length} >= 4)
440    \{
441       \textcolor{comment}{//Update checksum value}
442       temp = checksum + *((\hyperlink{stdint_8h_a435d1572bf3f880d55459d9805097f62}{uint32\_t} *) p);
443 
444       \textcolor{comment}{//Add carry bit, if any}
445       \textcolor{keywordflow}{if}(temp < checksum)
446       \{
447          checksum = temp + 1;
448       \}
449       \textcolor{keywordflow}{else}
450       \{
451          checksum = temp;
452       \}
453 
454       \textcolor{comment}{//Point to the next 32-bit word}
455       p += 4;
456       \textcolor{comment}{//Number of bytes left to process}
457       \hyperlink{dtls__misc_8h_ab43ca82dd7fa2a0e56f941032ef324c4}{length} -= 4;
458    \}
459 
460    \textcolor{comment}{//Fold 32-bit sum to 16 bits}
461    checksum = (checksum & 0xFFFF) + (checksum >> 16);
462 
463    \textcolor{comment}{//Add left-over 16-bit word, if any}
464    \textcolor{keywordflow}{if}(\hyperlink{dtls__misc_8h_ab43ca82dd7fa2a0e56f941032ef324c4}{length} >= 2)
465    \{
466       \textcolor{comment}{//Update checksum value}
467       checksum += (\hyperlink{stdint_8h_a435d1572bf3f880d55459d9805097f62}{uint32\_t}) *((\hyperlink{stdint_8h_a273cf69d639a59973b6019625df33e30}{uint16\_t} *) \hyperlink{ndp_8h_a6519522ad9a6f45e7a8d25d31392a977}{p});
468 
469       \textcolor{comment}{//Point to the next byte}
470       p += 2;
471       \textcolor{comment}{//Number of bytes left to process}
472       \hyperlink{dtls__misc_8h_ab43ca82dd7fa2a0e56f941032ef324c4}{length} -= 2;
473    \}
474 
475    \textcolor{comment}{//Add left-over byte, if any}
476    \textcolor{keywordflow}{if}(\hyperlink{dtls__misc_8h_ab43ca82dd7fa2a0e56f941032ef324c4}{length} >= 1)
477    \{
478 \textcolor{preprocessor}{#ifdef \_CPU\_BIG\_ENDIAN}
479       \textcolor{comment}{//Update checksum value}
480       checksum += (\hyperlink{stdint_8h_a435d1572bf3f880d55459d9805097f62}{uint32\_t}) *p << 8;
481 \textcolor{preprocessor}{#else}
482       \textcolor{comment}{//Update checksum value}
483       checksum += (\hyperlink{stdint_8h_a435d1572bf3f880d55459d9805097f62}{uint32\_t}) *p;
484 \textcolor{preprocessor}{#endif}
485    \}
486 
487    \textcolor{comment}{//Fold 32-bit sum to 16 bits (first pass)}
488    checksum = (checksum & 0xFFFF) + (checksum >> 16);
489    \textcolor{comment}{//Fold 32-bit sum to 16 bits (second pass)}
490    checksum = (checksum & 0xFFFF) + (checksum >> 16);
491 
492    \textcolor{comment}{//Restore checksum endianness}
493    \textcolor{keywordflow}{if}(((\hyperlink{compiler__port_8h_a12a1e9b3ce141648783a82445d02b58d}{uint\_t}) \hyperlink{dtls__misc_8h_a5c239a1bb87b52b0f1d6d68c4749cd2a}{data} & 1) != 0)
494    \{
495       \textcolor{comment}{//Swap checksum value}
496       checksum = ((checksum >> 8) | (checksum << 8)) & 0xFFFF;
497    \}
498 
499    \textcolor{comment}{//Return 1's complement value}
500    \textcolor{keywordflow}{return} checksum ^ 0xFFFF;
501 \}
\end{DoxyCode}
\mbox{\Hypertarget{ip_8c_a888dbaa377c95a06a4d511cb9ec4f278}\label{ip_8c_a888dbaa377c95a06a4d511cb9ec4f278}} 
\index{ip.\+c@{ip.\+c}!ip\+Calc\+Checksum\+Ex@{ip\+Calc\+Checksum\+Ex}}
\index{ip\+Calc\+Checksum\+Ex@{ip\+Calc\+Checksum\+Ex}!ip.\+c@{ip.\+c}}
\subsubsection{\texorpdfstring{ip\+Calc\+Checksum\+Ex()}{ipCalcChecksumEx()}}
{\footnotesize\ttfamily \hyperlink{stdint_8h_a273cf69d639a59973b6019625df33e30}{uint16\+\_\+t} ip\+Calc\+Checksum\+Ex (\begin{DoxyParamCaption}\item[{const \hyperlink{structNetBuffer}{Net\+Buffer} $\ast$}]{buffer,  }\item[{size\+\_\+t}]{offset,  }\item[{size\+\_\+t}]{length }\end{DoxyParamCaption})}



Calculate IP checksum over a multi-\/part buffer. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em buffer} & Pointer to the multi-\/part buffer \\
\hline
\mbox{\tt in}  & {\em offset} & Offset from the beginning of the buffer \\
\hline
\mbox{\tt in}  & {\em length} & Number of bytes to process \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Checksum value 
\end{DoxyReturn}


Definition at line 512 of file ip.\+c.


\begin{DoxyCode}
513 \{
514    \hyperlink{compiler__port_8h_a12a1e9b3ce141648783a82445d02b58d}{uint\_t} i;
515    \hyperlink{compiler__port_8h_a12a1e9b3ce141648783a82445d02b58d}{uint\_t} \hyperlink{dhcpv6__common_8h_a5a648f5ec00c526b0dfa2df7a272c6c0}{n};
516    \hyperlink{compiler__port_8h_a12a1e9b3ce141648783a82445d02b58d}{uint\_t} pos;
517    \hyperlink{stdint_8h_aba7bc1797add20fe3efdf37ced1182c5}{uint8\_t} *\hyperlink{dtls__misc_8h_a5c239a1bb87b52b0f1d6d68c4749cd2a}{data};
518    \hyperlink{stdint_8h_a435d1572bf3f880d55459d9805097f62}{uint32\_t} \hyperlink{tcp_8h_a6796c847bbd16253ce2538754c250bd6}{checksum};
519 
520    \textcolor{comment}{//Checksum preset value}
521    checksum = 0x0000;
522 
523    \textcolor{comment}{//Current position in the multi-part buffer}
524    pos = 0;
525 
526    \textcolor{comment}{//Loop through data chunks}
527    \textcolor{keywordflow}{for}(i = 0; i < buffer->\hyperlink{structNetBuffer_a43ab1f87d0236d4e01c19ff14f899618}{chunkCount} && pos < \hyperlink{dtls__misc_8h_ab43ca82dd7fa2a0e56f941032ef324c4}{length}; i++)
528    \{
529       \textcolor{comment}{//Is there any data to process in the current chunk?}
530       \textcolor{keywordflow}{if}(offset < buffer->chunk[i].length)
531       \{
532          \textcolor{comment}{//Point to the first data byte}
533          data = (\hyperlink{stdint_8h_aba7bc1797add20fe3efdf37ced1182c5}{uint8\_t} *) buffer->\hyperlink{structNetBuffer_a5d399f3f37224030dcac9c4da3ca41eb}{chunk}[i].\hyperlink{structChunkDesc_a014aac6efdc5722e058a9b67ca5f8358}{address} + \hyperlink{pic32mz_2isr__support_8h_a12a5aed8a193ebbf9a641104a310610d}{offset};
534 
535          \textcolor{comment}{//Number of bytes available in the current chunk}
536          n = buffer->\hyperlink{structNetBuffer_a5d399f3f37224030dcac9c4da3ca41eb}{chunk}[i].\hyperlink{structChunkDesc_a4bdd57a9363511126fe5cd6d30c51c81}{length} - \hyperlink{pic32mz_2isr__support_8h_a12a5aed8a193ebbf9a641104a310610d}{offset};
537          \textcolor{comment}{//Limit the number of byte to process}
538          n = \hyperlink{os__port_8h_a3acffbd305ee72dcd4593c0d8af64a4f}{MIN}(n, length - pos);
539 
540          \textcolor{comment}{//Take care of alignment issues}
541          \textcolor{keywordflow}{if}((pos & 1) != 0)
542          \{
543             \textcolor{comment}{//Swap checksum value}
544             checksum = ((checksum >> 8) | (checksum << 8)) & 0xFFFF;
545          \}
546 
547          \textcolor{comment}{//Process data chunk}
548          checksum += \hyperlink{ip_8c_afd9054199d0e6af3029f7326d9b4c2f1}{ipCalcChecksum}(data, n) ^ 0xFFFF;
549          \textcolor{comment}{//Fold 32-bit sum to 16 bits}
550          checksum = (checksum & 0xFFFF) + (checksum >> 16);
551 
552          \textcolor{comment}{//Restore checksum endianness}
553          \textcolor{keywordflow}{if}((pos & 1) != 0)
554          \{
555             \textcolor{comment}{//Swap checksum value}
556             checksum = ((checksum >> 8) | (checksum << 8)) & 0xFFFF;
557          \}
558 
559          \textcolor{comment}{//Advance current position}
560          pos += \hyperlink{dhcpv6__common_8h_a5a648f5ec00c526b0dfa2df7a272c6c0}{n};
561          \textcolor{comment}{//Process the next block from the start}
562          \hyperlink{pic32mz_2isr__support_8h_a12a5aed8a193ebbf9a641104a310610d}{offset} = 0;
563       \}
564       \textcolor{keywordflow}{else}
565       \{
566          \textcolor{comment}{//Skip the current chunk}
567          \hyperlink{pic32mz_2isr__support_8h_a12a5aed8a193ebbf9a641104a310610d}{offset} -= buffer->\hyperlink{structNetBuffer_a5d399f3f37224030dcac9c4da3ca41eb}{chunk}[i].\hyperlink{structChunkDesc_a4bdd57a9363511126fe5cd6d30c51c81}{length};
568       \}
569    \}
570 
571    \textcolor{comment}{//Return 1's complement value}
572    \textcolor{keywordflow}{return} checksum ^ 0xFFFF;
573 \}
\end{DoxyCode}
\mbox{\Hypertarget{ip_8c_add813cf9f7b42d261b87ee5488aa8bb4}\label{ip_8c_add813cf9f7b42d261b87ee5488aa8bb4}} 
\index{ip.\+c@{ip.\+c}!ip\+Calc\+Upper\+Layer\+Checksum@{ip\+Calc\+Upper\+Layer\+Checksum}}
\index{ip\+Calc\+Upper\+Layer\+Checksum@{ip\+Calc\+Upper\+Layer\+Checksum}!ip.\+c@{ip.\+c}}
\subsubsection{\texorpdfstring{ip\+Calc\+Upper\+Layer\+Checksum()}{ipCalcUpperLayerChecksum()}}
{\footnotesize\ttfamily \hyperlink{stdint_8h_a273cf69d639a59973b6019625df33e30}{uint16\+\_\+t} ip\+Calc\+Upper\+Layer\+Checksum (\begin{DoxyParamCaption}\item[{const void $\ast$}]{pseudo\+Header,  }\item[{size\+\_\+t}]{pseudo\+Header\+Len,  }\item[{const void $\ast$}]{data,  }\item[{size\+\_\+t}]{data\+Len }\end{DoxyParamCaption})}



Calculate IP upper-\/layer checksum. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em pseudo\+Header} & Pointer to the pseudo header \\
\hline
\mbox{\tt in}  & {\em pseudo\+Header\+Len} & Pseudo header length \\
\hline
\mbox{\tt in}  & {\em data} & Pointer to the upper-\/layer data \\
\hline
\mbox{\tt in}  & {\em data\+Len} & Upper-\/layer data length \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Checksum value 
\end{DoxyReturn}


Definition at line 585 of file ip.\+c.


\begin{DoxyCode}
587 \{
588    \hyperlink{stdint_8h_a435d1572bf3f880d55459d9805097f62}{uint32\_t} \hyperlink{tcp_8h_a6796c847bbd16253ce2538754c250bd6}{checksum};
589 
590    \textcolor{comment}{//Process pseudo header}
591    checksum = \hyperlink{ip_8c_afd9054199d0e6af3029f7326d9b4c2f1}{ipCalcChecksum}(pseudoHeader, pseudoHeaderLen) ^ 0xFFFF;
592    \textcolor{comment}{//Process upper-layer data}
593    checksum += \hyperlink{ip_8c_afd9054199d0e6af3029f7326d9b4c2f1}{ipCalcChecksum}(\hyperlink{dtls__misc_8h_a5c239a1bb87b52b0f1d6d68c4749cd2a}{data}, dataLen) ^ 0xFFFF;
594    \textcolor{comment}{//Fold 32-bit sum to 16 bits}
595    checksum = (checksum & 0xFFFF) + (checksum >> 16);
596 
597    \textcolor{comment}{//Return 1's complement value}
598    \textcolor{keywordflow}{return} checksum ^ 0xFFFF;
599 \}
\end{DoxyCode}
\mbox{\Hypertarget{ip_8c_a9ec0593d9dbb2adf3e67894c0349cef3}\label{ip_8c_a9ec0593d9dbb2adf3e67894c0349cef3}} 
\index{ip.\+c@{ip.\+c}!ip\+Calc\+Upper\+Layer\+Checksum\+Ex@{ip\+Calc\+Upper\+Layer\+Checksum\+Ex}}
\index{ip\+Calc\+Upper\+Layer\+Checksum\+Ex@{ip\+Calc\+Upper\+Layer\+Checksum\+Ex}!ip.\+c@{ip.\+c}}
\subsubsection{\texorpdfstring{ip\+Calc\+Upper\+Layer\+Checksum\+Ex()}{ipCalcUpperLayerChecksumEx()}}
{\footnotesize\ttfamily \hyperlink{stdint_8h_a273cf69d639a59973b6019625df33e30}{uint16\+\_\+t} ip\+Calc\+Upper\+Layer\+Checksum\+Ex (\begin{DoxyParamCaption}\item[{const void $\ast$}]{pseudo\+Header,  }\item[{size\+\_\+t}]{pseudo\+Header\+Len,  }\item[{const \hyperlink{structNetBuffer}{Net\+Buffer} $\ast$}]{buffer,  }\item[{size\+\_\+t}]{offset,  }\item[{size\+\_\+t}]{length }\end{DoxyParamCaption})}



Calculate IP upper-\/layer checksum over a multi-\/part buffer. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em pseudo\+Header} & Pointer to the pseudo header \\
\hline
\mbox{\tt in}  & {\em pseudo\+Header\+Len} & Pseudo header length \\
\hline
\mbox{\tt in}  & {\em buffer} & Multi-\/part buffer containing the upper-\/layer data \\
\hline
\mbox{\tt in}  & {\em offset} & Offset from the first data byte to process \\
\hline
\mbox{\tt in}  & {\em length} & Number of data bytes to process \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Checksum value 
\end{DoxyReturn}


Definition at line 612 of file ip.\+c.


\begin{DoxyCode}
614 \{
615    \hyperlink{stdint_8h_a435d1572bf3f880d55459d9805097f62}{uint32\_t} \hyperlink{tcp_8h_a6796c847bbd16253ce2538754c250bd6}{checksum};
616 
617    \textcolor{comment}{//Process pseudo header}
618    checksum = \hyperlink{ip_8c_afd9054199d0e6af3029f7326d9b4c2f1}{ipCalcChecksum}(pseudoHeader, pseudoHeaderLen) ^ 0xFFFF;
619    \textcolor{comment}{//Process upper-layer data}
620    checksum += \hyperlink{ip_8c_a888dbaa377c95a06a4d511cb9ec4f278}{ipCalcChecksumEx}(buffer, \hyperlink{pic32mz_2isr__support_8h_a12a5aed8a193ebbf9a641104a310610d}{offset}, \hyperlink{dtls__misc_8h_ab43ca82dd7fa2a0e56f941032ef324c4}{length}) ^ 0xFFFF;
621    \textcolor{comment}{//Fold 32-bit sum to 16 bits}
622    checksum = (checksum & 0xFFFF) + (checksum >> 16);
623 
624    \textcolor{comment}{//Return 1's complement value}
625    \textcolor{keywordflow}{return} checksum ^ 0xFFFF;
626 \}
\end{DoxyCode}
\mbox{\Hypertarget{ip_8c_ae42b27fb0c6c86b8e29c86f39f0aa449}\label{ip_8c_ae42b27fb0c6c86b8e29c86f39f0aa449}} 
\index{ip.\+c@{ip.\+c}!ip\+Comp\+Addr@{ip\+Comp\+Addr}}
\index{ip\+Comp\+Addr@{ip\+Comp\+Addr}!ip.\+c@{ip.\+c}}
\subsubsection{\texorpdfstring{ip\+Comp\+Addr()}{ipCompAddr()}}
{\footnotesize\ttfamily \hyperlink{compiler__port_8h_a812d16e5494522586b3784e55d479912}{bool\+\_\+t} ip\+Comp\+Addr (\begin{DoxyParamCaption}\item[{const \hyperlink{structIpAddr}{Ip\+Addr} $\ast$}]{ip\+Addr1,  }\item[{const \hyperlink{structIpAddr}{Ip\+Addr} $\ast$}]{ip\+Addr2 }\end{DoxyParamCaption})}



Compare IP addresses. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em ip\+Addr1} & First IP address \\
\hline
\mbox{\tt in}  & {\em ip\+Addr2} & Second IP address \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Comparison result 
\end{DoxyReturn}


Definition at line 158 of file ip.\+c.


\begin{DoxyCode}
159 \{
160    \hyperlink{compiler__port_8h_a812d16e5494522586b3784e55d479912}{bool\_t} result;
161 
162 \textcolor{preprocessor}{#if (IPV4\_SUPPORT == ENABLED)}
163    \textcolor{comment}{//IPv4 addresses?}
164    \textcolor{keywordflow}{if}(ipAddr1->\hyperlink{structIpAddr_ae61478bd1e79361fca7dd04a21aeb2f8}{length} == \textcolor{keyword}{sizeof}(\hyperlink{ipv4_8h_a411debb3d770caa0c06d3f73367da37f}{Ipv4Addr}) && ipAddr2->\hyperlink{structIpAddr_ae61478bd1e79361fca7dd04a21aeb2f8}{length} == \textcolor{keyword}{sizeof}(
      \hyperlink{ipv4_8h_a411debb3d770caa0c06d3f73367da37f}{Ipv4Addr}))
165    \{
166       \textcolor{comment}{//Compare IPv4 addresses}
167       \textcolor{keywordflow}{if}(ipAddr1->\hyperlink{structIpAddr_a8de6f49cb0461f57c1eda49bb1088916}{ipv4Addr} == ipAddr2->\hyperlink{structIpAddr_a8de6f49cb0461f57c1eda49bb1088916}{ipv4Addr})
168       \{
169          result = \hyperlink{os__port_8h_aa8cecfc5c5c054d2875c03e77b7be15d}{TRUE};
170       \}
171       \textcolor{keywordflow}{else}
172       \{
173          result = \hyperlink{os__port_8h_aa93f0eb578d23995850d61f7d61c55c1}{FALSE};
174       \}
175    \}
176    \textcolor{keywordflow}{else}
177 \textcolor{preprocessor}{#endif}
178 \textcolor{preprocessor}{#if (IPV6\_SUPPORT == ENABLED)}
179    \textcolor{comment}{//IPv6 addresses?}
180    \textcolor{keywordflow}{if}(ipAddr1->\hyperlink{structIpAddr_ae61478bd1e79361fca7dd04a21aeb2f8}{length} == \textcolor{keyword}{sizeof}(\hyperlink{ipv6_8h_aed0cbc40c61ed5b4fb681ebc55237e89}{Ipv6Addr}) && ipAddr2->\hyperlink{structIpAddr_ae61478bd1e79361fca7dd04a21aeb2f8}{length} == \textcolor{keyword}{sizeof}(
      \hyperlink{ipv6_8h_aed0cbc40c61ed5b4fb681ebc55237e89}{Ipv6Addr}))
181    \{
182       \textcolor{comment}{//Compare IPv6 addresses}
183       result = \hyperlink{ipv6_8h_ab1e93bd2152bc3f3b5642fd0216384d7}{ipv6CompAddr}(&ipAddr1->\hyperlink{structIpAddr_a9bc2340a9c0bc5a0b8aa9695b74e2ee6}{ipv6Addr}, &ipAddr2->
      \hyperlink{structIpAddr_a9bc2340a9c0bc5a0b8aa9695b74e2ee6}{ipv6Addr});
184    \}
185    \textcolor{keywordflow}{else}
186 \textcolor{preprocessor}{#endif}
187    \textcolor{comment}{//Unspecified IP addresses?}
188    \textcolor{keywordflow}{if}(ipAddr1->\hyperlink{structIpAddr_ae61478bd1e79361fca7dd04a21aeb2f8}{length} == 0 && ipAddr2->\hyperlink{structIpAddr_ae61478bd1e79361fca7dd04a21aeb2f8}{length} == 0)
189    \{
190       result = \hyperlink{os__port_8h_aa8cecfc5c5c054d2875c03e77b7be15d}{TRUE};
191    \}
192    \textcolor{comment}{//Invalid IP addresses?}
193    \textcolor{keywordflow}{else}
194    \{
195       result = \hyperlink{os__port_8h_aa93f0eb578d23995850d61f7d61c55c1}{FALSE};
196    \}
197 
198    \textcolor{comment}{//Return TRUE if the IP addresses match, else FALSE}
199    \textcolor{keywordflow}{return} result;
200 \}
\end{DoxyCode}
\mbox{\Hypertarget{ip_8c_a8e993fccc7e63d23280530d3c263dea8}\label{ip_8c_a8e993fccc7e63d23280530d3c263dea8}} 
\index{ip.\+c@{ip.\+c}!ip\+Is\+Multicast\+Addr@{ip\+Is\+Multicast\+Addr}}
\index{ip\+Is\+Multicast\+Addr@{ip\+Is\+Multicast\+Addr}!ip.\+c@{ip.\+c}}
\subsubsection{\texorpdfstring{ip\+Is\+Multicast\+Addr()}{ipIsMulticastAddr()}}
{\footnotesize\ttfamily \hyperlink{compiler__port_8h_a812d16e5494522586b3784e55d479912}{bool\+\_\+t} ip\+Is\+Multicast\+Addr (\begin{DoxyParamCaption}\item[{const \hyperlink{structIpAddr}{Ip\+Addr} $\ast$}]{ip\+Addr }\end{DoxyParamCaption})}



Determine whether an IP address is a multicast address. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em ip\+Addr} & IP address \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
T\+R\+UE if the IP address is a multicast address, else F\+A\+L\+SE 
\end{DoxyReturn}


Definition at line 254 of file ip.\+c.


\begin{DoxyCode}
255 \{
256    \hyperlink{compiler__port_8h_a812d16e5494522586b3784e55d479912}{bool\_t} result;
257 
258 \textcolor{preprocessor}{#if (IPV4\_SUPPORT == ENABLED)}
259    \textcolor{comment}{//IPv4 address?}
260    \textcolor{keywordflow}{if}(ipAddr->\hyperlink{structIpAddr_ae61478bd1e79361fca7dd04a21aeb2f8}{length} == \textcolor{keyword}{sizeof}(\hyperlink{ipv4_8h_a411debb3d770caa0c06d3f73367da37f}{Ipv4Addr}))
261    \{
262       \textcolor{comment}{//Check whether the IPv4 address is a multicast address}
263       result = \hyperlink{ipv4_8h_aada5b622e70acf16bd1cd5a9c08ea107}{ipv4IsMulticastAddr}(ipAddr->\hyperlink{structIpAddr_a8de6f49cb0461f57c1eda49bb1088916}{ipv4Addr});
264    \}
265    \textcolor{keywordflow}{else}
266 \textcolor{preprocessor}{#endif}
267 \textcolor{preprocessor}{#if (IPV6\_SUPPORT == ENABLED)}
268    \textcolor{comment}{//IPv6 address?}
269    \textcolor{keywordflow}{if}(ipAddr->\hyperlink{structIpAddr_ae61478bd1e79361fca7dd04a21aeb2f8}{length} == \textcolor{keyword}{sizeof}(\hyperlink{ipv6_8h_aed0cbc40c61ed5b4fb681ebc55237e89}{Ipv6Addr}))
270    \{
271       \textcolor{comment}{//Check whether the IPv6 address is a multicast address}
272       result = \hyperlink{ipv6_8h_a68fbc1145d242384c90a670196a38495}{ipv6IsMulticastAddr}(&ipAddr->\hyperlink{structIpAddr_a9bc2340a9c0bc5a0b8aa9695b74e2ee6}{ipv6Addr});
273    \}
274    \textcolor{keywordflow}{else}
275 \textcolor{preprocessor}{#endif}
276    \textcolor{comment}{//Invalid IP address?}
277    \{
278       result = \hyperlink{os__port_8h_aa93f0eb578d23995850d61f7d61c55c1}{FALSE};
279    \}
280 
281    \textcolor{comment}{//Return TRUE if the IP address is a multicast address, else FALSE}
282    \textcolor{keywordflow}{return} result;
283 \}
\end{DoxyCode}
\mbox{\Hypertarget{ip_8c_aba51017dec530411809b07309cdc7f64}\label{ip_8c_aba51017dec530411809b07309cdc7f64}} 
\index{ip.\+c@{ip.\+c}!ip\+Is\+Unspecified\+Addr@{ip\+Is\+Unspecified\+Addr}}
\index{ip\+Is\+Unspecified\+Addr@{ip\+Is\+Unspecified\+Addr}!ip.\+c@{ip.\+c}}
\subsubsection{\texorpdfstring{ip\+Is\+Unspecified\+Addr()}{ipIsUnspecifiedAddr()}}
{\footnotesize\ttfamily \hyperlink{compiler__port_8h_a812d16e5494522586b3784e55d479912}{bool\+\_\+t} ip\+Is\+Unspecified\+Addr (\begin{DoxyParamCaption}\item[{const \hyperlink{structIpAddr}{Ip\+Addr} $\ast$}]{ip\+Addr }\end{DoxyParamCaption})}



Compare an IP address against the unspecified address. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em ip\+Addr} & IP address \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
T\+R\+UE if the IP address is unspecified, else F\+A\+L\+SE 
\end{DoxyReturn}


Definition at line 209 of file ip.\+c.


\begin{DoxyCode}
210 \{
211    \hyperlink{compiler__port_8h_a812d16e5494522586b3784e55d479912}{bool\_t} result;
212 
213 \textcolor{preprocessor}{#if (IPV4\_SUPPORT == ENABLED)}
214    \textcolor{comment}{//IPv4 address?}
215    \textcolor{keywordflow}{if}(ipAddr->\hyperlink{structIpAddr_ae61478bd1e79361fca7dd04a21aeb2f8}{length} == \textcolor{keyword}{sizeof}(\hyperlink{ipv4_8h_a411debb3d770caa0c06d3f73367da37f}{Ipv4Addr}))
216    \{
217       \textcolor{comment}{//Compare IPv4 address}
218       \textcolor{keywordflow}{if}(ipAddr->\hyperlink{structIpAddr_a8de6f49cb0461f57c1eda49bb1088916}{ipv4Addr} == \hyperlink{ipv4_8h_aa9d277a6ff68d361eaf48d6af73e78e8}{IPV4\_UNSPECIFIED\_ADDR})
219       \{
220          result = \hyperlink{os__port_8h_aa8cecfc5c5c054d2875c03e77b7be15d}{TRUE};
221       \}
222       \textcolor{keywordflow}{else}
223       \{
224          result = \hyperlink{os__port_8h_aa93f0eb578d23995850d61f7d61c55c1}{FALSE};
225       \}
226    \}
227    \textcolor{keywordflow}{else}
228 \textcolor{preprocessor}{#endif}
229 \textcolor{preprocessor}{#if (IPV6\_SUPPORT == ENABLED)}
230    \textcolor{comment}{//IPv6 address?}
231    \textcolor{keywordflow}{if}(ipAddr->\hyperlink{structIpAddr_ae61478bd1e79361fca7dd04a21aeb2f8}{length} == \textcolor{keyword}{sizeof}(\hyperlink{ipv6_8h_aed0cbc40c61ed5b4fb681ebc55237e89}{Ipv6Addr}))
232    \{
233       \textcolor{comment}{//Compare IPv6 address}
234       result = \hyperlink{ipv6_8h_ab1e93bd2152bc3f3b5642fd0216384d7}{ipv6CompAddr}(&ipAddr->\hyperlink{structIpAddr_a9bc2340a9c0bc5a0b8aa9695b74e2ee6}{ipv6Addr}, &
      \hyperlink{ipv6_8c_aa4baeec4f7b8b166d2457787fb9eddf9}{IPV6\_UNSPECIFIED\_ADDR});
235    \}
236    \textcolor{keywordflow}{else}
237 \textcolor{preprocessor}{#endif}
238    \textcolor{comment}{//Invalid IP address?}
239    \{
240       result = \hyperlink{os__port_8h_aa93f0eb578d23995850d61f7d61c55c1}{FALSE};
241    \}
242 
243    \textcolor{comment}{//Return TRUE if the IP address is unspecified, else FALSE}
244    \textcolor{keywordflow}{return} result;
245 \}
\end{DoxyCode}
\mbox{\Hypertarget{ip_8c_acf118410dcf7a82cb1a22ef1a9956b5d}\label{ip_8c_acf118410dcf7a82cb1a22ef1a9956b5d}} 
\index{ip.\+c@{ip.\+c}!ip\+Join\+Multicast\+Group@{ip\+Join\+Multicast\+Group}}
\index{ip\+Join\+Multicast\+Group@{ip\+Join\+Multicast\+Group}!ip.\+c@{ip.\+c}}
\subsubsection{\texorpdfstring{ip\+Join\+Multicast\+Group()}{ipJoinMulticastGroup()}}
{\footnotesize\ttfamily \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689c}{error\+\_\+t} ip\+Join\+Multicast\+Group (\begin{DoxyParamCaption}\item[{\hyperlink{net_8h_a2234db8911a1148c9159979d8f5e0d6b}{Net\+Interface} $\ast$}]{interface,  }\item[{const \hyperlink{structIpAddr}{Ip\+Addr} $\ast$}]{group\+Addr }\end{DoxyParamCaption})}



Join the specified host group. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em interface} & Underlying network interface (optional parameter) \\
\hline
\mbox{\tt in}  & {\em group\+Addr} & IP address identifying the host group to join \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Error code 
\end{DoxyReturn}


Definition at line 293 of file ip.\+c.


\begin{DoxyCode}
294 \{
295    \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689c}{error\_t} error;
296 
297    \textcolor{comment}{//Use default network interface?}
298    \textcolor{keywordflow}{if}(interface == \hyperlink{group__BSPDefine_ga070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL})
299       \textcolor{keyword}{interface }= \hyperlink{net_8c_a991aba7eae4de79f30c6889d95cc6870}{netGetDefaultInterface}();
300 
301    \textcolor{comment}{//Get exclusive access}
302    \hyperlink{os__port__chibios_8c_a58485224df4bfa522246d55b35bbd83a}{osAcquireMutex}(&\hyperlink{net_8c_afe31551ad26115fae8e575654346d441}{netMutex});
303 
304 \textcolor{preprocessor}{#if (IPV4\_SUPPORT == ENABLED)}
305    \textcolor{comment}{//IPv4 multicast address?}
306    \textcolor{keywordflow}{if}(groupAddr->\hyperlink{structIpAddr_ae61478bd1e79361fca7dd04a21aeb2f8}{length} == \textcolor{keyword}{sizeof}(\hyperlink{ipv4_8h_a411debb3d770caa0c06d3f73367da37f}{Ipv4Addr}))
307    \{
308       \textcolor{comment}{//Join the specified host group}
309       error = \hyperlink{ipv4_8c_ab2a827c952b160ccc0afba106e865183}{ipv4JoinMulticastGroup}(interface, groupAddr->
      \hyperlink{structIpAddr_a8de6f49cb0461f57c1eda49bb1088916}{ipv4Addr});
310    \}
311    \textcolor{keywordflow}{else}
312 \textcolor{preprocessor}{#endif}
313 \textcolor{preprocessor}{#if (IPV6\_SUPPORT == ENABLED)}
314    \textcolor{comment}{//IPv6 multicast address?}
315    \textcolor{keywordflow}{if}(groupAddr->\hyperlink{structIpAddr_ae61478bd1e79361fca7dd04a21aeb2f8}{length} == \textcolor{keyword}{sizeof}(\hyperlink{ipv6_8h_aed0cbc40c61ed5b4fb681ebc55237e89}{Ipv6Addr}))
316    \{
317       \textcolor{comment}{//Join the specified host group}
318       error = \hyperlink{ipv6_8c_abbf3683ee76a53fdf931e58fabe6db6f}{ipv6JoinMulticastGroup}(interface, &groupAddr->
      \hyperlink{structIpAddr_a9bc2340a9c0bc5a0b8aa9695b74e2ee6}{ipv6Addr});
319    \}
320    \textcolor{keywordflow}{else}
321 \textcolor{preprocessor}{#endif}
322    \textcolor{comment}{//Invalid IP address?}
323    \{
324       \textcolor{comment}{//Report an error}
325       error = \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689ca21cbabf2c791471c05a9bc2710638aec}{ERROR\_INVALID\_ADDRESS};
326    \}
327 
328    \textcolor{comment}{//Release exclusive access}
329    \hyperlink{os__port__chibios_8c_a8e10e5b2c6d3877b5ba60e375ac45d79}{osReleaseMutex}(&\hyperlink{net_8c_afe31551ad26115fae8e575654346d441}{netMutex});
330 
331    \textcolor{comment}{//Return status code}
332    \textcolor{keywordflow}{return} error;
333 \}
\end{DoxyCode}
\mbox{\Hypertarget{ip_8c_a7c1cdc9285c33d9d872876778432674e}\label{ip_8c_a7c1cdc9285c33d9d872876778432674e}} 
\index{ip.\+c@{ip.\+c}!ip\+Leave\+Multicast\+Group@{ip\+Leave\+Multicast\+Group}}
\index{ip\+Leave\+Multicast\+Group@{ip\+Leave\+Multicast\+Group}!ip.\+c@{ip.\+c}}
\subsubsection{\texorpdfstring{ip\+Leave\+Multicast\+Group()}{ipLeaveMulticastGroup()}}
{\footnotesize\ttfamily \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689c}{error\+\_\+t} ip\+Leave\+Multicast\+Group (\begin{DoxyParamCaption}\item[{\hyperlink{net_8h_a2234db8911a1148c9159979d8f5e0d6b}{Net\+Interface} $\ast$}]{interface,  }\item[{const \hyperlink{structIpAddr}{Ip\+Addr} $\ast$}]{group\+Addr }\end{DoxyParamCaption})}



Leave the specified host group. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em interface} & Underlying network interface (optional parameter) \\
\hline
\mbox{\tt in}  & {\em group\+Addr} & IP address identifying the host group to leave \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Error code 
\end{DoxyReturn}


Definition at line 343 of file ip.\+c.


\begin{DoxyCode}
344 \{
345    \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689c}{error\_t} error;
346 
347    \textcolor{comment}{//Use default network interface?}
348    \textcolor{keywordflow}{if}(interface == \hyperlink{group__BSPDefine_ga070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL})
349       \textcolor{keyword}{interface }= \hyperlink{net_8c_a991aba7eae4de79f30c6889d95cc6870}{netGetDefaultInterface}();
350 
351    \textcolor{comment}{//Get exclusive access}
352    \hyperlink{os__port__chibios_8c_a58485224df4bfa522246d55b35bbd83a}{osAcquireMutex}(&\hyperlink{net_8c_afe31551ad26115fae8e575654346d441}{netMutex});
353 
354 \textcolor{preprocessor}{#if (IPV4\_SUPPORT == ENABLED)}
355    \textcolor{comment}{//IPv4 multicast address?}
356    \textcolor{keywordflow}{if}(groupAddr->\hyperlink{structIpAddr_ae61478bd1e79361fca7dd04a21aeb2f8}{length} == \textcolor{keyword}{sizeof}(\hyperlink{ipv4_8h_a411debb3d770caa0c06d3f73367da37f}{Ipv4Addr}))
357    \{
358       \textcolor{comment}{//Drop membership}
359       error = \hyperlink{ipv4_8c_a9bc218d650a524e76f839f33af6ef27a}{ipv4LeaveMulticastGroup}(interface, groupAddr->
      \hyperlink{structIpAddr_a8de6f49cb0461f57c1eda49bb1088916}{ipv4Addr});
360    \}
361    \textcolor{keywordflow}{else}
362 \textcolor{preprocessor}{#endif}
363 \textcolor{preprocessor}{#if (IPV6\_SUPPORT == ENABLED)}
364    \textcolor{comment}{//IPv6 multicast address?}
365    \textcolor{keywordflow}{if}(groupAddr->\hyperlink{structIpAddr_ae61478bd1e79361fca7dd04a21aeb2f8}{length} == \textcolor{keyword}{sizeof}(\hyperlink{ipv6_8h_aed0cbc40c61ed5b4fb681ebc55237e89}{Ipv6Addr}))
366    \{
367       \textcolor{comment}{//Drop membership}
368       error = \hyperlink{ipv6_8c_a803fc8d3c2db73c8fa1f6bb4ee7abde4}{ipv6LeaveMulticastGroup}(interface, &groupAddr->
      \hyperlink{structIpAddr_a9bc2340a9c0bc5a0b8aa9695b74e2ee6}{ipv6Addr});
369    \}
370    \textcolor{keywordflow}{else}
371 \textcolor{preprocessor}{#endif}
372    \textcolor{comment}{//Invalid IP address?}
373    \{
374       error = \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689ca21cbabf2c791471c05a9bc2710638aec}{ERROR\_INVALID\_ADDRESS};
375    \}
376 
377    \textcolor{comment}{//Release exclusive access}
378    \hyperlink{os__port__chibios_8c_a8e10e5b2c6d3877b5ba60e375ac45d79}{osReleaseMutex}(&\hyperlink{net_8c_afe31551ad26115fae8e575654346d441}{netMutex});
379 
380    \textcolor{comment}{//Return status code}
381    \textcolor{keywordflow}{return} error;
382 \}
\end{DoxyCode}
\mbox{\Hypertarget{ip_8c_a453a712a9fa25badbfbc5d0c0201c0be}\label{ip_8c_a453a712a9fa25badbfbc5d0c0201c0be}} 
\index{ip.\+c@{ip.\+c}!ip\+Select\+Source\+Addr@{ip\+Select\+Source\+Addr}}
\index{ip\+Select\+Source\+Addr@{ip\+Select\+Source\+Addr}!ip.\+c@{ip.\+c}}
\subsubsection{\texorpdfstring{ip\+Select\+Source\+Addr()}{ipSelectSourceAddr()}}
{\footnotesize\ttfamily \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689c}{error\+\_\+t} ip\+Select\+Source\+Addr (\begin{DoxyParamCaption}\item[{\hyperlink{net_8h_a2234db8911a1148c9159979d8f5e0d6b}{Net\+Interface} $\ast$$\ast$}]{interface,  }\item[{const \hyperlink{structIpAddr}{Ip\+Addr} $\ast$}]{dest\+Addr,  }\item[{\hyperlink{structIpAddr}{Ip\+Addr} $\ast$}]{src\+Addr }\end{DoxyParamCaption})}



IP source address selection. 

This function selects the source address and the relevant network interface to be used in order to join the specified destination address


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in,out}  & {\em interface} & A pointer to a valid network interface may be provided as a hint. The function returns a pointer identifying the interface to be used \\
\hline
\mbox{\tt in}  & {\em dest\+Addr} & Destination IP address \\
\hline
\mbox{\tt out}  & {\em src\+Addr} & Local IP address to be used \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Error code 
\end{DoxyReturn}


Definition at line 109 of file ip.\+c.


\begin{DoxyCode}
111 \{
112    \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689c}{error\_t} error;
113 
114 \textcolor{preprocessor}{#if (IPV4\_SUPPORT == ENABLED)}
115    \textcolor{comment}{//The destination address is an IPv4 address?}
116    \textcolor{keywordflow}{if}(destAddr->\hyperlink{structIpAddr_ae61478bd1e79361fca7dd04a21aeb2f8}{length} == \textcolor{keyword}{sizeof}(\hyperlink{ipv4_8h_a411debb3d770caa0c06d3f73367da37f}{Ipv4Addr}))
117    \{
118       \textcolor{comment}{//An IPv4 address is expected}
119       srcAddr->\hyperlink{structIpAddr_ae61478bd1e79361fca7dd04a21aeb2f8}{length} = \textcolor{keyword}{sizeof}(\hyperlink{ipv4_8h_a411debb3d770caa0c06d3f73367da37f}{Ipv4Addr});
120 
121       \textcolor{comment}{//Get the most appropriate source address to use}
122       error = \hyperlink{ipv4__misc_8c_af1ec532996ca54986f87e67a354e03e1}{ipv4SelectSourceAddr}(interface, destAddr->
      \hyperlink{structIpAddr_a8de6f49cb0461f57c1eda49bb1088916}{ipv4Addr},
123          &srcAddr->\hyperlink{structIpAddr_a8de6f49cb0461f57c1eda49bb1088916}{ipv4Addr});
124    \}
125    \textcolor{keywordflow}{else}
126 \textcolor{preprocessor}{#endif}
127 \textcolor{preprocessor}{#if (IPV6\_SUPPORT == ENABLED)}
128    \textcolor{comment}{//The destination address is an IPv6 address?}
129    \textcolor{keywordflow}{if}(destAddr->\hyperlink{structIpAddr_ae61478bd1e79361fca7dd04a21aeb2f8}{length} == \textcolor{keyword}{sizeof}(\hyperlink{ipv6_8h_aed0cbc40c61ed5b4fb681ebc55237e89}{Ipv6Addr}))
130    \{
131       \textcolor{comment}{//An IPv6 address is expected}
132       srcAddr->\hyperlink{structIpAddr_ae61478bd1e79361fca7dd04a21aeb2f8}{length} = \textcolor{keyword}{sizeof}(\hyperlink{ipv6_8h_aed0cbc40c61ed5b4fb681ebc55237e89}{Ipv6Addr});
133 
134       \textcolor{comment}{//Get the most appropriate source address to use}
135       error = \hyperlink{ipv6__misc_8c_a1d69e11a455ee8895ec67061f554a174}{ipv6SelectSourceAddr}(interface, &destAddr->
      \hyperlink{structIpAddr_a9bc2340a9c0bc5a0b8aa9695b74e2ee6}{ipv6Addr},
136          &srcAddr->\hyperlink{structIpAddr_a9bc2340a9c0bc5a0b8aa9695b74e2ee6}{ipv6Addr});
137    \}
138    \textcolor{keywordflow}{else}
139 \textcolor{preprocessor}{#endif}
140    \textcolor{comment}{//The destination address is not valid?}
141    \{
142       \textcolor{comment}{//Report an error}
143       error = \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689ca21cbabf2c791471c05a9bc2710638aec}{ERROR\_INVALID\_ADDRESS};
144    \}
145 
146    \textcolor{comment}{//Return status code}
147    \textcolor{keywordflow}{return} error;
148 \}
\end{DoxyCode}
\mbox{\Hypertarget{ip_8c_ac39710faa96e88364ef7007fee711c5e}\label{ip_8c_ac39710faa96e88364ef7007fee711c5e}} 
\index{ip.\+c@{ip.\+c}!ip\+Send\+Datagram@{ip\+Send\+Datagram}}
\index{ip\+Send\+Datagram@{ip\+Send\+Datagram}!ip.\+c@{ip.\+c}}
\subsubsection{\texorpdfstring{ip\+Send\+Datagram()}{ipSendDatagram()}}
{\footnotesize\ttfamily \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689c}{error\+\_\+t} ip\+Send\+Datagram (\begin{DoxyParamCaption}\item[{\hyperlink{net_8h_a2234db8911a1148c9159979d8f5e0d6b}{Net\+Interface} $\ast$}]{interface,  }\item[{\hyperlink{structIpPseudoHeader}{Ip\+Pseudo\+Header} $\ast$}]{pseudo\+Header,  }\item[{\hyperlink{structNetBuffer}{Net\+Buffer} $\ast$}]{buffer,  }\item[{size\+\_\+t}]{offset,  }\item[{\hyperlink{compiler__port_8h_a12a1e9b3ce141648783a82445d02b58d}{uint\+\_\+t}}]{flags }\end{DoxyParamCaption})}



Send an IP datagram. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em interface} & Underlying network interface \\
\hline
\mbox{\tt in}  & {\em pseudo\+Header} & IP pseudo header \\
\hline
\mbox{\tt in}  & {\em buffer} & Multi-\/part buffer containing the payload \\
\hline
\mbox{\tt in}  & {\em offset} & Offset to the first payload byte \\
\hline
\mbox{\tt in}  & {\em flags} & Set of flags that influences the behavior of this function \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Error code 
\end{DoxyReturn}


Definition at line 59 of file ip.\+c.


\begin{DoxyCode}
61 \{
62    \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689c}{error\_t} error;
63 
64 \textcolor{preprocessor}{#if (IPV4\_SUPPORT == ENABLED)}
65    \textcolor{comment}{//Destination address is an IPv4 address?}
66    \textcolor{keywordflow}{if}(pseudoHeader->\hyperlink{structIpPseudoHeader_aeff06b8d9c3e7e2ef3cdb8a3a14e8ad2}{length} == \textcolor{keyword}{sizeof}(\hyperlink{ipv4_8h_a0e92b64e038199f1bb6383f2a76f30b6}{Ipv4PseudoHeader}))
67    \{
68       \textcolor{comment}{//Form an IPv4 packet and send it}
69       error = \hyperlink{ipv4_8c_a26addbb0c6bcabe165be9d7b96c4b4b1}{ipv4SendDatagram}(interface, &pseudoHeader->
      \hyperlink{structIpPseudoHeader_a4dd0d91580f30918dc7b5d5a430dba6a}{ipv4Data},
70          buffer, \hyperlink{pic32mz_2isr__support_8h_a12a5aed8a193ebbf9a641104a310610d}{offset}, \hyperlink{tcp_8h_aa2585d779da0ab21273a8d92de9a0ebe}{flags});
71    \}
72    \textcolor{keywordflow}{else}
73 \textcolor{preprocessor}{#endif}
74 \textcolor{preprocessor}{#if (IPV6\_SUPPORT == ENABLED)}
75    \textcolor{comment}{//Destination address is an IPv6 address?}
76    \textcolor{keywordflow}{if}(pseudoHeader->\hyperlink{structIpPseudoHeader_aeff06b8d9c3e7e2ef3cdb8a3a14e8ad2}{length} == \textcolor{keyword}{sizeof}(\hyperlink{ipv6_8h_a68061e0a0b502d880cbe60b645cfa2b7}{Ipv6PseudoHeader}))
77    \{
78       \textcolor{comment}{//Form an IPv6 packet and send it}
79       error = \hyperlink{ipv6_8c_ae9edf1ac407897f91eb5caed37df7c3c}{ipv6SendDatagram}(interface, &pseudoHeader->
      \hyperlink{structIpPseudoHeader_a5155846ca7e85218407a8374d035aab7}{ipv6Data},
80          buffer, \hyperlink{pic32mz_2isr__support_8h_a12a5aed8a193ebbf9a641104a310610d}{offset}, \hyperlink{tcp_8h_aa2585d779da0ab21273a8d92de9a0ebe}{flags});
81    \}
82    \textcolor{keywordflow}{else}
83 \textcolor{preprocessor}{#endif}
84    \textcolor{comment}{//Destination address is invalid}
85    \{
86       \textcolor{comment}{//Report an error}
87       error = \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689ca21cbabf2c791471c05a9bc2710638aec}{ERROR\_INVALID\_ADDRESS};
88    \}
89 
90    \textcolor{comment}{//Return status code}
91    \textcolor{keywordflow}{return} error;
92 \}
\end{DoxyCode}
\mbox{\Hypertarget{ip_8c_abb33f7bf7752d5465c08a873fe040b03}\label{ip_8c_abb33f7bf7752d5465c08a873fe040b03}} 
\index{ip.\+c@{ip.\+c}!ip\+String\+To\+Addr@{ip\+String\+To\+Addr}}
\index{ip\+String\+To\+Addr@{ip\+String\+To\+Addr}!ip.\+c@{ip.\+c}}
\subsubsection{\texorpdfstring{ip\+String\+To\+Addr()}{ipStringToAddr()}}
{\footnotesize\ttfamily \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689c}{error\+\_\+t} ip\+String\+To\+Addr (\begin{DoxyParamCaption}\item[{const \hyperlink{compiler__port_8h_a40bb5262bf908c328fbcfbe5d29d0201}{char\+\_\+t} $\ast$}]{str,  }\item[{\hyperlink{structIpAddr}{Ip\+Addr} $\ast$}]{ip\+Addr }\end{DoxyParamCaption})}



Convert a string representation of an IP address to a binary IP address. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em str} & N\+U\+L\+L-\/terminated string representing the IP address \\
\hline
\mbox{\tt out}  & {\em ip\+Addr} & Binary representation of the IP address \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Error code 
\end{DoxyReturn}


Definition at line 682 of file ip.\+c.


\begin{DoxyCode}
683 \{
684    \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689c}{error\_t} error;
685 
686 \textcolor{preprocessor}{#if (IPV6\_SUPPORT == ENABLED)}
687    \textcolor{comment}{//IPv6 address?}
688    \textcolor{keywordflow}{if}(strchr(str, \textcolor{charliteral}{':'}))
689    \{
690       \textcolor{comment}{//IPv6 addresses are 16-byte long}
691       ipAddr->\hyperlink{structIpAddr_ae61478bd1e79361fca7dd04a21aeb2f8}{length} = \textcolor{keyword}{sizeof}(\hyperlink{ipv6_8h_aed0cbc40c61ed5b4fb681ebc55237e89}{Ipv6Addr});
692       \textcolor{comment}{//Convert the string to IPv6 address}
693       error = \hyperlink{ipv6_8c_a89a8cf0be05e4f9ff083e6e345b52c5f}{ipv6StringToAddr}(str, &ipAddr->\hyperlink{structIpAddr_a9bc2340a9c0bc5a0b8aa9695b74e2ee6}{ipv6Addr});
694    \}
695    \textcolor{keywordflow}{else}
696 \textcolor{preprocessor}{#endif}
697 \textcolor{preprocessor}{#if (IPV4\_SUPPORT == ENABLED)}
698    \textcolor{comment}{//IPv4 address?}
699    \textcolor{keywordflow}{if}(strchr(str, \textcolor{charliteral}{'.'}))
700    \{
701       \textcolor{comment}{//IPv4 addresses are 4-byte long}
702       ipAddr->\hyperlink{structIpAddr_ae61478bd1e79361fca7dd04a21aeb2f8}{length} = \textcolor{keyword}{sizeof}(\hyperlink{ipv4_8h_a411debb3d770caa0c06d3f73367da37f}{Ipv4Addr});
703       \textcolor{comment}{//Convert the string to IPv4 address}
704       error = \hyperlink{ipv4_8c_a9315bca33ed7faace2bebcf6e96f8847}{ipv4StringToAddr}(str, &ipAddr->\hyperlink{structIpAddr_a8de6f49cb0461f57c1eda49bb1088916}{ipv4Addr});
705    \}
706    \textcolor{keywordflow}{else}
707 \textcolor{preprocessor}{#endif}
708    \textcolor{comment}{//Invalid IP address?}
709    \{
710       \textcolor{comment}{//Report an error}
711       error = \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689cae9be6449970fca5714ab9957b16562a5}{ERROR\_FAILURE};
712    \}
713 
714    \textcolor{comment}{//Return status code}
715    \textcolor{keywordflow}{return} error;
716 \}
\end{DoxyCode}


\subsection{Variable Documentation}
\mbox{\Hypertarget{ip_8c_a132481a9d89ddf554ea8bbbe342e5d5a}\label{ip_8c_a132481a9d89ddf554ea8bbbe342e5d5a}} 
\index{ip.\+c@{ip.\+c}!I\+P\+\_\+\+A\+D\+D\+R\+\_\+\+A\+NY@{I\+P\+\_\+\+A\+D\+D\+R\+\_\+\+A\+NY}}
\index{I\+P\+\_\+\+A\+D\+D\+R\+\_\+\+A\+NY@{I\+P\+\_\+\+A\+D\+D\+R\+\_\+\+A\+NY}!ip.\+c@{ip.\+c}}
\subsubsection{\texorpdfstring{I\+P\+\_\+\+A\+D\+D\+R\+\_\+\+A\+NY}{IP\_ADDR\_ANY}}
{\footnotesize\ttfamily const \hyperlink{structIpAddr}{Ip\+Addr} I\+P\+\_\+\+A\+D\+D\+R\+\_\+\+A\+NY = \{0\}}



Definition at line 45 of file ip.\+c.

\mbox{\Hypertarget{ip_8c_ac447cc6e663e8997d7904e712dff7645}\label{ip_8c_ac447cc6e663e8997d7904e712dff7645}} 
\index{ip.\+c@{ip.\+c}!I\+P\+\_\+\+A\+D\+D\+R\+\_\+\+U\+N\+S\+P\+E\+C\+I\+F\+I\+ED@{I\+P\+\_\+\+A\+D\+D\+R\+\_\+\+U\+N\+S\+P\+E\+C\+I\+F\+I\+ED}}
\index{I\+P\+\_\+\+A\+D\+D\+R\+\_\+\+U\+N\+S\+P\+E\+C\+I\+F\+I\+ED@{I\+P\+\_\+\+A\+D\+D\+R\+\_\+\+U\+N\+S\+P\+E\+C\+I\+F\+I\+ED}!ip.\+c@{ip.\+c}}
\subsubsection{\texorpdfstring{I\+P\+\_\+\+A\+D\+D\+R\+\_\+\+U\+N\+S\+P\+E\+C\+I\+F\+I\+ED}{IP\_ADDR\_UNSPECIFIED}}
{\footnotesize\ttfamily const \hyperlink{structIpAddr}{Ip\+Addr} I\+P\+\_\+\+A\+D\+D\+R\+\_\+\+U\+N\+S\+P\+E\+C\+I\+F\+I\+ED = \{0\}}



Definition at line 46 of file ip.\+c.

