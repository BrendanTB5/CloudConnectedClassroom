\hypertarget{stream__buffer_8h}{}\section{third\+\_\+party/freertos/include/stream\+\_\+buffer.h File Reference}
\label{stream__buffer_8h}\index{third\+\_\+party/freertos/include/stream\+\_\+buffer.\+h@{third\+\_\+party/freertos/include/stream\+\_\+buffer.\+h}}
\subsection*{Macros}
\begin{DoxyCompactItemize}
\item 
\#define \hyperlink{stream__buffer_8h_a39aa4dd8b83e2df7ded291f863fb5fed}{x\+Stream\+Buffer\+Create}(x\+Buffer\+Size\+Bytes,  x\+Trigger\+Level\+Bytes)~\hyperlink{stream__buffer_8h_a7a613c6fa11323c871ce7991db214096}{x\+Stream\+Buffer\+Generic\+Create}( x\+Buffer\+Size\+Bytes, x\+Trigger\+Level\+Bytes, \hyperlink{projdefs_8h_aa56260e937e7e203026707e5ba944273}{pd\+F\+A\+L\+SE} )
\item 
\#define \hyperlink{stream__buffer_8h_a3c248575ac1b83801db605b32a118f77}{x\+Stream\+Buffer\+Create\+Static}(x\+Buffer\+Size\+Bytes,  x\+Trigger\+Level\+Bytes,  puc\+Stream\+Buffer\+Storage\+Area,  px\+Static\+Stream\+Buffer)~\hyperlink{stream__buffer_8h_a1263847a3f77a4f34462df326d78c48c}{x\+Stream\+Buffer\+Generic\+Create\+Static}( x\+Buffer\+Size\+Bytes, x\+Trigger\+Level\+Bytes, \hyperlink{projdefs_8h_aa56260e937e7e203026707e5ba944273}{pd\+F\+A\+L\+SE}, puc\+Stream\+Buffer\+Storage\+Area, px\+Static\+Stream\+Buffer )
\end{DoxyCompactItemize}
\subsection*{Typedefs}
\begin{DoxyCompactItemize}
\item 
typedef struct \hyperlink{structStreamBufferDef__t}{Stream\+Buffer\+Def\+\_\+t} $\ast$ \hyperlink{stream__buffer_8h_a8b80974e2278f073412293e6580ce56f}{Stream\+Buffer\+Handle\+\_\+t}
\end{DoxyCompactItemize}
\subsection*{Functions}
\begin{DoxyCompactItemize}
\item 
size\+\_\+t \hyperlink{stream__buffer_8h_a35cdf3b6bf677086b9128782f762499d}{x\+Stream\+Buffer\+Send} (\hyperlink{stream__buffer_8h_a8b80974e2278f073412293e6580ce56f}{Stream\+Buffer\+Handle\+\_\+t} x\+Stream\+Buffer, const void $\ast$pv\+Tx\+Data, size\+\_\+t x\+Data\+Length\+Bytes, \hyperlink{pic32mx_2portmacro_8h_aa69c48c6e902ce54f70886e6573c92a9}{Tick\+Type\+\_\+t} x\+Ticks\+To\+Wait) \hyperlink{mpu__wrappers_8h_a4785c4f4a8c04b835139dcc2a6682078}{P\+R\+I\+V\+I\+L\+E\+G\+E\+D\+\_\+\+F\+U\+N\+C\+T\+I\+ON}
\item 
size\+\_\+t \hyperlink{stream__buffer_8h_a1dab226e99230e01e79bc2b5c0605e44}{x\+Stream\+Buffer\+Send\+From\+I\+SR} (\hyperlink{stream__buffer_8h_a8b80974e2278f073412293e6580ce56f}{Stream\+Buffer\+Handle\+\_\+t} x\+Stream\+Buffer, const void $\ast$pv\+Tx\+Data, size\+\_\+t x\+Data\+Length\+Bytes, \hyperlink{pic32mx_2portmacro_8h_a46fb21e00ae0729d7515c0fbf2269796}{Base\+Type\+\_\+t} $\ast$const px\+Higher\+Priority\+Task\+Woken) \hyperlink{mpu__wrappers_8h_a4785c4f4a8c04b835139dcc2a6682078}{P\+R\+I\+V\+I\+L\+E\+G\+E\+D\+\_\+\+F\+U\+N\+C\+T\+I\+ON}
\item 
size\+\_\+t \hyperlink{stream__buffer_8h_a55efc144b988598d84a6087d3e20b507}{x\+Stream\+Buffer\+Receive} (\hyperlink{stream__buffer_8h_a8b80974e2278f073412293e6580ce56f}{Stream\+Buffer\+Handle\+\_\+t} x\+Stream\+Buffer, void $\ast$pv\+Rx\+Data, size\+\_\+t x\+Buffer\+Length\+Bytes, \hyperlink{pic32mx_2portmacro_8h_aa69c48c6e902ce54f70886e6573c92a9}{Tick\+Type\+\_\+t} x\+Ticks\+To\+Wait) \hyperlink{mpu__wrappers_8h_a4785c4f4a8c04b835139dcc2a6682078}{P\+R\+I\+V\+I\+L\+E\+G\+E\+D\+\_\+\+F\+U\+N\+C\+T\+I\+ON}
\item 
size\+\_\+t \hyperlink{stream__buffer_8h_a6c882a1d9f26c40f93f271bd1b844b3b}{x\+Stream\+Buffer\+Receive\+From\+I\+SR} (\hyperlink{stream__buffer_8h_a8b80974e2278f073412293e6580ce56f}{Stream\+Buffer\+Handle\+\_\+t} x\+Stream\+Buffer, void $\ast$pv\+Rx\+Data, size\+\_\+t x\+Buffer\+Length\+Bytes, \hyperlink{pic32mx_2portmacro_8h_a46fb21e00ae0729d7515c0fbf2269796}{Base\+Type\+\_\+t} $\ast$const px\+Higher\+Priority\+Task\+Woken) \hyperlink{mpu__wrappers_8h_a4785c4f4a8c04b835139dcc2a6682078}{P\+R\+I\+V\+I\+L\+E\+G\+E\+D\+\_\+\+F\+U\+N\+C\+T\+I\+ON}
\item 
void \hyperlink{stream__buffer_8h_a05dc9d2ae220a050526a062eddf6d7a2}{v\+Stream\+Buffer\+Delete} (\hyperlink{stream__buffer_8h_a8b80974e2278f073412293e6580ce56f}{Stream\+Buffer\+Handle\+\_\+t} x\+Stream\+Buffer) \hyperlink{mpu__wrappers_8h_a4785c4f4a8c04b835139dcc2a6682078}{P\+R\+I\+V\+I\+L\+E\+G\+E\+D\+\_\+\+F\+U\+N\+C\+T\+I\+ON}
\item 
\hyperlink{pic32mx_2portmacro_8h_a46fb21e00ae0729d7515c0fbf2269796}{Base\+Type\+\_\+t} \hyperlink{stream__buffer_8h_ae393d82ee06e89692248a4381f85dc86}{x\+Stream\+Buffer\+Is\+Full} (\hyperlink{stream__buffer_8h_a8b80974e2278f073412293e6580ce56f}{Stream\+Buffer\+Handle\+\_\+t} x\+Stream\+Buffer) \hyperlink{mpu__wrappers_8h_a4785c4f4a8c04b835139dcc2a6682078}{P\+R\+I\+V\+I\+L\+E\+G\+E\+D\+\_\+\+F\+U\+N\+C\+T\+I\+ON}
\item 
\hyperlink{pic32mx_2portmacro_8h_a46fb21e00ae0729d7515c0fbf2269796}{Base\+Type\+\_\+t} \hyperlink{stream__buffer_8h_af65cd558025ddc29ca68fba1b3f5dc19}{x\+Stream\+Buffer\+Is\+Empty} (\hyperlink{stream__buffer_8h_a8b80974e2278f073412293e6580ce56f}{Stream\+Buffer\+Handle\+\_\+t} x\+Stream\+Buffer) \hyperlink{mpu__wrappers_8h_a4785c4f4a8c04b835139dcc2a6682078}{P\+R\+I\+V\+I\+L\+E\+G\+E\+D\+\_\+\+F\+U\+N\+C\+T\+I\+ON}
\item 
\hyperlink{pic32mx_2portmacro_8h_a46fb21e00ae0729d7515c0fbf2269796}{Base\+Type\+\_\+t} \hyperlink{stream__buffer_8h_a5253429645c67902c2fc8682f8af0aac}{x\+Stream\+Buffer\+Reset} (\hyperlink{stream__buffer_8h_a8b80974e2278f073412293e6580ce56f}{Stream\+Buffer\+Handle\+\_\+t} x\+Stream\+Buffer) \hyperlink{mpu__wrappers_8h_a4785c4f4a8c04b835139dcc2a6682078}{P\+R\+I\+V\+I\+L\+E\+G\+E\+D\+\_\+\+F\+U\+N\+C\+T\+I\+ON}
\item 
size\+\_\+t \hyperlink{stream__buffer_8h_a9a78e0206cb1dc343c329f9db579208d}{x\+Stream\+Buffer\+Spaces\+Available} (\hyperlink{stream__buffer_8h_a8b80974e2278f073412293e6580ce56f}{Stream\+Buffer\+Handle\+\_\+t} x\+Stream\+Buffer) \hyperlink{mpu__wrappers_8h_a4785c4f4a8c04b835139dcc2a6682078}{P\+R\+I\+V\+I\+L\+E\+G\+E\+D\+\_\+\+F\+U\+N\+C\+T\+I\+ON}
\item 
size\+\_\+t \hyperlink{stream__buffer_8h_af32d1737de29f24ee31ac1e3c407d9fd}{x\+Stream\+Buffer\+Bytes\+Available} (\hyperlink{stream__buffer_8h_a8b80974e2278f073412293e6580ce56f}{Stream\+Buffer\+Handle\+\_\+t} x\+Stream\+Buffer) \hyperlink{mpu__wrappers_8h_a4785c4f4a8c04b835139dcc2a6682078}{P\+R\+I\+V\+I\+L\+E\+G\+E\+D\+\_\+\+F\+U\+N\+C\+T\+I\+ON}
\item 
\hyperlink{pic32mx_2portmacro_8h_a46fb21e00ae0729d7515c0fbf2269796}{Base\+Type\+\_\+t} \hyperlink{stream__buffer_8h_a28f0280587c76e71efeaa8f415ebde04}{x\+Stream\+Buffer\+Set\+Trigger\+Level} (\hyperlink{stream__buffer_8h_a8b80974e2278f073412293e6580ce56f}{Stream\+Buffer\+Handle\+\_\+t} x\+Stream\+Buffer, size\+\_\+t x\+Trigger\+Level) \hyperlink{mpu__wrappers_8h_a4785c4f4a8c04b835139dcc2a6682078}{P\+R\+I\+V\+I\+L\+E\+G\+E\+D\+\_\+\+F\+U\+N\+C\+T\+I\+ON}
\item 
\hyperlink{pic32mx_2portmacro_8h_a46fb21e00ae0729d7515c0fbf2269796}{Base\+Type\+\_\+t} \hyperlink{stream__buffer_8h_abc37189e4eb8618f5434ae333dd50b23}{x\+Stream\+Buffer\+Send\+Completed\+From\+I\+SR} (\hyperlink{stream__buffer_8h_a8b80974e2278f073412293e6580ce56f}{Stream\+Buffer\+Handle\+\_\+t} x\+Stream\+Buffer, \hyperlink{pic32mx_2portmacro_8h_a46fb21e00ae0729d7515c0fbf2269796}{Base\+Type\+\_\+t} $\ast$px\+Higher\+Priority\+Task\+Woken) \hyperlink{mpu__wrappers_8h_a4785c4f4a8c04b835139dcc2a6682078}{P\+R\+I\+V\+I\+L\+E\+G\+E\+D\+\_\+\+F\+U\+N\+C\+T\+I\+ON}
\item 
\hyperlink{pic32mx_2portmacro_8h_a46fb21e00ae0729d7515c0fbf2269796}{Base\+Type\+\_\+t} \hyperlink{stream__buffer_8h_ac12e93e96e0eafbc0e981d00e7275d32}{x\+Stream\+Buffer\+Receive\+Completed\+From\+I\+SR} (\hyperlink{stream__buffer_8h_a8b80974e2278f073412293e6580ce56f}{Stream\+Buffer\+Handle\+\_\+t} x\+Stream\+Buffer, \hyperlink{pic32mx_2portmacro_8h_a46fb21e00ae0729d7515c0fbf2269796}{Base\+Type\+\_\+t} $\ast$px\+Higher\+Priority\+Task\+Woken) \hyperlink{mpu__wrappers_8h_a4785c4f4a8c04b835139dcc2a6682078}{P\+R\+I\+V\+I\+L\+E\+G\+E\+D\+\_\+\+F\+U\+N\+C\+T\+I\+ON}
\item 
\hyperlink{stream__buffer_8h_a8b80974e2278f073412293e6580ce56f}{Stream\+Buffer\+Handle\+\_\+t} \hyperlink{stream__buffer_8h_a7a613c6fa11323c871ce7991db214096}{x\+Stream\+Buffer\+Generic\+Create} (size\+\_\+t x\+Buffer\+Size\+Bytes, size\+\_\+t x\+Trigger\+Level\+Bytes, \hyperlink{pic32mx_2portmacro_8h_a46fb21e00ae0729d7515c0fbf2269796}{Base\+Type\+\_\+t} x\+Is\+Message\+Buffer) \hyperlink{mpu__wrappers_8h_a4785c4f4a8c04b835139dcc2a6682078}{P\+R\+I\+V\+I\+L\+E\+G\+E\+D\+\_\+\+F\+U\+N\+C\+T\+I\+ON}
\item 
\hyperlink{stream__buffer_8h_a8b80974e2278f073412293e6580ce56f}{Stream\+Buffer\+Handle\+\_\+t} \hyperlink{stream__buffer_8h_a1263847a3f77a4f34462df326d78c48c}{x\+Stream\+Buffer\+Generic\+Create\+Static} (size\+\_\+t x\+Buffer\+Size\+Bytes, size\+\_\+t x\+Trigger\+Level\+Bytes, \hyperlink{pic32mx_2portmacro_8h_a46fb21e00ae0729d7515c0fbf2269796}{Base\+Type\+\_\+t} x\+Is\+Message\+Buffer, \hyperlink{stdint_8h_aba7bc1797add20fe3efdf37ced1182c5}{uint8\+\_\+t} $\ast$const puc\+Stream\+Buffer\+Storage\+Area, \hyperlink{FreeRTOS_8h_a97741869d647b29aa4b0698a7de79a6a}{Static\+Stream\+Buffer\+\_\+t} $\ast$const px\+Static\+Stream\+Buffer) \hyperlink{mpu__wrappers_8h_a4785c4f4a8c04b835139dcc2a6682078}{P\+R\+I\+V\+I\+L\+E\+G\+E\+D\+\_\+\+F\+U\+N\+C\+T\+I\+ON}
\item 
size\+\_\+t \hyperlink{stream__buffer_8h_a9a952a2cffab91471ec2a3651e2160ec}{x\+Stream\+Buffer\+Next\+Message\+Length\+Bytes} (\hyperlink{stream__buffer_8h_a8b80974e2278f073412293e6580ce56f}{Stream\+Buffer\+Handle\+\_\+t} x\+Stream\+Buffer) \hyperlink{mpu__wrappers_8h_a4785c4f4a8c04b835139dcc2a6682078}{P\+R\+I\+V\+I\+L\+E\+G\+E\+D\+\_\+\+F\+U\+N\+C\+T\+I\+ON}
\end{DoxyCompactItemize}


\subsection{Macro Definition Documentation}
\mbox{\Hypertarget{stream__buffer_8h_a39aa4dd8b83e2df7ded291f863fb5fed}\label{stream__buffer_8h_a39aa4dd8b83e2df7ded291f863fb5fed}} 
\index{stream\+\_\+buffer.\+h@{stream\+\_\+buffer.\+h}!x\+Stream\+Buffer\+Create@{x\+Stream\+Buffer\+Create}}
\index{x\+Stream\+Buffer\+Create@{x\+Stream\+Buffer\+Create}!stream\+\_\+buffer.\+h@{stream\+\_\+buffer.\+h}}
\subsubsection{\texorpdfstring{x\+Stream\+Buffer\+Create}{xStreamBufferCreate}}
{\footnotesize\ttfamily \#define x\+Stream\+Buffer\+Create(\begin{DoxyParamCaption}\item[{}]{x\+Buffer\+Size\+Bytes,  }\item[{}]{x\+Trigger\+Level\+Bytes }\end{DoxyParamCaption})~\hyperlink{stream__buffer_8h_a7a613c6fa11323c871ce7991db214096}{x\+Stream\+Buffer\+Generic\+Create}( x\+Buffer\+Size\+Bytes, x\+Trigger\+Level\+Bytes, \hyperlink{projdefs_8h_aa56260e937e7e203026707e5ba944273}{pd\+F\+A\+L\+SE} )}



Definition at line 133 of file stream\+\_\+buffer.\+h.

\mbox{\Hypertarget{stream__buffer_8h_a3c248575ac1b83801db605b32a118f77}\label{stream__buffer_8h_a3c248575ac1b83801db605b32a118f77}} 
\index{stream\+\_\+buffer.\+h@{stream\+\_\+buffer.\+h}!x\+Stream\+Buffer\+Create\+Static@{x\+Stream\+Buffer\+Create\+Static}}
\index{x\+Stream\+Buffer\+Create\+Static@{x\+Stream\+Buffer\+Create\+Static}!stream\+\_\+buffer.\+h@{stream\+\_\+buffer.\+h}}
\subsubsection{\texorpdfstring{x\+Stream\+Buffer\+Create\+Static}{xStreamBufferCreateStatic}}
{\footnotesize\ttfamily \#define x\+Stream\+Buffer\+Create\+Static(\begin{DoxyParamCaption}\item[{}]{x\+Buffer\+Size\+Bytes,  }\item[{}]{x\+Trigger\+Level\+Bytes,  }\item[{}]{puc\+Stream\+Buffer\+Storage\+Area,  }\item[{}]{px\+Static\+Stream\+Buffer }\end{DoxyParamCaption})~\hyperlink{stream__buffer_8h_a1263847a3f77a4f34462df326d78c48c}{x\+Stream\+Buffer\+Generic\+Create\+Static}( x\+Buffer\+Size\+Bytes, x\+Trigger\+Level\+Bytes, \hyperlink{projdefs_8h_aa56260e937e7e203026707e5ba944273}{pd\+F\+A\+L\+SE}, puc\+Stream\+Buffer\+Storage\+Area, px\+Static\+Stream\+Buffer )}



Definition at line 214 of file stream\+\_\+buffer.\+h.



\subsection{Typedef Documentation}
\mbox{\Hypertarget{stream__buffer_8h_a8b80974e2278f073412293e6580ce56f}\label{stream__buffer_8h_a8b80974e2278f073412293e6580ce56f}} 
\index{stream\+\_\+buffer.\+h@{stream\+\_\+buffer.\+h}!Stream\+Buffer\+Handle\+\_\+t@{Stream\+Buffer\+Handle\+\_\+t}}
\index{Stream\+Buffer\+Handle\+\_\+t@{Stream\+Buffer\+Handle\+\_\+t}!stream\+\_\+buffer.\+h@{stream\+\_\+buffer.\+h}}
\subsubsection{\texorpdfstring{Stream\+Buffer\+Handle\+\_\+t}{StreamBufferHandle\_t}}
{\footnotesize\ttfamily typedef struct \hyperlink{structStreamBufferDef__t}{Stream\+Buffer\+Def\+\_\+t}$\ast$ \hyperlink{stream__buffer_8h_a8b80974e2278f073412293e6580ce56f}{Stream\+Buffer\+Handle\+\_\+t}}



Definition at line 65 of file stream\+\_\+buffer.\+h.



\subsection{Function Documentation}
\mbox{\Hypertarget{stream__buffer_8h_a05dc9d2ae220a050526a062eddf6d7a2}\label{stream__buffer_8h_a05dc9d2ae220a050526a062eddf6d7a2}} 
\index{stream\+\_\+buffer.\+h@{stream\+\_\+buffer.\+h}!v\+Stream\+Buffer\+Delete@{v\+Stream\+Buffer\+Delete}}
\index{v\+Stream\+Buffer\+Delete@{v\+Stream\+Buffer\+Delete}!stream\+\_\+buffer.\+h@{stream\+\_\+buffer.\+h}}
\subsubsection{\texorpdfstring{v\+Stream\+Buffer\+Delete()}{vStreamBufferDelete()}}
{\footnotesize\ttfamily void v\+Stream\+Buffer\+Delete (\begin{DoxyParamCaption}\item[{\hyperlink{stream__buffer_8h_a8b80974e2278f073412293e6580ce56f}{Stream\+Buffer\+Handle\+\_\+t}}]{x\+Stream\+Buffer }\end{DoxyParamCaption})}



Definition at line 359 of file stream\+\_\+buffer.\+c.


\begin{DoxyCode}
360 \{
361 \hyperlink{structStreamBufferDef__t}{StreamBuffer\_t} * pxStreamBuffer = xStreamBuffer;
362 
363     \hyperlink{FreeRTOS_8h_a228c70cd48927d6ab730ed1a6dfbe35f}{configASSERT}( pxStreamBuffer );
364 
365     \hyperlink{FreeRTOS_8h_ae919bd00b51b396ff237bc8ec3b6b439}{traceSTREAM\_BUFFER\_DELETE}( xStreamBuffer );
366 
367     \textcolor{keywordflow}{if}( ( pxStreamBuffer->\hyperlink{structStreamBufferDef__t_a1afd02d997a1cb3149e3cf203c681d58}{ucFlags} & \hyperlink{stream__buffer_8c_a80943e49aae8a493f02d78527b3fc01e}{sbFLAGS\_IS\_STATICALLY\_ALLOCATED} )
       == ( \hyperlink{stdint_8h_aba7bc1797add20fe3efdf37ced1182c5}{uint8\_t} ) \hyperlink{projdefs_8h_aa56260e937e7e203026707e5ba944273}{pdFALSE} )
368     \{
369 \textcolor{preprocessor}{        #if( configSUPPORT\_DYNAMIC\_ALLOCATION == 1 )}
370         \{
371             \textcolor{comment}{/* Both the structure and the buffer were allocated using a single call}
372 \textcolor{comment}{            to pvPortMalloc(), hence only one call to vPortFree() is required. */}
373             \hyperlink{portable_8h_a735cd3085bb7ba06ff8e47565bfd7016}{vPortFree}( ( \textcolor{keywordtype}{void} * ) pxStreamBuffer ); \textcolor{comment}{/*lint !e9087 Standard free() semantics
       require void *, plus pxStreamBuffer was allocated by pvPortMalloc(). */}
374         \}
375 \textcolor{preprocessor}{        #else}
376         \{
377             \textcolor{comment}{/* Should not be possible to get here, ucFlags must be corrupt.}
378 \textcolor{comment}{            Force an assert. */}
379             \hyperlink{FreeRTOS_8h_a228c70cd48927d6ab730ed1a6dfbe35f}{configASSERT}( xStreamBuffer == ( \hyperlink{structStreamBufferDef__t}{StreamBufferHandle\_t} ) ~0 );
380         \}
381 \textcolor{preprocessor}{        #endif}
382     \}
383     \textcolor{keywordflow}{else}
384     \{
385         \textcolor{comment}{/* The structure and buffer were not allocated dynamically and cannot be}
386 \textcolor{comment}{        freed - just scrub the structure so future use will assert. */}
387         ( void ) memset( pxStreamBuffer, 0x00, \textcolor{keyword}{sizeof}( \hyperlink{structStreamBufferDef__t}{StreamBuffer\_t} ) );
388     \}
389 \}
\end{DoxyCode}
\mbox{\Hypertarget{stream__buffer_8h_af32d1737de29f24ee31ac1e3c407d9fd}\label{stream__buffer_8h_af32d1737de29f24ee31ac1e3c407d9fd}} 
\index{stream\+\_\+buffer.\+h@{stream\+\_\+buffer.\+h}!x\+Stream\+Buffer\+Bytes\+Available@{x\+Stream\+Buffer\+Bytes\+Available}}
\index{x\+Stream\+Buffer\+Bytes\+Available@{x\+Stream\+Buffer\+Bytes\+Available}!stream\+\_\+buffer.\+h@{stream\+\_\+buffer.\+h}}
\subsubsection{\texorpdfstring{x\+Stream\+Buffer\+Bytes\+Available()}{xStreamBufferBytesAvailable()}}
{\footnotesize\ttfamily size\+\_\+t x\+Stream\+Buffer\+Bytes\+Available (\begin{DoxyParamCaption}\item[{\hyperlink{stream__buffer_8h_a8b80974e2278f073412293e6580ce56f}{Stream\+Buffer\+Handle\+\_\+t}}]{x\+Stream\+Buffer }\end{DoxyParamCaption})}



Definition at line 494 of file stream\+\_\+buffer.\+c.


\begin{DoxyCode}
495 \{
496 \textcolor{keyword}{const} \hyperlink{structStreamBufferDef__t}{StreamBuffer\_t} * \textcolor{keyword}{const} pxStreamBuffer = xStreamBuffer;
497 \textcolor{keywordtype}{size\_t} xReturn;
498 
499     \hyperlink{FreeRTOS_8h_a228c70cd48927d6ab730ed1a6dfbe35f}{configASSERT}( pxStreamBuffer );
500 
501     xReturn = \hyperlink{stream__buffer_8c_ac4183c0af266bc5ffbd4f3eb4a4d07c2}{prvBytesInBuffer}( pxStreamBuffer );
502     \textcolor{keywordflow}{return} xReturn;
503 \}
\end{DoxyCode}
\mbox{\Hypertarget{stream__buffer_8h_a7a613c6fa11323c871ce7991db214096}\label{stream__buffer_8h_a7a613c6fa11323c871ce7991db214096}} 
\index{stream\+\_\+buffer.\+h@{stream\+\_\+buffer.\+h}!x\+Stream\+Buffer\+Generic\+Create@{x\+Stream\+Buffer\+Generic\+Create}}
\index{x\+Stream\+Buffer\+Generic\+Create@{x\+Stream\+Buffer\+Generic\+Create}!stream\+\_\+buffer.\+h@{stream\+\_\+buffer.\+h}}
\subsubsection{\texorpdfstring{x\+Stream\+Buffer\+Generic\+Create()}{xStreamBufferGenericCreate()}}
{\footnotesize\ttfamily \hyperlink{stream__buffer_8h_a8b80974e2278f073412293e6580ce56f}{Stream\+Buffer\+Handle\+\_\+t} x\+Stream\+Buffer\+Generic\+Create (\begin{DoxyParamCaption}\item[{size\+\_\+t}]{x\+Buffer\+Size\+Bytes,  }\item[{size\+\_\+t}]{x\+Trigger\+Level\+Bytes,  }\item[{\hyperlink{pic32mx_2portmacro_8h_a46fb21e00ae0729d7515c0fbf2269796}{Base\+Type\+\_\+t}}]{x\+Is\+Message\+Buffer }\end{DoxyParamCaption})}

\mbox{\Hypertarget{stream__buffer_8h_a1263847a3f77a4f34462df326d78c48c}\label{stream__buffer_8h_a1263847a3f77a4f34462df326d78c48c}} 
\index{stream\+\_\+buffer.\+h@{stream\+\_\+buffer.\+h}!x\+Stream\+Buffer\+Generic\+Create\+Static@{x\+Stream\+Buffer\+Generic\+Create\+Static}}
\index{x\+Stream\+Buffer\+Generic\+Create\+Static@{x\+Stream\+Buffer\+Generic\+Create\+Static}!stream\+\_\+buffer.\+h@{stream\+\_\+buffer.\+h}}
\subsubsection{\texorpdfstring{x\+Stream\+Buffer\+Generic\+Create\+Static()}{xStreamBufferGenericCreateStatic()}}
{\footnotesize\ttfamily \hyperlink{stream__buffer_8h_a8b80974e2278f073412293e6580ce56f}{Stream\+Buffer\+Handle\+\_\+t} x\+Stream\+Buffer\+Generic\+Create\+Static (\begin{DoxyParamCaption}\item[{size\+\_\+t}]{x\+Buffer\+Size\+Bytes,  }\item[{size\+\_\+t}]{x\+Trigger\+Level\+Bytes,  }\item[{\hyperlink{pic32mx_2portmacro_8h_a46fb21e00ae0729d7515c0fbf2269796}{Base\+Type\+\_\+t}}]{x\+Is\+Message\+Buffer,  }\item[{\hyperlink{stdint_8h_aba7bc1797add20fe3efdf37ced1182c5}{uint8\+\_\+t} $\ast$const}]{puc\+Stream\+Buffer\+Storage\+Area,  }\item[{\hyperlink{FreeRTOS_8h_a97741869d647b29aa4b0698a7de79a6a}{Static\+Stream\+Buffer\+\_\+t} $\ast$const}]{px\+Static\+Stream\+Buffer }\end{DoxyParamCaption})}

\mbox{\Hypertarget{stream__buffer_8h_af65cd558025ddc29ca68fba1b3f5dc19}\label{stream__buffer_8h_af65cd558025ddc29ca68fba1b3f5dc19}} 
\index{stream\+\_\+buffer.\+h@{stream\+\_\+buffer.\+h}!x\+Stream\+Buffer\+Is\+Empty@{x\+Stream\+Buffer\+Is\+Empty}}
\index{x\+Stream\+Buffer\+Is\+Empty@{x\+Stream\+Buffer\+Is\+Empty}!stream\+\_\+buffer.\+h@{stream\+\_\+buffer.\+h}}
\subsubsection{\texorpdfstring{x\+Stream\+Buffer\+Is\+Empty()}{xStreamBufferIsEmpty()}}
{\footnotesize\ttfamily \hyperlink{pic32mx_2portmacro_8h_a46fb21e00ae0729d7515c0fbf2269796}{Base\+Type\+\_\+t} x\+Stream\+Buffer\+Is\+Empty (\begin{DoxyParamCaption}\item[{\hyperlink{stream__buffer_8h_a8b80974e2278f073412293e6580ce56f}{Stream\+Buffer\+Handle\+\_\+t}}]{x\+Stream\+Buffer }\end{DoxyParamCaption})}



Definition at line 970 of file stream\+\_\+buffer.\+c.


\begin{DoxyCode}
971 \{
972 \textcolor{keyword}{const} \hyperlink{structStreamBufferDef__t}{StreamBuffer\_t} * \textcolor{keyword}{const} pxStreamBuffer = xStreamBuffer;
973 \hyperlink{pic32mx_2portmacro_8h_a46fb21e00ae0729d7515c0fbf2269796}{BaseType\_t} xReturn;
974 \textcolor{keywordtype}{size\_t} xTail;
975 
976     \hyperlink{FreeRTOS_8h_a228c70cd48927d6ab730ed1a6dfbe35f}{configASSERT}( pxStreamBuffer );
977 
978     \textcolor{comment}{/* True if no bytes are available. */}
979     xTail = pxStreamBuffer->\hyperlink{structStreamBufferDef__t_a937e441ed6c946a099d52b5955d7302c}{xTail};
980     \textcolor{keywordflow}{if}( pxStreamBuffer->\hyperlink{structStreamBufferDef__t_a75aafb9fdee8f0666837302bd9b12341}{xHead} == xTail )
981     \{
982         xReturn = \hyperlink{projdefs_8h_af268cf937960eb029256bd9c4d949fbe}{pdTRUE};
983     \}
984     \textcolor{keywordflow}{else}
985     \{
986         xReturn = \hyperlink{projdefs_8h_aa56260e937e7e203026707e5ba944273}{pdFALSE};
987     \}
988 
989     \textcolor{keywordflow}{return} xReturn;
990 \}
\end{DoxyCode}
\mbox{\Hypertarget{stream__buffer_8h_ae393d82ee06e89692248a4381f85dc86}\label{stream__buffer_8h_ae393d82ee06e89692248a4381f85dc86}} 
\index{stream\+\_\+buffer.\+h@{stream\+\_\+buffer.\+h}!x\+Stream\+Buffer\+Is\+Full@{x\+Stream\+Buffer\+Is\+Full}}
\index{x\+Stream\+Buffer\+Is\+Full@{x\+Stream\+Buffer\+Is\+Full}!stream\+\_\+buffer.\+h@{stream\+\_\+buffer.\+h}}
\subsubsection{\texorpdfstring{x\+Stream\+Buffer\+Is\+Full()}{xStreamBufferIsFull()}}
{\footnotesize\ttfamily \hyperlink{pic32mx_2portmacro_8h_a46fb21e00ae0729d7515c0fbf2269796}{Base\+Type\+\_\+t} x\+Stream\+Buffer\+Is\+Full (\begin{DoxyParamCaption}\item[{\hyperlink{stream__buffer_8h_a8b80974e2278f073412293e6580ce56f}{Stream\+Buffer\+Handle\+\_\+t}}]{x\+Stream\+Buffer }\end{DoxyParamCaption})}



Definition at line 993 of file stream\+\_\+buffer.\+c.


\begin{DoxyCode}
994 \{
995 \hyperlink{pic32mx_2portmacro_8h_a46fb21e00ae0729d7515c0fbf2269796}{BaseType\_t} xReturn;
996 \textcolor{keywordtype}{size\_t} xBytesToStoreMessageLength;
997 \textcolor{keyword}{const} \hyperlink{structStreamBufferDef__t}{StreamBuffer\_t} * \textcolor{keyword}{const} pxStreamBuffer = xStreamBuffer;
998 
999     \hyperlink{FreeRTOS_8h_a228c70cd48927d6ab730ed1a6dfbe35f}{configASSERT}( pxStreamBuffer );
1000 
1001     \textcolor{comment}{/* This generic version of the receive function is used by both message}
1002 \textcolor{comment}{    buffers, which store discrete messages, and stream buffers, which store a}
1003 \textcolor{comment}{    continuous stream of bytes.  Discrete messages include an additional}
1004 \textcolor{comment}{    sbBYTES\_TO\_STORE\_MESSAGE\_LENGTH bytes that hold the length of the message. */}
1005     \textcolor{keywordflow}{if}( ( pxStreamBuffer->\hyperlink{structStreamBufferDef__t_a1afd02d997a1cb3149e3cf203c681d58}{ucFlags} & \hyperlink{stream__buffer_8c_a4954c04e3f9f6b0d4a98b9441b35d896}{sbFLAGS\_IS\_MESSAGE\_BUFFER} ) != ( 
      \hyperlink{stdint_8h_aba7bc1797add20fe3efdf37ced1182c5}{uint8\_t} ) 0 )
1006     \{
1007         xBytesToStoreMessageLength = \hyperlink{stream__buffer_8c_aaa21967227eb06d02cdd038047b836f6}{sbBYTES\_TO\_STORE\_MESSAGE\_LENGTH};
1008     \}
1009     \textcolor{keywordflow}{else}
1010     \{
1011         xBytesToStoreMessageLength = 0;
1012     \}
1013 
1014     \textcolor{comment}{/* True if the available space equals zero. */}
1015     \textcolor{keywordflow}{if}( \hyperlink{stream__buffer_8c_a8fb90892c74eb94fb063b2a018a10509}{xStreamBufferSpacesAvailable}( xStreamBuffer ) <= 
      xBytesToStoreMessageLength )
1016     \{
1017         xReturn = \hyperlink{projdefs_8h_af268cf937960eb029256bd9c4d949fbe}{pdTRUE};
1018     \}
1019     \textcolor{keywordflow}{else}
1020     \{
1021         xReturn = \hyperlink{projdefs_8h_aa56260e937e7e203026707e5ba944273}{pdFALSE};
1022     \}
1023 
1024     \textcolor{keywordflow}{return} xReturn;
1025 \}
\end{DoxyCode}
\mbox{\Hypertarget{stream__buffer_8h_a9a952a2cffab91471ec2a3651e2160ec}\label{stream__buffer_8h_a9a952a2cffab91471ec2a3651e2160ec}} 
\index{stream\+\_\+buffer.\+h@{stream\+\_\+buffer.\+h}!x\+Stream\+Buffer\+Next\+Message\+Length\+Bytes@{x\+Stream\+Buffer\+Next\+Message\+Length\+Bytes}}
\index{x\+Stream\+Buffer\+Next\+Message\+Length\+Bytes@{x\+Stream\+Buffer\+Next\+Message\+Length\+Bytes}!stream\+\_\+buffer.\+h@{stream\+\_\+buffer.\+h}}
\subsubsection{\texorpdfstring{x\+Stream\+Buffer\+Next\+Message\+Length\+Bytes()}{xStreamBufferNextMessageLengthBytes()}}
{\footnotesize\ttfamily size\+\_\+t x\+Stream\+Buffer\+Next\+Message\+Length\+Bytes (\begin{DoxyParamCaption}\item[{\hyperlink{stream__buffer_8h_a8b80974e2278f073412293e6580ce56f}{Stream\+Buffer\+Handle\+\_\+t}}]{x\+Stream\+Buffer }\end{DoxyParamCaption})}



Definition at line 817 of file stream\+\_\+buffer.\+c.


\begin{DoxyCode}
818 \{
819 \hyperlink{structStreamBufferDef__t}{StreamBuffer\_t} * \textcolor{keyword}{const} pxStreamBuffer = xStreamBuffer;
820 \textcolor{keywordtype}{size\_t} xReturn, xBytesAvailable, xOriginalTail;
821 \hyperlink{FreeRTOS_8h_a019c8bfcdd8eca676c7b9993bda95967}{configMESSAGE\_BUFFER\_LENGTH\_TYPE} xTempReturn;
822 
823     \hyperlink{FreeRTOS_8h_a228c70cd48927d6ab730ed1a6dfbe35f}{configASSERT}( pxStreamBuffer );
824 
825     \textcolor{comment}{/* Ensure the stream buffer is being used as a message buffer. */}
826     \textcolor{keywordflow}{if}( ( pxStreamBuffer->\hyperlink{structStreamBufferDef__t_a1afd02d997a1cb3149e3cf203c681d58}{ucFlags} & \hyperlink{stream__buffer_8c_a4954c04e3f9f6b0d4a98b9441b35d896}{sbFLAGS\_IS\_MESSAGE\_BUFFER} ) != ( 
      \hyperlink{stdint_8h_aba7bc1797add20fe3efdf37ced1182c5}{uint8\_t} ) 0 )
827     \{
828         xBytesAvailable = \hyperlink{stream__buffer_8c_ac4183c0af266bc5ffbd4f3eb4a4d07c2}{prvBytesInBuffer}( pxStreamBuffer );
829         \textcolor{keywordflow}{if}( xBytesAvailable > \hyperlink{stream__buffer_8c_aaa21967227eb06d02cdd038047b836f6}{sbBYTES\_TO\_STORE\_MESSAGE\_LENGTH} )
830         \{
831             \textcolor{comment}{/* The number of bytes available is greater than the number of bytes}
832 \textcolor{comment}{            required to hold the length of the next message, so another message}
833 \textcolor{comment}{            is available.  Return its length without removing the length bytes}
834 \textcolor{comment}{            from the buffer.  A copy of the tail is stored so the buffer can be}
835 \textcolor{comment}{            returned to its prior state as the message is not actually being}
836 \textcolor{comment}{            removed from the buffer. */}
837             xOriginalTail = pxStreamBuffer->\hyperlink{structStreamBufferDef__t_a937e441ed6c946a099d52b5955d7302c}{xTail};
838             ( void ) \hyperlink{stream__buffer_8c_a8ec163e54dc25c091dbff11c1b8f7a2c}{prvReadBytesFromBuffer}( pxStreamBuffer, ( 
      \hyperlink{stdint_8h_aba7bc1797add20fe3efdf37ced1182c5}{uint8\_t} * ) &xTempReturn, \hyperlink{stream__buffer_8c_aaa21967227eb06d02cdd038047b836f6}{sbBYTES\_TO\_STORE\_MESSAGE\_LENGTH}, 
      xBytesAvailable );
839             xReturn = ( size\_t ) xTempReturn;
840             pxStreamBuffer->\hyperlink{structStreamBufferDef__t_a937e441ed6c946a099d52b5955d7302c}{xTail} = xOriginalTail;
841         \}
842         \textcolor{keywordflow}{else}
843         \{
844             \textcolor{comment}{/* The minimum amount of bytes in a message buffer is}
845 \textcolor{comment}{            ( sbBYTES\_TO\_STORE\_MESSAGE\_LENGTH + 1 ), so if xBytesAvailable is}
846 \textcolor{comment}{            less than sbBYTES\_TO\_STORE\_MESSAGE\_LENGTH the only other valid}
847 \textcolor{comment}{            value is 0. */}
848             \hyperlink{FreeRTOS_8h_a228c70cd48927d6ab730ed1a6dfbe35f}{configASSERT}( xBytesAvailable == 0 );
849             xReturn = 0;
850         \}
851     \}
852     \textcolor{keywordflow}{else}
853     \{
854         xReturn = 0;
855     \}
856 
857     \textcolor{keywordflow}{return} xReturn;
858 \}
\end{DoxyCode}
\mbox{\Hypertarget{stream__buffer_8h_a55efc144b988598d84a6087d3e20b507}\label{stream__buffer_8h_a55efc144b988598d84a6087d3e20b507}} 
\index{stream\+\_\+buffer.\+h@{stream\+\_\+buffer.\+h}!x\+Stream\+Buffer\+Receive@{x\+Stream\+Buffer\+Receive}}
\index{x\+Stream\+Buffer\+Receive@{x\+Stream\+Buffer\+Receive}!stream\+\_\+buffer.\+h@{stream\+\_\+buffer.\+h}}
\subsubsection{\texorpdfstring{x\+Stream\+Buffer\+Receive()}{xStreamBufferReceive()}}
{\footnotesize\ttfamily size\+\_\+t x\+Stream\+Buffer\+Receive (\begin{DoxyParamCaption}\item[{\hyperlink{stream__buffer_8h_a8b80974e2278f073412293e6580ce56f}{Stream\+Buffer\+Handle\+\_\+t}}]{x\+Stream\+Buffer,  }\item[{void $\ast$}]{pv\+Rx\+Data,  }\item[{size\+\_\+t}]{x\+Buffer\+Length\+Bytes,  }\item[{\hyperlink{pic32mx_2portmacro_8h_aa69c48c6e902ce54f70886e6573c92a9}{Tick\+Type\+\_\+t}}]{x\+Ticks\+To\+Wait }\end{DoxyParamCaption})}



Definition at line 713 of file stream\+\_\+buffer.\+c.


\begin{DoxyCode}
717 \{
718 \hyperlink{structStreamBufferDef__t}{StreamBuffer\_t} * \textcolor{keyword}{const} pxStreamBuffer = xStreamBuffer;
719 \textcolor{keywordtype}{size\_t} xReceivedLength = 0, xBytesAvailable, xBytesToStoreMessageLength;
720 
721     \hyperlink{FreeRTOS_8h_a228c70cd48927d6ab730ed1a6dfbe35f}{configASSERT}( pvRxData );
722     \hyperlink{FreeRTOS_8h_a228c70cd48927d6ab730ed1a6dfbe35f}{configASSERT}( pxStreamBuffer );
723 
724     \textcolor{comment}{/* This receive function is used by both message buffers, which store}
725 \textcolor{comment}{    discrete messages, and stream buffers, which store a continuous stream of}
726 \textcolor{comment}{    bytes.  Discrete messages include an additional}
727 \textcolor{comment}{    sbBYTES\_TO\_STORE\_MESSAGE\_LENGTH bytes that hold the length of the}
728 \textcolor{comment}{    message. */}
729     \textcolor{keywordflow}{if}( ( pxStreamBuffer->\hyperlink{structStreamBufferDef__t_a1afd02d997a1cb3149e3cf203c681d58}{ucFlags} & \hyperlink{stream__buffer_8c_a4954c04e3f9f6b0d4a98b9441b35d896}{sbFLAGS\_IS\_MESSAGE\_BUFFER} ) != ( 
      \hyperlink{stdint_8h_aba7bc1797add20fe3efdf37ced1182c5}{uint8\_t} ) 0 )
730     \{
731         xBytesToStoreMessageLength = \hyperlink{stream__buffer_8c_aaa21967227eb06d02cdd038047b836f6}{sbBYTES\_TO\_STORE\_MESSAGE\_LENGTH};
732     \}
733     \textcolor{keywordflow}{else}
734     \{
735         xBytesToStoreMessageLength = 0;
736     \}
737 
738     \textcolor{keywordflow}{if}( xTicksToWait != ( \hyperlink{pic32mx_2portmacro_8h_aa69c48c6e902ce54f70886e6573c92a9}{TickType\_t} ) 0 )
739     \{
740         \textcolor{comment}{/* Checking if there is data and clearing the notification state must be}
741 \textcolor{comment}{        performed atomically. */}
742         \hyperlink{task_8h_ab7bf0ae866292ba8296091a9d5209689}{taskENTER\_CRITICAL}();
743         \{
744             xBytesAvailable = \hyperlink{stream__buffer_8c_ac4183c0af266bc5ffbd4f3eb4a4d07c2}{prvBytesInBuffer}( pxStreamBuffer );
745 
746             \textcolor{comment}{/* If this function was invoked by a message buffer read then}
747 \textcolor{comment}{            xBytesToStoreMessageLength holds the number of bytes used to hold}
748 \textcolor{comment}{            the length of the next discrete message.  If this function was}
749 \textcolor{comment}{            invoked by a stream buffer read then xBytesToStoreMessageLength will}
750 \textcolor{comment}{            be 0. */}
751             \textcolor{keywordflow}{if}( xBytesAvailable <= xBytesToStoreMessageLength )
752             \{
753                 \textcolor{comment}{/* Clear notification state as going to wait for data. */}
754                 ( void ) \hyperlink{task_8h_a4cb6c908a9d2d733e9d519d7dc27bb34}{xTaskNotifyStateClear}( \hyperlink{group__BSPDefine_ga070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL} );
755 
756                 \textcolor{comment}{/* Should only be one reader. */}
757                 \hyperlink{FreeRTOS_8h_a228c70cd48927d6ab730ed1a6dfbe35f}{configASSERT}( pxStreamBuffer->\hyperlink{structStreamBufferDef__t_a8377ae8625121efa22d66e678add4057}{xTaskWaitingToReceive} == 
      \hyperlink{group__BSPDefine_ga070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL} );
758                 pxStreamBuffer->\hyperlink{structStreamBufferDef__t_a8377ae8625121efa22d66e678add4057}{xTaskWaitingToReceive} = 
      \hyperlink{task_8h_a85a0f9c9f817b18686efbf8f37c72dfc}{xTaskGetCurrentTaskHandle}();
759             \}
760             \textcolor{keywordflow}{else}
761             \{
762                 \hyperlink{FreeRTOS_8h_ac77e2af1a6b0d38fbab36cf2aa96f1a8}{mtCOVERAGE\_TEST\_MARKER}();
763             \}
764         \}
765         \hyperlink{task_8h_aac8f36abc45ac4ee714bd6b81e3b1643}{taskEXIT\_CRITICAL}();
766 
767         \textcolor{keywordflow}{if}( xBytesAvailable <= xBytesToStoreMessageLength )
768         \{
769             \textcolor{comment}{/* Wait for data to be available. */}
770             \hyperlink{FreeRTOS_8h_a80419264672cb0ddd2b865048483b537}{traceBLOCKING\_ON\_STREAM\_BUFFER\_RECEIVE}( xStreamBuffer );
771             ( void ) \hyperlink{task_8h_a0475fcda9718f403521c270a7270ff93}{xTaskNotifyWait}( ( \hyperlink{stdint_8h_a435d1572bf3f880d55459d9805097f62}{uint32\_t} ) 0, ( 
      \hyperlink{stdint_8h_a435d1572bf3f880d55459d9805097f62}{uint32\_t} ) 0, \hyperlink{group__BSPDefine_ga070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL}, xTicksToWait );
772             pxStreamBuffer->\hyperlink{structStreamBufferDef__t_a8377ae8625121efa22d66e678add4057}{xTaskWaitingToReceive} = \hyperlink{group__BSPDefine_ga070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL};
773 
774             \textcolor{comment}{/* Recheck the data available after blocking. */}
775             xBytesAvailable = \hyperlink{stream__buffer_8c_ac4183c0af266bc5ffbd4f3eb4a4d07c2}{prvBytesInBuffer}( pxStreamBuffer );
776         \}
777         \textcolor{keywordflow}{else}
778         \{
779             \hyperlink{FreeRTOS_8h_ac77e2af1a6b0d38fbab36cf2aa96f1a8}{mtCOVERAGE\_TEST\_MARKER}();
780         \}
781     \}
782     \textcolor{keywordflow}{else}
783     \{
784         xBytesAvailable = \hyperlink{stream__buffer_8c_ac4183c0af266bc5ffbd4f3eb4a4d07c2}{prvBytesInBuffer}( pxStreamBuffer );
785     \}
786 
787     \textcolor{comment}{/* Whether receiving a discrete message (where xBytesToStoreMessageLength}
788 \textcolor{comment}{    holds the number of bytes used to store the message length) or a stream of}
789 \textcolor{comment}{    bytes (where xBytesToStoreMessageLength is zero), the number of bytes}
790 \textcolor{comment}{    available must be greater than xBytesToStoreMessageLength to be able to}
791 \textcolor{comment}{    read bytes from the buffer. */}
792     \textcolor{keywordflow}{if}( xBytesAvailable > xBytesToStoreMessageLength )
793     \{
794         xReceivedLength = \hyperlink{stream__buffer_8c_aea486f3983538e061b22cce98612d8bc}{prvReadMessageFromBuffer}( pxStreamBuffer, pvRxData, 
      xBufferLengthBytes, xBytesAvailable, xBytesToStoreMessageLength );
795 
796         \textcolor{comment}{/* Was a task waiting for space in the buffer? */}
797         \textcolor{keywordflow}{if}( xReceivedLength != ( \textcolor{keywordtype}{size\_t} ) 0 )
798         \{
799             \hyperlink{FreeRTOS_8h_a6ecefd3df93cb11986cca1b41f215138}{traceSTREAM\_BUFFER\_RECEIVE}( xStreamBuffer, xReceivedLength );
800             \hyperlink{stream__buffer_8c_a4d6a29d283acfa2d4ef576476eedc789}{sbRECEIVE\_COMPLETED}( pxStreamBuffer );
801         \}
802         \textcolor{keywordflow}{else}
803         \{
804             \hyperlink{FreeRTOS_8h_ac77e2af1a6b0d38fbab36cf2aa96f1a8}{mtCOVERAGE\_TEST\_MARKER}();
805         \}
806     \}
807     \textcolor{keywordflow}{else}
808     \{
809         \hyperlink{FreeRTOS_8h_a57e5d8ccc74dd8e04bd3a8534de79bb4}{traceSTREAM\_BUFFER\_RECEIVE\_FAILED}( xStreamBuffer );
810         \hyperlink{FreeRTOS_8h_ac77e2af1a6b0d38fbab36cf2aa96f1a8}{mtCOVERAGE\_TEST\_MARKER}();
811     \}
812 
813     \textcolor{keywordflow}{return} xReceivedLength;
814 \}
\end{DoxyCode}
\mbox{\Hypertarget{stream__buffer_8h_ac12e93e96e0eafbc0e981d00e7275d32}\label{stream__buffer_8h_ac12e93e96e0eafbc0e981d00e7275d32}} 
\index{stream\+\_\+buffer.\+h@{stream\+\_\+buffer.\+h}!x\+Stream\+Buffer\+Receive\+Completed\+From\+I\+SR@{x\+Stream\+Buffer\+Receive\+Completed\+From\+I\+SR}}
\index{x\+Stream\+Buffer\+Receive\+Completed\+From\+I\+SR@{x\+Stream\+Buffer\+Receive\+Completed\+From\+I\+SR}!stream\+\_\+buffer.\+h@{stream\+\_\+buffer.\+h}}
\subsubsection{\texorpdfstring{x\+Stream\+Buffer\+Receive\+Completed\+From\+I\+S\+R()}{xStreamBufferReceiveCompletedFromISR()}}
{\footnotesize\ttfamily \hyperlink{pic32mx_2portmacro_8h_a46fb21e00ae0729d7515c0fbf2269796}{Base\+Type\+\_\+t} x\+Stream\+Buffer\+Receive\+Completed\+From\+I\+SR (\begin{DoxyParamCaption}\item[{\hyperlink{stream__buffer_8h_a8b80974e2278f073412293e6580ce56f}{Stream\+Buffer\+Handle\+\_\+t}}]{x\+Stream\+Buffer,  }\item[{\hyperlink{pic32mx_2portmacro_8h_a46fb21e00ae0729d7515c0fbf2269796}{Base\+Type\+\_\+t} $\ast$}]{px\+Higher\+Priority\+Task\+Woken }\end{DoxyParamCaption})}



Definition at line 1058 of file stream\+\_\+buffer.\+c.


\begin{DoxyCode}
1059 \{
1060 \hyperlink{structStreamBufferDef__t}{StreamBuffer\_t} * \textcolor{keyword}{const} pxStreamBuffer = xStreamBuffer;
1061 \hyperlink{pic32mx_2portmacro_8h_a46fb21e00ae0729d7515c0fbf2269796}{BaseType\_t} xReturn;
1062 \hyperlink{pic32mx_2portmacro_8h_a646f89d4298e4f5afd522202b11cb2e6}{UBaseType\_t} uxSavedInterruptStatus;
1063 
1064     \hyperlink{FreeRTOS_8h_a228c70cd48927d6ab730ed1a6dfbe35f}{configASSERT}( pxStreamBuffer );
1065 
1066     uxSavedInterruptStatus = ( \hyperlink{pic32mx_2portmacro_8h_a646f89d4298e4f5afd522202b11cb2e6}{UBaseType\_t} ) 
      \hyperlink{FreeRTOS_8h_a31b4260dbc1823ba80b578f86eb15a98}{portSET\_INTERRUPT\_MASK\_FROM\_ISR}();
1067     \{
1068         \textcolor{keywordflow}{if}( ( pxStreamBuffer )->xTaskWaitingToSend != \hyperlink{group__BSPDefine_ga070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL} )
1069         \{
1070             ( void ) \hyperlink{task_8h_a1ed9129068b96a909356bd0369c5ecb0}{xTaskNotifyFromISR}( ( pxStreamBuffer )->xTaskWaitingToSend,
1071                                          ( \hyperlink{stdint_8h_a435d1572bf3f880d55459d9805097f62}{uint32\_t} ) 0,
1072                                          \hyperlink{task_8h_ae8abc4f7da5b6880467daafbf19cd233abac2b17ab15444724b6f35d47cd0a64a}{eNoAction},
1073                                          pxHigherPriorityTaskWoken );
1074             ( pxStreamBuffer )->xTaskWaitingToSend = \hyperlink{group__BSPDefine_ga070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL};
1075             xReturn = \hyperlink{projdefs_8h_af268cf937960eb029256bd9c4d949fbe}{pdTRUE};
1076         \}
1077         \textcolor{keywordflow}{else}
1078         \{
1079             xReturn = \hyperlink{projdefs_8h_aa56260e937e7e203026707e5ba944273}{pdFALSE};
1080         \}
1081     \}
1082     \hyperlink{FreeRTOS_8h_a2661e2c5a4e4afe5bef2ebe9872e28b3}{portCLEAR\_INTERRUPT\_MASK\_FROM\_ISR}( uxSavedInterruptStatus );
1083 
1084     \textcolor{keywordflow}{return} xReturn;
1085 \}
\end{DoxyCode}
\mbox{\Hypertarget{stream__buffer_8h_a6c882a1d9f26c40f93f271bd1b844b3b}\label{stream__buffer_8h_a6c882a1d9f26c40f93f271bd1b844b3b}} 
\index{stream\+\_\+buffer.\+h@{stream\+\_\+buffer.\+h}!x\+Stream\+Buffer\+Receive\+From\+I\+SR@{x\+Stream\+Buffer\+Receive\+From\+I\+SR}}
\index{x\+Stream\+Buffer\+Receive\+From\+I\+SR@{x\+Stream\+Buffer\+Receive\+From\+I\+SR}!stream\+\_\+buffer.\+h@{stream\+\_\+buffer.\+h}}
\subsubsection{\texorpdfstring{x\+Stream\+Buffer\+Receive\+From\+I\+S\+R()}{xStreamBufferReceiveFromISR()}}
{\footnotesize\ttfamily size\+\_\+t x\+Stream\+Buffer\+Receive\+From\+I\+SR (\begin{DoxyParamCaption}\item[{\hyperlink{stream__buffer_8h_a8b80974e2278f073412293e6580ce56f}{Stream\+Buffer\+Handle\+\_\+t}}]{x\+Stream\+Buffer,  }\item[{void $\ast$}]{pv\+Rx\+Data,  }\item[{size\+\_\+t}]{x\+Buffer\+Length\+Bytes,  }\item[{\hyperlink{pic32mx_2portmacro_8h_a46fb21e00ae0729d7515c0fbf2269796}{Base\+Type\+\_\+t} $\ast$const}]{px\+Higher\+Priority\+Task\+Woken }\end{DoxyParamCaption})}



Definition at line 861 of file stream\+\_\+buffer.\+c.


\begin{DoxyCode}
865 \{
866 \hyperlink{structStreamBufferDef__t}{StreamBuffer\_t} * \textcolor{keyword}{const} pxStreamBuffer = xStreamBuffer;
867 \textcolor{keywordtype}{size\_t} xReceivedLength = 0, xBytesAvailable, xBytesToStoreMessageLength;
868 
869     \hyperlink{FreeRTOS_8h_a228c70cd48927d6ab730ed1a6dfbe35f}{configASSERT}( pvRxData );
870     \hyperlink{FreeRTOS_8h_a228c70cd48927d6ab730ed1a6dfbe35f}{configASSERT}( pxStreamBuffer );
871 
872     \textcolor{comment}{/* This receive function is used by both message buffers, which store}
873 \textcolor{comment}{    discrete messages, and stream buffers, which store a continuous stream of}
874 \textcolor{comment}{    bytes.  Discrete messages include an additional}
875 \textcolor{comment}{    sbBYTES\_TO\_STORE\_MESSAGE\_LENGTH bytes that hold the length of the}
876 \textcolor{comment}{    message. */}
877     \textcolor{keywordflow}{if}( ( pxStreamBuffer->\hyperlink{structStreamBufferDef__t_a1afd02d997a1cb3149e3cf203c681d58}{ucFlags} & \hyperlink{stream__buffer_8c_a4954c04e3f9f6b0d4a98b9441b35d896}{sbFLAGS\_IS\_MESSAGE\_BUFFER} ) != ( 
      \hyperlink{stdint_8h_aba7bc1797add20fe3efdf37ced1182c5}{uint8\_t} ) 0 )
878     \{
879         xBytesToStoreMessageLength = \hyperlink{stream__buffer_8c_aaa21967227eb06d02cdd038047b836f6}{sbBYTES\_TO\_STORE\_MESSAGE\_LENGTH};
880     \}
881     \textcolor{keywordflow}{else}
882     \{
883         xBytesToStoreMessageLength = 0;
884     \}
885 
886     xBytesAvailable = \hyperlink{stream__buffer_8c_ac4183c0af266bc5ffbd4f3eb4a4d07c2}{prvBytesInBuffer}( pxStreamBuffer );
887 
888     \textcolor{comment}{/* Whether receiving a discrete message (where xBytesToStoreMessageLength}
889 \textcolor{comment}{    holds the number of bytes used to store the message length) or a stream of}
890 \textcolor{comment}{    bytes (where xBytesToStoreMessageLength is zero), the number of bytes}
891 \textcolor{comment}{    available must be greater than xBytesToStoreMessageLength to be able to}
892 \textcolor{comment}{    read bytes from the buffer. */}
893     \textcolor{keywordflow}{if}( xBytesAvailable > xBytesToStoreMessageLength )
894     \{
895         xReceivedLength = \hyperlink{stream__buffer_8c_aea486f3983538e061b22cce98612d8bc}{prvReadMessageFromBuffer}( pxStreamBuffer, pvRxData, 
      xBufferLengthBytes, xBytesAvailable, xBytesToStoreMessageLength );
896 
897         \textcolor{comment}{/* Was a task waiting for space in the buffer? */}
898         \textcolor{keywordflow}{if}( xReceivedLength != ( \textcolor{keywordtype}{size\_t} ) 0 )
899         \{
900             \hyperlink{stream__buffer_8c_ab72c363566113705c021596f90c6eb5a}{sbRECEIVE\_COMPLETED\_FROM\_ISR}( pxStreamBuffer, 
      pxHigherPriorityTaskWoken );
901         \}
902         \textcolor{keywordflow}{else}
903         \{
904             \hyperlink{FreeRTOS_8h_ac77e2af1a6b0d38fbab36cf2aa96f1a8}{mtCOVERAGE\_TEST\_MARKER}();
905         \}
906     \}
907     \textcolor{keywordflow}{else}
908     \{
909         \hyperlink{FreeRTOS_8h_ac77e2af1a6b0d38fbab36cf2aa96f1a8}{mtCOVERAGE\_TEST\_MARKER}();
910     \}
911 
912     \hyperlink{FreeRTOS_8h_a30fe3a49605cf2c232d190e4f6565a0d}{traceSTREAM\_BUFFER\_RECEIVE\_FROM\_ISR}( xStreamBuffer, xReceivedLength 
      );
913 
914     \textcolor{keywordflow}{return} xReceivedLength;
915 \}
\end{DoxyCode}
\mbox{\Hypertarget{stream__buffer_8h_a5253429645c67902c2fc8682f8af0aac}\label{stream__buffer_8h_a5253429645c67902c2fc8682f8af0aac}} 
\index{stream\+\_\+buffer.\+h@{stream\+\_\+buffer.\+h}!x\+Stream\+Buffer\+Reset@{x\+Stream\+Buffer\+Reset}}
\index{x\+Stream\+Buffer\+Reset@{x\+Stream\+Buffer\+Reset}!stream\+\_\+buffer.\+h@{stream\+\_\+buffer.\+h}}
\subsubsection{\texorpdfstring{x\+Stream\+Buffer\+Reset()}{xStreamBufferReset()}}
{\footnotesize\ttfamily \hyperlink{pic32mx_2portmacro_8h_a46fb21e00ae0729d7515c0fbf2269796}{Base\+Type\+\_\+t} x\+Stream\+Buffer\+Reset (\begin{DoxyParamCaption}\item[{\hyperlink{stream__buffer_8h_a8b80974e2278f073412293e6580ce56f}{Stream\+Buffer\+Handle\+\_\+t}}]{x\+Stream\+Buffer }\end{DoxyParamCaption})}



Definition at line 392 of file stream\+\_\+buffer.\+c.


\begin{DoxyCode}
393 \{
394 \hyperlink{structStreamBufferDef__t}{StreamBuffer\_t} * \textcolor{keyword}{const} pxStreamBuffer = xStreamBuffer;
395 \hyperlink{pic32mx_2portmacro_8h_a46fb21e00ae0729d7515c0fbf2269796}{BaseType\_t} xReturn = \hyperlink{projdefs_8h_a99e2866c8cf4fe86db87dab62e7d6aa6}{pdFAIL};
396 
397 \textcolor{preprocessor}{#if( configUSE\_TRACE\_FACILITY == 1 )}
398     \hyperlink{pic32mx_2portmacro_8h_a646f89d4298e4f5afd522202b11cb2e6}{UBaseType\_t} uxStreamBufferNumber;
399 \textcolor{preprocessor}{#endif}
400 
401     \hyperlink{FreeRTOS_8h_a228c70cd48927d6ab730ed1a6dfbe35f}{configASSERT}( pxStreamBuffer );
402 
403 \textcolor{preprocessor}{    #if( configUSE\_TRACE\_FACILITY == 1 )}
404     \{
405         \textcolor{comment}{/* Store the stream buffer number so it can be restored after the}
406 \textcolor{comment}{        reset. */}
407         uxStreamBufferNumber = pxStreamBuffer->uxStreamBufferNumber;
408     \}
409 \textcolor{preprocessor}{    #endif}
410 
411     \textcolor{comment}{/* Can only reset a message buffer if there are no tasks blocked on it. */}
412     \hyperlink{task_8h_ab7bf0ae866292ba8296091a9d5209689}{taskENTER\_CRITICAL}();
413     \{
414         \textcolor{keywordflow}{if}( pxStreamBuffer->\hyperlink{structStreamBufferDef__t_a8377ae8625121efa22d66e678add4057}{xTaskWaitingToReceive} == \hyperlink{group__BSPDefine_ga070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL} )
415         \{
416             \textcolor{keywordflow}{if}( pxStreamBuffer->\hyperlink{structStreamBufferDef__t_a85b1cf05c0222f8d67a64f7d01722e52}{xTaskWaitingToSend} == \hyperlink{group__BSPDefine_ga070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL} )
417             \{
418                 \hyperlink{stream__buffer_8c_a7f655ff13acb1a5614dbc7e7f43ecbb2}{prvInitialiseNewStreamBuffer}( pxStreamBuffer,
419                                               pxStreamBuffer->\hyperlink{structStreamBufferDef__t_a4e05054a8a3d61a5cec0c18a70bbdb67}{pucBuffer},
420                                               pxStreamBuffer->\hyperlink{structStreamBufferDef__t_a6eedf41c877edd42b3b460780d1b6555}{xLength},
421                                               pxStreamBuffer->\hyperlink{structStreamBufferDef__t_a4a7ee9b374cc0b358d049811def8d595}{xTriggerLevelBytes},
422                                               pxStreamBuffer->\hyperlink{structStreamBufferDef__t_a1afd02d997a1cb3149e3cf203c681d58}{ucFlags} );
423                 xReturn = \hyperlink{projdefs_8h_a07848d3078849bd32353c69d30a479b3}{pdPASS};
424 
425 \textcolor{preprocessor}{                #if( configUSE\_TRACE\_FACILITY == 1 )}
426                 \{
427                     pxStreamBuffer->uxStreamBufferNumber = uxStreamBufferNumber;
428                 \}
429 \textcolor{preprocessor}{                #endif}
430 
431                 \hyperlink{FreeRTOS_8h_a2ef92acbaa66efdb85be7f8256fe91ba}{traceSTREAM\_BUFFER\_RESET}( xStreamBuffer );
432             \}
433         \}
434     \}
435     \hyperlink{task_8h_aac8f36abc45ac4ee714bd6b81e3b1643}{taskEXIT\_CRITICAL}();
436 
437     \textcolor{keywordflow}{return} xReturn;
438 \}
\end{DoxyCode}
\mbox{\Hypertarget{stream__buffer_8h_a35cdf3b6bf677086b9128782f762499d}\label{stream__buffer_8h_a35cdf3b6bf677086b9128782f762499d}} 
\index{stream\+\_\+buffer.\+h@{stream\+\_\+buffer.\+h}!x\+Stream\+Buffer\+Send@{x\+Stream\+Buffer\+Send}}
\index{x\+Stream\+Buffer\+Send@{x\+Stream\+Buffer\+Send}!stream\+\_\+buffer.\+h@{stream\+\_\+buffer.\+h}}
\subsubsection{\texorpdfstring{x\+Stream\+Buffer\+Send()}{xStreamBufferSend()}}
{\footnotesize\ttfamily size\+\_\+t x\+Stream\+Buffer\+Send (\begin{DoxyParamCaption}\item[{\hyperlink{stream__buffer_8h_a8b80974e2278f073412293e6580ce56f}{Stream\+Buffer\+Handle\+\_\+t}}]{x\+Stream\+Buffer,  }\item[{const void $\ast$}]{pv\+Tx\+Data,  }\item[{size\+\_\+t}]{x\+Data\+Length\+Bytes,  }\item[{\hyperlink{pic32mx_2portmacro_8h_aa69c48c6e902ce54f70886e6573c92a9}{Tick\+Type\+\_\+t}}]{x\+Ticks\+To\+Wait }\end{DoxyParamCaption})}



Definition at line 506 of file stream\+\_\+buffer.\+c.


\begin{DoxyCode}
510 \{
511 \hyperlink{structStreamBufferDef__t}{StreamBuffer\_t} * \textcolor{keyword}{const} pxStreamBuffer = xStreamBuffer;
512 \textcolor{keywordtype}{size\_t} xReturn, xSpace = 0;
513 \textcolor{keywordtype}{size\_t} xRequiredSpace = xDataLengthBytes;
514 \hyperlink{structxTIME__OUT}{TimeOut\_t} xTimeOut;
515 
516     \hyperlink{FreeRTOS_8h_a228c70cd48927d6ab730ed1a6dfbe35f}{configASSERT}( pvTxData );
517     \hyperlink{FreeRTOS_8h_a228c70cd48927d6ab730ed1a6dfbe35f}{configASSERT}( pxStreamBuffer );
518 
519     \textcolor{comment}{/* This send function is used to write to both message buffers and stream}
520 \textcolor{comment}{    buffers.  If this is a message buffer then the space needed must be}
521 \textcolor{comment}{    increased by the amount of bytes needed to store the length of the}
522 \textcolor{comment}{    message. */}
523     \textcolor{keywordflow}{if}( ( pxStreamBuffer->\hyperlink{structStreamBufferDef__t_a1afd02d997a1cb3149e3cf203c681d58}{ucFlags} & \hyperlink{stream__buffer_8c_a4954c04e3f9f6b0d4a98b9441b35d896}{sbFLAGS\_IS\_MESSAGE\_BUFFER} ) != ( 
      \hyperlink{stdint_8h_aba7bc1797add20fe3efdf37ced1182c5}{uint8\_t} ) 0 )
524     \{
525         xRequiredSpace += \hyperlink{stream__buffer_8c_aaa21967227eb06d02cdd038047b836f6}{sbBYTES\_TO\_STORE\_MESSAGE\_LENGTH};
526 
527         \textcolor{comment}{/* Overflow? */}
528         \hyperlink{FreeRTOS_8h_a228c70cd48927d6ab730ed1a6dfbe35f}{configASSERT}( xRequiredSpace > xDataLengthBytes );
529     \}
530     \textcolor{keywordflow}{else}
531     \{
532         \hyperlink{FreeRTOS_8h_ac77e2af1a6b0d38fbab36cf2aa96f1a8}{mtCOVERAGE\_TEST\_MARKER}();
533     \}
534 
535     \textcolor{keywordflow}{if}( xTicksToWait != ( \hyperlink{pic32mx_2portmacro_8h_aa69c48c6e902ce54f70886e6573c92a9}{TickType\_t} ) 0 )
536     \{
537         \hyperlink{task_8h_a67155ad4ea2482b5f4597a69f2152be0}{vTaskSetTimeOutState}( &xTimeOut );
538 
539         \textcolor{keywordflow}{do}
540         \{
541             \textcolor{comment}{/* Wait until the required number of bytes are free in the message}
542 \textcolor{comment}{            buffer. */}
543             \hyperlink{task_8h_ab7bf0ae866292ba8296091a9d5209689}{taskENTER\_CRITICAL}();
544             \{
545                 xSpace = \hyperlink{stream__buffer_8c_a8fb90892c74eb94fb063b2a018a10509}{xStreamBufferSpacesAvailable}( pxStreamBuffer );
546 
547                 \textcolor{keywordflow}{if}( xSpace < xRequiredSpace )
548                 \{
549                     \textcolor{comment}{/* Clear notification state as going to wait for space. */}
550                     ( void ) \hyperlink{task_8h_a4cb6c908a9d2d733e9d519d7dc27bb34}{xTaskNotifyStateClear}( \hyperlink{group__BSPDefine_ga070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL} );
551 
552                     \textcolor{comment}{/* Should only be one writer. */}
553                     \hyperlink{FreeRTOS_8h_a228c70cd48927d6ab730ed1a6dfbe35f}{configASSERT}( pxStreamBuffer->\hyperlink{structStreamBufferDef__t_a85b1cf05c0222f8d67a64f7d01722e52}{xTaskWaitingToSend} == 
      \hyperlink{group__BSPDefine_ga070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL} );
554                     pxStreamBuffer->\hyperlink{structStreamBufferDef__t_a85b1cf05c0222f8d67a64f7d01722e52}{xTaskWaitingToSend} = 
      \hyperlink{task_8h_a85a0f9c9f817b18686efbf8f37c72dfc}{xTaskGetCurrentTaskHandle}();
555                 \}
556                 \textcolor{keywordflow}{else}
557                 \{
558                     \hyperlink{task_8h_aac8f36abc45ac4ee714bd6b81e3b1643}{taskEXIT\_CRITICAL}();
559                     \textcolor{keywordflow}{break};
560                 \}
561             \}
562             \hyperlink{task_8h_aac8f36abc45ac4ee714bd6b81e3b1643}{taskEXIT\_CRITICAL}();
563 
564             \hyperlink{FreeRTOS_8h_a5788bf0db92eda90675aa5f3caa42eeb}{traceBLOCKING\_ON\_STREAM\_BUFFER\_SEND}( xStreamBuffer );
565             ( void ) \hyperlink{task_8h_a0475fcda9718f403521c270a7270ff93}{xTaskNotifyWait}( ( \hyperlink{stdint_8h_a435d1572bf3f880d55459d9805097f62}{uint32\_t} ) 0, ( 
      \hyperlink{stdint_8h_a435d1572bf3f880d55459d9805097f62}{uint32\_t} ) 0, \hyperlink{group__BSPDefine_ga070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL}, xTicksToWait );
566             pxStreamBuffer->\hyperlink{structStreamBufferDef__t_a85b1cf05c0222f8d67a64f7d01722e52}{xTaskWaitingToSend} = \hyperlink{group__BSPDefine_ga070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL};
567 
568         \} \textcolor{keywordflow}{while}( \hyperlink{task_8h_a3b018a85d339e536a6c05748dd666a3a}{xTaskCheckForTimeOut}( &xTimeOut, &xTicksToWait ) == 
      \hyperlink{projdefs_8h_aa56260e937e7e203026707e5ba944273}{pdFALSE} );
569     \}
570     \textcolor{keywordflow}{else}
571     \{
572         \hyperlink{FreeRTOS_8h_ac77e2af1a6b0d38fbab36cf2aa96f1a8}{mtCOVERAGE\_TEST\_MARKER}();
573     \}
574 
575     \textcolor{keywordflow}{if}( xSpace == ( \textcolor{keywordtype}{size\_t} ) 0 )
576     \{
577         xSpace = \hyperlink{stream__buffer_8c_a8fb90892c74eb94fb063b2a018a10509}{xStreamBufferSpacesAvailable}( pxStreamBuffer );
578     \}
579     \textcolor{keywordflow}{else}
580     \{
581         \hyperlink{FreeRTOS_8h_ac77e2af1a6b0d38fbab36cf2aa96f1a8}{mtCOVERAGE\_TEST\_MARKER}();
582     \}
583 
584     xReturn = \hyperlink{stream__buffer_8c_a1415b7e265e106aab476023f9a6cce6c}{prvWriteMessageToBuffer}( pxStreamBuffer, pvTxData, xDataLengthBytes, 
      xSpace, xRequiredSpace );
585 
586     \textcolor{keywordflow}{if}( xReturn > ( \textcolor{keywordtype}{size\_t} ) 0 )
587     \{
588         \hyperlink{FreeRTOS_8h_a4f4fc6954ae7c5b8a4819f70afd37c1f}{traceSTREAM\_BUFFER\_SEND}( xStreamBuffer, xReturn );
589 
590         \textcolor{comment}{/* Was a task waiting for the data? */}
591         \textcolor{keywordflow}{if}( \hyperlink{stream__buffer_8c_ac4183c0af266bc5ffbd4f3eb4a4d07c2}{prvBytesInBuffer}( pxStreamBuffer ) >= pxStreamBuffer->
      \hyperlink{structStreamBufferDef__t_a4a7ee9b374cc0b358d049811def8d595}{xTriggerLevelBytes} )
592         \{
593             \hyperlink{stream__buffer_8c_aa75273dfbcd92710254df0165ae1da5d}{sbSEND\_COMPLETED}( pxStreamBuffer );
594         \}
595         \textcolor{keywordflow}{else}
596         \{
597             \hyperlink{FreeRTOS_8h_ac77e2af1a6b0d38fbab36cf2aa96f1a8}{mtCOVERAGE\_TEST\_MARKER}();
598         \}
599     \}
600     \textcolor{keywordflow}{else}
601     \{
602         \hyperlink{FreeRTOS_8h_ac77e2af1a6b0d38fbab36cf2aa96f1a8}{mtCOVERAGE\_TEST\_MARKER}();
603         \hyperlink{FreeRTOS_8h_a527e8f19c9b9b339985c2b8e47bff02a}{traceSTREAM\_BUFFER\_SEND\_FAILED}( xStreamBuffer );
604     \}
605 
606     \textcolor{keywordflow}{return} xReturn;
607 \}
\end{DoxyCode}
\mbox{\Hypertarget{stream__buffer_8h_abc37189e4eb8618f5434ae333dd50b23}\label{stream__buffer_8h_abc37189e4eb8618f5434ae333dd50b23}} 
\index{stream\+\_\+buffer.\+h@{stream\+\_\+buffer.\+h}!x\+Stream\+Buffer\+Send\+Completed\+From\+I\+SR@{x\+Stream\+Buffer\+Send\+Completed\+From\+I\+SR}}
\index{x\+Stream\+Buffer\+Send\+Completed\+From\+I\+SR@{x\+Stream\+Buffer\+Send\+Completed\+From\+I\+SR}!stream\+\_\+buffer.\+h@{stream\+\_\+buffer.\+h}}
\subsubsection{\texorpdfstring{x\+Stream\+Buffer\+Send\+Completed\+From\+I\+S\+R()}{xStreamBufferSendCompletedFromISR()}}
{\footnotesize\ttfamily \hyperlink{pic32mx_2portmacro_8h_a46fb21e00ae0729d7515c0fbf2269796}{Base\+Type\+\_\+t} x\+Stream\+Buffer\+Send\+Completed\+From\+I\+SR (\begin{DoxyParamCaption}\item[{\hyperlink{stream__buffer_8h_a8b80974e2278f073412293e6580ce56f}{Stream\+Buffer\+Handle\+\_\+t}}]{x\+Stream\+Buffer,  }\item[{\hyperlink{pic32mx_2portmacro_8h_a46fb21e00ae0729d7515c0fbf2269796}{Base\+Type\+\_\+t} $\ast$}]{px\+Higher\+Priority\+Task\+Woken }\end{DoxyParamCaption})}



Definition at line 1028 of file stream\+\_\+buffer.\+c.


\begin{DoxyCode}
1029 \{
1030 \hyperlink{structStreamBufferDef__t}{StreamBuffer\_t} * \textcolor{keyword}{const} pxStreamBuffer = xStreamBuffer;
1031 \hyperlink{pic32mx_2portmacro_8h_a46fb21e00ae0729d7515c0fbf2269796}{BaseType\_t} xReturn;
1032 \hyperlink{pic32mx_2portmacro_8h_a646f89d4298e4f5afd522202b11cb2e6}{UBaseType\_t} uxSavedInterruptStatus;
1033 
1034     \hyperlink{FreeRTOS_8h_a228c70cd48927d6ab730ed1a6dfbe35f}{configASSERT}( pxStreamBuffer );
1035 
1036     uxSavedInterruptStatus = ( \hyperlink{pic32mx_2portmacro_8h_a646f89d4298e4f5afd522202b11cb2e6}{UBaseType\_t} ) 
      \hyperlink{FreeRTOS_8h_a31b4260dbc1823ba80b578f86eb15a98}{portSET\_INTERRUPT\_MASK\_FROM\_ISR}();
1037     \{
1038         \textcolor{keywordflow}{if}( ( pxStreamBuffer )->xTaskWaitingToReceive != \hyperlink{group__BSPDefine_ga070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL} )
1039         \{
1040             ( void ) \hyperlink{task_8h_a1ed9129068b96a909356bd0369c5ecb0}{xTaskNotifyFromISR}( ( pxStreamBuffer )->xTaskWaitingToReceive,
1041                                          ( \hyperlink{stdint_8h_a435d1572bf3f880d55459d9805097f62}{uint32\_t} ) 0,
1042                                          \hyperlink{task_8h_ae8abc4f7da5b6880467daafbf19cd233abac2b17ab15444724b6f35d47cd0a64a}{eNoAction},
1043                                          pxHigherPriorityTaskWoken );
1044             ( pxStreamBuffer )->xTaskWaitingToReceive = \hyperlink{group__BSPDefine_ga070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL};
1045             xReturn = \hyperlink{projdefs_8h_af268cf937960eb029256bd9c4d949fbe}{pdTRUE};
1046         \}
1047         \textcolor{keywordflow}{else}
1048         \{
1049             xReturn = \hyperlink{projdefs_8h_aa56260e937e7e203026707e5ba944273}{pdFALSE};
1050         \}
1051     \}
1052     \hyperlink{FreeRTOS_8h_a2661e2c5a4e4afe5bef2ebe9872e28b3}{portCLEAR\_INTERRUPT\_MASK\_FROM\_ISR}( uxSavedInterruptStatus );
1053 
1054     \textcolor{keywordflow}{return} xReturn;
1055 \}
\end{DoxyCode}
\mbox{\Hypertarget{stream__buffer_8h_a1dab226e99230e01e79bc2b5c0605e44}\label{stream__buffer_8h_a1dab226e99230e01e79bc2b5c0605e44}} 
\index{stream\+\_\+buffer.\+h@{stream\+\_\+buffer.\+h}!x\+Stream\+Buffer\+Send\+From\+I\+SR@{x\+Stream\+Buffer\+Send\+From\+I\+SR}}
\index{x\+Stream\+Buffer\+Send\+From\+I\+SR@{x\+Stream\+Buffer\+Send\+From\+I\+SR}!stream\+\_\+buffer.\+h@{stream\+\_\+buffer.\+h}}
\subsubsection{\texorpdfstring{x\+Stream\+Buffer\+Send\+From\+I\+S\+R()}{xStreamBufferSendFromISR()}}
{\footnotesize\ttfamily size\+\_\+t x\+Stream\+Buffer\+Send\+From\+I\+SR (\begin{DoxyParamCaption}\item[{\hyperlink{stream__buffer_8h_a8b80974e2278f073412293e6580ce56f}{Stream\+Buffer\+Handle\+\_\+t}}]{x\+Stream\+Buffer,  }\item[{const void $\ast$}]{pv\+Tx\+Data,  }\item[{size\+\_\+t}]{x\+Data\+Length\+Bytes,  }\item[{\hyperlink{pic32mx_2portmacro_8h_a46fb21e00ae0729d7515c0fbf2269796}{Base\+Type\+\_\+t} $\ast$const}]{px\+Higher\+Priority\+Task\+Woken }\end{DoxyParamCaption})}



Definition at line 610 of file stream\+\_\+buffer.\+c.


\begin{DoxyCode}
614 \{
615 \hyperlink{structStreamBufferDef__t}{StreamBuffer\_t} * \textcolor{keyword}{const} pxStreamBuffer = xStreamBuffer;
616 \textcolor{keywordtype}{size\_t} xReturn, xSpace;
617 \textcolor{keywordtype}{size\_t} xRequiredSpace = xDataLengthBytes;
618 
619     \hyperlink{FreeRTOS_8h_a228c70cd48927d6ab730ed1a6dfbe35f}{configASSERT}( pvTxData );
620     \hyperlink{FreeRTOS_8h_a228c70cd48927d6ab730ed1a6dfbe35f}{configASSERT}( pxStreamBuffer );
621 
622     \textcolor{comment}{/* This send function is used to write to both message buffers and stream}
623 \textcolor{comment}{    buffers.  If this is a message buffer then the space needed must be}
624 \textcolor{comment}{    increased by the amount of bytes needed to store the length of the}
625 \textcolor{comment}{    message. */}
626     \textcolor{keywordflow}{if}( ( pxStreamBuffer->\hyperlink{structStreamBufferDef__t_a1afd02d997a1cb3149e3cf203c681d58}{ucFlags} & \hyperlink{stream__buffer_8c_a4954c04e3f9f6b0d4a98b9441b35d896}{sbFLAGS\_IS\_MESSAGE\_BUFFER} ) != ( 
      \hyperlink{stdint_8h_aba7bc1797add20fe3efdf37ced1182c5}{uint8\_t} ) 0 )
627     \{
628         xRequiredSpace += \hyperlink{stream__buffer_8c_aaa21967227eb06d02cdd038047b836f6}{sbBYTES\_TO\_STORE\_MESSAGE\_LENGTH};
629     \}
630     \textcolor{keywordflow}{else}
631     \{
632         \hyperlink{FreeRTOS_8h_ac77e2af1a6b0d38fbab36cf2aa96f1a8}{mtCOVERAGE\_TEST\_MARKER}();
633     \}
634 
635     xSpace = \hyperlink{stream__buffer_8c_a8fb90892c74eb94fb063b2a018a10509}{xStreamBufferSpacesAvailable}( pxStreamBuffer );
636     xReturn = \hyperlink{stream__buffer_8c_a1415b7e265e106aab476023f9a6cce6c}{prvWriteMessageToBuffer}( pxStreamBuffer, pvTxData, xDataLengthBytes, 
      xSpace, xRequiredSpace );
637 
638     \textcolor{keywordflow}{if}( xReturn > ( \textcolor{keywordtype}{size\_t} ) 0 )
639     \{
640         \textcolor{comment}{/* Was a task waiting for the data? */}
641         \textcolor{keywordflow}{if}( \hyperlink{stream__buffer_8c_ac4183c0af266bc5ffbd4f3eb4a4d07c2}{prvBytesInBuffer}( pxStreamBuffer ) >= pxStreamBuffer->
      \hyperlink{structStreamBufferDef__t_a4a7ee9b374cc0b358d049811def8d595}{xTriggerLevelBytes} )
642         \{
643             \hyperlink{stream__buffer_8c_aadd3cf567c5086402552c463c55dda7c}{sbSEND\_COMPLETE\_FROM\_ISR}( pxStreamBuffer, pxHigherPriorityTaskWoken );
644         \}
645         \textcolor{keywordflow}{else}
646         \{
647             \hyperlink{FreeRTOS_8h_ac77e2af1a6b0d38fbab36cf2aa96f1a8}{mtCOVERAGE\_TEST\_MARKER}();
648         \}
649     \}
650     \textcolor{keywordflow}{else}
651     \{
652         \hyperlink{FreeRTOS_8h_ac77e2af1a6b0d38fbab36cf2aa96f1a8}{mtCOVERAGE\_TEST\_MARKER}();
653     \}
654 
655     \hyperlink{FreeRTOS_8h_ab79a8d87f1c865b1a76af02932b3dda6}{traceSTREAM\_BUFFER\_SEND\_FROM\_ISR}( xStreamBuffer, xReturn );
656 
657     \textcolor{keywordflow}{return} xReturn;
658 \}
\end{DoxyCode}
\mbox{\Hypertarget{stream__buffer_8h_a28f0280587c76e71efeaa8f415ebde04}\label{stream__buffer_8h_a28f0280587c76e71efeaa8f415ebde04}} 
\index{stream\+\_\+buffer.\+h@{stream\+\_\+buffer.\+h}!x\+Stream\+Buffer\+Set\+Trigger\+Level@{x\+Stream\+Buffer\+Set\+Trigger\+Level}}
\index{x\+Stream\+Buffer\+Set\+Trigger\+Level@{x\+Stream\+Buffer\+Set\+Trigger\+Level}!stream\+\_\+buffer.\+h@{stream\+\_\+buffer.\+h}}
\subsubsection{\texorpdfstring{x\+Stream\+Buffer\+Set\+Trigger\+Level()}{xStreamBufferSetTriggerLevel()}}
{\footnotesize\ttfamily \hyperlink{pic32mx_2portmacro_8h_a46fb21e00ae0729d7515c0fbf2269796}{Base\+Type\+\_\+t} x\+Stream\+Buffer\+Set\+Trigger\+Level (\begin{DoxyParamCaption}\item[{\hyperlink{stream__buffer_8h_a8b80974e2278f073412293e6580ce56f}{Stream\+Buffer\+Handle\+\_\+t}}]{x\+Stream\+Buffer,  }\item[{size\+\_\+t}]{x\+Trigger\+Level }\end{DoxyParamCaption})}



Definition at line 441 of file stream\+\_\+buffer.\+c.


\begin{DoxyCode}
442 \{
443 \hyperlink{structStreamBufferDef__t}{StreamBuffer\_t} * \textcolor{keyword}{const} pxStreamBuffer = xStreamBuffer;
444 \hyperlink{pic32mx_2portmacro_8h_a46fb21e00ae0729d7515c0fbf2269796}{BaseType\_t} xReturn;
445 
446     \hyperlink{FreeRTOS_8h_a228c70cd48927d6ab730ed1a6dfbe35f}{configASSERT}( pxStreamBuffer );
447 
448     \textcolor{comment}{/* It is not valid for the trigger level to be 0. */}
449     \textcolor{keywordflow}{if}( xTriggerLevel == ( \textcolor{keywordtype}{size\_t} ) 0 )
450     \{
451         xTriggerLevel = ( size\_t ) 1;
452     \}
453 
454     \textcolor{comment}{/* The trigger level is the number of bytes that must be in the stream}
455 \textcolor{comment}{    buffer before a task that is waiting for data is unblocked. */}
456     \textcolor{keywordflow}{if}( xTriggerLevel <= pxStreamBuffer->xLength )
457     \{
458         pxStreamBuffer->\hyperlink{structStreamBufferDef__t_a4a7ee9b374cc0b358d049811def8d595}{xTriggerLevelBytes} = xTriggerLevel;
459         xReturn = \hyperlink{projdefs_8h_a07848d3078849bd32353c69d30a479b3}{pdPASS};
460     \}
461     \textcolor{keywordflow}{else}
462     \{
463         xReturn = \hyperlink{projdefs_8h_aa56260e937e7e203026707e5ba944273}{pdFALSE};
464     \}
465 
466     \textcolor{keywordflow}{return} xReturn;
467 \}
\end{DoxyCode}
\mbox{\Hypertarget{stream__buffer_8h_a9a78e0206cb1dc343c329f9db579208d}\label{stream__buffer_8h_a9a78e0206cb1dc343c329f9db579208d}} 
\index{stream\+\_\+buffer.\+h@{stream\+\_\+buffer.\+h}!x\+Stream\+Buffer\+Spaces\+Available@{x\+Stream\+Buffer\+Spaces\+Available}}
\index{x\+Stream\+Buffer\+Spaces\+Available@{x\+Stream\+Buffer\+Spaces\+Available}!stream\+\_\+buffer.\+h@{stream\+\_\+buffer.\+h}}
\subsubsection{\texorpdfstring{x\+Stream\+Buffer\+Spaces\+Available()}{xStreamBufferSpacesAvailable()}}
{\footnotesize\ttfamily size\+\_\+t x\+Stream\+Buffer\+Spaces\+Available (\begin{DoxyParamCaption}\item[{\hyperlink{stream__buffer_8h_a8b80974e2278f073412293e6580ce56f}{Stream\+Buffer\+Handle\+\_\+t}}]{x\+Stream\+Buffer }\end{DoxyParamCaption})}



Definition at line 470 of file stream\+\_\+buffer.\+c.


\begin{DoxyCode}
471 \{
472 \textcolor{keyword}{const} \hyperlink{structStreamBufferDef__t}{StreamBuffer\_t} * \textcolor{keyword}{const} pxStreamBuffer = xStreamBuffer;
473 \textcolor{keywordtype}{size\_t} xSpace;
474 
475     \hyperlink{FreeRTOS_8h_a228c70cd48927d6ab730ed1a6dfbe35f}{configASSERT}( pxStreamBuffer );
476 
477     xSpace = pxStreamBuffer->\hyperlink{structStreamBufferDef__t_a6eedf41c877edd42b3b460780d1b6555}{xLength} + pxStreamBuffer->\hyperlink{structStreamBufferDef__t_a937e441ed6c946a099d52b5955d7302c}{xTail};
478     xSpace -= pxStreamBuffer->\hyperlink{structStreamBufferDef__t_a75aafb9fdee8f0666837302bd9b12341}{xHead};
479     xSpace -= ( size\_t ) 1;
480 
481     \textcolor{keywordflow}{if}( xSpace >= pxStreamBuffer->\hyperlink{structStreamBufferDef__t_a6eedf41c877edd42b3b460780d1b6555}{xLength} )
482     \{
483         xSpace -= pxStreamBuffer->\hyperlink{structStreamBufferDef__t_a6eedf41c877edd42b3b460780d1b6555}{xLength};
484     \}
485     \textcolor{keywordflow}{else}
486     \{
487         \hyperlink{FreeRTOS_8h_ac77e2af1a6b0d38fbab36cf2aa96f1a8}{mtCOVERAGE\_TEST\_MARKER}();
488     \}
489 
490     \textcolor{keywordflow}{return} xSpace;
491 \}
\end{DoxyCode}
