\hypertarget{group__WifiReqScanResult}{}\section{m2m\+\_\+wifi\+\_\+req\+\_\+scan\+\_\+result}
\label{group__WifiReqScanResult}\index{m2m\+\_\+wifi\+\_\+req\+\_\+scan\+\_\+result@{m2m\+\_\+wifi\+\_\+req\+\_\+scan\+\_\+result}}
\subsection*{Functions}
\begin{DoxyCompactItemize}
\item 
\hyperlink{group__BSPDefine_gaecc0323d771e41ef81a76b5f12783e22}{N\+M\+I\+\_\+\+A\+PI} \hyperlink{group__DataT_gae35f10ffd0ac8dd2bc3e794da9bdfbc7}{sint8} \hyperlink{group__WifiReqScanResult_ga2585ee08ee8ecac67155ec99dd4d0863}{m2m\+\_\+wifi\+\_\+req\+\_\+scan\+\_\+result} (\hyperlink{group__DataT_ga4df709a77647e870bbf1d955b8edc9a6}{uint8} index)
\begin{DoxyCompactList}\small\item\em Reads the AP information from the Scan Result list with the given index, the response received in wifi\+\_\+cb M2\+M\+\_\+\+W\+I\+F\+I\+\_\+\+R\+E\+S\+P\+\_\+\+S\+C\+A\+N\+\_\+\+R\+E\+S\+U\+LT, the response pointer should be casted with \hyperlink{structtstrM2mWifiscanResult}{tstr\+M2m\+Wifiscan\+Result} structure. \end{DoxyCompactList}\end{DoxyCompactItemize}


\subsection{Detailed Description}
Synchronous call to read the AP information from the S\+C\+AN Result list with the given index. This function is expected to be called when the response events M2\+M\+\_\+\+W\+I\+F\+I\+\_\+\+R\+E\+S\+P\+\_\+\+S\+C\+A\+N\+\_\+\+R\+E\+S\+U\+LT or M2\+M\+\_\+\+W\+I\+F\+I\+\_\+\+R\+E\+S\+P\+\_\+\+S\+C\+A\+N\+\_\+\+D\+O\+NE are received in the wi-\/fi callback function. The response information received can be obtained through the casting to the \hyperlink{structtstrM2mWifiscanResult}{tstr\+M2m\+Wifiscan\+Result} structure 

\subsection{Function Documentation}
\mbox{\Hypertarget{group__WifiReqScanResult_ga2585ee08ee8ecac67155ec99dd4d0863}\label{group__WifiReqScanResult_ga2585ee08ee8ecac67155ec99dd4d0863}} 
\index{m2m\+\_\+wifi\+\_\+req\+\_\+scan\+\_\+result@{m2m\+\_\+wifi\+\_\+req\+\_\+scan\+\_\+result}!m2m\+\_\+wifi\+\_\+req\+\_\+scan\+\_\+result@{m2m\+\_\+wifi\+\_\+req\+\_\+scan\+\_\+result}}
\index{m2m\+\_\+wifi\+\_\+req\+\_\+scan\+\_\+result@{m2m\+\_\+wifi\+\_\+req\+\_\+scan\+\_\+result}!m2m\+\_\+wifi\+\_\+req\+\_\+scan\+\_\+result@{m2m\+\_\+wifi\+\_\+req\+\_\+scan\+\_\+result}}
\subsubsection{\texorpdfstring{m2m\+\_\+wifi\+\_\+req\+\_\+scan\+\_\+result()}{m2m\_wifi\_req\_scan\_result()}}
{\footnotesize\ttfamily \hyperlink{group__BSPDefine_gaecc0323d771e41ef81a76b5f12783e22}{N\+M\+I\+\_\+\+A\+PI} \hyperlink{group__DataT_gae35f10ffd0ac8dd2bc3e794da9bdfbc7}{sint8} m2m\+\_\+wifi\+\_\+req\+\_\+scan\+\_\+result (\begin{DoxyParamCaption}\item[{\hyperlink{group__DataT_ga4df709a77647e870bbf1d955b8edc9a6}{uint8}}]{index }\end{DoxyParamCaption})}



{\ttfamily \#include $<$\hyperlink{m2m__wifi_8h}{third\+\_\+party/atmel/devices/wilc1000/driver/include/m2m\+\_\+wifi.\+h}$>$}



Reads the AP information from the Scan Result list with the given index, the response received in wifi\+\_\+cb M2\+M\+\_\+\+W\+I\+F\+I\+\_\+\+R\+E\+S\+P\+\_\+\+S\+C\+A\+N\+\_\+\+R\+E\+S\+U\+LT, the response pointer should be casted with \hyperlink{structtstrM2mWifiscanResult}{tstr\+M2m\+Wifiscan\+Result} structure. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em index} & Index for the requested result, the index range start from 0 till number of AP\textquotesingle{}s found\\
\hline
\end{DoxyParams}
\begin{DoxySeeAlso}{See also}
\hyperlink{structtstrM2mWifiscanResult}{tstr\+M2m\+Wifiscan\+Result} \hyperlink{group__WifiGetNumAPFoundFn_gac92223273822358f4aee6e133b11815d}{m2m\+\_\+wifi\+\_\+get\+\_\+num\+\_\+ap\+\_\+found} \hyperlink{group__WifiRequestScanFn_ga499dfa24a19c2e84776aeabedf897135}{m2m\+\_\+wifi\+\_\+request\+\_\+scan}
\end{DoxySeeAlso}
\begin{DoxyPrecond}{Precondition}
\hyperlink{group__WifiRequestScanFn_ga499dfa24a19c2e84776aeabedf897135}{m2m\+\_\+wifi\+\_\+request\+\_\+scan} needs to be called first, then m2m\+\_\+wifi\+\_\+get\+\_\+num\+\_\+ap\+\_\+found to get the number of AP\textquotesingle{}s found
\begin{DoxyItemize}
\item A Wi-\/\+Fi notification callback of type \hyperlink{group__WlanEnums_gac5302f32839285fe8375c159087aa8a1}{tpf\+App\+Wifi\+Cb} M\+U\+ST be implemented and registered at startup. Registering the callback is done through passing it to the \hyperlink{group__WifiInitFn_ga73c734812e844d96d860c4e93e9daf35}{m2m\+\_\+wifi\+\_\+init} function.
\item The event \hyperlink{group__WlanEnums_gga064de09dec1d5e88ed8d075fa40f57deadfb48e88c3a8e5f9dac634d62d3f53e5}{M2\+M\+\_\+\+W\+I\+F\+I\+\_\+\+R\+E\+S\+P\+\_\+\+S\+C\+A\+N\+\_\+\+R\+E\+S\+U\+LT} must be handled in the callback to receive the requested connection information. 
\end{DoxyItemize}
\end{DoxyPrecond}
\begin{DoxyWarning}{Warning}
Tthe scan results are updated only if the scan request is called. Calling this function only without a scan request will lead to firmware errors. Refrain from introducing a large delay between the scan request and the scan result request.
\end{DoxyWarning}
\begin{DoxyReturn}{Returns}
The function returns \hyperlink{nm__common_8h_a9ef27ba27aafdd1aa3a79d3ba2c36b8f}{M2\+M\+\_\+\+S\+U\+C\+C\+E\+SS} for successful operations and a negative value otherwise. 
\end{DoxyReturn}
\hypertarget{group__WifiEnableMonitorModeFn_Example}{}\subsection{Example}\label{group__WifiEnableMonitorModeFn_Example}
The code snippet demonstrates an example of how the scan request is called from the application\textquotesingle{}s main function and the handling of the events received in response. 
\begin{DoxyCode}
\textcolor{preprocessor}{#include "\hyperlink{m2m__wifi_8h}{m2m\_wifi.h}"}
\textcolor{preprocessor}{#include "\hyperlink{m2m__types_8h}{m2m\_types.h}"}

\textcolor{keywordtype}{void} wifi\_event\_cb(\hyperlink{group__DataT_ga4df709a77647e870bbf1d955b8edc9a6}{uint8} u8WiFiEvent, \textcolor{keywordtype}{void} * pvMsg)
\{
    \textcolor{keyword}{static} \hyperlink{group__DataT_ga4df709a77647e870bbf1d955b8edc9a6}{uint8}    u8ScanResultIdx = 0;
    
    \textcolor{keywordflow}{switch}(u8WiFiEvent)
    \{
    \textcolor{keywordflow}{case} \hyperlink{group__WlanEnums_gga064de09dec1d5e88ed8d075fa40f57dead835febbe18b7e3cc6ce4693951354fe}{M2M\_WIFI\_RESP\_SCAN\_DONE}:
        \{
            \hyperlink{structtstrM2mScanDone}{tstrM2mScanDone} *pstrInfo = (\hyperlink{structtstrM2mScanDone}{tstrM2mScanDone}*)pvMsg;
            
            printf(\textcolor{stringliteral}{"Num of AP found %d\(\backslash\)r\(\backslash\)n"},pstrInfo->\hyperlink{structtstrM2mScanDone_a1303b806dd93bfdd4b4a51ad750b023b}{u8NumofCh});
            \textcolor{keywordflow}{if}(pstrInfo->\hyperlink{structtstrM2mScanDone_adf06f5d0db8d0fb98e7674672ee8439d}{s8ScanState} == \hyperlink{nm__common_8h_a9ef27ba27aafdd1aa3a79d3ba2c36b8f}{M2M\_SUCCESS})
            \{
                u8ScanResultIdx = 0;
                \textcolor{keywordflow}{if}(pstrInfo->\hyperlink{structtstrM2mScanDone_a1303b806dd93bfdd4b4a51ad750b023b}{u8NumofCh} >= 1)
                \{
                    \hyperlink{group__WifiReqScanResult_ga2585ee08ee8ecac67155ec99dd4d0863}{m2m\_wifi\_req\_scan\_result}(u8ScanResultIdx);
                    u8ScanResultIdx ++;
                \}
                \textcolor{keywordflow}{else}
                \{
                    printf(\textcolor{stringliteral}{"No AP Found Rescan\(\backslash\)r\(\backslash\)n"});
                    \hyperlink{group__WifiRequestScanFn_ga499dfa24a19c2e84776aeabedf897135}{m2m\_wifi\_request\_scan}(\hyperlink{group__WlanEnums_gga2a91dd671e2672dba1a7ed45230f3a99a9ab262cc4f83b59a0710ffb80134c637}{M2M\_WIFI\_CH\_ALL});
                \}
            \}
            \textcolor{keywordflow}{else}
            \{
                printf(\textcolor{stringliteral}{"(ERR) Scan fail with error <%d>\(\backslash\)r\(\backslash\)n"},pstrInfo->
      \hyperlink{structtstrM2mScanDone_adf06f5d0db8d0fb98e7674672ee8439d}{s8ScanState});
            \}
        \}
        \textcolor{keywordflow}{break};
    
    \textcolor{keywordflow}{case} \hyperlink{group__WlanEnums_gga064de09dec1d5e88ed8d075fa40f57deadfb48e88c3a8e5f9dac634d62d3f53e5}{M2M\_WIFI\_RESP\_SCAN\_RESULT}:
        \{
            \hyperlink{structtstrM2mWifiscanResult}{tstrM2mWifiscanResult}       *pstrScanResult =(
      \hyperlink{structtstrM2mWifiscanResult}{tstrM2mWifiscanResult}*)pvMsg;
            \hyperlink{group__DataT_ga4df709a77647e870bbf1d955b8edc9a6}{uint8}                       u8NumFoundAPs = 
      \hyperlink{group__WifiGetNumAPFoundFn_gac92223273822358f4aee6e133b11815d}{m2m\_wifi\_get\_num\_ap\_found}();
            
            printf(\textcolor{stringliteral}{">>%02d RI %d SEC %s CH %02d BSSID %02X:%02X:%02X:%02X:%02X:%02X SSID %s\(\backslash\)r\(\backslash\)n"},
                pstrScanResult->\hyperlink{structtstrM2mWifiscanResult_a70c6b917a7693e2afcc8e912e10f1d96}{u8index},pstrScanResult->\hyperlink{structtstrM2mWifiscanResult_a34d94f696097c6c569b480fe4262a2cc}{s8rssi},
                pstrScanResult->\hyperlink{structtstrM2mWifiscanResult_a0b9dbf6b40e1def154c89c53a7ceb381}{u8AuthType},
                pstrScanResult->\hyperlink{structtstrM2mWifiscanResult_a345089f7fa5a6570886c340c08cfeb2e}{u8ch},
                pstrScanResult->\hyperlink{structtstrM2mWifiscanResult_ae1d4c47f31a39e2423d5c7894022b95c}{au8BSSID}[0], pstrScanResult->\hyperlink{structtstrM2mWifiscanResult_ae1d4c47f31a39e2423d5c7894022b95c}{au8BSSID}[1], pstrScanResult->
      \hyperlink{structtstrM2mWifiscanResult_ae1d4c47f31a39e2423d5c7894022b95c}{au8BSSID}[2],
                pstrScanResult->\hyperlink{structtstrM2mWifiscanResult_ae1d4c47f31a39e2423d5c7894022b95c}{au8BSSID}[3], pstrScanResult->\hyperlink{structtstrM2mWifiscanResult_ae1d4c47f31a39e2423d5c7894022b95c}{au8BSSID}[4], pstrScanResult->
      \hyperlink{structtstrM2mWifiscanResult_ae1d4c47f31a39e2423d5c7894022b95c}{au8BSSID}[5],
                pstrScanResult->\hyperlink{structtstrM2mWifiscanResult_a9636bd1e4481cde0a1523a97a394b185}{au8SSID});
            
            \textcolor{keywordflow}{if}(u8ScanResultIdx < u8NumFoundAPs)
            \{
                \textcolor{comment}{// Read the next scan result}
                \hyperlink{group__WifiReqScanResult_ga2585ee08ee8ecac67155ec99dd4d0863}{m2m\_wifi\_req\_scan\_result}(index);
                u8ScanResultIdx ++;
            \}
        \}
        \textcolor{keywordflow}{break};
    \textcolor{keywordflow}{default}:
        \textcolor{keywordflow}{break};
    \}
\}

\textcolor{keywordtype}{int} \hyperlink{demo_2microchip_2pic32mz__ef__curiosity_2wifi__http__server__demo_2src_2main_8c_ac5a1eca594b063e0d2dbccf86f96f221}{main}()
\{
    \hyperlink{structtstrWifiInitParam}{tstrWifiInitParam}   param;
    
    param.\hyperlink{group__WifiSetCustInfoElementFn_ga13d5fa7a0c71fd59bbf36a61923835cc}{pfAppWifiCb}   = wifi\_event\_cb;
    \textcolor{keywordflow}{if}(!\hyperlink{group__WifiInitFn_ga73c734812e844d96d860c4e93e9daf35}{m2m\_wifi\_init}(&param))
    \{
        \textcolor{comment}{// Scan all channels}
        \hyperlink{group__WifiRequestScanFn_ga499dfa24a19c2e84776aeabedf897135}{m2m\_wifi\_request\_scan}(\hyperlink{group__WlanEnums_gga2a91dd671e2672dba1a7ed45230f3a99a9ab262cc4f83b59a0710ffb80134c637}{M2M\_WIFI\_CH\_ALL});
        
        \textcolor{keywordflow}{while}(1)
        \{
            \hyperlink{group__WifiHandleEventsFn_ga461a4edc057cec8c00cf124a07aa3b02}{m2m\_wifi\_handle\_events}(\hyperlink{group__BSPDefine_ga070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL});
        \}
    \}
\}
\end{DoxyCode}



\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em index} & Index for the requested result, the index range start from 0 till number of AP\textquotesingle{}s found \\
\hline
\end{DoxyParams}
\begin{DoxySeeAlso}{See also}
\hyperlink{structtstrM2mWifiscanResult}{tstr\+M2m\+Wifiscan\+Result},\hyperlink{group__WifiGetNumAPFoundFn_gac92223273822358f4aee6e133b11815d}{m2m\+\_\+wifi\+\_\+get\+\_\+num\+\_\+ap\+\_\+found},\hyperlink{group__WifiRequestScanFn_ga499dfa24a19c2e84776aeabedf897135}{m2m\+\_\+wifi\+\_\+request\+\_\+scan} 
\end{DoxySeeAlso}
\begin{DoxyReturn}{Returns}
The function shall return M2\+M\+\_\+\+S\+U\+C\+C\+E\+SE for success and a negative value otherwise 
\end{DoxyReturn}
\begin{DoxyPrecond}{Precondition}
m2m\+\_\+wifi\+\_\+request\+\_\+scan need to be called first, then m2m\+\_\+wifi\+\_\+get\+\_\+num\+\_\+ap\+\_\+found to get the number of AP\textquotesingle{}s found 
\end{DoxyPrecond}
\begin{DoxyWarning}{Warning}
Function used only in S\+TA mode only. the scan result updated only if scan request called, else it will be cashed in firmware for the host scan request result, which mean if large delay occur between the scan request and the scan result request, the result will not be up-\/to-\/date 
\end{DoxyWarning}


Definition at line 708 of file m2m\+\_\+wifi.\+c.


\begin{DoxyCode}
709 \{
710     \hyperlink{group__DataT_gae35f10ffd0ac8dd2bc3e794da9bdfbc7}{sint8} ret = \hyperlink{nm__common_8h_a9ef27ba27aafdd1aa3a79d3ba2c36b8f}{M2M\_SUCCESS};
711     \hyperlink{structtstrM2mReqScanResult}{tstrM2mReqScanResult}* pstrReqScanRlt = &guCtrlStruct.strM2mReqScanResult;
712     pstrReqScanRlt->\hyperlink{structtstrM2mReqScanResult_a7f09d082424b29064faa67a51a633853}{u8Index} = index;
713     ret = \hyperlink{m2m__hif_8c_a13ba8ad11b2ac39516ca787386d16ce0}{hif\_send}(\hyperlink{nm__common_8h_a9ab02eb1aea02a75c3f5aade4eef1276aeb9a7d57324ba4b8a6c2a5f46dd499c2}{M2M\_REQ\_GRP\_WIFI}, 
      \hyperlink{group__WlanEnums_gga064de09dec1d5e88ed8d075fa40f57dea200a79b0551b5671e3b4a5bbfeab18ed}{M2M\_WIFI\_REQ\_SCAN\_RESULT}, (\hyperlink{group__DataT_ga4df709a77647e870bbf1d955b8edc9a6}{uint8}*)pstrReqScanRlt, \textcolor{keyword}{sizeof}(
      \hyperlink{structtstrM2mReqScanResult}{tstrM2mReqScanResult}), \hyperlink{group__BSPDefine_ga070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL}, 0, 0);
714     \textcolor{keywordflow}{return} ret;
715 \}
\end{DoxyCode}
