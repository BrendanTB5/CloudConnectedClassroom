\hypertarget{group__WifiEnableApFn}{}\section{m2m\+\_\+wifi\+\_\+enable\+\_\+ap}
\label{group__WifiEnableApFn}\index{m2m\+\_\+wifi\+\_\+enable\+\_\+ap@{m2m\+\_\+wifi\+\_\+enable\+\_\+ap}}
\subsection*{Functions}
\begin{DoxyCompactItemize}
\item 
\hyperlink{group__BSPDefine_gaecc0323d771e41ef81a76b5f12783e22}{N\+M\+I\+\_\+\+A\+PI} \hyperlink{group__DataT_gae35f10ffd0ac8dd2bc3e794da9bdfbc7}{sint8} \hyperlink{group__WifiEnableApFn_gab34cff419964df3c4e1ed86076aef7ce}{m2m\+\_\+wifi\+\_\+enable\+\_\+ap} (\hyperlink{group__BSPDefine_ga0c33b494a68ce28497e7ce8e5e95feff}{C\+O\+N\+ST} \hyperlink{structtstrM2MAPConfig}{tstr\+M2\+M\+A\+P\+Config} $\ast$pstr\+M2\+M\+A\+P\+Config)
\end{DoxyCompactItemize}


\subsection{Detailed Description}
Asychronous wi-\/fi hotspot enabling function. The W\+I\+LC supports AP mode operation with the following limitations\+:
\begin{DoxyItemize}
\item Up to 8 S\+TA could be associated at a time.
\item Open, W\+EP and W\+P\+A2 are the only supported security types 
\end{DoxyItemize}

\subsection{Function Documentation}
\mbox{\Hypertarget{group__WifiEnableApFn_gab34cff419964df3c4e1ed86076aef7ce}\label{group__WifiEnableApFn_gab34cff419964df3c4e1ed86076aef7ce}} 
\index{m2m\+\_\+wifi\+\_\+enable\+\_\+ap@{m2m\+\_\+wifi\+\_\+enable\+\_\+ap}!m2m\+\_\+wifi\+\_\+enable\+\_\+ap@{m2m\+\_\+wifi\+\_\+enable\+\_\+ap}}
\index{m2m\+\_\+wifi\+\_\+enable\+\_\+ap@{m2m\+\_\+wifi\+\_\+enable\+\_\+ap}!m2m\+\_\+wifi\+\_\+enable\+\_\+ap@{m2m\+\_\+wifi\+\_\+enable\+\_\+ap}}
\subsubsection{\texorpdfstring{m2m\+\_\+wifi\+\_\+enable\+\_\+ap()}{m2m\_wifi\_enable\_ap()}}
{\footnotesize\ttfamily \hyperlink{group__BSPDefine_gaecc0323d771e41ef81a76b5f12783e22}{N\+M\+I\+\_\+\+A\+PI} \hyperlink{group__DataT_gae35f10ffd0ac8dd2bc3e794da9bdfbc7}{sint8} m2m\+\_\+wifi\+\_\+enable\+\_\+ap (\begin{DoxyParamCaption}\item[{\hyperlink{group__BSPDefine_ga0c33b494a68ce28497e7ce8e5e95feff}{C\+O\+N\+ST} \hyperlink{structtstrM2MAPConfig}{tstr\+M2\+M\+A\+P\+Config} $\ast$}]{pstr\+M2\+M\+A\+P\+Config }\end{DoxyParamCaption})}



{\ttfamily \#include $<$\hyperlink{m2m__wifi_8h}{third\+\_\+party/atmel/devices/wilc1000/driver/include/m2m\+\_\+wifi.\+h}$>$}


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em pstr\+M2\+M\+A\+P\+Config} & A structure holding the AP configurations.\\
\hline
\end{DoxyParams}
\begin{DoxyPrecond}{Precondition}

\begin{DoxyItemize}
\item A Wi-\/\+Fi notification callback of type \hyperlink{group__WlanEnums_gac5302f32839285fe8375c159087aa8a1}{tpf\+App\+Wifi\+Cb} M\+U\+ST be implemented and registered at intalization. Registering the callback is done through passing it to the \hyperlink{group__WifiInitFn_ga73c734812e844d96d860c4e93e9daf35}{m2m\+\_\+wifi\+\_\+init}.
\item The \hyperlink{group__WifiHandleEventsFn_ga461a4edc057cec8c00cf124a07aa3b02}{m2m\+\_\+wifi\+\_\+handle\+\_\+events} M\+U\+ST be called to receive the responses in the callback.
\end{DoxyItemize}
\end{DoxyPrecond}
\begin{DoxySeeAlso}{See also}
\hyperlink{group__WlanEnums_gac5302f32839285fe8375c159087aa8a1}{tpf\+App\+Wifi\+Cb} \hyperlink{group__WlanEnums_gaa232a09c953ec8200c13774f94107b05}{tenu\+M2m\+Sec\+Type} \hyperlink{group__WifiInitFn_ga73c734812e844d96d860c4e93e9daf35}{m2m\+\_\+wifi\+\_\+init} \hyperlink{structtstrM2mWifiStateChanged}{tstr\+M2m\+Wifi\+State\+Changed} \hyperlink{structtstrM2MAPConfig}{tstr\+M2\+M\+A\+P\+Config}
\end{DoxySeeAlso}
\begin{DoxyReturn}{Returns}
The function returns \hyperlink{nm__common_8h_a9ef27ba27aafdd1aa3a79d3ba2c36b8f}{M2\+M\+\_\+\+S\+U\+C\+C\+E\+SS} for successful operations and a negative value otherwise. 
\end{DoxyReturn}
\hypertarget{group__WifiEnableMonitorModeFn_Example}{}\subsection{Example}\label{group__WifiEnableMonitorModeFn_Example}
The code snippet demonstrates how the AP mode is enabled after the driver is initialized in the application\textquotesingle{}s main function 
\begin{DoxyCode}
\textcolor{preprocessor}{#include "\hyperlink{m2m__wifi_8h}{m2m\_wifi.h}"}
\textcolor{preprocessor}{#include "\hyperlink{m2m__types_8h}{m2m\_types.h}"}

\textcolor{keywordtype}{void} wifi\_event\_cb(\hyperlink{group__DataT_ga4df709a77647e870bbf1d955b8edc9a6}{uint8} u8WiFiEvent, \textcolor{keywordtype}{void} * pvMsg)
\{
    \textcolor{keywordflow}{switch}(u8WiFiEvent)
    \{
        \textcolor{keywordflow}{case} \hyperlink{group__WlanEnums_gga064de09dec1d5e88ed8d075fa40f57deabb42b3025c56c51d915a1fa4abd2dbd0}{M2M\_WIFI\_RESP\_CON\_STATE\_CHANGED}:
        \{
            printf(\textcolor{stringliteral}{"STA has Associated\(\backslash\)r\(\backslash\)n"});
        \}
        \textcolor{keywordflow}{break};
        
        \textcolor{keywordflow}{default}:
        \textcolor{keywordflow}{break};
    \}
\}

\textcolor{keywordtype}{int} \hyperlink{demo_2microchip_2pic32mz__ef__curiosity_2wifi__http__server__demo_2src_2main_8c_ac5a1eca594b063e0d2dbccf86f96f221}{main}()
\{
    \hyperlink{structtstrWifiInitParam}{tstrWifiInitParam}   param;
    
    param.\hyperlink{group__WifiSetCustInfoElementFn_ga13d5fa7a0c71fd59bbf36a61923835cc}{pfAppWifiCb}   = wifi\_event\_cb;
    \textcolor{keywordflow}{if}(!\hyperlink{group__WifiInitFn_ga73c734812e844d96d860c4e93e9daf35}{m2m\_wifi\_init}(&param))
    \{
        \hyperlink{structtstrM2MAPConfig}{tstrM2MAPConfig}     apConfig;
        
        strcpy(apConfig.\hyperlink{structtstrM2MAPConfig_a880b8f6aff1114bfb6a6f94b9351920f}{au8SSID}, \textcolor{stringliteral}{"WILC\_SSID"});
        strcpy((\textcolor{keywordtype}{char} *)cfg.uniAuth.au8PSK, \textcolor{stringliteral}{"12345678"});
        apConfig.\hyperlink{structtstrM2MAPConfig_a1425d62e5001c25d04d88e20582526e0}{u8ListenChannel}    = 1;
        apConfig.\hyperlink{structtstrM2MAPConfig_a08ec2faca4058e8627cbfdb20f6a6da5}{u8SecType}          = \hyperlink{group__WlanEnums_ggaa232a09c953ec8200c13774f94107b05a951d0504fc8e173e60df8ee871f16697}{M2M\_WIFI\_SEC\_WPA\_PSK};
        apConfig.\hyperlink{structtstrM2MAPConfig_a425c035bc96435d3a9e75082ce27b569}{u8SsidHide}         = \hyperlink{group__WlanEnums_ggaa6553caf0dcdd1d8b908ec2383d86a60aec7509796a7b9fc2ecf2cb85d669f408}{SSID\_MODE\_VISIBLE};
                    
        \textcolor{comment}{// Trigger AP}
        \hyperlink{group__WifiEnableApFn_gab34cff419964df3c4e1ed86076aef7ce}{m2m\_wifi\_enable\_ap}(&apConfig);
        
        \textcolor{keywordflow}{while}(1)
        \{
            \hyperlink{group__WifiHandleEventsFn_ga461a4edc057cec8c00cf124a07aa3b02}{m2m\_wifi\_handle\_events}(\hyperlink{group__BSPDefine_ga070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL});
        \}
    \}
\}
\end{DoxyCode}
 

Definition at line 549 of file m2m\+\_\+wifi.\+c.


\begin{DoxyCode}
550 \{
551     \hyperlink{group__DataT_gae35f10ffd0ac8dd2bc3e794da9bdfbc7}{sint8} ret = \hyperlink{nm__common_8h_a9ef27ba27aafdd1aa3a79d3ba2c36b8f}{M2M\_SUCCESS};
552     \hyperlink{structtstrM2MAPConfig}{tstrM2MAPConfig}* pstrTempM2MAPConfig = &guCtrlStruct.strM2MAPConfig;
553     
554     \hyperlink{nm__common_8h_a62b30b611dfcc58e190254d1f663470a}{m2m\_memcpy}((\hyperlink{group__DataT_ga4df709a77647e870bbf1d955b8edc9a6}{uint8} *)pstrTempM2MAPConfig, (\hyperlink{group__DataT_ga4df709a77647e870bbf1d955b8edc9a6}{uint8} *)pstrM2MAPConfig, \textcolor{keyword}{sizeof}(
      \hyperlink{structtstrM2MAPConfig}{tstrM2MAPConfig}));
555     
556 \textcolor{preprocessor}{#ifdef COMPUTE\_PMK\_IN\_HOST}
557     \textcolor{keywordflow}{if}(pstrM2MAPConfig->u8SecType == \hyperlink{group__WlanEnums_ggaa232a09c953ec8200c13774f94107b05a951d0504fc8e173e60df8ee871f16697}{M2M\_WIFI\_SEC\_WPA\_PSK})
558     \{       
559         pstrTempM2MAPConfig->u8IsPMKUsed = 1;
560         \hyperlink{third__party_2atmel_2devices_2wilc1000_2drv__hash_2crypto_8h_a318c7e175b5bc9991153031d59b52ac0}{pbkdf2\_sha1}((\hyperlink{group__DataT_ga4df709a77647e870bbf1d955b8edc9a6}{uint8} *)pstrM2MAPConfig->uniAuth.au8PSK,
      \hyperlink{nm__common_8h_a3c10c83b6b5eda6b18bbc40ca411eeb4}{m2m\_strlen}((\hyperlink{group__DataT_ga4df709a77647e870bbf1d955b8edc9a6}{uint8} *)pstrM2MAPConfig->uniAuth.au8PSK),
561             (\hyperlink{group__DataT_ga4df709a77647e870bbf1d955b8edc9a6}{uint8} *)pstrM2MAPConfig->au8SSID,\hyperlink{nm__common_8h_a3c10c83b6b5eda6b18bbc40ca411eeb4}{m2m\_strlen}((\hyperlink{group__DataT_ga4df709a77647e870bbf1d955b8edc9a6}{uint8} *)pstrM2MAPConfig->
      au8SSID),pstrTempM2MAPConfig->uniAuth.au8PMK);
562     \}
563 \textcolor{preprocessor}{#else}
564     \textcolor{keywordflow}{if}(pstrM2MAPConfig->u8SecType == \hyperlink{group__WlanEnums_ggaa232a09c953ec8200c13774f94107b05a951d0504fc8e173e60df8ee871f16697}{M2M\_WIFI\_SEC\_WPA\_PSK})
565     \{
566         pstrTempM2MAPConfig->u8IsPMKUsed = 0;
567     \}
568 \textcolor{preprocessor}{#endif}
569     ret = \hyperlink{m2m__hif_8c_a13ba8ad11b2ac39516ca787386d16ce0}{hif\_send}(\hyperlink{nm__common_8h_a9ab02eb1aea02a75c3f5aade4eef1276aeb9a7d57324ba4b8a6c2a5f46dd499c2}{M2M\_REQ\_GRP\_WIFI}, 
      \hyperlink{group__WlanEnums_ggaa62989ea5e2977b374a04db81c89d524aea60fb0c4912ce9ead2d776c19b4434f}{M2M\_WIFI\_REQ\_ENABLE\_AP}, (\hyperlink{group__DataT_ga4df709a77647e870bbf1d955b8edc9a6}{uint8} *)pstrTempM2MAPConfig, \textcolor{keyword}{sizeof}(
      \hyperlink{structtstrM2MAPConfig}{tstrM2MAPConfig}), \hyperlink{group__BSPDefine_ga070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL}, 0, 0);   
570     
571     \textcolor{keywordflow}{return} ret;
572 \}
\end{DoxyCode}
