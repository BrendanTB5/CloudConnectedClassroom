\hypertarget{mqtt__sn__message_8c}{}\section{cyclone\+\_\+tcp/mqtt\+\_\+sn/mqtt\+\_\+sn\+\_\+message.c File Reference}
\label{mqtt__sn__message_8c}\index{cyclone\+\_\+tcp/mqtt\+\_\+sn/mqtt\+\_\+sn\+\_\+message.\+c@{cyclone\+\_\+tcp/mqtt\+\_\+sn/mqtt\+\_\+sn\+\_\+message.\+c}}


M\+Q\+T\+T-\/\+SN message formatting and parsing.  


{\ttfamily \#include \char`\"{}core/net.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}mqtt\+\_\+sn/mqtt\+\_\+sn\+\_\+client.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}mqtt\+\_\+sn/mqtt\+\_\+sn\+\_\+message.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}debug.\+h\char`\"{}}\newline
\subsection*{Macros}
\begin{DoxyCompactItemize}
\item 
\#define \hyperlink{mqtt__sn__message_8c_afcdf5e66fd927a7f4cc64295acd20407}{T\+R\+A\+C\+E\+\_\+\+L\+E\+V\+EL}~\hyperlink{net__config_8h_a84a94bc8e8c71e7717663296513ed1d9}{M\+Q\+T\+T\+\_\+\+S\+N\+\_\+\+T\+R\+A\+C\+E\+\_\+\+L\+E\+V\+EL}
\end{DoxyCompactItemize}
\subsection*{Functions}
\begin{DoxyCompactItemize}
\item 
\hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689c}{error\+\_\+t} \hyperlink{mqtt__sn__message_8c_afdc609c5b5d1ecd4069983cf26ead095}{mqtt\+Sn\+Format\+Header} (\hyperlink{structMqttSnMessage}{Mqtt\+Sn\+Message} $\ast$\hyperlink{pap_8h_a52f19d36a71e9b8ddea38fe00c291181}{message}, \hyperlink{mqtt__sn__common_8h_a0b5ccdae8aa73dc7c74ae2dfe62fd112}{Mqtt\+Sn\+Msg\+Type} \hyperlink{ppp_8h_a1d127017fb298b889f4ba24752d08b8e}{type}, size\+\_\+t \hyperlink{ppp_8h_ab2b3adeb2a67e656ff030b56727fd0ac}{length})
\begin{DoxyCompactList}\small\item\em Format M\+Q\+T\+T-\/\+SN message header. \end{DoxyCompactList}\item 
\hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689c}{error\+\_\+t} \hyperlink{mqtt__sn__message_8c_a6f13a37e2ec64beaad7cb00a3affcc94}{mqtt\+Sn\+Format\+Search\+Gw} (\hyperlink{structMqttSnMessage}{Mqtt\+Sn\+Message} $\ast$\hyperlink{pap_8h_a52f19d36a71e9b8ddea38fe00c291181}{message}, \hyperlink{stdint_8h_aba7bc1797add20fe3efdf37ced1182c5}{uint8\+\_\+t} \hyperlink{mqtt__sn__common_8h_a3eba6170f6a65416202e05346c2d7541}{radius})
\begin{DoxyCompactList}\small\item\em Format S\+E\+A\+R\+C\+H\+GW message. \end{DoxyCompactList}\item 
\hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689c}{error\+\_\+t} \hyperlink{mqtt__sn__message_8c_add73dbd84f885066c5a44bcdd0999941}{mqtt\+Sn\+Format\+Connect} (\hyperlink{structMqttSnMessage}{Mqtt\+Sn\+Message} $\ast$\hyperlink{pap_8h_a52f19d36a71e9b8ddea38fe00c291181}{message}, \hyperlink{mqtt__sn__common_8h_adfa650f3c081a815eb81daa416bb94a0}{Mqtt\+Sn\+Flags} \hyperlink{nbns__common_8h_a1e87af3c18a2fd36c61faf89949bdc3f}{flags}, \hyperlink{stdint_8h_a273cf69d639a59973b6019625df33e30}{uint16\+\_\+t} \hyperlink{mqtt__sn__common_8h_a5b14ef3e3e30242faa9bbef961493044}{duration}, const \hyperlink{compiler__port_8h_a40bb5262bf908c328fbcfbe5d29d0201}{char\+\_\+t} $\ast$\hyperlink{mqtt__sn__common_8h_aaaf873d7efb58d9ccdddc5c8569e092b}{client\+Id})
\begin{DoxyCompactList}\small\item\em Format C\+O\+N\+N\+E\+CT message. \end{DoxyCompactList}\item 
\hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689c}{error\+\_\+t} \hyperlink{mqtt__sn__message_8c_a7eb03e15aca9d53e7f25ebc1013cf2ff}{mqtt\+Sn\+Format\+Will\+Topic} (\hyperlink{structMqttSnMessage}{Mqtt\+Sn\+Message} $\ast$\hyperlink{pap_8h_a52f19d36a71e9b8ddea38fe00c291181}{message}, \hyperlink{mqtt__sn__common_8h_adfa650f3c081a815eb81daa416bb94a0}{Mqtt\+Sn\+Flags} \hyperlink{nbns__common_8h_a1e87af3c18a2fd36c61faf89949bdc3f}{flags}, const \hyperlink{compiler__port_8h_a40bb5262bf908c328fbcfbe5d29d0201}{char\+\_\+t} $\ast$\hyperlink{mqtt__sn__common_8h_a12172589bd20ef38ecbc6f4faf6ae3d0}{topic\+Name})
\begin{DoxyCompactList}\small\item\em Format W\+I\+L\+L\+T\+O\+P\+IC message. \end{DoxyCompactList}\item 
\hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689c}{error\+\_\+t} \hyperlink{mqtt__sn__message_8c_ae92fb0695bada2caf38c98ff2c46cc43}{mqtt\+Sn\+Format\+Will\+Msg} (\hyperlink{structMqttSnMessage}{Mqtt\+Sn\+Message} $\ast$\hyperlink{pap_8h_a52f19d36a71e9b8ddea38fe00c291181}{message}, const void $\ast$\hyperlink{tftp__common_8h_a5c239a1bb87b52b0f1d6d68c4749cd2a}{data}, size\+\_\+t data\+Len)
\begin{DoxyCompactList}\small\item\em Format W\+I\+L\+L\+M\+SG message. \end{DoxyCompactList}\item 
\hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689c}{error\+\_\+t} \hyperlink{mqtt__sn__message_8c_a84b352f0fd3dd17c3a7a338879caff6c}{mqtt\+Sn\+Format\+Register} (\hyperlink{structMqttSnMessage}{Mqtt\+Sn\+Message} $\ast$\hyperlink{pap_8h_a52f19d36a71e9b8ddea38fe00c291181}{message}, \hyperlink{stdint_8h_a273cf69d639a59973b6019625df33e30}{uint16\+\_\+t} \hyperlink{mqtt__sn__common_8h_a2acf66d2c12f7b04f90ed704f5ac215c}{msg\+Id}, \hyperlink{stdint_8h_a273cf69d639a59973b6019625df33e30}{uint16\+\_\+t} \hyperlink{mqtt__sn__common_8h_a9f7eda5d21d45b5350db8cd0c451427a}{topic\+Id}, const \hyperlink{compiler__port_8h_a40bb5262bf908c328fbcfbe5d29d0201}{char\+\_\+t} $\ast$\hyperlink{mqtt__sn__common_8h_a12172589bd20ef38ecbc6f4faf6ae3d0}{topic\+Name})
\begin{DoxyCompactList}\small\item\em Format R\+E\+G\+I\+S\+T\+ER message. \end{DoxyCompactList}\item 
\hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689c}{error\+\_\+t} \hyperlink{mqtt__sn__message_8c_a1cf0fbc06c248c08d060d453f2182936}{mqtt\+Sn\+Format\+Reg\+Ack} (\hyperlink{structMqttSnMessage}{Mqtt\+Sn\+Message} $\ast$\hyperlink{pap_8h_a52f19d36a71e9b8ddea38fe00c291181}{message}, \hyperlink{stdint_8h_a273cf69d639a59973b6019625df33e30}{uint16\+\_\+t} \hyperlink{mqtt__sn__common_8h_a2acf66d2c12f7b04f90ed704f5ac215c}{msg\+Id}, \hyperlink{stdint_8h_a273cf69d639a59973b6019625df33e30}{uint16\+\_\+t} \hyperlink{mqtt__sn__common_8h_a9f7eda5d21d45b5350db8cd0c451427a}{topic\+Id}, \hyperlink{mqtt__sn__common_8h_aa8ae09a48836472262f42c1f09638e9c}{Mqtt\+Sn\+Return\+Code} \hyperlink{mqtt__sn__common_8h_aa43af56bba229c3214623f0f0c23bf6e}{return\+Code})
\begin{DoxyCompactList}\small\item\em Format R\+E\+G\+A\+CK message. \end{DoxyCompactList}\item 
\hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689c}{error\+\_\+t} \hyperlink{mqtt__sn__message_8c_a32dff3e1a905333815f26385d4d836ed}{mqtt\+Sn\+Format\+Publish} (\hyperlink{structMqttSnMessage}{Mqtt\+Sn\+Message} $\ast$\hyperlink{pap_8h_a52f19d36a71e9b8ddea38fe00c291181}{message}, \hyperlink{mqtt__sn__common_8h_adfa650f3c081a815eb81daa416bb94a0}{Mqtt\+Sn\+Flags} \hyperlink{nbns__common_8h_a1e87af3c18a2fd36c61faf89949bdc3f}{flags}, \hyperlink{stdint_8h_a273cf69d639a59973b6019625df33e30}{uint16\+\_\+t} \hyperlink{mqtt__sn__common_8h_a2acf66d2c12f7b04f90ed704f5ac215c}{msg\+Id}, \hyperlink{stdint_8h_a273cf69d639a59973b6019625df33e30}{uint16\+\_\+t} \hyperlink{mqtt__sn__common_8h_a9f7eda5d21d45b5350db8cd0c451427a}{topic\+Id}, const \hyperlink{compiler__port_8h_a40bb5262bf908c328fbcfbe5d29d0201}{char\+\_\+t} $\ast$\hyperlink{mqtt__sn__common_8h_a12172589bd20ef38ecbc6f4faf6ae3d0}{topic\+Name}, const \hyperlink{stdint_8h_aba7bc1797add20fe3efdf37ced1182c5}{uint8\+\_\+t} $\ast$\hyperlink{tftp__common_8h_a5c239a1bb87b52b0f1d6d68c4749cd2a}{data}, size\+\_\+t data\+Len)
\begin{DoxyCompactList}\small\item\em Format P\+U\+B\+L\+I\+SH message. \end{DoxyCompactList}\item 
\hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689c}{error\+\_\+t} \hyperlink{mqtt__sn__message_8c_a3f4282b52e7e842a603d0fd746442b97}{mqtt\+Sn\+Format\+Pub\+Ack} (\hyperlink{structMqttSnMessage}{Mqtt\+Sn\+Message} $\ast$\hyperlink{pap_8h_a52f19d36a71e9b8ddea38fe00c291181}{message}, \hyperlink{stdint_8h_a273cf69d639a59973b6019625df33e30}{uint16\+\_\+t} \hyperlink{mqtt__sn__common_8h_a2acf66d2c12f7b04f90ed704f5ac215c}{msg\+Id}, \hyperlink{stdint_8h_a273cf69d639a59973b6019625df33e30}{uint16\+\_\+t} \hyperlink{mqtt__sn__common_8h_a9f7eda5d21d45b5350db8cd0c451427a}{topic\+Id}, \hyperlink{mqtt__sn__common_8h_aa8ae09a48836472262f42c1f09638e9c}{Mqtt\+Sn\+Return\+Code} \hyperlink{mqtt__sn__common_8h_aa43af56bba229c3214623f0f0c23bf6e}{return\+Code})
\begin{DoxyCompactList}\small\item\em Format P\+U\+B\+A\+CK message. \end{DoxyCompactList}\item 
\hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689c}{error\+\_\+t} \hyperlink{mqtt__sn__message_8c_a455e00eff2e9f5a38e4c4ccbb3499454}{mqtt\+Sn\+Format\+Pub\+Rec} (\hyperlink{structMqttSnMessage}{Mqtt\+Sn\+Message} $\ast$\hyperlink{pap_8h_a52f19d36a71e9b8ddea38fe00c291181}{message}, \hyperlink{stdint_8h_a273cf69d639a59973b6019625df33e30}{uint16\+\_\+t} \hyperlink{mqtt__sn__common_8h_a2acf66d2c12f7b04f90ed704f5ac215c}{msg\+Id})
\begin{DoxyCompactList}\small\item\em Format P\+U\+B\+R\+EC message. \end{DoxyCompactList}\item 
\hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689c}{error\+\_\+t} \hyperlink{mqtt__sn__message_8c_a7d74e9bdcc884be6a283ec162c410a65}{mqtt\+Sn\+Format\+Pub\+Rel} (\hyperlink{structMqttSnMessage}{Mqtt\+Sn\+Message} $\ast$\hyperlink{pap_8h_a52f19d36a71e9b8ddea38fe00c291181}{message}, \hyperlink{stdint_8h_a273cf69d639a59973b6019625df33e30}{uint16\+\_\+t} \hyperlink{mqtt__sn__common_8h_a2acf66d2c12f7b04f90ed704f5ac215c}{msg\+Id})
\begin{DoxyCompactList}\small\item\em Format P\+U\+B\+R\+EL message. \end{DoxyCompactList}\item 
\hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689c}{error\+\_\+t} \hyperlink{mqtt__sn__message_8c_aeef836fc77b3383e3bae77c1d5187df4}{mqtt\+Sn\+Format\+Pub\+Comp} (\hyperlink{structMqttSnMessage}{Mqtt\+Sn\+Message} $\ast$\hyperlink{pap_8h_a52f19d36a71e9b8ddea38fe00c291181}{message}, \hyperlink{stdint_8h_a273cf69d639a59973b6019625df33e30}{uint16\+\_\+t} \hyperlink{mqtt__sn__common_8h_a2acf66d2c12f7b04f90ed704f5ac215c}{msg\+Id})
\begin{DoxyCompactList}\small\item\em Format P\+U\+B\+C\+O\+MP message. \end{DoxyCompactList}\item 
\hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689c}{error\+\_\+t} \hyperlink{mqtt__sn__message_8c_ae5fbfb688fcaa04ca27920f3ccbca3a0}{mqtt\+Sn\+Format\+Subscribe} (\hyperlink{structMqttSnMessage}{Mqtt\+Sn\+Message} $\ast$\hyperlink{pap_8h_a52f19d36a71e9b8ddea38fe00c291181}{message}, \hyperlink{mqtt__sn__common_8h_adfa650f3c081a815eb81daa416bb94a0}{Mqtt\+Sn\+Flags} \hyperlink{nbns__common_8h_a1e87af3c18a2fd36c61faf89949bdc3f}{flags}, \hyperlink{stdint_8h_a273cf69d639a59973b6019625df33e30}{uint16\+\_\+t} \hyperlink{mqtt__sn__common_8h_a2acf66d2c12f7b04f90ed704f5ac215c}{msg\+Id}, \hyperlink{stdint_8h_a273cf69d639a59973b6019625df33e30}{uint16\+\_\+t} \hyperlink{mqtt__sn__common_8h_a9f7eda5d21d45b5350db8cd0c451427a}{topic\+Id}, const \hyperlink{compiler__port_8h_a40bb5262bf908c328fbcfbe5d29d0201}{char\+\_\+t} $\ast$\hyperlink{mqtt__sn__common_8h_a12172589bd20ef38ecbc6f4faf6ae3d0}{topic\+Name})
\begin{DoxyCompactList}\small\item\em Format S\+U\+B\+S\+C\+R\+I\+BE message. \end{DoxyCompactList}\item 
\hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689c}{error\+\_\+t} \hyperlink{mqtt__sn__message_8c_a7955be3ceadffc43478ea5c037446ae4}{mqtt\+Sn\+Format\+Unsubscribe} (\hyperlink{structMqttSnMessage}{Mqtt\+Sn\+Message} $\ast$\hyperlink{pap_8h_a52f19d36a71e9b8ddea38fe00c291181}{message}, \hyperlink{mqtt__sn__common_8h_adfa650f3c081a815eb81daa416bb94a0}{Mqtt\+Sn\+Flags} \hyperlink{nbns__common_8h_a1e87af3c18a2fd36c61faf89949bdc3f}{flags}, \hyperlink{stdint_8h_a273cf69d639a59973b6019625df33e30}{uint16\+\_\+t} \hyperlink{mqtt__sn__common_8h_a2acf66d2c12f7b04f90ed704f5ac215c}{msg\+Id}, \hyperlink{stdint_8h_a273cf69d639a59973b6019625df33e30}{uint16\+\_\+t} \hyperlink{mqtt__sn__common_8h_a9f7eda5d21d45b5350db8cd0c451427a}{topic\+Id}, const \hyperlink{compiler__port_8h_a40bb5262bf908c328fbcfbe5d29d0201}{char\+\_\+t} $\ast$\hyperlink{mqtt__sn__common_8h_a12172589bd20ef38ecbc6f4faf6ae3d0}{topic\+Name})
\begin{DoxyCompactList}\small\item\em Format U\+N\+S\+U\+B\+S\+C\+R\+I\+BE message. \end{DoxyCompactList}\item 
\hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689c}{error\+\_\+t} \hyperlink{mqtt__sn__message_8c_a7674091b1cb49cb985ec453c22a9234b}{mqtt\+Sn\+Format\+Ping\+Req} (\hyperlink{structMqttSnMessage}{Mqtt\+Sn\+Message} $\ast$\hyperlink{pap_8h_a52f19d36a71e9b8ddea38fe00c291181}{message}, const \hyperlink{compiler__port_8h_a40bb5262bf908c328fbcfbe5d29d0201}{char\+\_\+t} $\ast$\hyperlink{mqtt__sn__common_8h_aaaf873d7efb58d9ccdddc5c8569e092b}{client\+Id})
\begin{DoxyCompactList}\small\item\em Format P\+I\+N\+G\+R\+EQ message. \end{DoxyCompactList}\item 
\hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689c}{error\+\_\+t} \hyperlink{mqtt__sn__message_8c_a76cc5d0a6e928a10d3762b0a7942602e}{mqtt\+Sn\+Format\+Ping\+Resp} (\hyperlink{structMqttSnMessage}{Mqtt\+Sn\+Message} $\ast$\hyperlink{pap_8h_a52f19d36a71e9b8ddea38fe00c291181}{message})
\begin{DoxyCompactList}\small\item\em Format P\+I\+N\+G\+R\+E\+SP message. \end{DoxyCompactList}\item 
\hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689c}{error\+\_\+t} \hyperlink{mqtt__sn__message_8c_a5901c6dbc3ebd94051d8e19f6a577a6a}{mqtt\+Sn\+Format\+Disconnect} (\hyperlink{structMqttSnMessage}{Mqtt\+Sn\+Message} $\ast$\hyperlink{pap_8h_a52f19d36a71e9b8ddea38fe00c291181}{message}, \hyperlink{stdint_8h_a273cf69d639a59973b6019625df33e30}{uint16\+\_\+t} \hyperlink{mqtt__sn__common_8h_a5b14ef3e3e30242faa9bbef961493044}{duration})
\begin{DoxyCompactList}\small\item\em Format D\+I\+S\+C\+O\+N\+N\+E\+CT message. \end{DoxyCompactList}\item 
\hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689c}{error\+\_\+t} \hyperlink{mqtt__sn__message_8c_abca35dd2e0c4f3d00ed013b1673389da}{mqtt\+Sn\+Format\+Will\+Topic\+Upd} (\hyperlink{structMqttSnMessage}{Mqtt\+Sn\+Message} $\ast$\hyperlink{pap_8h_a52f19d36a71e9b8ddea38fe00c291181}{message}, \hyperlink{mqtt__sn__common_8h_adfa650f3c081a815eb81daa416bb94a0}{Mqtt\+Sn\+Flags} \hyperlink{nbns__common_8h_a1e87af3c18a2fd36c61faf89949bdc3f}{flags}, const \hyperlink{compiler__port_8h_a40bb5262bf908c328fbcfbe5d29d0201}{char\+\_\+t} $\ast$\hyperlink{mqtt__sn__common_8h_a12172589bd20ef38ecbc6f4faf6ae3d0}{topic\+Name})
\begin{DoxyCompactList}\small\item\em Format W\+I\+L\+L\+T\+O\+P\+I\+C\+U\+PD message. \end{DoxyCompactList}\item 
\hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689c}{error\+\_\+t} \hyperlink{mqtt__sn__message_8c_a1b5f07974b8ec6f98967a09167355fa4}{mqtt\+Sn\+Format\+Will\+Msg\+Upd} (\hyperlink{structMqttSnMessage}{Mqtt\+Sn\+Message} $\ast$\hyperlink{pap_8h_a52f19d36a71e9b8ddea38fe00c291181}{message}, const void $\ast$\hyperlink{tftp__common_8h_a5c239a1bb87b52b0f1d6d68c4749cd2a}{data}, size\+\_\+t data\+Len)
\begin{DoxyCompactList}\small\item\em Format W\+I\+L\+L\+M\+S\+G\+U\+PD message. \end{DoxyCompactList}\item 
\hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689c}{error\+\_\+t} \hyperlink{mqtt__sn__message_8c_a45575f6155c83f9f5626aff7045b5d36}{mqtt\+Sn\+Parse\+Header} (\hyperlink{structMqttSnMessage}{Mqtt\+Sn\+Message} $\ast$\hyperlink{pap_8h_a52f19d36a71e9b8ddea38fe00c291181}{message}, \hyperlink{mqtt__sn__common_8h_a0b5ccdae8aa73dc7c74ae2dfe62fd112}{Mqtt\+Sn\+Msg\+Type} $\ast$\hyperlink{ppp_8h_a1d127017fb298b889f4ba24752d08b8e}{type})
\begin{DoxyCompactList}\small\item\em Format M\+Q\+T\+T-\/\+SN message header. \end{DoxyCompactList}\item 
\hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689c}{error\+\_\+t} \hyperlink{mqtt__sn__message_8c_a525446cbeff5a7a6dca38494236a64bb}{mqtt\+Sn\+Parse\+Gw\+Info} (const \hyperlink{structMqttSnMessage}{Mqtt\+Sn\+Message} $\ast$\hyperlink{pap_8h_a52f19d36a71e9b8ddea38fe00c291181}{message}, \hyperlink{stdint_8h_aba7bc1797add20fe3efdf37ced1182c5}{uint8\+\_\+t} $\ast$\hyperlink{mqtt__sn__common_8h_a839c8eaa3240a2a4206e4afb1c50f327}{gw\+Id}, const \hyperlink{stdint_8h_aba7bc1797add20fe3efdf37ced1182c5}{uint8\+\_\+t} $\ast$$\ast$\hyperlink{mqtt__sn__common_8h_aa53d4ce1397134077209e0324224059f}{gw\+Add}, size\+\_\+t $\ast$gw\+Add\+Len)
\begin{DoxyCompactList}\small\item\em Parse G\+W\+I\+N\+FO message. \end{DoxyCompactList}\item 
\hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689c}{error\+\_\+t} \hyperlink{mqtt__sn__message_8c_a35eb74e1f7a31e7ff4d873ec5276ea92}{mqtt\+Sn\+Parse\+Conn\+Ack} (const \hyperlink{structMqttSnMessage}{Mqtt\+Sn\+Message} $\ast$\hyperlink{pap_8h_a52f19d36a71e9b8ddea38fe00c291181}{message}, \hyperlink{mqtt__sn__common_8h_aa8ae09a48836472262f42c1f09638e9c}{Mqtt\+Sn\+Return\+Code} $\ast$\hyperlink{mqtt__sn__common_8h_aa43af56bba229c3214623f0f0c23bf6e}{return\+Code})
\begin{DoxyCompactList}\small\item\em Parse C\+O\+N\+N\+A\+CK message. \end{DoxyCompactList}\item 
\hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689c}{error\+\_\+t} \hyperlink{mqtt__sn__message_8c_a3f256895389ec2141c30c34b7c86d366}{mqtt\+Sn\+Parse\+Will\+Topic\+Req} (const \hyperlink{structMqttSnMessage}{Mqtt\+Sn\+Message} $\ast$\hyperlink{pap_8h_a52f19d36a71e9b8ddea38fe00c291181}{message})
\begin{DoxyCompactList}\small\item\em Parse W\+I\+L\+L\+T\+O\+P\+I\+C\+R\+EQ message. \end{DoxyCompactList}\item 
\hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689c}{error\+\_\+t} \hyperlink{mqtt__sn__message_8c_a5a28f0189f922f9e4fd76ee36bafeb37}{mqtt\+Sn\+Parse\+Will\+Msg\+Req} (const \hyperlink{structMqttSnMessage}{Mqtt\+Sn\+Message} $\ast$\hyperlink{pap_8h_a52f19d36a71e9b8ddea38fe00c291181}{message})
\begin{DoxyCompactList}\small\item\em Parse W\+I\+L\+L\+M\+S\+G\+R\+EQ message. \end{DoxyCompactList}\item 
\hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689c}{error\+\_\+t} \hyperlink{mqtt__sn__message_8c_ae8d34fb3190f7bdc1f51c4fb2c39fb2a}{mqtt\+Sn\+Parse\+Register} (const \hyperlink{structMqttSnMessage}{Mqtt\+Sn\+Message} $\ast$\hyperlink{pap_8h_a52f19d36a71e9b8ddea38fe00c291181}{message}, \hyperlink{stdint_8h_a273cf69d639a59973b6019625df33e30}{uint16\+\_\+t} $\ast$\hyperlink{mqtt__sn__common_8h_a2acf66d2c12f7b04f90ed704f5ac215c}{msg\+Id}, \hyperlink{stdint_8h_a273cf69d639a59973b6019625df33e30}{uint16\+\_\+t} $\ast$\hyperlink{mqtt__sn__common_8h_a9f7eda5d21d45b5350db8cd0c451427a}{topic\+Id}, const \hyperlink{compiler__port_8h_a40bb5262bf908c328fbcfbe5d29d0201}{char\+\_\+t} $\ast$$\ast$\hyperlink{mqtt__sn__common_8h_a12172589bd20ef38ecbc6f4faf6ae3d0}{topic\+Name})
\begin{DoxyCompactList}\small\item\em Parse R\+E\+G\+I\+S\+T\+ER message. \end{DoxyCompactList}\item 
\hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689c}{error\+\_\+t} \hyperlink{mqtt__sn__message_8c_acde961cf8ae65ea7d00db07c6df2f1ba}{mqtt\+Sn\+Parse\+Reg\+Ack} (const \hyperlink{structMqttSnMessage}{Mqtt\+Sn\+Message} $\ast$\hyperlink{pap_8h_a52f19d36a71e9b8ddea38fe00c291181}{message}, \hyperlink{stdint_8h_a273cf69d639a59973b6019625df33e30}{uint16\+\_\+t} $\ast$\hyperlink{mqtt__sn__common_8h_a2acf66d2c12f7b04f90ed704f5ac215c}{msg\+Id}, \hyperlink{stdint_8h_a273cf69d639a59973b6019625df33e30}{uint16\+\_\+t} $\ast$\hyperlink{mqtt__sn__common_8h_a9f7eda5d21d45b5350db8cd0c451427a}{topic\+Id}, \hyperlink{mqtt__sn__common_8h_aa8ae09a48836472262f42c1f09638e9c}{Mqtt\+Sn\+Return\+Code} $\ast$\hyperlink{mqtt__sn__common_8h_aa43af56bba229c3214623f0f0c23bf6e}{return\+Code})
\begin{DoxyCompactList}\small\item\em Parse R\+E\+G\+A\+CK message. \end{DoxyCompactList}\item 
\hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689c}{error\+\_\+t} \hyperlink{mqtt__sn__message_8c_a928af55e0ea7253387840ab6c36381ca}{mqtt\+Sn\+Parse\+Publish} (const \hyperlink{structMqttSnMessage}{Mqtt\+Sn\+Message} $\ast$\hyperlink{pap_8h_a52f19d36a71e9b8ddea38fe00c291181}{message}, \hyperlink{mqtt__sn__common_8h_adfa650f3c081a815eb81daa416bb94a0}{Mqtt\+Sn\+Flags} $\ast$\hyperlink{nbns__common_8h_a1e87af3c18a2fd36c61faf89949bdc3f}{flags}, \hyperlink{stdint_8h_a273cf69d639a59973b6019625df33e30}{uint16\+\_\+t} $\ast$\hyperlink{mqtt__sn__common_8h_a2acf66d2c12f7b04f90ed704f5ac215c}{msg\+Id}, \hyperlink{stdint_8h_a273cf69d639a59973b6019625df33e30}{uint16\+\_\+t} $\ast$\hyperlink{mqtt__sn__common_8h_a9f7eda5d21d45b5350db8cd0c451427a}{topic\+Id}, const \hyperlink{stdint_8h_aba7bc1797add20fe3efdf37ced1182c5}{uint8\+\_\+t} $\ast$$\ast$\hyperlink{tftp__common_8h_a5c239a1bb87b52b0f1d6d68c4749cd2a}{data}, size\+\_\+t $\ast$data\+Len)
\begin{DoxyCompactList}\small\item\em Parse P\+U\+B\+L\+I\+SH message. \end{DoxyCompactList}\item 
\hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689c}{error\+\_\+t} \hyperlink{mqtt__sn__message_8c_a5af464d5c767833ff22d31b478a323f1}{mqtt\+Sn\+Parse\+Pub\+Ack} (const \hyperlink{structMqttSnMessage}{Mqtt\+Sn\+Message} $\ast$\hyperlink{pap_8h_a52f19d36a71e9b8ddea38fe00c291181}{message}, \hyperlink{stdint_8h_a273cf69d639a59973b6019625df33e30}{uint16\+\_\+t} $\ast$\hyperlink{mqtt__sn__common_8h_a2acf66d2c12f7b04f90ed704f5ac215c}{msg\+Id}, \hyperlink{stdint_8h_a273cf69d639a59973b6019625df33e30}{uint16\+\_\+t} $\ast$\hyperlink{mqtt__sn__common_8h_a9f7eda5d21d45b5350db8cd0c451427a}{topic\+Id}, \hyperlink{mqtt__sn__common_8h_aa8ae09a48836472262f42c1f09638e9c}{Mqtt\+Sn\+Return\+Code} $\ast$\hyperlink{mqtt__sn__common_8h_aa43af56bba229c3214623f0f0c23bf6e}{return\+Code})
\begin{DoxyCompactList}\small\item\em Parse P\+U\+B\+A\+CK message. \end{DoxyCompactList}\item 
\hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689c}{error\+\_\+t} \hyperlink{mqtt__sn__message_8c_af75463d1bab0f7d23e849f750fc81f67}{mqtt\+Sn\+Parse\+Pub\+Rec} (const \hyperlink{structMqttSnMessage}{Mqtt\+Sn\+Message} $\ast$\hyperlink{pap_8h_a52f19d36a71e9b8ddea38fe00c291181}{message}, \hyperlink{stdint_8h_a273cf69d639a59973b6019625df33e30}{uint16\+\_\+t} $\ast$\hyperlink{mqtt__sn__common_8h_a2acf66d2c12f7b04f90ed704f5ac215c}{msg\+Id})
\begin{DoxyCompactList}\small\item\em Parse P\+U\+B\+R\+EC message. \end{DoxyCompactList}\item 
\hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689c}{error\+\_\+t} \hyperlink{mqtt__sn__message_8c_a4ead947261f68568e4c172db2c7770e8}{mqtt\+Sn\+Parse\+Pub\+Rel} (const \hyperlink{structMqttSnMessage}{Mqtt\+Sn\+Message} $\ast$\hyperlink{pap_8h_a52f19d36a71e9b8ddea38fe00c291181}{message}, \hyperlink{stdint_8h_a273cf69d639a59973b6019625df33e30}{uint16\+\_\+t} $\ast$\hyperlink{mqtt__sn__common_8h_a2acf66d2c12f7b04f90ed704f5ac215c}{msg\+Id})
\begin{DoxyCompactList}\small\item\em Parse P\+U\+B\+R\+EL message. \end{DoxyCompactList}\item 
\hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689c}{error\+\_\+t} \hyperlink{mqtt__sn__message_8c_a8b76777fa3a62c3500b5529c9179aed0}{mqtt\+Sn\+Parse\+Pub\+Comp} (const \hyperlink{structMqttSnMessage}{Mqtt\+Sn\+Message} $\ast$\hyperlink{pap_8h_a52f19d36a71e9b8ddea38fe00c291181}{message}, \hyperlink{stdint_8h_a273cf69d639a59973b6019625df33e30}{uint16\+\_\+t} $\ast$\hyperlink{mqtt__sn__common_8h_a2acf66d2c12f7b04f90ed704f5ac215c}{msg\+Id})
\begin{DoxyCompactList}\small\item\em Parse P\+U\+B\+C\+O\+MP message. \end{DoxyCompactList}\item 
\hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689c}{error\+\_\+t} \hyperlink{mqtt__sn__message_8c_a4879c6c38719e587a78c34897ad3ffdd}{mqtt\+Sn\+Parse\+Sub\+Ack} (const \hyperlink{structMqttSnMessage}{Mqtt\+Sn\+Message} $\ast$\hyperlink{pap_8h_a52f19d36a71e9b8ddea38fe00c291181}{message}, \hyperlink{mqtt__sn__common_8h_adfa650f3c081a815eb81daa416bb94a0}{Mqtt\+Sn\+Flags} $\ast$\hyperlink{nbns__common_8h_a1e87af3c18a2fd36c61faf89949bdc3f}{flags}, \hyperlink{stdint_8h_a273cf69d639a59973b6019625df33e30}{uint16\+\_\+t} $\ast$\hyperlink{mqtt__sn__common_8h_a2acf66d2c12f7b04f90ed704f5ac215c}{msg\+Id}, \hyperlink{stdint_8h_a273cf69d639a59973b6019625df33e30}{uint16\+\_\+t} $\ast$\hyperlink{mqtt__sn__common_8h_a9f7eda5d21d45b5350db8cd0c451427a}{topic\+Id}, \hyperlink{mqtt__sn__common_8h_aa8ae09a48836472262f42c1f09638e9c}{Mqtt\+Sn\+Return\+Code} $\ast$\hyperlink{mqtt__sn__common_8h_aa43af56bba229c3214623f0f0c23bf6e}{return\+Code})
\begin{DoxyCompactList}\small\item\em Parse S\+U\+B\+A\+CK message. \end{DoxyCompactList}\item 
\hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689c}{error\+\_\+t} \hyperlink{mqtt__sn__message_8c_ac89abcc9d79eb33e9d093e467c1167c4}{mqtt\+Sn\+Parse\+Unsub\+Ack} (const \hyperlink{structMqttSnMessage}{Mqtt\+Sn\+Message} $\ast$\hyperlink{pap_8h_a52f19d36a71e9b8ddea38fe00c291181}{message}, \hyperlink{stdint_8h_a273cf69d639a59973b6019625df33e30}{uint16\+\_\+t} $\ast$\hyperlink{mqtt__sn__common_8h_a2acf66d2c12f7b04f90ed704f5ac215c}{msg\+Id})
\begin{DoxyCompactList}\small\item\em Parse U\+N\+S\+U\+B\+A\+CK message. \end{DoxyCompactList}\item 
\hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689c}{error\+\_\+t} \hyperlink{mqtt__sn__message_8c_aacced326a302af1eba6216ef91f2be22}{mqtt\+Sn\+Parse\+Ping\+Req} (const \hyperlink{structMqttSnMessage}{Mqtt\+Sn\+Message} $\ast$\hyperlink{pap_8h_a52f19d36a71e9b8ddea38fe00c291181}{message}, const \hyperlink{compiler__port_8h_a40bb5262bf908c328fbcfbe5d29d0201}{char\+\_\+t} $\ast$$\ast$\hyperlink{mqtt__sn__common_8h_aaaf873d7efb58d9ccdddc5c8569e092b}{client\+Id})
\begin{DoxyCompactList}\small\item\em Parse P\+I\+N\+G\+R\+EQ message. \end{DoxyCompactList}\item 
\hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689c}{error\+\_\+t} \hyperlink{mqtt__sn__message_8c_addce54c1d0961c275f8b8fb2be6ffdb1}{mqtt\+Sn\+Parse\+Ping\+Resp} (const \hyperlink{structMqttSnMessage}{Mqtt\+Sn\+Message} $\ast$\hyperlink{pap_8h_a52f19d36a71e9b8ddea38fe00c291181}{message})
\begin{DoxyCompactList}\small\item\em Parse P\+I\+N\+G\+R\+E\+SP message. \end{DoxyCompactList}\item 
\hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689c}{error\+\_\+t} \hyperlink{mqtt__sn__message_8c_a2f76ec7f356fe84020bef3693230f921}{mqtt\+Sn\+Parse\+Disconnect} (const \hyperlink{structMqttSnMessage}{Mqtt\+Sn\+Message} $\ast$\hyperlink{pap_8h_a52f19d36a71e9b8ddea38fe00c291181}{message}, \hyperlink{stdint_8h_a273cf69d639a59973b6019625df33e30}{uint16\+\_\+t} $\ast$\hyperlink{mqtt__sn__common_8h_a5b14ef3e3e30242faa9bbef961493044}{duration})
\begin{DoxyCompactList}\small\item\em Parse D\+I\+S\+C\+O\+N\+N\+E\+CT message. \end{DoxyCompactList}\item 
\hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689c}{error\+\_\+t} \hyperlink{mqtt__sn__message_8c_a7ab629d588fc1fa3271abe36fa971f15}{mqtt\+Sn\+Parse\+Will\+Topic\+Resp} (const \hyperlink{structMqttSnMessage}{Mqtt\+Sn\+Message} $\ast$\hyperlink{pap_8h_a52f19d36a71e9b8ddea38fe00c291181}{message}, \hyperlink{mqtt__sn__common_8h_aa8ae09a48836472262f42c1f09638e9c}{Mqtt\+Sn\+Return\+Code} $\ast$\hyperlink{mqtt__sn__common_8h_aa43af56bba229c3214623f0f0c23bf6e}{return\+Code})
\begin{DoxyCompactList}\small\item\em Parse W\+I\+L\+L\+T\+O\+P\+I\+C\+R\+E\+SP message. \end{DoxyCompactList}\item 
\hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689c}{error\+\_\+t} \hyperlink{mqtt__sn__message_8c_a3848f7a28c2d72cc2e2f16306f6dea67}{mqtt\+Sn\+Parse\+Will\+Msg\+Resp} (const \hyperlink{structMqttSnMessage}{Mqtt\+Sn\+Message} $\ast$\hyperlink{pap_8h_a52f19d36a71e9b8ddea38fe00c291181}{message}, \hyperlink{mqtt__sn__common_8h_aa8ae09a48836472262f42c1f09638e9c}{Mqtt\+Sn\+Return\+Code} $\ast$\hyperlink{mqtt__sn__common_8h_aa43af56bba229c3214623f0f0c23bf6e}{return\+Code})
\begin{DoxyCompactList}\small\item\em Parse W\+I\+L\+L\+M\+S\+G\+R\+E\+SP message. \end{DoxyCompactList}\end{DoxyCompactItemize}


\subsection{Detailed Description}
M\+Q\+T\+T-\/\+SN message formatting and parsing. 

\hypertarget{pic32mz__ef__curiosity_8h_License}{}\subsection{License}\label{pic32mz__ef__curiosity_8h_License}
S\+P\+D\+X-\/\+License-\/\+Identifier\+: G\+P\+L-\/2.\+0-\/or-\/later

Copyright (C) 2010-\/2019 Oryx Embedded S\+A\+RL. All rights reserved.

This file is part of Cyclone\+T\+CP Open.

This program is free software; you can redistribute it and/or modify it under the terms of the G\+NU General Public License as published by the Free Software Foundation; either version 2 of the License, or (at your option) any later version.

This program is distributed in the hope that it will be useful, but W\+I\+T\+H\+O\+UT A\+NY W\+A\+R\+R\+A\+N\+TY; without even the implied warranty of M\+E\+R\+C\+H\+A\+N\+T\+A\+B\+I\+L\+I\+TY or F\+I\+T\+N\+E\+SS F\+OR A P\+A\+R\+T\+I\+C\+U\+L\+AR P\+U\+R\+P\+O\+SE. See the G\+NU General Public License for more details.

You should have received a copy of the G\+NU General Public License along with this program; if not, write to the Free Software Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-\/1301, U\+SA.

\begin{DoxyAuthor}{Author}
Oryx Embedded S\+A\+RL (www.\+oryx-\/embedded.\+com) 
\end{DoxyAuthor}
\begin{DoxyVersion}{Version}
1.\+9.\+6 
\end{DoxyVersion}


\subsection{Macro Definition Documentation}
\mbox{\Hypertarget{mqtt__sn__message_8c_afcdf5e66fd927a7f4cc64295acd20407}\label{mqtt__sn__message_8c_afcdf5e66fd927a7f4cc64295acd20407}} 
\index{mqtt\+\_\+sn\+\_\+message.\+c@{mqtt\+\_\+sn\+\_\+message.\+c}!T\+R\+A\+C\+E\+\_\+\+L\+E\+V\+EL@{T\+R\+A\+C\+E\+\_\+\+L\+E\+V\+EL}}
\index{T\+R\+A\+C\+E\+\_\+\+L\+E\+V\+EL@{T\+R\+A\+C\+E\+\_\+\+L\+E\+V\+EL}!mqtt\+\_\+sn\+\_\+message.\+c@{mqtt\+\_\+sn\+\_\+message.\+c}}
\subsubsection{\texorpdfstring{T\+R\+A\+C\+E\+\_\+\+L\+E\+V\+EL}{TRACE\_LEVEL}}
{\footnotesize\ttfamily \#define T\+R\+A\+C\+E\+\_\+\+L\+E\+V\+EL~\hyperlink{net__config_8h_a84a94bc8e8c71e7717663296513ed1d9}{M\+Q\+T\+T\+\_\+\+S\+N\+\_\+\+T\+R\+A\+C\+E\+\_\+\+L\+E\+V\+EL}}



Definition at line 32 of file mqtt\+\_\+sn\+\_\+message.\+c.



\subsection{Function Documentation}
\mbox{\Hypertarget{mqtt__sn__message_8c_add73dbd84f885066c5a44bcdd0999941}\label{mqtt__sn__message_8c_add73dbd84f885066c5a44bcdd0999941}} 
\index{mqtt\+\_\+sn\+\_\+message.\+c@{mqtt\+\_\+sn\+\_\+message.\+c}!mqtt\+Sn\+Format\+Connect@{mqtt\+Sn\+Format\+Connect}}
\index{mqtt\+Sn\+Format\+Connect@{mqtt\+Sn\+Format\+Connect}!mqtt\+\_\+sn\+\_\+message.\+c@{mqtt\+\_\+sn\+\_\+message.\+c}}
\subsubsection{\texorpdfstring{mqtt\+Sn\+Format\+Connect()}{mqttSnFormatConnect()}}
{\footnotesize\ttfamily \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689c}{error\+\_\+t} mqtt\+Sn\+Format\+Connect (\begin{DoxyParamCaption}\item[{\hyperlink{structMqttSnMessage}{Mqtt\+Sn\+Message} $\ast$}]{message,  }\item[{\hyperlink{mqtt__sn__common_8h_adfa650f3c081a815eb81daa416bb94a0}{Mqtt\+Sn\+Flags}}]{flags,  }\item[{\hyperlink{stdint_8h_a273cf69d639a59973b6019625df33e30}{uint16\+\_\+t}}]{duration,  }\item[{const \hyperlink{compiler__port_8h_a40bb5262bf908c328fbcfbe5d29d0201}{char\+\_\+t} $\ast$}]{client\+Id }\end{DoxyParamCaption})}



Format C\+O\+N\+N\+E\+CT message. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em message} & Pointer to the M\+Q\+T\+T-\/\+SN message \\
\hline
\mbox{\tt in}  & {\em flags} & Flags \\
\hline
\mbox{\tt in}  & {\em duration} & Value of the keep-\/alive timer \\
\hline
\mbox{\tt in}  & {\em client\+Id} & Client identifier \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Error code 
\end{DoxyReturn}


Definition at line 145 of file mqtt\+\_\+sn\+\_\+message.\+c.


\begin{DoxyCode}
147 \{
148    \textcolor{keywordtype}{size\_t} \hyperlink{dtls__misc_8h_ab43ca82dd7fa2a0e56f941032ef324c4}{length};
149    \hyperlink{mqtt__sn__common_8h_a59640b7de387a464a7de30690fc0b1b3}{MqttSnConnect} *\hyperlink{bsd__socket_8c_a2deceb276f0a16d0dacf920964a4d7f2}{connect};
150 
151    \textcolor{comment}{//Point to the buffer where to format the message}
152    connect = (\hyperlink{mqtt__sn__common_8h_a59640b7de387a464a7de30690fc0b1b3}{MqttSnConnect} *) message->\hyperlink{structMqttSnMessage_a8e68c69d0e3ee59c0cc88aa146fe489a}{buffer};
153 
154    \textcolor{comment}{//Format CONNECT message}
155    connect->flags = \hyperlink{tcp_8h_aa2585d779da0ab21273a8d92de9a0ebe}{flags};
156    connect->protocolId = \hyperlink{mqtt__sn__common_8h_a0066dd4afeef507b2e8f5ac01f71ea37}{MQTT\_SN\_PROTOCOL\_ID};
157    connect->duration = \hyperlink{cpu__endian_8h_a800cdbf435a85a9b3ad4f0edc518472a}{htons}(\hyperlink{mqtt__sn__common_8h_a5b14ef3e3e30242faa9bbef961493044}{duration});
158 
159    \textcolor{comment}{//Copy client identifier}
160    strcpy(connect->clientId, \hyperlink{mqtt__sn__common_8h_aaaf873d7efb58d9ccdddc5c8569e092b}{clientId});
161 
162    \textcolor{comment}{//Compute the length of the message}
163    length = \textcolor{keyword}{sizeof}(\hyperlink{mqtt__sn__common_8h_a59640b7de387a464a7de30690fc0b1b3}{MqttSnConnect}) + strlen(\hyperlink{mqtt__sn__common_8h_aaaf873d7efb58d9ccdddc5c8569e092b}{clientId});
164 
165    \textcolor{comment}{//Format MQTT-SN message header}
166    \textcolor{keywordflow}{return} \hyperlink{mqtt__sn__message_8c_afdc609c5b5d1ecd4069983cf26ead095}{mqttSnFormatHeader}(message, \hyperlink{mqtt__sn__common_8h_a0b5ccdae8aa73dc7c74ae2dfe62fd112a4c979545570ab87837cd7cb54799f566}{MQTT\_SN\_MSG\_TYPE\_CONNECT}, 
      length);
167 \}
\end{DoxyCode}
\mbox{\Hypertarget{mqtt__sn__message_8c_a5901c6dbc3ebd94051d8e19f6a577a6a}\label{mqtt__sn__message_8c_a5901c6dbc3ebd94051d8e19f6a577a6a}} 
\index{mqtt\+\_\+sn\+\_\+message.\+c@{mqtt\+\_\+sn\+\_\+message.\+c}!mqtt\+Sn\+Format\+Disconnect@{mqtt\+Sn\+Format\+Disconnect}}
\index{mqtt\+Sn\+Format\+Disconnect@{mqtt\+Sn\+Format\+Disconnect}!mqtt\+\_\+sn\+\_\+message.\+c@{mqtt\+\_\+sn\+\_\+message.\+c}}
\subsubsection{\texorpdfstring{mqtt\+Sn\+Format\+Disconnect()}{mqttSnFormatDisconnect()}}
{\footnotesize\ttfamily \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689c}{error\+\_\+t} mqtt\+Sn\+Format\+Disconnect (\begin{DoxyParamCaption}\item[{\hyperlink{structMqttSnMessage}{Mqtt\+Sn\+Message} $\ast$}]{message,  }\item[{\hyperlink{stdint_8h_a273cf69d639a59973b6019625df33e30}{uint16\+\_\+t}}]{duration }\end{DoxyParamCaption})}



Format D\+I\+S\+C\+O\+N\+N\+E\+CT message. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em message} & Pointer to the M\+Q\+T\+T-\/\+SN message \\
\hline
\mbox{\tt in}  & {\em duration} & Value of the sleep timer \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Error code 
\end{DoxyReturn}


Definition at line 705 of file mqtt\+\_\+sn\+\_\+message.\+c.


\begin{DoxyCode}
707 \{
708    \textcolor{keywordtype}{size\_t} \hyperlink{dtls__misc_8h_ab43ca82dd7fa2a0e56f941032ef324c4}{length};
709    \hyperlink{mqtt__sn__common_8h_aeb1b6a36558807cf08ad4de6b1951607}{MqttSnDisconnect} *disconnect;
710 
711    \textcolor{comment}{//Point to the buffer where to format the message}
712    disconnect = (\hyperlink{mqtt__sn__common_8h_aeb1b6a36558807cf08ad4de6b1951607}{MqttSnDisconnect} *) message->\hyperlink{structMqttSnMessage_a8e68c69d0e3ee59c0cc88aa146fe489a}{buffer};
713 
714    \textcolor{comment}{//Check the value of the sleep timer}
715    \textcolor{keywordflow}{if}(\hyperlink{mqtt__sn__common_8h_a5b14ef3e3e30242faa9bbef961493044}{duration} != 0)
716    \{
717       \textcolor{comment}{//A DISCONNECT message with a Duration field is sent by a client when}
718       \textcolor{comment}{//it wants to go to the "asleep" state}
719       disconnect->duration = \hyperlink{cpu__endian_8h_a800cdbf435a85a9b3ad4f0edc518472a}{htons}(\hyperlink{mqtt__sn__common_8h_a5b14ef3e3e30242faa9bbef961493044}{duration});
720 
721       \textcolor{comment}{//Compute the length of the message}
722       length = \textcolor{keyword}{sizeof}(\hyperlink{mqtt__sn__common_8h_aeb1b6a36558807cf08ad4de6b1951607}{MqttSnDisconnect});
723    \}
724    \textcolor{keywordflow}{else}
725    \{
726       \textcolor{comment}{//A DISCONNECT message without a Duration field is sent by a client when}
727       \textcolor{comment}{//it wants to go to the "disconnected" state}
728       length = 0;
729    \}
730 
731    \textcolor{comment}{//Format MQTT-SN message header}
732    \textcolor{keywordflow}{return} \hyperlink{mqtt__sn__message_8c_afdc609c5b5d1ecd4069983cf26ead095}{mqttSnFormatHeader}(message, 
      \hyperlink{mqtt__sn__common_8h_a0b5ccdae8aa73dc7c74ae2dfe62fd112a1e564879cc7dd8cd6462507b52ae2508}{MQTT\_SN\_MSG\_TYPE\_DISCONNECT}, length);
733 \}
\end{DoxyCode}
\mbox{\Hypertarget{mqtt__sn__message_8c_afdc609c5b5d1ecd4069983cf26ead095}\label{mqtt__sn__message_8c_afdc609c5b5d1ecd4069983cf26ead095}} 
\index{mqtt\+\_\+sn\+\_\+message.\+c@{mqtt\+\_\+sn\+\_\+message.\+c}!mqtt\+Sn\+Format\+Header@{mqtt\+Sn\+Format\+Header}}
\index{mqtt\+Sn\+Format\+Header@{mqtt\+Sn\+Format\+Header}!mqtt\+\_\+sn\+\_\+message.\+c@{mqtt\+\_\+sn\+\_\+message.\+c}}
\subsubsection{\texorpdfstring{mqtt\+Sn\+Format\+Header()}{mqttSnFormatHeader()}}
{\footnotesize\ttfamily \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689c}{error\+\_\+t} mqtt\+Sn\+Format\+Header (\begin{DoxyParamCaption}\item[{\hyperlink{structMqttSnMessage}{Mqtt\+Sn\+Message} $\ast$}]{message,  }\item[{\hyperlink{mqtt__sn__common_8h_a0b5ccdae8aa73dc7c74ae2dfe62fd112}{Mqtt\+Sn\+Msg\+Type}}]{type,  }\item[{size\+\_\+t}]{length }\end{DoxyParamCaption})}



Format M\+Q\+T\+T-\/\+SN message header. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em message} & Pointer to the M\+Q\+T\+T-\/\+SN message \\
\hline
\mbox{\tt in}  & {\em type} & Message type \\
\hline
\mbox{\tt in}  & {\em length} & Length of the message, in bytes \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Error code 
\end{DoxyReturn}


Definition at line 52 of file mqtt\+\_\+sn\+\_\+message.\+c.


\begin{DoxyCode}
54 \{
55    \textcolor{comment}{//Check the length of the message}
56    \textcolor{keywordflow}{if}((\hyperlink{dtls__misc_8h_ab43ca82dd7fa2a0e56f941032ef324c4}{length} + \textcolor{keyword}{sizeof}(\hyperlink{mqtt__sn__common_8h_abd991bd8a7bca1ea05f6233ccf7c4f99}{MqttSnHeader})) < \hyperlink{stdint_8h_aeb4e270a084ee26fe73e799861bd0252}{UINT8\_MAX})
57    \{
58       \hyperlink{mqtt__sn__common_8h_abd991bd8a7bca1ea05f6233ccf7c4f99}{MqttSnHeader} *header;
59 
60       \textcolor{comment}{//Make room for the message header (2 bytes)}
61       memmove(message->\hyperlink{structMqttSnMessage_a8e68c69d0e3ee59c0cc88aa146fe489a}{buffer} + \textcolor{keyword}{sizeof}(\hyperlink{mqtt__sn__common_8h_abd991bd8a7bca1ea05f6233ccf7c4f99}{MqttSnHeader}), message->
      \hyperlink{structMqttSnMessage_a8e68c69d0e3ee59c0cc88aa146fe489a}{buffer},
62          \hyperlink{dtls__misc_8h_ab43ca82dd7fa2a0e56f941032ef324c4}{length});
63 
64       \textcolor{comment}{//The Length field specifies the total number of octets contained in}
65       \textcolor{comment}{//the message, including the Length field itself}
66       \hyperlink{dtls__misc_8h_ab43ca82dd7fa2a0e56f941032ef324c4}{length} += \textcolor{keyword}{sizeof}(\hyperlink{mqtt__sn__common_8h_abd991bd8a7bca1ea05f6233ccf7c4f99}{MqttSnHeader});
67 
68       \textcolor{comment}{//Point to the buffer where to format the message header}
69       header = (\hyperlink{mqtt__sn__common_8h_abd991bd8a7bca1ea05f6233ccf7c4f99}{MqttSnHeader} *) message->\hyperlink{structMqttSnMessage_a8e68c69d0e3ee59c0cc88aa146fe489a}{buffer};
70 
71       \textcolor{comment}{//The Length field is 1-octet long}
72       header->length = (\hyperlink{stdint_8h_aba7bc1797add20fe3efdf37ced1182c5}{uint8\_t}) \hyperlink{dtls__misc_8h_ab43ca82dd7fa2a0e56f941032ef324c4}{length};
73       \textcolor{comment}{//The MsgType specifies the message type}
74       header->msgType = \hyperlink{resource__manager_8h_a12e46a33bfe90638e58ef067c6fd4a6e}{type};
75    \}
76    \textcolor{keywordflow}{else}
77    \{
78       \hyperlink{mqtt__sn__common_8h_a9c31c4bf75b041aba098bb9aafcc5a91}{MqttSnExtHeader} *header;
79 
80       \textcolor{comment}{//Make room for the message header (4 bytes)}
81       memmove(message->\hyperlink{structMqttSnMessage_a8e68c69d0e3ee59c0cc88aa146fe489a}{buffer} + \textcolor{keyword}{sizeof}(\hyperlink{mqtt__sn__common_8h_a9c31c4bf75b041aba098bb9aafcc5a91}{MqttSnExtHeader}), message->
      \hyperlink{structMqttSnMessage_a8e68c69d0e3ee59c0cc88aa146fe489a}{buffer},
82          \hyperlink{dtls__misc_8h_ab43ca82dd7fa2a0e56f941032ef324c4}{length});
83 
84       \textcolor{comment}{//The Length field specifies the total number of octets contained in}
85       \textcolor{comment}{//the message, including the Length field itself}
86       \hyperlink{dtls__misc_8h_ab43ca82dd7fa2a0e56f941032ef324c4}{length} += \textcolor{keyword}{sizeof}(\hyperlink{mqtt__sn__common_8h_a9c31c4bf75b041aba098bb9aafcc5a91}{MqttSnExtHeader});
87 
88       \textcolor{comment}{//Point to the buffer where to format the message header}
89       header = (\hyperlink{mqtt__sn__common_8h_a9c31c4bf75b041aba098bb9aafcc5a91}{MqttSnExtHeader} *) message->\hyperlink{structMqttSnMessage_a8e68c69d0e3ee59c0cc88aa146fe489a}{buffer};
90 
91       \textcolor{comment}{//The Length field is 3-octet long}
92       header->prefix = 0x01;
93       header->length = \hyperlink{cpu__endian_8h_a800cdbf435a85a9b3ad4f0edc518472a}{htons}(\hyperlink{dtls__misc_8h_ab43ca82dd7fa2a0e56f941032ef324c4}{length});
94       \textcolor{comment}{//The MsgType specifies the message type}
95       header->msgType = \hyperlink{resource__manager_8h_a12e46a33bfe90638e58ef067c6fd4a6e}{type};
96    \}
97 
98    \textcolor{comment}{//Terminate the payload with a NULL character}
99    message->\hyperlink{structMqttSnMessage_a8e68c69d0e3ee59c0cc88aa146fe489a}{buffer}[\hyperlink{dtls__misc_8h_ab43ca82dd7fa2a0e56f941032ef324c4}{length}] = \textcolor{charliteral}{'\(\backslash\)0'};
100 
101    \textcolor{comment}{//Save the length of the message}
102    message->\hyperlink{structMqttSnMessage_a717fa07b0fe9c37cba433a2e913332d0}{length} = \hyperlink{dtls__misc_8h_ab43ca82dd7fa2a0e56f941032ef324c4}{length};
103 
104    \textcolor{comment}{//Successful processing}
105    \textcolor{keywordflow}{return} \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689cabf350750d0d4fabd8954c0f1e9bbae94}{NO\_ERROR};
106 \}
\end{DoxyCode}
\mbox{\Hypertarget{mqtt__sn__message_8c_a7674091b1cb49cb985ec453c22a9234b}\label{mqtt__sn__message_8c_a7674091b1cb49cb985ec453c22a9234b}} 
\index{mqtt\+\_\+sn\+\_\+message.\+c@{mqtt\+\_\+sn\+\_\+message.\+c}!mqtt\+Sn\+Format\+Ping\+Req@{mqtt\+Sn\+Format\+Ping\+Req}}
\index{mqtt\+Sn\+Format\+Ping\+Req@{mqtt\+Sn\+Format\+Ping\+Req}!mqtt\+\_\+sn\+\_\+message.\+c@{mqtt\+\_\+sn\+\_\+message.\+c}}
\subsubsection{\texorpdfstring{mqtt\+Sn\+Format\+Ping\+Req()}{mqttSnFormatPingReq()}}
{\footnotesize\ttfamily \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689c}{error\+\_\+t} mqtt\+Sn\+Format\+Ping\+Req (\begin{DoxyParamCaption}\item[{\hyperlink{structMqttSnMessage}{Mqtt\+Sn\+Message} $\ast$}]{message,  }\item[{const \hyperlink{compiler__port_8h_a40bb5262bf908c328fbcfbe5d29d0201}{char\+\_\+t} $\ast$}]{client\+Id }\end{DoxyParamCaption})}



Format P\+I\+N\+G\+R\+EQ message. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em message} & Pointer to the M\+Q\+T\+T-\/\+SN message \\
\hline
\mbox{\tt in}  & {\em client\+Id} & Client identifier \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Error code 
\end{DoxyReturn}


Definition at line 661 of file mqtt\+\_\+sn\+\_\+message.\+c.


\begin{DoxyCode}
662 \{
663    \textcolor{keywordtype}{size\_t} \hyperlink{dtls__misc_8h_ab43ca82dd7fa2a0e56f941032ef324c4}{length};
664    \hyperlink{mqtt__sn__common_8h_afa053f5b3021983c19b907391eb3f597}{MqttSnPingReq} *pingReq;
665 
666    \textcolor{comment}{//Point to the buffer where to format the message}
667    pingReq = (\hyperlink{mqtt__sn__common_8h_afa053f5b3021983c19b907391eb3f597}{MqttSnPingReq} *) message->\hyperlink{structMqttSnMessage_a8e68c69d0e3ee59c0cc88aa146fe489a}{buffer};
668 
669    \textcolor{comment}{//Copy client identifier}
670    strcpy(pingReq, \hyperlink{mqtt__sn__common_8h_aaaf873d7efb58d9ccdddc5c8569e092b}{clientId});
671 
672    \textcolor{comment}{//Compute the length of the message}
673    length = strlen(\hyperlink{mqtt__sn__common_8h_aaaf873d7efb58d9ccdddc5c8569e092b}{clientId});
674 
675    \textcolor{comment}{//Format MQTT-SN message header}
676    \textcolor{keywordflow}{return} \hyperlink{mqtt__sn__message_8c_afdc609c5b5d1ecd4069983cf26ead095}{mqttSnFormatHeader}(message, \hyperlink{mqtt__sn__common_8h_a0b5ccdae8aa73dc7c74ae2dfe62fd112a194c6e9f117a199acf63ea58f394d57d}{MQTT\_SN\_MSG\_TYPE\_PINGREQ}, 
      length);
677 \}
\end{DoxyCode}
\mbox{\Hypertarget{mqtt__sn__message_8c_a76cc5d0a6e928a10d3762b0a7942602e}\label{mqtt__sn__message_8c_a76cc5d0a6e928a10d3762b0a7942602e}} 
\index{mqtt\+\_\+sn\+\_\+message.\+c@{mqtt\+\_\+sn\+\_\+message.\+c}!mqtt\+Sn\+Format\+Ping\+Resp@{mqtt\+Sn\+Format\+Ping\+Resp}}
\index{mqtt\+Sn\+Format\+Ping\+Resp@{mqtt\+Sn\+Format\+Ping\+Resp}!mqtt\+\_\+sn\+\_\+message.\+c@{mqtt\+\_\+sn\+\_\+message.\+c}}
\subsubsection{\texorpdfstring{mqtt\+Sn\+Format\+Ping\+Resp()}{mqttSnFormatPingResp()}}
{\footnotesize\ttfamily \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689c}{error\+\_\+t} mqtt\+Sn\+Format\+Ping\+Resp (\begin{DoxyParamCaption}\item[{\hyperlink{structMqttSnMessage}{Mqtt\+Sn\+Message} $\ast$}]{message }\end{DoxyParamCaption})}



Format P\+I\+N\+G\+R\+E\+SP message. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em message} & Pointer to the M\+Q\+T\+T-\/\+SN message \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Error code 
\end{DoxyReturn}


Definition at line 686 of file mqtt\+\_\+sn\+\_\+message.\+c.


\begin{DoxyCode}
687 \{
688    \textcolor{keywordtype}{size\_t} \hyperlink{dtls__misc_8h_ab43ca82dd7fa2a0e56f941032ef324c4}{length};
689 
690    \textcolor{comment}{//The PINGRESP message has only a header and no variable part}
691    length = 0;
692 
693    \textcolor{comment}{//Format MQTT-SN message header}
694    \textcolor{keywordflow}{return} \hyperlink{mqtt__sn__message_8c_afdc609c5b5d1ecd4069983cf26ead095}{mqttSnFormatHeader}(message, 
      \hyperlink{mqtt__sn__common_8h_a0b5ccdae8aa73dc7c74ae2dfe62fd112a7b0b690c0417ac129942d2b7bcc4c033}{MQTT\_SN\_MSG\_TYPE\_PINGRESP}, length);
695 \}
\end{DoxyCode}
\mbox{\Hypertarget{mqtt__sn__message_8c_a3f4282b52e7e842a603d0fd746442b97}\label{mqtt__sn__message_8c_a3f4282b52e7e842a603d0fd746442b97}} 
\index{mqtt\+\_\+sn\+\_\+message.\+c@{mqtt\+\_\+sn\+\_\+message.\+c}!mqtt\+Sn\+Format\+Pub\+Ack@{mqtt\+Sn\+Format\+Pub\+Ack}}
\index{mqtt\+Sn\+Format\+Pub\+Ack@{mqtt\+Sn\+Format\+Pub\+Ack}!mqtt\+\_\+sn\+\_\+message.\+c@{mqtt\+\_\+sn\+\_\+message.\+c}}
\subsubsection{\texorpdfstring{mqtt\+Sn\+Format\+Pub\+Ack()}{mqttSnFormatPubAck()}}
{\footnotesize\ttfamily \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689c}{error\+\_\+t} mqtt\+Sn\+Format\+Pub\+Ack (\begin{DoxyParamCaption}\item[{\hyperlink{structMqttSnMessage}{Mqtt\+Sn\+Message} $\ast$}]{message,  }\item[{\hyperlink{stdint_8h_a273cf69d639a59973b6019625df33e30}{uint16\+\_\+t}}]{msg\+Id,  }\item[{\hyperlink{stdint_8h_a273cf69d639a59973b6019625df33e30}{uint16\+\_\+t}}]{topic\+Id,  }\item[{\hyperlink{mqtt__sn__common_8h_aa8ae09a48836472262f42c1f09638e9c}{Mqtt\+Sn\+Return\+Code}}]{return\+Code }\end{DoxyParamCaption})}



Format P\+U\+B\+A\+CK message. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em message} & Pointer to the M\+Q\+T\+T-\/\+SN message \\
\hline
\mbox{\tt in}  & {\em msg\+Id} & Message identifier of the corresponding P\+U\+B\+L\+I\+SH message \\
\hline
\mbox{\tt in}  & {\em topic\+Id} & Topic identifier \\
\hline
\mbox{\tt in}  & {\em return\+Code} & Return code \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Error code 
\end{DoxyReturn}


Definition at line 384 of file mqtt\+\_\+sn\+\_\+message.\+c.


\begin{DoxyCode}
386 \{
387    \textcolor{keywordtype}{size\_t} \hyperlink{dtls__misc_8h_ab43ca82dd7fa2a0e56f941032ef324c4}{length};
388    \hyperlink{mqtt__sn__common_8h_a9e0f71d4298b5e3f6b27fb6123bb1b65}{MqttSnPubAck} *pubAck;
389 
390    \textcolor{comment}{//Point to the buffer where to format the message}
391    pubAck = (\hyperlink{mqtt__sn__common_8h_a9e0f71d4298b5e3f6b27fb6123bb1b65}{MqttSnPubAck} *) message->\hyperlink{structMqttSnMessage_a8e68c69d0e3ee59c0cc88aa146fe489a}{buffer};
392 
393    \textcolor{comment}{//Format PUBACK message}
394    pubAck->topicId = \hyperlink{cpu__endian_8h_a800cdbf435a85a9b3ad4f0edc518472a}{htons}(\hyperlink{mqtt__sn__common_8h_a9f7eda5d21d45b5350db8cd0c451427a}{topicId});
395    pubAck->msgId = \hyperlink{cpu__endian_8h_a800cdbf435a85a9b3ad4f0edc518472a}{htons}(\hyperlink{mqtt__sn__common_8h_a2acf66d2c12f7b04f90ed704f5ac215c}{msgId});
396    pubAck->returnCode = \hyperlink{mqtt__sn__common_8h_aa43af56bba229c3214623f0f0c23bf6e}{returnCode};
397 
398    \textcolor{comment}{//Compute the length of the message}
399    length = \textcolor{keyword}{sizeof}(\hyperlink{mqtt__sn__common_8h_a9e0f71d4298b5e3f6b27fb6123bb1b65}{MqttSnPubAck});
400 
401    \textcolor{comment}{//Format MQTT-SN message header}
402    \textcolor{keywordflow}{return} \hyperlink{mqtt__sn__message_8c_afdc609c5b5d1ecd4069983cf26ead095}{mqttSnFormatHeader}(message, \hyperlink{mqtt__sn__common_8h_a0b5ccdae8aa73dc7c74ae2dfe62fd112a647bc2e2152d672947eb838eccbb233f}{MQTT\_SN\_MSG\_TYPE\_PUBACK}, 
      length);
403 \}
\end{DoxyCode}
\mbox{\Hypertarget{mqtt__sn__message_8c_aeef836fc77b3383e3bae77c1d5187df4}\label{mqtt__sn__message_8c_aeef836fc77b3383e3bae77c1d5187df4}} 
\index{mqtt\+\_\+sn\+\_\+message.\+c@{mqtt\+\_\+sn\+\_\+message.\+c}!mqtt\+Sn\+Format\+Pub\+Comp@{mqtt\+Sn\+Format\+Pub\+Comp}}
\index{mqtt\+Sn\+Format\+Pub\+Comp@{mqtt\+Sn\+Format\+Pub\+Comp}!mqtt\+\_\+sn\+\_\+message.\+c@{mqtt\+\_\+sn\+\_\+message.\+c}}
\subsubsection{\texorpdfstring{mqtt\+Sn\+Format\+Pub\+Comp()}{mqttSnFormatPubComp()}}
{\footnotesize\ttfamily \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689c}{error\+\_\+t} mqtt\+Sn\+Format\+Pub\+Comp (\begin{DoxyParamCaption}\item[{\hyperlink{structMqttSnMessage}{Mqtt\+Sn\+Message} $\ast$}]{message,  }\item[{\hyperlink{stdint_8h_a273cf69d639a59973b6019625df33e30}{uint16\+\_\+t}}]{msg\+Id }\end{DoxyParamCaption})}



Format P\+U\+B\+C\+O\+MP message. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em message} & Pointer to the M\+Q\+T\+T-\/\+SN message \\
\hline
\mbox{\tt in}  & {\em msg\+Id} & Message identifier of the corresponding P\+U\+B\+L\+I\+SH message \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Error code 
\end{DoxyReturn}


Definition at line 465 of file mqtt\+\_\+sn\+\_\+message.\+c.


\begin{DoxyCode}
466 \{
467    \textcolor{keywordtype}{size\_t} \hyperlink{dtls__misc_8h_ab43ca82dd7fa2a0e56f941032ef324c4}{length};
468    \hyperlink{mqtt__sn__common_8h_af4daf64b0094eaecedcb27fc475f64ac}{MqttSnPubComp} *pubComp;
469 
470    \textcolor{comment}{//Point to the buffer where to format the message}
471    pubComp = (\hyperlink{mqtt__sn__common_8h_af4daf64b0094eaecedcb27fc475f64ac}{MqttSnPubComp} *) message->\hyperlink{structMqttSnMessage_a8e68c69d0e3ee59c0cc88aa146fe489a}{buffer};
472 
473    \textcolor{comment}{//Format PUBCOMP message}
474    pubComp->msgId = \hyperlink{cpu__endian_8h_a800cdbf435a85a9b3ad4f0edc518472a}{htons}(\hyperlink{mqtt__sn__common_8h_a2acf66d2c12f7b04f90ed704f5ac215c}{msgId});
475 
476    \textcolor{comment}{//Compute the length of the message}
477    length = \textcolor{keyword}{sizeof}(\hyperlink{mqtt__sn__common_8h_af4daf64b0094eaecedcb27fc475f64ac}{MqttSnPubComp});
478 
479    \textcolor{comment}{//Format MQTT-SN message header}
480    \textcolor{keywordflow}{return} \hyperlink{mqtt__sn__message_8c_afdc609c5b5d1ecd4069983cf26ead095}{mqttSnFormatHeader}(message, \hyperlink{mqtt__sn__common_8h_a0b5ccdae8aa73dc7c74ae2dfe62fd112ab0101d318c3bdf33f9d0650e80330ec6}{MQTT\_SN\_MSG\_TYPE\_PUBCOMP}, 
      length);
481 \}
\end{DoxyCode}
\mbox{\Hypertarget{mqtt__sn__message_8c_a32dff3e1a905333815f26385d4d836ed}\label{mqtt__sn__message_8c_a32dff3e1a905333815f26385d4d836ed}} 
\index{mqtt\+\_\+sn\+\_\+message.\+c@{mqtt\+\_\+sn\+\_\+message.\+c}!mqtt\+Sn\+Format\+Publish@{mqtt\+Sn\+Format\+Publish}}
\index{mqtt\+Sn\+Format\+Publish@{mqtt\+Sn\+Format\+Publish}!mqtt\+\_\+sn\+\_\+message.\+c@{mqtt\+\_\+sn\+\_\+message.\+c}}
\subsubsection{\texorpdfstring{mqtt\+Sn\+Format\+Publish()}{mqttSnFormatPublish()}}
{\footnotesize\ttfamily \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689c}{error\+\_\+t} mqtt\+Sn\+Format\+Publish (\begin{DoxyParamCaption}\item[{\hyperlink{structMqttSnMessage}{Mqtt\+Sn\+Message} $\ast$}]{message,  }\item[{\hyperlink{mqtt__sn__common_8h_adfa650f3c081a815eb81daa416bb94a0}{Mqtt\+Sn\+Flags}}]{flags,  }\item[{\hyperlink{stdint_8h_a273cf69d639a59973b6019625df33e30}{uint16\+\_\+t}}]{msg\+Id,  }\item[{\hyperlink{stdint_8h_a273cf69d639a59973b6019625df33e30}{uint16\+\_\+t}}]{topic\+Id,  }\item[{const \hyperlink{compiler__port_8h_a40bb5262bf908c328fbcfbe5d29d0201}{char\+\_\+t} $\ast$}]{topic\+Name,  }\item[{const \hyperlink{stdint_8h_aba7bc1797add20fe3efdf37ced1182c5}{uint8\+\_\+t} $\ast$}]{data,  }\item[{size\+\_\+t}]{data\+Len }\end{DoxyParamCaption})}



Format P\+U\+B\+L\+I\+SH message. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em message} & Pointer to the M\+Q\+T\+T-\/\+SN message \\
\hline
\mbox{\tt in}  & {\em flags} & Flags \\
\hline
\mbox{\tt in}  & {\em msg\+Id} & Message identifier \\
\hline
\mbox{\tt in}  & {\em topic\+Id} & Topic identifier \\
\hline
\mbox{\tt in}  & {\em topic\+Name} & Short topic name \\
\hline
\mbox{\tt in}  & {\em data} & Message payload \\
\hline
\mbox{\tt in}  & {\em data\+Len} & Length of the message payload \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Error code 
\end{DoxyReturn}


Definition at line 310 of file mqtt\+\_\+sn\+\_\+message.\+c.


\begin{DoxyCode}
313 \{
314    \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689c}{error\_t} error;
315    \textcolor{keywordtype}{size\_t} \hyperlink{dtls__misc_8h_ab43ca82dd7fa2a0e56f941032ef324c4}{length};
316    \hyperlink{mqtt__sn__common_8h_a442e9de0c102ea796e4f48b1f7514717}{MqttSnPublish} *publish;
317 
318    \textcolor{comment}{//Initialize status code}
319    error = \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689cabf350750d0d4fabd8954c0f1e9bbae94}{NO\_ERROR};
320 
321    \textcolor{comment}{//Point to the buffer where to format the message}
322    publish = (\hyperlink{mqtt__sn__common_8h_a442e9de0c102ea796e4f48b1f7514717}{MqttSnPublish} *) message->\hyperlink{structMqttSnMessage_a8e68c69d0e3ee59c0cc88aa146fe489a}{buffer};
323 
324    \textcolor{comment}{//Format PUBLISH message}
325    publish->flags = \hyperlink{tcp_8h_aa2585d779da0ab21273a8d92de9a0ebe}{flags};
326    publish->msgId = \hyperlink{cpu__endian_8h_a800cdbf435a85a9b3ad4f0edc518472a}{htons}(\hyperlink{mqtt__sn__common_8h_a2acf66d2c12f7b04f90ed704f5ac215c}{msgId});
327 
328    \textcolor{comment}{//Check the type of topic identifier}
329    \textcolor{keywordflow}{if}(\hyperlink{tcp_8h_aa2585d779da0ab21273a8d92de9a0ebe}{flags}.topicIdType == \hyperlink{mqtt__sn__common_8h_a70807215f60d92d02503f2a5ed76ee96a041f445f341f6caa8749f3d627f481e5}{MQTT\_SN\_NORMAL\_TOPIC\_ID} ||
330       \hyperlink{tcp_8h_aa2585d779da0ab21273a8d92de9a0ebe}{flags}.topicIdType == \hyperlink{mqtt__sn__common_8h_a70807215f60d92d02503f2a5ed76ee96a6bade83ea3e30d700f58005473c2736b}{MQTT\_SN\_PREDEFINED\_TOPIC\_ID})
331    \{
332       \textcolor{comment}{//Copy normal or predefined topic ID}
333       publish->topicId = \hyperlink{cpu__endian_8h_a800cdbf435a85a9b3ad4f0edc518472a}{htons}(\hyperlink{mqtt__sn__common_8h_a9f7eda5d21d45b5350db8cd0c451427a}{topicId});
334    \}
335    \textcolor{keywordflow}{else} \textcolor{keywordflow}{if}(\hyperlink{tcp_8h_aa2585d779da0ab21273a8d92de9a0ebe}{flags}.topicIdType == \hyperlink{mqtt__sn__common_8h_a70807215f60d92d02503f2a5ed76ee96a558b98c894af8f1b6d373d93b5d17827}{MQTT\_SN\_SHORT\_TOPIC\_NAME})
336    \{
337       \textcolor{comment}{//Make sure the short topic name is valid}
338       \textcolor{keywordflow}{if}(\hyperlink{mqtt__sn__common_8h_a12172589bd20ef38ecbc6f4faf6ae3d0}{topicName} != \hyperlink{group__BSPDefine_ga070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL} && strlen(\hyperlink{mqtt__sn__common_8h_a12172589bd20ef38ecbc6f4faf6ae3d0}{topicName}) == 2)
339       \{
340          \textcolor{comment}{//Short topic names are topic names that have a fixed length of two}
341          \textcolor{comment}{//octets. They are short enough for being carried together with the}
342          \textcolor{comment}{//data within PUBLISH messages}
343          publish->topicId = \hyperlink{cpu__endian_8h_a800cdbf435a85a9b3ad4f0edc518472a}{htons}((\hyperlink{mqtt__sn__common_8h_a12172589bd20ef38ecbc6f4faf6ae3d0}{topicName}[0] << 8) | \hyperlink{mqtt__sn__common_8h_a12172589bd20ef38ecbc6f4faf6ae3d0}{topicName}[1]);
344       \}
345       \textcolor{keywordflow}{else}
346       \{
347          \textcolor{comment}{//Report an error}
348          error = \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689caeae4b12e06d727d085f75f79a820f2e8}{ERROR\_INVALID\_PARAMETER};
349       \}
350    \}
351    \textcolor{keywordflow}{else}
352    \{
353       \textcolor{comment}{//Report an error}
354       error = \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689caeae4b12e06d727d085f75f79a820f2e8}{ERROR\_INVALID\_PARAMETER};
355    \}
356 
357    \textcolor{comment}{//Check status code}
358    \textcolor{keywordflow}{if}(!error)
359    \{
360       \textcolor{comment}{//Copy message payload}
361       memcpy(publish->data, \hyperlink{dtls__misc_8h_a5c239a1bb87b52b0f1d6d68c4749cd2a}{data}, dataLen);
362 
363       \textcolor{comment}{//Compute the length of the message}
364       length = \textcolor{keyword}{sizeof}(\hyperlink{mqtt__sn__common_8h_a442e9de0c102ea796e4f48b1f7514717}{MqttSnPublish}) + dataLen;
365 
366       \textcolor{comment}{//Format MQTT-SN message header}
367       error = \hyperlink{mqtt__sn__message_8c_afdc609c5b5d1ecd4069983cf26ead095}{mqttSnFormatHeader}(message, 
      \hyperlink{mqtt__sn__common_8h_a0b5ccdae8aa73dc7c74ae2dfe62fd112a37c9bc96e12d4079199211d7aeda5398}{MQTT\_SN\_MSG\_TYPE\_PUBLISH}, length);
368    \}
369 
370    \textcolor{comment}{//Return status code}
371    \textcolor{keywordflow}{return} error;
372 \}
\end{DoxyCode}
\mbox{\Hypertarget{mqtt__sn__message_8c_a455e00eff2e9f5a38e4c4ccbb3499454}\label{mqtt__sn__message_8c_a455e00eff2e9f5a38e4c4ccbb3499454}} 
\index{mqtt\+\_\+sn\+\_\+message.\+c@{mqtt\+\_\+sn\+\_\+message.\+c}!mqtt\+Sn\+Format\+Pub\+Rec@{mqtt\+Sn\+Format\+Pub\+Rec}}
\index{mqtt\+Sn\+Format\+Pub\+Rec@{mqtt\+Sn\+Format\+Pub\+Rec}!mqtt\+\_\+sn\+\_\+message.\+c@{mqtt\+\_\+sn\+\_\+message.\+c}}
\subsubsection{\texorpdfstring{mqtt\+Sn\+Format\+Pub\+Rec()}{mqttSnFormatPubRec()}}
{\footnotesize\ttfamily \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689c}{error\+\_\+t} mqtt\+Sn\+Format\+Pub\+Rec (\begin{DoxyParamCaption}\item[{\hyperlink{structMqttSnMessage}{Mqtt\+Sn\+Message} $\ast$}]{message,  }\item[{\hyperlink{stdint_8h_a273cf69d639a59973b6019625df33e30}{uint16\+\_\+t}}]{msg\+Id }\end{DoxyParamCaption})}



Format P\+U\+B\+R\+EC message. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em message} & Pointer to the M\+Q\+T\+T-\/\+SN message \\
\hline
\mbox{\tt in}  & {\em msg\+Id} & Message identifier of the corresponding P\+U\+B\+L\+I\+SH message \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Error code 
\end{DoxyReturn}


Definition at line 413 of file mqtt\+\_\+sn\+\_\+message.\+c.


\begin{DoxyCode}
414 \{
415    \textcolor{keywordtype}{size\_t} \hyperlink{dtls__misc_8h_ab43ca82dd7fa2a0e56f941032ef324c4}{length};
416    \hyperlink{mqtt__sn__common_8h_a5fdc2cc0fab2d7d17b3b3d5ba1172a1b}{MqttSnPubRec} *pubRec;
417 
418    \textcolor{comment}{//Point to the buffer where to format the message}
419    pubRec = (\hyperlink{mqtt__sn__common_8h_a5fdc2cc0fab2d7d17b3b3d5ba1172a1b}{MqttSnPubRec} *) message->\hyperlink{structMqttSnMessage_a8e68c69d0e3ee59c0cc88aa146fe489a}{buffer};
420 
421    \textcolor{comment}{//Format PUBREC message}
422    pubRec->msgId = \hyperlink{cpu__endian_8h_a800cdbf435a85a9b3ad4f0edc518472a}{htons}(\hyperlink{mqtt__sn__common_8h_a2acf66d2c12f7b04f90ed704f5ac215c}{msgId});
423 
424    \textcolor{comment}{//Compute the length of the message}
425    length = \textcolor{keyword}{sizeof}(\hyperlink{mqtt__sn__common_8h_a5fdc2cc0fab2d7d17b3b3d5ba1172a1b}{MqttSnPubRec});
426 
427    \textcolor{comment}{//Format MQTT-SN message header}
428    \textcolor{keywordflow}{return} \hyperlink{mqtt__sn__message_8c_afdc609c5b5d1ecd4069983cf26ead095}{mqttSnFormatHeader}(message, \hyperlink{mqtt__sn__common_8h_a0b5ccdae8aa73dc7c74ae2dfe62fd112a92af8cf59403b5ad7e68c136d5af9ce9}{MQTT\_SN\_MSG\_TYPE\_PUBREC}, 
      length);
429 \}
\end{DoxyCode}
\mbox{\Hypertarget{mqtt__sn__message_8c_a7d74e9bdcc884be6a283ec162c410a65}\label{mqtt__sn__message_8c_a7d74e9bdcc884be6a283ec162c410a65}} 
\index{mqtt\+\_\+sn\+\_\+message.\+c@{mqtt\+\_\+sn\+\_\+message.\+c}!mqtt\+Sn\+Format\+Pub\+Rel@{mqtt\+Sn\+Format\+Pub\+Rel}}
\index{mqtt\+Sn\+Format\+Pub\+Rel@{mqtt\+Sn\+Format\+Pub\+Rel}!mqtt\+\_\+sn\+\_\+message.\+c@{mqtt\+\_\+sn\+\_\+message.\+c}}
\subsubsection{\texorpdfstring{mqtt\+Sn\+Format\+Pub\+Rel()}{mqttSnFormatPubRel()}}
{\footnotesize\ttfamily \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689c}{error\+\_\+t} mqtt\+Sn\+Format\+Pub\+Rel (\begin{DoxyParamCaption}\item[{\hyperlink{structMqttSnMessage}{Mqtt\+Sn\+Message} $\ast$}]{message,  }\item[{\hyperlink{stdint_8h_a273cf69d639a59973b6019625df33e30}{uint16\+\_\+t}}]{msg\+Id }\end{DoxyParamCaption})}



Format P\+U\+B\+R\+EL message. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em message} & Pointer to the M\+Q\+T\+T-\/\+SN message \\
\hline
\mbox{\tt in}  & {\em msg\+Id} & Message identifier of the corresponding P\+U\+B\+L\+I\+SH message \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Error code 
\end{DoxyReturn}


Definition at line 439 of file mqtt\+\_\+sn\+\_\+message.\+c.


\begin{DoxyCode}
440 \{
441    \textcolor{keywordtype}{size\_t} \hyperlink{dtls__misc_8h_ab43ca82dd7fa2a0e56f941032ef324c4}{length};
442    \hyperlink{mqtt__sn__common_8h_a065d4043057726789f3c0302ccddfea0}{MqttSnPubRel} *pubRel;
443 
444    \textcolor{comment}{//Point to the buffer where to format the message}
445    pubRel = (\hyperlink{mqtt__sn__common_8h_a065d4043057726789f3c0302ccddfea0}{MqttSnPubRel} *) message->\hyperlink{structMqttSnMessage_a8e68c69d0e3ee59c0cc88aa146fe489a}{buffer};
446 
447    \textcolor{comment}{//Format PUBREL message}
448    pubRel->msgId = \hyperlink{cpu__endian_8h_a800cdbf435a85a9b3ad4f0edc518472a}{htons}(\hyperlink{mqtt__sn__common_8h_a2acf66d2c12f7b04f90ed704f5ac215c}{msgId});
449 
450    \textcolor{comment}{//Compute the length of the message}
451    length = \textcolor{keyword}{sizeof}(\hyperlink{mqtt__sn__common_8h_a065d4043057726789f3c0302ccddfea0}{MqttSnPubRel});
452 
453    \textcolor{comment}{//Format MQTT-SN message header}
454    \textcolor{keywordflow}{return} \hyperlink{mqtt__sn__message_8c_afdc609c5b5d1ecd4069983cf26ead095}{mqttSnFormatHeader}(message, \hyperlink{mqtt__sn__common_8h_a0b5ccdae8aa73dc7c74ae2dfe62fd112ac8a07a546f23a523b469944a26de0ab1}{MQTT\_SN\_MSG\_TYPE\_PUBREL}, 
      length);
455 \}
\end{DoxyCode}
\mbox{\Hypertarget{mqtt__sn__message_8c_a1cf0fbc06c248c08d060d453f2182936}\label{mqtt__sn__message_8c_a1cf0fbc06c248c08d060d453f2182936}} 
\index{mqtt\+\_\+sn\+\_\+message.\+c@{mqtt\+\_\+sn\+\_\+message.\+c}!mqtt\+Sn\+Format\+Reg\+Ack@{mqtt\+Sn\+Format\+Reg\+Ack}}
\index{mqtt\+Sn\+Format\+Reg\+Ack@{mqtt\+Sn\+Format\+Reg\+Ack}!mqtt\+\_\+sn\+\_\+message.\+c@{mqtt\+\_\+sn\+\_\+message.\+c}}
\subsubsection{\texorpdfstring{mqtt\+Sn\+Format\+Reg\+Ack()}{mqttSnFormatRegAck()}}
{\footnotesize\ttfamily \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689c}{error\+\_\+t} mqtt\+Sn\+Format\+Reg\+Ack (\begin{DoxyParamCaption}\item[{\hyperlink{structMqttSnMessage}{Mqtt\+Sn\+Message} $\ast$}]{message,  }\item[{\hyperlink{stdint_8h_a273cf69d639a59973b6019625df33e30}{uint16\+\_\+t}}]{msg\+Id,  }\item[{\hyperlink{stdint_8h_a273cf69d639a59973b6019625df33e30}{uint16\+\_\+t}}]{topic\+Id,  }\item[{\hyperlink{mqtt__sn__common_8h_aa8ae09a48836472262f42c1f09638e9c}{Mqtt\+Sn\+Return\+Code}}]{return\+Code }\end{DoxyParamCaption})}



Format R\+E\+G\+A\+CK message. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em message} & Pointer to the M\+Q\+T\+T-\/\+SN message \\
\hline
\mbox{\tt in}  & {\em msg\+Id} & Message identifier \\
\hline
\mbox{\tt in}  & {\em topic\+Id} & Topic identifier \\
\hline
\mbox{\tt in}  & {\em return\+Code} & Return code \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Error code 
\end{DoxyReturn}


Definition at line 276 of file mqtt\+\_\+sn\+\_\+message.\+c.


\begin{DoxyCode}
278 \{
279    \textcolor{keywordtype}{size\_t} \hyperlink{dtls__misc_8h_ab43ca82dd7fa2a0e56f941032ef324c4}{length};
280    \hyperlink{mqtt__sn__common_8h_ae8f622646c6ccaaa17eb36982b51bc36}{MqttSnRegAck} *regAck;
281 
282    \textcolor{comment}{//Point to the buffer where to format the message}
283    regAck = (\hyperlink{mqtt__sn__common_8h_ae8f622646c6ccaaa17eb36982b51bc36}{MqttSnRegAck} *) message->\hyperlink{structMqttSnMessage_a8e68c69d0e3ee59c0cc88aa146fe489a}{buffer};
284 
285    \textcolor{comment}{//Format REGACK message}
286    regAck->topicId = \hyperlink{cpu__endian_8h_a800cdbf435a85a9b3ad4f0edc518472a}{htons}(\hyperlink{mqtt__sn__common_8h_a9f7eda5d21d45b5350db8cd0c451427a}{topicId});
287    regAck->msgId = \hyperlink{cpu__endian_8h_a800cdbf435a85a9b3ad4f0edc518472a}{htons}(\hyperlink{mqtt__sn__common_8h_a2acf66d2c12f7b04f90ed704f5ac215c}{msgId});
288    regAck->returnCode = \hyperlink{mqtt__sn__common_8h_aa43af56bba229c3214623f0f0c23bf6e}{returnCode};
289 
290    \textcolor{comment}{//Compute the length of the message}
291    length = \textcolor{keyword}{sizeof}(\hyperlink{mqtt__sn__common_8h_ae8f622646c6ccaaa17eb36982b51bc36}{MqttSnRegAck});
292 
293    \textcolor{comment}{//Format MQTT-SN message header}
294    \textcolor{keywordflow}{return} \hyperlink{mqtt__sn__message_8c_afdc609c5b5d1ecd4069983cf26ead095}{mqttSnFormatHeader}(message, \hyperlink{mqtt__sn__common_8h_a0b5ccdae8aa73dc7c74ae2dfe62fd112adba83eda8e1643116d68daffce9c9923}{MQTT\_SN\_MSG\_TYPE\_REGACK}, 
      length);
295 \}
\end{DoxyCode}
\mbox{\Hypertarget{mqtt__sn__message_8c_a84b352f0fd3dd17c3a7a338879caff6c}\label{mqtt__sn__message_8c_a84b352f0fd3dd17c3a7a338879caff6c}} 
\index{mqtt\+\_\+sn\+\_\+message.\+c@{mqtt\+\_\+sn\+\_\+message.\+c}!mqtt\+Sn\+Format\+Register@{mqtt\+Sn\+Format\+Register}}
\index{mqtt\+Sn\+Format\+Register@{mqtt\+Sn\+Format\+Register}!mqtt\+\_\+sn\+\_\+message.\+c@{mqtt\+\_\+sn\+\_\+message.\+c}}
\subsubsection{\texorpdfstring{mqtt\+Sn\+Format\+Register()}{mqttSnFormatRegister()}}
{\footnotesize\ttfamily \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689c}{error\+\_\+t} mqtt\+Sn\+Format\+Register (\begin{DoxyParamCaption}\item[{\hyperlink{structMqttSnMessage}{Mqtt\+Sn\+Message} $\ast$}]{message,  }\item[{\hyperlink{stdint_8h_a273cf69d639a59973b6019625df33e30}{uint16\+\_\+t}}]{msg\+Id,  }\item[{\hyperlink{stdint_8h_a273cf69d639a59973b6019625df33e30}{uint16\+\_\+t}}]{topic\+Id,  }\item[{const \hyperlink{compiler__port_8h_a40bb5262bf908c328fbcfbe5d29d0201}{char\+\_\+t} $\ast$}]{topic\+Name }\end{DoxyParamCaption})}



Format R\+E\+G\+I\+S\+T\+ER message. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em message} & Pointer to the M\+Q\+T\+T-\/\+SN message \\
\hline
\mbox{\tt in}  & {\em msg\+Id} & Message identifier \\
\hline
\mbox{\tt in}  & {\em topic\+Id} & Topic identifier \\
\hline
\mbox{\tt in}  & {\em topic\+Name} & Topic name \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Error code 
\end{DoxyReturn}


Definition at line 243 of file mqtt\+\_\+sn\+\_\+message.\+c.


\begin{DoxyCode}
245 \{
246    \textcolor{keywordtype}{size\_t} \hyperlink{dtls__misc_8h_ab43ca82dd7fa2a0e56f941032ef324c4}{length};
247    \hyperlink{mqtt__sn__common_8h_a9a4400fa819bc32d8ab268f5da633319}{MqttSnRegister} *reg;
248 
249    \textcolor{comment}{//Point to the buffer where to format the message}
250    reg = (\hyperlink{mqtt__sn__common_8h_a9a4400fa819bc32d8ab268f5da633319}{MqttSnRegister} *) message->\hyperlink{structMqttSnMessage_a8e68c69d0e3ee59c0cc88aa146fe489a}{buffer};
251 
252    \textcolor{comment}{//Format REGISTER message}
253    reg->topicId = \hyperlink{cpu__endian_8h_a800cdbf435a85a9b3ad4f0edc518472a}{htons}(\hyperlink{mqtt__sn__common_8h_a9f7eda5d21d45b5350db8cd0c451427a}{topicId});
254    reg->msgId = \hyperlink{cpu__endian_8h_a800cdbf435a85a9b3ad4f0edc518472a}{htons}(\hyperlink{mqtt__sn__common_8h_a2acf66d2c12f7b04f90ed704f5ac215c}{msgId});
255 
256    \textcolor{comment}{//Copy topic name}
257    strcpy(reg->topicName, \hyperlink{mqtt__sn__common_8h_a12172589bd20ef38ecbc6f4faf6ae3d0}{topicName});
258 
259    \textcolor{comment}{//Compute the length of the message}
260    length = \textcolor{keyword}{sizeof}(\hyperlink{mqtt__sn__common_8h_a9a4400fa819bc32d8ab268f5da633319}{MqttSnRegister}) + strlen(\hyperlink{mqtt__sn__common_8h_a12172589bd20ef38ecbc6f4faf6ae3d0}{topicName});
261 
262    \textcolor{comment}{//Format MQTT-SN message header}
263    \textcolor{keywordflow}{return} \hyperlink{mqtt__sn__message_8c_afdc609c5b5d1ecd4069983cf26ead095}{mqttSnFormatHeader}(message, 
      \hyperlink{mqtt__sn__common_8h_a0b5ccdae8aa73dc7c74ae2dfe62fd112a74d8f28e6bd857bad8753800d962b118}{MQTT\_SN\_MSG\_TYPE\_REGISTER}, length);
264 \}
\end{DoxyCode}
\mbox{\Hypertarget{mqtt__sn__message_8c_a6f13a37e2ec64beaad7cb00a3affcc94}\label{mqtt__sn__message_8c_a6f13a37e2ec64beaad7cb00a3affcc94}} 
\index{mqtt\+\_\+sn\+\_\+message.\+c@{mqtt\+\_\+sn\+\_\+message.\+c}!mqtt\+Sn\+Format\+Search\+Gw@{mqtt\+Sn\+Format\+Search\+Gw}}
\index{mqtt\+Sn\+Format\+Search\+Gw@{mqtt\+Sn\+Format\+Search\+Gw}!mqtt\+\_\+sn\+\_\+message.\+c@{mqtt\+\_\+sn\+\_\+message.\+c}}
\subsubsection{\texorpdfstring{mqtt\+Sn\+Format\+Search\+Gw()}{mqttSnFormatSearchGw()}}
{\footnotesize\ttfamily \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689c}{error\+\_\+t} mqtt\+Sn\+Format\+Search\+Gw (\begin{DoxyParamCaption}\item[{\hyperlink{structMqttSnMessage}{Mqtt\+Sn\+Message} $\ast$}]{message,  }\item[{\hyperlink{stdint_8h_aba7bc1797add20fe3efdf37ced1182c5}{uint8\+\_\+t}}]{radius }\end{DoxyParamCaption})}



Format S\+E\+A\+R\+C\+H\+GW message. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em message} & Pointer to the M\+Q\+T\+T-\/\+SN message \\
\hline
\mbox{\tt in}  & {\em radius} & Broadcast radius of S\+E\+A\+R\+C\+H\+GW message \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Error code 
\end{DoxyReturn}


Definition at line 116 of file mqtt\+\_\+sn\+\_\+message.\+c.


\begin{DoxyCode}
118 \{
119    \textcolor{keywordtype}{size\_t} \hyperlink{dtls__misc_8h_ab43ca82dd7fa2a0e56f941032ef324c4}{length};
120    \hyperlink{mqtt__sn__common_8h_a7d9225a88cf3c4d211f9fdc7e3051339}{MqttSnSearchGw} *searchGw;
121 
122    \textcolor{comment}{//Point to the buffer where to format the message}
123    searchGw = (\hyperlink{mqtt__sn__common_8h_a7d9225a88cf3c4d211f9fdc7e3051339}{MqttSnSearchGw} *) message->\hyperlink{structMqttSnMessage_a8e68c69d0e3ee59c0cc88aa146fe489a}{buffer};
124 
125    \textcolor{comment}{//Format SEARCHGW message}
126    searchGw->radius = 0;
127 
128    \textcolor{comment}{//Compute the length of the message}
129    length = \textcolor{keyword}{sizeof}(\hyperlink{mqtt__sn__common_8h_a7d9225a88cf3c4d211f9fdc7e3051339}{MqttSnSearchGw});
130 
131    \textcolor{comment}{//Format MQTT-SN message header}
132    \textcolor{keywordflow}{return} \hyperlink{mqtt__sn__message_8c_afdc609c5b5d1ecd4069983cf26ead095}{mqttSnFormatHeader}(message, 
      \hyperlink{mqtt__sn__common_8h_a0b5ccdae8aa73dc7c74ae2dfe62fd112afda5067590b294075b17308848739cb7}{MQTT\_SN\_MSG\_TYPE\_SEARCHGW}, length);
133 \}
\end{DoxyCode}
\mbox{\Hypertarget{mqtt__sn__message_8c_ae5fbfb688fcaa04ca27920f3ccbca3a0}\label{mqtt__sn__message_8c_ae5fbfb688fcaa04ca27920f3ccbca3a0}} 
\index{mqtt\+\_\+sn\+\_\+message.\+c@{mqtt\+\_\+sn\+\_\+message.\+c}!mqtt\+Sn\+Format\+Subscribe@{mqtt\+Sn\+Format\+Subscribe}}
\index{mqtt\+Sn\+Format\+Subscribe@{mqtt\+Sn\+Format\+Subscribe}!mqtt\+\_\+sn\+\_\+message.\+c@{mqtt\+\_\+sn\+\_\+message.\+c}}
\subsubsection{\texorpdfstring{mqtt\+Sn\+Format\+Subscribe()}{mqttSnFormatSubscribe()}}
{\footnotesize\ttfamily \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689c}{error\+\_\+t} mqtt\+Sn\+Format\+Subscribe (\begin{DoxyParamCaption}\item[{\hyperlink{structMqttSnMessage}{Mqtt\+Sn\+Message} $\ast$}]{message,  }\item[{\hyperlink{mqtt__sn__common_8h_adfa650f3c081a815eb81daa416bb94a0}{Mqtt\+Sn\+Flags}}]{flags,  }\item[{\hyperlink{stdint_8h_a273cf69d639a59973b6019625df33e30}{uint16\+\_\+t}}]{msg\+Id,  }\item[{\hyperlink{stdint_8h_a273cf69d639a59973b6019625df33e30}{uint16\+\_\+t}}]{topic\+Id,  }\item[{const \hyperlink{compiler__port_8h_a40bb5262bf908c328fbcfbe5d29d0201}{char\+\_\+t} $\ast$}]{topic\+Name }\end{DoxyParamCaption})}



Format S\+U\+B\+S\+C\+R\+I\+BE message. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em message} & Pointer to the M\+Q\+T\+T-\/\+SN message \\
\hline
\mbox{\tt in}  & {\em flags} & Flags \\
\hline
\mbox{\tt in}  & {\em msg\+Id} & Message identifier \\
\hline
\mbox{\tt in}  & {\em topic\+Id} & Topic identifier \\
\hline
\mbox{\tt in}  & {\em topic\+Name} & Topic name \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Error code 
\end{DoxyReturn}


Definition at line 494 of file mqtt\+\_\+sn\+\_\+message.\+c.


\begin{DoxyCode}
496 \{
497    \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689c}{error\_t} error;
498    \textcolor{keywordtype}{size\_t} \hyperlink{dtls__misc_8h_ab43ca82dd7fa2a0e56f941032ef324c4}{length};
499    \hyperlink{mqtt__sn__common_8h_a72177ad7995f1974541e402bef5325ad}{MqttSnSubscribe} *subscribe;
500 
501    \textcolor{comment}{//Initialize status code}
502    error = \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689cabf350750d0d4fabd8954c0f1e9bbae94}{NO\_ERROR};
503 
504    \textcolor{comment}{//Point to the buffer where to format the message}
505    subscribe = (\hyperlink{mqtt__sn__common_8h_a72177ad7995f1974541e402bef5325ad}{MqttSnSubscribe} *) message->\hyperlink{structMqttSnMessage_a8e68c69d0e3ee59c0cc88aa146fe489a}{buffer};
506 
507    \textcolor{comment}{//Format SUBSCRIBE message}
508    subscribe->flags = \hyperlink{tcp_8h_aa2585d779da0ab21273a8d92de9a0ebe}{flags};
509    subscribe->msgId = \hyperlink{cpu__endian_8h_a800cdbf435a85a9b3ad4f0edc518472a}{htons}(\hyperlink{mqtt__sn__common_8h_a2acf66d2c12f7b04f90ed704f5ac215c}{msgId});
510 
511    \textcolor{comment}{//Check the type of topic identifier}
512    \textcolor{keywordflow}{if}(\hyperlink{tcp_8h_aa2585d779da0ab21273a8d92de9a0ebe}{flags}.topicIdType == \hyperlink{mqtt__sn__common_8h_a70807215f60d92d02503f2a5ed76ee96a9002d75bcc419fb9550c7950570b70b6}{MQTT\_SN\_NORMAL\_TOPIC\_NAME})
513    \{
514       \textcolor{comment}{//Make sure the topic name is valid}
515       \textcolor{keywordflow}{if}(\hyperlink{mqtt__sn__common_8h_a12172589bd20ef38ecbc6f4faf6ae3d0}{topicName} != \hyperlink{group__BSPDefine_ga070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL})
516       \{
517          \textcolor{comment}{//Copy topic name}
518          strcpy(subscribe->topicName, \hyperlink{mqtt__sn__common_8h_a12172589bd20ef38ecbc6f4faf6ae3d0}{topicName});
519          \textcolor{comment}{//Compute the length of the message}
520          length = \textcolor{keyword}{sizeof}(\hyperlink{mqtt__sn__common_8h_a72177ad7995f1974541e402bef5325ad}{MqttSnSubscribe}) + strlen(\hyperlink{mqtt__sn__common_8h_a12172589bd20ef38ecbc6f4faf6ae3d0}{topicName});
521       \}
522       \textcolor{keywordflow}{else}
523       \{
524          \textcolor{comment}{//Report an error}
525          error = \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689caeae4b12e06d727d085f75f79a820f2e8}{ERROR\_INVALID\_PARAMETER};
526       \}
527    \}
528    \textcolor{keywordflow}{else} \textcolor{keywordflow}{if}(\hyperlink{tcp_8h_aa2585d779da0ab21273a8d92de9a0ebe}{flags}.topicIdType == \hyperlink{mqtt__sn__common_8h_a70807215f60d92d02503f2a5ed76ee96a558b98c894af8f1b6d373d93b5d17827}{MQTT\_SN\_SHORT\_TOPIC\_NAME})
529    \{
530       \textcolor{comment}{//Make sure the short topic name is valid}
531       \textcolor{keywordflow}{if}(\hyperlink{mqtt__sn__common_8h_a12172589bd20ef38ecbc6f4faf6ae3d0}{topicName} != \hyperlink{group__BSPDefine_ga070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL} && strlen(\hyperlink{mqtt__sn__common_8h_a12172589bd20ef38ecbc6f4faf6ae3d0}{topicName}) == 2)
532       \{
533          \textcolor{comment}{//Copy topic name}
534          strcpy(subscribe->topicName, \hyperlink{mqtt__sn__common_8h_a12172589bd20ef38ecbc6f4faf6ae3d0}{topicName});
535          \textcolor{comment}{//Compute the length of the message}
536          length = \textcolor{keyword}{sizeof}(\hyperlink{mqtt__sn__common_8h_a72177ad7995f1974541e402bef5325ad}{MqttSnSubscribe}) + strlen(\hyperlink{mqtt__sn__common_8h_a12172589bd20ef38ecbc6f4faf6ae3d0}{topicName});
537       \}
538       \textcolor{keywordflow}{else}
539       \{
540          \textcolor{comment}{//Report an error}
541          error = \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689caeae4b12e06d727d085f75f79a820f2e8}{ERROR\_INVALID\_PARAMETER};
542       \}
543    \}
544    \textcolor{keywordflow}{else} \textcolor{keywordflow}{if}(\hyperlink{tcp_8h_aa2585d779da0ab21273a8d92de9a0ebe}{flags}.topicIdType == \hyperlink{mqtt__sn__common_8h_a70807215f60d92d02503f2a5ed76ee96a6bade83ea3e30d700f58005473c2736b}{MQTT\_SN\_PREDEFINED\_TOPIC\_ID})
545    \{
546       \textcolor{comment}{//Copy predefined topic ID}
547       \hyperlink{cpu__endian_8h_a8e657bcdf3842380d2d0006859029240}{STORE16BE}(\hyperlink{mqtt__sn__common_8h_a9f7eda5d21d45b5350db8cd0c451427a}{topicId}, subscribe->topicName);
548       \textcolor{comment}{//Compute the length of the message}
549       length = \textcolor{keyword}{sizeof}(\hyperlink{mqtt__sn__common_8h_a72177ad7995f1974541e402bef5325ad}{MqttSnSubscribe}) + \textcolor{keyword}{sizeof}(\hyperlink{stdint_8h_a273cf69d639a59973b6019625df33e30}{uint16\_t});
550    \}
551    \textcolor{keywordflow}{else}
552    \{
553       \textcolor{comment}{//Report an error}
554       error = \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689caeae4b12e06d727d085f75f79a820f2e8}{ERROR\_INVALID\_PARAMETER};
555    \}
556 
557    \textcolor{comment}{//Check status code}
558    \textcolor{keywordflow}{if}(!error)
559    \{
560       \textcolor{comment}{//Format MQTT-SN message header}
561       error = \hyperlink{mqtt__sn__message_8c_afdc609c5b5d1ecd4069983cf26ead095}{mqttSnFormatHeader}(message, 
      \hyperlink{mqtt__sn__common_8h_a0b5ccdae8aa73dc7c74ae2dfe62fd112a5db574cf1af95868dc449fea0076923f}{MQTT\_SN\_MSG\_TYPE\_SUBSCRIBE}, length);
562    \}
563 
564    \textcolor{comment}{//Return status code}
565    \textcolor{keywordflow}{return} error;
566 \}
\end{DoxyCode}
\mbox{\Hypertarget{mqtt__sn__message_8c_a7955be3ceadffc43478ea5c037446ae4}\label{mqtt__sn__message_8c_a7955be3ceadffc43478ea5c037446ae4}} 
\index{mqtt\+\_\+sn\+\_\+message.\+c@{mqtt\+\_\+sn\+\_\+message.\+c}!mqtt\+Sn\+Format\+Unsubscribe@{mqtt\+Sn\+Format\+Unsubscribe}}
\index{mqtt\+Sn\+Format\+Unsubscribe@{mqtt\+Sn\+Format\+Unsubscribe}!mqtt\+\_\+sn\+\_\+message.\+c@{mqtt\+\_\+sn\+\_\+message.\+c}}
\subsubsection{\texorpdfstring{mqtt\+Sn\+Format\+Unsubscribe()}{mqttSnFormatUnsubscribe()}}
{\footnotesize\ttfamily \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689c}{error\+\_\+t} mqtt\+Sn\+Format\+Unsubscribe (\begin{DoxyParamCaption}\item[{\hyperlink{structMqttSnMessage}{Mqtt\+Sn\+Message} $\ast$}]{message,  }\item[{\hyperlink{mqtt__sn__common_8h_adfa650f3c081a815eb81daa416bb94a0}{Mqtt\+Sn\+Flags}}]{flags,  }\item[{\hyperlink{stdint_8h_a273cf69d639a59973b6019625df33e30}{uint16\+\_\+t}}]{msg\+Id,  }\item[{\hyperlink{stdint_8h_a273cf69d639a59973b6019625df33e30}{uint16\+\_\+t}}]{topic\+Id,  }\item[{const \hyperlink{compiler__port_8h_a40bb5262bf908c328fbcfbe5d29d0201}{char\+\_\+t} $\ast$}]{topic\+Name }\end{DoxyParamCaption})}



Format U\+N\+S\+U\+B\+S\+C\+R\+I\+BE message. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em message} & Pointer to the M\+Q\+T\+T-\/\+SN message \\
\hline
\mbox{\tt in}  & {\em flags} & Flags \\
\hline
\mbox{\tt in}  & {\em msg\+Id} & Message identifier \\
\hline
\mbox{\tt in}  & {\em topic\+Id} & Topic identifier \\
\hline
\mbox{\tt in}  & {\em topic\+Name} & Topic name \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Error code 
\end{DoxyReturn}


Definition at line 579 of file mqtt\+\_\+sn\+\_\+message.\+c.


\begin{DoxyCode}
581 \{
582    \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689c}{error\_t} error;
583    \textcolor{keywordtype}{size\_t} \hyperlink{dtls__misc_8h_ab43ca82dd7fa2a0e56f941032ef324c4}{length};
584    \hyperlink{mqtt__sn__common_8h_ad02465ddccbf34ea08256195cfccd215}{MqttSnUnsubscribe} *unsubscribe;
585 
586    \textcolor{comment}{//Initialize status code}
587    error = \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689cabf350750d0d4fabd8954c0f1e9bbae94}{NO\_ERROR};
588 
589    \textcolor{comment}{//Point to the buffer where to format the message}
590    unsubscribe = (\hyperlink{mqtt__sn__common_8h_ad02465ddccbf34ea08256195cfccd215}{MqttSnUnsubscribe} *) message->\hyperlink{structMqttSnMessage_a8e68c69d0e3ee59c0cc88aa146fe489a}{buffer};
591 
592    \textcolor{comment}{//Format UNSUBSCRIBE message}
593    unsubscribe->flags = \hyperlink{tcp_8h_aa2585d779da0ab21273a8d92de9a0ebe}{flags};
594    unsubscribe->msgId = \hyperlink{cpu__endian_8h_a800cdbf435a85a9b3ad4f0edc518472a}{htons}(\hyperlink{mqtt__sn__common_8h_a2acf66d2c12f7b04f90ed704f5ac215c}{msgId});
595 
596    \textcolor{comment}{//Check the type of topic identifier}
597    \textcolor{keywordflow}{if}(\hyperlink{tcp_8h_aa2585d779da0ab21273a8d92de9a0ebe}{flags}.topicIdType == \hyperlink{mqtt__sn__common_8h_a70807215f60d92d02503f2a5ed76ee96a9002d75bcc419fb9550c7950570b70b6}{MQTT\_SN\_NORMAL\_TOPIC\_NAME})
598    \{
599       \textcolor{comment}{//Make sure the topic name is valid}
600       \textcolor{keywordflow}{if}(\hyperlink{mqtt__sn__common_8h_a12172589bd20ef38ecbc6f4faf6ae3d0}{topicName} != \hyperlink{group__BSPDefine_ga070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL})
601       \{
602          \textcolor{comment}{//Copy topic name}
603          strcpy(unsubscribe->topicName, \hyperlink{mqtt__sn__common_8h_a12172589bd20ef38ecbc6f4faf6ae3d0}{topicName});
604          \textcolor{comment}{//Compute the length of the message}
605          length = \textcolor{keyword}{sizeof}(\hyperlink{mqtt__sn__common_8h_a72177ad7995f1974541e402bef5325ad}{MqttSnSubscribe}) + strlen(\hyperlink{mqtt__sn__common_8h_a12172589bd20ef38ecbc6f4faf6ae3d0}{topicName});
606       \}
607       \textcolor{keywordflow}{else}
608       \{
609          \textcolor{comment}{//Report an error}
610          error = \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689caeae4b12e06d727d085f75f79a820f2e8}{ERROR\_INVALID\_PARAMETER};
611       \}
612    \}
613    \textcolor{keywordflow}{else} \textcolor{keywordflow}{if}(\hyperlink{tcp_8h_aa2585d779da0ab21273a8d92de9a0ebe}{flags}.topicIdType == \hyperlink{mqtt__sn__common_8h_a70807215f60d92d02503f2a5ed76ee96a558b98c894af8f1b6d373d93b5d17827}{MQTT\_SN\_SHORT\_TOPIC\_NAME})
614    \{
615       \textcolor{comment}{//Make sure the short topic name is valid}
616       \textcolor{keywordflow}{if}(\hyperlink{mqtt__sn__common_8h_a12172589bd20ef38ecbc6f4faf6ae3d0}{topicName} != \hyperlink{group__BSPDefine_ga070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL} && strlen(\hyperlink{mqtt__sn__common_8h_a12172589bd20ef38ecbc6f4faf6ae3d0}{topicName}) == 2)
617       \{
618          \textcolor{comment}{//Copy topic name}
619          strcpy(unsubscribe->topicName, \hyperlink{mqtt__sn__common_8h_a12172589bd20ef38ecbc6f4faf6ae3d0}{topicName});
620          \textcolor{comment}{//Compute the length of the message}
621          length = \textcolor{keyword}{sizeof}(\hyperlink{mqtt__sn__common_8h_a72177ad7995f1974541e402bef5325ad}{MqttSnSubscribe}) + strlen(\hyperlink{mqtt__sn__common_8h_a12172589bd20ef38ecbc6f4faf6ae3d0}{topicName});
622       \}
623       \textcolor{keywordflow}{else}
624       \{
625          \textcolor{comment}{//Report an error}
626          error = \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689caeae4b12e06d727d085f75f79a820f2e8}{ERROR\_INVALID\_PARAMETER};
627       \}
628    \}
629    \textcolor{keywordflow}{else} \textcolor{keywordflow}{if}(\hyperlink{tcp_8h_aa2585d779da0ab21273a8d92de9a0ebe}{flags}.topicIdType == \hyperlink{mqtt__sn__common_8h_a70807215f60d92d02503f2a5ed76ee96a6bade83ea3e30d700f58005473c2736b}{MQTT\_SN\_PREDEFINED\_TOPIC\_ID})
630    \{
631       \textcolor{comment}{//Copy predefined topic ID}
632       \hyperlink{cpu__endian_8h_a8e657bcdf3842380d2d0006859029240}{STORE16BE}(\hyperlink{mqtt__sn__common_8h_a9f7eda5d21d45b5350db8cd0c451427a}{topicId}, unsubscribe->topicName);
633       \textcolor{comment}{//Compute the length of the message}
634       length = \textcolor{keyword}{sizeof}(\hyperlink{mqtt__sn__common_8h_a72177ad7995f1974541e402bef5325ad}{MqttSnSubscribe}) + \textcolor{keyword}{sizeof}(\hyperlink{stdint_8h_a273cf69d639a59973b6019625df33e30}{uint16\_t});
635    \}
636    \textcolor{keywordflow}{else}
637    \{
638       \textcolor{comment}{//Report an error}
639       error = \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689caeae4b12e06d727d085f75f79a820f2e8}{ERROR\_INVALID\_PARAMETER};
640    \}
641 
642    \textcolor{comment}{//Check status code}
643    \textcolor{keywordflow}{if}(!error)
644    \{
645       \textcolor{comment}{//Format MQTT-SN message header}
646       error = \hyperlink{mqtt__sn__message_8c_afdc609c5b5d1ecd4069983cf26ead095}{mqttSnFormatHeader}(message, 
      \hyperlink{mqtt__sn__common_8h_a0b5ccdae8aa73dc7c74ae2dfe62fd112a2c92708828018b62656632d3c4670ec8}{MQTT\_SN\_MSG\_TYPE\_UNSUBSCRIBE}, length);
647    \}
648 
649    \textcolor{comment}{//Return status code}
650    \textcolor{keywordflow}{return} error;
651 \}
\end{DoxyCode}
\mbox{\Hypertarget{mqtt__sn__message_8c_ae92fb0695bada2caf38c98ff2c46cc43}\label{mqtt__sn__message_8c_ae92fb0695bada2caf38c98ff2c46cc43}} 
\index{mqtt\+\_\+sn\+\_\+message.\+c@{mqtt\+\_\+sn\+\_\+message.\+c}!mqtt\+Sn\+Format\+Will\+Msg@{mqtt\+Sn\+Format\+Will\+Msg}}
\index{mqtt\+Sn\+Format\+Will\+Msg@{mqtt\+Sn\+Format\+Will\+Msg}!mqtt\+\_\+sn\+\_\+message.\+c@{mqtt\+\_\+sn\+\_\+message.\+c}}
\subsubsection{\texorpdfstring{mqtt\+Sn\+Format\+Will\+Msg()}{mqttSnFormatWillMsg()}}
{\footnotesize\ttfamily \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689c}{error\+\_\+t} mqtt\+Sn\+Format\+Will\+Msg (\begin{DoxyParamCaption}\item[{\hyperlink{structMqttSnMessage}{Mqtt\+Sn\+Message} $\ast$}]{message,  }\item[{const void $\ast$}]{data,  }\item[{size\+\_\+t}]{data\+Len }\end{DoxyParamCaption})}



Format W\+I\+L\+L\+M\+SG message. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em message} & Pointer to the M\+Q\+T\+T-\/\+SN message \\
\hline
\mbox{\tt in}  & {\em data} & Will message \\
\hline
\mbox{\tt in}  & {\em data\+Len} & Length of the Will message \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Error code 
\end{DoxyReturn}


Definition at line 218 of file mqtt\+\_\+sn\+\_\+message.\+c.


\begin{DoxyCode}
220 \{
221    \hyperlink{mqtt__sn__common_8h_a9de622c1e89515a8e3ebfd14ed355ae4}{MqttSnWillMsg} *willMsg;
222 
223    \textcolor{comment}{//Point to the buffer where to format the message}
224    willMsg = (\hyperlink{mqtt__sn__common_8h_a9de622c1e89515a8e3ebfd14ed355ae4}{MqttSnWillMsg} *) message->\hyperlink{structMqttSnMessage_a8e68c69d0e3ee59c0cc88aa146fe489a}{buffer};
225 
226    \textcolor{comment}{//Copy Will message}
227    memcpy(willMsg, \hyperlink{dtls__misc_8h_a5c239a1bb87b52b0f1d6d68c4749cd2a}{data}, dataLen);
228 
229    \textcolor{comment}{//Format MQTT-SN message header}
230    \textcolor{keywordflow}{return} \hyperlink{mqtt__sn__message_8c_afdc609c5b5d1ecd4069983cf26ead095}{mqttSnFormatHeader}(message, \hyperlink{mqtt__sn__common_8h_a0b5ccdae8aa73dc7c74ae2dfe62fd112aff30e7fa65bacca5ee9b4f97653ce8a4}{MQTT\_SN\_MSG\_TYPE\_WILLMSG}, 
      dataLen);
231 \}
\end{DoxyCode}
\mbox{\Hypertarget{mqtt__sn__message_8c_a1b5f07974b8ec6f98967a09167355fa4}\label{mqtt__sn__message_8c_a1b5f07974b8ec6f98967a09167355fa4}} 
\index{mqtt\+\_\+sn\+\_\+message.\+c@{mqtt\+\_\+sn\+\_\+message.\+c}!mqtt\+Sn\+Format\+Will\+Msg\+Upd@{mqtt\+Sn\+Format\+Will\+Msg\+Upd}}
\index{mqtt\+Sn\+Format\+Will\+Msg\+Upd@{mqtt\+Sn\+Format\+Will\+Msg\+Upd}!mqtt\+\_\+sn\+\_\+message.\+c@{mqtt\+\_\+sn\+\_\+message.\+c}}
\subsubsection{\texorpdfstring{mqtt\+Sn\+Format\+Will\+Msg\+Upd()}{mqttSnFormatWillMsgUpd()}}
{\footnotesize\ttfamily \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689c}{error\+\_\+t} mqtt\+Sn\+Format\+Will\+Msg\+Upd (\begin{DoxyParamCaption}\item[{\hyperlink{structMqttSnMessage}{Mqtt\+Sn\+Message} $\ast$}]{message,  }\item[{const void $\ast$}]{data,  }\item[{size\+\_\+t}]{data\+Len }\end{DoxyParamCaption})}



Format W\+I\+L\+L\+M\+S\+G\+U\+PD message. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em message} & Pointer to the M\+Q\+T\+T-\/\+SN message \\
\hline
\mbox{\tt in}  & {\em data} & Will message \\
\hline
\mbox{\tt in}  & {\em data\+Len} & Length of the Will message \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Error code 
\end{DoxyReturn}


Definition at line 784 of file mqtt\+\_\+sn\+\_\+message.\+c.


\begin{DoxyCode}
786 \{
787    \hyperlink{mqtt__sn__common_8h_a8e020a256be9ae019c3176289ed73fc0}{MqttSnWillMsgUpd} *willMsgUpd;
788 
789    \textcolor{comment}{//Point to the buffer where to format the message}
790    willMsgUpd = (\hyperlink{mqtt__sn__common_8h_a8e020a256be9ae019c3176289ed73fc0}{MqttSnWillMsgUpd} *) message->\hyperlink{structMqttSnMessage_a8e68c69d0e3ee59c0cc88aa146fe489a}{buffer};
791 
792    \textcolor{comment}{//Copy Will message}
793    memcpy(willMsgUpd, \hyperlink{dtls__misc_8h_a5c239a1bb87b52b0f1d6d68c4749cd2a}{data}, dataLen);
794 
795    \textcolor{comment}{//Format MQTT-SN message header}
796    \textcolor{keywordflow}{return} \hyperlink{mqtt__sn__message_8c_afdc609c5b5d1ecd4069983cf26ead095}{mqttSnFormatHeader}(message, 
      \hyperlink{mqtt__sn__common_8h_a0b5ccdae8aa73dc7c74ae2dfe62fd112a8aa84d8100f3ef131d29575c38165bac}{MQTT\_SN\_MSG\_TYPE\_WILLMSGUPD}, dataLen);
797 \}
\end{DoxyCode}
\mbox{\Hypertarget{mqtt__sn__message_8c_a7eb03e15aca9d53e7f25ebc1013cf2ff}\label{mqtt__sn__message_8c_a7eb03e15aca9d53e7f25ebc1013cf2ff}} 
\index{mqtt\+\_\+sn\+\_\+message.\+c@{mqtt\+\_\+sn\+\_\+message.\+c}!mqtt\+Sn\+Format\+Will\+Topic@{mqtt\+Sn\+Format\+Will\+Topic}}
\index{mqtt\+Sn\+Format\+Will\+Topic@{mqtt\+Sn\+Format\+Will\+Topic}!mqtt\+\_\+sn\+\_\+message.\+c@{mqtt\+\_\+sn\+\_\+message.\+c}}
\subsubsection{\texorpdfstring{mqtt\+Sn\+Format\+Will\+Topic()}{mqttSnFormatWillTopic()}}
{\footnotesize\ttfamily \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689c}{error\+\_\+t} mqtt\+Sn\+Format\+Will\+Topic (\begin{DoxyParamCaption}\item[{\hyperlink{structMqttSnMessage}{Mqtt\+Sn\+Message} $\ast$}]{message,  }\item[{\hyperlink{mqtt__sn__common_8h_adfa650f3c081a815eb81daa416bb94a0}{Mqtt\+Sn\+Flags}}]{flags,  }\item[{const \hyperlink{compiler__port_8h_a40bb5262bf908c328fbcfbe5d29d0201}{char\+\_\+t} $\ast$}]{topic\+Name }\end{DoxyParamCaption})}



Format W\+I\+L\+L\+T\+O\+P\+IC message. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em message} & Pointer to the M\+Q\+T\+T-\/\+SN message \\
\hline
\mbox{\tt in}  & {\em flags} & Flags \\
\hline
\mbox{\tt in}  & {\em topic\+Name} & Topic name \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Error code 
\end{DoxyReturn}


Definition at line 178 of file mqtt\+\_\+sn\+\_\+message.\+c.


\begin{DoxyCode}
180 \{
181    \textcolor{keywordtype}{size\_t} \hyperlink{dtls__misc_8h_ab43ca82dd7fa2a0e56f941032ef324c4}{length};
182    \hyperlink{mqtt__sn__common_8h_ae866465f94ae000e0372b61057d26dec}{MqttSnWillTopic} *\hyperlink{mqtt__sn__common_8h_ac32c45b37704a13a03fad7de2424434e}{willTopic};
183 
184    \textcolor{comment}{//Point to the buffer where to format the message}
185    willTopic = (\hyperlink{mqtt__sn__common_8h_ae866465f94ae000e0372b61057d26dec}{MqttSnWillTopic} *) message->\hyperlink{structMqttSnMessage_a8e68c69d0e3ee59c0cc88aa146fe489a}{buffer};
186 
187    \textcolor{comment}{//Valid Will topic?}
188    \textcolor{keywordflow}{if}(\hyperlink{mqtt__sn__common_8h_a12172589bd20ef38ecbc6f4faf6ae3d0}{topicName}[0] != \textcolor{charliteral}{'\(\backslash\)0'})
189    \{
190       \textcolor{comment}{//Format WILLTOPICUPD message}
191       willTopic->flags = \hyperlink{tcp_8h_aa2585d779da0ab21273a8d92de9a0ebe}{flags};
192       strcpy(willTopic->willTopic, \hyperlink{mqtt__sn__common_8h_a12172589bd20ef38ecbc6f4faf6ae3d0}{topicName});
193 
194       \textcolor{comment}{//Compute the length of the message}
195       length = \textcolor{keyword}{sizeof}(\hyperlink{mqtt__sn__common_8h_ae866465f94ae000e0372b61057d26dec}{MqttSnWillTopic}) + strlen(\hyperlink{mqtt__sn__common_8h_a12172589bd20ef38ecbc6f4faf6ae3d0}{topicName});
196    \}
197    \textcolor{keywordflow}{else}
198    \{
199       \textcolor{comment}{//An empty WILLTOPIC message (without Flags and WillTopic field) is}
200       \textcolor{comment}{//used by a client to delete the Will topic and the Will message stored}
201       \textcolor{comment}{//in the server}
202       length = 0;
203    \}
204 
205    \textcolor{comment}{//Format MQTT-SN message header}
206    \textcolor{keywordflow}{return} \hyperlink{mqtt__sn__message_8c_afdc609c5b5d1ecd4069983cf26ead095}{mqttSnFormatHeader}(message, 
      \hyperlink{mqtt__sn__common_8h_a0b5ccdae8aa73dc7c74ae2dfe62fd112a7b368bf6f27f56dc389bb238f67bd8fd}{MQTT\_SN\_MSG\_TYPE\_WILLTOPIC}, length);
207 \}
\end{DoxyCode}
\mbox{\Hypertarget{mqtt__sn__message_8c_abca35dd2e0c4f3d00ed013b1673389da}\label{mqtt__sn__message_8c_abca35dd2e0c4f3d00ed013b1673389da}} 
\index{mqtt\+\_\+sn\+\_\+message.\+c@{mqtt\+\_\+sn\+\_\+message.\+c}!mqtt\+Sn\+Format\+Will\+Topic\+Upd@{mqtt\+Sn\+Format\+Will\+Topic\+Upd}}
\index{mqtt\+Sn\+Format\+Will\+Topic\+Upd@{mqtt\+Sn\+Format\+Will\+Topic\+Upd}!mqtt\+\_\+sn\+\_\+message.\+c@{mqtt\+\_\+sn\+\_\+message.\+c}}
\subsubsection{\texorpdfstring{mqtt\+Sn\+Format\+Will\+Topic\+Upd()}{mqttSnFormatWillTopicUpd()}}
{\footnotesize\ttfamily \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689c}{error\+\_\+t} mqtt\+Sn\+Format\+Will\+Topic\+Upd (\begin{DoxyParamCaption}\item[{\hyperlink{structMqttSnMessage}{Mqtt\+Sn\+Message} $\ast$}]{message,  }\item[{\hyperlink{mqtt__sn__common_8h_adfa650f3c081a815eb81daa416bb94a0}{Mqtt\+Sn\+Flags}}]{flags,  }\item[{const \hyperlink{compiler__port_8h_a40bb5262bf908c328fbcfbe5d29d0201}{char\+\_\+t} $\ast$}]{topic\+Name }\end{DoxyParamCaption})}



Format W\+I\+L\+L\+T\+O\+P\+I\+C\+U\+PD message. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em message} & Pointer to the M\+Q\+T\+T-\/\+SN message \\
\hline
\mbox{\tt in}  & {\em flags} & Flags \\
\hline
\mbox{\tt in}  & {\em topic\+Name} & Topic name \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Error code 
\end{DoxyReturn}


Definition at line 744 of file mqtt\+\_\+sn\+\_\+message.\+c.


\begin{DoxyCode}
746 \{
747    \textcolor{keywordtype}{size\_t} \hyperlink{dtls__misc_8h_ab43ca82dd7fa2a0e56f941032ef324c4}{length};
748    \hyperlink{mqtt__sn__common_8h_af3516de587f09b6b2d552b5a9bd33d13}{MqttSnWillTopicUpd} *willTopicUpd;
749 
750    \textcolor{comment}{//Point to the buffer where to format the message}
751    willTopicUpd = (\hyperlink{mqtt__sn__common_8h_af3516de587f09b6b2d552b5a9bd33d13}{MqttSnWillTopicUpd} *) message->\hyperlink{structMqttSnMessage_a8e68c69d0e3ee59c0cc88aa146fe489a}{buffer};
752 
753    \textcolor{comment}{//Valid Will topic?}
754    \textcolor{keywordflow}{if}(\hyperlink{mqtt__sn__common_8h_a12172589bd20ef38ecbc6f4faf6ae3d0}{topicName}[0] != \textcolor{charliteral}{'\(\backslash\)0'})
755    \{
756       \textcolor{comment}{//Format WILLTOPICUPD message}
757       willTopicUpd->flags = \hyperlink{tcp_8h_aa2585d779da0ab21273a8d92de9a0ebe}{flags};
758       strcpy(willTopicUpd->willTopic, \hyperlink{mqtt__sn__common_8h_a12172589bd20ef38ecbc6f4faf6ae3d0}{topicName});
759 
760       \textcolor{comment}{//Compute the length of the message}
761       length = \textcolor{keyword}{sizeof}(\hyperlink{mqtt__sn__common_8h_af3516de587f09b6b2d552b5a9bd33d13}{MqttSnWillTopicUpd}) + strlen(\hyperlink{mqtt__sn__common_8h_a12172589bd20ef38ecbc6f4faf6ae3d0}{topicName});
762    \}
763    \textcolor{keywordflow}{else}
764    \{
765       \textcolor{comment}{//An empty WILLTOPICUPD message (without Flags and WillTopic field) is}
766       \textcolor{comment}{//used by a client to delete the Will topic and the Will message stored}
767       \textcolor{comment}{//in the server}
768       length = 0;
769    \}
770 
771    \textcolor{comment}{//Format MQTT-SN message header}
772    \textcolor{keywordflow}{return} \hyperlink{mqtt__sn__message_8c_afdc609c5b5d1ecd4069983cf26ead095}{mqttSnFormatHeader}(message, 
      \hyperlink{mqtt__sn__common_8h_a0b5ccdae8aa73dc7c74ae2dfe62fd112a38e7a463c018cbcd3de053913515e5db}{MQTT\_SN\_MSG\_TYPE\_WILLTOPICUPD}, length);
773 \}
\end{DoxyCode}
\mbox{\Hypertarget{mqtt__sn__message_8c_a35eb74e1f7a31e7ff4d873ec5276ea92}\label{mqtt__sn__message_8c_a35eb74e1f7a31e7ff4d873ec5276ea92}} 
\index{mqtt\+\_\+sn\+\_\+message.\+c@{mqtt\+\_\+sn\+\_\+message.\+c}!mqtt\+Sn\+Parse\+Conn\+Ack@{mqtt\+Sn\+Parse\+Conn\+Ack}}
\index{mqtt\+Sn\+Parse\+Conn\+Ack@{mqtt\+Sn\+Parse\+Conn\+Ack}!mqtt\+\_\+sn\+\_\+message.\+c@{mqtt\+\_\+sn\+\_\+message.\+c}}
\subsubsection{\texorpdfstring{mqtt\+Sn\+Parse\+Conn\+Ack()}{mqttSnParseConnAck()}}
{\footnotesize\ttfamily \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689c}{error\+\_\+t} mqtt\+Sn\+Parse\+Conn\+Ack (\begin{DoxyParamCaption}\item[{const \hyperlink{structMqttSnMessage}{Mqtt\+Sn\+Message} $\ast$}]{message,  }\item[{\hyperlink{mqtt__sn__common_8h_aa8ae09a48836472262f42c1f09638e9c}{Mqtt\+Sn\+Return\+Code} $\ast$}]{return\+Code }\end{DoxyParamCaption})}



Parse C\+O\+N\+N\+A\+CK message. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em message} & Pointer to the M\+Q\+T\+T-\/\+SN message \\
\hline
\mbox{\tt out}  & {\em return\+Code} & Return code \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Error code 
\end{DoxyReturn}


Definition at line 906 of file mqtt\+\_\+sn\+\_\+message.\+c.


\begin{DoxyCode}
908 \{
909    \textcolor{keywordtype}{size\_t} \hyperlink{dhcpv6__common_8h_a5a648f5ec00c526b0dfa2df7a272c6c0}{n};
910    \textcolor{keyword}{const} \hyperlink{mqtt__sn__common_8h_a1ae4cf6ea4f8ace54370d6c1febfd262}{MqttSnConnAck} *connAck;
911 
912    \textcolor{comment}{//Point to the CONNACK message}
913    connAck = (\hyperlink{mqtt__sn__common_8h_a1ae4cf6ea4f8ace54370d6c1febfd262}{MqttSnConnAck} *) (message->\hyperlink{structMqttSnMessage_a8e68c69d0e3ee59c0cc88aa146fe489a}{buffer} + message->
      \hyperlink{structMqttSnMessage_aa1c2334a5ac954ee288fd66eabfb17ac}{pos});
914    \textcolor{comment}{//Calculate the length of the message}
915    n = message->\hyperlink{structMqttSnMessage_a717fa07b0fe9c37cba433a2e913332d0}{length} - message->\hyperlink{structMqttSnMessage_aa1c2334a5ac954ee288fd66eabfb17ac}{pos};
916 
917    \textcolor{comment}{//Check the length of the message}
918    \textcolor{keywordflow}{if}(n < \textcolor{keyword}{sizeof}(\hyperlink{mqtt__sn__common_8h_a1ae4cf6ea4f8ace54370d6c1febfd262}{MqttSnConnAck}))
919       \textcolor{keywordflow}{return} \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689cae5c014519c3ac2540447887ddca1bd28}{ERROR\_INVALID\_LENGTH};
920 
921    \textcolor{comment}{//Get return code}
922    *\hyperlink{mqtt__sn__common_8h_aa43af56bba229c3214623f0f0c23bf6e}{returnCode} = (\hyperlink{mqtt__sn__common_8h_aa8ae09a48836472262f42c1f09638e9c}{MqttSnReturnCode}) connAck->returnCode;
923 
924    \textcolor{comment}{//Successful processing}
925    \textcolor{keywordflow}{return} \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689cabf350750d0d4fabd8954c0f1e9bbae94}{NO\_ERROR};
926 \}
\end{DoxyCode}
\mbox{\Hypertarget{mqtt__sn__message_8c_a2f76ec7f356fe84020bef3693230f921}\label{mqtt__sn__message_8c_a2f76ec7f356fe84020bef3693230f921}} 
\index{mqtt\+\_\+sn\+\_\+message.\+c@{mqtt\+\_\+sn\+\_\+message.\+c}!mqtt\+Sn\+Parse\+Disconnect@{mqtt\+Sn\+Parse\+Disconnect}}
\index{mqtt\+Sn\+Parse\+Disconnect@{mqtt\+Sn\+Parse\+Disconnect}!mqtt\+\_\+sn\+\_\+message.\+c@{mqtt\+\_\+sn\+\_\+message.\+c}}
\subsubsection{\texorpdfstring{mqtt\+Sn\+Parse\+Disconnect()}{mqttSnParseDisconnect()}}
{\footnotesize\ttfamily \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689c}{error\+\_\+t} mqtt\+Sn\+Parse\+Disconnect (\begin{DoxyParamCaption}\item[{const \hyperlink{structMqttSnMessage}{Mqtt\+Sn\+Message} $\ast$}]{message,  }\item[{\hyperlink{stdint_8h_a273cf69d639a59973b6019625df33e30}{uint16\+\_\+t} $\ast$}]{duration }\end{DoxyParamCaption})}



Parse D\+I\+S\+C\+O\+N\+N\+E\+CT message. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em message} & Pointer to the M\+Q\+T\+T-\/\+SN message \\
\hline
\mbox{\tt out}  & {\em duration} & Value of the sleep timer \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Error code 
\end{DoxyReturn}


Definition at line 1304 of file mqtt\+\_\+sn\+\_\+message.\+c.


\begin{DoxyCode}
1306 \{
1307    \textcolor{keywordtype}{size\_t} \hyperlink{dtls__misc_8h_ab43ca82dd7fa2a0e56f941032ef324c4}{length};
1308    \textcolor{keyword}{const} \hyperlink{mqtt__sn__common_8h_aeb1b6a36558807cf08ad4de6b1951607}{MqttSnDisconnect} *disconnect;
1309 
1310    \textcolor{comment}{//Point to the DISCONNECT message}
1311    disconnect = (\hyperlink{mqtt__sn__common_8h_aeb1b6a36558807cf08ad4de6b1951607}{MqttSnDisconnect} *) (message->\hyperlink{structMqttSnMessage_a8e68c69d0e3ee59c0cc88aa146fe489a}{buffer} + message->
      \hyperlink{structMqttSnMessage_aa1c2334a5ac954ee288fd66eabfb17ac}{pos});
1312    \textcolor{comment}{//Calculate the length of the message}
1313    length = message->\hyperlink{structMqttSnMessage_a717fa07b0fe9c37cba433a2e913332d0}{length} - message->\hyperlink{structMqttSnMessage_aa1c2334a5ac954ee288fd66eabfb17ac}{pos};
1314 
1315    \textcolor{comment}{//The Duration parameter is optional}
1316    \textcolor{keywordflow}{if}(length == 0)
1317    \{
1318       \textcolor{comment}{//The field is not present}
1319       *\hyperlink{mqtt__sn__common_8h_a5b14ef3e3e30242faa9bbef961493044}{duration} = 0;
1320    \}
1321    \textcolor{keywordflow}{else}
1322    \{
1323       \textcolor{comment}{//Check the length of the message}
1324       \textcolor{keywordflow}{if}(length < \textcolor{keyword}{sizeof}(\hyperlink{mqtt__sn__common_8h_aeb1b6a36558807cf08ad4de6b1951607}{MqttSnDisconnect}))
1325          \textcolor{keywordflow}{return} \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689cae5c014519c3ac2540447887ddca1bd28}{ERROR\_INVALID\_LENGTH};
1326 
1327       \textcolor{comment}{//Get topic identifier}
1328       *\hyperlink{mqtt__sn__common_8h_a5b14ef3e3e30242faa9bbef961493044}{duration} = \hyperlink{cpu__endian_8h_a9312c6eb72e64f748ae0d0e0dc3ec9b9}{ntohs}(disconnect->duration);
1329    \}
1330 
1331    \textcolor{comment}{//Successful processing}
1332    \textcolor{keywordflow}{return} \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689cabf350750d0d4fabd8954c0f1e9bbae94}{NO\_ERROR};
1333 \}
\end{DoxyCode}
\mbox{\Hypertarget{mqtt__sn__message_8c_a525446cbeff5a7a6dca38494236a64bb}\label{mqtt__sn__message_8c_a525446cbeff5a7a6dca38494236a64bb}} 
\index{mqtt\+\_\+sn\+\_\+message.\+c@{mqtt\+\_\+sn\+\_\+message.\+c}!mqtt\+Sn\+Parse\+Gw\+Info@{mqtt\+Sn\+Parse\+Gw\+Info}}
\index{mqtt\+Sn\+Parse\+Gw\+Info@{mqtt\+Sn\+Parse\+Gw\+Info}!mqtt\+\_\+sn\+\_\+message.\+c@{mqtt\+\_\+sn\+\_\+message.\+c}}
\subsubsection{\texorpdfstring{mqtt\+Sn\+Parse\+Gw\+Info()}{mqttSnParseGwInfo()}}
{\footnotesize\ttfamily \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689c}{error\+\_\+t} mqtt\+Sn\+Parse\+Gw\+Info (\begin{DoxyParamCaption}\item[{const \hyperlink{structMqttSnMessage}{Mqtt\+Sn\+Message} $\ast$}]{message,  }\item[{\hyperlink{stdint_8h_aba7bc1797add20fe3efdf37ced1182c5}{uint8\+\_\+t} $\ast$}]{gw\+Id,  }\item[{const \hyperlink{stdint_8h_aba7bc1797add20fe3efdf37ced1182c5}{uint8\+\_\+t} $\ast$$\ast$}]{gw\+Add,  }\item[{size\+\_\+t $\ast$}]{gw\+Add\+Len }\end{DoxyParamCaption})}



Parse G\+W\+I\+N\+FO message. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em message} & Pointer to the M\+Q\+T\+T-\/\+SN message \\
\hline
\mbox{\tt out}  & {\em gw\+Id} & Gateway identifier \\
\hline
\mbox{\tt out}  & {\em gw\+Add} & Gateway address \\
\hline
\mbox{\tt out}  & {\em gw\+Add\+Len} & Length of the gateway address \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Error code 
\end{DoxyReturn}


Definition at line 871 of file mqtt\+\_\+sn\+\_\+message.\+c.


\begin{DoxyCode}
873 \{
874    \textcolor{keywordtype}{size\_t} \hyperlink{dhcpv6__common_8h_a5a648f5ec00c526b0dfa2df7a272c6c0}{n};
875    \textcolor{keyword}{const} \hyperlink{mqtt__sn__common_8h_ae5b71f9f7613a995779ef4628928b184}{MqttSnGwInfo} *gwInfo;
876 
877    \textcolor{comment}{//Point to the GWINFO message}
878    gwInfo = (\hyperlink{mqtt__sn__common_8h_ae5b71f9f7613a995779ef4628928b184}{MqttSnGwInfo} *) (message->\hyperlink{structMqttSnMessage_a8e68c69d0e3ee59c0cc88aa146fe489a}{buffer} + message->\hyperlink{structMqttSnMessage_aa1c2334a5ac954ee288fd66eabfb17ac}{pos});
879    \textcolor{comment}{//Calculate the length of the message}
880    n = message->\hyperlink{structMqttSnMessage_a717fa07b0fe9c37cba433a2e913332d0}{length} - message->\hyperlink{structMqttSnMessage_aa1c2334a5ac954ee288fd66eabfb17ac}{pos};
881 
882    \textcolor{comment}{//Check the length of the message}
883    \textcolor{keywordflow}{if}(n < \textcolor{keyword}{sizeof}(\hyperlink{mqtt__sn__common_8h_ae5b71f9f7613a995779ef4628928b184}{MqttSnGwInfo}))
884       \textcolor{keywordflow}{return} \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689cae5c014519c3ac2540447887ddca1bd28}{ERROR\_INVALID\_LENGTH};
885 
886    \textcolor{comment}{//Get gateway identifier}
887    *\hyperlink{mqtt__sn__common_8h_a839c8eaa3240a2a4206e4afb1c50f327}{gwId} = gwInfo->gwId;
888    \textcolor{comment}{//Get gateway address}
889    *\hyperlink{mqtt__sn__common_8h_aa53d4ce1397134077209e0324224059f}{gwAdd} = gwInfo->gwAdd;
890 
891    \textcolor{comment}{//Calculate the length of the gateway address}
892    *gwAddLen = n - \textcolor{keyword}{sizeof}(\hyperlink{mqtt__sn__common_8h_ae5b71f9f7613a995779ef4628928b184}{MqttSnGwInfo});
893 
894    \textcolor{comment}{//Successful processing}
895    \textcolor{keywordflow}{return} \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689cabf350750d0d4fabd8954c0f1e9bbae94}{NO\_ERROR};
896 \}
\end{DoxyCode}
\mbox{\Hypertarget{mqtt__sn__message_8c_a45575f6155c83f9f5626aff7045b5d36}\label{mqtt__sn__message_8c_a45575f6155c83f9f5626aff7045b5d36}} 
\index{mqtt\+\_\+sn\+\_\+message.\+c@{mqtt\+\_\+sn\+\_\+message.\+c}!mqtt\+Sn\+Parse\+Header@{mqtt\+Sn\+Parse\+Header}}
\index{mqtt\+Sn\+Parse\+Header@{mqtt\+Sn\+Parse\+Header}!mqtt\+\_\+sn\+\_\+message.\+c@{mqtt\+\_\+sn\+\_\+message.\+c}}
\subsubsection{\texorpdfstring{mqtt\+Sn\+Parse\+Header()}{mqttSnParseHeader()}}
{\footnotesize\ttfamily \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689c}{error\+\_\+t} mqtt\+Sn\+Parse\+Header (\begin{DoxyParamCaption}\item[{\hyperlink{structMqttSnMessage}{Mqtt\+Sn\+Message} $\ast$}]{message,  }\item[{\hyperlink{mqtt__sn__common_8h_a0b5ccdae8aa73dc7c74ae2dfe62fd112}{Mqtt\+Sn\+Msg\+Type} $\ast$}]{type }\end{DoxyParamCaption})}



Format M\+Q\+T\+T-\/\+SN message header. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em message} & Pointer to the M\+Q\+T\+T-\/\+SN message \\
\hline
\mbox{\tt out}  & {\em type} & Message type \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Error code 
\end{DoxyReturn}


Definition at line 807 of file mqtt\+\_\+sn\+\_\+message.\+c.


\begin{DoxyCode}
808 \{
809    \textcolor{comment}{//Malformed MQTT-SN message?}
810    \textcolor{keywordflow}{if}(message->\hyperlink{structMqttSnMessage_a717fa07b0fe9c37cba433a2e913332d0}{length} == 0)
811       \textcolor{keywordflow}{return} \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689cae5c014519c3ac2540447887ddca1bd28}{ERROR\_INVALID\_LENGTH};
812 
813    \textcolor{comment}{//Check whether the first octet is 0x01}
814    \textcolor{keywordflow}{if}(message->\hyperlink{structMqttSnMessage_a8e68c69d0e3ee59c0cc88aa146fe489a}{buffer}[0] == 0x01)
815    \{
816       \textcolor{keyword}{const} \hyperlink{mqtt__sn__common_8h_a9c31c4bf75b041aba098bb9aafcc5a91}{MqttSnExtHeader} *header;
817 
818       \textcolor{comment}{//Point to message header}
819       header = (\hyperlink{mqtt__sn__common_8h_a9c31c4bf75b041aba098bb9aafcc5a91}{MqttSnExtHeader} *) message->\hyperlink{structMqttSnMessage_a8e68c69d0e3ee59c0cc88aa146fe489a}{buffer};
820 
821       \textcolor{comment}{//Malformed message?}
822       \textcolor{keywordflow}{if}(message->\hyperlink{structMqttSnMessage_a717fa07b0fe9c37cba433a2e913332d0}{length} < \textcolor{keyword}{sizeof}(\hyperlink{mqtt__sn__common_8h_a9c31c4bf75b041aba098bb9aafcc5a91}{MqttSnExtHeader}))
823          \textcolor{keywordflow}{return} \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689cae5c014519c3ac2540447887ddca1bd28}{ERROR\_INVALID\_LENGTH};
824       \textcolor{keywordflow}{if}(message->\hyperlink{structMqttSnMessage_a717fa07b0fe9c37cba433a2e913332d0}{length} < \hyperlink{cpu__endian_8h_a9312c6eb72e64f748ae0d0e0dc3ec9b9}{ntohs}(header->length))
825          \textcolor{keywordflow}{return} \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689cae5c014519c3ac2540447887ddca1bd28}{ERROR\_INVALID\_LENGTH};
826 
827       \textcolor{comment}{//The Length field is 3-octet long}
828       message->\hyperlink{structMqttSnMessage_a717fa07b0fe9c37cba433a2e913332d0}{length} = \hyperlink{cpu__endian_8h_a9312c6eb72e64f748ae0d0e0dc3ec9b9}{ntohs}(header->length);
829       \textcolor{comment}{//Point to the variable part of the message}
830       message->\hyperlink{structMqttSnMessage_aa1c2334a5ac954ee288fd66eabfb17ac}{pos} = \textcolor{keyword}{sizeof}(\hyperlink{mqtt__sn__common_8h_a9c31c4bf75b041aba098bb9aafcc5a91}{MqttSnExtHeader});
831 
832       \textcolor{comment}{//Retrieve message type}
833       *\hyperlink{resource__manager_8h_a12e46a33bfe90638e58ef067c6fd4a6e}{type} = (\hyperlink{mqtt__sn__common_8h_a0b5ccdae8aa73dc7c74ae2dfe62fd112}{MqttSnMsgType}) header->msgType;
834    \}
835    \textcolor{keywordflow}{else}
836    \{
837       \textcolor{keyword}{const} \hyperlink{mqtt__sn__common_8h_abd991bd8a7bca1ea05f6233ccf7c4f99}{MqttSnHeader} *header;
838 
839       \textcolor{comment}{//Point to message header}
840       header = (\hyperlink{mqtt__sn__common_8h_abd991bd8a7bca1ea05f6233ccf7c4f99}{MqttSnHeader} *) message->\hyperlink{structMqttSnMessage_a8e68c69d0e3ee59c0cc88aa146fe489a}{buffer};
841 
842       \textcolor{comment}{//Malformed message?}
843       \textcolor{keywordflow}{if}(message->\hyperlink{structMqttSnMessage_a717fa07b0fe9c37cba433a2e913332d0}{length} < \textcolor{keyword}{sizeof}(\hyperlink{mqtt__sn__common_8h_abd991bd8a7bca1ea05f6233ccf7c4f99}{MqttSnHeader}))
844          \textcolor{keywordflow}{return} \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689cae5c014519c3ac2540447887ddca1bd28}{ERROR\_INVALID\_LENGTH};
845       \textcolor{keywordflow}{if}(message->\hyperlink{structMqttSnMessage_a717fa07b0fe9c37cba433a2e913332d0}{length} < header->length)
846          \textcolor{keywordflow}{return} \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689cae5c014519c3ac2540447887ddca1bd28}{ERROR\_INVALID\_LENGTH};
847 
848       \textcolor{comment}{//The Length field is 1-octet long}
849       message->\hyperlink{structMqttSnMessage_a717fa07b0fe9c37cba433a2e913332d0}{length} = header->length;
850       \textcolor{comment}{//Point to the variable part of the message}
851       message->\hyperlink{structMqttSnMessage_aa1c2334a5ac954ee288fd66eabfb17ac}{pos} = \textcolor{keyword}{sizeof}(\hyperlink{mqtt__sn__common_8h_abd991bd8a7bca1ea05f6233ccf7c4f99}{MqttSnHeader});
852 
853       \textcolor{comment}{//Retrieve message type}
854       *\hyperlink{resource__manager_8h_a12e46a33bfe90638e58ef067c6fd4a6e}{type} = (\hyperlink{mqtt__sn__common_8h_a0b5ccdae8aa73dc7c74ae2dfe62fd112}{MqttSnMsgType}) header->msgType;
855    \}
856 
857    \textcolor{comment}{//Successful processing}
858    \textcolor{keywordflow}{return} \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689cabf350750d0d4fabd8954c0f1e9bbae94}{NO\_ERROR};
859 \}
\end{DoxyCode}
\mbox{\Hypertarget{mqtt__sn__message_8c_aacced326a302af1eba6216ef91f2be22}\label{mqtt__sn__message_8c_aacced326a302af1eba6216ef91f2be22}} 
\index{mqtt\+\_\+sn\+\_\+message.\+c@{mqtt\+\_\+sn\+\_\+message.\+c}!mqtt\+Sn\+Parse\+Ping\+Req@{mqtt\+Sn\+Parse\+Ping\+Req}}
\index{mqtt\+Sn\+Parse\+Ping\+Req@{mqtt\+Sn\+Parse\+Ping\+Req}!mqtt\+\_\+sn\+\_\+message.\+c@{mqtt\+\_\+sn\+\_\+message.\+c}}
\subsubsection{\texorpdfstring{mqtt\+Sn\+Parse\+Ping\+Req()}{mqttSnParsePingReq()}}
{\footnotesize\ttfamily \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689c}{error\+\_\+t} mqtt\+Sn\+Parse\+Ping\+Req (\begin{DoxyParamCaption}\item[{const \hyperlink{structMqttSnMessage}{Mqtt\+Sn\+Message} $\ast$}]{message,  }\item[{const \hyperlink{compiler__port_8h_a40bb5262bf908c328fbcfbe5d29d0201}{char\+\_\+t} $\ast$$\ast$}]{client\+Id }\end{DoxyParamCaption})}



Parse P\+I\+N\+G\+R\+EQ message. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em message} & Pointer to the M\+Q\+T\+T-\/\+SN message \\
\hline
\mbox{\tt out}  & {\em client\+Id} & Client identifier \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Error code 
\end{DoxyReturn}


Definition at line 1268 of file mqtt\+\_\+sn\+\_\+message.\+c.


\begin{DoxyCode}
1270 \{
1271    \textcolor{keyword}{const} \hyperlink{mqtt__sn__common_8h_afa053f5b3021983c19b907391eb3f597}{MqttSnPingReq} *pingReq;
1272 
1273    \textcolor{comment}{//Point to the PINGREQ message}
1274    pingReq = (\hyperlink{mqtt__sn__common_8h_afa053f5b3021983c19b907391eb3f597}{MqttSnPingReq} *) (message->\hyperlink{structMqttSnMessage_a8e68c69d0e3ee59c0cc88aa146fe489a}{buffer} + message->
      \hyperlink{structMqttSnMessage_aa1c2334a5ac954ee288fd66eabfb17ac}{pos});
1275 
1276    \textcolor{comment}{//Get client identifier}
1277    *\hyperlink{mqtt__sn__common_8h_aaaf873d7efb58d9ccdddc5c8569e092b}{clientId} = pingReq;
1278 
1279    \textcolor{comment}{//Successful processing}
1280    \textcolor{keywordflow}{return} \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689cabf350750d0d4fabd8954c0f1e9bbae94}{NO\_ERROR};
1281 \}
\end{DoxyCode}
\mbox{\Hypertarget{mqtt__sn__message_8c_addce54c1d0961c275f8b8fb2be6ffdb1}\label{mqtt__sn__message_8c_addce54c1d0961c275f8b8fb2be6ffdb1}} 
\index{mqtt\+\_\+sn\+\_\+message.\+c@{mqtt\+\_\+sn\+\_\+message.\+c}!mqtt\+Sn\+Parse\+Ping\+Resp@{mqtt\+Sn\+Parse\+Ping\+Resp}}
\index{mqtt\+Sn\+Parse\+Ping\+Resp@{mqtt\+Sn\+Parse\+Ping\+Resp}!mqtt\+\_\+sn\+\_\+message.\+c@{mqtt\+\_\+sn\+\_\+message.\+c}}
\subsubsection{\texorpdfstring{mqtt\+Sn\+Parse\+Ping\+Resp()}{mqttSnParsePingResp()}}
{\footnotesize\ttfamily \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689c}{error\+\_\+t} mqtt\+Sn\+Parse\+Ping\+Resp (\begin{DoxyParamCaption}\item[{const \hyperlink{structMqttSnMessage}{Mqtt\+Sn\+Message} $\ast$}]{message }\end{DoxyParamCaption})}



Parse P\+I\+N\+G\+R\+E\+SP message. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em message} & Pointer to the M\+Q\+T\+T-\/\+SN message \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Error code 
\end{DoxyReturn}


Definition at line 1290 of file mqtt\+\_\+sn\+\_\+message.\+c.


\begin{DoxyCode}
1291 \{
1292    \textcolor{comment}{//The PINGRESP message has only a header and no variable part}
1293    \textcolor{keywordflow}{return} \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689cabf350750d0d4fabd8954c0f1e9bbae94}{NO\_ERROR};
1294 \}
\end{DoxyCode}
\mbox{\Hypertarget{mqtt__sn__message_8c_a5af464d5c767833ff22d31b478a323f1}\label{mqtt__sn__message_8c_a5af464d5c767833ff22d31b478a323f1}} 
\index{mqtt\+\_\+sn\+\_\+message.\+c@{mqtt\+\_\+sn\+\_\+message.\+c}!mqtt\+Sn\+Parse\+Pub\+Ack@{mqtt\+Sn\+Parse\+Pub\+Ack}}
\index{mqtt\+Sn\+Parse\+Pub\+Ack@{mqtt\+Sn\+Parse\+Pub\+Ack}!mqtt\+\_\+sn\+\_\+message.\+c@{mqtt\+\_\+sn\+\_\+message.\+c}}
\subsubsection{\texorpdfstring{mqtt\+Sn\+Parse\+Pub\+Ack()}{mqttSnParsePubAck()}}
{\footnotesize\ttfamily \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689c}{error\+\_\+t} mqtt\+Sn\+Parse\+Pub\+Ack (\begin{DoxyParamCaption}\item[{const \hyperlink{structMqttSnMessage}{Mqtt\+Sn\+Message} $\ast$}]{message,  }\item[{\hyperlink{stdint_8h_a273cf69d639a59973b6019625df33e30}{uint16\+\_\+t} $\ast$}]{msg\+Id,  }\item[{\hyperlink{stdint_8h_a273cf69d639a59973b6019625df33e30}{uint16\+\_\+t} $\ast$}]{topic\+Id,  }\item[{\hyperlink{mqtt__sn__common_8h_aa8ae09a48836472262f42c1f09638e9c}{Mqtt\+Sn\+Return\+Code} $\ast$}]{return\+Code }\end{DoxyParamCaption})}



Parse P\+U\+B\+A\+CK message. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em message} & Pointer to the M\+Q\+T\+T-\/\+SN message \\
\hline
\mbox{\tt out}  & {\em msg\+Id} & Message identifier \\
\hline
\mbox{\tt out}  & {\em topic\+Id} & Topic identifier \\
\hline
\mbox{\tt out}  & {\em return\+Code} & Return code \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Error code 
\end{DoxyReturn}


Definition at line 1079 of file mqtt\+\_\+sn\+\_\+message.\+c.


\begin{DoxyCode}
1081 \{
1082    \textcolor{keywordtype}{size\_t} \hyperlink{dtls__misc_8h_ab43ca82dd7fa2a0e56f941032ef324c4}{length};
1083    \textcolor{keyword}{const} \hyperlink{mqtt__sn__common_8h_a9e0f71d4298b5e3f6b27fb6123bb1b65}{MqttSnPubAck} *pubAck;
1084 
1085    \textcolor{comment}{//Point to the PUBACK message}
1086    pubAck = (\hyperlink{mqtt__sn__common_8h_a9e0f71d4298b5e3f6b27fb6123bb1b65}{MqttSnPubAck} *) (message->\hyperlink{structMqttSnMessage_a8e68c69d0e3ee59c0cc88aa146fe489a}{buffer} + message->\hyperlink{structMqttSnMessage_aa1c2334a5ac954ee288fd66eabfb17ac}{pos});
1087    \textcolor{comment}{//Calculate the length of the message}
1088    length = message->\hyperlink{structMqttSnMessage_a717fa07b0fe9c37cba433a2e913332d0}{length} - message->\hyperlink{structMqttSnMessage_aa1c2334a5ac954ee288fd66eabfb17ac}{pos};
1089 
1090    \textcolor{comment}{//Check the length of the message}
1091    \textcolor{keywordflow}{if}(length < \textcolor{keyword}{sizeof}(\hyperlink{mqtt__sn__common_8h_a9e0f71d4298b5e3f6b27fb6123bb1b65}{MqttSnPubAck}))
1092       \textcolor{keywordflow}{return} \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689cae5c014519c3ac2540447887ddca1bd28}{ERROR\_INVALID\_LENGTH};
1093 
1094    \textcolor{comment}{//Get message identifier}
1095    *\hyperlink{mqtt__sn__common_8h_a2acf66d2c12f7b04f90ed704f5ac215c}{msgId} = \hyperlink{cpu__endian_8h_a9312c6eb72e64f748ae0d0e0dc3ec9b9}{ntohs}(pubAck->msgId);
1096    \textcolor{comment}{//Get topic identifier}
1097    *\hyperlink{mqtt__sn__common_8h_a9f7eda5d21d45b5350db8cd0c451427a}{topicId} = \hyperlink{cpu__endian_8h_a9312c6eb72e64f748ae0d0e0dc3ec9b9}{ntohs}(pubAck->topicId);
1098    \textcolor{comment}{//Get return code}
1099    *\hyperlink{mqtt__sn__common_8h_aa43af56bba229c3214623f0f0c23bf6e}{returnCode} = (\hyperlink{mqtt__sn__common_8h_aa8ae09a48836472262f42c1f09638e9c}{MqttSnReturnCode}) pubAck->returnCode;
1100 
1101    \textcolor{comment}{//Successful processing}
1102    \textcolor{keywordflow}{return} \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689cabf350750d0d4fabd8954c0f1e9bbae94}{NO\_ERROR};
1103 \}
\end{DoxyCode}
\mbox{\Hypertarget{mqtt__sn__message_8c_a8b76777fa3a62c3500b5529c9179aed0}\label{mqtt__sn__message_8c_a8b76777fa3a62c3500b5529c9179aed0}} 
\index{mqtt\+\_\+sn\+\_\+message.\+c@{mqtt\+\_\+sn\+\_\+message.\+c}!mqtt\+Sn\+Parse\+Pub\+Comp@{mqtt\+Sn\+Parse\+Pub\+Comp}}
\index{mqtt\+Sn\+Parse\+Pub\+Comp@{mqtt\+Sn\+Parse\+Pub\+Comp}!mqtt\+\_\+sn\+\_\+message.\+c@{mqtt\+\_\+sn\+\_\+message.\+c}}
\subsubsection{\texorpdfstring{mqtt\+Sn\+Parse\+Pub\+Comp()}{mqttSnParsePubComp()}}
{\footnotesize\ttfamily \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689c}{error\+\_\+t} mqtt\+Sn\+Parse\+Pub\+Comp (\begin{DoxyParamCaption}\item[{const \hyperlink{structMqttSnMessage}{Mqtt\+Sn\+Message} $\ast$}]{message,  }\item[{\hyperlink{stdint_8h_a273cf69d639a59973b6019625df33e30}{uint16\+\_\+t} $\ast$}]{msg\+Id }\end{DoxyParamCaption})}



Parse P\+U\+B\+C\+O\+MP message. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em message} & Pointer to the M\+Q\+T\+T-\/\+SN message \\
\hline
\mbox{\tt out}  & {\em msg\+Id} & Message identifier \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Error code 
\end{DoxyReturn}


Definition at line 1171 of file mqtt\+\_\+sn\+\_\+message.\+c.


\begin{DoxyCode}
1172 \{
1173    \textcolor{keywordtype}{size\_t} \hyperlink{dtls__misc_8h_ab43ca82dd7fa2a0e56f941032ef324c4}{length};
1174    \textcolor{keyword}{const} \hyperlink{mqtt__sn__common_8h_af4daf64b0094eaecedcb27fc475f64ac}{MqttSnPubComp} *pubComp;
1175 
1176    \textcolor{comment}{//Point to the PUBCOMP message}
1177    pubComp = (\hyperlink{mqtt__sn__common_8h_af4daf64b0094eaecedcb27fc475f64ac}{MqttSnPubComp} *) (message->\hyperlink{structMqttSnMessage_a8e68c69d0e3ee59c0cc88aa146fe489a}{buffer} + message->
      \hyperlink{structMqttSnMessage_aa1c2334a5ac954ee288fd66eabfb17ac}{pos});
1178    \textcolor{comment}{//Calculate the length of the message}
1179    length = message->\hyperlink{structMqttSnMessage_a717fa07b0fe9c37cba433a2e913332d0}{length} - message->\hyperlink{structMqttSnMessage_aa1c2334a5ac954ee288fd66eabfb17ac}{pos};
1180 
1181    \textcolor{comment}{//Check the length of the message}
1182    \textcolor{keywordflow}{if}(length < \textcolor{keyword}{sizeof}(\hyperlink{mqtt__sn__common_8h_af4daf64b0094eaecedcb27fc475f64ac}{MqttSnPubComp}))
1183       \textcolor{keywordflow}{return} \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689cae5c014519c3ac2540447887ddca1bd28}{ERROR\_INVALID\_LENGTH};
1184 
1185    \textcolor{comment}{//Get message identifier}
1186    *\hyperlink{mqtt__sn__common_8h_a2acf66d2c12f7b04f90ed704f5ac215c}{msgId} = \hyperlink{cpu__endian_8h_a9312c6eb72e64f748ae0d0e0dc3ec9b9}{ntohs}(pubComp->msgId);
1187 
1188    \textcolor{comment}{//Successful processing}
1189    \textcolor{keywordflow}{return} \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689cabf350750d0d4fabd8954c0f1e9bbae94}{NO\_ERROR};
1190 \}
\end{DoxyCode}
\mbox{\Hypertarget{mqtt__sn__message_8c_a928af55e0ea7253387840ab6c36381ca}\label{mqtt__sn__message_8c_a928af55e0ea7253387840ab6c36381ca}} 
\index{mqtt\+\_\+sn\+\_\+message.\+c@{mqtt\+\_\+sn\+\_\+message.\+c}!mqtt\+Sn\+Parse\+Publish@{mqtt\+Sn\+Parse\+Publish}}
\index{mqtt\+Sn\+Parse\+Publish@{mqtt\+Sn\+Parse\+Publish}!mqtt\+\_\+sn\+\_\+message.\+c@{mqtt\+\_\+sn\+\_\+message.\+c}}
\subsubsection{\texorpdfstring{mqtt\+Sn\+Parse\+Publish()}{mqttSnParsePublish()}}
{\footnotesize\ttfamily \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689c}{error\+\_\+t} mqtt\+Sn\+Parse\+Publish (\begin{DoxyParamCaption}\item[{const \hyperlink{structMqttSnMessage}{Mqtt\+Sn\+Message} $\ast$}]{message,  }\item[{\hyperlink{mqtt__sn__common_8h_adfa650f3c081a815eb81daa416bb94a0}{Mqtt\+Sn\+Flags} $\ast$}]{flags,  }\item[{\hyperlink{stdint_8h_a273cf69d639a59973b6019625df33e30}{uint16\+\_\+t} $\ast$}]{msg\+Id,  }\item[{\hyperlink{stdint_8h_a273cf69d639a59973b6019625df33e30}{uint16\+\_\+t} $\ast$}]{topic\+Id,  }\item[{const \hyperlink{stdint_8h_aba7bc1797add20fe3efdf37ced1182c5}{uint8\+\_\+t} $\ast$$\ast$}]{data,  }\item[{size\+\_\+t $\ast$}]{data\+Len }\end{DoxyParamCaption})}



Parse P\+U\+B\+L\+I\+SH message. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em message} & Pointer to the M\+Q\+T\+T-\/\+SN message \\
\hline
\mbox{\tt out}  & {\em flags} & Flags \\
\hline
\mbox{\tt out}  & {\em msg\+Id} & Message identifier \\
\hline
\mbox{\tt out}  & {\em topic\+Id} & Topic identifier \\
\hline
\mbox{\tt out}  & {\em data} & Pointer to the published data \\
\hline
\mbox{\tt out}  & {\em data\+Len} & Length of the published data \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Error code 
\end{DoxyReturn}


Definition at line 1038 of file mqtt\+\_\+sn\+\_\+message.\+c.


\begin{DoxyCode}
1040 \{
1041    \textcolor{keywordtype}{size\_t} \hyperlink{dtls__misc_8h_ab43ca82dd7fa2a0e56f941032ef324c4}{length};
1042    \textcolor{keyword}{const} \hyperlink{mqtt__sn__common_8h_a442e9de0c102ea796e4f48b1f7514717}{MqttSnPublish} *publish;
1043 
1044    \textcolor{comment}{//Point to the PUBLISH message}
1045    publish = (\hyperlink{mqtt__sn__common_8h_a442e9de0c102ea796e4f48b1f7514717}{MqttSnPublish} *) (message->\hyperlink{structMqttSnMessage_a8e68c69d0e3ee59c0cc88aa146fe489a}{buffer} + message->
      \hyperlink{structMqttSnMessage_aa1c2334a5ac954ee288fd66eabfb17ac}{pos});
1046    \textcolor{comment}{//Calculate the length of the message}
1047    length = message->\hyperlink{structMqttSnMessage_a717fa07b0fe9c37cba433a2e913332d0}{length} - message->\hyperlink{structMqttSnMessage_aa1c2334a5ac954ee288fd66eabfb17ac}{pos};
1048 
1049    \textcolor{comment}{//Check the length of the message}
1050    \textcolor{keywordflow}{if}(length < \textcolor{keyword}{sizeof}(\hyperlink{mqtt__sn__common_8h_a442e9de0c102ea796e4f48b1f7514717}{MqttSnPublish}))
1051       \textcolor{keywordflow}{return} \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689cae5c014519c3ac2540447887ddca1bd28}{ERROR\_INVALID\_LENGTH};
1052 
1053    \textcolor{comment}{//Get flags}
1054    *\hyperlink{tcp_8h_aa2585d779da0ab21273a8d92de9a0ebe}{flags} = publish->flags;
1055    \textcolor{comment}{//Get message identifier}
1056    *\hyperlink{mqtt__sn__common_8h_a2acf66d2c12f7b04f90ed704f5ac215c}{msgId} = \hyperlink{cpu__endian_8h_a9312c6eb72e64f748ae0d0e0dc3ec9b9}{ntohs}(publish->msgId);
1057    \textcolor{comment}{//Get topic identifier}
1058    *\hyperlink{mqtt__sn__common_8h_a9f7eda5d21d45b5350db8cd0c451427a}{topicId} = \hyperlink{cpu__endian_8h_a9312c6eb72e64f748ae0d0e0dc3ec9b9}{ntohs}(publish->topicId);
1059    \textcolor{comment}{//Get published data}
1060    *\hyperlink{dtls__misc_8h_a5c239a1bb87b52b0f1d6d68c4749cd2a}{data} = publish->data;
1061 
1062    \textcolor{comment}{//Calculate the length of the published data}
1063    *dataLen = length - \textcolor{keyword}{sizeof}(\hyperlink{mqtt__sn__common_8h_a442e9de0c102ea796e4f48b1f7514717}{MqttSnPublish});
1064 
1065    \textcolor{comment}{//Successful processing}
1066    \textcolor{keywordflow}{return} \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689cabf350750d0d4fabd8954c0f1e9bbae94}{NO\_ERROR};
1067 \}
\end{DoxyCode}
\mbox{\Hypertarget{mqtt__sn__message_8c_af75463d1bab0f7d23e849f750fc81f67}\label{mqtt__sn__message_8c_af75463d1bab0f7d23e849f750fc81f67}} 
\index{mqtt\+\_\+sn\+\_\+message.\+c@{mqtt\+\_\+sn\+\_\+message.\+c}!mqtt\+Sn\+Parse\+Pub\+Rec@{mqtt\+Sn\+Parse\+Pub\+Rec}}
\index{mqtt\+Sn\+Parse\+Pub\+Rec@{mqtt\+Sn\+Parse\+Pub\+Rec}!mqtt\+\_\+sn\+\_\+message.\+c@{mqtt\+\_\+sn\+\_\+message.\+c}}
\subsubsection{\texorpdfstring{mqtt\+Sn\+Parse\+Pub\+Rec()}{mqttSnParsePubRec()}}
{\footnotesize\ttfamily \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689c}{error\+\_\+t} mqtt\+Sn\+Parse\+Pub\+Rec (\begin{DoxyParamCaption}\item[{const \hyperlink{structMqttSnMessage}{Mqtt\+Sn\+Message} $\ast$}]{message,  }\item[{\hyperlink{stdint_8h_a273cf69d639a59973b6019625df33e30}{uint16\+\_\+t} $\ast$}]{msg\+Id }\end{DoxyParamCaption})}



Parse P\+U\+B\+R\+EC message. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em message} & Pointer to the M\+Q\+T\+T-\/\+SN message \\
\hline
\mbox{\tt out}  & {\em msg\+Id} & Message identifier \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Error code 
\end{DoxyReturn}


Definition at line 1113 of file mqtt\+\_\+sn\+\_\+message.\+c.


\begin{DoxyCode}
1114 \{
1115    \textcolor{keywordtype}{size\_t} \hyperlink{dtls__misc_8h_ab43ca82dd7fa2a0e56f941032ef324c4}{length};
1116    \textcolor{keyword}{const} \hyperlink{mqtt__sn__common_8h_a5fdc2cc0fab2d7d17b3b3d5ba1172a1b}{MqttSnPubRec} *pubRec;
1117 
1118    \textcolor{comment}{//Point to the PUBREC message}
1119    pubRec = (\hyperlink{mqtt__sn__common_8h_a5fdc2cc0fab2d7d17b3b3d5ba1172a1b}{MqttSnPubRec} *) (message->\hyperlink{structMqttSnMessage_a8e68c69d0e3ee59c0cc88aa146fe489a}{buffer} + message->\hyperlink{structMqttSnMessage_aa1c2334a5ac954ee288fd66eabfb17ac}{pos});
1120    \textcolor{comment}{//Calculate the length of the message}
1121    length = message->\hyperlink{structMqttSnMessage_a717fa07b0fe9c37cba433a2e913332d0}{length} - message->\hyperlink{structMqttSnMessage_aa1c2334a5ac954ee288fd66eabfb17ac}{pos};
1122 
1123    \textcolor{comment}{//Check the length of the message}
1124    \textcolor{keywordflow}{if}(length < \textcolor{keyword}{sizeof}(\hyperlink{mqtt__sn__common_8h_a5fdc2cc0fab2d7d17b3b3d5ba1172a1b}{MqttSnPubRec}))
1125       \textcolor{keywordflow}{return} \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689cae5c014519c3ac2540447887ddca1bd28}{ERROR\_INVALID\_LENGTH};
1126 
1127    \textcolor{comment}{//Get message identifier}
1128    *\hyperlink{mqtt__sn__common_8h_a2acf66d2c12f7b04f90ed704f5ac215c}{msgId} = \hyperlink{cpu__endian_8h_a9312c6eb72e64f748ae0d0e0dc3ec9b9}{ntohs}(pubRec->msgId);
1129 
1130    \textcolor{comment}{//Successful processing}
1131    \textcolor{keywordflow}{return} \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689cabf350750d0d4fabd8954c0f1e9bbae94}{NO\_ERROR};
1132 \}
\end{DoxyCode}
\mbox{\Hypertarget{mqtt__sn__message_8c_a4ead947261f68568e4c172db2c7770e8}\label{mqtt__sn__message_8c_a4ead947261f68568e4c172db2c7770e8}} 
\index{mqtt\+\_\+sn\+\_\+message.\+c@{mqtt\+\_\+sn\+\_\+message.\+c}!mqtt\+Sn\+Parse\+Pub\+Rel@{mqtt\+Sn\+Parse\+Pub\+Rel}}
\index{mqtt\+Sn\+Parse\+Pub\+Rel@{mqtt\+Sn\+Parse\+Pub\+Rel}!mqtt\+\_\+sn\+\_\+message.\+c@{mqtt\+\_\+sn\+\_\+message.\+c}}
\subsubsection{\texorpdfstring{mqtt\+Sn\+Parse\+Pub\+Rel()}{mqttSnParsePubRel()}}
{\footnotesize\ttfamily \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689c}{error\+\_\+t} mqtt\+Sn\+Parse\+Pub\+Rel (\begin{DoxyParamCaption}\item[{const \hyperlink{structMqttSnMessage}{Mqtt\+Sn\+Message} $\ast$}]{message,  }\item[{\hyperlink{stdint_8h_a273cf69d639a59973b6019625df33e30}{uint16\+\_\+t} $\ast$}]{msg\+Id }\end{DoxyParamCaption})}



Parse P\+U\+B\+R\+EL message. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em message} & Pointer to the M\+Q\+T\+T-\/\+SN message \\
\hline
\mbox{\tt out}  & {\em msg\+Id} & Message identifier \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Error code 
\end{DoxyReturn}


Definition at line 1142 of file mqtt\+\_\+sn\+\_\+message.\+c.


\begin{DoxyCode}
1143 \{
1144    \textcolor{keywordtype}{size\_t} \hyperlink{dtls__misc_8h_ab43ca82dd7fa2a0e56f941032ef324c4}{length};
1145    \textcolor{keyword}{const} \hyperlink{mqtt__sn__common_8h_a065d4043057726789f3c0302ccddfea0}{MqttSnPubRel} *pubRel;
1146 
1147    \textcolor{comment}{//Point to the PUBREL message}
1148    pubRel = (\hyperlink{mqtt__sn__common_8h_a065d4043057726789f3c0302ccddfea0}{MqttSnPubRel} *) (message->\hyperlink{structMqttSnMessage_a8e68c69d0e3ee59c0cc88aa146fe489a}{buffer} + message->\hyperlink{structMqttSnMessage_aa1c2334a5ac954ee288fd66eabfb17ac}{pos});
1149    \textcolor{comment}{//Calculate the length of the message}
1150    length = message->\hyperlink{structMqttSnMessage_a717fa07b0fe9c37cba433a2e913332d0}{length} - message->\hyperlink{structMqttSnMessage_aa1c2334a5ac954ee288fd66eabfb17ac}{pos};
1151 
1152    \textcolor{comment}{//Check the length of the message}
1153    \textcolor{keywordflow}{if}(length < \textcolor{keyword}{sizeof}(\hyperlink{mqtt__sn__common_8h_a065d4043057726789f3c0302ccddfea0}{MqttSnPubRel}))
1154       \textcolor{keywordflow}{return} \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689cae5c014519c3ac2540447887ddca1bd28}{ERROR\_INVALID\_LENGTH};
1155 
1156    \textcolor{comment}{//Get message identifier}
1157    *\hyperlink{mqtt__sn__common_8h_a2acf66d2c12f7b04f90ed704f5ac215c}{msgId} = \hyperlink{cpu__endian_8h_a9312c6eb72e64f748ae0d0e0dc3ec9b9}{ntohs}(pubRel->msgId);
1158 
1159    \textcolor{comment}{//Successful processing}
1160    \textcolor{keywordflow}{return} \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689cabf350750d0d4fabd8954c0f1e9bbae94}{NO\_ERROR};
1161 \}
\end{DoxyCode}
\mbox{\Hypertarget{mqtt__sn__message_8c_acde961cf8ae65ea7d00db07c6df2f1ba}\label{mqtt__sn__message_8c_acde961cf8ae65ea7d00db07c6df2f1ba}} 
\index{mqtt\+\_\+sn\+\_\+message.\+c@{mqtt\+\_\+sn\+\_\+message.\+c}!mqtt\+Sn\+Parse\+Reg\+Ack@{mqtt\+Sn\+Parse\+Reg\+Ack}}
\index{mqtt\+Sn\+Parse\+Reg\+Ack@{mqtt\+Sn\+Parse\+Reg\+Ack}!mqtt\+\_\+sn\+\_\+message.\+c@{mqtt\+\_\+sn\+\_\+message.\+c}}
\subsubsection{\texorpdfstring{mqtt\+Sn\+Parse\+Reg\+Ack()}{mqttSnParseRegAck()}}
{\footnotesize\ttfamily \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689c}{error\+\_\+t} mqtt\+Sn\+Parse\+Reg\+Ack (\begin{DoxyParamCaption}\item[{const \hyperlink{structMqttSnMessage}{Mqtt\+Sn\+Message} $\ast$}]{message,  }\item[{\hyperlink{stdint_8h_a273cf69d639a59973b6019625df33e30}{uint16\+\_\+t} $\ast$}]{msg\+Id,  }\item[{\hyperlink{stdint_8h_a273cf69d639a59973b6019625df33e30}{uint16\+\_\+t} $\ast$}]{topic\+Id,  }\item[{\hyperlink{mqtt__sn__common_8h_aa8ae09a48836472262f42c1f09638e9c}{Mqtt\+Sn\+Return\+Code} $\ast$}]{return\+Code }\end{DoxyParamCaption})}



Parse R\+E\+G\+A\+CK message. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em message} & Pointer to the M\+Q\+T\+T-\/\+SN message \\
\hline
\mbox{\tt out}  & {\em msg\+Id} & Message identifier \\
\hline
\mbox{\tt out}  & {\em topic\+Id} & Topic identifier \\
\hline
\mbox{\tt out}  & {\em return\+Code} & Return code \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Error code 
\end{DoxyReturn}


Definition at line 1000 of file mqtt\+\_\+sn\+\_\+message.\+c.


\begin{DoxyCode}
1002 \{
1003    \textcolor{keywordtype}{size\_t} \hyperlink{dhcpv6__common_8h_a5a648f5ec00c526b0dfa2df7a272c6c0}{n};
1004    \textcolor{keyword}{const} \hyperlink{mqtt__sn__common_8h_ae8f622646c6ccaaa17eb36982b51bc36}{MqttSnRegAck} *regAck;
1005 
1006    \textcolor{comment}{//Point to the REGACK message}
1007    regAck = (\hyperlink{mqtt__sn__common_8h_ae8f622646c6ccaaa17eb36982b51bc36}{MqttSnRegAck} *) (message->\hyperlink{structMqttSnMessage_a8e68c69d0e3ee59c0cc88aa146fe489a}{buffer} + message->\hyperlink{structMqttSnMessage_aa1c2334a5ac954ee288fd66eabfb17ac}{pos});
1008    \textcolor{comment}{//Calculate the length of the message}
1009    n = message->\hyperlink{structMqttSnMessage_a717fa07b0fe9c37cba433a2e913332d0}{length} - message->\hyperlink{structMqttSnMessage_aa1c2334a5ac954ee288fd66eabfb17ac}{pos};
1010 
1011    \textcolor{comment}{//Check the length of the message}
1012    \textcolor{keywordflow}{if}(n < \textcolor{keyword}{sizeof}(\hyperlink{mqtt__sn__common_8h_ae8f622646c6ccaaa17eb36982b51bc36}{MqttSnRegAck}))
1013       \textcolor{keywordflow}{return} \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689cae5c014519c3ac2540447887ddca1bd28}{ERROR\_INVALID\_LENGTH};
1014 
1015    \textcolor{comment}{//Get return code}
1016    *\hyperlink{mqtt__sn__common_8h_a2acf66d2c12f7b04f90ed704f5ac215c}{msgId} = \hyperlink{cpu__endian_8h_a9312c6eb72e64f748ae0d0e0dc3ec9b9}{ntohs}(regAck->msgId);
1017    \textcolor{comment}{//Get return code}
1018    *\hyperlink{mqtt__sn__common_8h_a9f7eda5d21d45b5350db8cd0c451427a}{topicId} = \hyperlink{cpu__endian_8h_a9312c6eb72e64f748ae0d0e0dc3ec9b9}{ntohs}(regAck->topicId);
1019    \textcolor{comment}{//Get return code}
1020    *\hyperlink{mqtt__sn__common_8h_aa43af56bba229c3214623f0f0c23bf6e}{returnCode} = (\hyperlink{mqtt__sn__common_8h_aa8ae09a48836472262f42c1f09638e9c}{MqttSnReturnCode}) regAck->returnCode;
1021 
1022    \textcolor{comment}{//Successful processing}
1023    \textcolor{keywordflow}{return} \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689cabf350750d0d4fabd8954c0f1e9bbae94}{NO\_ERROR};
1024 \}
\end{DoxyCode}
\mbox{\Hypertarget{mqtt__sn__message_8c_ae8d34fb3190f7bdc1f51c4fb2c39fb2a}\label{mqtt__sn__message_8c_ae8d34fb3190f7bdc1f51c4fb2c39fb2a}} 
\index{mqtt\+\_\+sn\+\_\+message.\+c@{mqtt\+\_\+sn\+\_\+message.\+c}!mqtt\+Sn\+Parse\+Register@{mqtt\+Sn\+Parse\+Register}}
\index{mqtt\+Sn\+Parse\+Register@{mqtt\+Sn\+Parse\+Register}!mqtt\+\_\+sn\+\_\+message.\+c@{mqtt\+\_\+sn\+\_\+message.\+c}}
\subsubsection{\texorpdfstring{mqtt\+Sn\+Parse\+Register()}{mqttSnParseRegister()}}
{\footnotesize\ttfamily \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689c}{error\+\_\+t} mqtt\+Sn\+Parse\+Register (\begin{DoxyParamCaption}\item[{const \hyperlink{structMqttSnMessage}{Mqtt\+Sn\+Message} $\ast$}]{message,  }\item[{\hyperlink{stdint_8h_a273cf69d639a59973b6019625df33e30}{uint16\+\_\+t} $\ast$}]{msg\+Id,  }\item[{\hyperlink{stdint_8h_a273cf69d639a59973b6019625df33e30}{uint16\+\_\+t} $\ast$}]{topic\+Id,  }\item[{const \hyperlink{compiler__port_8h_a40bb5262bf908c328fbcfbe5d29d0201}{char\+\_\+t} $\ast$$\ast$}]{topic\+Name }\end{DoxyParamCaption})}



Parse R\+E\+G\+I\+S\+T\+ER message. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em message} & Pointer to the M\+Q\+T\+T-\/\+SN message \\
\hline
\mbox{\tt out}  & {\em msg\+Id} & Message identifier \\
\hline
\mbox{\tt out}  & {\em topic\+Id} & Topic identifier \\
\hline
\mbox{\tt out}  & {\em topic\+Name} & Topic name \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Error code 
\end{DoxyReturn}


Definition at line 964 of file mqtt\+\_\+sn\+\_\+message.\+c.


\begin{DoxyCode}
966 \{
967    \textcolor{keywordtype}{size\_t} \hyperlink{dhcpv6__common_8h_a5a648f5ec00c526b0dfa2df7a272c6c0}{n};
968    \textcolor{keyword}{const} \hyperlink{mqtt__sn__common_8h_a9a4400fa819bc32d8ab268f5da633319}{MqttSnRegister} *reg;
969 
970    \textcolor{comment}{//Point to the REGISTER message}
971    reg = (\hyperlink{mqtt__sn__common_8h_a9a4400fa819bc32d8ab268f5da633319}{MqttSnRegister} *) (message->\hyperlink{structMqttSnMessage_a8e68c69d0e3ee59c0cc88aa146fe489a}{buffer} + message->\hyperlink{structMqttSnMessage_aa1c2334a5ac954ee288fd66eabfb17ac}{pos});
972    \textcolor{comment}{//Calculate the length of the message}
973    n = message->\hyperlink{structMqttSnMessage_a717fa07b0fe9c37cba433a2e913332d0}{length} - message->\hyperlink{structMqttSnMessage_aa1c2334a5ac954ee288fd66eabfb17ac}{pos};
974 
975    \textcolor{comment}{//Check the length of the message}
976    \textcolor{keywordflow}{if}(n < \textcolor{keyword}{sizeof}(\hyperlink{mqtt__sn__common_8h_a9a4400fa819bc32d8ab268f5da633319}{MqttSnRegister}))
977       \textcolor{keywordflow}{return} \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689cae5c014519c3ac2540447887ddca1bd28}{ERROR\_INVALID\_LENGTH};
978 
979    \textcolor{comment}{//Get message identifier}
980    *\hyperlink{mqtt__sn__common_8h_a2acf66d2c12f7b04f90ed704f5ac215c}{msgId} = \hyperlink{cpu__endian_8h_a9312c6eb72e64f748ae0d0e0dc3ec9b9}{ntohs}(reg->msgId);
981    \textcolor{comment}{//Get topic identifier}
982    *\hyperlink{mqtt__sn__common_8h_a9f7eda5d21d45b5350db8cd0c451427a}{topicId} = \hyperlink{cpu__endian_8h_a9312c6eb72e64f748ae0d0e0dc3ec9b9}{ntohs}(reg->topicId);
983    \textcolor{comment}{//Get topic name}
984    *\hyperlink{mqtt__sn__common_8h_a12172589bd20ef38ecbc6f4faf6ae3d0}{topicName} = reg->topicName;
985 
986    \textcolor{comment}{//Successful processing}
987    \textcolor{keywordflow}{return} \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689cabf350750d0d4fabd8954c0f1e9bbae94}{NO\_ERROR};
988 \}
\end{DoxyCode}
\mbox{\Hypertarget{mqtt__sn__message_8c_a4879c6c38719e587a78c34897ad3ffdd}\label{mqtt__sn__message_8c_a4879c6c38719e587a78c34897ad3ffdd}} 
\index{mqtt\+\_\+sn\+\_\+message.\+c@{mqtt\+\_\+sn\+\_\+message.\+c}!mqtt\+Sn\+Parse\+Sub\+Ack@{mqtt\+Sn\+Parse\+Sub\+Ack}}
\index{mqtt\+Sn\+Parse\+Sub\+Ack@{mqtt\+Sn\+Parse\+Sub\+Ack}!mqtt\+\_\+sn\+\_\+message.\+c@{mqtt\+\_\+sn\+\_\+message.\+c}}
\subsubsection{\texorpdfstring{mqtt\+Sn\+Parse\+Sub\+Ack()}{mqttSnParseSubAck()}}
{\footnotesize\ttfamily \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689c}{error\+\_\+t} mqtt\+Sn\+Parse\+Sub\+Ack (\begin{DoxyParamCaption}\item[{const \hyperlink{structMqttSnMessage}{Mqtt\+Sn\+Message} $\ast$}]{message,  }\item[{\hyperlink{mqtt__sn__common_8h_adfa650f3c081a815eb81daa416bb94a0}{Mqtt\+Sn\+Flags} $\ast$}]{flags,  }\item[{\hyperlink{stdint_8h_a273cf69d639a59973b6019625df33e30}{uint16\+\_\+t} $\ast$}]{msg\+Id,  }\item[{\hyperlink{stdint_8h_a273cf69d639a59973b6019625df33e30}{uint16\+\_\+t} $\ast$}]{topic\+Id,  }\item[{\hyperlink{mqtt__sn__common_8h_aa8ae09a48836472262f42c1f09638e9c}{Mqtt\+Sn\+Return\+Code} $\ast$}]{return\+Code }\end{DoxyParamCaption})}



Parse S\+U\+B\+A\+CK message. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em message} & Pointer to the M\+Q\+T\+T-\/\+SN message \\
\hline
\mbox{\tt out}  & {\em flags} & Flags \\
\hline
\mbox{\tt out}  & {\em msg\+Id} & Message identifier \\
\hline
\mbox{\tt out}  & {\em topic\+Id} & Topic identifier \\
\hline
\mbox{\tt out}  & {\em return\+Code} & Return code \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Error code 
\end{DoxyReturn}


Definition at line 1203 of file mqtt\+\_\+sn\+\_\+message.\+c.


\begin{DoxyCode}
1205 \{
1206    \textcolor{keywordtype}{size\_t} \hyperlink{dtls__misc_8h_ab43ca82dd7fa2a0e56f941032ef324c4}{length};
1207    \textcolor{keyword}{const} \hyperlink{mqtt__sn__common_8h_a0220c643a28e0e4b230195d5386bea3f}{MqttSnSubAck} *subAck;
1208 
1209    \textcolor{comment}{//Point to the SUBACK message}
1210    subAck = (\hyperlink{mqtt__sn__common_8h_a0220c643a28e0e4b230195d5386bea3f}{MqttSnSubAck} *) (message->\hyperlink{structMqttSnMessage_a8e68c69d0e3ee59c0cc88aa146fe489a}{buffer} + message->\hyperlink{structMqttSnMessage_aa1c2334a5ac954ee288fd66eabfb17ac}{pos});
1211    \textcolor{comment}{//Calculate the length of the message}
1212    length = message->\hyperlink{structMqttSnMessage_a717fa07b0fe9c37cba433a2e913332d0}{length} - message->\hyperlink{structMqttSnMessage_aa1c2334a5ac954ee288fd66eabfb17ac}{pos};
1213 
1214    \textcolor{comment}{//Check the length of the message}
1215    \textcolor{keywordflow}{if}(length < \textcolor{keyword}{sizeof}(\hyperlink{mqtt__sn__common_8h_a0220c643a28e0e4b230195d5386bea3f}{MqttSnSubAck}))
1216       \textcolor{keywordflow}{return} \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689cae5c014519c3ac2540447887ddca1bd28}{ERROR\_INVALID\_LENGTH};
1217 
1218    \textcolor{comment}{//Get flags}
1219    *\hyperlink{tcp_8h_aa2585d779da0ab21273a8d92de9a0ebe}{flags} = subAck->flags;
1220    \textcolor{comment}{//Get message identifier}
1221    *\hyperlink{mqtt__sn__common_8h_a2acf66d2c12f7b04f90ed704f5ac215c}{msgId} = \hyperlink{cpu__endian_8h_a9312c6eb72e64f748ae0d0e0dc3ec9b9}{ntohs}(subAck->msgId);
1222    \textcolor{comment}{//Get topic identifier}
1223    *\hyperlink{mqtt__sn__common_8h_a9f7eda5d21d45b5350db8cd0c451427a}{topicId} = \hyperlink{cpu__endian_8h_a9312c6eb72e64f748ae0d0e0dc3ec9b9}{ntohs}(subAck->topicId);
1224    \textcolor{comment}{//Get return code}
1225    *\hyperlink{mqtt__sn__common_8h_aa43af56bba229c3214623f0f0c23bf6e}{returnCode} = (\hyperlink{mqtt__sn__common_8h_aa8ae09a48836472262f42c1f09638e9c}{MqttSnReturnCode}) subAck->returnCode;
1226 
1227    \textcolor{comment}{//Successful processing}
1228    \textcolor{keywordflow}{return} \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689cabf350750d0d4fabd8954c0f1e9bbae94}{NO\_ERROR};
1229 \}
\end{DoxyCode}
\mbox{\Hypertarget{mqtt__sn__message_8c_ac89abcc9d79eb33e9d093e467c1167c4}\label{mqtt__sn__message_8c_ac89abcc9d79eb33e9d093e467c1167c4}} 
\index{mqtt\+\_\+sn\+\_\+message.\+c@{mqtt\+\_\+sn\+\_\+message.\+c}!mqtt\+Sn\+Parse\+Unsub\+Ack@{mqtt\+Sn\+Parse\+Unsub\+Ack}}
\index{mqtt\+Sn\+Parse\+Unsub\+Ack@{mqtt\+Sn\+Parse\+Unsub\+Ack}!mqtt\+\_\+sn\+\_\+message.\+c@{mqtt\+\_\+sn\+\_\+message.\+c}}
\subsubsection{\texorpdfstring{mqtt\+Sn\+Parse\+Unsub\+Ack()}{mqttSnParseUnsubAck()}}
{\footnotesize\ttfamily \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689c}{error\+\_\+t} mqtt\+Sn\+Parse\+Unsub\+Ack (\begin{DoxyParamCaption}\item[{const \hyperlink{structMqttSnMessage}{Mqtt\+Sn\+Message} $\ast$}]{message,  }\item[{\hyperlink{stdint_8h_a273cf69d639a59973b6019625df33e30}{uint16\+\_\+t} $\ast$}]{msg\+Id }\end{DoxyParamCaption})}



Parse U\+N\+S\+U\+B\+A\+CK message. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em message} & Pointer to the M\+Q\+T\+T-\/\+SN message \\
\hline
\mbox{\tt out}  & {\em msg\+Id} & Message identifier \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Error code 
\end{DoxyReturn}


Definition at line 1239 of file mqtt\+\_\+sn\+\_\+message.\+c.


\begin{DoxyCode}
1240 \{
1241    \textcolor{keywordtype}{size\_t} \hyperlink{dtls__misc_8h_ab43ca82dd7fa2a0e56f941032ef324c4}{length};
1242    \textcolor{keyword}{const} \hyperlink{mqtt__sn__common_8h_a57bedc7469dc94bf3761162b9e3081d6}{MqttSnUnsubAck} *unsubAck;
1243 
1244    \textcolor{comment}{//Point to the UNSUBACK message}
1245    unsubAck = (\hyperlink{mqtt__sn__common_8h_a57bedc7469dc94bf3761162b9e3081d6}{MqttSnUnsubAck} *) (message->\hyperlink{structMqttSnMessage_a8e68c69d0e3ee59c0cc88aa146fe489a}{buffer} + message->
      \hyperlink{structMqttSnMessage_aa1c2334a5ac954ee288fd66eabfb17ac}{pos});
1246    \textcolor{comment}{//Calculate the length of the message}
1247    length = message->\hyperlink{structMqttSnMessage_a717fa07b0fe9c37cba433a2e913332d0}{length} - message->\hyperlink{structMqttSnMessage_aa1c2334a5ac954ee288fd66eabfb17ac}{pos};
1248 
1249    \textcolor{comment}{//Check the length of the message}
1250    \textcolor{keywordflow}{if}(length < \textcolor{keyword}{sizeof}(\hyperlink{mqtt__sn__common_8h_a57bedc7469dc94bf3761162b9e3081d6}{MqttSnUnsubAck}))
1251       \textcolor{keywordflow}{return} \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689cae5c014519c3ac2540447887ddca1bd28}{ERROR\_INVALID\_LENGTH};
1252 
1253    \textcolor{comment}{//Get message identifier}
1254    *\hyperlink{mqtt__sn__common_8h_a2acf66d2c12f7b04f90ed704f5ac215c}{msgId} = \hyperlink{cpu__endian_8h_a9312c6eb72e64f748ae0d0e0dc3ec9b9}{ntohs}(unsubAck->msgId);
1255 
1256    \textcolor{comment}{//Successful processing}
1257    \textcolor{keywordflow}{return} \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689cabf350750d0d4fabd8954c0f1e9bbae94}{NO\_ERROR};
1258 \}
\end{DoxyCode}
\mbox{\Hypertarget{mqtt__sn__message_8c_a5a28f0189f922f9e4fd76ee36bafeb37}\label{mqtt__sn__message_8c_a5a28f0189f922f9e4fd76ee36bafeb37}} 
\index{mqtt\+\_\+sn\+\_\+message.\+c@{mqtt\+\_\+sn\+\_\+message.\+c}!mqtt\+Sn\+Parse\+Will\+Msg\+Req@{mqtt\+Sn\+Parse\+Will\+Msg\+Req}}
\index{mqtt\+Sn\+Parse\+Will\+Msg\+Req@{mqtt\+Sn\+Parse\+Will\+Msg\+Req}!mqtt\+\_\+sn\+\_\+message.\+c@{mqtt\+\_\+sn\+\_\+message.\+c}}
\subsubsection{\texorpdfstring{mqtt\+Sn\+Parse\+Will\+Msg\+Req()}{mqttSnParseWillMsgReq()}}
{\footnotesize\ttfamily \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689c}{error\+\_\+t} mqtt\+Sn\+Parse\+Will\+Msg\+Req (\begin{DoxyParamCaption}\item[{const \hyperlink{structMqttSnMessage}{Mqtt\+Sn\+Message} $\ast$}]{message }\end{DoxyParamCaption})}



Parse W\+I\+L\+L\+M\+S\+G\+R\+EQ message. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em message} & Pointer to the M\+Q\+T\+T-\/\+SN message \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Error code 
\end{DoxyReturn}


Definition at line 948 of file mqtt\+\_\+sn\+\_\+message.\+c.


\begin{DoxyCode}
949 \{
950    \textcolor{comment}{//The WILLMSGREQ message has only a header and no variable part}
951    \textcolor{keywordflow}{return} \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689cabf350750d0d4fabd8954c0f1e9bbae94}{NO\_ERROR};
952 \}
\end{DoxyCode}
\mbox{\Hypertarget{mqtt__sn__message_8c_a3848f7a28c2d72cc2e2f16306f6dea67}\label{mqtt__sn__message_8c_a3848f7a28c2d72cc2e2f16306f6dea67}} 
\index{mqtt\+\_\+sn\+\_\+message.\+c@{mqtt\+\_\+sn\+\_\+message.\+c}!mqtt\+Sn\+Parse\+Will\+Msg\+Resp@{mqtt\+Sn\+Parse\+Will\+Msg\+Resp}}
\index{mqtt\+Sn\+Parse\+Will\+Msg\+Resp@{mqtt\+Sn\+Parse\+Will\+Msg\+Resp}!mqtt\+\_\+sn\+\_\+message.\+c@{mqtt\+\_\+sn\+\_\+message.\+c}}
\subsubsection{\texorpdfstring{mqtt\+Sn\+Parse\+Will\+Msg\+Resp()}{mqttSnParseWillMsgResp()}}
{\footnotesize\ttfamily \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689c}{error\+\_\+t} mqtt\+Sn\+Parse\+Will\+Msg\+Resp (\begin{DoxyParamCaption}\item[{const \hyperlink{structMqttSnMessage}{Mqtt\+Sn\+Message} $\ast$}]{message,  }\item[{\hyperlink{mqtt__sn__common_8h_aa8ae09a48836472262f42c1f09638e9c}{Mqtt\+Sn\+Return\+Code} $\ast$}]{return\+Code }\end{DoxyParamCaption})}



Parse W\+I\+L\+L\+M\+S\+G\+R\+E\+SP message. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em message} & Pointer to the M\+Q\+T\+T-\/\+SN message \\
\hline
\mbox{\tt out}  & {\em return\+Code} & Return code \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Error code 
\end{DoxyReturn}


Definition at line 1373 of file mqtt\+\_\+sn\+\_\+message.\+c.


\begin{DoxyCode}
1375 \{
1376    \textcolor{keywordtype}{size\_t} \hyperlink{dtls__misc_8h_ab43ca82dd7fa2a0e56f941032ef324c4}{length};
1377    \textcolor{keyword}{const} \hyperlink{mqtt__sn__common_8h_a12c74314f3484fe812b1ddbf126a3214}{MqttSnWillMsgResp} *willMsgResp;
1378 
1379    \textcolor{comment}{//Point to the WILLMSGRESP message}
1380    willMsgResp = (\hyperlink{mqtt__sn__common_8h_a12c74314f3484fe812b1ddbf126a3214}{MqttSnWillMsgResp} *) (message->\hyperlink{structMqttSnMessage_a8e68c69d0e3ee59c0cc88aa146fe489a}{buffer} + message->
      \hyperlink{structMqttSnMessage_aa1c2334a5ac954ee288fd66eabfb17ac}{pos});
1381    \textcolor{comment}{//Calculate the length of the message}
1382    length = message->\hyperlink{structMqttSnMessage_a717fa07b0fe9c37cba433a2e913332d0}{length} - message->\hyperlink{structMqttSnMessage_aa1c2334a5ac954ee288fd66eabfb17ac}{pos};
1383 
1384    \textcolor{comment}{//Check the length of the message}
1385    \textcolor{keywordflow}{if}(length < \textcolor{keyword}{sizeof}(\hyperlink{mqtt__sn__common_8h_a12c74314f3484fe812b1ddbf126a3214}{MqttSnWillMsgResp}))
1386       \textcolor{keywordflow}{return} \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689cae5c014519c3ac2540447887ddca1bd28}{ERROR\_INVALID\_LENGTH};
1387 
1388    \textcolor{comment}{//Get return code}
1389    *\hyperlink{mqtt__sn__common_8h_aa43af56bba229c3214623f0f0c23bf6e}{returnCode} = (\hyperlink{mqtt__sn__common_8h_aa8ae09a48836472262f42c1f09638e9c}{MqttSnReturnCode}) willMsgResp->returnCode;
1390 
1391    \textcolor{comment}{//Successful processing}
1392    \textcolor{keywordflow}{return} \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689cabf350750d0d4fabd8954c0f1e9bbae94}{NO\_ERROR};
1393 \}
\end{DoxyCode}
\mbox{\Hypertarget{mqtt__sn__message_8c_a3f256895389ec2141c30c34b7c86d366}\label{mqtt__sn__message_8c_a3f256895389ec2141c30c34b7c86d366}} 
\index{mqtt\+\_\+sn\+\_\+message.\+c@{mqtt\+\_\+sn\+\_\+message.\+c}!mqtt\+Sn\+Parse\+Will\+Topic\+Req@{mqtt\+Sn\+Parse\+Will\+Topic\+Req}}
\index{mqtt\+Sn\+Parse\+Will\+Topic\+Req@{mqtt\+Sn\+Parse\+Will\+Topic\+Req}!mqtt\+\_\+sn\+\_\+message.\+c@{mqtt\+\_\+sn\+\_\+message.\+c}}
\subsubsection{\texorpdfstring{mqtt\+Sn\+Parse\+Will\+Topic\+Req()}{mqttSnParseWillTopicReq()}}
{\footnotesize\ttfamily \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689c}{error\+\_\+t} mqtt\+Sn\+Parse\+Will\+Topic\+Req (\begin{DoxyParamCaption}\item[{const \hyperlink{structMqttSnMessage}{Mqtt\+Sn\+Message} $\ast$}]{message }\end{DoxyParamCaption})}



Parse W\+I\+L\+L\+T\+O\+P\+I\+C\+R\+EQ message. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em message} & Pointer to the M\+Q\+T\+T-\/\+SN message \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Error code 
\end{DoxyReturn}


Definition at line 935 of file mqtt\+\_\+sn\+\_\+message.\+c.


\begin{DoxyCode}
936 \{
937    \textcolor{comment}{//The WILLTOPICREQ message has only a header and no variable part}
938    \textcolor{keywordflow}{return} \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689cabf350750d0d4fabd8954c0f1e9bbae94}{NO\_ERROR};
939 \}
\end{DoxyCode}
\mbox{\Hypertarget{mqtt__sn__message_8c_a7ab629d588fc1fa3271abe36fa971f15}\label{mqtt__sn__message_8c_a7ab629d588fc1fa3271abe36fa971f15}} 
\index{mqtt\+\_\+sn\+\_\+message.\+c@{mqtt\+\_\+sn\+\_\+message.\+c}!mqtt\+Sn\+Parse\+Will\+Topic\+Resp@{mqtt\+Sn\+Parse\+Will\+Topic\+Resp}}
\index{mqtt\+Sn\+Parse\+Will\+Topic\+Resp@{mqtt\+Sn\+Parse\+Will\+Topic\+Resp}!mqtt\+\_\+sn\+\_\+message.\+c@{mqtt\+\_\+sn\+\_\+message.\+c}}
\subsubsection{\texorpdfstring{mqtt\+Sn\+Parse\+Will\+Topic\+Resp()}{mqttSnParseWillTopicResp()}}
{\footnotesize\ttfamily \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689c}{error\+\_\+t} mqtt\+Sn\+Parse\+Will\+Topic\+Resp (\begin{DoxyParamCaption}\item[{const \hyperlink{structMqttSnMessage}{Mqtt\+Sn\+Message} $\ast$}]{message,  }\item[{\hyperlink{mqtt__sn__common_8h_aa8ae09a48836472262f42c1f09638e9c}{Mqtt\+Sn\+Return\+Code} $\ast$}]{return\+Code }\end{DoxyParamCaption})}



Parse W\+I\+L\+L\+T\+O\+P\+I\+C\+R\+E\+SP message. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em message} & Pointer to the M\+Q\+T\+T-\/\+SN message \\
\hline
\mbox{\tt out}  & {\em return\+Code} & Return code \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Error code 
\end{DoxyReturn}


Definition at line 1343 of file mqtt\+\_\+sn\+\_\+message.\+c.


\begin{DoxyCode}
1345 \{
1346    \textcolor{keywordtype}{size\_t} \hyperlink{dtls__misc_8h_ab43ca82dd7fa2a0e56f941032ef324c4}{length};
1347    \textcolor{keyword}{const} \hyperlink{mqtt__sn__common_8h_a2fad6a12fc33c5a5a84954759387b7cd}{MqttSnWillTopicResp} *willTopicResp;
1348 
1349    \textcolor{comment}{//Point to the WILLTOPICRESP message}
1350    willTopicResp = (\hyperlink{mqtt__sn__common_8h_a2fad6a12fc33c5a5a84954759387b7cd}{MqttSnWillTopicResp} *) (message->\hyperlink{structMqttSnMessage_a8e68c69d0e3ee59c0cc88aa146fe489a}{buffer} + message->
      \hyperlink{structMqttSnMessage_aa1c2334a5ac954ee288fd66eabfb17ac}{pos});
1351    \textcolor{comment}{//Calculate the length of the message}
1352    length = message->\hyperlink{structMqttSnMessage_a717fa07b0fe9c37cba433a2e913332d0}{length} - message->\hyperlink{structMqttSnMessage_aa1c2334a5ac954ee288fd66eabfb17ac}{pos};
1353 
1354    \textcolor{comment}{//Check the length of the message}
1355    \textcolor{keywordflow}{if}(length < \textcolor{keyword}{sizeof}(\hyperlink{mqtt__sn__common_8h_a2fad6a12fc33c5a5a84954759387b7cd}{MqttSnWillTopicResp}))
1356       \textcolor{keywordflow}{return} \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689cae5c014519c3ac2540447887ddca1bd28}{ERROR\_INVALID\_LENGTH};
1357 
1358    \textcolor{comment}{//Get return code}
1359    *\hyperlink{mqtt__sn__common_8h_aa43af56bba229c3214623f0f0c23bf6e}{returnCode} = (\hyperlink{mqtt__sn__common_8h_aa8ae09a48836472262f42c1f09638e9c}{MqttSnReturnCode}) willTopicResp->returnCode;
1360 
1361    \textcolor{comment}{//Successful processing}
1362    \textcolor{keywordflow}{return} \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689cabf350750d0d4fabd8954c0f1e9bbae94}{NO\_ERROR};
1363 \}
\end{DoxyCode}
