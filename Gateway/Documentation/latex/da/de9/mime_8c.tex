\hypertarget{mime_8c}{}\section{cyclone\+\_\+tcp/http/mime.c File Reference}
\label{mime_8c}\index{cyclone\+\_\+tcp/http/mime.\+c@{cyclone\+\_\+tcp/http/mime.\+c}}


M\+I\+ME (Multipurpose Internet Mail Extensions)  


{\ttfamily \#include \char`\"{}core/net.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}http/mime.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}debug.\+h\char`\"{}}\newline
\subsection*{Macros}
\begin{DoxyCompactItemize}
\item 
\#define \hyperlink{mime_8c_afcdf5e66fd927a7f4cc64295acd20407}{T\+R\+A\+C\+E\+\_\+\+L\+E\+V\+EL}~\hyperlink{net__config_8h_ace1dd0cc4628f20c72a1d8dc9612d2f1}{H\+T\+T\+P\+\_\+\+T\+R\+A\+C\+E\+\_\+\+L\+E\+V\+EL}
\end{DoxyCompactItemize}
\subsection*{Functions}
\begin{DoxyCompactItemize}
\item 
const \hyperlink{compiler__port_8h_a40bb5262bf908c328fbcfbe5d29d0201}{char\+\_\+t} $\ast$ \hyperlink{mime_8c_a9e79374594b83b65457d42c5589db7e0}{mime\+Get\+Type} (const \hyperlink{compiler__port_8h_a40bb5262bf908c328fbcfbe5d29d0201}{char\+\_\+t} $\ast$\hyperlink{tftp__common_8h_a054704ecfbf9f8eea80cd1d120b8cf62}{filename})
\begin{DoxyCompactList}\small\item\em Get the M\+I\+ME type from a given extension. \end{DoxyCompactList}\end{DoxyCompactItemize}
\subsection*{Variables}
\begin{DoxyCompactItemize}
\item 
static const \hyperlink{structMimeType}{Mime\+Type} \hyperlink{mime_8c_aeed74fed83cb8ed4abaca73e02e660f9}{mime\+Type\+List} \mbox{[}$\,$\mbox{]}
\end{DoxyCompactItemize}


\subsection{Detailed Description}
M\+I\+ME (Multipurpose Internet Mail Extensions) 

\hypertarget{pic32mz__ef__curiosity_8h_License}{}\subsection{License}\label{pic32mz__ef__curiosity_8h_License}
S\+P\+D\+X-\/\+License-\/\+Identifier\+: G\+P\+L-\/2.\+0-\/or-\/later

Copyright (C) 2010-\/2019 Oryx Embedded S\+A\+RL. All rights reserved.

This file is part of Cyclone\+T\+CP Open.

This program is free software; you can redistribute it and/or modify it under the terms of the G\+NU General Public License as published by the Free Software Foundation; either version 2 of the License, or (at your option) any later version.

This program is distributed in the hope that it will be useful, but W\+I\+T\+H\+O\+UT A\+NY W\+A\+R\+R\+A\+N\+TY; without even the implied warranty of M\+E\+R\+C\+H\+A\+N\+T\+A\+B\+I\+L\+I\+TY or F\+I\+T\+N\+E\+SS F\+OR A P\+A\+R\+T\+I\+C\+U\+L\+AR P\+U\+R\+P\+O\+SE. See the G\+NU General Public License for more details.

You should have received a copy of the G\+NU General Public License along with this program; if not, write to the Free Software Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-\/1301, U\+SA.

\begin{DoxyAuthor}{Author}
Oryx Embedded S\+A\+RL (www.\+oryx-\/embedded.\+com) 
\end{DoxyAuthor}
\begin{DoxyVersion}{Version}
1.\+9.\+6 
\end{DoxyVersion}


\subsection{Macro Definition Documentation}
\mbox{\Hypertarget{mime_8c_afcdf5e66fd927a7f4cc64295acd20407}\label{mime_8c_afcdf5e66fd927a7f4cc64295acd20407}} 
\index{mime.\+c@{mime.\+c}!T\+R\+A\+C\+E\+\_\+\+L\+E\+V\+EL@{T\+R\+A\+C\+E\+\_\+\+L\+E\+V\+EL}}
\index{T\+R\+A\+C\+E\+\_\+\+L\+E\+V\+EL@{T\+R\+A\+C\+E\+\_\+\+L\+E\+V\+EL}!mime.\+c@{mime.\+c}}
\subsubsection{\texorpdfstring{T\+R\+A\+C\+E\+\_\+\+L\+E\+V\+EL}{TRACE\_LEVEL}}
{\footnotesize\ttfamily \#define T\+R\+A\+C\+E\+\_\+\+L\+E\+V\+EL~\hyperlink{net__config_8h_ace1dd0cc4628f20c72a1d8dc9612d2f1}{H\+T\+T\+P\+\_\+\+T\+R\+A\+C\+E\+\_\+\+L\+E\+V\+EL}}



Definition at line 32 of file mime.\+c.



\subsection{Function Documentation}
\mbox{\Hypertarget{mime_8c_a9e79374594b83b65457d42c5589db7e0}\label{mime_8c_a9e79374594b83b65457d42c5589db7e0}} 
\index{mime.\+c@{mime.\+c}!mime\+Get\+Type@{mime\+Get\+Type}}
\index{mime\+Get\+Type@{mime\+Get\+Type}!mime.\+c@{mime.\+c}}
\subsubsection{\texorpdfstring{mime\+Get\+Type()}{mimeGetType()}}
{\footnotesize\ttfamily const \hyperlink{compiler__port_8h_a40bb5262bf908c328fbcfbe5d29d0201}{char\+\_\+t}$\ast$ mime\+Get\+Type (\begin{DoxyParamCaption}\item[{const \hyperlink{compiler__port_8h_a40bb5262bf908c328fbcfbe5d29d0201}{char\+\_\+t} $\ast$}]{filename }\end{DoxyParamCaption})}



Get the M\+I\+ME type from a given extension. 

This function translates a filename or a file extension into a M\+I\+ME type


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em filename} & Filename from which to extract the M\+I\+ME type \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
N\+U\+L\+L-\/terminated string containing the associated M\+I\+ME type 
\end{DoxyReturn}


Definition at line 113 of file mime.\+c.


\begin{DoxyCode}
114 \{
115    \hyperlink{compiler__port_8h_a12a1e9b3ce141648783a82445d02b58d}{uint\_t} i;
116    \hyperlink{compiler__port_8h_a12a1e9b3ce141648783a82445d02b58d}{uint\_t} \hyperlink{dhcpv6__common_8h_a5a648f5ec00c526b0dfa2df7a272c6c0}{n};
117    \hyperlink{compiler__port_8h_a12a1e9b3ce141648783a82445d02b58d}{uint\_t} \hyperlink{ndp_8h_a6b3284d8492267a77ca46948daf5545e}{m};
118 
119    \textcolor{comment}{//MIME type for unknown extensions}
120    \textcolor{keyword}{static} \textcolor{keyword}{const} \hyperlink{compiler__port_8h_a40bb5262bf908c328fbcfbe5d29d0201}{char\_t} defaultMimeType[] = \textcolor{stringliteral}{"application/octet-stream"};
121 
122    \textcolor{comment}{//Valid filename?}
123    \textcolor{keywordflow}{if}(\hyperlink{tftp__common_8h_a054704ecfbf9f8eea80cd1d120b8cf62}{filename} != \hyperlink{group__BSPDefine_ga070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL})
124    \{
125       \textcolor{comment}{//Get the length of the specified filename}
126       n = strlen(\hyperlink{tftp__common_8h_a054704ecfbf9f8eea80cd1d120b8cf62}{filename});
127 
128       \textcolor{comment}{//Search the MIME type that matches the specified extension}
129       \textcolor{keywordflow}{for}(i = 0; i < \hyperlink{os__port_8h_aa1394a41d43c0f3fd30febe41c7bb340}{arraysize}(\hyperlink{mime_8c_aeed74fed83cb8ed4abaca73e02e660f9}{mimeTypeList}); i++)
130       \{
131          \textcolor{comment}{//Length of the extension}
132          m = strlen(\hyperlink{mime_8c_aeed74fed83cb8ed4abaca73e02e660f9}{mimeTypeList}[i].extension);
133          \textcolor{comment}{//Compare file extensions}
134          \textcolor{keywordflow}{if}(m <= n && !\hyperlink{os__port__windows_8h_ac99ec3f1036620727a68aa8c25a8963c}{strcasecmp}(\hyperlink{tftp__common_8h_a054704ecfbf9f8eea80cd1d120b8cf62}{filename} + n - m, 
      \hyperlink{mime_8c_aeed74fed83cb8ed4abaca73e02e660f9}{mimeTypeList}[i].extension))
135             \textcolor{keywordflow}{return} \hyperlink{mime_8c_aeed74fed83cb8ed4abaca73e02e660f9}{mimeTypeList}[i].\hyperlink{structMimeType_ac2acbe0a170d917f3d003c768ab6d707}{type};
136       \}
137    \}
138 
139    \textcolor{comment}{//Return the default MIME type when an unknown extension is encountered}
140    \textcolor{keywordflow}{return} defaultMimeType;
141 \}
\end{DoxyCode}


\subsection{Variable Documentation}
\mbox{\Hypertarget{mime_8c_aeed74fed83cb8ed4abaca73e02e660f9}\label{mime_8c_aeed74fed83cb8ed4abaca73e02e660f9}} 
\index{mime.\+c@{mime.\+c}!mime\+Type\+List@{mime\+Type\+List}}
\index{mime\+Type\+List@{mime\+Type\+List}!mime.\+c@{mime.\+c}}
\subsubsection{\texorpdfstring{mime\+Type\+List}{mimeTypeList}}
{\footnotesize\ttfamily const \hyperlink{structMimeType}{Mime\+Type} mime\+Type\+List\mbox{[}$\,$\mbox{]}\hspace{0.3cm}{\ttfamily [static]}}



Definition at line 40 of file mime.\+c.

