\hypertarget{str_8c}{}\section{common/str.c File Reference}
\label{str_8c}\index{common/str.\+c@{common/str.\+c}}


String manipulation helper functions.  


{\ttfamily \#include $<$stdio.\+h$>$}\newline
{\ttfamily \#include $<$string.\+h$>$}\newline
{\ttfamily \#include $<$ctype.\+h$>$}\newline
{\ttfamily \#include \char`\"{}str.\+h\char`\"{}}\newline
\subsection*{Functions}
\begin{DoxyCompactItemize}
\item 
\hyperlink{compiler__port_8h_a40bb5262bf908c328fbcfbe5d29d0201}{char\+\_\+t} $\ast$ \hyperlink{str_8c_a9006c65380cbc2ab5e7e02e57c8d3d4e}{str\+Duplicate} (const \hyperlink{compiler__port_8h_a40bb5262bf908c328fbcfbe5d29d0201}{char\+\_\+t} $\ast$\hyperlink{ndp_8h_a2dee666f0c1fe072c549ff86b1d0a8ab}{s})
\begin{DoxyCompactList}\small\item\em Duplicate a string. \end{DoxyCompactList}\item 
\hyperlink{compiler__port_8h_a40bb5262bf908c328fbcfbe5d29d0201}{char\+\_\+t} $\ast$ \hyperlink{str_8c_ade9441b268416af6b024eb2ba3a5847e}{str\+Trim\+Whitespace} (\hyperlink{compiler__port_8h_a40bb5262bf908c328fbcfbe5d29d0201}{char\+\_\+t} $\ast$\hyperlink{ndp_8h_a2dee666f0c1fe072c549ff86b1d0a8ab}{s})
\begin{DoxyCompactList}\small\item\em Removes all leading and trailing whitespace from a string. \end{DoxyCompactList}\item 
void \hyperlink{str_8c_a213a401a08b4083cbddd0fb4673ba430}{str\+Remove\+Trailing\+Space} (\hyperlink{compiler__port_8h_a40bb5262bf908c328fbcfbe5d29d0201}{char\+\_\+t} $\ast$\hyperlink{ndp_8h_a2dee666f0c1fe072c549ff86b1d0a8ab}{s})
\begin{DoxyCompactList}\small\item\em Removes all trailing whitespace from a string. \end{DoxyCompactList}\item 
void \hyperlink{str_8c_aaef0a79f30913d2fb6025453ad2b9d69}{str\+Replace\+Char} (\hyperlink{compiler__port_8h_a40bb5262bf908c328fbcfbe5d29d0201}{char\+\_\+t} $\ast$\hyperlink{ndp_8h_a2dee666f0c1fe072c549ff86b1d0a8ab}{s}, \hyperlink{compiler__port_8h_a40bb5262bf908c328fbcfbe5d29d0201}{char\+\_\+t} old\+Char, \hyperlink{compiler__port_8h_a40bb5262bf908c328fbcfbe5d29d0201}{char\+\_\+t} new\+Char)
\begin{DoxyCompactList}\small\item\em Replace all occurrences of the specified character. \end{DoxyCompactList}\item 
\hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689c}{error\+\_\+t} \hyperlink{str_8c_ac10cb0bca1fb0c39b2c765afd068486d}{str\+Safe\+Copy} (\hyperlink{compiler__port_8h_a40bb5262bf908c328fbcfbe5d29d0201}{char\+\_\+t} $\ast$dest, const \hyperlink{compiler__port_8h_a40bb5262bf908c328fbcfbe5d29d0201}{char\+\_\+t} $\ast$src, size\+\_\+t dest\+Size)
\begin{DoxyCompactList}\small\item\em Copy string. \end{DoxyCompactList}\end{DoxyCompactItemize}


\subsection{Detailed Description}
String manipulation helper functions. 

\hypertarget{pic32mz__ef__curiosity_8h_License}{}\subsection{License}\label{pic32mz__ef__curiosity_8h_License}
S\+P\+D\+X-\/\+License-\/\+Identifier\+: G\+P\+L-\/2.\+0-\/or-\/later

Copyright (C) 2010-\/2019 Oryx Embedded S\+A\+RL. All rights reserved.

This program is free software; you can redistribute it and/or modify it under the terms of the G\+NU General Public License as published by the Free Software Foundation; either version 2 of the License, or (at your option) any later version.

This program is distributed in the hope that it will be useful, but W\+I\+T\+H\+O\+UT A\+NY W\+A\+R\+R\+A\+N\+TY; without even the implied warranty of M\+E\+R\+C\+H\+A\+N\+T\+A\+B\+I\+L\+I\+TY or F\+I\+T\+N\+E\+SS F\+OR A P\+A\+R\+T\+I\+C\+U\+L\+AR P\+U\+R\+P\+O\+SE. See the G\+NU General Public License for more details.

You should have received a copy of the G\+NU General Public License along with this program; if not, write to the Free Software Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-\/1301, U\+SA.

\begin{DoxyAuthor}{Author}
Oryx Embedded S\+A\+RL (www.\+oryx-\/embedded.\+com) 
\end{DoxyAuthor}
\begin{DoxyVersion}{Version}
1.\+9.\+6 
\end{DoxyVersion}


\subsection{Function Documentation}
\mbox{\Hypertarget{str_8c_a9006c65380cbc2ab5e7e02e57c8d3d4e}\label{str_8c_a9006c65380cbc2ab5e7e02e57c8d3d4e}} 
\index{str.\+c@{str.\+c}!str\+Duplicate@{str\+Duplicate}}
\index{str\+Duplicate@{str\+Duplicate}!str.\+c@{str.\+c}}
\subsubsection{\texorpdfstring{str\+Duplicate()}{strDuplicate()}}
{\footnotesize\ttfamily \hyperlink{compiler__port_8h_a40bb5262bf908c328fbcfbe5d29d0201}{char\+\_\+t}$\ast$ str\+Duplicate (\begin{DoxyParamCaption}\item[{const \hyperlink{compiler__port_8h_a40bb5262bf908c328fbcfbe5d29d0201}{char\+\_\+t} $\ast$}]{s }\end{DoxyParamCaption})}



Duplicate a string. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em s} & Pointer to a constant N\+U\+L\+L-\/terminated character string \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Address of the string that was copied, or N\+U\+LL if the string cannot be copied 
\end{DoxyReturn}


Definition at line 42 of file str.\+c.


\begin{DoxyCode}
43 \{
44    \hyperlink{compiler__port_8h_a12a1e9b3ce141648783a82445d02b58d}{uint\_t} \hyperlink{dhcpv6__common_8h_a5a648f5ec00c526b0dfa2df7a272c6c0}{n};
45    \hyperlink{compiler__port_8h_a40bb5262bf908c328fbcfbe5d29d0201}{char\_t} *\hyperlink{ndp_8h_a6519522ad9a6f45e7a8d25d31392a977}{p};
46 
47    \textcolor{comment}{//Pointer to the newly created string}
48    p = \hyperlink{group__BSPDefine_ga070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL};
49 
50    \textcolor{comment}{//Valid string?}
51    \textcolor{keywordflow}{if}(\hyperlink{md2_8c_adf356ff381033f761b7de5f76e763a45}{s} != \hyperlink{group__BSPDefine_ga070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL})
52    \{
53       \textcolor{comment}{//Calculate the length occupied by the input string}
54       n = strlen(\hyperlink{md2_8c_adf356ff381033f761b7de5f76e763a45}{s}) + 1;
55 
56       \textcolor{comment}{//Allocate memory to hold the new string}
57       p = \hyperlink{os__port__chibios_8c_ae86758dcd9fc3c98247ae19815987c9a}{osAllocMem}(n);
58 
59       \textcolor{comment}{//Successful memory allocation?}
60       \textcolor{keywordflow}{if}(p != \hyperlink{group__BSPDefine_ga070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL})
61       \{
62          \textcolor{comment}{//Make a copy of the input string}
63          memcpy(p, \hyperlink{md2_8c_adf356ff381033f761b7de5f76e763a45}{s}, n);
64       \}
65    \}
66 
67    \textcolor{comment}{//Return a pointer to the newly created string}
68    \textcolor{keywordflow}{return} \hyperlink{ndp_8h_a6519522ad9a6f45e7a8d25d31392a977}{p};
69 \}
\end{DoxyCode}
\mbox{\Hypertarget{str_8c_a213a401a08b4083cbddd0fb4673ba430}\label{str_8c_a213a401a08b4083cbddd0fb4673ba430}} 
\index{str.\+c@{str.\+c}!str\+Remove\+Trailing\+Space@{str\+Remove\+Trailing\+Space}}
\index{str\+Remove\+Trailing\+Space@{str\+Remove\+Trailing\+Space}!str.\+c@{str.\+c}}
\subsubsection{\texorpdfstring{str\+Remove\+Trailing\+Space()}{strRemoveTrailingSpace()}}
{\footnotesize\ttfamily void str\+Remove\+Trailing\+Space (\begin{DoxyParamCaption}\item[{\hyperlink{compiler__port_8h_a40bb5262bf908c328fbcfbe5d29d0201}{char\+\_\+t} $\ast$}]{s }\end{DoxyParamCaption})}



Removes all trailing whitespace from a string. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in,out}  & {\em s} & Pointer to a N\+U\+L\+L-\/terminated character string \\
\hline
\end{DoxyParams}


Definition at line 117 of file str.\+c.


\begin{DoxyCode}
118 \{
119    \hyperlink{compiler__port_8h_a40bb5262bf908c328fbcfbe5d29d0201}{char\_t} *end;
120 
121    \textcolor{comment}{//Search for the first whitespace to remove}
122    \textcolor{comment}{//at the end of the string}
123    \textcolor{keywordflow}{for}(end = \hyperlink{group__BSPDefine_ga070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL}; *\hyperlink{md2_8c_adf356ff381033f761b7de5f76e763a45}{s} != \textcolor{charliteral}{'\(\backslash\)0'}; \hyperlink{md2_8c_adf356ff381033f761b7de5f76e763a45}{s}++)
124    \{
125       \textcolor{keywordflow}{if}(!isspace((\hyperlink{stdint_8h_aba7bc1797add20fe3efdf37ced1182c5}{uint8\_t}) *\hyperlink{md2_8c_adf356ff381033f761b7de5f76e763a45}{s}))
126          end = \hyperlink{group__BSPDefine_ga070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL};
127       \textcolor{keywordflow}{else} \textcolor{keywordflow}{if}(!end)
128          end = \hyperlink{md2_8c_adf356ff381033f761b7de5f76e763a45}{s};
129    \}
130 
131    \textcolor{comment}{//Trim whitespace from the end}
132    \textcolor{keywordflow}{if}(end)
133       *end = \textcolor{charliteral}{'\(\backslash\)0'};
134 \}
\end{DoxyCode}
\mbox{\Hypertarget{str_8c_aaef0a79f30913d2fb6025453ad2b9d69}\label{str_8c_aaef0a79f30913d2fb6025453ad2b9d69}} 
\index{str.\+c@{str.\+c}!str\+Replace\+Char@{str\+Replace\+Char}}
\index{str\+Replace\+Char@{str\+Replace\+Char}!str.\+c@{str.\+c}}
\subsubsection{\texorpdfstring{str\+Replace\+Char()}{strReplaceChar()}}
{\footnotesize\ttfamily void str\+Replace\+Char (\begin{DoxyParamCaption}\item[{\hyperlink{compiler__port_8h_a40bb5262bf908c328fbcfbe5d29d0201}{char\+\_\+t} $\ast$}]{s,  }\item[{\hyperlink{compiler__port_8h_a40bb5262bf908c328fbcfbe5d29d0201}{char\+\_\+t}}]{old\+Char,  }\item[{\hyperlink{compiler__port_8h_a40bb5262bf908c328fbcfbe5d29d0201}{char\+\_\+t}}]{new\+Char }\end{DoxyParamCaption})}



Replace all occurrences of the specified character. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in,out}  & {\em s} & Pointer to a N\+U\+L\+L-\/terminated character string \\
\hline
\mbox{\tt in}  & {\em old\+Char} & The character to be replaced \\
\hline
\mbox{\tt in}  & {\em new\+Char} & The character that will replace all occurrences of old\+Char \\
\hline
\end{DoxyParams}


Definition at line 144 of file str.\+c.


\begin{DoxyCode}
145 \{
146    \textcolor{comment}{//Parse the specified string}
147    \textcolor{keywordflow}{while}(*\hyperlink{md2_8c_adf356ff381033f761b7de5f76e763a45}{s} != \textcolor{charliteral}{'\(\backslash\)0'})
148    \{
149       \textcolor{comment}{//Remplace all occurrences of the specified character}
150       \textcolor{keywordflow}{if}(*\hyperlink{md2_8c_adf356ff381033f761b7de5f76e763a45}{s} == oldChar)
151          *\hyperlink{md2_8c_adf356ff381033f761b7de5f76e763a45}{s} = newChar;
152 
153       \textcolor{comment}{//Next character}
154       \hyperlink{md2_8c_adf356ff381033f761b7de5f76e763a45}{s}++;
155    \}
156 \}
\end{DoxyCode}
\mbox{\Hypertarget{str_8c_ac10cb0bca1fb0c39b2c765afd068486d}\label{str_8c_ac10cb0bca1fb0c39b2c765afd068486d}} 
\index{str.\+c@{str.\+c}!str\+Safe\+Copy@{str\+Safe\+Copy}}
\index{str\+Safe\+Copy@{str\+Safe\+Copy}!str.\+c@{str.\+c}}
\subsubsection{\texorpdfstring{str\+Safe\+Copy()}{strSafeCopy()}}
{\footnotesize\ttfamily \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689c}{error\+\_\+t} str\+Safe\+Copy (\begin{DoxyParamCaption}\item[{\hyperlink{compiler__port_8h_a40bb5262bf908c328fbcfbe5d29d0201}{char\+\_\+t} $\ast$}]{dest,  }\item[{const \hyperlink{compiler__port_8h_a40bb5262bf908c328fbcfbe5d29d0201}{char\+\_\+t} $\ast$}]{src,  }\item[{size\+\_\+t}]{dest\+Size }\end{DoxyParamCaption})}



Copy string. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt out}  & {\em dest} & Pointer to the destination string \\
\hline
\mbox{\tt in}  & {\em src} & Pointer to the source string \\
\hline
\mbox{\tt in}  & {\em dest\+Size} & Size of the buffer allocated for the destination string \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Error code 
\end{DoxyReturn}


Definition at line 167 of file str.\+c.


\begin{DoxyCode}
168 \{
169    \textcolor{keywordtype}{size\_t} \hyperlink{dhcpv6__common_8h_a5a648f5ec00c526b0dfa2df7a272c6c0}{n};
170 
171    \textcolor{comment}{//Check parameters}
172    \textcolor{keywordflow}{if}(dest == \hyperlink{group__BSPDefine_ga070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL} || src == \hyperlink{group__BSPDefine_ga070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL} || destSize < 1)
173       \textcolor{keywordflow}{return} \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689caeae4b12e06d727d085f75f79a820f2e8}{ERROR\_INVALID\_PARAMETER};
174 
175    \textcolor{comment}{//Get the length of the source name}
176    n = strlen(src);
177    \textcolor{comment}{//Limit the number of characters to be copied}
178    n = \hyperlink{os__port_8h_a3acffbd305ee72dcd4593c0d8af64a4f}{MIN}(n, destSize - 1);
179 
180    \textcolor{comment}{//Copy the string}
181    strncpy(dest, src, n);
182    \textcolor{comment}{//Properly terminate the string with a NULL character}
183    dest[\hyperlink{dhcpv6__common_8h_a5a648f5ec00c526b0dfa2df7a272c6c0}{n}] = \textcolor{charliteral}{'\(\backslash\)0'};
184 
185    \textcolor{comment}{//Successful processing}
186    \textcolor{keywordflow}{return} \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689cabf350750d0d4fabd8954c0f1e9bbae94}{NO\_ERROR};
187 \}
\end{DoxyCode}
\mbox{\Hypertarget{str_8c_ade9441b268416af6b024eb2ba3a5847e}\label{str_8c_ade9441b268416af6b024eb2ba3a5847e}} 
\index{str.\+c@{str.\+c}!str\+Trim\+Whitespace@{str\+Trim\+Whitespace}}
\index{str\+Trim\+Whitespace@{str\+Trim\+Whitespace}!str.\+c@{str.\+c}}
\subsubsection{\texorpdfstring{str\+Trim\+Whitespace()}{strTrimWhitespace()}}
{\footnotesize\ttfamily \hyperlink{compiler__port_8h_a40bb5262bf908c328fbcfbe5d29d0201}{char\+\_\+t}$\ast$ str\+Trim\+Whitespace (\begin{DoxyParamCaption}\item[{\hyperlink{compiler__port_8h_a40bb5262bf908c328fbcfbe5d29d0201}{char\+\_\+t} $\ast$}]{s }\end{DoxyParamCaption})}



Removes all leading and trailing whitespace from a string. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em s} & The string that will be trimmed \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
String with whitespace stripped from the beginning and end 
\end{DoxyReturn}


Definition at line 78 of file str.\+c.


\begin{DoxyCode}
79 \{
80    \hyperlink{compiler__port_8h_a40bb5262bf908c328fbcfbe5d29d0201}{char\_t} *end;
81    \hyperlink{compiler__port_8h_a40bb5262bf908c328fbcfbe5d29d0201}{char\_t} *result;
82 
83    \textcolor{comment}{//Trim whitespace from the beginning}
84    \textcolor{keywordflow}{while}(isspace((\hyperlink{stdint_8h_aba7bc1797add20fe3efdf37ced1182c5}{uint8\_t}) *\hyperlink{md2_8c_adf356ff381033f761b7de5f76e763a45}{s}))
85    \{
86       s++;
87    \}
88 
89    \textcolor{comment}{//Save the current position}
90    result = \hyperlink{md2_8c_adf356ff381033f761b7de5f76e763a45}{s};
91 
92    \textcolor{comment}{//Search for the first whitespace to remove}
93    \textcolor{comment}{//at the end of the string}
94    \textcolor{keywordflow}{for}(end = \hyperlink{group__BSPDefine_ga070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL}; *s != \textcolor{charliteral}{'\(\backslash\)0'}; s++)
95    \{
96       \textcolor{keywordflow}{if}(!isspace((\hyperlink{stdint_8h_aba7bc1797add20fe3efdf37ced1182c5}{uint8\_t}) *s))
97          end = \hyperlink{group__BSPDefine_ga070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL};
98       \textcolor{keywordflow}{else} \textcolor{keywordflow}{if}(!end)
99          end = \hyperlink{md2_8c_adf356ff381033f761b7de5f76e763a45}{s};
100    \}
101 
102    \textcolor{comment}{//Trim whitespace from the end}
103    \textcolor{keywordflow}{if}(end)
104       *end = \textcolor{charliteral}{'\(\backslash\)0'};
105 
106    \textcolor{comment}{//Return the string with leading and}
107    \textcolor{comment}{//trailing whitespace omitted}
108    \textcolor{keywordflow}{return} result;
109 \}
\end{DoxyCode}
