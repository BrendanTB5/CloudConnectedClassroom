\hypertarget{enc28j60__driver_8c}{}\section{cyclone\+\_\+tcp/drivers/eth/enc28j60\+\_\+driver.c File Reference}
\label{enc28j60__driver_8c}\index{cyclone\+\_\+tcp/drivers/eth/enc28j60\+\_\+driver.\+c@{cyclone\+\_\+tcp/drivers/eth/enc28j60\+\_\+driver.\+c}}


E\+N\+C28\+J60 Ethernet controller.  


{\ttfamily \#include $<$limits.\+h$>$}\newline
{\ttfamily \#include \char`\"{}core/net.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}drivers/eth/enc28j60\+\_\+driver.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}debug.\+h\char`\"{}}\newline
\subsection*{Macros}
\begin{DoxyCompactItemize}
\item 
\#define \hyperlink{enc28j60__driver_8c_afcdf5e66fd927a7f4cc64295acd20407}{T\+R\+A\+C\+E\+\_\+\+L\+E\+V\+EL}~\hyperlink{net__config_8h_a880f48968c7969b328d5061cd3db0f36}{N\+I\+C\+\_\+\+T\+R\+A\+C\+E\+\_\+\+L\+E\+V\+EL}
\end{DoxyCompactItemize}
\subsection*{Functions}
\begin{DoxyCompactItemize}
\item 
\hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689c}{error\+\_\+t} \hyperlink{enc28j60__driver_8c_adae3d487c5a50307f4d6276b65d5439f}{enc28j60\+Init} (\hyperlink{net_8h_a2234db8911a1148c9159979d8f5e0d6b}{Net\+Interface} $\ast$interface)
\begin{DoxyCompactList}\small\item\em E\+N\+C28\+J60 controller initialization. \end{DoxyCompactList}\item 
void \hyperlink{enc28j60__driver_8c_a8a85460817c2cfc22471cb62df4809ac}{enc28j60\+Tick} (\hyperlink{net_8h_a2234db8911a1148c9159979d8f5e0d6b}{Net\+Interface} $\ast$interface)
\begin{DoxyCompactList}\small\item\em E\+N\+C28\+J60 timer handler. \end{DoxyCompactList}\item 
void \hyperlink{enc28j60__driver_8c_a6b1900118c77311ee7866fed17df9d6b}{enc28j60\+Enable\+Irq} (\hyperlink{net_8h_a2234db8911a1148c9159979d8f5e0d6b}{Net\+Interface} $\ast$interface)
\begin{DoxyCompactList}\small\item\em Enable interrupts. \end{DoxyCompactList}\item 
void \hyperlink{enc28j60__driver_8c_a42b985b71a6c7f30d25e5a9a049d2beb}{enc28j60\+Disable\+Irq} (\hyperlink{net_8h_a2234db8911a1148c9159979d8f5e0d6b}{Net\+Interface} $\ast$interface)
\begin{DoxyCompactList}\small\item\em Disable interrupts. \end{DoxyCompactList}\item 
\hyperlink{compiler__port_8h_a812d16e5494522586b3784e55d479912}{bool\+\_\+t} \hyperlink{enc28j60__driver_8c_a4fe538c68666084644945582c5c26bf3}{enc28j60\+Irq\+Handler} (\hyperlink{net_8h_a2234db8911a1148c9159979d8f5e0d6b}{Net\+Interface} $\ast$interface)
\begin{DoxyCompactList}\small\item\em E\+N\+C28\+J60 interrupt service routine. \end{DoxyCompactList}\item 
void \hyperlink{enc28j60__driver_8c_a988c81a8fd6c2bb0a368ab796a282da7}{enc28j60\+Event\+Handler} (\hyperlink{net_8h_a2234db8911a1148c9159979d8f5e0d6b}{Net\+Interface} $\ast$interface)
\begin{DoxyCompactList}\small\item\em E\+N\+C28\+J60 event handler. \end{DoxyCompactList}\item 
\hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689c}{error\+\_\+t} \hyperlink{enc28j60__driver_8c_a7a2c03bac3024d413be406b971a5e717}{enc28j60\+Send\+Packet} (\hyperlink{net_8h_a2234db8911a1148c9159979d8f5e0d6b}{Net\+Interface} $\ast$interface, const \hyperlink{structNetBuffer}{Net\+Buffer} $\ast$buffer, size\+\_\+t \hyperlink{pic32mz_2isr__support_8h_ac0542d92dfcd62c19170fd963f9e5052}{offset})
\begin{DoxyCompactList}\small\item\em Send a packet. \end{DoxyCompactList}\item 
\hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689c}{error\+\_\+t} \hyperlink{enc28j60__driver_8c_ab8aa467e39b8fd3ed32b077d61af25df}{enc28j60\+Receive\+Packet} (\hyperlink{net_8h_a2234db8911a1148c9159979d8f5e0d6b}{Net\+Interface} $\ast$interface)
\begin{DoxyCompactList}\small\item\em Receive a packet. \end{DoxyCompactList}\item 
\hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689c}{error\+\_\+t} \hyperlink{enc28j60__driver_8c_ac4f3dfff48e37f3b5fc2fbddc5b92a49}{enc28j60\+Update\+Mac\+Addr\+Filter} (\hyperlink{net_8h_a2234db8911a1148c9159979d8f5e0d6b}{Net\+Interface} $\ast$interface)
\begin{DoxyCompactList}\small\item\em Configure M\+AC address filtering. \end{DoxyCompactList}\item 
void \hyperlink{enc28j60__driver_8c_a413e2e5e3c561a366b6a978390ad14c5}{enc28j60\+Soft\+Reset} (\hyperlink{net_8h_a2234db8911a1148c9159979d8f5e0d6b}{Net\+Interface} $\ast$interface)
\begin{DoxyCompactList}\small\item\em E\+N\+C28\+J60 controller reset. \end{DoxyCompactList}\item 
void \hyperlink{enc28j60__driver_8c_aa69c3879fd08fdf574ceafcadc42275a}{enc28j60\+Select\+Bank} (\hyperlink{net_8h_a2234db8911a1148c9159979d8f5e0d6b}{Net\+Interface} $\ast$interface, \hyperlink{stdint_8h_a273cf69d639a59973b6019625df33e30}{uint16\+\_\+t} \hyperlink{ndp_8h_a1b452a6c3ab338d73213b321b6750f2b}{address})
\begin{DoxyCompactList}\small\item\em Bank selection. \end{DoxyCompactList}\item 
void \hyperlink{enc28j60__driver_8c_a5d32d56d84553c95dd21744f243199bc}{enc28j60\+Write\+Reg} (\hyperlink{net_8h_a2234db8911a1148c9159979d8f5e0d6b}{Net\+Interface} $\ast$interface, \hyperlink{stdint_8h_a273cf69d639a59973b6019625df33e30}{uint16\+\_\+t} \hyperlink{ndp_8h_a1b452a6c3ab338d73213b321b6750f2b}{address}, \hyperlink{stdint_8h_aba7bc1797add20fe3efdf37ced1182c5}{uint8\+\_\+t} \hyperlink{tftp__common_8h_a5c239a1bb87b52b0f1d6d68c4749cd2a}{data})
\begin{DoxyCompactList}\small\item\em Write E\+N\+C28\+J60 register. \end{DoxyCompactList}\item 
\hyperlink{stdint_8h_aba7bc1797add20fe3efdf37ced1182c5}{uint8\+\_\+t} \hyperlink{enc28j60__driver_8c_a3d1bf45224477a6681bd39462d527398}{enc28j60\+Read\+Reg} (\hyperlink{net_8h_a2234db8911a1148c9159979d8f5e0d6b}{Net\+Interface} $\ast$interface, \hyperlink{stdint_8h_a273cf69d639a59973b6019625df33e30}{uint16\+\_\+t} \hyperlink{ndp_8h_a1b452a6c3ab338d73213b321b6750f2b}{address})
\begin{DoxyCompactList}\small\item\em Read E\+N\+C28\+J60 register. \end{DoxyCompactList}\item 
void \hyperlink{enc28j60__driver_8c_ad9b6811a68677ae16b56fedd09bdee17}{enc28j60\+Write\+Phy\+Reg} (\hyperlink{net_8h_a2234db8911a1148c9159979d8f5e0d6b}{Net\+Interface} $\ast$interface, \hyperlink{stdint_8h_a273cf69d639a59973b6019625df33e30}{uint16\+\_\+t} \hyperlink{ndp_8h_a1b452a6c3ab338d73213b321b6750f2b}{address}, \hyperlink{stdint_8h_a273cf69d639a59973b6019625df33e30}{uint16\+\_\+t} \hyperlink{tftp__common_8h_a5c239a1bb87b52b0f1d6d68c4749cd2a}{data})
\begin{DoxyCompactList}\small\item\em Write P\+HY register. \end{DoxyCompactList}\item 
\hyperlink{stdint_8h_a273cf69d639a59973b6019625df33e30}{uint16\+\_\+t} \hyperlink{enc28j60__driver_8c_aebd1715d9403c56db9811e701bd7c597}{enc28j60\+Read\+Phy\+Reg} (\hyperlink{net_8h_a2234db8911a1148c9159979d8f5e0d6b}{Net\+Interface} $\ast$interface, \hyperlink{stdint_8h_a273cf69d639a59973b6019625df33e30}{uint16\+\_\+t} \hyperlink{ndp_8h_a1b452a6c3ab338d73213b321b6750f2b}{address})
\begin{DoxyCompactList}\small\item\em Read P\+HY register. \end{DoxyCompactList}\item 
void \hyperlink{enc28j60__driver_8c_a9a533c22ff34d8e79197e2a9b025aed5}{enc28j60\+Write\+Buffer} (\hyperlink{net_8h_a2234db8911a1148c9159979d8f5e0d6b}{Net\+Interface} $\ast$interface, const \hyperlink{structNetBuffer}{Net\+Buffer} $\ast$buffer, size\+\_\+t \hyperlink{pic32mz_2isr__support_8h_ac0542d92dfcd62c19170fd963f9e5052}{offset})
\begin{DoxyCompactList}\small\item\em Write S\+R\+AM buffer. \end{DoxyCompactList}\item 
void \hyperlink{enc28j60__driver_8c_a5eb1f7dc06c808e06a05ebbb4fab48d3}{enc28j60\+Read\+Buffer} (\hyperlink{net_8h_a2234db8911a1148c9159979d8f5e0d6b}{Net\+Interface} $\ast$interface, \hyperlink{stdint_8h_aba7bc1797add20fe3efdf37ced1182c5}{uint8\+\_\+t} $\ast$\hyperlink{tftp__common_8h_a5c239a1bb87b52b0f1d6d68c4749cd2a}{data}, size\+\_\+t \hyperlink{ppp_8h_ab2b3adeb2a67e656ff030b56727fd0ac}{length})
\begin{DoxyCompactList}\small\item\em Read S\+R\+AM buffer. \end{DoxyCompactList}\item 
void \hyperlink{enc28j60__driver_8c_a22b496ba8629d4eee803138db70d9389}{enc28j60\+Set\+Bit} (\hyperlink{net_8h_a2234db8911a1148c9159979d8f5e0d6b}{Net\+Interface} $\ast$interface, \hyperlink{stdint_8h_a273cf69d639a59973b6019625df33e30}{uint16\+\_\+t} \hyperlink{ndp_8h_a1b452a6c3ab338d73213b321b6750f2b}{address}, \hyperlink{stdint_8h_a273cf69d639a59973b6019625df33e30}{uint16\+\_\+t} \hyperlink{web__socket_8h_a8a74907784be6c7786c2d060c8d7e10b}{mask})
\begin{DoxyCompactList}\small\item\em Set bit field. \end{DoxyCompactList}\item 
void \hyperlink{enc28j60__driver_8c_ad7a91793941c278b1dc3037151ccfa29}{enc28j60\+Clear\+Bit} (\hyperlink{net_8h_a2234db8911a1148c9159979d8f5e0d6b}{Net\+Interface} $\ast$interface, \hyperlink{stdint_8h_a273cf69d639a59973b6019625df33e30}{uint16\+\_\+t} \hyperlink{ndp_8h_a1b452a6c3ab338d73213b321b6750f2b}{address}, \hyperlink{stdint_8h_a273cf69d639a59973b6019625df33e30}{uint16\+\_\+t} \hyperlink{web__socket_8h_a8a74907784be6c7786c2d060c8d7e10b}{mask})
\begin{DoxyCompactList}\small\item\em Clear bit field. \end{DoxyCompactList}\item 
\hyperlink{stdint_8h_a435d1572bf3f880d55459d9805097f62}{uint32\+\_\+t} \hyperlink{enc28j60__driver_8c_a764bc1510993fcdef53f0a03548f65fa}{enc28j60\+Calc\+Crc} (const void $\ast$\hyperlink{tftp__common_8h_a5c239a1bb87b52b0f1d6d68c4749cd2a}{data}, size\+\_\+t \hyperlink{ppp_8h_ab2b3adeb2a67e656ff030b56727fd0ac}{length})
\begin{DoxyCompactList}\small\item\em C\+RC calculation using the polynomial 0x4\+C11\+D\+B7. \end{DoxyCompactList}\item 
void \hyperlink{enc28j60__driver_8c_a316e66d408a368cbf3a4e477c87100c1}{enc28j60\+Dump\+Reg} (\hyperlink{net_8h_a2234db8911a1148c9159979d8f5e0d6b}{Net\+Interface} $\ast$interface)
\begin{DoxyCompactList}\small\item\em Dump registers for debugging purpose. \end{DoxyCompactList}\item 
void \hyperlink{enc28j60__driver_8c_aafe0776da09c32c8801f984ed15918c7}{enc28j60\+Dump\+Phy\+Reg} (\hyperlink{net_8h_a2234db8911a1148c9159979d8f5e0d6b}{Net\+Interface} $\ast$interface)
\begin{DoxyCompactList}\small\item\em Dump P\+HY registers for debugging purpose. \end{DoxyCompactList}\end{DoxyCompactItemize}
\subsection*{Variables}
\begin{DoxyCompactItemize}
\item 
const \hyperlink{structNicDriver}{Nic\+Driver} \hyperlink{enc28j60__driver_8c_a3cdfa797f475f419c31294f66b3af503}{enc28j60\+Driver}
\begin{DoxyCompactList}\small\item\em E\+N\+C28\+J60 driver. \end{DoxyCompactList}\end{DoxyCompactItemize}


\subsection{Detailed Description}
E\+N\+C28\+J60 Ethernet controller. 

\hypertarget{pic32mz__ef__curiosity_8h_License}{}\subsection{License}\label{pic32mz__ef__curiosity_8h_License}
S\+P\+D\+X-\/\+License-\/\+Identifier\+: G\+P\+L-\/2.\+0-\/or-\/later

Copyright (C) 2010-\/2019 Oryx Embedded S\+A\+RL. All rights reserved.

This file is part of Cyclone\+T\+CP Open.

This program is free software; you can redistribute it and/or modify it under the terms of the G\+NU General Public License as published by the Free Software Foundation; either version 2 of the License, or (at your option) any later version.

This program is distributed in the hope that it will be useful, but W\+I\+T\+H\+O\+UT A\+NY W\+A\+R\+R\+A\+N\+TY; without even the implied warranty of M\+E\+R\+C\+H\+A\+N\+T\+A\+B\+I\+L\+I\+TY or F\+I\+T\+N\+E\+SS F\+OR A P\+A\+R\+T\+I\+C\+U\+L\+AR P\+U\+R\+P\+O\+SE. See the G\+NU General Public License for more details.

You should have received a copy of the G\+NU General Public License along with this program; if not, write to the Free Software Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-\/1301, U\+SA.

\begin{DoxyAuthor}{Author}
Oryx Embedded S\+A\+RL (www.\+oryx-\/embedded.\+com) 
\end{DoxyAuthor}
\begin{DoxyVersion}{Version}
1.\+9.\+6 
\end{DoxyVersion}


\subsection{Macro Definition Documentation}
\mbox{\Hypertarget{enc28j60__driver_8c_afcdf5e66fd927a7f4cc64295acd20407}\label{enc28j60__driver_8c_afcdf5e66fd927a7f4cc64295acd20407}} 
\index{enc28j60\+\_\+driver.\+c@{enc28j60\+\_\+driver.\+c}!T\+R\+A\+C\+E\+\_\+\+L\+E\+V\+EL@{T\+R\+A\+C\+E\+\_\+\+L\+E\+V\+EL}}
\index{T\+R\+A\+C\+E\+\_\+\+L\+E\+V\+EL@{T\+R\+A\+C\+E\+\_\+\+L\+E\+V\+EL}!enc28j60\+\_\+driver.\+c@{enc28j60\+\_\+driver.\+c}}
\subsubsection{\texorpdfstring{T\+R\+A\+C\+E\+\_\+\+L\+E\+V\+EL}{TRACE\_LEVEL}}
{\footnotesize\ttfamily \#define T\+R\+A\+C\+E\+\_\+\+L\+E\+V\+EL~\hyperlink{net__config_8h_a880f48968c7969b328d5061cd3db0f36}{N\+I\+C\+\_\+\+T\+R\+A\+C\+E\+\_\+\+L\+E\+V\+EL}}



Definition at line 32 of file enc28j60\+\_\+driver.\+c.



\subsection{Function Documentation}
\mbox{\Hypertarget{enc28j60__driver_8c_a764bc1510993fcdef53f0a03548f65fa}\label{enc28j60__driver_8c_a764bc1510993fcdef53f0a03548f65fa}} 
\index{enc28j60\+\_\+driver.\+c@{enc28j60\+\_\+driver.\+c}!enc28j60\+Calc\+Crc@{enc28j60\+Calc\+Crc}}
\index{enc28j60\+Calc\+Crc@{enc28j60\+Calc\+Crc}!enc28j60\+\_\+driver.\+c@{enc28j60\+\_\+driver.\+c}}
\subsubsection{\texorpdfstring{enc28j60\+Calc\+Crc()}{enc28j60CalcCrc()}}
{\footnotesize\ttfamily \hyperlink{stdint_8h_a435d1572bf3f880d55459d9805097f62}{uint32\+\_\+t} enc28j60\+Calc\+Crc (\begin{DoxyParamCaption}\item[{const void $\ast$}]{data,  }\item[{size\+\_\+t}]{length }\end{DoxyParamCaption})}



C\+RC calculation using the polynomial 0x4\+C11\+D\+B7. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em data} & Pointer to the data over which to calculate the C\+RC \\
\hline
\mbox{\tt in}  & {\em length} & Number of bytes to process \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Resulting C\+RC value 
\end{DoxyReturn}


Definition at line 923 of file enc28j60\+\_\+driver.\+c.


\begin{DoxyCode}
924 \{
925    \hyperlink{compiler__port_8h_a12a1e9b3ce141648783a82445d02b58d}{uint\_t} i;
926    \hyperlink{compiler__port_8h_a12a1e9b3ce141648783a82445d02b58d}{uint\_t} j;
927 
928    \textcolor{comment}{//Point to the data over which to calculate the CRC}
929    \textcolor{keyword}{const} \hyperlink{stdint_8h_aba7bc1797add20fe3efdf37ced1182c5}{uint8\_t} *\hyperlink{ndp_8h_a6519522ad9a6f45e7a8d25d31392a977}{p} = (\hyperlink{stdint_8h_aba7bc1797add20fe3efdf37ced1182c5}{uint8\_t} *) \hyperlink{dtls__misc_8h_a5c239a1bb87b52b0f1d6d68c4749cd2a}{data};
930    \textcolor{comment}{//CRC preset value}
931    \hyperlink{stdint_8h_a435d1572bf3f880d55459d9805097f62}{uint32\_t} crc = 0xFFFFFFFF;
932 
933    \textcolor{comment}{//Loop through data}
934    \textcolor{keywordflow}{for}(i = 0; i < \hyperlink{dtls__misc_8h_ab43ca82dd7fa2a0e56f941032ef324c4}{length}; i++)
935    \{
936       \textcolor{comment}{//The message is processed bit by bit}
937       \textcolor{keywordflow}{for}(j = 0; j < 8; j++)
938       \{
939          \textcolor{comment}{//Update CRC value}
940          \textcolor{keywordflow}{if}(((crc >> 31) ^ (p[i] >> j)) & 0x01)
941             crc = (crc << 1) ^ 0x04C11DB7;
942          \textcolor{keywordflow}{else}
943             crc = crc << 1;
944       \}
945    \}
946 
947    \textcolor{comment}{//Return CRC value}
948    \textcolor{keywordflow}{return} crc;
949 \}
\end{DoxyCode}
\mbox{\Hypertarget{enc28j60__driver_8c_ad7a91793941c278b1dc3037151ccfa29}\label{enc28j60__driver_8c_ad7a91793941c278b1dc3037151ccfa29}} 
\index{enc28j60\+\_\+driver.\+c@{enc28j60\+\_\+driver.\+c}!enc28j60\+Clear\+Bit@{enc28j60\+Clear\+Bit}}
\index{enc28j60\+Clear\+Bit@{enc28j60\+Clear\+Bit}!enc28j60\+\_\+driver.\+c@{enc28j60\+\_\+driver.\+c}}
\subsubsection{\texorpdfstring{enc28j60\+Clear\+Bit()}{enc28j60ClearBit()}}
{\footnotesize\ttfamily void enc28j60\+Clear\+Bit (\begin{DoxyParamCaption}\item[{\hyperlink{net_8h_a2234db8911a1148c9159979d8f5e0d6b}{Net\+Interface} $\ast$}]{interface,  }\item[{\hyperlink{stdint_8h_a273cf69d639a59973b6019625df33e30}{uint16\+\_\+t}}]{address,  }\item[{\hyperlink{stdint_8h_a273cf69d639a59973b6019625df33e30}{uint16\+\_\+t}}]{mask }\end{DoxyParamCaption})}



Clear bit field. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em interface} & Underlying network interface \\
\hline
\mbox{\tt in}  & {\em address} & Register address \\
\hline
\mbox{\tt in}  & {\em mask} & Bits to clear in the target register \\
\hline
\end{DoxyParams}


Definition at line 901 of file enc28j60\+\_\+driver.\+c.


\begin{DoxyCode}
902 \{
903    \textcolor{comment}{//Pull the CS pin low}
904    interface->spiDriver->assertCs();
905 
906    \textcolor{comment}{//Write opcode and register address}
907    interface->spiDriver->transfer(\hyperlink{enc28j60__driver_8h_a33ed2ae54e73d8508da88e2a07943ecb}{ENC28J60\_CMD\_BFC} | (\hyperlink{dhcpv6__common_8h_aaee906fadd211e863c2e29a3690b25c4}{address} & 
      \hyperlink{enc28j60__driver_8h_af63864942e2b3abe689ef33d12f2dcac}{REG\_ADDR\_MASK}));
908    \textcolor{comment}{//Write bit mask}
909    interface->spiDriver->transfer(\hyperlink{web__socket_8h_a8a74907784be6c7786c2d060c8d7e10b}{mask});
910 
911    \textcolor{comment}{//Terminate the operation by raising the CS pin}
912    interface->spiDriver->deassertCs();
913 \}
\end{DoxyCode}
\mbox{\Hypertarget{enc28j60__driver_8c_a42b985b71a6c7f30d25e5a9a049d2beb}\label{enc28j60__driver_8c_a42b985b71a6c7f30d25e5a9a049d2beb}} 
\index{enc28j60\+\_\+driver.\+c@{enc28j60\+\_\+driver.\+c}!enc28j60\+Disable\+Irq@{enc28j60\+Disable\+Irq}}
\index{enc28j60\+Disable\+Irq@{enc28j60\+Disable\+Irq}!enc28j60\+\_\+driver.\+c@{enc28j60\+\_\+driver.\+c}}
\subsubsection{\texorpdfstring{enc28j60\+Disable\+Irq()}{enc28j60DisableIrq()}}
{\footnotesize\ttfamily void enc28j60\+Disable\+Irq (\begin{DoxyParamCaption}\item[{\hyperlink{net_8h_a2234db8911a1148c9159979d8f5e0d6b}{Net\+Interface} $\ast$}]{interface }\end{DoxyParamCaption})}



Disable interrupts. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em interface} & Underlying network interface \\
\hline
\end{DoxyParams}


Definition at line 258 of file enc28j60\+\_\+driver.\+c.


\begin{DoxyCode}
259 \{
260    \textcolor{comment}{//Disable interrupts}
261    interface->extIntDriver->disableIrq();
262 \}
\end{DoxyCode}
\mbox{\Hypertarget{enc28j60__driver_8c_aafe0776da09c32c8801f984ed15918c7}\label{enc28j60__driver_8c_aafe0776da09c32c8801f984ed15918c7}} 
\index{enc28j60\+\_\+driver.\+c@{enc28j60\+\_\+driver.\+c}!enc28j60\+Dump\+Phy\+Reg@{enc28j60\+Dump\+Phy\+Reg}}
\index{enc28j60\+Dump\+Phy\+Reg@{enc28j60\+Dump\+Phy\+Reg}!enc28j60\+\_\+driver.\+c@{enc28j60\+\_\+driver.\+c}}
\subsubsection{\texorpdfstring{enc28j60\+Dump\+Phy\+Reg()}{enc28j60DumpPhyReg()}}
{\footnotesize\ttfamily void enc28j60\+Dump\+Phy\+Reg (\begin{DoxyParamCaption}\item[{\hyperlink{net_8h_a2234db8911a1148c9159979d8f5e0d6b}{Net\+Interface} $\ast$}]{interface }\end{DoxyParamCaption})}



Dump P\+HY registers for debugging purpose. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em interface} & Underlying network interface \\
\hline
\end{DoxyParams}


Definition at line 1006 of file enc28j60\+\_\+driver.\+c.


\begin{DoxyCode}
1007 \{
1008 \textcolor{preprocessor}{#if (TRACE\_LEVEL >= TRACE\_LEVEL\_DEBUG)}
1009    \hyperlink{stdint_8h_aba7bc1797add20fe3efdf37ced1182c5}{uint8\_t} i;
1010 
1011    \textcolor{comment}{//Loop through PHY registers}
1012    \textcolor{keywordflow}{for}(i = 0; i < 32; i++)
1013    \{
1014       \textcolor{comment}{//Display current PHY register}
1015       \hyperlink{debug_8h_a67a8f9bc74358aa21745a76e23768dae}{TRACE\_DEBUG}(\textcolor{stringliteral}{"%02"} PRIX8 \textcolor{stringliteral}{": 0x%04"} PRIX16 \textcolor{stringliteral}{"\(\backslash\)r\(\backslash\)n"}, i,
1016          \hyperlink{enc28j60__driver_8c_aebd1715d9403c56db9811e701bd7c597}{enc28j60ReadPhyReg}(interface, i));
1017    \}
1018 
1019    \textcolor{comment}{//Terminate with a line feed}
1020    \hyperlink{debug_8h_a67a8f9bc74358aa21745a76e23768dae}{TRACE\_DEBUG}(\textcolor{stringliteral}{"\(\backslash\)r\(\backslash\)n"});
1021 \textcolor{preprocessor}{#endif}
1022 \}
\end{DoxyCode}
\mbox{\Hypertarget{enc28j60__driver_8c_a316e66d408a368cbf3a4e477c87100c1}\label{enc28j60__driver_8c_a316e66d408a368cbf3a4e477c87100c1}} 
\index{enc28j60\+\_\+driver.\+c@{enc28j60\+\_\+driver.\+c}!enc28j60\+Dump\+Reg@{enc28j60\+Dump\+Reg}}
\index{enc28j60\+Dump\+Reg@{enc28j60\+Dump\+Reg}!enc28j60\+\_\+driver.\+c@{enc28j60\+\_\+driver.\+c}}
\subsubsection{\texorpdfstring{enc28j60\+Dump\+Reg()}{enc28j60DumpReg()}}
{\footnotesize\ttfamily void enc28j60\+Dump\+Reg (\begin{DoxyParamCaption}\item[{\hyperlink{net_8h_a2234db8911a1148c9159979d8f5e0d6b}{Net\+Interface} $\ast$}]{interface }\end{DoxyParamCaption})}



Dump registers for debugging purpose. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em interface} & Underlying network interface \\
\hline
\end{DoxyParams}


Definition at line 957 of file enc28j60\+\_\+driver.\+c.


\begin{DoxyCode}
958 \{
959 \textcolor{preprocessor}{#if (TRACE\_LEVEL >= TRACE\_LEVEL\_DEBUG)}
960    \hyperlink{stdint_8h_aba7bc1797add20fe3efdf37ced1182c5}{uint8\_t} i;
961    \hyperlink{stdint_8h_aba7bc1797add20fe3efdf37ced1182c5}{uint8\_t} bank;
962    \hyperlink{stdint_8h_a273cf69d639a59973b6019625df33e30}{uint16\_t} \hyperlink{dhcpv6__common_8h_aaee906fadd211e863c2e29a3690b25c4}{address};
963 
964    \textcolor{comment}{//Display header}
965    \hyperlink{debug_8h_a67a8f9bc74358aa21745a76e23768dae}{TRACE\_DEBUG}(\textcolor{stringliteral}{"    Bank 0  Bank 1  Bank 2  Bank 3\(\backslash\)r\(\backslash\)n"});
966 
967    \textcolor{comment}{//Loop through register addresses}
968    \textcolor{keywordflow}{for}(i = 0; i < 32; i++)
969    \{
970       \textcolor{comment}{//Display register address}
971       \hyperlink{debug_8h_a67a8f9bc74358aa21745a76e23768dae}{TRACE\_DEBUG}(\textcolor{stringliteral}{"%02"} PRIX8 \textcolor{stringliteral}{": "}, i);
972 
973       \textcolor{comment}{//Loop through bank numbers}
974       \textcolor{keywordflow}{for}(bank = 0; bank < 4; bank++)
975       \{
976          \textcolor{comment}{//Format register address}
977          address = (bank << 8) | i;
978 
979          \textcolor{comment}{//MAC and MII registers require a specific read sequence}
980          \textcolor{keywordflow}{if}(address >= 0x200 && address <= 0x219)
981             address |= \hyperlink{enc28j60__driver_8h_a4e5c7c5211ccaa5541e075fae8bb4d51}{MAC\_REG\_TYPE};
982          \textcolor{keywordflow}{else} \textcolor{keywordflow}{if}(address >= 0x300 && address <= 0x305)
983             address |= \hyperlink{enc28j60__driver_8h_a4e5c7c5211ccaa5541e075fae8bb4d51}{MAC\_REG\_TYPE};
984          \textcolor{keywordflow}{else} \textcolor{keywordflow}{if}(address == 0x30A)
985             address |= \hyperlink{enc28j60__driver_8h_a4e5c7c5211ccaa5541e075fae8bb4d51}{MAC\_REG\_TYPE};
986 
987          \textcolor{comment}{//Display register contents}
988          \hyperlink{debug_8h_a67a8f9bc74358aa21745a76e23768dae}{TRACE\_DEBUG}(\textcolor{stringliteral}{"0x%02"} PRIX8 \textcolor{stringliteral}{"    "}, \hyperlink{enc28j60__driver_8c_a3d1bf45224477a6681bd39462d527398}{enc28j60ReadReg}(interface, address));
989       \}
990 
991       \textcolor{comment}{//Jump to the following line}
992       \hyperlink{debug_8h_a67a8f9bc74358aa21745a76e23768dae}{TRACE\_DEBUG}(\textcolor{stringliteral}{"\(\backslash\)r\(\backslash\)n"});
993    \}
994 
995    \textcolor{comment}{//Terminate with a line feed}
996    \hyperlink{debug_8h_a67a8f9bc74358aa21745a76e23768dae}{TRACE\_DEBUG}(\textcolor{stringliteral}{"\(\backslash\)r\(\backslash\)n"});
997 \textcolor{preprocessor}{#endif}
998 \}
\end{DoxyCode}
\mbox{\Hypertarget{enc28j60__driver_8c_a6b1900118c77311ee7866fed17df9d6b}\label{enc28j60__driver_8c_a6b1900118c77311ee7866fed17df9d6b}} 
\index{enc28j60\+\_\+driver.\+c@{enc28j60\+\_\+driver.\+c}!enc28j60\+Enable\+Irq@{enc28j60\+Enable\+Irq}}
\index{enc28j60\+Enable\+Irq@{enc28j60\+Enable\+Irq}!enc28j60\+\_\+driver.\+c@{enc28j60\+\_\+driver.\+c}}
\subsubsection{\texorpdfstring{enc28j60\+Enable\+Irq()}{enc28j60EnableIrq()}}
{\footnotesize\ttfamily void enc28j60\+Enable\+Irq (\begin{DoxyParamCaption}\item[{\hyperlink{net_8h_a2234db8911a1148c9159979d8f5e0d6b}{Net\+Interface} $\ast$}]{interface }\end{DoxyParamCaption})}



Enable interrupts. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em interface} & Underlying network interface \\
\hline
\end{DoxyParams}


Definition at line 246 of file enc28j60\+\_\+driver.\+c.


\begin{DoxyCode}
247 \{
248    \textcolor{comment}{//Enable interrupts}
249    interface->extIntDriver->enableIrq();
250 \}
\end{DoxyCode}
\mbox{\Hypertarget{enc28j60__driver_8c_a988c81a8fd6c2bb0a368ab796a282da7}\label{enc28j60__driver_8c_a988c81a8fd6c2bb0a368ab796a282da7}} 
\index{enc28j60\+\_\+driver.\+c@{enc28j60\+\_\+driver.\+c}!enc28j60\+Event\+Handler@{enc28j60\+Event\+Handler}}
\index{enc28j60\+Event\+Handler@{enc28j60\+Event\+Handler}!enc28j60\+\_\+driver.\+c@{enc28j60\+\_\+driver.\+c}}
\subsubsection{\texorpdfstring{enc28j60\+Event\+Handler()}{enc28j60EventHandler()}}
{\footnotesize\ttfamily void enc28j60\+Event\+Handler (\begin{DoxyParamCaption}\item[{\hyperlink{net_8h_a2234db8911a1148c9159979d8f5e0d6b}{Net\+Interface} $\ast$}]{interface }\end{DoxyParamCaption})}



E\+N\+C28\+J60 event handler. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em interface} & Underlying network interface \\
\hline
\end{DoxyParams}


Definition at line 333 of file enc28j60\+\_\+driver.\+c.


\begin{DoxyCode}
334 \{
335    \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689c}{error\_t} error;
336    \hyperlink{stdint_8h_a273cf69d639a59973b6019625df33e30}{uint16\_t} status;
337    \hyperlink{stdint_8h_a273cf69d639a59973b6019625df33e30}{uint16\_t} \hyperlink{dtls__misc_8h_a74bce8e92ccabd0c885447114a48b80e}{value};
338 
339    \textcolor{comment}{//Read interrupt status register}
340    status = \hyperlink{enc28j60__driver_8c_a3d1bf45224477a6681bd39462d527398}{enc28j60ReadReg}(interface, \hyperlink{enc28j60__driver_8h_af65b302862627b3549855d26ba141f59}{ENC28J60\_REG\_EIR});
341 
342    \textcolor{comment}{//Check whether the link state has changed}
343    \textcolor{keywordflow}{if}(status & \hyperlink{enc28j60__driver_8h_a9fe92c2717bcd98bb324409ed2d84210}{EIR\_LINKIF})
344    \{
345       \textcolor{comment}{//Clear PHY interrupts flags}
346       \hyperlink{enc28j60__driver_8c_aebd1715d9403c56db9811e701bd7c597}{enc28j60ReadPhyReg}(interface, \hyperlink{enc28j60__driver_8h_a666d36bd16c04ea80d5e8b6537a9f23a}{ENC28J60\_PHY\_REG\_PHIR});
347       \textcolor{comment}{//Clear interrupt flag}
348       \hyperlink{enc28j60__driver_8c_ad7a91793941c278b1dc3037151ccfa29}{enc28j60ClearBit}(interface, \hyperlink{enc28j60__driver_8h_af65b302862627b3549855d26ba141f59}{ENC28J60\_REG\_EIR}, EIR\_LINKIF);
349       \textcolor{comment}{//Read PHY status register}
350       value = \hyperlink{enc28j60__driver_8c_aebd1715d9403c56db9811e701bd7c597}{enc28j60ReadPhyReg}(interface, 
      \hyperlink{enc28j60__driver_8h_af7bc36b990c32ff5624d6364466e2d96}{ENC28J60\_PHY\_REG\_PHSTAT2});
351 
352       \textcolor{comment}{//Check link state}
353       \textcolor{keywordflow}{if}(value & \hyperlink{enc28j60__driver_8h_a49bb15e6a2fc4289f64e019fc4d73b95}{PHSTAT2\_LSTAT})
354       \{
355          \textcolor{comment}{//Link speed}
356          interface->linkSpeed = \hyperlink{nic_8h_afef666155a43e0a2a3a1f0df9e50bab4a43656b0244470a43d497c77353f3da84}{NIC\_LINK\_SPEED\_10MBPS};
357 
358 \textcolor{preprocessor}{#if (ENC28J60\_FULL\_DUPLEX\_SUPPORT == ENABLED)}
359          \textcolor{comment}{//Full-duplex mode}
360          interface->duplexMode = \hyperlink{nic_8h_ae96e77ca948a3796e2d1900a73f133daa2c75584234136d8fd79f372116d26340}{NIC\_FULL\_DUPLEX\_MODE};
361 \textcolor{preprocessor}{#else}
362          \textcolor{comment}{//Half-duplex mode}
363          interface->duplexMode = \hyperlink{nic_8h_ae96e77ca948a3796e2d1900a73f133daa60856f1c6ecbcb1227b653fb48205f41}{NIC\_HALF\_DUPLEX\_MODE};
364 \textcolor{preprocessor}{#endif}
365          \textcolor{comment}{//Link is up}
366          interface->linkState = \hyperlink{os__port_8h_aa8cecfc5c5c054d2875c03e77b7be15d}{TRUE};
367       \}
368       \textcolor{keywordflow}{else}
369       \{
370          \textcolor{comment}{//Link is down}
371          interface->linkState = \hyperlink{os__port_8h_aa93f0eb578d23995850d61f7d61c55c1}{FALSE};
372       \}
373 
374       \textcolor{comment}{//Process link state change event}
375       \hyperlink{nic_8c_ae9054795c5d49a4db97396bf1d16b413}{nicNotifyLinkChange}(interface);
376    \}
377 
378    \textcolor{comment}{//Check whether a packet has been received?}
379    \textcolor{keywordflow}{if}(status & \hyperlink{enc28j60__driver_8h_a11fcfa608a5040c26cc8f2c2d314ba80}{EIR\_PKTIF})
380    \{
381       \textcolor{comment}{//Clear interrupt flag}
382       \hyperlink{enc28j60__driver_8c_ad7a91793941c278b1dc3037151ccfa29}{enc28j60ClearBit}(interface, \hyperlink{enc28j60__driver_8h_af65b302862627b3549855d26ba141f59}{ENC28J60\_REG\_EIR}, EIR\_PKTIF);
383 
384       \textcolor{comment}{//Process all pending packets}
385       \textcolor{keywordflow}{do}
386       \{
387          \textcolor{comment}{//Read incoming packet}
388          error = \hyperlink{enc28j60__driver_8c_ab8aa467e39b8fd3ed32b077d61af25df}{enc28j60ReceivePacket}(interface);
389 
390          \textcolor{comment}{//No more data in the receive buffer?}
391       \} \textcolor{keywordflow}{while}(error != \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689ca838a7a87abb42b87d6862e98849fab2d}{ERROR\_BUFFER\_EMPTY});
392    \}
393 
394    \textcolor{comment}{//Re-enable LINKIE and PKTIE interrupts}
395    \hyperlink{enc28j60__driver_8c_a22b496ba8629d4eee803138db70d9389}{enc28j60SetBit}(interface, \hyperlink{enc28j60__driver_8h_ad86a5f30810ab89eaaf4cedacef038b5}{ENC28J60\_REG\_EIE}, 
      \hyperlink{enc28j60__driver_8h_aad07156c0f73a7ec41d0c385f2c091b1}{EIE\_LINKIE} | \hyperlink{enc28j60__driver_8h_a1171f52b3a35649112ce502a26834bdd}{EIE\_PKTIE});
396 \}
\end{DoxyCode}
\mbox{\Hypertarget{enc28j60__driver_8c_adae3d487c5a50307f4d6276b65d5439f}\label{enc28j60__driver_8c_adae3d487c5a50307f4d6276b65d5439f}} 
\index{enc28j60\+\_\+driver.\+c@{enc28j60\+\_\+driver.\+c}!enc28j60\+Init@{enc28j60\+Init}}
\index{enc28j60\+Init@{enc28j60\+Init}!enc28j60\+\_\+driver.\+c@{enc28j60\+\_\+driver.\+c}}
\subsubsection{\texorpdfstring{enc28j60\+Init()}{enc28j60Init()}}
{\footnotesize\ttfamily \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689c}{error\+\_\+t} enc28j60\+Init (\begin{DoxyParamCaption}\item[{\hyperlink{net_8h_a2234db8911a1148c9159979d8f5e0d6b}{Net\+Interface} $\ast$}]{interface }\end{DoxyParamCaption})}



E\+N\+C28\+J60 controller initialization. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em interface} & Underlying network interface \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Error code 
\end{DoxyReturn}


Definition at line 72 of file enc28j60\+\_\+driver.\+c.


\begin{DoxyCode}
73 \{
74    \hyperlink{stdint_8h_aba7bc1797add20fe3efdf37ced1182c5}{uint8\_t} revisionId;
75    \hyperlink{structEnc28j60Context}{Enc28j60Context} *context;
76 
77    \textcolor{comment}{//Debug message}
78    \hyperlink{debug_8h_a7339bfd784193a5c79efcef2eeb2d6df}{TRACE\_INFO}(\textcolor{stringliteral}{"Initializing ENC28J60 Ethernet controller...\(\backslash\)r\(\backslash\)n"});
79 
80    \textcolor{comment}{//Initialize SPI}
81    interface->spiDriver->init();
82    \textcolor{comment}{//Initialize external interrupt line}
83    interface->extIntDriver->init();
84 
85    \textcolor{comment}{//Issue a system reset}
86    \hyperlink{enc28j60__driver_8c_a413e2e5e3c561a366b6a978390ad14c5}{enc28j60SoftReset}(interface);
87 
88    \textcolor{comment}{//After issuing the reset command, wait at least 1ms in firmware}
89    \textcolor{comment}{//for the device to be ready}
90    \hyperlink{os__port_8h_af36a7a9c1ad704d0da2e660dab735b2a}{sleep}(10);
91 
92    \textcolor{comment}{//Point to the driver context}
93    context = (\hyperlink{structEnc28j60Context}{Enc28j60Context} *) interface->nicContext;
94 
95    \textcolor{comment}{//Initialize driver specific variables}
96    context->\hyperlink{structEnc28j60Context_a987ae13c8ce3236e2f76a012271dde69}{currentBank} = \hyperlink{stdint_8h_a3ea490c9b3617d4479bd80ef93cd5602}{UINT16\_MAX};
97    context->\hyperlink{structEnc28j60Context_ac4411e438d3a831b59f26e147172e824}{nextPacket} = \hyperlink{enc28j60__driver_8h_af5e1df9bce475ccf843d9b9f13563399}{ENC28J60\_RX\_BUFFER\_START};
98 
99    \textcolor{comment}{//Allocate RX buffer}
100    context->\hyperlink{structEnc28j60Context_a5dec481de213c241d15d89e02ef38e1b}{rxBuffer} = \hyperlink{net__mem_8c_abe64a91cd872768817509cc08eed6689}{memPoolAlloc}(\hyperlink{ethernet_8h_aa40569f19ea64ddc1cf273d095e517f4}{ETH\_MAX\_FRAME\_SIZE});
101    \textcolor{comment}{//Failed to allocate memory?}
102    \textcolor{keywordflow}{if}(context->\hyperlink{structEnc28j60Context_a5dec481de213c241d15d89e02ef38e1b}{rxBuffer} == \hyperlink{group__BSPDefine_ga070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL})
103       \textcolor{keywordflow}{return} \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689cac0a554045048d2fb61387cf735676f69}{ERROR\_OUT\_OF\_MEMORY};
104 
105    \textcolor{comment}{//Read silicon revision ID}
106    revisionId = \hyperlink{enc28j60__driver_8c_a3d1bf45224477a6681bd39462d527398}{enc28j60ReadReg}(interface, \hyperlink{enc28j60__driver_8h_a49f74d5dd53e5a23eb2ff75636e08912}{ENC28J60\_REG\_EREVID});
107 
108    \textcolor{comment}{//Debug message}
109    \hyperlink{debug_8h_a7339bfd784193a5c79efcef2eeb2d6df}{TRACE\_INFO}(\textcolor{stringliteral}{"ENC28J60 revision ID: 0x%02X\(\backslash\)r\(\backslash\)n"}, revisionId);
110 
111    \textcolor{comment}{//Disable CLKOUT output}
112    \hyperlink{enc28j60__driver_8c_a5d32d56d84553c95dd21744f243199bc}{enc28j60WriteReg}(interface, \hyperlink{enc28j60__driver_8h_ab0d78fdf5647f560a7bbd89f7ca6ed6b}{ENC28J60\_REG\_ECOCON}, 0x00);
113 
114    \textcolor{comment}{//Set the MAC address of the station}
115    \hyperlink{enc28j60__driver_8c_a5d32d56d84553c95dd21744f243199bc}{enc28j60WriteReg}(interface, \hyperlink{enc28j60__driver_8h_af7d5a8ef1fd252fe5fc537f0f6ba9ecf}{ENC28J60\_REG\_MAADR1}, interface->macAddr.b
      [0]);
116    \hyperlink{enc28j60__driver_8c_a5d32d56d84553c95dd21744f243199bc}{enc28j60WriteReg}(interface, \hyperlink{enc28j60__driver_8h_a358ff2be554237526f0c9174cfa66e15}{ENC28J60\_REG\_MAADR2}, interface->macAddr.b
      [1]);
117    \hyperlink{enc28j60__driver_8c_a5d32d56d84553c95dd21744f243199bc}{enc28j60WriteReg}(interface, \hyperlink{enc28j60__driver_8h_ad2dbb207d7f184e26d7ab1721127b623}{ENC28J60\_REG\_MAADR3}, interface->macAddr.b
      [2]);
118    \hyperlink{enc28j60__driver_8c_a5d32d56d84553c95dd21744f243199bc}{enc28j60WriteReg}(interface, \hyperlink{enc28j60__driver_8h_ae6b4cd6b5ae5b4885556830db484bf66}{ENC28J60\_REG\_MAADR4}, interface->macAddr.b
      [3]);
119    \hyperlink{enc28j60__driver_8c_a5d32d56d84553c95dd21744f243199bc}{enc28j60WriteReg}(interface, \hyperlink{enc28j60__driver_8h_aaeb21b66ed8d2b5f6e467e18ed92945c}{ENC28J60\_REG\_MAADR5}, interface->macAddr.b
      [4]);
120    \hyperlink{enc28j60__driver_8c_a5d32d56d84553c95dd21744f243199bc}{enc28j60WriteReg}(interface, \hyperlink{enc28j60__driver_8h_aebc14ca5230d47c21555267837ea3bd1}{ENC28J60\_REG\_MAADR6}, interface->macAddr.b
      [5]);
121 
122    \textcolor{comment}{//Set receive buffer location}
123    \hyperlink{enc28j60__driver_8c_a5d32d56d84553c95dd21744f243199bc}{enc28j60WriteReg}(interface, \hyperlink{enc28j60__driver_8h_ae1f1578758a8437db1342296a0cef248}{ENC28J60\_REG\_ERXSTL}, 
      \hyperlink{os__port_8h_a34a3aa6cbadec6a80ab1eae8efd0083d}{LSB}(\hyperlink{enc28j60__driver_8h_af5e1df9bce475ccf843d9b9f13563399}{ENC28J60\_RX\_BUFFER\_START}));
124    \hyperlink{enc28j60__driver_8c_a5d32d56d84553c95dd21744f243199bc}{enc28j60WriteReg}(interface, \hyperlink{enc28j60__driver_8h_aa415170ff62289853d7308a20bd4400f}{ENC28J60\_REG\_ERXSTH}, 
      \hyperlink{os__port_8h_aeb61a4e8fff2f4624a632a3189cbd3a0}{MSB}(\hyperlink{enc28j60__driver_8h_af5e1df9bce475ccf843d9b9f13563399}{ENC28J60\_RX\_BUFFER\_START}));
125    \hyperlink{enc28j60__driver_8c_a5d32d56d84553c95dd21744f243199bc}{enc28j60WriteReg}(interface, \hyperlink{enc28j60__driver_8h_a387f0bc20e4e0e15d05a8b8ad88c98cd}{ENC28J60\_REG\_ERXNDL}, 
      \hyperlink{os__port_8h_a34a3aa6cbadec6a80ab1eae8efd0083d}{LSB}(\hyperlink{enc28j60__driver_8h_a3ed6252454d70388227b9b063334b107}{ENC28J60\_RX\_BUFFER\_STOP}));
126    \hyperlink{enc28j60__driver_8c_a5d32d56d84553c95dd21744f243199bc}{enc28j60WriteReg}(interface, \hyperlink{enc28j60__driver_8h_a89d51f865fb662aff495c0f8930de691}{ENC28J60\_REG\_ERXNDH}, 
      \hyperlink{os__port_8h_aeb61a4e8fff2f4624a632a3189cbd3a0}{MSB}(\hyperlink{enc28j60__driver_8h_a3ed6252454d70388227b9b063334b107}{ENC28J60\_RX\_BUFFER\_STOP}));
127 
128    \textcolor{comment}{//The ERXRDPT register defines a location within the FIFO}
129    \textcolor{comment}{//where the receive hardware is forbidden to write to}
130    \hyperlink{enc28j60__driver_8c_a5d32d56d84553c95dd21744f243199bc}{enc28j60WriteReg}(interface, \hyperlink{enc28j60__driver_8h_a6d8a7a901e33726525edd2a58ef566cc}{ENC28J60\_REG\_ERXRDPTL}, 
      \hyperlink{os__port_8h_a34a3aa6cbadec6a80ab1eae8efd0083d}{LSB}(\hyperlink{enc28j60__driver_8h_a3ed6252454d70388227b9b063334b107}{ENC28J60\_RX\_BUFFER\_STOP}));
131    \hyperlink{enc28j60__driver_8c_a5d32d56d84553c95dd21744f243199bc}{enc28j60WriteReg}(interface, \hyperlink{enc28j60__driver_8h_af9ca570202a9b8a2f7c1adfc377aa0d1}{ENC28J60\_REG\_ERXRDPTH}, 
      \hyperlink{os__port_8h_aeb61a4e8fff2f4624a632a3189cbd3a0}{MSB}(\hyperlink{enc28j60__driver_8h_a3ed6252454d70388227b9b063334b107}{ENC28J60\_RX\_BUFFER\_STOP}));
132 
133    \textcolor{comment}{//Configure the receive filters}
134    \hyperlink{enc28j60__driver_8c_a5d32d56d84553c95dd21744f243199bc}{enc28j60WriteReg}(interface, \hyperlink{enc28j60__driver_8h_a30cab24224423839e9fc19a1324e3221}{ENC28J60\_REG\_ERXFCON}, 
      \hyperlink{enc28j60__driver_8h_af22d9ed047710a75f3226e12945e7014}{ERXFCON\_UCEN} |
135       \hyperlink{enc28j60__driver_8h_ab24fd0fbd4dd4ef84ee86db0d20f655c}{ERXFCON\_CRCEN} | \hyperlink{enc28j60__driver_8h_adcc185e8904cddc96ace6ee23660db6c}{ERXFCON\_HTEN} | \hyperlink{enc28j60__driver_8h_a1b56128234d0790b0d7253f4357d2adb}{ERXFCON\_BCEN});
136 
137    \textcolor{comment}{//Initialize the hash table}
138    \hyperlink{enc28j60__driver_8c_a5d32d56d84553c95dd21744f243199bc}{enc28j60WriteReg}(interface, \hyperlink{enc28j60__driver_8h_af156480d8b6fec9b734449a39d8e71ba}{ENC28J60\_REG\_EHT0}, 0x00);
139    \hyperlink{enc28j60__driver_8c_a5d32d56d84553c95dd21744f243199bc}{enc28j60WriteReg}(interface, \hyperlink{enc28j60__driver_8h_aa175ea31e140d0f01dfe8799025ff149}{ENC28J60\_REG\_EHT1}, 0x00);
140    \hyperlink{enc28j60__driver_8c_a5d32d56d84553c95dd21744f243199bc}{enc28j60WriteReg}(interface, \hyperlink{enc28j60__driver_8h_ad20af7927c8b1142818d20a17d7117f2}{ENC28J60\_REG\_EHT2}, 0x00);
141    \hyperlink{enc28j60__driver_8c_a5d32d56d84553c95dd21744f243199bc}{enc28j60WriteReg}(interface, \hyperlink{enc28j60__driver_8h_a3a71141ce65822446b3d2b8aa949ffbc}{ENC28J60\_REG\_EHT3}, 0x00);
142    \hyperlink{enc28j60__driver_8c_a5d32d56d84553c95dd21744f243199bc}{enc28j60WriteReg}(interface, \hyperlink{enc28j60__driver_8h_a1118c43e5d30200cb5960e758f78848d}{ENC28J60\_REG\_EHT4}, 0x00);
143    \hyperlink{enc28j60__driver_8c_a5d32d56d84553c95dd21744f243199bc}{enc28j60WriteReg}(interface, \hyperlink{enc28j60__driver_8h_a2e77fdb596fc11ce818a5cacf3c04425}{ENC28J60\_REG\_EHT5}, 0x00);
144    \hyperlink{enc28j60__driver_8c_a5d32d56d84553c95dd21744f243199bc}{enc28j60WriteReg}(interface, \hyperlink{enc28j60__driver_8h_a6c98f5c91acd033fdf1370c4a213a5a0}{ENC28J60\_REG\_EHT6}, 0x00);
145    \hyperlink{enc28j60__driver_8c_a5d32d56d84553c95dd21744f243199bc}{enc28j60WriteReg}(interface, \hyperlink{enc28j60__driver_8h_a13df3c0cee55d7d9df84ed8af21edc23}{ENC28J60\_REG\_EHT7}, 0x00);
146 
147    \textcolor{comment}{//Pull the MAC out of reset}
148    \hyperlink{enc28j60__driver_8c_a5d32d56d84553c95dd21744f243199bc}{enc28j60WriteReg}(interface, \hyperlink{enc28j60__driver_8h_a1f714b37dbe15b250c90451368c9f732}{ENC28J60\_REG\_MACON2}, 0x00);
149 
150    \textcolor{comment}{//Enable the MAC to receive frames}
151    \hyperlink{enc28j60__driver_8c_a5d32d56d84553c95dd21744f243199bc}{enc28j60WriteReg}(interface, \hyperlink{enc28j60__driver_8h_aa65f7d8f23dcc72aab15619d32e3e02d}{ENC28J60\_REG\_MACON1},
152       \hyperlink{enc28j60__driver_8h_adad2d7dff2675636ec7625e5e3661da1}{MACON1\_TXPAUS} | \hyperlink{enc28j60__driver_8h_af2966ecb11b3dccc4a6eead5321b268d}{MACON1\_RXPAUS} | \hyperlink{enc28j60__driver_8h_acca2bd606f4beb5ecf4051879d3f8484}{MACON1\_MARXEN});
153 
154    \textcolor{comment}{//Enable automatic padding to at least 60 bytes, always append a valid CRC}
155    \textcolor{comment}{//and check frame length. MAC can operate in half-duplex or full-duplex mode}
156 \textcolor{preprocessor}{#if (ENC28J60\_FULL\_DUPLEX\_SUPPORT == ENABLED)}
157    \hyperlink{enc28j60__driver_8c_a5d32d56d84553c95dd21744f243199bc}{enc28j60WriteReg}(interface, \hyperlink{enc28j60__driver_8h_a3c6ab0689b1802e331eb9d140c889ec0}{ENC28J60\_REG\_MACON3}, 
      \hyperlink{enc28j60__driver_8h_a433043e028567c9002d8bb955429a4c6}{MACON3\_PADCFG}(1) |
158       \hyperlink{enc28j60__driver_8h_a73e8f004b429cdbc2161d418b8e2e4c2}{MACON3\_TXCRCEN} | \hyperlink{enc28j60__driver_8h_a9cbf4c5171f6d945f142b8150aaf9c0e}{MACON3\_FRMLNEN} | 
      \hyperlink{enc28j60__driver_8h_a4b3d2fc8f8ce15be89f1ba918fb03311}{MACON3\_FULDPX});
159 \textcolor{preprocessor}{#else}
160    \hyperlink{enc28j60__driver_8c_a5d32d56d84553c95dd21744f243199bc}{enc28j60WriteReg}(interface, \hyperlink{enc28j60__driver_8h_a3c6ab0689b1802e331eb9d140c889ec0}{ENC28J60\_REG\_MACON3}, 
      \hyperlink{enc28j60__driver_8h_a433043e028567c9002d8bb955429a4c6}{MACON3\_PADCFG}(1) |
161       \hyperlink{enc28j60__driver_8h_a73e8f004b429cdbc2161d418b8e2e4c2}{MACON3\_TXCRCEN} | \hyperlink{enc28j60__driver_8h_a9cbf4c5171f6d945f142b8150aaf9c0e}{MACON3\_FRMLNEN});
162 \textcolor{preprocessor}{#endif}
163 
164    \textcolor{comment}{//When the medium is occupied, the MAC will wait indefinitely for it to}
165    \textcolor{comment}{//become free when attempting to transmit}
166    \hyperlink{enc28j60__driver_8c_a5d32d56d84553c95dd21744f243199bc}{enc28j60WriteReg}(interface, \hyperlink{enc28j60__driver_8h_afb1c0abf31d889e9c0827dc192c186d4}{ENC28J60\_REG\_MACON4}, 
      \hyperlink{enc28j60__driver_8h_a736dcb611894ae9bfd671fb4c57d02ae}{MACON4\_DEFER});
167 
168    \textcolor{comment}{//Maximum frame length that can be received or transmitted}
169    \hyperlink{enc28j60__driver_8c_a5d32d56d84553c95dd21744f243199bc}{enc28j60WriteReg}(interface, \hyperlink{enc28j60__driver_8h_ac6b3c1f1ed2db4b6928c0b62548360d7}{ENC28J60\_REG\_MAMXFLL}, 
      \hyperlink{os__port_8h_a34a3aa6cbadec6a80ab1eae8efd0083d}{LSB}(\hyperlink{ethernet_8h_aa40569f19ea64ddc1cf273d095e517f4}{ETH\_MAX\_FRAME\_SIZE}));
170    \hyperlink{enc28j60__driver_8c_a5d32d56d84553c95dd21744f243199bc}{enc28j60WriteReg}(interface, \hyperlink{enc28j60__driver_8h_ac4f2579906f65cd5c926007c4b889366}{ENC28J60\_REG\_MAMXFLH}, 
      \hyperlink{os__port_8h_aeb61a4e8fff2f4624a632a3189cbd3a0}{MSB}(\hyperlink{ethernet_8h_aa40569f19ea64ddc1cf273d095e517f4}{ETH\_MAX\_FRAME\_SIZE}));
171 
172    \textcolor{comment}{//Configure the back-to-back inter-packet gap register}
173 \textcolor{preprocessor}{#if (ENC28J60\_FULL\_DUPLEX\_SUPPORT == ENABLED)}
174    \hyperlink{enc28j60__driver_8c_a5d32d56d84553c95dd21744f243199bc}{enc28j60WriteReg}(interface, \hyperlink{enc28j60__driver_8h_aba18e0952f798328b8a8c2c3f51ebacc}{ENC28J60\_REG\_MABBIPG}, 0x15);
175 \textcolor{preprocessor}{#else}
176    \hyperlink{enc28j60__driver_8c_a5d32d56d84553c95dd21744f243199bc}{enc28j60WriteReg}(interface, \hyperlink{enc28j60__driver_8h_aba18e0952f798328b8a8c2c3f51ebacc}{ENC28J60\_REG\_MABBIPG}, 0x12);
177 \textcolor{preprocessor}{#endif}
178 
179    \textcolor{comment}{//Configure the non-back-to-back inter-packet gap register}
180    \hyperlink{enc28j60__driver_8c_a5d32d56d84553c95dd21744f243199bc}{enc28j60WriteReg}(interface, \hyperlink{enc28j60__driver_8h_a3d37075a5600a4d2ffe14041cf43b557}{ENC28J60\_REG\_MAIPGL}, 0x12);
181    \hyperlink{enc28j60__driver_8c_a5d32d56d84553c95dd21744f243199bc}{enc28j60WriteReg}(interface, \hyperlink{enc28j60__driver_8h_ad48dd826515ef3d900f6b1a37ec91fb3}{ENC28J60\_REG\_MAIPGH}, 0x0C);
182 
183    \textcolor{comment}{//Collision window register}
184    \hyperlink{enc28j60__driver_8c_a5d32d56d84553c95dd21744f243199bc}{enc28j60WriteReg}(interface, \hyperlink{enc28j60__driver_8h_aef4de076bfe78687ca2f2b15129f90e8}{ENC28J60\_REG\_MACLCON2}, 63);
185 
186    \textcolor{comment}{//Set the PHY to the proper duplex mode}
187 \textcolor{preprocessor}{#if (ENC28J60\_FULL\_DUPLEX\_SUPPORT == ENABLED)}
188    \hyperlink{enc28j60__driver_8c_ad9b6811a68677ae16b56fedd09bdee17}{enc28j60WritePhyReg}(interface, \hyperlink{enc28j60__driver_8h_a9b60b5557088629f92726f0ce5187a7d}{ENC28J60\_PHY\_REG\_PHCON1}, 
      \hyperlink{enc28j60__driver_8h_a8b09db143b4e790b8c19205ecdd5bec3}{PHCON1\_PDPXMD});
189 \textcolor{preprocessor}{#else}
190    \hyperlink{enc28j60__driver_8c_ad9b6811a68677ae16b56fedd09bdee17}{enc28j60WritePhyReg}(interface, \hyperlink{enc28j60__driver_8h_a9b60b5557088629f92726f0ce5187a7d}{ENC28J60\_PHY\_REG\_PHCON1}, 0x0000
      );
191 \textcolor{preprocessor}{#endif}
192 
193    \textcolor{comment}{//Disable half-duplex loopback in PHY}
194    \hyperlink{enc28j60__driver_8c_ad9b6811a68677ae16b56fedd09bdee17}{enc28j60WritePhyReg}(interface, \hyperlink{enc28j60__driver_8h_a722b0afe08a2db38518c11bac6fccb46}{ENC28J60\_PHY\_REG\_PHCON2}, 
      \hyperlink{enc28j60__driver_8h_a67f4baba49a56729548246a2c4cf60c4}{PHCON2\_HDLDIS});
195 
196    \textcolor{comment}{//LEDA displays link status and LEDB displays TX/RX activity}
197    \hyperlink{enc28j60__driver_8c_ad9b6811a68677ae16b56fedd09bdee17}{enc28j60WritePhyReg}(interface, \hyperlink{enc28j60__driver_8h_a3fc1dfb85b4b569b2c3db74a156c1bef}{ENC28J60\_PHY\_REG\_PHLCON},
198       \hyperlink{enc28j60__driver_8h_ab99ac6b94f01fcccde2d2e11b4dc3f68}{PHLCON\_LACFG}(4) | \hyperlink{enc28j60__driver_8h_a586708647dd9550539dee0c05413ffa6}{PHLCON\_LBCFG}(7) | \hyperlink{enc28j60__driver_8h_a8262d7d3dbd4fbe08993466baf20adb3}{PHLCON\_LFRQ}(0) | 
      \hyperlink{enc28j60__driver_8h_aa232158f76dbbff97bf8a9e035cb54d9}{PHLCON\_STRCH});
199 
200    \textcolor{comment}{//Clear interrupt flags}
201    \hyperlink{enc28j60__driver_8c_a5d32d56d84553c95dd21744f243199bc}{enc28j60WriteReg}(interface, \hyperlink{enc28j60__driver_8h_af65b302862627b3549855d26ba141f59}{ENC28J60\_REG\_EIR}, 0x00);
202 
203    \textcolor{comment}{//Configure interrupts as desired}
204    \hyperlink{enc28j60__driver_8c_a5d32d56d84553c95dd21744f243199bc}{enc28j60WriteReg}(interface, \hyperlink{enc28j60__driver_8h_ad86a5f30810ab89eaaf4cedacef038b5}{ENC28J60\_REG\_EIE}, 
      \hyperlink{enc28j60__driver_8h_a6e7ec3932ab30e65b5ea60440053a4bc}{EIE\_INTIE} |
205       \hyperlink{enc28j60__driver_8h_a1171f52b3a35649112ce502a26834bdd}{EIE\_PKTIE} | \hyperlink{enc28j60__driver_8h_aad07156c0f73a7ec41d0c385f2c091b1}{EIE\_LINKIE} | \hyperlink{enc28j60__driver_8h_aa2c4d9a05314661d9b5ba5c106097d0f}{EIE\_TXIE} | \hyperlink{enc28j60__driver_8h_a31359eb0905b74f9d0b6f398181deb34}{EIE\_TXERIE});
206 
207    \textcolor{comment}{//Configure PHY interrupts as desired}
208    \hyperlink{enc28j60__driver_8c_ad9b6811a68677ae16b56fedd09bdee17}{enc28j60WritePhyReg}(interface, \hyperlink{enc28j60__driver_8h_ae1ed8bd7b17909c6c8692f5bff6f3f87}{ENC28J60\_PHY\_REG\_PHIE},
209       \hyperlink{enc28j60__driver_8h_aa3d9b9b43681c29a70dd28586b5f631a}{PHIE\_PLNKIE} | \hyperlink{enc28j60__driver_8h_a5e544f47c8f8c93dd65ffa74bf068e6f}{PHIE\_PGEIE});
210 
211    \textcolor{comment}{//Set RXEN to enable reception}
212    \hyperlink{enc28j60__driver_8c_a22b496ba8629d4eee803138db70d9389}{enc28j60SetBit}(interface, \hyperlink{enc28j60__driver_8h_aed3264228bd86c4ac0cde27bc81ed5de}{ENC28J60\_REG\_ECON1}, 
      \hyperlink{enc28j60__driver_8h_ace8508fae6ed0c6d29e8879194de5fbc}{ECON1\_RXEN});
213 
214    \textcolor{comment}{//Dump registers for debugging purpose}
215    \hyperlink{enc28j60__driver_8c_a316e66d408a368cbf3a4e477c87100c1}{enc28j60DumpReg}(interface);
216    \hyperlink{enc28j60__driver_8c_aafe0776da09c32c8801f984ed15918c7}{enc28j60DumpPhyReg}(interface);
217 
218    \textcolor{comment}{//Accept any packets from the upper layer}
219    \hyperlink{os__port__chibios_8c_afc1d64fc90afbf03baecfa636bb99ff7}{osSetEvent}(&interface->nicTxEvent);
220 
221    \textcolor{comment}{//Force the TCP/IP stack to poll the link state at startup}
222    interface->nicEvent = \hyperlink{os__port_8h_aa8cecfc5c5c054d2875c03e77b7be15d}{TRUE};
223    \textcolor{comment}{//Notify the TCP/IP stack of the event}
224    \hyperlink{os__port__chibios_8c_afc1d64fc90afbf03baecfa636bb99ff7}{osSetEvent}(&\hyperlink{net_8c_a4ad5a175123589d00e402e0c1c842fdc}{netEvent});
225 
226    \textcolor{comment}{//Successful initialization}
227    \textcolor{keywordflow}{return} \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689cabf350750d0d4fabd8954c0f1e9bbae94}{NO\_ERROR};
228 \}
\end{DoxyCode}
\mbox{\Hypertarget{enc28j60__driver_8c_a4fe538c68666084644945582c5c26bf3}\label{enc28j60__driver_8c_a4fe538c68666084644945582c5c26bf3}} 
\index{enc28j60\+\_\+driver.\+c@{enc28j60\+\_\+driver.\+c}!enc28j60\+Irq\+Handler@{enc28j60\+Irq\+Handler}}
\index{enc28j60\+Irq\+Handler@{enc28j60\+Irq\+Handler}!enc28j60\+\_\+driver.\+c@{enc28j60\+\_\+driver.\+c}}
\subsubsection{\texorpdfstring{enc28j60\+Irq\+Handler()}{enc28j60IrqHandler()}}
{\footnotesize\ttfamily \hyperlink{compiler__port_8h_a812d16e5494522586b3784e55d479912}{bool\+\_\+t} enc28j60\+Irq\+Handler (\begin{DoxyParamCaption}\item[{\hyperlink{net_8h_a2234db8911a1148c9159979d8f5e0d6b}{Net\+Interface} $\ast$}]{interface }\end{DoxyParamCaption})}



E\+N\+C28\+J60 interrupt service routine. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em interface} & Underlying network interface \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
T\+R\+UE if a higher priority task must be woken. Else F\+A\+L\+SE is returned 
\end{DoxyReturn}


Definition at line 271 of file enc28j60\+\_\+driver.\+c.


\begin{DoxyCode}
272 \{
273    \hyperlink{compiler__port_8h_a812d16e5494522586b3784e55d479912}{bool\_t} flag;
274    \hyperlink{stdint_8h_aba7bc1797add20fe3efdf37ced1182c5}{uint8\_t} status;
275 
276    \textcolor{comment}{//This flag will be set if a higher priority task must be woken}
277    flag = \hyperlink{os__port_8h_aa93f0eb578d23995850d61f7d61c55c1}{FALSE};
278 
279    \textcolor{comment}{//Clear the INTIE bit, immediately after an interrupt event}
280    \hyperlink{enc28j60__driver_8c_ad7a91793941c278b1dc3037151ccfa29}{enc28j60ClearBit}(interface, \hyperlink{enc28j60__driver_8h_ad86a5f30810ab89eaaf4cedacef038b5}{ENC28J60\_REG\_EIE}, 
      \hyperlink{enc28j60__driver_8h_a6e7ec3932ab30e65b5ea60440053a4bc}{EIE\_INTIE});
281 
282    \textcolor{comment}{//Read interrupt status register}
283    status = \hyperlink{enc28j60__driver_8c_a3d1bf45224477a6681bd39462d527398}{enc28j60ReadReg}(interface, \hyperlink{enc28j60__driver_8h_af65b302862627b3549855d26ba141f59}{ENC28J60\_REG\_EIR});
284 
285    \textcolor{comment}{//Link status change?}
286    \textcolor{keywordflow}{if}(status & \hyperlink{enc28j60__driver_8h_a9fe92c2717bcd98bb324409ed2d84210}{EIR\_LINKIF})
287    \{
288       \textcolor{comment}{//Disable LINKIE interrupt}
289       \hyperlink{enc28j60__driver_8c_ad7a91793941c278b1dc3037151ccfa29}{enc28j60ClearBit}(interface, \hyperlink{enc28j60__driver_8h_ad86a5f30810ab89eaaf4cedacef038b5}{ENC28J60\_REG\_EIE}, 
      \hyperlink{enc28j60__driver_8h_aad07156c0f73a7ec41d0c385f2c091b1}{EIE\_LINKIE});
290 
291       \textcolor{comment}{//Set event flag}
292       interface->nicEvent = \hyperlink{os__port_8h_aa8cecfc5c5c054d2875c03e77b7be15d}{TRUE};
293       \textcolor{comment}{//Notify the TCP/IP stack of the event}
294       flag |= \hyperlink{os__port__chibios_8c_aa30d505571a03dd645af374f40bd7016}{osSetEventFromIsr}(&\hyperlink{net_8c_a4ad5a175123589d00e402e0c1c842fdc}{netEvent});
295    \}
296 
297    \textcolor{comment}{//Packet received?}
298    \textcolor{keywordflow}{if}(status & \hyperlink{enc28j60__driver_8h_a11fcfa608a5040c26cc8f2c2d314ba80}{EIR\_PKTIF})
299    \{
300       \textcolor{comment}{//Disable PKTIE interrupt}
301       \hyperlink{enc28j60__driver_8c_ad7a91793941c278b1dc3037151ccfa29}{enc28j60ClearBit}(interface, \hyperlink{enc28j60__driver_8h_ad86a5f30810ab89eaaf4cedacef038b5}{ENC28J60\_REG\_EIE}, 
      \hyperlink{enc28j60__driver_8h_a1171f52b3a35649112ce502a26834bdd}{EIE\_PKTIE});
302 
303       \textcolor{comment}{//Set event flag}
304       interface->nicEvent = \hyperlink{os__port_8h_aa8cecfc5c5c054d2875c03e77b7be15d}{TRUE};
305       \textcolor{comment}{//Notify the TCP/IP stack of the event}
306       flag |= \hyperlink{os__port__chibios_8c_aa30d505571a03dd645af374f40bd7016}{osSetEventFromIsr}(&\hyperlink{net_8c_a4ad5a175123589d00e402e0c1c842fdc}{netEvent});
307    \}
308 
309    \textcolor{comment}{//Packet transmission complete?}
310    \textcolor{keywordflow}{if}(status & (\hyperlink{enc28j60__driver_8h_af193c0a7f0208c18b1d49668e68266e0}{EIR\_TXIF} | \hyperlink{enc28j60__driver_8h_a31359eb0905b74f9d0b6f398181deb34}{EIE\_TXERIE}))
311    \{
312       \textcolor{comment}{//Clear interrupt flags}
313       \hyperlink{enc28j60__driver_8c_ad7a91793941c278b1dc3037151ccfa29}{enc28j60ClearBit}(interface, \hyperlink{enc28j60__driver_8h_af65b302862627b3549855d26ba141f59}{ENC28J60\_REG\_EIR}, 
      \hyperlink{enc28j60__driver_8h_af193c0a7f0208c18b1d49668e68266e0}{EIR\_TXIF} | \hyperlink{enc28j60__driver_8h_a31359eb0905b74f9d0b6f398181deb34}{EIE\_TXERIE});
314 
315       \textcolor{comment}{//Notify the TCP/IP stack that the transmitter is ready to send}
316       flag |= \hyperlink{os__port__chibios_8c_aa30d505571a03dd645af374f40bd7016}{osSetEventFromIsr}(&interface->nicTxEvent);
317    \}
318 
319    \textcolor{comment}{//Once the interrupt has been serviced, the INTIE bit}
320    \textcolor{comment}{//is set again to re-enable interrupts}
321    \hyperlink{enc28j60__driver_8c_a22b496ba8629d4eee803138db70d9389}{enc28j60SetBit}(interface, \hyperlink{enc28j60__driver_8h_ad86a5f30810ab89eaaf4cedacef038b5}{ENC28J60\_REG\_EIE}, 
      \hyperlink{enc28j60__driver_8h_a6e7ec3932ab30e65b5ea60440053a4bc}{EIE\_INTIE});
322 
323    \textcolor{comment}{//A higher priority task must be woken?}
324    \textcolor{keywordflow}{return} flag;
325 \}
\end{DoxyCode}
\mbox{\Hypertarget{enc28j60__driver_8c_a5eb1f7dc06c808e06a05ebbb4fab48d3}\label{enc28j60__driver_8c_a5eb1f7dc06c808e06a05ebbb4fab48d3}} 
\index{enc28j60\+\_\+driver.\+c@{enc28j60\+\_\+driver.\+c}!enc28j60\+Read\+Buffer@{enc28j60\+Read\+Buffer}}
\index{enc28j60\+Read\+Buffer@{enc28j60\+Read\+Buffer}!enc28j60\+\_\+driver.\+c@{enc28j60\+\_\+driver.\+c}}
\subsubsection{\texorpdfstring{enc28j60\+Read\+Buffer()}{enc28j60ReadBuffer()}}
{\footnotesize\ttfamily void enc28j60\+Read\+Buffer (\begin{DoxyParamCaption}\item[{\hyperlink{net_8h_a2234db8911a1148c9159979d8f5e0d6b}{Net\+Interface} $\ast$}]{interface,  }\item[{\hyperlink{stdint_8h_aba7bc1797add20fe3efdf37ced1182c5}{uint8\+\_\+t} $\ast$}]{data,  }\item[{size\+\_\+t}]{length }\end{DoxyParamCaption})}



Read S\+R\+AM buffer. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em interface} & Underlying network interface \\
\hline
\mbox{\tt in}  & {\em data} & Buffer where to store the incoming data \\
\hline
\mbox{\tt in}  & {\em length} & Number of data to read \\
\hline
\end{DoxyParams}


Definition at line 852 of file enc28j60\+\_\+driver.\+c.


\begin{DoxyCode}
854 \{
855    \textcolor{keywordtype}{size\_t} i;
856 
857    \textcolor{comment}{//Pull the CS pin low}
858    interface->spiDriver->assertCs();
859 
860    \textcolor{comment}{//Write opcode}
861    interface->spiDriver->transfer(\hyperlink{enc28j60__driver_8h_a54330a935b3bc4a54631e51b2e8c7d65}{ENC28J60\_CMD\_RBM});
862 
863    \textcolor{comment}{//Copy data from SRAM buffer}
864    \textcolor{keywordflow}{for}(i = 0; i < \hyperlink{dtls__misc_8h_ab43ca82dd7fa2a0e56f941032ef324c4}{length}; i++)
865       \hyperlink{dtls__misc_8h_a5c239a1bb87b52b0f1d6d68c4749cd2a}{data}[i] = interface->spiDriver->transfer(0x00);
866 
867    \textcolor{comment}{//Terminate the operation by raising the CS pin}
868    interface->spiDriver->deassertCs();
869 \}
\end{DoxyCode}
\mbox{\Hypertarget{enc28j60__driver_8c_aebd1715d9403c56db9811e701bd7c597}\label{enc28j60__driver_8c_aebd1715d9403c56db9811e701bd7c597}} 
\index{enc28j60\+\_\+driver.\+c@{enc28j60\+\_\+driver.\+c}!enc28j60\+Read\+Phy\+Reg@{enc28j60\+Read\+Phy\+Reg}}
\index{enc28j60\+Read\+Phy\+Reg@{enc28j60\+Read\+Phy\+Reg}!enc28j60\+\_\+driver.\+c@{enc28j60\+\_\+driver.\+c}}
\subsubsection{\texorpdfstring{enc28j60\+Read\+Phy\+Reg()}{enc28j60ReadPhyReg()}}
{\footnotesize\ttfamily \hyperlink{stdint_8h_a273cf69d639a59973b6019625df33e30}{uint16\+\_\+t} enc28j60\+Read\+Phy\+Reg (\begin{DoxyParamCaption}\item[{\hyperlink{net_8h_a2234db8911a1148c9159979d8f5e0d6b}{Net\+Interface} $\ast$}]{interface,  }\item[{\hyperlink{stdint_8h_a273cf69d639a59973b6019625df33e30}{uint16\+\_\+t}}]{address }\end{DoxyParamCaption})}



Read P\+HY register. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em interface} & Underlying network interface \\
\hline
\mbox{\tt in}  & {\em address} & P\+HY register address \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Register value 
\end{DoxyReturn}


Definition at line 768 of file enc28j60\+\_\+driver.\+c.


\begin{DoxyCode}
769 \{
770    \hyperlink{stdint_8h_a273cf69d639a59973b6019625df33e30}{uint16\_t} \hyperlink{dtls__misc_8h_a5c239a1bb87b52b0f1d6d68c4749cd2a}{data};
771 
772    \textcolor{comment}{//Write register address}
773    \hyperlink{enc28j60__driver_8c_a5d32d56d84553c95dd21744f243199bc}{enc28j60WriteReg}(interface, \hyperlink{enc28j60__driver_8h_ac6057aa4458b4207562c3d9e7e8c608d}{ENC28J60\_REG\_MIREGADR}, 
      \hyperlink{dhcpv6__common_8h_aaee906fadd211e863c2e29a3690b25c4}{address} & \hyperlink{enc28j60__driver_8h_af63864942e2b3abe689ef33d12f2dcac}{REG\_ADDR\_MASK});
774 
775    \textcolor{comment}{//Start read operation}
776    \hyperlink{enc28j60__driver_8c_a5d32d56d84553c95dd21744f243199bc}{enc28j60WriteReg}(interface, \hyperlink{enc28j60__driver_8h_a242e205bfc9f12999b73b0a10c4355b7}{ENC28J60\_REG\_MICMD}, 
      \hyperlink{enc28j60__driver_8h_a5c468f805202bfc0737c024cbd1be32c}{MICMD\_MIIRD});
777    \textcolor{comment}{//Wait for the read operation to complete}
778    \textcolor{keywordflow}{while}(\hyperlink{enc28j60__driver_8c_a3d1bf45224477a6681bd39462d527398}{enc28j60ReadReg}(interface, \hyperlink{enc28j60__driver_8h_abf704d81cc6ddfd99ded4e19b7b22c2e}{ENC28J60\_REG\_MISTAT}) & 
      \hyperlink{enc28j60__driver_8h_a22b9a31e2a6d031cd672eed1ad883ba8}{MISTAT\_BUSY});
779    \textcolor{comment}{//Clear command register}
780    \hyperlink{enc28j60__driver_8c_a5d32d56d84553c95dd21744f243199bc}{enc28j60WriteReg}(interface, \hyperlink{enc28j60__driver_8h_a242e205bfc9f12999b73b0a10c4355b7}{ENC28J60\_REG\_MICMD}, 0);
781 
782    \textcolor{comment}{//Read the lower 8 bits}
783    data = \hyperlink{enc28j60__driver_8c_a3d1bf45224477a6681bd39462d527398}{enc28j60ReadReg}(interface, \hyperlink{enc28j60__driver_8h_a400957f13d90c2a9adaa682240662f90}{ENC28J60\_REG\_MIRDL});
784    \textcolor{comment}{//Read the upper 8 bits}
785    data |= \hyperlink{enc28j60__driver_8c_a3d1bf45224477a6681bd39462d527398}{enc28j60ReadReg}(interface, \hyperlink{enc28j60__driver_8h_affdee074620a3c71b014bcfe95817aa7}{ENC28J60\_REG\_MIRDH}) << 8;
786 
787    \textcolor{comment}{//Return register contents}
788    \textcolor{keywordflow}{return} \hyperlink{dtls__misc_8h_a5c239a1bb87b52b0f1d6d68c4749cd2a}{data};
789 \}
\end{DoxyCode}
\mbox{\Hypertarget{enc28j60__driver_8c_a3d1bf45224477a6681bd39462d527398}\label{enc28j60__driver_8c_a3d1bf45224477a6681bd39462d527398}} 
\index{enc28j60\+\_\+driver.\+c@{enc28j60\+\_\+driver.\+c}!enc28j60\+Read\+Reg@{enc28j60\+Read\+Reg}}
\index{enc28j60\+Read\+Reg@{enc28j60\+Read\+Reg}!enc28j60\+\_\+driver.\+c@{enc28j60\+\_\+driver.\+c}}
\subsubsection{\texorpdfstring{enc28j60\+Read\+Reg()}{enc28j60ReadReg()}}
{\footnotesize\ttfamily \hyperlink{stdint_8h_aba7bc1797add20fe3efdf37ced1182c5}{uint8\+\_\+t} enc28j60\+Read\+Reg (\begin{DoxyParamCaption}\item[{\hyperlink{net_8h_a2234db8911a1148c9159979d8f5e0d6b}{Net\+Interface} $\ast$}]{interface,  }\item[{\hyperlink{stdint_8h_a273cf69d639a59973b6019625df33e30}{uint16\+\_\+t}}]{address }\end{DoxyParamCaption})}



Read E\+N\+C28\+J60 register. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em interface} & Underlying network interface \\
\hline
\mbox{\tt in}  & {\em address} & Register address \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Register value 
\end{DoxyReturn}


Definition at line 710 of file enc28j60\+\_\+driver.\+c.


\begin{DoxyCode}
711 \{
712    \hyperlink{stdint_8h_a273cf69d639a59973b6019625df33e30}{uint16\_t} \hyperlink{dtls__misc_8h_a5c239a1bb87b52b0f1d6d68c4749cd2a}{data};
713 
714    \textcolor{comment}{//Make sure the corresponding bank is selected}
715    \hyperlink{enc28j60__driver_8c_aa69c3879fd08fdf574ceafcadc42275a}{enc28j60SelectBank}(interface, \hyperlink{dhcpv6__common_8h_aaee906fadd211e863c2e29a3690b25c4}{address});
716 
717    \textcolor{comment}{//Pull the CS pin low}
718    interface->spiDriver->assertCs();
719 
720    \textcolor{comment}{//Write opcode and register address}
721    interface->spiDriver->transfer(\hyperlink{enc28j60__driver_8h_a4791be9edb4183e55c733b9a4d218419}{ENC28J60\_CMD\_RCR} | (\hyperlink{dhcpv6__common_8h_aaee906fadd211e863c2e29a3690b25c4}{address} & 
      \hyperlink{enc28j60__driver_8h_af63864942e2b3abe689ef33d12f2dcac}{REG\_ADDR\_MASK}));
722 
723    \textcolor{comment}{//When reading MAC or MII registers, a dummy byte is first shifted out}
724    \textcolor{keywordflow}{if}((\hyperlink{dhcpv6__common_8h_aaee906fadd211e863c2e29a3690b25c4}{address} & \hyperlink{enc28j60__driver_8h_a3ab6e9687650e5133f70f27ec755dec0}{REG\_TYPE\_MASK}) != \hyperlink{enc28j60__driver_8h_a7a834b9a19380623135d0abd927d5f4a}{ETH\_REG\_TYPE})
725       interface->spiDriver->transfer(0x00);
726 
727    \textcolor{comment}{//Read register contents}
728    data = interface->spiDriver->transfer(0x00);
729 
730    \textcolor{comment}{//Terminate the operation by raising the CS pin}
731    interface->spiDriver->deassertCs();
732 
733    \textcolor{comment}{//Return register contents}
734    \textcolor{keywordflow}{return} \hyperlink{dtls__misc_8h_a5c239a1bb87b52b0f1d6d68c4749cd2a}{data};
735 \}
\end{DoxyCode}
\mbox{\Hypertarget{enc28j60__driver_8c_ab8aa467e39b8fd3ed32b077d61af25df}\label{enc28j60__driver_8c_ab8aa467e39b8fd3ed32b077d61af25df}} 
\index{enc28j60\+\_\+driver.\+c@{enc28j60\+\_\+driver.\+c}!enc28j60\+Receive\+Packet@{enc28j60\+Receive\+Packet}}
\index{enc28j60\+Receive\+Packet@{enc28j60\+Receive\+Packet}!enc28j60\+\_\+driver.\+c@{enc28j60\+\_\+driver.\+c}}
\subsubsection{\texorpdfstring{enc28j60\+Receive\+Packet()}{enc28j60ReceivePacket()}}
{\footnotesize\ttfamily \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689c}{error\+\_\+t} enc28j60\+Receive\+Packet (\begin{DoxyParamCaption}\item[{\hyperlink{net_8h_a2234db8911a1148c9159979d8f5e0d6b}{Net\+Interface} $\ast$}]{interface }\end{DoxyParamCaption})}



Receive a packet. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em interface} & Underlying network interface \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Error code 
\end{DoxyReturn}


Definition at line 470 of file enc28j60\+\_\+driver.\+c.


\begin{DoxyCode}
471 \{
472    \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689c}{error\_t} error;
473    \hyperlink{stdint_8h_a273cf69d639a59973b6019625df33e30}{uint16\_t} \hyperlink{dhcpv6__common_8h_a5a648f5ec00c526b0dfa2df7a272c6c0}{n};
474    \hyperlink{stdint_8h_a273cf69d639a59973b6019625df33e30}{uint16\_t} status;
475    \hyperlink{structEnc28j60Context}{Enc28j60Context} *context;
476 
477    \textcolor{comment}{//Point to the driver context}
478    context = (\hyperlink{structEnc28j60Context}{Enc28j60Context} *) interface->nicContext;
479 
480    \textcolor{comment}{//Any packet pending in the receive buffer?}
481    \textcolor{keywordflow}{if}(\hyperlink{enc28j60__driver_8c_a3d1bf45224477a6681bd39462d527398}{enc28j60ReadReg}(interface, \hyperlink{enc28j60__driver_8h_a559588d4eb8c80d8fd12c46e5d3cf66b}{ENC28J60\_REG\_EPKTCNT}))
482    \{
483       \textcolor{comment}{//Point to the start of the received packet}
484       \hyperlink{enc28j60__driver_8c_a5d32d56d84553c95dd21744f243199bc}{enc28j60WriteReg}(interface, \hyperlink{enc28j60__driver_8h_a642f8d8c2d40f054fbdc61a5146e8ea9}{ENC28J60\_REG\_ERDPTL}, 
      \hyperlink{os__port_8h_a34a3aa6cbadec6a80ab1eae8efd0083d}{LSB}(context->\hyperlink{structEnc28j60Context_ac4411e438d3a831b59f26e147172e824}{nextPacket}));
485       \hyperlink{enc28j60__driver_8c_a5d32d56d84553c95dd21744f243199bc}{enc28j60WriteReg}(interface, \hyperlink{enc28j60__driver_8h_a7d478d8469615338178b97dd5b60d3f7}{ENC28J60\_REG\_ERDPTH}, 
      \hyperlink{os__port_8h_aeb61a4e8fff2f4624a632a3189cbd3a0}{MSB}(context->\hyperlink{structEnc28j60Context_ac4411e438d3a831b59f26e147172e824}{nextPacket}));
486 
487       \textcolor{comment}{//Read the first two bytes, which are the address of the next packet}
488       \hyperlink{enc28j60__driver_8c_a5eb1f7dc06c808e06a05ebbb4fab48d3}{enc28j60ReadBuffer}(interface, (\hyperlink{stdint_8h_aba7bc1797add20fe3efdf37ced1182c5}{uint8\_t} *) &context->
      \hyperlink{structEnc28j60Context_ac4411e438d3a831b59f26e147172e824}{nextPacket}, \textcolor{keyword}{sizeof}(\hyperlink{stdint_8h_a273cf69d639a59973b6019625df33e30}{uint16\_t}));
489       \textcolor{comment}{//Get the length of the received frame in bytes}
490       \hyperlink{enc28j60__driver_8c_a5eb1f7dc06c808e06a05ebbb4fab48d3}{enc28j60ReadBuffer}(interface, (\hyperlink{stdint_8h_aba7bc1797add20fe3efdf37ced1182c5}{uint8\_t} *) &n, \textcolor{keyword}{sizeof}(
      \hyperlink{stdint_8h_a273cf69d639a59973b6019625df33e30}{uint16\_t}));
491       \textcolor{comment}{//Read the receive status vector (RSV)}
492       \hyperlink{enc28j60__driver_8c_a5eb1f7dc06c808e06a05ebbb4fab48d3}{enc28j60ReadBuffer}(interface, (\hyperlink{stdint_8h_aba7bc1797add20fe3efdf37ced1182c5}{uint8\_t} *) &status, \textcolor{keyword}{sizeof}(
      \hyperlink{stdint_8h_a273cf69d639a59973b6019625df33e30}{uint16\_t}));
493 
494       \textcolor{comment}{//Make sure no error occurred}
495       \textcolor{keywordflow}{if}(status & \hyperlink{enc28j60__driver_8h_a460a417f4684e6096570fa67cf47e437}{RSV\_RECEIVED\_OK})
496       \{
497          \textcolor{comment}{//Limit the number of data to read}
498          n = \hyperlink{os__port_8h_a3acffbd305ee72dcd4593c0d8af64a4f}{MIN}(n, \hyperlink{ethernet_8h_aa40569f19ea64ddc1cf273d095e517f4}{ETH\_MAX\_FRAME\_SIZE});
499          \textcolor{comment}{//Read the Ethernet frame}
500          \hyperlink{enc28j60__driver_8c_a5eb1f7dc06c808e06a05ebbb4fab48d3}{enc28j60ReadBuffer}(interface, context->\hyperlink{structEnc28j60Context_a5dec481de213c241d15d89e02ef38e1b}{rxBuffer}, n);
501          \textcolor{comment}{//Valid packet received}
502          error = \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689cabf350750d0d4fabd8954c0f1e9bbae94}{NO\_ERROR};
503       \}
504       \textcolor{keywordflow}{else}
505       \{
506          \textcolor{comment}{//The received packet contains an error}
507          error = \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689caccf6070ae61f26a48b523757a3168ad2}{ERROR\_INVALID\_PACKET};
508       \}
509 
510       \textcolor{comment}{//Advance the ERXRDPT pointer, taking care to wrap back at the}
511       \textcolor{comment}{//end of the received memory buffer}
512       \textcolor{keywordflow}{if}(context->\hyperlink{structEnc28j60Context_ac4411e438d3a831b59f26e147172e824}{nextPacket} == \hyperlink{enc28j60__driver_8h_af5e1df9bce475ccf843d9b9f13563399}{ENC28J60\_RX\_BUFFER\_START})
513       \{
514          \hyperlink{enc28j60__driver_8c_a5d32d56d84553c95dd21744f243199bc}{enc28j60WriteReg}(interface, \hyperlink{enc28j60__driver_8h_a6d8a7a901e33726525edd2a58ef566cc}{ENC28J60\_REG\_ERXRDPTL}, 
      \hyperlink{os__port_8h_a34a3aa6cbadec6a80ab1eae8efd0083d}{LSB}(\hyperlink{enc28j60__driver_8h_a3ed6252454d70388227b9b063334b107}{ENC28J60\_RX\_BUFFER\_STOP}));
515          \hyperlink{enc28j60__driver_8c_a5d32d56d84553c95dd21744f243199bc}{enc28j60WriteReg}(interface, \hyperlink{enc28j60__driver_8h_af9ca570202a9b8a2f7c1adfc377aa0d1}{ENC28J60\_REG\_ERXRDPTH}, 
      \hyperlink{os__port_8h_aeb61a4e8fff2f4624a632a3189cbd3a0}{MSB}(\hyperlink{enc28j60__driver_8h_a3ed6252454d70388227b9b063334b107}{ENC28J60\_RX\_BUFFER\_STOP}));
516       \}
517       \textcolor{keywordflow}{else}
518       \{
519          \hyperlink{enc28j60__driver_8c_a5d32d56d84553c95dd21744f243199bc}{enc28j60WriteReg}(interface, \hyperlink{enc28j60__driver_8h_a6d8a7a901e33726525edd2a58ef566cc}{ENC28J60\_REG\_ERXRDPTL}, 
      \hyperlink{os__port_8h_a34a3aa6cbadec6a80ab1eae8efd0083d}{LSB}(context->\hyperlink{structEnc28j60Context_ac4411e438d3a831b59f26e147172e824}{nextPacket} - 1));
520          \hyperlink{enc28j60__driver_8c_a5d32d56d84553c95dd21744f243199bc}{enc28j60WriteReg}(interface, \hyperlink{enc28j60__driver_8h_af9ca570202a9b8a2f7c1adfc377aa0d1}{ENC28J60\_REG\_ERXRDPTH}, 
      \hyperlink{os__port_8h_aeb61a4e8fff2f4624a632a3189cbd3a0}{MSB}(context->\hyperlink{structEnc28j60Context_ac4411e438d3a831b59f26e147172e824}{nextPacket} - 1));
521       \}
522 
523       \textcolor{comment}{//Decrement the packet counter}
524       \hyperlink{enc28j60__driver_8c_a22b496ba8629d4eee803138db70d9389}{enc28j60SetBit}(interface, \hyperlink{enc28j60__driver_8h_a00517ba8c7ae68677bc831ea4805a6cb}{ENC28J60\_REG\_ECON2}, 
      \hyperlink{enc28j60__driver_8h_a1fab919c4d16b2e96072b0479fc4b617}{ECON2\_PKTDEC});
525    \}
526    \textcolor{keywordflow}{else}
527    \{
528       \textcolor{comment}{//No more data in the receive buffer}
529       error = \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689ca838a7a87abb42b87d6862e98849fab2d}{ERROR\_BUFFER\_EMPTY};
530    \}
531 
532    \textcolor{comment}{//Check whether a valid packet has been received}
533    \textcolor{keywordflow}{if}(!error)
534    \{
535       \textcolor{comment}{//Pass the packet to the upper layer}
536       \hyperlink{nic_8c_a5e5ef3b84649c36ebfe1e70edb1a0f75}{nicProcessPacket}(interface, context->\hyperlink{structEnc28j60Context_a5dec481de213c241d15d89e02ef38e1b}{rxBuffer}, n);
537    \}
538 
539    \textcolor{comment}{//Return status code}
540    \textcolor{keywordflow}{return} error;
541 \}
\end{DoxyCode}
\mbox{\Hypertarget{enc28j60__driver_8c_aa69c3879fd08fdf574ceafcadc42275a}\label{enc28j60__driver_8c_aa69c3879fd08fdf574ceafcadc42275a}} 
\index{enc28j60\+\_\+driver.\+c@{enc28j60\+\_\+driver.\+c}!enc28j60\+Select\+Bank@{enc28j60\+Select\+Bank}}
\index{enc28j60\+Select\+Bank@{enc28j60\+Select\+Bank}!enc28j60\+\_\+driver.\+c@{enc28j60\+\_\+driver.\+c}}
\subsubsection{\texorpdfstring{enc28j60\+Select\+Bank()}{enc28j60SelectBank()}}
{\footnotesize\ttfamily void enc28j60\+Select\+Bank (\begin{DoxyParamCaption}\item[{\hyperlink{net_8h_a2234db8911a1148c9159979d8f5e0d6b}{Net\+Interface} $\ast$}]{interface,  }\item[{\hyperlink{stdint_8h_a273cf69d639a59973b6019625df33e30}{uint16\+\_\+t}}]{address }\end{DoxyParamCaption})}



Bank selection. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em interface} & Underlying network interface \\
\hline
\mbox{\tt in}  & {\em address} & Register address \\
\hline
\end{DoxyParams}


Definition at line 632 of file enc28j60\+\_\+driver.\+c.


\begin{DoxyCode}
633 \{
634    \hyperlink{stdint_8h_a273cf69d639a59973b6019625df33e30}{uint16\_t} bank;
635    \hyperlink{structEnc28j60Context}{Enc28j60Context} *context;
636 
637    \textcolor{comment}{//Point to the driver context}
638    context = (\hyperlink{structEnc28j60Context}{Enc28j60Context} *) interface->nicContext;
639 
640    \textcolor{comment}{//Get the bank number from the specified address}
641    bank = \hyperlink{dhcpv6__common_8h_aaee906fadd211e863c2e29a3690b25c4}{address} & \hyperlink{enc28j60__driver_8h_a29d6416be0b02a8e5c4415f3d33ed296}{REG\_BANK\_MASK};
642 
643    \textcolor{comment}{//Rewrite the bank number only if a change is detected}
644    \textcolor{keywordflow}{if}(bank != context->\hyperlink{structEnc28j60Context_a987ae13c8ce3236e2f76a012271dde69}{currentBank})
645    \{
646       \textcolor{comment}{//Select specified bank}
647       \textcolor{keywordflow}{switch}(bank)
648       \{
649       \textcolor{keywordflow}{case} \hyperlink{enc28j60__driver_8h_a3127bce3492bc853d5c523eb8c5c511c}{BANK\_0}:
650          \textcolor{comment}{//Select bank 0}
651          \hyperlink{enc28j60__driver_8c_ad7a91793941c278b1dc3037151ccfa29}{enc28j60ClearBit}(interface, \hyperlink{enc28j60__driver_8h_aed3264228bd86c4ac0cde27bc81ed5de}{ENC28J60\_REG\_ECON1}, 
      \hyperlink{enc28j60__driver_8h_a81c320643a8fcfb3c91f4e059a14c2c0}{ECON1\_BSEL1} | \hyperlink{enc28j60__driver_8h_ac05b5a98cc41d8736c62a6a96c248940}{ECON1\_BSEL0});
652          \textcolor{keywordflow}{break};
653       \textcolor{keywordflow}{case} \hyperlink{enc28j60__driver_8h_a8b7600c2f3265c711b8e96dc226f1caa}{BANK\_1}:
654          \textcolor{comment}{//Select bank 1}
655          \hyperlink{enc28j60__driver_8c_a22b496ba8629d4eee803138db70d9389}{enc28j60SetBit}(interface, \hyperlink{enc28j60__driver_8h_aed3264228bd86c4ac0cde27bc81ed5de}{ENC28J60\_REG\_ECON1}, 
      \hyperlink{enc28j60__driver_8h_ac05b5a98cc41d8736c62a6a96c248940}{ECON1\_BSEL0});
656          \hyperlink{enc28j60__driver_8c_ad7a91793941c278b1dc3037151ccfa29}{enc28j60ClearBit}(interface, \hyperlink{enc28j60__driver_8h_aed3264228bd86c4ac0cde27bc81ed5de}{ENC28J60\_REG\_ECON1}, 
      \hyperlink{enc28j60__driver_8h_a81c320643a8fcfb3c91f4e059a14c2c0}{ECON1\_BSEL1});
657          \textcolor{keywordflow}{break};
658       \textcolor{keywordflow}{case} \hyperlink{enc28j60__driver_8h_aaab66e13eed8844397057e5ac341f44b}{BANK\_2}:
659          \textcolor{comment}{//Select bank 2}
660          \hyperlink{enc28j60__driver_8c_ad7a91793941c278b1dc3037151ccfa29}{enc28j60ClearBit}(interface, \hyperlink{enc28j60__driver_8h_aed3264228bd86c4ac0cde27bc81ed5de}{ENC28J60\_REG\_ECON1}, 
      \hyperlink{enc28j60__driver_8h_ac05b5a98cc41d8736c62a6a96c248940}{ECON1\_BSEL0});
661          \hyperlink{enc28j60__driver_8c_a22b496ba8629d4eee803138db70d9389}{enc28j60SetBit}(interface, \hyperlink{enc28j60__driver_8h_aed3264228bd86c4ac0cde27bc81ed5de}{ENC28J60\_REG\_ECON1}, 
      \hyperlink{enc28j60__driver_8h_a81c320643a8fcfb3c91f4e059a14c2c0}{ECON1\_BSEL1});
662          \textcolor{keywordflow}{break};
663       \textcolor{keywordflow}{case} \hyperlink{enc28j60__driver_8h_afd57f85b3c4fd264fd91423e826014d6}{BANK\_3}:
664          \textcolor{comment}{//Select bank 3}
665          \hyperlink{enc28j60__driver_8c_a22b496ba8629d4eee803138db70d9389}{enc28j60SetBit}(interface, \hyperlink{enc28j60__driver_8h_aed3264228bd86c4ac0cde27bc81ed5de}{ENC28J60\_REG\_ECON1}, 
      \hyperlink{enc28j60__driver_8h_a81c320643a8fcfb3c91f4e059a14c2c0}{ECON1\_BSEL1} | \hyperlink{enc28j60__driver_8h_ac05b5a98cc41d8736c62a6a96c248940}{ECON1\_BSEL0});
666          \textcolor{keywordflow}{break};
667       \textcolor{keywordflow}{default}:
668          \textcolor{comment}{//Invalid bank}
669          \textcolor{keywordflow}{break};
670       \}
671 
672       \textcolor{comment}{//Save bank number}
673       context->\hyperlink{structEnc28j60Context_a987ae13c8ce3236e2f76a012271dde69}{currentBank} = bank;
674    \}
675 \}
\end{DoxyCode}
\mbox{\Hypertarget{enc28j60__driver_8c_a7a2c03bac3024d413be406b971a5e717}\label{enc28j60__driver_8c_a7a2c03bac3024d413be406b971a5e717}} 
\index{enc28j60\+\_\+driver.\+c@{enc28j60\+\_\+driver.\+c}!enc28j60\+Send\+Packet@{enc28j60\+Send\+Packet}}
\index{enc28j60\+Send\+Packet@{enc28j60\+Send\+Packet}!enc28j60\+\_\+driver.\+c@{enc28j60\+\_\+driver.\+c}}
\subsubsection{\texorpdfstring{enc28j60\+Send\+Packet()}{enc28j60SendPacket()}}
{\footnotesize\ttfamily \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689c}{error\+\_\+t} enc28j60\+Send\+Packet (\begin{DoxyParamCaption}\item[{\hyperlink{net_8h_a2234db8911a1148c9159979d8f5e0d6b}{Net\+Interface} $\ast$}]{interface,  }\item[{const \hyperlink{structNetBuffer}{Net\+Buffer} $\ast$}]{buffer,  }\item[{size\+\_\+t}]{offset }\end{DoxyParamCaption})}



Send a packet. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em interface} & Underlying network interface \\
\hline
\mbox{\tt in}  & {\em buffer} & Multi-\/part buffer containing the data to send \\
\hline
\mbox{\tt in}  & {\em offset} & Offset to the first data byte \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Error code 
\end{DoxyReturn}


Definition at line 407 of file enc28j60\+\_\+driver.\+c.


\begin{DoxyCode}
409 \{
410    \textcolor{keywordtype}{size\_t} \hyperlink{dtls__misc_8h_ab43ca82dd7fa2a0e56f941032ef324c4}{length};
411 
412    \textcolor{comment}{//Retrieve the length of the packet}
413    length = \hyperlink{net__mem_8c_ac9dbcd9e28e61d8f4f6d2e9af2607b68}{netBufferGetLength}(buffer) - \hyperlink{pic32mz_2isr__support_8h_a12a5aed8a193ebbf9a641104a310610d}{offset};
414 
415    \textcolor{comment}{//Check the frame length}
416    \textcolor{keywordflow}{if}(length > 1536)
417    \{
418       \textcolor{comment}{//The transmitter can accept another packet}
419       \hyperlink{os__port__chibios_8c_afc1d64fc90afbf03baecfa636bb99ff7}{osSetEvent}(&interface->nicTxEvent);
420       \textcolor{comment}{//Report an error}
421       \textcolor{keywordflow}{return} \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689cae5c014519c3ac2540447887ddca1bd28}{ERROR\_INVALID\_LENGTH};
422    \}
423 
424    \textcolor{comment}{//Make sure the link is up before transmitting the frame}
425    \textcolor{keywordflow}{if}(!interface->linkState)
426    \{
427       \textcolor{comment}{//The transmitter can accept another packet}
428       \hyperlink{os__port__chibios_8c_afc1d64fc90afbf03baecfa636bb99ff7}{osSetEvent}(&interface->nicTxEvent);
429       \textcolor{comment}{//Drop current packet}
430       \textcolor{keywordflow}{return} \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689cabf350750d0d4fabd8954c0f1e9bbae94}{NO\_ERROR};
431    \}
432 
433    \textcolor{comment}{//It is recommended to reset the transmit logic before}
434    \textcolor{comment}{//attempting to transmit a packet}
435    \hyperlink{enc28j60__driver_8c_a22b496ba8629d4eee803138db70d9389}{enc28j60SetBit}(interface, \hyperlink{enc28j60__driver_8h_aed3264228bd86c4ac0cde27bc81ed5de}{ENC28J60\_REG\_ECON1}, 
      \hyperlink{enc28j60__driver_8h_a671b1bccaaf1d135073b3604c85a8ff2}{ECON1\_TXRST});
436    \hyperlink{enc28j60__driver_8c_ad7a91793941c278b1dc3037151ccfa29}{enc28j60ClearBit}(interface, \hyperlink{enc28j60__driver_8h_aed3264228bd86c4ac0cde27bc81ed5de}{ENC28J60\_REG\_ECON1}, 
      \hyperlink{enc28j60__driver_8h_a671b1bccaaf1d135073b3604c85a8ff2}{ECON1\_TXRST});
437 
438    \textcolor{comment}{//Interrupt flags should be cleared after the reset is completed}
439    \hyperlink{enc28j60__driver_8c_ad7a91793941c278b1dc3037151ccfa29}{enc28j60ClearBit}(interface, \hyperlink{enc28j60__driver_8h_af65b302862627b3549855d26ba141f59}{ENC28J60\_REG\_EIR}, 
      \hyperlink{enc28j60__driver_8h_af193c0a7f0208c18b1d49668e68266e0}{EIR\_TXIF} | \hyperlink{enc28j60__driver_8h_a66297d20ff1a92778edc575b8d7a6659}{EIR\_TXERIF});
440 
441    \textcolor{comment}{//Set transmit buffer location}
442    \hyperlink{enc28j60__driver_8c_a5d32d56d84553c95dd21744f243199bc}{enc28j60WriteReg}(interface, \hyperlink{enc28j60__driver_8h_af08b2b7932912c8edcf0fb2dd2905d77}{ENC28J60\_REG\_ETXSTL}, 
      \hyperlink{os__port_8h_a34a3aa6cbadec6a80ab1eae8efd0083d}{LSB}(\hyperlink{enc28j60__driver_8h_a800cd94582435a8bb13be0da3cc0cb2b}{ENC28J60\_TX\_BUFFER\_START}));
443    \hyperlink{enc28j60__driver_8c_a5d32d56d84553c95dd21744f243199bc}{enc28j60WriteReg}(interface, \hyperlink{enc28j60__driver_8h_af60ed2d78d3d12aa7faef315db89ea09}{ENC28J60\_REG\_ETXSTH}, 
      \hyperlink{os__port_8h_aeb61a4e8fff2f4624a632a3189cbd3a0}{MSB}(\hyperlink{enc28j60__driver_8h_a800cd94582435a8bb13be0da3cc0cb2b}{ENC28J60\_TX\_BUFFER\_START}));
444 
445    \textcolor{comment}{//Point to start of transmit buffer}
446    \hyperlink{enc28j60__driver_8c_a5d32d56d84553c95dd21744f243199bc}{enc28j60WriteReg}(interface, \hyperlink{enc28j60__driver_8h_a760cad3b2dbfad6d6c9e984260589226}{ENC28J60\_REG\_EWRPTL}, 
      \hyperlink{os__port_8h_a34a3aa6cbadec6a80ab1eae8efd0083d}{LSB}(\hyperlink{enc28j60__driver_8h_a800cd94582435a8bb13be0da3cc0cb2b}{ENC28J60\_TX\_BUFFER\_START}));
447    \hyperlink{enc28j60__driver_8c_a5d32d56d84553c95dd21744f243199bc}{enc28j60WriteReg}(interface, \hyperlink{enc28j60__driver_8h_a52b8a506ec7211c40f1ea049e3b04d81}{ENC28J60\_REG\_EWRPTH}, 
      \hyperlink{os__port_8h_aeb61a4e8fff2f4624a632a3189cbd3a0}{MSB}(\hyperlink{enc28j60__driver_8h_a800cd94582435a8bb13be0da3cc0cb2b}{ENC28J60\_TX\_BUFFER\_START}));
448 
449    \textcolor{comment}{//Copy the data to the transmit buffer}
450    \hyperlink{enc28j60__driver_8c_a9a533c22ff34d8e79197e2a9b025aed5}{enc28j60WriteBuffer}(interface, buffer, \hyperlink{pic32mz_2isr__support_8h_a12a5aed8a193ebbf9a641104a310610d}{offset});
451 
452    \textcolor{comment}{//ETXND should point to the last byte in the data payload}
453    \hyperlink{enc28j60__driver_8c_a5d32d56d84553c95dd21744f243199bc}{enc28j60WriteReg}(interface, \hyperlink{enc28j60__driver_8h_a736819633b21901b1aaa6a6bfab69c19}{ENC28J60\_REG\_ETXNDL}, 
      \hyperlink{os__port_8h_a34a3aa6cbadec6a80ab1eae8efd0083d}{LSB}(\hyperlink{enc28j60__driver_8h_a800cd94582435a8bb13be0da3cc0cb2b}{ENC28J60\_TX\_BUFFER\_START} + length));
454    \hyperlink{enc28j60__driver_8c_a5d32d56d84553c95dd21744f243199bc}{enc28j60WriteReg}(interface, \hyperlink{enc28j60__driver_8h_a3c1f86270ce41ee594845fc5f191d107}{ENC28J60\_REG\_ETXNDH}, 
      \hyperlink{os__port_8h_aeb61a4e8fff2f4624a632a3189cbd3a0}{MSB}(\hyperlink{enc28j60__driver_8h_a800cd94582435a8bb13be0da3cc0cb2b}{ENC28J60\_TX\_BUFFER\_START} + length));
455 
456    \textcolor{comment}{//Start transmission}
457    \hyperlink{enc28j60__driver_8c_a22b496ba8629d4eee803138db70d9389}{enc28j60SetBit}(interface, \hyperlink{enc28j60__driver_8h_aed3264228bd86c4ac0cde27bc81ed5de}{ENC28J60\_REG\_ECON1}, 
      \hyperlink{enc28j60__driver_8h_a3a2e731dca9ed10137c429b3d2db006f}{ECON1\_TXRTS});
458 
459    \textcolor{comment}{//Successful processing}
460    \textcolor{keywordflow}{return} \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689cabf350750d0d4fabd8954c0f1e9bbae94}{NO\_ERROR};
461 \}
\end{DoxyCode}
\mbox{\Hypertarget{enc28j60__driver_8c_a22b496ba8629d4eee803138db70d9389}\label{enc28j60__driver_8c_a22b496ba8629d4eee803138db70d9389}} 
\index{enc28j60\+\_\+driver.\+c@{enc28j60\+\_\+driver.\+c}!enc28j60\+Set\+Bit@{enc28j60\+Set\+Bit}}
\index{enc28j60\+Set\+Bit@{enc28j60\+Set\+Bit}!enc28j60\+\_\+driver.\+c@{enc28j60\+\_\+driver.\+c}}
\subsubsection{\texorpdfstring{enc28j60\+Set\+Bit()}{enc28j60SetBit()}}
{\footnotesize\ttfamily void enc28j60\+Set\+Bit (\begin{DoxyParamCaption}\item[{\hyperlink{net_8h_a2234db8911a1148c9159979d8f5e0d6b}{Net\+Interface} $\ast$}]{interface,  }\item[{\hyperlink{stdint_8h_a273cf69d639a59973b6019625df33e30}{uint16\+\_\+t}}]{address,  }\item[{\hyperlink{stdint_8h_a273cf69d639a59973b6019625df33e30}{uint16\+\_\+t}}]{mask }\end{DoxyParamCaption})}



Set bit field. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em interface} & Underlying network interface \\
\hline
\mbox{\tt in}  & {\em address} & Register address \\
\hline
\mbox{\tt in}  & {\em mask} & Bits to set in the target register \\
\hline
\end{DoxyParams}


Definition at line 879 of file enc28j60\+\_\+driver.\+c.


\begin{DoxyCode}
880 \{
881    \textcolor{comment}{//Pull the CS pin low}
882    interface->spiDriver->assertCs();
883 
884    \textcolor{comment}{//Write opcode and register address}
885    interface->spiDriver->transfer(\hyperlink{enc28j60__driver_8h_aad0ee8be69088d57b8f78be9ea09d1e0}{ENC28J60\_CMD\_BFS} | (\hyperlink{dhcpv6__common_8h_aaee906fadd211e863c2e29a3690b25c4}{address} & 
      \hyperlink{enc28j60__driver_8h_af63864942e2b3abe689ef33d12f2dcac}{REG\_ADDR\_MASK}));
886    \textcolor{comment}{//Write bit mask}
887    interface->spiDriver->transfer(\hyperlink{web__socket_8h_a8a74907784be6c7786c2d060c8d7e10b}{mask});
888 
889    \textcolor{comment}{//Terminate the operation by raising the CS pin}
890    interface->spiDriver->deassertCs();
891 \}
\end{DoxyCode}
\mbox{\Hypertarget{enc28j60__driver_8c_a413e2e5e3c561a366b6a978390ad14c5}\label{enc28j60__driver_8c_a413e2e5e3c561a366b6a978390ad14c5}} 
\index{enc28j60\+\_\+driver.\+c@{enc28j60\+\_\+driver.\+c}!enc28j60\+Soft\+Reset@{enc28j60\+Soft\+Reset}}
\index{enc28j60\+Soft\+Reset@{enc28j60\+Soft\+Reset}!enc28j60\+\_\+driver.\+c@{enc28j60\+\_\+driver.\+c}}
\subsubsection{\texorpdfstring{enc28j60\+Soft\+Reset()}{enc28j60SoftReset()}}
{\footnotesize\ttfamily void enc28j60\+Soft\+Reset (\begin{DoxyParamCaption}\item[{\hyperlink{net_8h_a2234db8911a1148c9159979d8f5e0d6b}{Net\+Interface} $\ast$}]{interface }\end{DoxyParamCaption})}



E\+N\+C28\+J60 controller reset. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em interface} & Underlying network interface \\
\hline
\end{DoxyParams}


Definition at line 613 of file enc28j60\+\_\+driver.\+c.


\begin{DoxyCode}
614 \{
615    \textcolor{comment}{//Pull the CS pin low}
616    interface->spiDriver->assertCs();
617 
618    \textcolor{comment}{//Write opcode}
619    interface->spiDriver->transfer(\hyperlink{enc28j60__driver_8h_a0346ae5b99c8d24e032f63fddb02c863}{ENC28J60\_CMD\_SRC});
620 
621    \textcolor{comment}{//Terminate the operation by raising the CS pin}
622    interface->spiDriver->deassertCs();
623 \}
\end{DoxyCode}
\mbox{\Hypertarget{enc28j60__driver_8c_a8a85460817c2cfc22471cb62df4809ac}\label{enc28j60__driver_8c_a8a85460817c2cfc22471cb62df4809ac}} 
\index{enc28j60\+\_\+driver.\+c@{enc28j60\+\_\+driver.\+c}!enc28j60\+Tick@{enc28j60\+Tick}}
\index{enc28j60\+Tick@{enc28j60\+Tick}!enc28j60\+\_\+driver.\+c@{enc28j60\+\_\+driver.\+c}}
\subsubsection{\texorpdfstring{enc28j60\+Tick()}{enc28j60Tick()}}
{\footnotesize\ttfamily void enc28j60\+Tick (\begin{DoxyParamCaption}\item[{\hyperlink{net_8h_a2234db8911a1148c9159979d8f5e0d6b}{Net\+Interface} $\ast$}]{interface }\end{DoxyParamCaption})}



E\+N\+C28\+J60 timer handler. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em interface} & Underlying network interface \\
\hline
\end{DoxyParams}


Definition at line 236 of file enc28j60\+\_\+driver.\+c.


\begin{DoxyCode}
237 \{
238 \}
\end{DoxyCode}
\mbox{\Hypertarget{enc28j60__driver_8c_ac4f3dfff48e37f3b5fc2fbddc5b92a49}\label{enc28j60__driver_8c_ac4f3dfff48e37f3b5fc2fbddc5b92a49}} 
\index{enc28j60\+\_\+driver.\+c@{enc28j60\+\_\+driver.\+c}!enc28j60\+Update\+Mac\+Addr\+Filter@{enc28j60\+Update\+Mac\+Addr\+Filter}}
\index{enc28j60\+Update\+Mac\+Addr\+Filter@{enc28j60\+Update\+Mac\+Addr\+Filter}!enc28j60\+\_\+driver.\+c@{enc28j60\+\_\+driver.\+c}}
\subsubsection{\texorpdfstring{enc28j60\+Update\+Mac\+Addr\+Filter()}{enc28j60UpdateMacAddrFilter()}}
{\footnotesize\ttfamily \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689c}{error\+\_\+t} enc28j60\+Update\+Mac\+Addr\+Filter (\begin{DoxyParamCaption}\item[{\hyperlink{net_8h_a2234db8911a1148c9159979d8f5e0d6b}{Net\+Interface} $\ast$}]{interface }\end{DoxyParamCaption})}



Configure M\+AC address filtering. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em interface} & Underlying network interface \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Error code 
\end{DoxyReturn}


Definition at line 550 of file enc28j60\+\_\+driver.\+c.


\begin{DoxyCode}
551 \{
552    \hyperlink{compiler__port_8h_a12a1e9b3ce141648783a82445d02b58d}{uint\_t} i;
553    \hyperlink{compiler__port_8h_a12a1e9b3ce141648783a82445d02b58d}{uint\_t} \hyperlink{md5_8c_af11ea3cdbca7345eb6a4a8ac5ce0434d}{k};
554    \hyperlink{stdint_8h_a435d1572bf3f880d55459d9805097f62}{uint32\_t} crc;
555    \hyperlink{stdint_8h_aba7bc1797add20fe3efdf37ced1182c5}{uint8\_t} hashTable[8];
556    \hyperlink{structMacFilterEntry}{MacFilterEntry} *entry;
557 
558    \textcolor{comment}{//Debug message}
559    \hyperlink{debug_8h_a67a8f9bc74358aa21745a76e23768dae}{TRACE\_DEBUG}(\textcolor{stringliteral}{"Updating MAC filter...\(\backslash\)r\(\backslash\)n"});
560 
561    \textcolor{comment}{//Clear hash table}
562    memset(hashTable, 0, \textcolor{keyword}{sizeof}(hashTable));
563 
564    \textcolor{comment}{//The MAC address filter contains the list of MAC addresses to accept}
565    \textcolor{comment}{//when receiving an Ethernet frame}
566    \textcolor{keywordflow}{for}(i = 0; i < \hyperlink{ethernet_8h_ab64acae68b5723774fa272c62efd7c2b}{MAC\_ADDR\_FILTER\_SIZE}; i++)
567    \{
568       \textcolor{comment}{//Point to the current entry}
569       entry = &interface->macAddrFilter[i];
570 
571       \textcolor{comment}{//Valid entry?}
572       \textcolor{keywordflow}{if}(entry->\hyperlink{structMacFilterEntry_a4a1195d4086f58ef57862fa43551e73a}{refCount} > 0)
573       \{
574          \textcolor{comment}{//Compute CRC over the current MAC address}
575          crc = \hyperlink{enc28j60__driver_8c_a764bc1510993fcdef53f0a03548f65fa}{enc28j60CalcCrc}(&entry->\hyperlink{structMacFilterEntry_a30caa211d6cc1bb2416165526a2ab6cb}{addr}, \textcolor{keyword}{sizeof}(\hyperlink{ethernet_8h_a1e00ed3977e8a770e8b4ae4cb306d1c0}{MacAddr}));
576          \textcolor{comment}{//Calculate the corresponding index in the table}
577          k = (crc >> 23) & 0x3F;
578          \textcolor{comment}{//Update hash table contents}
579          hashTable[k / 8] |= (1 << (k % 8));
580       \}
581    \}
582 
583    \textcolor{comment}{//Write the hash table to the ENC28J60 controller}
584    \hyperlink{enc28j60__driver_8c_a5d32d56d84553c95dd21744f243199bc}{enc28j60WriteReg}(interface, \hyperlink{enc28j60__driver_8h_af156480d8b6fec9b734449a39d8e71ba}{ENC28J60\_REG\_EHT0}, hashTable[0]);
585    \hyperlink{enc28j60__driver_8c_a5d32d56d84553c95dd21744f243199bc}{enc28j60WriteReg}(interface, \hyperlink{enc28j60__driver_8h_aa175ea31e140d0f01dfe8799025ff149}{ENC28J60\_REG\_EHT1}, hashTable[1]);
586    \hyperlink{enc28j60__driver_8c_a5d32d56d84553c95dd21744f243199bc}{enc28j60WriteReg}(interface, \hyperlink{enc28j60__driver_8h_ad20af7927c8b1142818d20a17d7117f2}{ENC28J60\_REG\_EHT2}, hashTable[2]);
587    \hyperlink{enc28j60__driver_8c_a5d32d56d84553c95dd21744f243199bc}{enc28j60WriteReg}(interface, \hyperlink{enc28j60__driver_8h_a3a71141ce65822446b3d2b8aa949ffbc}{ENC28J60\_REG\_EHT3}, hashTable[3]);
588    \hyperlink{enc28j60__driver_8c_a5d32d56d84553c95dd21744f243199bc}{enc28j60WriteReg}(interface, \hyperlink{enc28j60__driver_8h_a1118c43e5d30200cb5960e758f78848d}{ENC28J60\_REG\_EHT4}, hashTable[4]);
589    \hyperlink{enc28j60__driver_8c_a5d32d56d84553c95dd21744f243199bc}{enc28j60WriteReg}(interface, \hyperlink{enc28j60__driver_8h_a2e77fdb596fc11ce818a5cacf3c04425}{ENC28J60\_REG\_EHT5}, hashTable[5]);
590    \hyperlink{enc28j60__driver_8c_a5d32d56d84553c95dd21744f243199bc}{enc28j60WriteReg}(interface, \hyperlink{enc28j60__driver_8h_a6c98f5c91acd033fdf1370c4a213a5a0}{ENC28J60\_REG\_EHT6}, hashTable[6]);
591    \hyperlink{enc28j60__driver_8c_a5d32d56d84553c95dd21744f243199bc}{enc28j60WriteReg}(interface, \hyperlink{enc28j60__driver_8h_a13df3c0cee55d7d9df84ed8af21edc23}{ENC28J60\_REG\_EHT7}, hashTable[7]);
592 
593    \textcolor{comment}{//Debug message}
594    \hyperlink{debug_8h_a67a8f9bc74358aa21745a76e23768dae}{TRACE\_DEBUG}(\textcolor{stringliteral}{"  EHT0 = %02"} PRIX8 \textcolor{stringliteral}{"\(\backslash\)r\(\backslash\)n"}, \hyperlink{enc28j60__driver_8c_a3d1bf45224477a6681bd39462d527398}{enc28j60ReadReg}(interface, 
      \hyperlink{enc28j60__driver_8h_af156480d8b6fec9b734449a39d8e71ba}{ENC28J60\_REG\_EHT0}));
595    \hyperlink{debug_8h_a67a8f9bc74358aa21745a76e23768dae}{TRACE\_DEBUG}(\textcolor{stringliteral}{"  EHT1 = %02"} PRIX8 \textcolor{stringliteral}{"\(\backslash\)r\(\backslash\)n"}, \hyperlink{enc28j60__driver_8c_a3d1bf45224477a6681bd39462d527398}{enc28j60ReadReg}(interface, 
      \hyperlink{enc28j60__driver_8h_aa175ea31e140d0f01dfe8799025ff149}{ENC28J60\_REG\_EHT1}));
596    \hyperlink{debug_8h_a67a8f9bc74358aa21745a76e23768dae}{TRACE\_DEBUG}(\textcolor{stringliteral}{"  EHT2 = %02"} PRIX8 \textcolor{stringliteral}{"\(\backslash\)r\(\backslash\)n"}, \hyperlink{enc28j60__driver_8c_a3d1bf45224477a6681bd39462d527398}{enc28j60ReadReg}(interface, 
      \hyperlink{enc28j60__driver_8h_ad20af7927c8b1142818d20a17d7117f2}{ENC28J60\_REG\_EHT2}));
597    \hyperlink{debug_8h_a67a8f9bc74358aa21745a76e23768dae}{TRACE\_DEBUG}(\textcolor{stringliteral}{"  EHT3 = %02"} PRIX8 \textcolor{stringliteral}{"\(\backslash\)r\(\backslash\)n"}, \hyperlink{enc28j60__driver_8c_a3d1bf45224477a6681bd39462d527398}{enc28j60ReadReg}(interface, 
      \hyperlink{enc28j60__driver_8h_a3a71141ce65822446b3d2b8aa949ffbc}{ENC28J60\_REG\_EHT3}));
598    \hyperlink{debug_8h_a67a8f9bc74358aa21745a76e23768dae}{TRACE\_DEBUG}(\textcolor{stringliteral}{"  EHT0 = %02"} PRIX8 \textcolor{stringliteral}{"\(\backslash\)r\(\backslash\)n"}, \hyperlink{enc28j60__driver_8c_a3d1bf45224477a6681bd39462d527398}{enc28j60ReadReg}(interface, 
      \hyperlink{enc28j60__driver_8h_a1118c43e5d30200cb5960e758f78848d}{ENC28J60\_REG\_EHT4}));
599    \hyperlink{debug_8h_a67a8f9bc74358aa21745a76e23768dae}{TRACE\_DEBUG}(\textcolor{stringliteral}{"  EHT1 = %02"} PRIX8 \textcolor{stringliteral}{"\(\backslash\)r\(\backslash\)n"}, \hyperlink{enc28j60__driver_8c_a3d1bf45224477a6681bd39462d527398}{enc28j60ReadReg}(interface, 
      \hyperlink{enc28j60__driver_8h_a2e77fdb596fc11ce818a5cacf3c04425}{ENC28J60\_REG\_EHT5}));
600    \hyperlink{debug_8h_a67a8f9bc74358aa21745a76e23768dae}{TRACE\_DEBUG}(\textcolor{stringliteral}{"  EHT2 = %02"} PRIX8 \textcolor{stringliteral}{"\(\backslash\)r\(\backslash\)n"}, \hyperlink{enc28j60__driver_8c_a3d1bf45224477a6681bd39462d527398}{enc28j60ReadReg}(interface, 
      \hyperlink{enc28j60__driver_8h_a6c98f5c91acd033fdf1370c4a213a5a0}{ENC28J60\_REG\_EHT6}));
601    \hyperlink{debug_8h_a67a8f9bc74358aa21745a76e23768dae}{TRACE\_DEBUG}(\textcolor{stringliteral}{"  EHT3 = %02"} PRIX8 \textcolor{stringliteral}{"\(\backslash\)r\(\backslash\)n"}, \hyperlink{enc28j60__driver_8c_a3d1bf45224477a6681bd39462d527398}{enc28j60ReadReg}(interface, 
      \hyperlink{enc28j60__driver_8h_a13df3c0cee55d7d9df84ed8af21edc23}{ENC28J60\_REG\_EHT7}));
602 
603    \textcolor{comment}{//Successful processing}
604    \textcolor{keywordflow}{return} \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689cabf350750d0d4fabd8954c0f1e9bbae94}{NO\_ERROR};
605 \}
\end{DoxyCode}
\mbox{\Hypertarget{enc28j60__driver_8c_a9a533c22ff34d8e79197e2a9b025aed5}\label{enc28j60__driver_8c_a9a533c22ff34d8e79197e2a9b025aed5}} 
\index{enc28j60\+\_\+driver.\+c@{enc28j60\+\_\+driver.\+c}!enc28j60\+Write\+Buffer@{enc28j60\+Write\+Buffer}}
\index{enc28j60\+Write\+Buffer@{enc28j60\+Write\+Buffer}!enc28j60\+\_\+driver.\+c@{enc28j60\+\_\+driver.\+c}}
\subsubsection{\texorpdfstring{enc28j60\+Write\+Buffer()}{enc28j60WriteBuffer()}}
{\footnotesize\ttfamily void enc28j60\+Write\+Buffer (\begin{DoxyParamCaption}\item[{\hyperlink{net_8h_a2234db8911a1148c9159979d8f5e0d6b}{Net\+Interface} $\ast$}]{interface,  }\item[{const \hyperlink{structNetBuffer}{Net\+Buffer} $\ast$}]{buffer,  }\item[{size\+\_\+t}]{offset }\end{DoxyParamCaption})}



Write S\+R\+AM buffer. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em interface} & Underlying network interface \\
\hline
\mbox{\tt in}  & {\em buffer} & Multi-\/part buffer containing the data to be written \\
\hline
\mbox{\tt in}  & {\em offset} & Offset to the first data byte \\
\hline
\end{DoxyParams}


Definition at line 799 of file enc28j60\+\_\+driver.\+c.


\begin{DoxyCode}
801 \{
802    \hyperlink{compiler__port_8h_a12a1e9b3ce141648783a82445d02b58d}{uint\_t} i;
803    \textcolor{keywordtype}{size\_t} j;
804    \textcolor{keywordtype}{size\_t} \hyperlink{dhcpv6__common_8h_a5a648f5ec00c526b0dfa2df7a272c6c0}{n};
805    \hyperlink{stdint_8h_aba7bc1797add20fe3efdf37ced1182c5}{uint8\_t} *\hyperlink{ndp_8h_a6519522ad9a6f45e7a8d25d31392a977}{p};
806 
807    \textcolor{comment}{//Pull the CS pin low}
808    interface->spiDriver->assertCs();
809 
810    \textcolor{comment}{//Write opcode}
811    interface->spiDriver->transfer(\hyperlink{enc28j60__driver_8h_a92bd6e20dda8093ced2007b5da5c3a80}{ENC28J60\_CMD\_WBM});
812    \textcolor{comment}{//Write per-packet control byte}
813    interface->spiDriver->transfer(0x00);
814 
815    \textcolor{comment}{//Loop through data chunks}
816    \textcolor{keywordflow}{for}(i = 0; i < buffer->\hyperlink{structNetBuffer_a43ab1f87d0236d4e01c19ff14f899618}{chunkCount}; i++)
817    \{
818       \textcolor{comment}{//Is there any data to copy from the current chunk?}
819       \textcolor{keywordflow}{if}(offset < buffer->chunk[i].\hyperlink{dtls__misc_8h_ab43ca82dd7fa2a0e56f941032ef324c4}{length})
820       \{
821          \textcolor{comment}{//Point to the first byte to be read}
822          p = (\hyperlink{stdint_8h_aba7bc1797add20fe3efdf37ced1182c5}{uint8\_t} *) buffer->\hyperlink{structNetBuffer_a5d399f3f37224030dcac9c4da3ca41eb}{chunk}[i].\hyperlink{structChunkDesc_a014aac6efdc5722e058a9b67ca5f8358}{address} + \hyperlink{pic32mz_2isr__support_8h_a12a5aed8a193ebbf9a641104a310610d}{offset};
823          \textcolor{comment}{//Compute the number of bytes to copy at a time}
824          n = buffer->\hyperlink{structNetBuffer_a5d399f3f37224030dcac9c4da3ca41eb}{chunk}[i].\hyperlink{structChunkDesc_a4bdd57a9363511126fe5cd6d30c51c81}{length} - \hyperlink{pic32mz_2isr__support_8h_a12a5aed8a193ebbf9a641104a310610d}{offset};
825 
826          \textcolor{comment}{//Copy data to SRAM buffer}
827          \textcolor{keywordflow}{for}(j = 0; j < n; j++)
828             interface->spiDriver->transfer(p[j]);
829 
830          \textcolor{comment}{//Process the next block from the start}
831          \hyperlink{pic32mz_2isr__support_8h_a12a5aed8a193ebbf9a641104a310610d}{offset} = 0;
832       \}
833       \textcolor{keywordflow}{else}
834       \{
835          \textcolor{comment}{//Skip the current chunk}
836          \hyperlink{pic32mz_2isr__support_8h_a12a5aed8a193ebbf9a641104a310610d}{offset} -= buffer->\hyperlink{structNetBuffer_a5d399f3f37224030dcac9c4da3ca41eb}{chunk}[i].\hyperlink{structChunkDesc_a4bdd57a9363511126fe5cd6d30c51c81}{length};
837       \}
838    \}
839 
840    \textcolor{comment}{//Terminate the operation by raising the CS pin}
841    interface->spiDriver->deassertCs();
842 \}
\end{DoxyCode}
\mbox{\Hypertarget{enc28j60__driver_8c_ad9b6811a68677ae16b56fedd09bdee17}\label{enc28j60__driver_8c_ad9b6811a68677ae16b56fedd09bdee17}} 
\index{enc28j60\+\_\+driver.\+c@{enc28j60\+\_\+driver.\+c}!enc28j60\+Write\+Phy\+Reg@{enc28j60\+Write\+Phy\+Reg}}
\index{enc28j60\+Write\+Phy\+Reg@{enc28j60\+Write\+Phy\+Reg}!enc28j60\+\_\+driver.\+c@{enc28j60\+\_\+driver.\+c}}
\subsubsection{\texorpdfstring{enc28j60\+Write\+Phy\+Reg()}{enc28j60WritePhyReg()}}
{\footnotesize\ttfamily void enc28j60\+Write\+Phy\+Reg (\begin{DoxyParamCaption}\item[{\hyperlink{net_8h_a2234db8911a1148c9159979d8f5e0d6b}{Net\+Interface} $\ast$}]{interface,  }\item[{\hyperlink{stdint_8h_a273cf69d639a59973b6019625df33e30}{uint16\+\_\+t}}]{address,  }\item[{\hyperlink{stdint_8h_a273cf69d639a59973b6019625df33e30}{uint16\+\_\+t}}]{data }\end{DoxyParamCaption})}



Write P\+HY register. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em interface} & Underlying network interface \\
\hline
\mbox{\tt in}  & {\em address} & P\+HY register address \\
\hline
\mbox{\tt in}  & {\em data} & Register value \\
\hline
\end{DoxyParams}


Definition at line 745 of file enc28j60\+\_\+driver.\+c.


\begin{DoxyCode}
747 \{
748    \textcolor{comment}{//Write register address}
749    \hyperlink{enc28j60__driver_8c_a5d32d56d84553c95dd21744f243199bc}{enc28j60WriteReg}(interface, \hyperlink{enc28j60__driver_8h_ac6057aa4458b4207562c3d9e7e8c608d}{ENC28J60\_REG\_MIREGADR}, 
      \hyperlink{dhcpv6__common_8h_aaee906fadd211e863c2e29a3690b25c4}{address} & \hyperlink{enc28j60__driver_8h_af63864942e2b3abe689ef33d12f2dcac}{REG\_ADDR\_MASK});
750 
751    \textcolor{comment}{//Write the lower 8 bits}
752    \hyperlink{enc28j60__driver_8c_a5d32d56d84553c95dd21744f243199bc}{enc28j60WriteReg}(interface, \hyperlink{enc28j60__driver_8h_a0d9c94b71f3006be78e20fdb1583a864}{ENC28J60\_REG\_MIWRL}, 
      \hyperlink{os__port_8h_a34a3aa6cbadec6a80ab1eae8efd0083d}{LSB}(\hyperlink{dtls__misc_8h_a5c239a1bb87b52b0f1d6d68c4749cd2a}{data}));
753    \textcolor{comment}{//Write the upper 8 bits}
754    \hyperlink{enc28j60__driver_8c_a5d32d56d84553c95dd21744f243199bc}{enc28j60WriteReg}(interface, \hyperlink{enc28j60__driver_8h_a18372f9872681669cf37bd8e948c01f5}{ENC28J60\_REG\_MIWRH}, 
      \hyperlink{os__port_8h_aeb61a4e8fff2f4624a632a3189cbd3a0}{MSB}(\hyperlink{dtls__misc_8h_a5c239a1bb87b52b0f1d6d68c4749cd2a}{data}));
755 
756    \textcolor{comment}{//Wait until the PHY register has been written}
757    \textcolor{keywordflow}{while}(\hyperlink{enc28j60__driver_8c_a3d1bf45224477a6681bd39462d527398}{enc28j60ReadReg}(interface, \hyperlink{enc28j60__driver_8h_abf704d81cc6ddfd99ded4e19b7b22c2e}{ENC28J60\_REG\_MISTAT}) & 
      \hyperlink{enc28j60__driver_8h_a22b9a31e2a6d031cd672eed1ad883ba8}{MISTAT\_BUSY});
758 \}
\end{DoxyCode}
\mbox{\Hypertarget{enc28j60__driver_8c_a5d32d56d84553c95dd21744f243199bc}\label{enc28j60__driver_8c_a5d32d56d84553c95dd21744f243199bc}} 
\index{enc28j60\+\_\+driver.\+c@{enc28j60\+\_\+driver.\+c}!enc28j60\+Write\+Reg@{enc28j60\+Write\+Reg}}
\index{enc28j60\+Write\+Reg@{enc28j60\+Write\+Reg}!enc28j60\+\_\+driver.\+c@{enc28j60\+\_\+driver.\+c}}
\subsubsection{\texorpdfstring{enc28j60\+Write\+Reg()}{enc28j60WriteReg()}}
{\footnotesize\ttfamily void enc28j60\+Write\+Reg (\begin{DoxyParamCaption}\item[{\hyperlink{net_8h_a2234db8911a1148c9159979d8f5e0d6b}{Net\+Interface} $\ast$}]{interface,  }\item[{\hyperlink{stdint_8h_a273cf69d639a59973b6019625df33e30}{uint16\+\_\+t}}]{address,  }\item[{\hyperlink{stdint_8h_aba7bc1797add20fe3efdf37ced1182c5}{uint8\+\_\+t}}]{data }\end{DoxyParamCaption})}



Write E\+N\+C28\+J60 register. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em interface} & Underlying network interface \\
\hline
\mbox{\tt in}  & {\em address} & Register address \\
\hline
\mbox{\tt in}  & {\em data} & Register value \\
\hline
\end{DoxyParams}


Definition at line 685 of file enc28j60\+\_\+driver.\+c.


\begin{DoxyCode}
686 \{
687    \textcolor{comment}{//Make sure the corresponding bank is selected}
688    \hyperlink{enc28j60__driver_8c_aa69c3879fd08fdf574ceafcadc42275a}{enc28j60SelectBank}(interface, \hyperlink{dhcpv6__common_8h_aaee906fadd211e863c2e29a3690b25c4}{address});
689 
690    \textcolor{comment}{//Pull the CS pin low}
691    interface->spiDriver->assertCs();
692 
693    \textcolor{comment}{//Write opcode and register address}
694    interface->spiDriver->transfer(\hyperlink{enc28j60__driver_8h_a141b97c4235da8ed0fc11a65a32d8103}{ENC28J60\_CMD\_WCR} | (\hyperlink{dhcpv6__common_8h_aaee906fadd211e863c2e29a3690b25c4}{address} & 
      \hyperlink{enc28j60__driver_8h_af63864942e2b3abe689ef33d12f2dcac}{REG\_ADDR\_MASK}));
695    \textcolor{comment}{//Write register value}
696    interface->spiDriver->transfer(\hyperlink{dtls__misc_8h_a5c239a1bb87b52b0f1d6d68c4749cd2a}{data});
697 
698    \textcolor{comment}{//Terminate the operation by raising the CS pin}
699    interface->spiDriver->deassertCs();
700 \}
\end{DoxyCode}


\subsection{Variable Documentation}
\mbox{\Hypertarget{enc28j60__driver_8c_a3cdfa797f475f419c31294f66b3af503}\label{enc28j60__driver_8c_a3cdfa797f475f419c31294f66b3af503}} 
\index{enc28j60\+\_\+driver.\+c@{enc28j60\+\_\+driver.\+c}!enc28j60\+Driver@{enc28j60\+Driver}}
\index{enc28j60\+Driver@{enc28j60\+Driver}!enc28j60\+\_\+driver.\+c@{enc28j60\+\_\+driver.\+c}}
\subsubsection{\texorpdfstring{enc28j60\+Driver}{enc28j60Driver}}
{\footnotesize\ttfamily const \hyperlink{structNicDriver}{Nic\+Driver} enc28j60\+Driver}

{\bfseries Initial value\+:}
\begin{DoxyCode}
=
\{
   \hyperlink{nic_8h_ac1ce8659a9797513ecd9cc1afedce40ba84802cab6ee937691c3d76122ffaffcd}{NIC\_TYPE\_ETHERNET},
   \hyperlink{ethernet_8h_a6f29d2b24a262d91b7158713728d45f2}{ETH\_MTU},
   \hyperlink{enc28j60__driver_8c_adae3d487c5a50307f4d6276b65d5439f}{enc28j60Init},
   \hyperlink{enc28j60__driver_8c_a8a85460817c2cfc22471cb62df4809ac}{enc28j60Tick},
   \hyperlink{enc28j60__driver_8c_a6b1900118c77311ee7866fed17df9d6b}{enc28j60EnableIrq},
   \hyperlink{enc28j60__driver_8c_a42b985b71a6c7f30d25e5a9a049d2beb}{enc28j60DisableIrq},
   \hyperlink{enc28j60__driver_8c_a988c81a8fd6c2bb0a368ab796a282da7}{enc28j60EventHandler},
   \hyperlink{enc28j60__driver_8c_a7a2c03bac3024d413be406b971a5e717}{enc28j60SendPacket},
   \hyperlink{enc28j60__driver_8c_ac4f3dfff48e37f3b5fc2fbddc5b92a49}{enc28j60UpdateMacAddrFilter},
   \hyperlink{group__BSPDefine_ga070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL},
   \hyperlink{group__BSPDefine_ga070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL},
   \hyperlink{group__BSPDefine_ga070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL},
   \hyperlink{os__port_8h_aa8cecfc5c5c054d2875c03e77b7be15d}{TRUE},
   \hyperlink{os__port_8h_aa8cecfc5c5c054d2875c03e77b7be15d}{TRUE},
   \hyperlink{os__port_8h_aa8cecfc5c5c054d2875c03e77b7be15d}{TRUE},
   \hyperlink{os__port_8h_aa93f0eb578d23995850d61f7d61c55c1}{FALSE}
\}
\end{DoxyCode}


E\+N\+C28\+J60 driver. 



Definition at line 45 of file enc28j60\+\_\+driver.\+c.

