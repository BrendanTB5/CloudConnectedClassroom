\hypertarget{wilc1000__driver_8c}{}\section{cyclone\+\_\+tcp/drivers/wifi/wilc1000\+\_\+driver.c File Reference}
\label{wilc1000__driver_8c}\index{cyclone\+\_\+tcp/drivers/wifi/wilc1000\+\_\+driver.\+c@{cyclone\+\_\+tcp/drivers/wifi/wilc1000\+\_\+driver.\+c}}


W\+I\+L\+C1000 Wi-\/\+Fi controller.  


{\ttfamily \#include \char`\"{}driver/include/m2m\+\_\+wifi.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}core/net.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}drivers/wifi/wilc1000\+\_\+driver.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}wilc1000\+\_\+config.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}debug.\+h\char`\"{}}\newline
\subsection*{Macros}
\begin{DoxyCompactItemize}
\item 
\#define \hyperlink{wilc1000__driver_8c_afcdf5e66fd927a7f4cc64295acd20407}{T\+R\+A\+C\+E\+\_\+\+L\+E\+V\+EL}~\hyperlink{net__config_8h_a880f48968c7969b328d5061cd3db0f36}{N\+I\+C\+\_\+\+T\+R\+A\+C\+E\+\_\+\+L\+E\+V\+EL}
\end{DoxyCompactItemize}
\subsection*{Functions}
\begin{DoxyCompactItemize}
\item 
\hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689c}{error\+\_\+t} \hyperlink{wilc1000__driver_8c_a8b92356b05b9ba23a65e8d462f5827d3}{wilc1000\+Init} (\hyperlink{net_8h_a2234db8911a1148c9159979d8f5e0d6b}{Net\+Interface} $\ast$interface)
\begin{DoxyCompactList}\small\item\em W\+I\+L\+C1000 initialization. \end{DoxyCompactList}\item 
void \hyperlink{wilc1000__driver_8c_afd13c92d44781cc3f5517c8c8739a7f0}{wilc1000\+Tick} (\hyperlink{net_8h_a2234db8911a1148c9159979d8f5e0d6b}{Net\+Interface} $\ast$interface)
\begin{DoxyCompactList}\small\item\em W\+I\+L\+C1000 timer handler. \end{DoxyCompactList}\item 
void \hyperlink{wilc1000__driver_8c_a819cb51c2dbc637b9fceaa52029171e9}{wilc1000\+Enable\+Irq} (\hyperlink{net_8h_a2234db8911a1148c9159979d8f5e0d6b}{Net\+Interface} $\ast$interface)
\begin{DoxyCompactList}\small\item\em Enable interrupts. \end{DoxyCompactList}\item 
void \hyperlink{wilc1000__driver_8c_ac3cca45be448986343d34cd12678373e}{wilc1000\+Disable\+Irq} (\hyperlink{net_8h_a2234db8911a1148c9159979d8f5e0d6b}{Net\+Interface} $\ast$interface)
\begin{DoxyCompactList}\small\item\em Disable interrupts. \end{DoxyCompactList}\item 
\hyperlink{compiler__port_8h_a812d16e5494522586b3784e55d479912}{bool\+\_\+t} \hyperlink{wilc1000__driver_8c_a8251d104fd175561eb8cdce98fd66421}{wilc1000\+Irq\+Handler} (void)
\begin{DoxyCompactList}\small\item\em W\+I\+L\+C1000 interrupt service routine. \end{DoxyCompactList}\item 
void \hyperlink{wilc1000__driver_8c_a0d4edc8c495e7b7ced92bd11264bd777}{wilc1000\+Event\+Handler} (\hyperlink{net_8h_a2234db8911a1148c9159979d8f5e0d6b}{Net\+Interface} $\ast$interface)
\begin{DoxyCompactList}\small\item\em W\+I\+L\+C1000 event handler. \end{DoxyCompactList}\item 
\hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689c}{error\+\_\+t} \hyperlink{wilc1000__driver_8c_abe78a334f597974b1c6f65c4bab43cfe}{wilc1000\+Send\+Packet} (\hyperlink{net_8h_a2234db8911a1148c9159979d8f5e0d6b}{Net\+Interface} $\ast$interface, const \hyperlink{structNetBuffer}{Net\+Buffer} $\ast$buffer, size\+\_\+t \hyperlink{pic32mz_2isr__support_8h_ac0542d92dfcd62c19170fd963f9e5052}{offset})
\begin{DoxyCompactList}\small\item\em Send a packet. \end{DoxyCompactList}\item 
\hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689c}{error\+\_\+t} \hyperlink{wilc1000__driver_8c_a365958b637c54fef6ee988792acf0f5e}{wilc1000\+Update\+Mac\+Addr\+Filter} (\hyperlink{net_8h_a2234db8911a1148c9159979d8f5e0d6b}{Net\+Interface} $\ast$interface)
\begin{DoxyCompactList}\small\item\em Configure M\+AC address filtering. \end{DoxyCompactList}\item 
\hyperlink{compiler__port_8h_a812d16e5494522586b3784e55d479912}{bool\+\_\+t} \hyperlink{wilc1000__driver_8c_aefd33de6f7c9a522bca22ed7e7b0a1d4}{wilc1000\+Get\+Addr\+Ref\+Count} (\hyperlink{net_8h_a2234db8911a1148c9159979d8f5e0d6b}{Net\+Interface} $\ast$interface, const \hyperlink{ethernet_8h_a1e00ed3977e8a770e8b4ae4cb306d1c0}{Mac\+Addr} $\ast$mac\+Addr)
\begin{DoxyCompactList}\small\item\em Get reference count for the specified multicast M\+AC address. \end{DoxyCompactList}\item 
void \hyperlink{wilc1000__driver_8c_a09d7e4c1c1779653c23a1f26f29d936d}{wilc1000\+App\+Wifi\+Event} (\hyperlink{stdint_8h_aba7bc1797add20fe3efdf37ced1182c5}{uint8\+\_\+t} \hyperlink{mqtt__sn__common_8h_a9d7facd71a8c8355a77006f5a6dcd420}{msg\+Type}, void $\ast$msg)
\begin{DoxyCompactList}\small\item\em Callback function that handles Wi-\/\+Fi events. \end{DoxyCompactList}\item 
void \hyperlink{wilc1000__driver_8c_a9cea2dece4cbf88d0fead9f70aceb94d}{wilc1000\+App\+Eth\+Event} (\hyperlink{stdint_8h_aba7bc1797add20fe3efdf37ced1182c5}{uint8\+\_\+t} \hyperlink{mqtt__sn__common_8h_a9d7facd71a8c8355a77006f5a6dcd420}{msg\+Type}, void $\ast$msg, void $\ast$ctrl\+Buf)
\begin{DoxyCompactList}\small\item\em Callback function that handles events in bypass mode. \end{DoxyCompactList}\end{DoxyCompactItemize}
\subsection*{Variables}
\begin{DoxyCompactItemize}
\item 
static \hyperlink{net_8h_a2234db8911a1148c9159979d8f5e0d6b}{Net\+Interface} $\ast$ \hyperlink{wilc1000__driver_8c_ade5547344ae6b6661f39d6fd73f2ca43}{wilc1000\+Sta\+Interface} = \hyperlink{group__BSPDefine_ga070d2ce7b6bb7e5c05602aa8c308d0c4}{N\+U\+LL}
\item 
static \hyperlink{net_8h_a2234db8911a1148c9159979d8f5e0d6b}{Net\+Interface} $\ast$ \hyperlink{wilc1000__driver_8c_a28f2f16378f78bc5f41473c1d484500c}{wilc1000\+Ap\+Interface} = \hyperlink{group__BSPDefine_ga070d2ce7b6bb7e5c05602aa8c308d0c4}{N\+U\+LL}
\item 
static \hyperlink{stdint_8h_aba7bc1797add20fe3efdf37ced1182c5}{uint8\+\_\+t} \hyperlink{wilc1000__driver_8c_aba92300075ca68e5227458fd23a1bb34}{tx\+Buffer} \mbox{[}\hyperlink{wilc1000__driver_8h_a64fc720af76f9bdcdb76ca72ac5ad59e}{W\+I\+L\+C1000\+\_\+\+T\+X\+\_\+\+B\+U\+F\+F\+E\+R\+\_\+\+S\+I\+ZE}\mbox{]}
\item 
static \hyperlink{stdint_8h_aba7bc1797add20fe3efdf37ced1182c5}{uint8\+\_\+t} \hyperlink{wilc1000__driver_8c_a33225839969f0578aae348a4fd62f0f3}{rx\+Buffer} \mbox{[}\hyperlink{wilc1000__driver_8h_ac0b005b73a92a956bf461486cc64476d}{W\+I\+L\+C1000\+\_\+\+R\+X\+\_\+\+B\+U\+F\+F\+E\+R\+\_\+\+S\+I\+ZE}\mbox{]}
\item 
const \hyperlink{structNicDriver}{Nic\+Driver} \hyperlink{wilc1000__driver_8c_ace53995adceede3ca793138cfb77175b}{wilc1000\+Sta\+Driver}
\begin{DoxyCompactList}\small\item\em W\+I\+L\+C1000 driver (S\+TA mode) \end{DoxyCompactList}\item 
const \hyperlink{structNicDriver}{Nic\+Driver} \hyperlink{wilc1000__driver_8c_ab0f945a866de6d3302002ac8d85a8cd3}{wilc1000\+Ap\+Driver}
\begin{DoxyCompactList}\small\item\em W\+I\+L\+C1000 driver (AP mode) \end{DoxyCompactList}\end{DoxyCompactItemize}


\subsection{Detailed Description}
W\+I\+L\+C1000 Wi-\/\+Fi controller. 

\hypertarget{pic32mz__ef__curiosity_8h_License}{}\subsection{License}\label{pic32mz__ef__curiosity_8h_License}
S\+P\+D\+X-\/\+License-\/\+Identifier\+: G\+P\+L-\/2.\+0-\/or-\/later

Copyright (C) 2010-\/2019 Oryx Embedded S\+A\+RL. All rights reserved.

This file is part of Cyclone\+T\+CP Open.

This program is free software; you can redistribute it and/or modify it under the terms of the G\+NU General Public License as published by the Free Software Foundation; either version 2 of the License, or (at your option) any later version.

This program is distributed in the hope that it will be useful, but W\+I\+T\+H\+O\+UT A\+NY W\+A\+R\+R\+A\+N\+TY; without even the implied warranty of M\+E\+R\+C\+H\+A\+N\+T\+A\+B\+I\+L\+I\+TY or F\+I\+T\+N\+E\+SS F\+OR A P\+A\+R\+T\+I\+C\+U\+L\+AR P\+U\+R\+P\+O\+SE. See the G\+NU General Public License for more details.

You should have received a copy of the G\+NU General Public License along with this program; if not, write to the Free Software Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-\/1301, U\+SA.

\begin{DoxyAuthor}{Author}
Oryx Embedded S\+A\+RL (www.\+oryx-\/embedded.\+com) 
\end{DoxyAuthor}
\begin{DoxyVersion}{Version}
1.\+9.\+6 
\end{DoxyVersion}


\subsection{Macro Definition Documentation}
\mbox{\Hypertarget{wilc1000__driver_8c_afcdf5e66fd927a7f4cc64295acd20407}\label{wilc1000__driver_8c_afcdf5e66fd927a7f4cc64295acd20407}} 
\index{wilc1000\+\_\+driver.\+c@{wilc1000\+\_\+driver.\+c}!T\+R\+A\+C\+E\+\_\+\+L\+E\+V\+EL@{T\+R\+A\+C\+E\+\_\+\+L\+E\+V\+EL}}
\index{T\+R\+A\+C\+E\+\_\+\+L\+E\+V\+EL@{T\+R\+A\+C\+E\+\_\+\+L\+E\+V\+EL}!wilc1000\+\_\+driver.\+c@{wilc1000\+\_\+driver.\+c}}
\subsubsection{\texorpdfstring{T\+R\+A\+C\+E\+\_\+\+L\+E\+V\+EL}{TRACE\_LEVEL}}
{\footnotesize\ttfamily \#define T\+R\+A\+C\+E\+\_\+\+L\+E\+V\+EL~\hyperlink{net__config_8h_a880f48968c7969b328d5061cd3db0f36}{N\+I\+C\+\_\+\+T\+R\+A\+C\+E\+\_\+\+L\+E\+V\+EL}}



Definition at line 32 of file wilc1000\+\_\+driver.\+c.



\subsection{Function Documentation}
\mbox{\Hypertarget{wilc1000__driver_8c_a9cea2dece4cbf88d0fead9f70aceb94d}\label{wilc1000__driver_8c_a9cea2dece4cbf88d0fead9f70aceb94d}} 
\index{wilc1000\+\_\+driver.\+c@{wilc1000\+\_\+driver.\+c}!wilc1000\+App\+Eth\+Event@{wilc1000\+App\+Eth\+Event}}
\index{wilc1000\+App\+Eth\+Event@{wilc1000\+App\+Eth\+Event}!wilc1000\+\_\+driver.\+c@{wilc1000\+\_\+driver.\+c}}
\subsubsection{\texorpdfstring{wilc1000\+App\+Eth\+Event()}{wilc1000AppEthEvent()}}
{\footnotesize\ttfamily void wilc1000\+App\+Eth\+Event (\begin{DoxyParamCaption}\item[{\hyperlink{stdint_8h_aba7bc1797add20fe3efdf37ced1182c5}{uint8\+\_\+t}}]{msg\+Type,  }\item[{void $\ast$}]{msg,  }\item[{void $\ast$}]{ctrl\+Buf }\end{DoxyParamCaption})}



Callback function that handles events in bypass mode. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em msg\+Type} & Type of notification \\
\hline
\mbox{\tt in}  & {\em msg} & Pointer to the buffer containing the notification parameters \\
\hline
\mbox{\tt in}  & {\em ctrl\+Buf} & Pointer to the control buffer \\
\hline
\end{DoxyParams}


Definition at line 612 of file wilc1000\+\_\+driver.\+c.


\begin{DoxyCode}
613 \{
614    \textcolor{keywordtype}{size\_t} \hyperlink{dtls__misc_8h_ab43ca82dd7fa2a0e56f941032ef324c4}{length};
615    \hyperlink{stdint_8h_aba7bc1797add20fe3efdf37ced1182c5}{uint8\_t} *packet;
616 \textcolor{preprocessor}{#if (M2M\_FIRMWARE\_VERSION\_MAJOR\_NO == 4 && M2M\_FIRMWARE\_VERSION\_MINOR\_NO >= 2)}
617    \hyperlink{structtstrM2MDataBufCtrl}{tstrM2MDataBufCtrl} *ctrl;
618 \textcolor{preprocessor}{#else}
619    tstrM2mIpCtrlBuf *ctrl;
620 \textcolor{preprocessor}{#endif}
621 
622    \textcolor{comment}{//Debug message}
623    \hyperlink{debug_8h_a67a8f9bc74358aa21745a76e23768dae}{TRACE\_DEBUG}(\textcolor{stringliteral}{"WILC1000 RX event callback\(\backslash\)r\(\backslash\)n"});
624 
625    \textcolor{comment}{//Point to the control buffer}
626 \textcolor{preprocessor}{#if (M2M\_FIRMWARE\_VERSION\_MAJOR\_NO == 4 && M2M\_FIRMWARE\_VERSION\_MINOR\_NO >= 2)}
627    ctrl = (\hyperlink{structtstrM2MDataBufCtrl}{tstrM2MDataBufCtrl} *) ctrlBuf;
628 \textcolor{preprocessor}{#else}
629    ctrl = (tstrM2mIpCtrlBuf *) ctrlBuf;
630 \textcolor{preprocessor}{#endif}
631 
632    \textcolor{comment}{//Check message type}
633    \textcolor{keywordflow}{if}(\hyperlink{dtls__misc_8h_a9d7facd71a8c8355a77006f5a6dcd420}{msgType} == \hyperlink{group__WlanEnums_gga064de09dec1d5e88ed8d075fa40f57dea2d2336ccd8bfda6e083b0ec6b8d798ba}{M2M\_WIFI\_RESP\_ETHERNET\_RX\_PACKET})
634    \{
635       \textcolor{comment}{//Debug message}
636       \hyperlink{debug_8h_a67a8f9bc74358aa21745a76e23768dae}{TRACE\_DEBUG}(\textcolor{stringliteral}{"  M2M\_WIFI\_RESP\_ETHERNET\_RX\_PACKET\(\backslash\)r\(\backslash\)n"});
637 
638 \textcolor{preprocessor}{#if (M2M\_FIRMWARE\_VERSION\_MAJOR\_NO == 3)}
639       \textcolor{comment}{//Point to the beginning of the packet}
640       packet = \hyperlink{wilc1000__driver_8c_a33225839969f0578aae348a4fd62f0f3}{rxBuffer};
641 \textcolor{preprocessor}{#elif (M2M\_FIRMWARE\_VERSION\_MAJOR\_NO == 4)}
642       \textcolor{comment}{//Point to the beginning of the packet}
643       packet = \hyperlink{wilc1000__driver_8c_a33225839969f0578aae348a4fd62f0f3}{rxBuffer} + ctrl->u8DataOffset;
644 \textcolor{preprocessor}{#endif}
645 
646       \textcolor{comment}{//Retrieve the length of the packet}
647       length = ctrl->u16DataSize;
648 
649       \textcolor{comment}{//Check interface identifier}
650 \textcolor{preprocessor}{#if (M2M\_FIRMWARE\_VERSION\_MAJOR\_NO == 4 && M2M\_FIRMWARE\_VERSION\_MINOR\_NO >= 2)}
651       \textcolor{keywordflow}{if}(ctrl->u8IfcId == \hyperlink{group__WlanEnums_gga21dc8518e48f99cdf9cf68eebcfcf982af1332c69b03c8077d76b6652e4b6b67d}{STATION\_INTERFACE})
652 \textcolor{preprocessor}{#else}
653       \textcolor{keywordflow}{if}(ctrl->u8IfcId == INTERFACE\_1)
654 \textcolor{preprocessor}{#endif}
655       \{
656          \textcolor{comment}{//Valid interface?}
657          \textcolor{keywordflow}{if}(\hyperlink{wilc1000__driver_8c_ade5547344ae6b6661f39d6fd73f2ca43}{wilc1000StaInterface} != \hyperlink{group__BSPDefine_ga070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL})
658          \{
659             \textcolor{comment}{//Check destination MAC address}
660             \textcolor{keywordflow}{if}(\hyperlink{wilc1000__driver_8c_a28f2f16378f78bc5f41473c1d484500c}{wilc1000ApInterface} != \hyperlink{group__BSPDefine_ga070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL})
661             \{
662                \textcolor{keywordflow}{if}(\hyperlink{ethernet_8h_a800d9f928930baf027e925976c44b9b2}{macCompAddr}(packet, \hyperlink{wilc1000__driver_8c_a28f2f16378f78bc5f41473c1d484500c}{wilc1000ApInterface}->macAddr.b))
663                   \hyperlink{ethernet_8h_aa0ca7dc72f1ca81fabcc0aeeafb0d465}{macCopyAddr}(packet, \hyperlink{wilc1000__driver_8c_ade5547344ae6b6661f39d6fd73f2ca43}{wilc1000StaInterface}->macAddr.b);
664             \}
665 
666             \textcolor{comment}{//Pass the packet to the upper layer (STA mode)}
667             \hyperlink{nic_8c_a5e5ef3b84649c36ebfe1e70edb1a0f75}{nicProcessPacket}(\hyperlink{wilc1000__driver_8c_ade5547344ae6b6661f39d6fd73f2ca43}{wilc1000StaInterface}, packet, length);
668          \}
669       \}
670 \textcolor{preprocessor}{#if (M2M\_FIRMWARE\_VERSION\_MAJOR\_NO == 4 && M2M\_FIRMWARE\_VERSION\_MINOR\_NO >= 2)}
671       \textcolor{keywordflow}{else} \textcolor{keywordflow}{if}(ctrl->u8IfcId == \hyperlink{group__WlanEnums_gga21dc8518e48f99cdf9cf68eebcfcf982aeef78d0be1ab7a519e48d25a2eea8717}{AP\_INTERFACE})
672 \textcolor{preprocessor}{#else}
673       \textcolor{keywordflow}{else} \textcolor{keywordflow}{if}(ctrl->u8IfcId == INTERFACE\_2)
674 \textcolor{preprocessor}{#endif}
675       \{
676          \textcolor{comment}{//Valid interface?}
677          \textcolor{keywordflow}{if}(\hyperlink{wilc1000__driver_8c_a28f2f16378f78bc5f41473c1d484500c}{wilc1000ApInterface} != \hyperlink{group__BSPDefine_ga070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL})
678          \{
679             \textcolor{comment}{//Check destination MAC address}
680             \textcolor{keywordflow}{if}(\hyperlink{wilc1000__driver_8c_ade5547344ae6b6661f39d6fd73f2ca43}{wilc1000StaInterface} != \hyperlink{group__BSPDefine_ga070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL})
681             \{
682                \textcolor{keywordflow}{if}(\hyperlink{ethernet_8h_a800d9f928930baf027e925976c44b9b2}{macCompAddr}(packet, \hyperlink{wilc1000__driver_8c_ade5547344ae6b6661f39d6fd73f2ca43}{wilc1000StaInterface}->macAddr.b))
683                   \hyperlink{ethernet_8h_aa0ca7dc72f1ca81fabcc0aeeafb0d465}{macCopyAddr}(packet, \hyperlink{wilc1000__driver_8c_a28f2f16378f78bc5f41473c1d484500c}{wilc1000ApInterface}->macAddr.b);
684             \}
685 
686             \textcolor{comment}{//Pass the packet to the upper layer (AP mode)}
687             \hyperlink{nic_8c_a5e5ef3b84649c36ebfe1e70edb1a0f75}{nicProcessPacket}(\hyperlink{wilc1000__driver_8c_a28f2f16378f78bc5f41473c1d484500c}{wilc1000ApInterface}, packet, length);
688          \}
689       \}
690    \}
691 \}
\end{DoxyCode}
\mbox{\Hypertarget{wilc1000__driver_8c_a09d7e4c1c1779653c23a1f26f29d936d}\label{wilc1000__driver_8c_a09d7e4c1c1779653c23a1f26f29d936d}} 
\index{wilc1000\+\_\+driver.\+c@{wilc1000\+\_\+driver.\+c}!wilc1000\+App\+Wifi\+Event@{wilc1000\+App\+Wifi\+Event}}
\index{wilc1000\+App\+Wifi\+Event@{wilc1000\+App\+Wifi\+Event}!wilc1000\+\_\+driver.\+c@{wilc1000\+\_\+driver.\+c}}
\subsubsection{\texorpdfstring{wilc1000\+App\+Wifi\+Event()}{wilc1000AppWifiEvent()}}
{\footnotesize\ttfamily void wilc1000\+App\+Wifi\+Event (\begin{DoxyParamCaption}\item[{\hyperlink{stdint_8h_aba7bc1797add20fe3efdf37ced1182c5}{uint8\+\_\+t}}]{msg\+Type,  }\item[{void $\ast$}]{msg }\end{DoxyParamCaption})}



Callback function that handles Wi-\/\+Fi events. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em msg\+Type} & Type of notification \\
\hline
\mbox{\tt in}  & {\em msg} & Pointer to the buffer containing the notification parameters \\
\hline
\end{DoxyParams}


Definition at line 520 of file wilc1000\+\_\+driver.\+c.


\begin{DoxyCode}
521 \{
522    \hyperlink{structtstrM2mWifiStateChanged}{tstrM2mWifiStateChanged} *stateChangedMsg;
523 
524    \textcolor{comment}{//Debug message}
525    \hyperlink{debug_8h_a7339bfd784193a5c79efcef2eeb2d6df}{TRACE\_INFO}(\textcolor{stringliteral}{"WILC1000 Wi-Fi event callback\(\backslash\)r\(\backslash\)n"});
526 
527    \textcolor{comment}{//Check message type}
528    \textcolor{keywordflow}{if}(\hyperlink{dtls__misc_8h_a9d7facd71a8c8355a77006f5a6dcd420}{msgType} == \hyperlink{group__WlanEnums_gga57466b36df595c593e7ccc9892e14b20a71745d4c66d95eca1782fa6fa3ba0cac}{M2M\_WIFI\_RESP\_FIRMWARE\_STRTED})
529    \{
530       \textcolor{comment}{//Debug message}
531       \hyperlink{debug_8h_a7339bfd784193a5c79efcef2eeb2d6df}{TRACE\_INFO}(\textcolor{stringliteral}{"  M2M\_WIFI\_RESP\_FIRMWARE\_STRTED\(\backslash\)r\(\backslash\)n"});
532    \}
533    \textcolor{keywordflow}{else} \textcolor{keywordflow}{if}(\hyperlink{dtls__misc_8h_a9d7facd71a8c8355a77006f5a6dcd420}{msgType} == \hyperlink{group__WlanEnums_gga064de09dec1d5e88ed8d075fa40f57deabb42b3025c56c51d915a1fa4abd2dbd0}{M2M\_WIFI\_RESP\_CON\_STATE\_CHANGED})
534    \{
535       \textcolor{comment}{//Debug message}
536       \hyperlink{debug_8h_a7339bfd784193a5c79efcef2eeb2d6df}{TRACE\_INFO}(\textcolor{stringliteral}{"  M2M\_WIFI\_RESP\_CON\_STATE\_CHANGED\(\backslash\)r\(\backslash\)n"});
537 
538       \textcolor{comment}{//Connection state}
539       stateChangedMsg = (\hyperlink{structtstrM2mWifiStateChanged}{tstrM2mWifiStateChanged}*) msg;
540 
541       \textcolor{comment}{//Check interface identifier}
542 \textcolor{preprocessor}{#if (M2M\_FIRMWARE\_VERSION\_MAJOR\_NO == 4 && M2M\_FIRMWARE\_VERSION\_MINOR\_NO >= 2)}
543       \textcolor{keywordflow}{if}(stateChangedMsg->\hyperlink{structtstrM2mWifiStateChanged_a51cd59eb757ed24fcbc2dc7e3a0facfb}{u8IfcId} == \hyperlink{group__WlanEnums_gga21dc8518e48f99cdf9cf68eebcfcf982af1332c69b03c8077d76b6652e4b6b67d}{STATION\_INTERFACE})
544 \textcolor{preprocessor}{#else}
545       \textcolor{keywordflow}{if}(stateChangedMsg->\hyperlink{structtstrM2mWifiStateChanged_a51cd59eb757ed24fcbc2dc7e3a0facfb}{u8IfcId} == INTERFACE\_1)
546 \textcolor{preprocessor}{#endif}
547       \{
548          \textcolor{comment}{//Check whether STA mode is enabled}
549          \textcolor{keywordflow}{if}(\hyperlink{wilc1000__driver_8c_ade5547344ae6b6661f39d6fd73f2ca43}{wilc1000StaInterface} != \hyperlink{group__BSPDefine_ga070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL})
550          \{
551             \textcolor{comment}{//Check link state}
552             \textcolor{keywordflow}{if}(stateChangedMsg->\hyperlink{structtstrM2mWifiStateChanged_a8cf6acc2d9640b20629c6b8383534dfa}{u8CurrState} == \hyperlink{group__WlanEnums_gga460c311f58f4c40c3d20eec9e99db586a9196649c19ee10e2168e08a5b4785938}{M2M\_WIFI\_CONNECTED})
553             \{
554                \textcolor{comment}{//Link is up}
555                \hyperlink{wilc1000__driver_8c_ade5547344ae6b6661f39d6fd73f2ca43}{wilc1000StaInterface}->linkState = \hyperlink{os__port_8h_aa8cecfc5c5c054d2875c03e77b7be15d}{TRUE};
556             \}
557             \textcolor{keywordflow}{else}
558             \{
559                \textcolor{comment}{//Link is down}
560                \hyperlink{wilc1000__driver_8c_ade5547344ae6b6661f39d6fd73f2ca43}{wilc1000StaInterface}->linkState = \hyperlink{os__port_8h_aa93f0eb578d23995850d61f7d61c55c1}{FALSE};
561             \}
562 
563             \textcolor{comment}{//Process link state change event}
564             \hyperlink{nic_8c_ae9054795c5d49a4db97396bf1d16b413}{nicNotifyLinkChange}(\hyperlink{wilc1000__driver_8c_ade5547344ae6b6661f39d6fd73f2ca43}{wilc1000StaInterface});
565          \}
566       \}
567 \textcolor{preprocessor}{#if (M2M\_FIRMWARE\_VERSION\_MAJOR\_NO == 4 && M2M\_FIRMWARE\_VERSION\_MINOR\_NO >= 2)}
568       \textcolor{keywordflow}{else} \textcolor{keywordflow}{if}(stateChangedMsg->\hyperlink{structtstrM2mWifiStateChanged_a51cd59eb757ed24fcbc2dc7e3a0facfb}{u8IfcId} == \hyperlink{group__WlanEnums_gga21dc8518e48f99cdf9cf68eebcfcf982aeef78d0be1ab7a519e48d25a2eea8717}{AP\_INTERFACE})
569 \textcolor{preprocessor}{#else}
570       \textcolor{keywordflow}{else} \textcolor{keywordflow}{if}(stateChangedMsg->\hyperlink{structtstrM2mWifiStateChanged_a51cd59eb757ed24fcbc2dc7e3a0facfb}{u8IfcId} == INTERFACE\_2)
571 \textcolor{preprocessor}{#endif}
572       \{
573          \textcolor{comment}{//Check whether AP mode is enabled}
574          \textcolor{keywordflow}{if}(\hyperlink{wilc1000__driver_8c_a28f2f16378f78bc5f41473c1d484500c}{wilc1000ApInterface} != \hyperlink{group__BSPDefine_ga070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL})
575          \{
576             \textcolor{comment}{//Check link state}
577             \textcolor{keywordflow}{if}(stateChangedMsg->\hyperlink{structtstrM2mWifiStateChanged_a8cf6acc2d9640b20629c6b8383534dfa}{u8CurrState} == \hyperlink{group__WlanEnums_gga460c311f58f4c40c3d20eec9e99db586a9196649c19ee10e2168e08a5b4785938}{M2M\_WIFI\_CONNECTED})
578             \{
579                \textcolor{comment}{//Link is up}
580                \hyperlink{wilc1000__driver_8c_a28f2f16378f78bc5f41473c1d484500c}{wilc1000ApInterface}->linkState = \hyperlink{os__port_8h_aa8cecfc5c5c054d2875c03e77b7be15d}{TRUE};
581             \}
582             \textcolor{keywordflow}{else}
583             \{
584                \textcolor{comment}{//Link is down}
585                \hyperlink{wilc1000__driver_8c_a28f2f16378f78bc5f41473c1d484500c}{wilc1000ApInterface}->linkState = \hyperlink{os__port_8h_aa93f0eb578d23995850d61f7d61c55c1}{FALSE};
586             \}
587 
588             \textcolor{comment}{//Process link state change event}
589             \hyperlink{nic_8c_ae9054795c5d49a4db97396bf1d16b413}{nicNotifyLinkChange}(\hyperlink{wilc1000__driver_8c_a28f2f16378f78bc5f41473c1d484500c}{wilc1000ApInterface});
590          \}
591       \}
592    \}
593 
594 \textcolor{preprocessor}{#if defined(CONF\_WILC\_EVENT\_HOOK)}
595    \textcolor{comment}{//Release exclusive access}
596    \hyperlink{os__port__chibios_8c_a8e10e5b2c6d3877b5ba60e375ac45d79}{osReleaseMutex}(&\hyperlink{net_8c_afe31551ad26115fae8e575654346d441}{netMutex});
597    \textcolor{comment}{//Invoke user callback function}
598    \hyperlink{wilc1000__config_8h_a16ac9977fb1ccaca0c59a8fc4c6e4381}{CONF\_WILC\_EVENT\_HOOK}(\hyperlink{dtls__misc_8h_a9d7facd71a8c8355a77006f5a6dcd420}{msgType}, msg);
599    \textcolor{comment}{//Get exclusive access}
600    \hyperlink{os__port__chibios_8c_a58485224df4bfa522246d55b35bbd83a}{osAcquireMutex}(&\hyperlink{net_8c_afe31551ad26115fae8e575654346d441}{netMutex});
601 \textcolor{preprocessor}{#endif}
602 \}
\end{DoxyCode}
\mbox{\Hypertarget{wilc1000__driver_8c_ac3cca45be448986343d34cd12678373e}\label{wilc1000__driver_8c_ac3cca45be448986343d34cd12678373e}} 
\index{wilc1000\+\_\+driver.\+c@{wilc1000\+\_\+driver.\+c}!wilc1000\+Disable\+Irq@{wilc1000\+Disable\+Irq}}
\index{wilc1000\+Disable\+Irq@{wilc1000\+Disable\+Irq}!wilc1000\+\_\+driver.\+c@{wilc1000\+\_\+driver.\+c}}
\subsubsection{\texorpdfstring{wilc1000\+Disable\+Irq()}{wilc1000DisableIrq()}}
{\footnotesize\ttfamily void wilc1000\+Disable\+Irq (\begin{DoxyParamCaption}\item[{\hyperlink{net_8h_a2234db8911a1148c9159979d8f5e0d6b}{Net\+Interface} $\ast$}]{interface }\end{DoxyParamCaption})}



Disable interrupts. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em interface} & Underlying network interface \\
\hline
\end{DoxyParams}


Definition at line 295 of file wilc1000\+\_\+driver.\+c.


\begin{DoxyCode}
296 \{
297 \}
\end{DoxyCode}
\mbox{\Hypertarget{wilc1000__driver_8c_a819cb51c2dbc637b9fceaa52029171e9}\label{wilc1000__driver_8c_a819cb51c2dbc637b9fceaa52029171e9}} 
\index{wilc1000\+\_\+driver.\+c@{wilc1000\+\_\+driver.\+c}!wilc1000\+Enable\+Irq@{wilc1000\+Enable\+Irq}}
\index{wilc1000\+Enable\+Irq@{wilc1000\+Enable\+Irq}!wilc1000\+\_\+driver.\+c@{wilc1000\+\_\+driver.\+c}}
\subsubsection{\texorpdfstring{wilc1000\+Enable\+Irq()}{wilc1000EnableIrq()}}
{\footnotesize\ttfamily void wilc1000\+Enable\+Irq (\begin{DoxyParamCaption}\item[{\hyperlink{net_8h_a2234db8911a1148c9159979d8f5e0d6b}{Net\+Interface} $\ast$}]{interface }\end{DoxyParamCaption})}



Enable interrupts. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em interface} & Underlying network interface \\
\hline
\end{DoxyParams}


Definition at line 285 of file wilc1000\+\_\+driver.\+c.


\begin{DoxyCode}
286 \{
287 \}
\end{DoxyCode}
\mbox{\Hypertarget{wilc1000__driver_8c_a0d4edc8c495e7b7ced92bd11264bd777}\label{wilc1000__driver_8c_a0d4edc8c495e7b7ced92bd11264bd777}} 
\index{wilc1000\+\_\+driver.\+c@{wilc1000\+\_\+driver.\+c}!wilc1000\+Event\+Handler@{wilc1000\+Event\+Handler}}
\index{wilc1000\+Event\+Handler@{wilc1000\+Event\+Handler}!wilc1000\+\_\+driver.\+c@{wilc1000\+\_\+driver.\+c}}
\subsubsection{\texorpdfstring{wilc1000\+Event\+Handler()}{wilc1000EventHandler()}}
{\footnotesize\ttfamily void wilc1000\+Event\+Handler (\begin{DoxyParamCaption}\item[{\hyperlink{net_8h_a2234db8911a1148c9159979d8f5e0d6b}{Net\+Interface} $\ast$}]{interface }\end{DoxyParamCaption})}



W\+I\+L\+C1000 event handler. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em interface} & Underlying network interface \\
\hline
\end{DoxyParams}


Definition at line 331 of file wilc1000\+\_\+driver.\+c.


\begin{DoxyCode}
332 \{
333    \textcolor{comment}{//Process Wi-Fi events}
334    \hyperlink{group__WifiHandleEventsFn_ga461a4edc057cec8c00cf124a07aa3b02}{m2m\_wifi\_handle\_events}(\hyperlink{group__BSPDefine_ga070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL});
335 \}
\end{DoxyCode}
\mbox{\Hypertarget{wilc1000__driver_8c_aefd33de6f7c9a522bca22ed7e7b0a1d4}\label{wilc1000__driver_8c_aefd33de6f7c9a522bca22ed7e7b0a1d4}} 
\index{wilc1000\+\_\+driver.\+c@{wilc1000\+\_\+driver.\+c}!wilc1000\+Get\+Addr\+Ref\+Count@{wilc1000\+Get\+Addr\+Ref\+Count}}
\index{wilc1000\+Get\+Addr\+Ref\+Count@{wilc1000\+Get\+Addr\+Ref\+Count}!wilc1000\+\_\+driver.\+c@{wilc1000\+\_\+driver.\+c}}
\subsubsection{\texorpdfstring{wilc1000\+Get\+Addr\+Ref\+Count()}{wilc1000GetAddrRefCount()}}
{\footnotesize\ttfamily \hyperlink{compiler__port_8h_a812d16e5494522586b3784e55d479912}{bool\+\_\+t} wilc1000\+Get\+Addr\+Ref\+Count (\begin{DoxyParamCaption}\item[{\hyperlink{net_8h_a2234db8911a1148c9159979d8f5e0d6b}{Net\+Interface} $\ast$}]{interface,  }\item[{const \hyperlink{ethernet_8h_a1e00ed3977e8a770e8b4ae4cb306d1c0}{Mac\+Addr} $\ast$}]{mac\+Addr }\end{DoxyParamCaption})}



Get reference count for the specified multicast M\+AC address. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em interface} & Underlying network interface \\
\hline
\mbox{\tt in}  & {\em mac\+Addr} & M\+AC address \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Reference count 
\end{DoxyReturn}


Definition at line 475 of file wilc1000\+\_\+driver.\+c.


\begin{DoxyCode}
476 \{
477    \hyperlink{compiler__port_8h_a12a1e9b3ce141648783a82445d02b58d}{uint\_t} i;
478    \hyperlink{compiler__port_8h_a12a1e9b3ce141648783a82445d02b58d}{uint\_t} refCount;
479    \hyperlink{structMacFilterEntry}{MacFilterEntry} *entry;
480 
481    \textcolor{comment}{//Clear reference count}
482    refCount = 0;
483 
484    \textcolor{comment}{//Valid network interface?}
485    \textcolor{keywordflow}{if}(interface != \hyperlink{group__BSPDefine_ga070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL})
486    \{
487       \textcolor{comment}{//Go through the multicast filter table}
488       \textcolor{keywordflow}{for}(i = 0; i < \hyperlink{ethernet_8h_ab64acae68b5723774fa272c62efd7c2b}{MAC\_ADDR\_FILTER\_SIZE}; i++)
489       \{
490          \textcolor{comment}{//Point to the current entry}
491          entry = &interface->macAddrFilter[i];
492 
493          \textcolor{comment}{//Valid entry?}
494          \textcolor{keywordflow}{if}(entry->\hyperlink{structMacFilterEntry_a4a1195d4086f58ef57862fa43551e73a}{refCount} > 0)
495          \{
496             \textcolor{comment}{//Check whether the specified MAC address matches}
497             \textcolor{comment}{//a multicast address in the table}
498             \textcolor{keywordflow}{if}(\hyperlink{ethernet_8h_a800d9f928930baf027e925976c44b9b2}{macCompAddr}(&entry->\hyperlink{structMacFilterEntry_a30caa211d6cc1bb2416165526a2ab6cb}{addr}, macAddr))
499             \{
500                \textcolor{comment}{//Get reference count}
501                refCount = entry->\hyperlink{structMacFilterEntry_a4a1195d4086f58ef57862fa43551e73a}{refCount};
502                \textcolor{comment}{//We are done}
503                \textcolor{keywordflow}{break};
504             \}
505          \}
506       \}
507    \}
508 
509    \textcolor{comment}{//Return reference count}
510    \textcolor{keywordflow}{return} refCount;
511 \}
\end{DoxyCode}
\mbox{\Hypertarget{wilc1000__driver_8c_a8b92356b05b9ba23a65e8d462f5827d3}\label{wilc1000__driver_8c_a8b92356b05b9ba23a65e8d462f5827d3}} 
\index{wilc1000\+\_\+driver.\+c@{wilc1000\+\_\+driver.\+c}!wilc1000\+Init@{wilc1000\+Init}}
\index{wilc1000\+Init@{wilc1000\+Init}!wilc1000\+\_\+driver.\+c@{wilc1000\+\_\+driver.\+c}}
\subsubsection{\texorpdfstring{wilc1000\+Init()}{wilc1000Init()}}
{\footnotesize\ttfamily \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689c}{error\+\_\+t} wilc1000\+Init (\begin{DoxyParamCaption}\item[{\hyperlink{net_8h_a2234db8911a1148c9159979d8f5e0d6b}{Net\+Interface} $\ast$}]{interface }\end{DoxyParamCaption})}



W\+I\+L\+C1000 initialization. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em interface} & Underlying network interface \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Error code 
\end{DoxyReturn}


Definition at line 107 of file wilc1000\+\_\+driver.\+c.


\begin{DoxyCode}
108 \{
109    \hyperlink{stdint_8h_aef44329758059c91c76d334e8fc09700}{int8\_t} status;
110    \hyperlink{structtstrWifiInitParam}{tstrWifiInitParam} param;
111 \textcolor{preprocessor}{#if (M2M\_FIRMWARE\_VERSION\_MAJOR\_NO == 4)}
112    \hyperlink{ethernet_8h_a1e00ed3977e8a770e8b4ae4cb306d1c0}{MacAddr} staMacAddr;
113    \hyperlink{ethernet_8h_a1e00ed3977e8a770e8b4ae4cb306d1c0}{MacAddr} apMacAddr;
114 \textcolor{preprocessor}{#endif}
115 
116    \textcolor{comment}{//STA or AP mode?}
117    \textcolor{keywordflow}{if}(interface->nicDriver == &\hyperlink{wilc1000__driver_8c_ace53995adceede3ca793138cfb77175b}{wilc1000StaDriver})
118    \{
119       \textcolor{comment}{//Debug message}
120       \hyperlink{debug_8h_a7339bfd784193a5c79efcef2eeb2d6df}{TRACE\_INFO}(\textcolor{stringliteral}{"Initializing WILC1000 (STA mode)...\(\backslash\)r\(\backslash\)n"});
121       \textcolor{comment}{//Save underlying network interface}
122       \hyperlink{wilc1000__driver_8c_ade5547344ae6b6661f39d6fd73f2ca43}{wilc1000StaInterface} = interface;
123    \}
124    \textcolor{keywordflow}{else}
125    \{
126       \textcolor{comment}{//Debug message}
127       \hyperlink{debug_8h_a7339bfd784193a5c79efcef2eeb2d6df}{TRACE\_INFO}(\textcolor{stringliteral}{"Initializing WILC1000 (AP mode)...\(\backslash\)r\(\backslash\)n"});
128       \textcolor{comment}{//Save underlying network interface}
129       \hyperlink{wilc1000__driver_8c_a28f2f16378f78bc5f41473c1d484500c}{wilc1000ApInterface} = interface;
130    \}
131 
132    \textcolor{comment}{//Start of exception handling block}
133    \textcolor{keywordflow}{do}
134    \{
135       \textcolor{comment}{//Initialization sequence is performed once}
136       \textcolor{keywordflow}{if}(\hyperlink{wilc1000__driver_8c_ade5547344ae6b6661f39d6fd73f2ca43}{wilc1000StaInterface} == \hyperlink{group__BSPDefine_ga070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL} || 
      \hyperlink{wilc1000__driver_8c_a28f2f16378f78bc5f41473c1d484500c}{wilc1000ApInterface} == \hyperlink{group__BSPDefine_ga070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL})
137       \{
138          \textcolor{comment}{//Low-level initialization}
139          status = \hyperlink{group__NmBspInitFn_ga91533a50cf3da832110a746b4a57789e}{nm\_bsp\_init}();
140          \textcolor{comment}{//Check status code}
141          \textcolor{keywordflow}{if}(status != \hyperlink{nm__common_8h_a9ef27ba27aafdd1aa3a79d3ba2c36b8f}{M2M\_SUCCESS})
142             \textcolor{keywordflow}{break};
143 
144          \textcolor{comment}{//Set default parameters}
145          memset(&param, 0, \textcolor{keyword}{sizeof}(param));
146 
147          \textcolor{comment}{//Register callback functions}
148          param.\hyperlink{group__WifiSetCustInfoElementFn_ga13d5fa7a0c71fd59bbf36a61923835cc}{pfAppWifiCb} = \hyperlink{wilc1000__driver_8c_a09d7e4c1c1779653c23a1f26f29d936d}{wilc1000AppWifiEvent};
149          param.\hyperlink{group__WifiSetCustInfoElementFn_gabbd16bbde19ebb6cea2ff732b84421e8}{pfAppMonCb} = \hyperlink{group__BSPDefine_ga070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL};
150 \textcolor{preprocessor}{#if (M2M\_FIRMWARE\_VERSION\_MAJOR\_NO == 3)}
151          param.\hyperlink{group__WifiSetCustInfoElementFn_gac72757e663d13b9c446735a5dca54eb1}{strEthInitParam}.pfAppWifiCb = \hyperlink{group__BSPDefine_ga070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL};
152 \textcolor{preprocessor}{#endif}
153          param.\hyperlink{group__WifiSetCustInfoElementFn_gac72757e663d13b9c446735a5dca54eb1}{strEthInitParam}.\hyperlink{group__WifiSetCustInfoElementFn_gaf4ff856212372005fe5b3ef30c6e8d7d}{pfAppEthCb} = 
      \hyperlink{wilc1000__driver_8c_a9cea2dece4cbf88d0fead9f70aceb94d}{wilc1000AppEthEvent};
154 
155          \textcolor{comment}{//Set receive buffer}
156          param.\hyperlink{group__WifiSetCustInfoElementFn_gac72757e663d13b9c446735a5dca54eb1}{strEthInitParam}.\hyperlink{group__WifiSetCustInfoElementFn_gaa0328252052cf33e1ca7c695e238a067}{au8ethRcvBuf} = 
      \hyperlink{wilc1000__driver_8c_a33225839969f0578aae348a4fd62f0f3}{rxBuffer};
157          param.\hyperlink{group__WifiSetCustInfoElementFn_gac72757e663d13b9c446735a5dca54eb1}{strEthInitParam}.\hyperlink{group__WifiSetCustInfoElementFn_ga536ae78324c98515266f493c81da12ab}{u16ethRcvBufSize} = 
      \hyperlink{wilc1000__driver_8h_ac0b005b73a92a956bf461486cc64476d}{WILC1000\_RX\_BUFFER\_SIZE};
158 
159          \textcolor{comment}{//Initialize WILC1000 controller}
160          status = \hyperlink{group__WifiInitFn_ga73c734812e844d96d860c4e93e9daf35}{m2m\_wifi\_init}(&param);
161          \textcolor{comment}{//Check status code}
162          \textcolor{keywordflow}{if}(status != \hyperlink{nm__common_8h_a9ef27ba27aafdd1aa3a79d3ba2c36b8f}{M2M\_SUCCESS})
163             \textcolor{keywordflow}{break};
164 
165 \textcolor{preprocessor}{#if (M2M\_FIRMWARE\_VERSION\_MAJOR\_NO == 3)}
166          \textcolor{comment}{//Optionally set the station MAC address}
167          \textcolor{keywordflow}{if}(\hyperlink{ethernet_8h_a800d9f928930baf027e925976c44b9b2}{macCompAddr}(&interface->macAddr, &\hyperlink{ethernet_8c_a24b2ce78dd643fe028d2e18c3b503f1f}{MAC\_UNSPECIFIED\_ADDR}))
168          \{
169             \textcolor{comment}{//Use the factory preprogrammed station address}
170             status = \hyperlink{group__WifiGetMacAddFn_gac091fddf2dfe77d8674803d0a4588408}{m2m\_wifi\_get\_mac\_address}(interface->macAddr.b);
171             \textcolor{comment}{//Check status code}
172             \textcolor{keywordflow}{if}(status != \hyperlink{nm__common_8h_a9ef27ba27aafdd1aa3a79d3ba2c36b8f}{M2M\_SUCCESS})
173                \textcolor{keywordflow}{break};
174 
175             \textcolor{comment}{//Generate the 64-bit interface identifier}
176             \hyperlink{ethernet_8c_abbe0cae70748acbaa8c4d840ee764424}{macAddrToEui64}(&interface->macAddr, &interface->eui64);
177          \}
178          \textcolor{keywordflow}{else}
179          \{
180             \textcolor{comment}{//Override the factory preprogrammed address}
181             status = \hyperlink{group__WifiSetMacAddFn_gae9a57d265b208dbd4a1dbc79e6ac5278}{m2m\_wifi\_set\_mac\_address}(interface->macAddr.b);
182             \textcolor{comment}{//Check status code}
183             \textcolor{keywordflow}{if}(status != \hyperlink{nm__common_8h_a9ef27ba27aafdd1aa3a79d3ba2c36b8f}{M2M\_SUCCESS})
184                \textcolor{keywordflow}{break};
185          \}
186 \textcolor{preprocessor}{#endif}
187       \}
188       \textcolor{keywordflow}{else}
189       \{
190          \textcolor{comment}{//Initialization was already done}
191          status = \hyperlink{nm__common_8h_a9ef27ba27aafdd1aa3a79d3ba2c36b8f}{M2M\_SUCCESS};
192       \}
193 
194 \textcolor{preprocessor}{#if (M2M\_FIRMWARE\_VERSION\_MAJOR\_NO == 3)}
195       \textcolor{comment}{//STA or AP mode?}
196       \textcolor{keywordflow}{if}(interface->nicDriver == &\hyperlink{wilc1000__driver_8c_ace53995adceede3ca793138cfb77175b}{wilc1000StaDriver})
197       \{
198          \textcolor{comment}{//Check whether the AP interface has been initialized first}
199          \textcolor{keywordflow}{if}(\hyperlink{wilc1000__driver_8c_a28f2f16378f78bc5f41473c1d484500c}{wilc1000ApInterface} != \hyperlink{group__BSPDefine_ga070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL})
200          \{
201             \textcolor{comment}{//Copy MAC address}
202             interface->macAddr = \hyperlink{wilc1000__driver_8c_a28f2f16378f78bc5f41473c1d484500c}{wilc1000ApInterface}->macAddr;
203             interface->eui64 = \hyperlink{wilc1000__driver_8c_a28f2f16378f78bc5f41473c1d484500c}{wilc1000ApInterface}->eui64;
204          \}
205       \}
206       \textcolor{keywordflow}{else}
207       \{
208          \textcolor{comment}{//Check whether the STA interface has been initialized first}
209          \textcolor{keywordflow}{if}(\hyperlink{wilc1000__driver_8c_ade5547344ae6b6661f39d6fd73f2ca43}{wilc1000StaInterface} != \hyperlink{group__BSPDefine_ga070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL})
210          \{
211             \textcolor{comment}{//Copy MAC}
212             interface->macAddr = \hyperlink{wilc1000__driver_8c_ade5547344ae6b6661f39d6fd73f2ca43}{wilc1000StaInterface}->macAddr;
213             interface->eui64 = \hyperlink{wilc1000__driver_8c_ade5547344ae6b6661f39d6fd73f2ca43}{wilc1000StaInterface}->eui64;
214          \}
215       \}
216 
217 \textcolor{preprocessor}{#elif (M2M\_FIRMWARE\_VERSION\_MAJOR\_NO == 4)}
218       \textcolor{comment}{//Retrieve current MAC addresses}
219       status = \hyperlink{group__WifiGetMacAddFn_gac091fddf2dfe77d8674803d0a4588408}{m2m\_wifi\_get\_mac\_address}(apMacAddr.b, staMacAddr.b);
220       \textcolor{comment}{//Check status code}
221       \textcolor{keywordflow}{if}(status != \hyperlink{nm__common_8h_a9ef27ba27aafdd1aa3a79d3ba2c36b8f}{M2M\_SUCCESS})
222          \textcolor{keywordflow}{break};
223 
224       \textcolor{comment}{//Optionally set the MAC address}
225       \textcolor{keywordflow}{if}(\hyperlink{ethernet_8h_a800d9f928930baf027e925976c44b9b2}{macCompAddr}(&interface->macAddr, &\hyperlink{ethernet_8c_a24b2ce78dd643fe028d2e18c3b503f1f}{MAC\_UNSPECIFIED\_ADDR}))
226       \{
227          \textcolor{comment}{//Use the factory preprogrammed MAC address}
228          \textcolor{keywordflow}{if}(interface == \hyperlink{wilc1000__driver_8c_ade5547344ae6b6661f39d6fd73f2ca43}{wilc1000StaInterface})
229             interface->macAddr = staMacAddr;
230          \textcolor{keywordflow}{else}
231             interface->macAddr = apMacAddr;
232 
233          \textcolor{comment}{//Generate the 64-bit interface identifier}
234          \hyperlink{ethernet_8c_abbe0cae70748acbaa8c4d840ee764424}{macAddrToEui64}(&interface->macAddr, &interface->eui64);
235       \}
236       \textcolor{keywordflow}{else}
237       \{
238          \textcolor{comment}{//Override the factory preprogrammed address}
239          \textcolor{keywordflow}{if}(interface == \hyperlink{wilc1000__driver_8c_ade5547344ae6b6661f39d6fd73f2ca43}{wilc1000StaInterface})
240             staMacAddr = interface->macAddr;
241          \textcolor{keywordflow}{else}
242             apMacAddr = interface->macAddr;
243 
244          \textcolor{comment}{//Assign MAC addresses}
245          status = \hyperlink{group__WifiSetMacAddFn_gae9a57d265b208dbd4a1dbc79e6ac5278}{m2m\_wifi\_set\_mac\_address}(staMacAddr.b, apMacAddr.b);
246          \textcolor{comment}{//Check status code}
247          \textcolor{keywordflow}{if}(status != \hyperlink{nm__common_8h_a9ef27ba27aafdd1aa3a79d3ba2c36b8f}{M2M\_SUCCESS})
248             \textcolor{keywordflow}{break};
249       \}
250 \textcolor{preprocessor}{#endif}
251 
252       \textcolor{comment}{//End of exception handling block}
253    \} \textcolor{keywordflow}{while}(0);
254 
255    \textcolor{comment}{//WILC1000 is now ready to send}
256    \hyperlink{os__port__chibios_8c_afc1d64fc90afbf03baecfa636bb99ff7}{osSetEvent}(&interface->nicTxEvent);
257 
258    \textcolor{comment}{//Return status code}
259    \textcolor{keywordflow}{if}(status == \hyperlink{nm__common_8h_a9ef27ba27aafdd1aa3a79d3ba2c36b8f}{M2M\_SUCCESS})
260       \textcolor{keywordflow}{return} \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689cabf350750d0d4fabd8954c0f1e9bbae94}{NO\_ERROR};
261    \textcolor{keywordflow}{else}
262       \textcolor{keywordflow}{return} \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689cae9be6449970fca5714ab9957b16562a5}{ERROR\_FAILURE};
263 \}
\end{DoxyCode}
\mbox{\Hypertarget{wilc1000__driver_8c_a8251d104fd175561eb8cdce98fd66421}\label{wilc1000__driver_8c_a8251d104fd175561eb8cdce98fd66421}} 
\index{wilc1000\+\_\+driver.\+c@{wilc1000\+\_\+driver.\+c}!wilc1000\+Irq\+Handler@{wilc1000\+Irq\+Handler}}
\index{wilc1000\+Irq\+Handler@{wilc1000\+Irq\+Handler}!wilc1000\+\_\+driver.\+c@{wilc1000\+\_\+driver.\+c}}
\subsubsection{\texorpdfstring{wilc1000\+Irq\+Handler()}{wilc1000IrqHandler()}}
{\footnotesize\ttfamily \hyperlink{compiler__port_8h_a812d16e5494522586b3784e55d479912}{bool\+\_\+t} wilc1000\+Irq\+Handler (\begin{DoxyParamCaption}\item[{void}]{ }\end{DoxyParamCaption})}



W\+I\+L\+C1000 interrupt service routine. 

\begin{DoxyReturn}{Returns}
T\+R\+UE if a higher priority task must be woken. Else F\+A\+L\+SE is returned 
\end{DoxyReturn}


Definition at line 305 of file wilc1000\+\_\+driver.\+c.


\begin{DoxyCode}
306 \{
307    \hyperlink{compiler__port_8h_a812d16e5494522586b3784e55d479912}{bool\_t} flag;
308 
309    \textcolor{comment}{//This flag will be set if a higher priority task must be woken}
310    flag = \hyperlink{os__port_8h_aa93f0eb578d23995850d61f7d61c55c1}{FALSE};
311 
312    \textcolor{comment}{//STA and/or AP mode?}
313    \textcolor{keywordflow}{if}(\hyperlink{wilc1000__driver_8c_ade5547344ae6b6661f39d6fd73f2ca43}{wilc1000StaInterface} != \hyperlink{group__BSPDefine_ga070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL})
314       \hyperlink{wilc1000__driver_8c_ade5547344ae6b6661f39d6fd73f2ca43}{wilc1000StaInterface}->nicEvent = \hyperlink{os__port_8h_aa8cecfc5c5c054d2875c03e77b7be15d}{TRUE};
315    \textcolor{keywordflow}{else} \textcolor{keywordflow}{if}(\hyperlink{wilc1000__driver_8c_a28f2f16378f78bc5f41473c1d484500c}{wilc1000ApInterface} != \hyperlink{group__BSPDefine_ga070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL})
316       \hyperlink{wilc1000__driver_8c_a28f2f16378f78bc5f41473c1d484500c}{wilc1000ApInterface}->nicEvent = \hyperlink{os__port_8h_aa8cecfc5c5c054d2875c03e77b7be15d}{TRUE};
317 
318    \textcolor{comment}{//Notify the TCP/IP stack of the event}
319    flag = \hyperlink{os__port__chibios_8c_aa30d505571a03dd645af374f40bd7016}{osSetEventFromIsr}(&\hyperlink{net_8c_a4ad5a175123589d00e402e0c1c842fdc}{netEvent});
320 
321    \textcolor{comment}{//A higher priority task must be woken?}
322    \textcolor{keywordflow}{return} flag;
323 \}
\end{DoxyCode}
\mbox{\Hypertarget{wilc1000__driver_8c_abe78a334f597974b1c6f65c4bab43cfe}\label{wilc1000__driver_8c_abe78a334f597974b1c6f65c4bab43cfe}} 
\index{wilc1000\+\_\+driver.\+c@{wilc1000\+\_\+driver.\+c}!wilc1000\+Send\+Packet@{wilc1000\+Send\+Packet}}
\index{wilc1000\+Send\+Packet@{wilc1000\+Send\+Packet}!wilc1000\+\_\+driver.\+c@{wilc1000\+\_\+driver.\+c}}
\subsubsection{\texorpdfstring{wilc1000\+Send\+Packet()}{wilc1000SendPacket()}}
{\footnotesize\ttfamily \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689c}{error\+\_\+t} wilc1000\+Send\+Packet (\begin{DoxyParamCaption}\item[{\hyperlink{net_8h_a2234db8911a1148c9159979d8f5e0d6b}{Net\+Interface} $\ast$}]{interface,  }\item[{const \hyperlink{structNetBuffer}{Net\+Buffer} $\ast$}]{buffer,  }\item[{size\+\_\+t}]{offset }\end{DoxyParamCaption})}



Send a packet. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em interface} & Underlying network interface \\
\hline
\mbox{\tt in}  & {\em buffer} & Multi-\/part buffer containing the data to send \\
\hline
\mbox{\tt in}  & {\em offset} & Offset to the first data byte \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Error code 
\end{DoxyReturn}


Definition at line 346 of file wilc1000\+\_\+driver.\+c.


\begin{DoxyCode}
348 \{
349    \hyperlink{stdint_8h_aef44329758059c91c76d334e8fc09700}{int8\_t} status;
350    \textcolor{keywordtype}{size\_t} \hyperlink{dtls__misc_8h_ab43ca82dd7fa2a0e56f941032ef324c4}{length};
351 
352    \textcolor{comment}{//Retrieve the length of the packet}
353    length = \hyperlink{net__mem_8c_ac9dbcd9e28e61d8f4f6d2e9af2607b68}{netBufferGetLength}(buffer) - \hyperlink{pic32mz_2isr__support_8h_a12a5aed8a193ebbf9a641104a310610d}{offset};
354 
355    \textcolor{comment}{//Check the frame length}
356    \textcolor{keywordflow}{if}(length > \hyperlink{wilc1000__driver_8h_a64fc720af76f9bdcdb76ca72ac5ad59e}{WILC1000\_TX\_BUFFER\_SIZE})
357    \{
358       \textcolor{comment}{//The transmitter can accept another packet}
359       \hyperlink{os__port__chibios_8c_afc1d64fc90afbf03baecfa636bb99ff7}{osSetEvent}(&interface->nicTxEvent);
360       \textcolor{comment}{//Report an error}
361       \textcolor{keywordflow}{return} \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689cae5c014519c3ac2540447887ddca1bd28}{ERROR\_INVALID\_LENGTH};
362    \}
363 
364    \textcolor{comment}{//Make sure the link is up before transmitting the frame}
365    \textcolor{keywordflow}{if}(!interface->linkState)
366    \{
367       \textcolor{comment}{//The transmitter can accept another packet}
368       \hyperlink{os__port__chibios_8c_afc1d64fc90afbf03baecfa636bb99ff7}{osSetEvent}(&interface->nicTxEvent);
369       \textcolor{comment}{//Drop current packet}
370       \textcolor{keywordflow}{return} \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689cabf350750d0d4fabd8954c0f1e9bbae94}{NO\_ERROR};
371    \}
372 
373 \textcolor{preprocessor}{#if (M2M\_FIRMWARE\_VERSION\_MAJOR\_NO == 3)}
374    \textcolor{comment}{//Copy user data to the transmit buffer}
375    \hyperlink{net__mem_8c_af3ed1bc3f7d55f830cbbe6aa12e61af0}{netBufferRead}(\hyperlink{wilc1000__driver_8c_aba92300075ca68e5227458fd23a1bb34}{txBuffer}, buffer, \hyperlink{pic32mz_2isr__support_8h_a12a5aed8a193ebbf9a641104a310610d}{offset}, length);
376 \textcolor{preprocessor}{#elif (M2M\_FIRMWARE\_VERSION\_MAJOR\_NO == 4)}
377    \textcolor{comment}{//Copy user data to the transmit buffer}
378    \hyperlink{net__mem_8c_af3ed1bc3f7d55f830cbbe6aa12e61af0}{netBufferRead}(\hyperlink{wilc1000__driver_8c_aba92300075ca68e5227458fd23a1bb34}{txBuffer} + \hyperlink{group__WlanDefines_ga083f2ee97dbde0aea1372d3c0aa18de4}{M2M\_ETHERNET\_HDR\_OFFSET} + 
      \hyperlink{group__WlanDefines_ga3496dd7fbc0c97936dda2e6f9b91fa16}{M2M\_ETH\_PAD\_SIZE},
379       buffer, \hyperlink{pic32mz_2isr__support_8h_a12a5aed8a193ebbf9a641104a310610d}{offset}, length);
380 \textcolor{preprocessor}{#endif}
381 
382    \textcolor{comment}{//STA or AP mode?}
383    \textcolor{keywordflow}{if}(interface == \hyperlink{wilc1000__driver_8c_ade5547344ae6b6661f39d6fd73f2ca43}{wilc1000StaInterface})
384    \{
385       \textcolor{comment}{//Send packet}
386 \textcolor{preprocessor}{#if (M2M\_FIRMWARE\_VERSION\_MAJOR\_NO == 4 && M2M\_FIRMWARE\_VERSION\_MINOR\_NO >= 2)}
387       status = \hyperlink{group__WifiSendEthernetPktFn_ga6771776ed3f1c4c60bf51108dc46fa96}{m2m\_wifi\_send\_ethernet\_pkt}(\hyperlink{wilc1000__driver_8c_aba92300075ca68e5227458fd23a1bb34}{txBuffer}, length, 
      \hyperlink{group__WlanEnums_gga21dc8518e48f99cdf9cf68eebcfcf982af1332c69b03c8077d76b6652e4b6b67d}{STATION\_INTERFACE});
388 \textcolor{preprocessor}{#else}
389       status = \hyperlink{group__WifiSendEthernetPktFn_ga6771776ed3f1c4c60bf51108dc46fa96}{m2m\_wifi\_send\_ethernet\_pkt}(\hyperlink{wilc1000__driver_8c_aba92300075ca68e5227458fd23a1bb34}{txBuffer}, length);
390 \textcolor{preprocessor}{#endif}
391    \}
392    \textcolor{keywordflow}{else}
393    \{
394       \textcolor{comment}{//Send packet}
395 \textcolor{preprocessor}{#if (M2M\_FIRMWARE\_VERSION\_MAJOR\_NO == 4 && M2M\_FIRMWARE\_VERSION\_MINOR\_NO >= 2)}
396       status = \hyperlink{group__WifiSendEthernetPktFn_ga6771776ed3f1c4c60bf51108dc46fa96}{m2m\_wifi\_send\_ethernet\_pkt}(\hyperlink{wilc1000__driver_8c_aba92300075ca68e5227458fd23a1bb34}{txBuffer}, length, 
      \hyperlink{group__WlanEnums_gga21dc8518e48f99cdf9cf68eebcfcf982aeef78d0be1ab7a519e48d25a2eea8717}{AP\_INTERFACE});
397 \textcolor{preprocessor}{#else}
398       status = m2m\_wifi\_send\_ethernet\_pkt\_ifc1(\hyperlink{wilc1000__driver_8c_aba92300075ca68e5227458fd23a1bb34}{txBuffer}, length);
399 \textcolor{preprocessor}{#endif}
400    \}
401 
402    \textcolor{comment}{//The transmitter can accept another packet}
403    \hyperlink{os__port__chibios_8c_afc1d64fc90afbf03baecfa636bb99ff7}{osSetEvent}(&interface->nicTxEvent);
404 
405    \textcolor{comment}{//Return status code}
406    \textcolor{keywordflow}{if}(status == \hyperlink{nm__common_8h_a9ef27ba27aafdd1aa3a79d3ba2c36b8f}{M2M\_SUCCESS})
407       \textcolor{keywordflow}{return} \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689cabf350750d0d4fabd8954c0f1e9bbae94}{NO\_ERROR};
408    \textcolor{keywordflow}{else}
409       \textcolor{keywordflow}{return} \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689cae9be6449970fca5714ab9957b16562a5}{ERROR\_FAILURE};
410 \}
\end{DoxyCode}
\mbox{\Hypertarget{wilc1000__driver_8c_afd13c92d44781cc3f5517c8c8739a7f0}\label{wilc1000__driver_8c_afd13c92d44781cc3f5517c8c8739a7f0}} 
\index{wilc1000\+\_\+driver.\+c@{wilc1000\+\_\+driver.\+c}!wilc1000\+Tick@{wilc1000\+Tick}}
\index{wilc1000\+Tick@{wilc1000\+Tick}!wilc1000\+\_\+driver.\+c@{wilc1000\+\_\+driver.\+c}}
\subsubsection{\texorpdfstring{wilc1000\+Tick()}{wilc1000Tick()}}
{\footnotesize\ttfamily void wilc1000\+Tick (\begin{DoxyParamCaption}\item[{\hyperlink{net_8h_a2234db8911a1148c9159979d8f5e0d6b}{Net\+Interface} $\ast$}]{interface }\end{DoxyParamCaption})}



W\+I\+L\+C1000 timer handler. 

This routine is periodically called by the T\+C\+P/\+IP stack to handle periodic operations such as polling the link state


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em interface} & Underlying network interface \\
\hline
\end{DoxyParams}


Definition at line 275 of file wilc1000\+\_\+driver.\+c.


\begin{DoxyCode}
276 \{
277 \}
\end{DoxyCode}
\mbox{\Hypertarget{wilc1000__driver_8c_a365958b637c54fef6ee988792acf0f5e}\label{wilc1000__driver_8c_a365958b637c54fef6ee988792acf0f5e}} 
\index{wilc1000\+\_\+driver.\+c@{wilc1000\+\_\+driver.\+c}!wilc1000\+Update\+Mac\+Addr\+Filter@{wilc1000\+Update\+Mac\+Addr\+Filter}}
\index{wilc1000\+Update\+Mac\+Addr\+Filter@{wilc1000\+Update\+Mac\+Addr\+Filter}!wilc1000\+\_\+driver.\+c@{wilc1000\+\_\+driver.\+c}}
\subsubsection{\texorpdfstring{wilc1000\+Update\+Mac\+Addr\+Filter()}{wilc1000UpdateMacAddrFilter()}}
{\footnotesize\ttfamily \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689c}{error\+\_\+t} wilc1000\+Update\+Mac\+Addr\+Filter (\begin{DoxyParamCaption}\item[{\hyperlink{net_8h_a2234db8911a1148c9159979d8f5e0d6b}{Net\+Interface} $\ast$}]{interface }\end{DoxyParamCaption})}



Configure M\+AC address filtering. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em interface} & Underlying network interface \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Error code 
\end{DoxyReturn}


Definition at line 419 of file wilc1000\+\_\+driver.\+c.


\begin{DoxyCode}
420 \{
421    \hyperlink{compiler__port_8h_a12a1e9b3ce141648783a82445d02b58d}{uint\_t} i;
422    \hyperlink{compiler__port_8h_a12a1e9b3ce141648783a82445d02b58d}{uint\_t} refCount;
423    \hyperlink{structMacFilterEntry}{MacFilterEntry} *entry;
424 
425    \textcolor{comment}{//Debug message}
426    \hyperlink{debug_8h_a7339bfd784193a5c79efcef2eeb2d6df}{TRACE\_INFO}(\textcolor{stringliteral}{"Updating WILC1000 multicast filter...\(\backslash\)r\(\backslash\)n"});
427 
428    \textcolor{comment}{//The MAC address filter contains the list of MAC addresses to accept}
429    \textcolor{comment}{//when receiving an Ethernet frame}
430    \textcolor{keywordflow}{for}(i = 0; i < \hyperlink{ethernet_8h_ab64acae68b5723774fa272c62efd7c2b}{MAC\_ADDR\_FILTER\_SIZE}; i++)
431    \{
432       \textcolor{comment}{//Point to the current entry}
433       entry = &interface->macAddrFilter[i];
434 
435       \textcolor{comment}{//Valid entry?}
436       \textcolor{keywordflow}{if}(!\hyperlink{ethernet_8h_a800d9f928930baf027e925976c44b9b2}{macCompAddr}(&entry->\hyperlink{structMacFilterEntry_a30caa211d6cc1bb2416165526a2ab6cb}{addr}, &\hyperlink{ethernet_8c_a24b2ce78dd643fe028d2e18c3b503f1f}{MAC\_UNSPECIFIED\_ADDR}))
437       \{
438          \textcolor{comment}{//Check whether the multicast MAC address has already been registered}
439          \textcolor{comment}{//on the alternate interface}
440          \textcolor{keywordflow}{if}(interface == \hyperlink{wilc1000__driver_8c_ade5547344ae6b6661f39d6fd73f2ca43}{wilc1000StaInterface})
441             refCount = \hyperlink{wilc1000__driver_8c_aefd33de6f7c9a522bca22ed7e7b0a1d4}{wilc1000GetAddrRefCount}(
      \hyperlink{wilc1000__driver_8c_a28f2f16378f78bc5f41473c1d484500c}{wilc1000ApInterface}, &entry->\hyperlink{structMacFilterEntry_a30caa211d6cc1bb2416165526a2ab6cb}{addr});
442          \textcolor{keywordflow}{else}
443             refCount = \hyperlink{wilc1000__driver_8c_aefd33de6f7c9a522bca22ed7e7b0a1d4}{wilc1000GetAddrRefCount}(
      \hyperlink{wilc1000__driver_8c_ade5547344ae6b6661f39d6fd73f2ca43}{wilc1000StaInterface}, &entry->\hyperlink{structMacFilterEntry_a30caa211d6cc1bb2416165526a2ab6cb}{addr});
444 
445          \textcolor{comment}{//Ensure that there are not duplicate address entries in the table}
446          \textcolor{keywordflow}{if}(refCount == 0)
447          \{
448             \textcolor{comment}{//Update MAC filter table only if necessary}
449             \textcolor{keywordflow}{if}(entry->\hyperlink{structMacFilterEntry_a3594f70670b96bcab217db87696ff585}{addFlag})
450             \{
451                \textcolor{comment}{//Add a new entry to the MAC filter table}
452                \hyperlink{m2m__wifi_8c_a6eccf2b868092985a8849ae3400fbc0c}{m2m\_wifi\_enable\_mac\_mcast}(entry->\hyperlink{structMacFilterEntry_a30caa211d6cc1bb2416165526a2ab6cb}{addr}.b, 
      \hyperlink{os__port_8h_aa8cecfc5c5c054d2875c03e77b7be15d}{TRUE});
453             \}
454             \textcolor{keywordflow}{else} \textcolor{keywordflow}{if}(entry->\hyperlink{structMacFilterEntry_a4fd4a00a88556b70cb2582762cdb8b19}{deleteFlag})
455             \{
456                \textcolor{comment}{//Remove the current entry from the MAC filter table}
457                \hyperlink{m2m__wifi_8c_a6eccf2b868092985a8849ae3400fbc0c}{m2m\_wifi\_enable\_mac\_mcast}(entry->\hyperlink{structMacFilterEntry_a30caa211d6cc1bb2416165526a2ab6cb}{addr}.b, 
      \hyperlink{os__port_8h_aa93f0eb578d23995850d61f7d61c55c1}{FALSE});
458             \}
459          \}
460       \}
461    \}
462 
463    \textcolor{comment}{//Successful processing}
464    \textcolor{keywordflow}{return} \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689cabf350750d0d4fabd8954c0f1e9bbae94}{NO\_ERROR};
465 \}
\end{DoxyCode}


\subsection{Variable Documentation}
\mbox{\Hypertarget{wilc1000__driver_8c_a33225839969f0578aae348a4fd62f0f3}\label{wilc1000__driver_8c_a33225839969f0578aae348a4fd62f0f3}} 
\index{wilc1000\+\_\+driver.\+c@{wilc1000\+\_\+driver.\+c}!rx\+Buffer@{rx\+Buffer}}
\index{rx\+Buffer@{rx\+Buffer}!wilc1000\+\_\+driver.\+c@{wilc1000\+\_\+driver.\+c}}
\subsubsection{\texorpdfstring{rx\+Buffer}{rxBuffer}}
{\footnotesize\ttfamily \hyperlink{stdint_8h_aba7bc1797add20fe3efdf37ced1182c5}{uint8\+\_\+t} rx\+Buffer\mbox{[}\hyperlink{wilc1000__driver_8h_ac0b005b73a92a956bf461486cc64476d}{W\+I\+L\+C1000\+\_\+\+R\+X\+\_\+\+B\+U\+F\+F\+E\+R\+\_\+\+S\+I\+ZE}\mbox{]}\hspace{0.3cm}{\ttfamily [static]}}



Definition at line 48 of file wilc1000\+\_\+driver.\+c.

\mbox{\Hypertarget{wilc1000__driver_8c_aba92300075ca68e5227458fd23a1bb34}\label{wilc1000__driver_8c_aba92300075ca68e5227458fd23a1bb34}} 
\index{wilc1000\+\_\+driver.\+c@{wilc1000\+\_\+driver.\+c}!tx\+Buffer@{tx\+Buffer}}
\index{tx\+Buffer@{tx\+Buffer}!wilc1000\+\_\+driver.\+c@{wilc1000\+\_\+driver.\+c}}
\subsubsection{\texorpdfstring{tx\+Buffer}{txBuffer}}
{\footnotesize\ttfamily \hyperlink{stdint_8h_aba7bc1797add20fe3efdf37ced1182c5}{uint8\+\_\+t} tx\+Buffer\mbox{[}\hyperlink{wilc1000__driver_8h_a64fc720af76f9bdcdb76ca72ac5ad59e}{W\+I\+L\+C1000\+\_\+\+T\+X\+\_\+\+B\+U\+F\+F\+E\+R\+\_\+\+S\+I\+ZE}\mbox{]}\hspace{0.3cm}{\ttfamily [static]}}



Definition at line 46 of file wilc1000\+\_\+driver.\+c.

\mbox{\Hypertarget{wilc1000__driver_8c_ab0f945a866de6d3302002ac8d85a8cd3}\label{wilc1000__driver_8c_ab0f945a866de6d3302002ac8d85a8cd3}} 
\index{wilc1000\+\_\+driver.\+c@{wilc1000\+\_\+driver.\+c}!wilc1000\+Ap\+Driver@{wilc1000\+Ap\+Driver}}
\index{wilc1000\+Ap\+Driver@{wilc1000\+Ap\+Driver}!wilc1000\+\_\+driver.\+c@{wilc1000\+\_\+driver.\+c}}
\subsubsection{\texorpdfstring{wilc1000\+Ap\+Driver}{wilc1000ApDriver}}
{\footnotesize\ttfamily const \hyperlink{structNicDriver}{Nic\+Driver} wilc1000\+Ap\+Driver}

{\bfseries Initial value\+:}
\begin{DoxyCode}
=
\{
   \hyperlink{nic_8h_ac1ce8659a9797513ecd9cc1afedce40ba84802cab6ee937691c3d76122ffaffcd}{NIC\_TYPE\_ETHERNET},
   \hyperlink{ethernet_8h_a6f29d2b24a262d91b7158713728d45f2}{ETH\_MTU},
   \hyperlink{wilc1000__driver_8c_a8b92356b05b9ba23a65e8d462f5827d3}{wilc1000Init},
   \hyperlink{wilc1000__driver_8c_afd13c92d44781cc3f5517c8c8739a7f0}{wilc1000Tick},
   \hyperlink{wilc1000__driver_8c_a819cb51c2dbc637b9fceaa52029171e9}{wilc1000EnableIrq},
   \hyperlink{wilc1000__driver_8c_ac3cca45be448986343d34cd12678373e}{wilc1000DisableIrq},
   \hyperlink{wilc1000__driver_8c_a0d4edc8c495e7b7ced92bd11264bd777}{wilc1000EventHandler},
   \hyperlink{wilc1000__driver_8c_abe78a334f597974b1c6f65c4bab43cfe}{wilc1000SendPacket},
   \hyperlink{wilc1000__driver_8c_a365958b637c54fef6ee988792acf0f5e}{wilc1000UpdateMacAddrFilter},
   \hyperlink{group__BSPDefine_ga070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL},
   \hyperlink{group__BSPDefine_ga070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL},
   \hyperlink{group__BSPDefine_ga070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL},
   \hyperlink{os__port_8h_aa8cecfc5c5c054d2875c03e77b7be15d}{TRUE},
   \hyperlink{os__port_8h_aa8cecfc5c5c054d2875c03e77b7be15d}{TRUE},
   \hyperlink{os__port_8h_aa8cecfc5c5c054d2875c03e77b7be15d}{TRUE},
   TRUE
\}
\end{DoxyCode}


W\+I\+L\+C1000 driver (AP mode) 



Definition at line 80 of file wilc1000\+\_\+driver.\+c.

\mbox{\Hypertarget{wilc1000__driver_8c_a28f2f16378f78bc5f41473c1d484500c}\label{wilc1000__driver_8c_a28f2f16378f78bc5f41473c1d484500c}} 
\index{wilc1000\+\_\+driver.\+c@{wilc1000\+\_\+driver.\+c}!wilc1000\+Ap\+Interface@{wilc1000\+Ap\+Interface}}
\index{wilc1000\+Ap\+Interface@{wilc1000\+Ap\+Interface}!wilc1000\+\_\+driver.\+c@{wilc1000\+\_\+driver.\+c}}
\subsubsection{\texorpdfstring{wilc1000\+Ap\+Interface}{wilc1000ApInterface}}
{\footnotesize\ttfamily \hyperlink{net_8h_a2234db8911a1148c9159979d8f5e0d6b}{Net\+Interface}$\ast$ wilc1000\+Ap\+Interface = \hyperlink{group__BSPDefine_ga070d2ce7b6bb7e5c05602aa8c308d0c4}{N\+U\+LL}\hspace{0.3cm}{\ttfamily [static]}}



Definition at line 43 of file wilc1000\+\_\+driver.\+c.

\mbox{\Hypertarget{wilc1000__driver_8c_ace53995adceede3ca793138cfb77175b}\label{wilc1000__driver_8c_ace53995adceede3ca793138cfb77175b}} 
\index{wilc1000\+\_\+driver.\+c@{wilc1000\+\_\+driver.\+c}!wilc1000\+Sta\+Driver@{wilc1000\+Sta\+Driver}}
\index{wilc1000\+Sta\+Driver@{wilc1000\+Sta\+Driver}!wilc1000\+\_\+driver.\+c@{wilc1000\+\_\+driver.\+c}}
\subsubsection{\texorpdfstring{wilc1000\+Sta\+Driver}{wilc1000StaDriver}}
{\footnotesize\ttfamily const \hyperlink{structNicDriver}{Nic\+Driver} wilc1000\+Sta\+Driver}

{\bfseries Initial value\+:}
\begin{DoxyCode}
=
\{
   \hyperlink{nic_8h_ac1ce8659a9797513ecd9cc1afedce40ba84802cab6ee937691c3d76122ffaffcd}{NIC\_TYPE\_ETHERNET},
   \hyperlink{ethernet_8h_a6f29d2b24a262d91b7158713728d45f2}{ETH\_MTU},
   \hyperlink{wilc1000__driver_8c_a8b92356b05b9ba23a65e8d462f5827d3}{wilc1000Init},
   \hyperlink{wilc1000__driver_8c_afd13c92d44781cc3f5517c8c8739a7f0}{wilc1000Tick},
   \hyperlink{wilc1000__driver_8c_a819cb51c2dbc637b9fceaa52029171e9}{wilc1000EnableIrq},
   \hyperlink{wilc1000__driver_8c_ac3cca45be448986343d34cd12678373e}{wilc1000DisableIrq},
   \hyperlink{wilc1000__driver_8c_a0d4edc8c495e7b7ced92bd11264bd777}{wilc1000EventHandler},
   \hyperlink{wilc1000__driver_8c_abe78a334f597974b1c6f65c4bab43cfe}{wilc1000SendPacket},
   \hyperlink{wilc1000__driver_8c_a365958b637c54fef6ee988792acf0f5e}{wilc1000UpdateMacAddrFilter},
   \hyperlink{group__BSPDefine_ga070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL},
   \hyperlink{group__BSPDefine_ga070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL},
   \hyperlink{group__BSPDefine_ga070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL},
   \hyperlink{os__port_8h_aa8cecfc5c5c054d2875c03e77b7be15d}{TRUE},
   \hyperlink{os__port_8h_aa8cecfc5c5c054d2875c03e77b7be15d}{TRUE},
   \hyperlink{os__port_8h_aa8cecfc5c5c054d2875c03e77b7be15d}{TRUE},
   TRUE
\}
\end{DoxyCode}


W\+I\+L\+C1000 driver (S\+TA mode) 



Definition at line 55 of file wilc1000\+\_\+driver.\+c.

\mbox{\Hypertarget{wilc1000__driver_8c_ade5547344ae6b6661f39d6fd73f2ca43}\label{wilc1000__driver_8c_ade5547344ae6b6661f39d6fd73f2ca43}} 
\index{wilc1000\+\_\+driver.\+c@{wilc1000\+\_\+driver.\+c}!wilc1000\+Sta\+Interface@{wilc1000\+Sta\+Interface}}
\index{wilc1000\+Sta\+Interface@{wilc1000\+Sta\+Interface}!wilc1000\+\_\+driver.\+c@{wilc1000\+\_\+driver.\+c}}
\subsubsection{\texorpdfstring{wilc1000\+Sta\+Interface}{wilc1000StaInterface}}
{\footnotesize\ttfamily \hyperlink{net_8h_a2234db8911a1148c9159979d8f5e0d6b}{Net\+Interface}$\ast$ wilc1000\+Sta\+Interface = \hyperlink{group__BSPDefine_ga070d2ce7b6bb7e5c05602aa8c308d0c4}{N\+U\+LL}\hspace{0.3cm}{\ttfamily [static]}}



Definition at line 42 of file wilc1000\+\_\+driver.\+c.

