\hypertarget{coap__debug_8h}{}\section{cyclone\+\_\+tcp/coap/coap\+\_\+debug.h File Reference}
\label{coap__debug_8h}\index{cyclone\+\_\+tcp/coap/coap\+\_\+debug.\+h@{cyclone\+\_\+tcp/coap/coap\+\_\+debug.\+h}}


Data logging functions for debugging purpose (Co\+AP)  


{\ttfamily \#include \char`\"{}core/net.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}coap/coap\+\_\+common.\+h\char`\"{}}\newline
\subsection*{Classes}
\begin{DoxyCompactItemize}
\item 
struct \hyperlink{structCoapParamDesc}{Coap\+Param\+Desc}
\begin{DoxyCompactList}\small\item\em Co\+AP value/string binding. \end{DoxyCompactList}\end{DoxyCompactItemize}
\subsection*{Functions}
\begin{DoxyCompactItemize}
\item 
\hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689c}{error\+\_\+t} \hyperlink{coap__debug_8h_a5b454558790bd604892778901261dffe}{coap\+Dump\+Message} (const void $\ast$\hyperlink{pap_8h_a52f19d36a71e9b8ddea38fe00c291181}{message}, size\+\_\+t \hyperlink{ppp_8h_ab2b3adeb2a67e656ff030b56727fd0ac}{length})
\begin{DoxyCompactList}\small\item\em Dump Co\+AP message for debugging purpose. \end{DoxyCompactList}\item 
\hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689c}{error\+\_\+t} \hyperlink{coap__debug_8h_aec31f830a8321d4616332602ec45f792}{coap\+Dump\+Message\+Header} (const \hyperlink{stdint_8h_aba7bc1797add20fe3efdf37ced1182c5}{uint8\+\_\+t} $\ast$\hyperlink{ndp_8h_a6519522ad9a6f45e7a8d25d31392a977}{p}, size\+\_\+t \hyperlink{ppp_8h_ab2b3adeb2a67e656ff030b56727fd0ac}{length}, size\+\_\+t $\ast$consumed)
\begin{DoxyCompactList}\small\item\em Dump Co\+AP message header. \end{DoxyCompactList}\item 
\hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689c}{error\+\_\+t} \hyperlink{coap__debug_8h_a309d4857cd4f2819dabc3c5b8ca2544d}{coap\+Dump\+Options} (const \hyperlink{stdint_8h_aba7bc1797add20fe3efdf37ced1182c5}{uint8\+\_\+t} $\ast$\hyperlink{ndp_8h_a6519522ad9a6f45e7a8d25d31392a977}{p}, size\+\_\+t \hyperlink{ppp_8h_ab2b3adeb2a67e656ff030b56727fd0ac}{length}, size\+\_\+t $\ast$consumed)
\begin{DoxyCompactList}\small\item\em Dump the list of Co\+AP options. \end{DoxyCompactList}\item 
\hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689c}{error\+\_\+t} \hyperlink{coap__debug_8h_a76fa8a74cb59aa44aca4354d827e421a}{coap\+Dump\+Option} (const \hyperlink{structCoapOption}{Coap\+Option} $\ast$option)
\begin{DoxyCompactList}\small\item\em Dump Co\+AP option. \end{DoxyCompactList}\item 
const \hyperlink{compiler__port_8h_a40bb5262bf908c328fbcfbe5d29d0201}{char\+\_\+t} $\ast$ \hyperlink{coap__debug_8h_a4cb07b39c432d510ab253990516e96f1}{coap\+Get\+Param\+Name} (\hyperlink{compiler__port_8h_a12a1e9b3ce141648783a82445d02b58d}{uint\+\_\+t} \hyperlink{chap_8h_adfa040d04d16520129a735fff8fb1628}{value}, const \hyperlink{structCoapParamDesc}{Coap\+Param\+Desc} $\ast$param\+List, size\+\_\+t param\+List\+Len)
\begin{DoxyCompactList}\small\item\em Convert a parameter to string representation. \end{DoxyCompactList}\end{DoxyCompactItemize}


\subsection{Detailed Description}
Data logging functions for debugging purpose (Co\+AP) 

\hypertarget{pic32mz__ef__curiosity_8h_License}{}\subsection{License}\label{pic32mz__ef__curiosity_8h_License}
S\+P\+D\+X-\/\+License-\/\+Identifier\+: G\+P\+L-\/2.\+0-\/or-\/later

Copyright (C) 2010-\/2019 Oryx Embedded S\+A\+RL. All rights reserved.

This file is part of Cyclone\+T\+CP Open.

This program is free software; you can redistribute it and/or modify it under the terms of the G\+NU General Public License as published by the Free Software Foundation; either version 2 of the License, or (at your option) any later version.

This program is distributed in the hope that it will be useful, but W\+I\+T\+H\+O\+UT A\+NY W\+A\+R\+R\+A\+N\+TY; without even the implied warranty of M\+E\+R\+C\+H\+A\+N\+T\+A\+B\+I\+L\+I\+TY or F\+I\+T\+N\+E\+SS F\+OR A P\+A\+R\+T\+I\+C\+U\+L\+AR P\+U\+R\+P\+O\+SE. See the G\+NU General Public License for more details.

You should have received a copy of the G\+NU General Public License along with this program; if not, write to the Free Software Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-\/1301, U\+SA.

\begin{DoxyAuthor}{Author}
Oryx Embedded S\+A\+RL (www.\+oryx-\/embedded.\+com) 
\end{DoxyAuthor}
\begin{DoxyVersion}{Version}
1.\+9.\+6 
\end{DoxyVersion}


\subsection{Function Documentation}
\mbox{\Hypertarget{coap__debug_8h_a5b454558790bd604892778901261dffe}\label{coap__debug_8h_a5b454558790bd604892778901261dffe}} 
\index{coap\+\_\+debug.\+h@{coap\+\_\+debug.\+h}!coap\+Dump\+Message@{coap\+Dump\+Message}}
\index{coap\+Dump\+Message@{coap\+Dump\+Message}!coap\+\_\+debug.\+h@{coap\+\_\+debug.\+h}}
\subsubsection{\texorpdfstring{coap\+Dump\+Message()}{coapDumpMessage()}}
{\footnotesize\ttfamily \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689c}{error\+\_\+t} coap\+Dump\+Message (\begin{DoxyParamCaption}\item[{const void $\ast$}]{message,  }\item[{size\+\_\+t}]{length }\end{DoxyParamCaption})}



Dump Co\+AP message for debugging purpose. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em message} & Pointer to the Co\+AP message \\
\hline
\mbox{\tt in}  & {\em length} & Length of the message, in bytes \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Error code 
\end{DoxyReturn}


Definition at line 123 of file coap\+\_\+debug.\+c.


\begin{DoxyCode}
124 \{
125 \textcolor{preprocessor}{#if (COAP\_TRACE\_LEVEL >= TRACE\_LEVEL\_DEBUG)}
126    \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689c}{error\_t} error;
127    \textcolor{keywordtype}{size\_t} \hyperlink{dhcpv6__common_8h_a5a648f5ec00c526b0dfa2df7a272c6c0}{n};
128    \textcolor{keyword}{const} \hyperlink{stdint_8h_aba7bc1797add20fe3efdf37ced1182c5}{uint8\_t} *\hyperlink{ndp_8h_a6519522ad9a6f45e7a8d25d31392a977}{p};
129 
130    \textcolor{comment}{//Point to the first byte of the CoAP message}
131    p = \hyperlink{chap_8h_a52f19d36a71e9b8ddea38fe00c291181}{message};
132 
133    \textcolor{comment}{//Dump message header}
134    error = \hyperlink{coap__debug_8c_aec31f830a8321d4616332602ec45f792}{coapDumpMessageHeader}(p, \hyperlink{dtls__misc_8h_ab43ca82dd7fa2a0e56f941032ef324c4}{length}, &n);
135    \textcolor{comment}{//Any error to report?}
136    \textcolor{keywordflow}{if}(error)
137       \textcolor{keywordflow}{return} error;
138 
139    \textcolor{comment}{//Point to the first option of the message}
140    p += \hyperlink{dhcpv6__common_8h_a5a648f5ec00c526b0dfa2df7a272c6c0}{n};
141    \textcolor{comment}{//Number of bytes left to process}
142    \hyperlink{dtls__misc_8h_ab43ca82dd7fa2a0e56f941032ef324c4}{length} -= \hyperlink{dhcpv6__common_8h_a5a648f5ec00c526b0dfa2df7a272c6c0}{n};
143 
144    \textcolor{comment}{//Parse the list of options}
145    error = \hyperlink{coap__debug_8c_a309d4857cd4f2819dabc3c5b8ca2544d}{coapDumpOptions}(p, \hyperlink{dtls__misc_8h_ab43ca82dd7fa2a0e56f941032ef324c4}{length}, &n);
146    \textcolor{comment}{//Any error to report?}
147    \textcolor{keywordflow}{if}(error)
148       \textcolor{keywordflow}{return} error;
149 
150    \textcolor{comment}{//Point to the payload}
151    p += \hyperlink{dhcpv6__common_8h_a5a648f5ec00c526b0dfa2df7a272c6c0}{n};
152    \textcolor{comment}{//Number of bytes left to process}
153    \hyperlink{dtls__misc_8h_ab43ca82dd7fa2a0e56f941032ef324c4}{length} -= \hyperlink{dhcpv6__common_8h_a5a648f5ec00c526b0dfa2df7a272c6c0}{n};
154 
155    \textcolor{comment}{//The payload is optional}
156    \textcolor{keywordflow}{if}(\hyperlink{dtls__misc_8h_ab43ca82dd7fa2a0e56f941032ef324c4}{length} > 0)
157    \{
158       \textcolor{comment}{//The payload is prefixed by a fixed, one-byte payload marker}
159       p++;
160       \textcolor{comment}{//Retrieve the length of the payload}
161       \hyperlink{dtls__misc_8h_ab43ca82dd7fa2a0e56f941032ef324c4}{length}--;
162 
163       \textcolor{comment}{//Dump payload}
164       \hyperlink{debug_8h_a67a8f9bc74358aa21745a76e23768dae}{TRACE\_DEBUG}(\textcolor{stringliteral}{"  Payload (%"} \hyperlink{compiler__port_8h_a2b7b0557dc6cd786df02dafbb51f5292}{PRIuSIZE} \textcolor{stringliteral}{" bytes)\(\backslash\)r\(\backslash\)n"}, 
      \hyperlink{dtls__misc_8h_ab43ca82dd7fa2a0e56f941032ef324c4}{length});
165       \hyperlink{debug_8h_a1f71019169d85407d8827300ed43bdf0}{TRACE\_DEBUG\_ARRAY}(\textcolor{stringliteral}{"    "}, p, \hyperlink{dtls__misc_8h_ab43ca82dd7fa2a0e56f941032ef324c4}{length});
166       \textcolor{comment}{//TRACE\_DEBUG("    %s\(\backslash\)r\(\backslash\)n", p);}
167    \}
168 \textcolor{preprocessor}{#endif}
169 
170    \textcolor{comment}{//Successful processing}
171    \textcolor{keywordflow}{return} \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689cabf350750d0d4fabd8954c0f1e9bbae94}{NO\_ERROR};
172 \}
\end{DoxyCode}
\mbox{\Hypertarget{coap__debug_8h_aec31f830a8321d4616332602ec45f792}\label{coap__debug_8h_aec31f830a8321d4616332602ec45f792}} 
\index{coap\+\_\+debug.\+h@{coap\+\_\+debug.\+h}!coap\+Dump\+Message\+Header@{coap\+Dump\+Message\+Header}}
\index{coap\+Dump\+Message\+Header@{coap\+Dump\+Message\+Header}!coap\+\_\+debug.\+h@{coap\+\_\+debug.\+h}}
\subsubsection{\texorpdfstring{coap\+Dump\+Message\+Header()}{coapDumpMessageHeader()}}
{\footnotesize\ttfamily \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689c}{error\+\_\+t} coap\+Dump\+Message\+Header (\begin{DoxyParamCaption}\item[{const \hyperlink{stdint_8h_aba7bc1797add20fe3efdf37ced1182c5}{uint8\+\_\+t} $\ast$}]{p,  }\item[{size\+\_\+t}]{length,  }\item[{size\+\_\+t $\ast$}]{consumed }\end{DoxyParamCaption})}



Dump Co\+AP message header. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em p} & Input stream where to read the Co\+AP message header \\
\hline
\mbox{\tt in}  & {\em length} & Number of bytes available in the input stream \\
\hline
\mbox{\tt out}  & {\em consumed} & Total number of bytes that have been consumed \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Error code 
\end{DoxyReturn}


Definition at line 183 of file coap\+\_\+debug.\+c.


\begin{DoxyCode}
184 \{
185    \hyperlink{coap__common_8h_a70d12c6909cdb5a7059218005a7233d8}{CoapMessageHeader} *header;
186 
187    \textcolor{comment}{//Malformed CoAP message?}
188    \textcolor{keywordflow}{if}(\hyperlink{dtls__misc_8h_ab43ca82dd7fa2a0e56f941032ef324c4}{length} < \textcolor{keyword}{sizeof}(\hyperlink{coap__common_8h_a70d12c6909cdb5a7059218005a7233d8}{CoapMessageHeader}))
189       \textcolor{keywordflow}{return} \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689ca6b1c5652c82e48ada5b4348c0ebb95e6}{ERROR\_INVALID\_MESSAGE};
190 
191    \textcolor{comment}{//Point to the CoAP message header}
192    header = (\hyperlink{coap__common_8h_a70d12c6909cdb5a7059218005a7233d8}{CoapMessageHeader} *) \hyperlink{ndp_8h_a6519522ad9a6f45e7a8d25d31392a977}{p};
193 
194    \textcolor{comment}{//Dump CoAP version number}
195    \hyperlink{debug_8h_a67a8f9bc74358aa21745a76e23768dae}{TRACE\_DEBUG}(\textcolor{stringliteral}{"  Version = %"} PRIu8 \textcolor{stringliteral}{"\(\backslash\)r\(\backslash\)n"}, header->version);
196 
197    \textcolor{comment}{//Dump message type}
198    \hyperlink{debug_8h_a67a8f9bc74358aa21745a76e23768dae}{TRACE\_DEBUG}(\textcolor{stringliteral}{"  Type = %"} PRIu8 \textcolor{stringliteral}{" (%s)\(\backslash\)r\(\backslash\)n"}, header->type,
199       \hyperlink{coap__debug_8c_a4cb07b39c432d510ab253990516e96f1}{coapGetParamName}(header->type, \hyperlink{coap__debug_8c_ae64038e76fb6742ddf0bbf9ecfdfd803}{coapTypeList}, 
      \hyperlink{os__port_8h_aa1394a41d43c0f3fd30febe41c7bb340}{arraysize}(\hyperlink{coap__debug_8c_ae64038e76fb6742ddf0bbf9ecfdfd803}{coapTypeList})));
200 
201    \textcolor{comment}{//Dump token length}
202    \hyperlink{debug_8h_a67a8f9bc74358aa21745a76e23768dae}{TRACE\_DEBUG}(\textcolor{stringliteral}{"  Token Length = %"} PRIu8 \textcolor{stringliteral}{"\(\backslash\)r\(\backslash\)n"}, header->tokenLen);
203 
204    \textcolor{comment}{//Dump method or response code}
205    \hyperlink{debug_8h_a67a8f9bc74358aa21745a76e23768dae}{TRACE\_DEBUG}(\textcolor{stringliteral}{"  Code = %"} PRIu8 \textcolor{stringliteral}{".%02"} PRIu8 \textcolor{stringliteral}{" (%s)\(\backslash\)r\(\backslash\)n"},
206       header->code / 32, header->code & 31,
207       \hyperlink{coap__debug_8c_a4cb07b39c432d510ab253990516e96f1}{coapGetParamName}(header->code, \hyperlink{coap__debug_8c_aed649ec2312f50d7cd2d7f887e88cbf3}{coapCodeList}, 
      \hyperlink{os__port_8h_aa1394a41d43c0f3fd30febe41c7bb340}{arraysize}(\hyperlink{coap__debug_8c_aed649ec2312f50d7cd2d7f887e88cbf3}{coapCodeList})));
208 
209    \textcolor{comment}{//Dump message identifier}
210    \hyperlink{debug_8h_a67a8f9bc74358aa21745a76e23768dae}{TRACE\_DEBUG}(\textcolor{stringliteral}{"  Message ID = 0x%04"} PRIX16 \textcolor{stringliteral}{"\(\backslash\)r\(\backslash\)n"}, \hyperlink{cpu__endian_8h_a9312c6eb72e64f748ae0d0e0dc3ec9b9}{ntohs}(header->mid));
211 
212    \textcolor{comment}{//Malformed CoAP message?}
213    \textcolor{keywordflow}{if}(\hyperlink{dtls__misc_8h_ab43ca82dd7fa2a0e56f941032ef324c4}{length} < (\textcolor{keyword}{sizeof}(\hyperlink{coap__common_8h_a70d12c6909cdb5a7059218005a7233d8}{CoapMessageHeader}) + header->tokenLen))
214       \textcolor{keywordflow}{return} \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689cae5c014519c3ac2540447887ddca1bd28}{ERROR\_INVALID\_LENGTH};
215 
216    \textcolor{comment}{//Dump token}
217    \hyperlink{debug_8h_a1f71019169d85407d8827300ed43bdf0}{TRACE\_DEBUG\_ARRAY}(\textcolor{stringliteral}{"  Token = "}, header->token, header->tokenLen);
218 
219    \textcolor{comment}{//Total number of bytes that have been consumed}
220    *consumed = \textcolor{keyword}{sizeof}(\hyperlink{coap__common_8h_a70d12c6909cdb5a7059218005a7233d8}{CoapMessageHeader}) + header->tokenLen;
221 
222    \textcolor{comment}{//Successful processing}
223    \textcolor{keywordflow}{return} \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689cabf350750d0d4fabd8954c0f1e9bbae94}{NO\_ERROR};
224 \}
\end{DoxyCode}
\mbox{\Hypertarget{coap__debug_8h_a76fa8a74cb59aa44aca4354d827e421a}\label{coap__debug_8h_a76fa8a74cb59aa44aca4354d827e421a}} 
\index{coap\+\_\+debug.\+h@{coap\+\_\+debug.\+h}!coap\+Dump\+Option@{coap\+Dump\+Option}}
\index{coap\+Dump\+Option@{coap\+Dump\+Option}!coap\+\_\+debug.\+h@{coap\+\_\+debug.\+h}}
\subsubsection{\texorpdfstring{coap\+Dump\+Option()}{coapDumpOption()}}
{\footnotesize\ttfamily \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689c}{error\+\_\+t} coap\+Dump\+Option (\begin{DoxyParamCaption}\item[{const \hyperlink{structCoapOption}{Coap\+Option} $\ast$}]{option }\end{DoxyParamCaption})}



Dump Co\+AP option. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt out}  & {\em option} & Co\+AP option content \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Error code 
\end{DoxyReturn}


Definition at line 289 of file coap\+\_\+debug.\+c.


\begin{DoxyCode}
290 \{
291 \textcolor{preprocessor}{#if (COAP\_TRACE\_LEVEL >= TRACE\_LEVEL\_DEBUG)}
292    \textcolor{keywordtype}{size\_t} i;
293    \hyperlink{stdint_8h_a435d1572bf3f880d55459d9805097f62}{uint32\_t} \hyperlink{dtls__misc_8h_a74bce8e92ccabd0c885447114a48b80e}{value};
294    \textcolor{keyword}{const} \hyperlink{compiler__port_8h_a40bb5262bf908c328fbcfbe5d29d0201}{char\_t} *\hyperlink{resource__manager_8h_a26532d7194d592ae8da35222073f36d6}{name};
295    \textcolor{keyword}{const} \hyperlink{structCoapOptionParameters}{CoapOptionParameters} *optionParams;
296 
297    \textcolor{comment}{//Retrieve option parameters}
298    optionParams = \hyperlink{coap__option_8c_a1ebd1045f145d9d0bea23ee12ad4fc49}{coapGetOptionParameters}(option->\hyperlink{structCoapOption_a4930b03666d0b61415ce56e7f8b28246}{number});
299 
300    \textcolor{comment}{//Check whether the specified option is supported}
301    \textcolor{keywordflow}{if}(optionParams != \hyperlink{group__BSPDefine_ga070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL})
302    \{
303       \textcolor{comment}{//Dump option number}
304       \hyperlink{debug_8h_a67a8f9bc74358aa21745a76e23768dae}{TRACE\_DEBUG}(\textcolor{stringliteral}{"  Option %"} PRIu16 \textcolor{stringliteral}{" (%s)\(\backslash\)r\(\backslash\)n"},
305          option->\hyperlink{structCoapOption_a4930b03666d0b61415ce56e7f8b28246}{number}, optionParams->\hyperlink{structCoapOptionParameters_a151ae1dd2cf33031d384a3f351f18959}{name});
306 
307       \textcolor{comment}{//Check option type}
308       \textcolor{keywordflow}{if}(optionParams->\hyperlink{structCoapOptionParameters_affe8a594bbb492d66201b65b65106949}{format} == \hyperlink{coap__option_8h_a0dafb13dafce37cff605bb260a1ed02eab80436cdb5d96f471b8cf0ea3c0525cc}{COAP\_OPT\_FORMAT\_UINT})
309       \{
310          \textcolor{comment}{//Initialize integer value}
311          value = 0;
312 
313          \textcolor{comment}{//Convert the integer from network byte order}
314          \textcolor{keywordflow}{for}(i = 0; i < option->\hyperlink{structCoapOption_a00ae0190c8ea853add596ed817f912f4}{length}; i++)
315          \{
316             value = (value << 8) + option->\hyperlink{structCoapOption_ac57cd3a56c1d18248b7f6d3a5a827aeb}{value}[i];
317          \}
318 
319          \textcolor{comment}{//Check option number}
320          \textcolor{keywordflow}{if}(option->\hyperlink{structCoapOption_a4930b03666d0b61415ce56e7f8b28246}{number} == \hyperlink{coap__option_8h_ab833642841b9ddc4cab90acf5cffb0e7ac327e2341a2ed78310270fa285b0a7d9}{COAP\_OPT\_OBSERVE})
321          \{
322             \textcolor{comment}{//Convert the Observe option to string representation}
323             name = \hyperlink{coap__debug_8c_a4cb07b39c432d510ab253990516e96f1}{coapGetParamName}(value, \hyperlink{coap__debug_8c_a639c0580b4abdc165c957962e39c7e0d}{coapObserveList},
324                \hyperlink{os__port_8h_aa1394a41d43c0f3fd30febe41c7bb340}{arraysize}(\hyperlink{coap__debug_8c_a639c0580b4abdc165c957962e39c7e0d}{coapObserveList}));
325 
326             \textcolor{comment}{//Dump the value of the option}
327             \textcolor{keywordflow}{if}(strcmp(name, \textcolor{stringliteral}{"Unknown"}))
328             \{
329                \hyperlink{debug_8h_a67a8f9bc74358aa21745a76e23768dae}{TRACE\_DEBUG}(\textcolor{stringliteral}{"    %"} PRIu32 \textcolor{stringliteral}{" (%s)\(\backslash\)r\(\backslash\)n"}, value, name);
330             \}
331             \textcolor{keywordflow}{else}
332             \{
333                \hyperlink{debug_8h_a67a8f9bc74358aa21745a76e23768dae}{TRACE\_DEBUG}(\textcolor{stringliteral}{"    %"} PRIu32 \textcolor{stringliteral}{"\(\backslash\)r\(\backslash\)n"}, value);
334             \}
335          \}
336          \textcolor{keywordflow}{else} \textcolor{keywordflow}{if}(option->\hyperlink{structCoapOption_a4930b03666d0b61415ce56e7f8b28246}{number} == \hyperlink{coap__option_8h_ab833642841b9ddc4cab90acf5cffb0e7ac9734fe9d1983c411d839fd317afbdca}{COAP\_OPT\_CONTENT\_FORMAT})
337          \{
338             \textcolor{comment}{//Convert the Content-Format option to string representation}
339             name = \hyperlink{coap__debug_8c_a4cb07b39c432d510ab253990516e96f1}{coapGetParamName}(value, \hyperlink{coap__debug_8c_a1a5ee5fa43da5e5d14f7a63a51baa2f7}{coapContentFormatList},
340                \hyperlink{os__port_8h_aa1394a41d43c0f3fd30febe41c7bb340}{arraysize}(\hyperlink{coap__debug_8c_a1a5ee5fa43da5e5d14f7a63a51baa2f7}{coapContentFormatList}));
341 
342             \textcolor{comment}{//Dump the value of the option}
343             \hyperlink{debug_8h_a67a8f9bc74358aa21745a76e23768dae}{TRACE\_DEBUG}(\textcolor{stringliteral}{"    %"} PRIu32 \textcolor{stringliteral}{" (%s)\(\backslash\)r\(\backslash\)n"}, value, name);
344          \}
345          \textcolor{keywordflow}{else} \textcolor{keywordflow}{if}(option->\hyperlink{structCoapOption_a4930b03666d0b61415ce56e7f8b28246}{number} == \hyperlink{coap__option_8h_ab833642841b9ddc4cab90acf5cffb0e7a5492ac3bfefc86f9801606306e6edb18}{COAP\_OPT\_BLOCK1} ||
346             option->\hyperlink{structCoapOption_a4930b03666d0b61415ce56e7f8b28246}{number} == \hyperlink{coap__option_8h_ab833642841b9ddc4cab90acf5cffb0e7a5c471307a51b53ed7bf1c06a21a6dc64}{COAP\_OPT\_BLOCK2})
347          \{
348             \textcolor{comment}{//Dump the value of the Block option}
349             \hyperlink{debug_8h_a67a8f9bc74358aa21745a76e23768dae}{TRACE\_DEBUG}(\textcolor{stringliteral}{"    %"} PRIu32 \textcolor{stringliteral}{"/%"} PRIu32 \textcolor{stringliteral}{"/%"} PRIu32 \textcolor{stringliteral}{"\(\backslash\)r\(\backslash\)n"},
350                \hyperlink{coap__option_8h_a65c37dcf4bcfa5ea4eefa30c22a5e07f}{COAP\_GET\_BLOCK\_NUM}(value), \hyperlink{coap__option_8h_ace229e0410332b47e02ff58dea5c447f}{COAP\_GET\_BLOCK\_M}(value),
351                16 << \hyperlink{coap__option_8h_a66414e735018b7e4c61a954124707b0b}{COAP\_GET\_BLOCK\_SZX}(value));
352          \}
353          \textcolor{keywordflow}{else}
354          \{
355             \textcolor{comment}{//Dump the value of the option}
356             \hyperlink{debug_8h_a67a8f9bc74358aa21745a76e23768dae}{TRACE\_DEBUG}(\textcolor{stringliteral}{"    %"} PRIu32 \textcolor{stringliteral}{"\(\backslash\)r\(\backslash\)n"}, value);
357          \}
358       \}
359       \textcolor{keywordflow}{else} \textcolor{keywordflow}{if}(optionParams->\hyperlink{structCoapOptionParameters_affe8a594bbb492d66201b65b65106949}{format} == \hyperlink{coap__option_8h_a0dafb13dafce37cff605bb260a1ed02ead1990a46534b7e1fb3e0d119c509f5d7}{COAP\_OPT\_FORMAT\_STRING})
360       \{
361          \textcolor{comment}{//Append prefix}
362          \hyperlink{debug_8h_a67a8f9bc74358aa21745a76e23768dae}{TRACE\_DEBUG}(\textcolor{stringliteral}{"    \(\backslash\)""});
363 
364          \textcolor{comment}{//Dump string value}
365          \textcolor{keywordflow}{for}(i = 0; i < option->\hyperlink{structCoapOption_a00ae0190c8ea853add596ed817f912f4}{length}; i++)
366             \hyperlink{debug_8h_a67a8f9bc74358aa21745a76e23768dae}{TRACE\_DEBUG}(\textcolor{stringliteral}{"%c"}, option->\hyperlink{structCoapOption_ac57cd3a56c1d18248b7f6d3a5a827aeb}{value}[i]);
367 
368          \textcolor{comment}{//Add a line feed}
369          \hyperlink{debug_8h_a67a8f9bc74358aa21745a76e23768dae}{TRACE\_DEBUG}(\textcolor{stringliteral}{"\(\backslash\)"\(\backslash\)r\(\backslash\)n"});
370       \}
371       \textcolor{keywordflow}{else}
372       \{
373          \textcolor{comment}{//Dump option value}
374          \hyperlink{debug_8h_a1f71019169d85407d8827300ed43bdf0}{TRACE\_DEBUG\_ARRAY}(\textcolor{stringliteral}{"    "}, option->\hyperlink{structCoapOption_ac57cd3a56c1d18248b7f6d3a5a827aeb}{value}, option->
      \hyperlink{structCoapOption_a00ae0190c8ea853add596ed817f912f4}{length});
375       \}
376    \}
377    \textcolor{keywordflow}{else}
378    \{
379       \textcolor{comment}{//Dump option number}
380       \hyperlink{debug_8h_a67a8f9bc74358aa21745a76e23768dae}{TRACE\_DEBUG}(\textcolor{stringliteral}{"  Option %"} PRIu16 \textcolor{stringliteral}{" (%"} PRIu16 \textcolor{stringliteral}{" bytes)\(\backslash\)r\(\backslash\)n"},
381          option->\hyperlink{structCoapOption_a4930b03666d0b61415ce56e7f8b28246}{number}, option->\hyperlink{structCoapOption_a00ae0190c8ea853add596ed817f912f4}{length});
382 
383       \textcolor{comment}{//Dump option value}
384       \hyperlink{debug_8h_a1f71019169d85407d8827300ed43bdf0}{TRACE\_DEBUG\_ARRAY}(\textcolor{stringliteral}{"    "}, option->\hyperlink{structCoapOption_ac57cd3a56c1d18248b7f6d3a5a827aeb}{value}, option->
      \hyperlink{structCoapOption_a00ae0190c8ea853add596ed817f912f4}{length});
385    \}
386 \textcolor{preprocessor}{#endif}
387 
388    \textcolor{comment}{//Successful processing}
389    \textcolor{keywordflow}{return} \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689cabf350750d0d4fabd8954c0f1e9bbae94}{NO\_ERROR};
390 \}
\end{DoxyCode}
\mbox{\Hypertarget{coap__debug_8h_a309d4857cd4f2819dabc3c5b8ca2544d}\label{coap__debug_8h_a309d4857cd4f2819dabc3c5b8ca2544d}} 
\index{coap\+\_\+debug.\+h@{coap\+\_\+debug.\+h}!coap\+Dump\+Options@{coap\+Dump\+Options}}
\index{coap\+Dump\+Options@{coap\+Dump\+Options}!coap\+\_\+debug.\+h@{coap\+\_\+debug.\+h}}
\subsubsection{\texorpdfstring{coap\+Dump\+Options()}{coapDumpOptions()}}
{\footnotesize\ttfamily \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689c}{error\+\_\+t} coap\+Dump\+Options (\begin{DoxyParamCaption}\item[{const \hyperlink{stdint_8h_aba7bc1797add20fe3efdf37ced1182c5}{uint8\+\_\+t} $\ast$}]{p,  }\item[{size\+\_\+t}]{length,  }\item[{size\+\_\+t $\ast$}]{consumed }\end{DoxyParamCaption})}



Dump the list of Co\+AP options. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em p} & Input stream where to read the Co\+AP options \\
\hline
\mbox{\tt in}  & {\em length} & Number of bytes available in the input stream \\
\hline
\mbox{\tt out}  & {\em consumed} & Total number of bytes that have been consumed \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Error code 
\end{DoxyReturn}


Definition at line 235 of file coap\+\_\+debug.\+c.


\begin{DoxyCode}
236 \{
237    \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689c}{error\_t} error;
238    \textcolor{keywordtype}{size\_t} \hyperlink{dhcpv6__common_8h_a5a648f5ec00c526b0dfa2df7a272c6c0}{n};
239    \hyperlink{structCoapOption}{CoapOption} option;
240 
241    \textcolor{comment}{//Initialize status code}
242    error = \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689cabf350750d0d4fabd8954c0f1e9bbae94}{NO\_ERROR};
243 
244    \textcolor{comment}{//Total number of bytes that have been consumed}
245    *consumed = 0;
246 
247    \textcolor{comment}{//For the first option in a message, a preceding option instance with}
248    \textcolor{comment}{//Option Number zero is assumed}
249    option.\hyperlink{structCoapOption_a4930b03666d0b61415ce56e7f8b28246}{number} = 0;
250 
251    \textcolor{comment}{//Loop through CoAP options}
252    \textcolor{keywordflow}{while}(\hyperlink{dtls__misc_8h_ab43ca82dd7fa2a0e56f941032ef324c4}{length} > 0)
253    \{
254       \textcolor{comment}{//Payload marker found?}
255       \textcolor{keywordflow}{if}(*\hyperlink{ndp_8h_a6519522ad9a6f45e7a8d25d31392a977}{p} == \hyperlink{coap__common_8h_ab4e38910080deed0a5df4aec116d3999}{COAP\_PAYLOAD\_MARKER})
256          \textcolor{keywordflow}{break};
257 
258       \textcolor{comment}{//Parse current option}
259       error = \hyperlink{coap__option_8c_aed5555040b2ae65a35975e10bfc5fb31}{coapParseOption}(\hyperlink{ndp_8h_a6519522ad9a6f45e7a8d25d31392a977}{p}, \hyperlink{dtls__misc_8h_ab43ca82dd7fa2a0e56f941032ef324c4}{length}, option.\hyperlink{structCoapOption_a4930b03666d0b61415ce56e7f8b28246}{number}, &option, &n);
260       \textcolor{comment}{//Any error to report?}
261       \textcolor{keywordflow}{if}(error)
262          \textcolor{keywordflow}{break};
263 
264       \textcolor{comment}{//Dump current option}
265       error = \hyperlink{coap__debug_8c_a76fa8a74cb59aa44aca4354d827e421a}{coapDumpOption}(&option);
266       \textcolor{comment}{//Any error to report?}
267       \textcolor{keywordflow}{if}(error)
268          \textcolor{keywordflow}{break};
269 
270       \textcolor{comment}{//Total number of bytes that have been consumed}
271       *consumed += \hyperlink{dhcpv6__common_8h_a5a648f5ec00c526b0dfa2df7a272c6c0}{n};
272 
273       \textcolor{comment}{//Jump to the next option}
274       \hyperlink{ndp_8h_a6519522ad9a6f45e7a8d25d31392a977}{p} += \hyperlink{dhcpv6__common_8h_a5a648f5ec00c526b0dfa2df7a272c6c0}{n};
275       \hyperlink{dtls__misc_8h_ab43ca82dd7fa2a0e56f941032ef324c4}{length} -= \hyperlink{dhcpv6__common_8h_a5a648f5ec00c526b0dfa2df7a272c6c0}{n};
276    \}
277 
278    \textcolor{comment}{//Return status code}
279    \textcolor{keywordflow}{return} error;
280 \}
\end{DoxyCode}
\mbox{\Hypertarget{coap__debug_8h_a4cb07b39c432d510ab253990516e96f1}\label{coap__debug_8h_a4cb07b39c432d510ab253990516e96f1}} 
\index{coap\+\_\+debug.\+h@{coap\+\_\+debug.\+h}!coap\+Get\+Param\+Name@{coap\+Get\+Param\+Name}}
\index{coap\+Get\+Param\+Name@{coap\+Get\+Param\+Name}!coap\+\_\+debug.\+h@{coap\+\_\+debug.\+h}}
\subsubsection{\texorpdfstring{coap\+Get\+Param\+Name()}{coapGetParamName()}}
{\footnotesize\ttfamily const \hyperlink{compiler__port_8h_a40bb5262bf908c328fbcfbe5d29d0201}{char\+\_\+t}$\ast$ coap\+Get\+Param\+Name (\begin{DoxyParamCaption}\item[{\hyperlink{compiler__port_8h_a12a1e9b3ce141648783a82445d02b58d}{uint\+\_\+t}}]{value,  }\item[{const \hyperlink{structCoapParamDesc}{Coap\+Param\+Desc} $\ast$}]{param\+List,  }\item[{size\+\_\+t}]{param\+List\+Len }\end{DoxyParamCaption})}



Convert a parameter to string representation. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em value} & Parameter value \\
\hline
\mbox{\tt in}  & {\em param\+List} & List of acceptable parameters \\
\hline
\mbox{\tt in}  & {\em param\+List\+Len} & Number of entries in the list \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
N\+U\+L\+L-\/terminated string describing the parameter 
\end{DoxyReturn}


Definition at line 401 of file coap\+\_\+debug.\+c.


\begin{DoxyCode}
403 \{
404    \hyperlink{compiler__port_8h_a12a1e9b3ce141648783a82445d02b58d}{uint\_t} i;
405 
406    \textcolor{comment}{//Default name for unknown values}
407    \textcolor{keyword}{static} \textcolor{keyword}{const} \hyperlink{compiler__port_8h_a40bb5262bf908c328fbcfbe5d29d0201}{char\_t} defaultName[] = \textcolor{stringliteral}{"Unknown"};
408 
409    \textcolor{comment}{//Loop through the list of acceptable parameters}
410    \textcolor{keywordflow}{for}(i = 0; i < paramListLen; i++)
411    \{
412       \textcolor{keywordflow}{if}(paramList[i].\hyperlink{dtls__misc_8h_a74bce8e92ccabd0c885447114a48b80e}{value} == \hyperlink{dtls__misc_8h_a74bce8e92ccabd0c885447114a48b80e}{value})
413          \textcolor{keywordflow}{return} paramList[i].\hyperlink{structCoapParamDesc_a0a7d711090097fae4c256548807be277}{name};
414    \}
415 
416    \textcolor{comment}{//Unknown value}
417    \textcolor{keywordflow}{return} defaultName;
418 \}
\end{DoxyCode}
