\hypertarget{group__WifiInitFn}{}\section{m2m\+\_\+wifi\+\_\+init}
\label{group__WifiInitFn}\index{m2m\+\_\+wifi\+\_\+init@{m2m\+\_\+wifi\+\_\+init}}
\subsection*{Functions}
\begin{DoxyCompactItemize}
\item 
\hyperlink{group__BSPDefine_gaecc0323d771e41ef81a76b5f12783e22}{N\+M\+I\+\_\+\+A\+PI} \hyperlink{group__DataT_gae35f10ffd0ac8dd2bc3e794da9bdfbc7}{sint8} \hyperlink{group__WifiInitFn_ga73c734812e844d96d860c4e93e9daf35}{m2m\+\_\+wifi\+\_\+init} (\hyperlink{structtstrWifiInitParam}{tstr\+Wifi\+Init\+Param} $\ast$p\+Wifi\+Init\+Param)
\end{DoxyCompactItemize}


\subsection{Detailed Description}
Synchronous initialization functions for the W\+I\+LC driver. This function initializes the driver by, registering the call back function for M2\+M\+\_\+\+W\+I\+FI layer (also the call back function for monitoring mode if defined), initializing the host interface layer and the bus interfaces. Wi-\/\+Fi callback registering is essential to allow the handling of the events received, in response to the asynchronous wi-\/fi operations. Following are the possible wi-\/fi events that are expected to be received through the call back function(provided by the application) to the M2\+M\+\_\+\+W\+I\+FI layer are \+: \hyperlink{group__WlanEnums_gga064de09dec1d5e88ed8d075fa40f57deabb42b3025c56c51d915a1fa4abd2dbd0}{M2\+M\+\_\+\+W\+I\+F\+I\+\_\+\+R\+E\+S\+P\+\_\+\+C\+O\+N\+\_\+\+S\+T\+A\+T\+E\+\_\+\+C\+H\+A\+N\+G\+ED} \hyperlink{group__WlanEnums_gga064de09dec1d5e88ed8d075fa40f57dea35767ad0217ab92b149bc77e79610d33}{M2\+M\+\_\+\+W\+I\+F\+I\+\_\+\+R\+E\+S\+P\+\_\+\+C\+O\+N\+N\+\_\+\+I\+N\+FO} \hyperlink{group__WlanEnums_gga064de09dec1d5e88ed8d075fa40f57deaef464d51211d1fc52d818642d666485d}{M2\+M\+\_\+\+W\+I\+F\+I\+\_\+\+R\+E\+S\+\_\+\+W\+PS} \hyperlink{group__WlanEnums_gga064de09dec1d5e88ed8d075fa40f57dead835febbe18b7e3cc6ce4693951354fe}{M2\+M\+\_\+\+W\+I\+F\+I\+\_\+\+R\+E\+S\+P\+\_\+\+S\+C\+A\+N\+\_\+\+D\+O\+NE} \hyperlink{group__WlanEnums_gga064de09dec1d5e88ed8d075fa40f57deadfb48e88c3a8e5f9dac634d62d3f53e5}{M2\+M\+\_\+\+W\+I\+F\+I\+\_\+\+R\+E\+S\+P\+\_\+\+S\+C\+A\+N\+\_\+\+R\+E\+S\+U\+LT} \hyperlink{group__WlanEnums_gga57466b36df595c593e7ccc9892e14b20ae2f28d3ff5c4356502abfc26d8f6e5f1}{M2\+M\+\_\+\+W\+I\+F\+I\+\_\+\+R\+E\+S\+P\+\_\+\+C\+U\+R\+R\+E\+N\+T\+\_\+\+R\+S\+SI} M2\+M\+\_\+\+W\+I\+F\+I\+\_\+\+R\+E\+S\+P\+\_\+\+D\+E\+F\+A\+U\+L\+T\+\_\+\+C\+O\+N\+N\+E\+CT \hyperlink{group__WlanEnums_gga064de09dec1d5e88ed8d075fa40f57dea2d2336ccd8bfda6e083b0ec6b8d798ba}{M2\+M\+\_\+\+W\+I\+F\+I\+\_\+\+R\+E\+S\+P\+\_\+\+E\+T\+H\+E\+R\+N\+E\+T\+\_\+\+R\+X\+\_\+\+P\+A\+C\+K\+ET} Example\+: ~\newline
 In case Monitoring mode is used\+: \hyperlink{group__WlanEnums_gga064de09dec1d5e88ed8d075fa40f57dea9a121b41defa5ffcb174fe304cbce432}{M2\+M\+\_\+\+W\+I\+F\+I\+\_\+\+R\+E\+S\+P\+\_\+\+W\+I\+F\+I\+\_\+\+R\+X\+\_\+\+P\+A\+C\+K\+ET}

Any application using the W\+I\+LC driver must call this function at the start of its main function. 

\subsection{Function Documentation}
\mbox{\Hypertarget{group__WifiInitFn_ga73c734812e844d96d860c4e93e9daf35}\label{group__WifiInitFn_ga73c734812e844d96d860c4e93e9daf35}} 
\index{m2m\+\_\+wifi\+\_\+init@{m2m\+\_\+wifi\+\_\+init}!m2m\+\_\+wifi\+\_\+init@{m2m\+\_\+wifi\+\_\+init}}
\index{m2m\+\_\+wifi\+\_\+init@{m2m\+\_\+wifi\+\_\+init}!m2m\+\_\+wifi\+\_\+init@{m2m\+\_\+wifi\+\_\+init}}
\subsubsection{\texorpdfstring{m2m\+\_\+wifi\+\_\+init()}{m2m\_wifi\_init()}}
{\footnotesize\ttfamily \hyperlink{group__BSPDefine_gaecc0323d771e41ef81a76b5f12783e22}{N\+M\+I\+\_\+\+A\+PI} \hyperlink{group__DataT_gae35f10ffd0ac8dd2bc3e794da9bdfbc7}{sint8} m2m\+\_\+wifi\+\_\+init (\begin{DoxyParamCaption}\item[{\hyperlink{structtstrWifiInitParam}{tstr\+Wifi\+Init\+Param} $\ast$}]{p\+Wifi\+Init\+Param }\end{DoxyParamCaption})}



{\ttfamily \#include $<$\hyperlink{m2m__wifi_8h}{third\+\_\+party/atmel/devices/wilc1000/driver/include/m2m\+\_\+wifi.\+h}$>$}


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em p\+Wifi\+Init\+Param} & This is a pointer to the \hyperlink{structtstrWifiInitParam}{tstr\+Wifi\+Init\+Param} structure which holds the pointer to the application W\+I\+FI layer call back function, monitoring mode call back and \hyperlink{structtstrEthInitParam}{tstr\+Eth\+Init\+Param} strucutre.\\
\hline
\end{DoxyParams}
\begin{DoxyPrecond}{Precondition}
Prior to this function call, application users must provide a call back function responsible for receiving all the wi-\/fi events that are received on the M2\+M\+\_\+\+W\+I\+FI layer.
\end{DoxyPrecond}
\begin{DoxyWarning}{Warning}
Failure to successfully complete function indicates that the driver couldn\textquotesingle{}t be initialized and a fatal error will prevent the application from proceeding.
\end{DoxyWarning}
\begin{DoxySeeAlso}{See also}
\hyperlink{group__WifiDeinitFn_gacadee10a536f3e9817f26aa52b0bb954}{m2m\+\_\+wifi\+\_\+deinit} \hyperlink{group__WlanEnums_ga064de09dec1d5e88ed8d075fa40f57de}{tenu\+M2m\+Sta\+Cmd}
\end{DoxySeeAlso}
\begin{DoxyReturn}{Returns}
The function returns \hyperlink{nm__common_8h_a9ef27ba27aafdd1aa3a79d3ba2c36b8f}{M2\+M\+\_\+\+S\+U\+C\+C\+E\+SS} for successful operations and a negative value otherwise. 
\end{DoxyReturn}


Definition at line 170 of file m2m\+\_\+wifi.\+c.


\begin{DoxyCode}
171 \{
172     \hyperlink{group__DataT_gae35f10ffd0ac8dd2bc3e794da9bdfbc7}{sint8} ret = \hyperlink{nm__common_8h_a9ef27ba27aafdd1aa3a79d3ba2c36b8f}{M2M\_SUCCESS};
173     \hyperlink{structtstrHifinitParam}{tstrHifinitParam} \hyperlink{m2m__hif_8c_a6ae7b8f5c97ebf1c5775d9272af3f9e7}{strHifInitParam};
174 
175     \hyperlink{m2m__wifi_8c_ad0c49a5f45987a529a0c5eaceacac550}{gpfAppWifiCb}        = param->pfAppWifiCb;
176     \hyperlink{m2m__wifi_8c_a767ada1c5f8e15f227a2b4113c274cbb}{gpfAppEthCb}          = param->strEthInitParam.pfAppEthCb;
177     \hyperlink{m2m__wifi_8c_ac9b0480acc01f285eeb79d93df9c83cb}{gpu8ethRcvBuf}       = param->strEthInitParam.au8ethRcvBuf;
178     \hyperlink{m2m__wifi_8c_a396c0ca6c68ad0a6a752cc4bb0c95b99}{gu16ethRcvBufSize}  = param->strEthInitParam.u16ethRcvBufSize;
179     \hyperlink{m2m__wifi_8c_aad3c1fca378ec753b43a86ebe6fac797}{gpfAppMonCb}  = param->pfAppMonCb;
180     \hyperlink{m2m__wifi_8c_a76295f775841fc0f6533603c99da618e}{gu8scanInProgress} = 0;
181     \textcolor{comment}{/* Apply device specific initialization. */}
182     ret = \hyperlink{nmdrv_8c_a5b11f44fa8edd600cccd32ece263e3eb}{nm\_drv\_init}(\hyperlink{group__BSPDefine_ga070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL});
183     \textcolor{keywordflow}{if}(ret != \hyperlink{nm__common_8h_a9ef27ba27aafdd1aa3a79d3ba2c36b8f}{M2M\_SUCCESS})   \textcolor{keywordflow}{goto} \_EXIT0;
184     \textcolor{comment}{/* Initialize host interface module */}
185     strHifInitParam.\hyperlink{structtstrHifinitParam_a8fba7791bb370e1824b8a0d0365c71c5}{pu8RcvBuff} = \hyperlink{m2m__wifi_8c_ac9b0480acc01f285eeb79d93df9c83cb}{gpu8ethRcvBuf};
186     strHifInitParam.\hyperlink{structtstrHifinitParam_a0a0ef27c7b11c7e708fc4a4e694edec2}{u32RcvBuffSize} = \hyperlink{m2m__wifi_8c_a396c0ca6c68ad0a6a752cc4bb0c95b99}{gu16ethRcvBufSize};
187     ret = \hyperlink{m2m__hif_8c_af9f7692c301ce176fe370b42682badbd}{hif\_init}(&strHifInitParam);
188     \textcolor{keywordflow}{if}(ret != \hyperlink{nm__common_8h_a9ef27ba27aafdd1aa3a79d3ba2c36b8f}{M2M\_SUCCESS})   \textcolor{keywordflow}{goto} \_EXIT1;
189 
190     \hyperlink{m2m__hif_8c_a63f14be680fcf28f96912ee6e6f28be9}{hif\_register\_cb}(\hyperlink{nm__common_8h_a9ab02eb1aea02a75c3f5aade4eef1276aeb9a7d57324ba4b8a6c2a5f46dd499c2}{M2M\_REQ\_GRP\_WIFI},\hyperlink{m2m__wifi_8c_a973be137398735026a70b21a59e11900}{m2m\_wifi\_cb});
191 
192     \textcolor{keywordflow}{return} ret;
193 
194 \_EXIT1:
195     \hyperlink{nmdrv_8c_a444c8058e44c2381fcceac93a5f53a3c}{nm\_drv\_deinit}(\hyperlink{group__BSPDefine_ga070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL});
196 \_EXIT0:
197     \textcolor{keywordflow}{return} ret;
198 \}
\end{DoxyCode}
