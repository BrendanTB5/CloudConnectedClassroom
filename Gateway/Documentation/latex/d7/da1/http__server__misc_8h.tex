\hypertarget{http__server__misc_8h}{}\section{cyclone\+\_\+tcp/http/http\+\_\+server\+\_\+misc.h File Reference}
\label{http__server__misc_8h}\index{cyclone\+\_\+tcp/http/http\+\_\+server\+\_\+misc.\+h@{cyclone\+\_\+tcp/http/http\+\_\+server\+\_\+misc.\+h}}


H\+T\+TP server (miscellaneous functions)  


{\ttfamily \#include \char`\"{}http/http\+\_\+server.\+h\char`\"{}}\newline
\subsection*{Functions}
\begin{DoxyCompactItemize}
\item 
\hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689c}{error\+\_\+t} \hyperlink{http__server__misc_8h_ad0e8b805bb61bdb5cbc6368370d2cb52}{http\+Read\+Request\+Header} (\hyperlink{http__server_8h_a3506ecffde998ab02629dca83587d2f9}{Http\+Connection} $\ast$connection)
\begin{DoxyCompactList}\small\item\em Read H\+T\+TP request header and parse its contents. \end{DoxyCompactList}\item 
\hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689c}{error\+\_\+t} \hyperlink{http__server__misc_8h_a9e311bb729435947dbea0e8a9479eb18}{http\+Parse\+Request\+Line} (\hyperlink{http__server_8h_a3506ecffde998ab02629dca83587d2f9}{Http\+Connection} $\ast$connection, \hyperlink{compiler__port_8h_a40bb5262bf908c328fbcfbe5d29d0201}{char\+\_\+t} $\ast$request\+Line)
\begin{DoxyCompactList}\small\item\em Parse Request-\/\+Line. \end{DoxyCompactList}\item 
\hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689c}{error\+\_\+t} \hyperlink{http__server__misc_8h_aa83dccde534c4cb053a434f062085049}{http\+Read\+Header\+Field} (\hyperlink{http__server_8h_a3506ecffde998ab02629dca83587d2f9}{Http\+Connection} $\ast$connection, \hyperlink{compiler__port_8h_a40bb5262bf908c328fbcfbe5d29d0201}{char\+\_\+t} $\ast$buffer, size\+\_\+t size, \hyperlink{compiler__port_8h_a40bb5262bf908c328fbcfbe5d29d0201}{char\+\_\+t} $\ast$first\+Char)
\begin{DoxyCompactList}\small\item\em Read multiple-\/line header field. \end{DoxyCompactList}\item 
void \hyperlink{http__server__misc_8h_a2fe40f81ba5d3f65c2c34c03d0be8be6}{http\+Parse\+Header\+Field} (\hyperlink{http__server_8h_a3506ecffde998ab02629dca83587d2f9}{Http\+Connection} $\ast$connection, const \hyperlink{compiler__port_8h_a40bb5262bf908c328fbcfbe5d29d0201}{char\+\_\+t} $\ast$\hyperlink{resource__manager_8h_a26532d7194d592ae8da35222073f36d6}{name}, \hyperlink{compiler__port_8h_a40bb5262bf908c328fbcfbe5d29d0201}{char\+\_\+t} $\ast$\hyperlink{chap_8h_adfa040d04d16520129a735fff8fb1628}{value})
\begin{DoxyCompactList}\small\item\em Parse H\+T\+TP header field. \end{DoxyCompactList}\item 
void \hyperlink{http__server__misc_8h_acc10352f4c0ae57fc3f05efff219de63}{http\+Parse\+Connection\+Field} (\hyperlink{http__server_8h_a3506ecffde998ab02629dca83587d2f9}{Http\+Connection} $\ast$connection, \hyperlink{compiler__port_8h_a40bb5262bf908c328fbcfbe5d29d0201}{char\+\_\+t} $\ast$\hyperlink{chap_8h_adfa040d04d16520129a735fff8fb1628}{value})
\begin{DoxyCompactList}\small\item\em Parse Connection header field. \end{DoxyCompactList}\item 
void \hyperlink{http__server__misc_8h_abbc813884f86b0ebe404ad88dc810137}{http\+Parse\+Content\+Type\+Field} (\hyperlink{http__server_8h_a3506ecffde998ab02629dca83587d2f9}{Http\+Connection} $\ast$connection, \hyperlink{compiler__port_8h_a40bb5262bf908c328fbcfbe5d29d0201}{char\+\_\+t} $\ast$\hyperlink{chap_8h_adfa040d04d16520129a735fff8fb1628}{value})
\begin{DoxyCompactList}\small\item\em Parse Content-\/\+Type header field. \end{DoxyCompactList}\item 
void \hyperlink{http__server__misc_8h_a98227843b74e7daa4372cdb0db1355fe}{http\+Parse\+Accept\+Encoding\+Field} (\hyperlink{http__server_8h_a3506ecffde998ab02629dca83587d2f9}{Http\+Connection} $\ast$connection, \hyperlink{compiler__port_8h_a40bb5262bf908c328fbcfbe5d29d0201}{char\+\_\+t} $\ast$\hyperlink{chap_8h_adfa040d04d16520129a735fff8fb1628}{value})
\begin{DoxyCompactList}\small\item\em Parse Accept-\/\+Encoding header field. \end{DoxyCompactList}\item 
void \hyperlink{http__server__misc_8h_a9f1254a4277b1e87e76a054bafae65db}{http\+Parse\+Cookie\+Field} (\hyperlink{http__server_8h_a3506ecffde998ab02629dca83587d2f9}{Http\+Connection} $\ast$connection, \hyperlink{compiler__port_8h_a40bb5262bf908c328fbcfbe5d29d0201}{char\+\_\+t} $\ast$\hyperlink{chap_8h_adfa040d04d16520129a735fff8fb1628}{value})
\begin{DoxyCompactList}\small\item\em Parse Cookie header field. \end{DoxyCompactList}\item 
\hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689c}{error\+\_\+t} \hyperlink{http__server__misc_8h_acc3d795809c9a695d07ccdd0f084918f}{http\+Read\+Chunk\+Size} (\hyperlink{http__server_8h_a3506ecffde998ab02629dca83587d2f9}{Http\+Connection} $\ast$connection)
\begin{DoxyCompactList}\small\item\em Read chunk-\/size field from the input stream. \end{DoxyCompactList}\item 
void \hyperlink{http__server__misc_8h_aafe1d6fec1869fb5f889d465c19f3306}{http\+Init\+Response\+Header} (\hyperlink{http__server_8h_a3506ecffde998ab02629dca83587d2f9}{Http\+Connection} $\ast$connection)
\begin{DoxyCompactList}\small\item\em Initialize response header. \end{DoxyCompactList}\item 
\hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689c}{error\+\_\+t} \hyperlink{http__server__misc_8h_a7553d42376343d871d04ac7208deeda6}{http\+Format\+Response\+Header} (\hyperlink{http__server_8h_a3506ecffde998ab02629dca83587d2f9}{Http\+Connection} $\ast$connection, \hyperlink{compiler__port_8h_a40bb5262bf908c328fbcfbe5d29d0201}{char\+\_\+t} $\ast$buffer)
\begin{DoxyCompactList}\small\item\em Format H\+T\+TP response header. \end{DoxyCompactList}\item 
\hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689c}{error\+\_\+t} \hyperlink{http__server__misc_8h_a8d6b785321ab0843c72699bbc8c9d51b}{http\+Send} (\hyperlink{http__server_8h_a3506ecffde998ab02629dca83587d2f9}{Http\+Connection} $\ast$connection, const void $\ast$\hyperlink{tftp__common_8h_a5c239a1bb87b52b0f1d6d68c4749cd2a}{data}, size\+\_\+t \hyperlink{ppp_8h_ab2b3adeb2a67e656ff030b56727fd0ac}{length}, \hyperlink{compiler__port_8h_a12a1e9b3ce141648783a82445d02b58d}{uint\+\_\+t} \hyperlink{nbns__common_8h_a1e87af3c18a2fd36c61faf89949bdc3f}{flags})
\begin{DoxyCompactList}\small\item\em Send data to the client. \end{DoxyCompactList}\item 
\hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689c}{error\+\_\+t} \hyperlink{http__server__misc_8h_a2b807b3ad3566b5ab129e02287b3535f}{http\+Receive} (\hyperlink{http__server_8h_a3506ecffde998ab02629dca83587d2f9}{Http\+Connection} $\ast$connection, void $\ast$\hyperlink{tftp__common_8h_a5c239a1bb87b52b0f1d6d68c4749cd2a}{data}, size\+\_\+t size, size\+\_\+t $\ast$received, \hyperlink{compiler__port_8h_a12a1e9b3ce141648783a82445d02b58d}{uint\+\_\+t} \hyperlink{nbns__common_8h_a1e87af3c18a2fd36c61faf89949bdc3f}{flags})
\begin{DoxyCompactList}\small\item\em Receive data from the client. \end{DoxyCompactList}\item 
void \hyperlink{http__server__misc_8h_a34edbde4371909896b60846f2545fbaa}{http\+Get\+Absolute\+Path} (\hyperlink{http__server_8h_a3506ecffde998ab02629dca83587d2f9}{Http\+Connection} $\ast$connection, const \hyperlink{compiler__port_8h_a40bb5262bf908c328fbcfbe5d29d0201}{char\+\_\+t} $\ast$relative, \hyperlink{compiler__port_8h_a40bb5262bf908c328fbcfbe5d29d0201}{char\+\_\+t} $\ast$absolute, size\+\_\+t max\+Len)
\begin{DoxyCompactList}\small\item\em Retrieve the full pathname to the specified resource. \end{DoxyCompactList}\item 
\hyperlink{compiler__port_8h_a812d16e5494522586b3784e55d479912}{bool\+\_\+t} \hyperlink{http__server__misc_8h_aebda8c10016605385b6958ff384013aa}{http\+Comp\+Extension} (const \hyperlink{compiler__port_8h_a40bb5262bf908c328fbcfbe5d29d0201}{char\+\_\+t} $\ast$\hyperlink{tftp__common_8h_a054704ecfbf9f8eea80cd1d120b8cf62}{filename}, const \hyperlink{compiler__port_8h_a40bb5262bf908c328fbcfbe5d29d0201}{char\+\_\+t} $\ast$extension)
\begin{DoxyCompactList}\small\item\em Compare filename extension. \end{DoxyCompactList}\item 
\hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689c}{error\+\_\+t} \hyperlink{http__server__misc_8h_acc3ffce89629a854bba3a6021debf0fd}{http\+Decode\+Percent\+Encoded\+String} (const \hyperlink{compiler__port_8h_a40bb5262bf908c328fbcfbe5d29d0201}{char\+\_\+t} $\ast$input, \hyperlink{compiler__port_8h_a40bb5262bf908c328fbcfbe5d29d0201}{char\+\_\+t} $\ast$output, size\+\_\+t output\+Size)
\begin{DoxyCompactList}\small\item\em Decode a percent-\/encoded string. \end{DoxyCompactList}\item 
void \hyperlink{http__server__misc_8h_a645bdf3cbf9b810deecbe5258790ae4d}{http\+Convert\+Array\+To\+Hex\+String} (const \hyperlink{stdint_8h_aba7bc1797add20fe3efdf37ced1182c5}{uint8\+\_\+t} $\ast$input, size\+\_\+t input\+Len, \hyperlink{compiler__port_8h_a40bb5262bf908c328fbcfbe5d29d0201}{char\+\_\+t} $\ast$output)
\begin{DoxyCompactList}\small\item\em Convert byte array to hex string. \end{DoxyCompactList}\end{DoxyCompactItemize}


\subsection{Detailed Description}
H\+T\+TP server (miscellaneous functions) 

\hypertarget{pic32mz__ef__curiosity_8h_License}{}\subsection{License}\label{pic32mz__ef__curiosity_8h_License}
S\+P\+D\+X-\/\+License-\/\+Identifier\+: G\+P\+L-\/2.\+0-\/or-\/later

Copyright (C) 2010-\/2019 Oryx Embedded S\+A\+RL. All rights reserved.

This file is part of Cyclone\+T\+CP Open.

This program is free software; you can redistribute it and/or modify it under the terms of the G\+NU General Public License as published by the Free Software Foundation; either version 2 of the License, or (at your option) any later version.

This program is distributed in the hope that it will be useful, but W\+I\+T\+H\+O\+UT A\+NY W\+A\+R\+R\+A\+N\+TY; without even the implied warranty of M\+E\+R\+C\+H\+A\+N\+T\+A\+B\+I\+L\+I\+TY or F\+I\+T\+N\+E\+SS F\+OR A P\+A\+R\+T\+I\+C\+U\+L\+AR P\+U\+R\+P\+O\+SE. See the G\+NU General Public License for more details.

You should have received a copy of the G\+NU General Public License along with this program; if not, write to the Free Software Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-\/1301, U\+SA.

\begin{DoxyAuthor}{Author}
Oryx Embedded S\+A\+RL (www.\+oryx-\/embedded.\+com) 
\end{DoxyAuthor}
\begin{DoxyVersion}{Version}
1.\+9.\+6 
\end{DoxyVersion}


\subsection{Function Documentation}
\mbox{\Hypertarget{http__server__misc_8h_aebda8c10016605385b6958ff384013aa}\label{http__server__misc_8h_aebda8c10016605385b6958ff384013aa}} 
\index{http\+\_\+server\+\_\+misc.\+h@{http\+\_\+server\+\_\+misc.\+h}!http\+Comp\+Extension@{http\+Comp\+Extension}}
\index{http\+Comp\+Extension@{http\+Comp\+Extension}!http\+\_\+server\+\_\+misc.\+h@{http\+\_\+server\+\_\+misc.\+h}}
\subsubsection{\texorpdfstring{http\+Comp\+Extension()}{httpCompExtension()}}
{\footnotesize\ttfamily \hyperlink{compiler__port_8h_a812d16e5494522586b3784e55d479912}{bool\+\_\+t} http\+Comp\+Extension (\begin{DoxyParamCaption}\item[{const \hyperlink{compiler__port_8h_a40bb5262bf908c328fbcfbe5d29d0201}{char\+\_\+t} $\ast$}]{filename,  }\item[{const \hyperlink{compiler__port_8h_a40bb5262bf908c328fbcfbe5d29d0201}{char\+\_\+t} $\ast$}]{extension }\end{DoxyParamCaption})}



Compare filename extension. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em filename} & Filename whose extension is to be checked \\
\hline
\mbox{\tt in}  & {\em extension} & String defining the extension to be checked \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
T\+R\+UE is the filename matches the given extension, else F\+A\+L\+SE 
\end{DoxyReturn}


Definition at line 1091 of file http\+\_\+server\+\_\+misc.\+c.


\begin{DoxyCode}
1092 \{
1093    \hyperlink{compiler__port_8h_a12a1e9b3ce141648783a82445d02b58d}{uint\_t} \hyperlink{dhcpv6__common_8h_a5a648f5ec00c526b0dfa2df7a272c6c0}{n};
1094    \hyperlink{compiler__port_8h_a12a1e9b3ce141648783a82445d02b58d}{uint\_t} \hyperlink{ndp_8h_a6b3284d8492267a77ca46948daf5545e}{m};
1095 
1096    \textcolor{comment}{//Get the length of the specified filename}
1097    n = strlen(\hyperlink{tftp__common_8h_a054704ecfbf9f8eea80cd1d120b8cf62}{filename});
1098    \textcolor{comment}{//Get the length of the extension}
1099    m = strlen(extension);
1100 
1101    \textcolor{comment}{//Check the length of the filename}
1102    \textcolor{keywordflow}{if}(n < m)
1103       \textcolor{keywordflow}{return} \hyperlink{os__port_8h_aa93f0eb578d23995850d61f7d61c55c1}{FALSE};
1104 
1105    \textcolor{comment}{//Compare extensions}
1106    \textcolor{keywordflow}{if}(!\hyperlink{os__port__windows_8h_aba00036f71bb67f8600b239a39cf5ec9}{strncasecmp}(\hyperlink{tftp__common_8h_a054704ecfbf9f8eea80cd1d120b8cf62}{filename} + n - m, extension, m))
1107       \textcolor{keywordflow}{return} \hyperlink{os__port_8h_aa8cecfc5c5c054d2875c03e77b7be15d}{TRUE};
1108    \textcolor{keywordflow}{else}
1109       \textcolor{keywordflow}{return} \hyperlink{os__port_8h_aa93f0eb578d23995850d61f7d61c55c1}{FALSE};
1110 \}
\end{DoxyCode}
\mbox{\Hypertarget{http__server__misc_8h_a645bdf3cbf9b810deecbe5258790ae4d}\label{http__server__misc_8h_a645bdf3cbf9b810deecbe5258790ae4d}} 
\index{http\+\_\+server\+\_\+misc.\+h@{http\+\_\+server\+\_\+misc.\+h}!http\+Convert\+Array\+To\+Hex\+String@{http\+Convert\+Array\+To\+Hex\+String}}
\index{http\+Convert\+Array\+To\+Hex\+String@{http\+Convert\+Array\+To\+Hex\+String}!http\+\_\+server\+\_\+misc.\+h@{http\+\_\+server\+\_\+misc.\+h}}
\subsubsection{\texorpdfstring{http\+Convert\+Array\+To\+Hex\+String()}{httpConvertArrayToHexString()}}
{\footnotesize\ttfamily void http\+Convert\+Array\+To\+Hex\+String (\begin{DoxyParamCaption}\item[{const \hyperlink{stdint_8h_aba7bc1797add20fe3efdf37ced1182c5}{uint8\+\_\+t} $\ast$}]{input,  }\item[{size\+\_\+t}]{input\+Len,  }\item[{\hyperlink{compiler__port_8h_a40bb5262bf908c328fbcfbe5d29d0201}{char\+\_\+t} $\ast$}]{output }\end{DoxyParamCaption})}



Convert byte array to hex string. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em input} & Point to the byte array \\
\hline
\mbox{\tt in}  & {\em input\+Len} & Length of the byte array \\
\hline
\mbox{\tt out}  & {\em output} & N\+U\+L\+L-\/terminated string resulting from the conversion \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Error code 
\end{DoxyReturn}


Definition at line 1181 of file http\+\_\+server\+\_\+misc.\+c.


\begin{DoxyCode}
1183 \{
1184    \textcolor{keywordtype}{size\_t} i;
1185 
1186    \textcolor{comment}{//Hex conversion table}
1187    \textcolor{keyword}{static} \textcolor{keyword}{const} \hyperlink{compiler__port_8h_a40bb5262bf908c328fbcfbe5d29d0201}{char\_t} hexDigit[16] =
1188    \{
1189       \textcolor{charliteral}{'0'}, \textcolor{charliteral}{'1'}, \textcolor{charliteral}{'2'}, \textcolor{charliteral}{'3'}, \textcolor{charliteral}{'4'}, \textcolor{charliteral}{'5'}, \textcolor{charliteral}{'6'}, \textcolor{charliteral}{'7'},
1190       \textcolor{charliteral}{'8'}, \textcolor{charliteral}{'9'}, \textcolor{charliteral}{'a'}, \textcolor{charliteral}{'b'}, \textcolor{charliteral}{'c'}, \textcolor{charliteral}{'d'}, \textcolor{charliteral}{'e'}, \textcolor{charliteral}{'f'}
1191    \};
1192 
1193    \textcolor{comment}{//Process byte array}
1194    \textcolor{keywordflow}{for}(i = 0; i < inputLen; i++)
1195    \{
1196       \textcolor{comment}{//Convert upper nibble}
1197       output[i * 2] = hexDigit[(input[i] >> 4) & 0x0F];
1198       \textcolor{comment}{//Then convert lower nibble}
1199       output[i * 2 + 1] = hexDigit[input[i] & 0x0F];
1200    \}
1201 
1202    \textcolor{comment}{//Properly terminate the string with a NULL character}
1203    output[i * 2] = \textcolor{charliteral}{'\(\backslash\)0'};
1204 \}
\end{DoxyCode}
\mbox{\Hypertarget{http__server__misc_8h_acc3ffce89629a854bba3a6021debf0fd}\label{http__server__misc_8h_acc3ffce89629a854bba3a6021debf0fd}} 
\index{http\+\_\+server\+\_\+misc.\+h@{http\+\_\+server\+\_\+misc.\+h}!http\+Decode\+Percent\+Encoded\+String@{http\+Decode\+Percent\+Encoded\+String}}
\index{http\+Decode\+Percent\+Encoded\+String@{http\+Decode\+Percent\+Encoded\+String}!http\+\_\+server\+\_\+misc.\+h@{http\+\_\+server\+\_\+misc.\+h}}
\subsubsection{\texorpdfstring{http\+Decode\+Percent\+Encoded\+String()}{httpDecodePercentEncodedString()}}
{\footnotesize\ttfamily \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689c}{error\+\_\+t} http\+Decode\+Percent\+Encoded\+String (\begin{DoxyParamCaption}\item[{const \hyperlink{compiler__port_8h_a40bb5262bf908c328fbcfbe5d29d0201}{char\+\_\+t} $\ast$}]{input,  }\item[{\hyperlink{compiler__port_8h_a40bb5262bf908c328fbcfbe5d29d0201}{char\+\_\+t} $\ast$}]{output,  }\item[{size\+\_\+t}]{output\+Size }\end{DoxyParamCaption})}



Decode a percent-\/encoded string. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em input} & N\+U\+L\+L-\/terminated string to be decoded \\
\hline
\mbox{\tt out}  & {\em output} & N\+U\+L\+L-\/terminated string resulting from the decoding process \\
\hline
\mbox{\tt in}  & {\em output\+Size} & Size of the output buffer in bytes \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Error code 
\end{DoxyReturn}


Definition at line 1121 of file http\+\_\+server\+\_\+misc.\+c.


\begin{DoxyCode}
1123 \{
1124    \textcolor{keywordtype}{size\_t} i;
1125    \hyperlink{compiler__port_8h_a40bb5262bf908c328fbcfbe5d29d0201}{char\_t} buffer[3];
1126 
1127    \textcolor{comment}{//Check parameters}
1128    \textcolor{keywordflow}{if}(input == \hyperlink{group__BSPDefine_ga070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL} || output == \hyperlink{group__BSPDefine_ga070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL})
1129       \textcolor{keywordflow}{return} \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689caeae4b12e06d727d085f75f79a820f2e8}{ERROR\_INVALID\_PARAMETER};
1130 
1131    \textcolor{comment}{//Decode the percent-encoded string}
1132    \textcolor{keywordflow}{for}(i = 0; *input != \textcolor{charliteral}{'\(\backslash\)0'} && i < outputSize; i++)
1133    \{
1134       \textcolor{comment}{//Check current character}
1135       \textcolor{keywordflow}{if}(*input == \textcolor{charliteral}{'+'})
1136       \{
1137          \textcolor{comment}{//Replace '+' characters with spaces}
1138          output[i] = \textcolor{charliteral}{' '};
1139          \textcolor{comment}{//Advance data pointer}
1140          input++;
1141       \}
1142       \textcolor{keywordflow}{else} \textcolor{keywordflow}{if}(input[0] == \textcolor{charliteral}{'%'} && input[1] != \textcolor{charliteral}{'\(\backslash\)0'} && input[2] != \textcolor{charliteral}{'\(\backslash\)0'})
1143       \{
1144          \textcolor{comment}{//Process percent-encoded characters}
1145          buffer[0] = input[1];
1146          buffer[1] = input[2];
1147          buffer[2] = \textcolor{charliteral}{'\(\backslash\)0'};
1148          \textcolor{comment}{//String to integer conversion}
1149          output[i] = (\hyperlink{stdint_8h_aba7bc1797add20fe3efdf37ced1182c5}{uint8\_t}) strtoul(buffer, \hyperlink{group__BSPDefine_ga070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL}, 16);
1150          \textcolor{comment}{//Advance data pointer}
1151          input += 3;
1152       \}
1153       \textcolor{keywordflow}{else}
1154       \{
1155          \textcolor{comment}{//Copy any other characters}
1156          output[i] = *input;
1157          \textcolor{comment}{//Advance data pointer}
1158          input++;
1159       \}
1160    \}
1161 
1162    \textcolor{comment}{//Check whether the output buffer runs out of space}
1163    \textcolor{keywordflow}{if}(i >= outputSize)
1164       \textcolor{keywordflow}{return} \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689cae9be6449970fca5714ab9957b16562a5}{ERROR\_FAILURE};
1165 
1166    \textcolor{comment}{//Properly terminate the resulting string}
1167    output[i] = \textcolor{charliteral}{'\(\backslash\)0'};
1168    \textcolor{comment}{//Successful processing}
1169    \textcolor{keywordflow}{return} \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689cabf350750d0d4fabd8954c0f1e9bbae94}{NO\_ERROR};
1170 \}
\end{DoxyCode}
\mbox{\Hypertarget{http__server__misc_8h_a7553d42376343d871d04ac7208deeda6}\label{http__server__misc_8h_a7553d42376343d871d04ac7208deeda6}} 
\index{http\+\_\+server\+\_\+misc.\+h@{http\+\_\+server\+\_\+misc.\+h}!http\+Format\+Response\+Header@{http\+Format\+Response\+Header}}
\index{http\+Format\+Response\+Header@{http\+Format\+Response\+Header}!http\+\_\+server\+\_\+misc.\+h@{http\+\_\+server\+\_\+misc.\+h}}
\subsubsection{\texorpdfstring{http\+Format\+Response\+Header()}{httpFormatResponseHeader()}}
{\footnotesize\ttfamily \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689c}{error\+\_\+t} http\+Format\+Response\+Header (\begin{DoxyParamCaption}\item[{\hyperlink{http__server_8h_a3506ecffde998ab02629dca83587d2f9}{Http\+Connection} $\ast$}]{connection,  }\item[{\hyperlink{compiler__port_8h_a40bb5262bf908c328fbcfbe5d29d0201}{char\+\_\+t} $\ast$}]{buffer }\end{DoxyParamCaption})}



Format H\+T\+TP response header. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em connection} & Structure representing an H\+T\+TP connection \\
\hline
\mbox{\tt out}  & {\em buffer} & Pointer to the buffer where to format the H\+T\+TP header \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Error code 
\end{DoxyReturn}


Definition at line 780 of file http\+\_\+server\+\_\+misc.\+c.


\begin{DoxyCode}
781 \{
782    \hyperlink{compiler__port_8h_a12a1e9b3ce141648783a82445d02b58d}{uint\_t} i;
783    \hyperlink{compiler__port_8h_a40bb5262bf908c328fbcfbe5d29d0201}{char\_t} *\hyperlink{ndp_8h_a6519522ad9a6f45e7a8d25d31392a977}{p};
784 
785    \textcolor{comment}{//HTTP version 0.9?}
786    \textcolor{keywordflow}{if}(connection->response.version == \hyperlink{http__common_8h_ac870fd261da652aee69937751c6f7e7fabca6852c70f3b9617834ca911ee9e737}{HTTP\_VERSION\_0\_9})
787    \{
788       \textcolor{comment}{//Enforce default parameters}
789       connection->response.keepAlive = \hyperlink{os__port_8h_aa93f0eb578d23995850d61f7d61c55c1}{FALSE};
790       connection->response.chunkedEncoding = \hyperlink{os__port_8h_aa93f0eb578d23995850d61f7d61c55c1}{FALSE};
791       \textcolor{comment}{//The size of the response body is not limited}
792       connection->response.byteCount = UINT\_MAX;
793       \textcolor{comment}{//We are done since HTTP 0.9 does not support Full-Response format}
794       \textcolor{keywordflow}{return} \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689cabf350750d0d4fabd8954c0f1e9bbae94}{NO\_ERROR};
795    \}
796 
797    \textcolor{comment}{//When generating dynamic web pages with HTTP 1.0, the only way to}
798    \textcolor{comment}{//signal the end of the body is to close the connection}
799    \textcolor{keywordflow}{if}(connection->response.version == \hyperlink{http__common_8h_ac870fd261da652aee69937751c6f7e7fa3932308db22120ce049dd60f3430b814}{HTTP\_VERSION\_1\_0} &&
800       connection->response.chunkedEncoding)
801    \{
802       \textcolor{comment}{//Make the connection non persistent}
803       connection->response.keepAlive = \hyperlink{os__port_8h_aa93f0eb578d23995850d61f7d61c55c1}{FALSE};
804       connection->response.chunkedEncoding = \hyperlink{os__port_8h_aa93f0eb578d23995850d61f7d61c55c1}{FALSE};
805       \textcolor{comment}{//The size of the response body is not limited}
806       connection->response.byteCount = UINT\_MAX;
807    \}
808    \textcolor{keywordflow}{else}
809    \{
810       \textcolor{comment}{//Limit the size of the response body}
811       connection->response.byteCount = connection->response.contentLength;
812    \}
813 
814    \textcolor{comment}{//Point to the beginning of the buffer}
815    p = buffer;
816 
817    \textcolor{comment}{//The first line of a response message is the Status-Line, consisting}
818    \textcolor{comment}{//of the protocol version followed by a numeric status code and its}
819    \textcolor{comment}{//associated textual phrase}
820    p += sprintf(p, \textcolor{stringliteral}{"HTTP/%u.%u %u "}, \hyperlink{os__port_8h_aeb61a4e8fff2f4624a632a3189cbd3a0}{MSB}(connection->response.version),
821       \hyperlink{os__port_8h_a34a3aa6cbadec6a80ab1eae8efd0083d}{LSB}(connection->response.version), connection->response.statusCode);
822 
823    \textcolor{comment}{//Retrieve the Reason-Phrase that corresponds to the Status-Code}
824    \textcolor{keywordflow}{for}(i = 0; i < \hyperlink{os__port_8h_aa1394a41d43c0f3fd30febe41c7bb340}{arraysize}(\hyperlink{http__server__misc_8c_a9ff5eea79db54ba8dc0a3900e4c1d023}{statusCodeList}); i++)
825    \{
826       \textcolor{comment}{//Check the status code}
827       \textcolor{keywordflow}{if}(\hyperlink{http__server__misc_8c_a9ff5eea79db54ba8dc0a3900e4c1d023}{statusCodeList}[i].\hyperlink{dtls__misc_8h_a74bce8e92ccabd0c885447114a48b80e}{value} == connection->response.statusCode)
828       \{
829          \textcolor{comment}{//Append the textual phrase to the Status-Line}
830          p += sprintf(p, \hyperlink{http__server__misc_8c_a9ff5eea79db54ba8dc0a3900e4c1d023}{statusCodeList}[i].\hyperlink{chap_8h_a52f19d36a71e9b8ddea38fe00c291181}{message});
831          \textcolor{comment}{//Break the loop and continue processing}
832          \textcolor{keywordflow}{break};
833       \}
834    \}
835 
836    \textcolor{comment}{//Properly terminate the Status-Line}
837    p += sprintf(p, \textcolor{stringliteral}{"\(\backslash\)r\(\backslash\)n"});
838 
839    \textcolor{comment}{//Valid location?}
840    \textcolor{keywordflow}{if}(connection->response.location != \hyperlink{group__BSPDefine_ga070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL})
841    \{
842       \textcolor{comment}{//Set Location field}
843       p += sprintf(p, \textcolor{stringliteral}{"Location: %s\(\backslash\)r\(\backslash\)n"}, connection->response.location);
844    \}
845 
846    \textcolor{comment}{//Persistent connection?}
847    \textcolor{keywordflow}{if}(connection->response.keepAlive)
848    \{
849       \textcolor{comment}{//Set Connection field}
850       p += sprintf(p, \textcolor{stringliteral}{"Connection: keep-alive\(\backslash\)r\(\backslash\)n"});
851 
852       \textcolor{comment}{//Set Keep-Alive field}
853       p += sprintf(p, \textcolor{stringliteral}{"Keep-Alive: timeout=%u, max=%u\(\backslash\)r\(\backslash\)n"},
854          \hyperlink{http__server_8h_ab8b701829c3d98c6123192de3e2a0115}{HTTP\_SERVER\_IDLE\_TIMEOUT} / 1000, 
      \hyperlink{http__server_8h_aabb9bddb4d22875898d5d26201249375}{HTTP\_SERVER\_MAX\_REQUESTS});
855    \}
856    \textcolor{keywordflow}{else}
857    \{
858       \textcolor{comment}{//Set Connection field}
859       p += sprintf(p, \textcolor{stringliteral}{"Connection: close\(\backslash\)r\(\backslash\)n"});
860    \}
861 
862    \textcolor{comment}{//Specify the caching policy}
863    \textcolor{keywordflow}{if}(connection->response.noCache)
864    \{
865       \textcolor{comment}{//Set Pragma field}
866       p += sprintf(p, \textcolor{stringliteral}{"Pragma: no-cache\(\backslash\)r\(\backslash\)n"});
867       \textcolor{comment}{//Set Cache-Control field}
868       p += sprintf(p, \textcolor{stringliteral}{"Cache-Control: no-store, no-cache, must-revalidate\(\backslash\)r\(\backslash\)n"});
869       p += sprintf(p, \textcolor{stringliteral}{"Cache-Control: max-age=0, post-check=0, pre-check=0\(\backslash\)r\(\backslash\)n"});
870    \}
871    \textcolor{keywordflow}{else} \textcolor{keywordflow}{if}(connection->response.maxAge != 0)
872    \{
873       \textcolor{comment}{//Set Cache-Control field}
874       p += sprintf(p, \textcolor{stringliteral}{"Cache-Control: max-age=%u\(\backslash\)r\(\backslash\)n"}, connection->response.maxAge);
875    \}
876 
877 \textcolor{preprocessor}{#if (HTTP\_SERVER\_BASIC\_AUTH\_SUPPORT == ENABLED || HTTP\_SERVER\_DIGEST\_AUTH\_SUPPORT == ENABLED)}
878    \textcolor{comment}{//Check whether authentication is required}
879    \textcolor{keywordflow}{if}(connection->response.auth.mode != \hyperlink{http__common_8h_ad435f9e57a3351beaec6fc809eff4f31a9136cfe14d0dc1985d1e4d93acbc44d7}{HTTP\_AUTH\_MODE\_NONE})
880    \{
881       \textcolor{comment}{//Add WWW-Authenticate header field}
882       p += \hyperlink{http__server__auth_8c_aa50426334c1e185f62b4436afcddbe6c}{httpAddAuthenticateField}(connection, p);
883    \}
884 \textcolor{preprocessor}{#endif}
885 
886 \textcolor{preprocessor}{#if (HTTP\_SERVER\_COOKIE\_SUPPORT == ENABLED)}
887    \textcolor{comment}{//Valid cookie}
888    \textcolor{keywordflow}{if}(connection->response.setCookie[0] != \textcolor{charliteral}{'\(\backslash\)0'})
889    \{
890       \textcolor{comment}{//Add Set-Cookie header field}
891       p += sprintf(p, \textcolor{stringliteral}{"Set-Cookie: %s\(\backslash\)r\(\backslash\)n"}, connection->response.setCookie);
892    \}
893 \textcolor{preprocessor}{#endif}
894 
895    \textcolor{comment}{//Valid content type?}
896    \textcolor{keywordflow}{if}(connection->response.contentType != \hyperlink{group__BSPDefine_ga070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL})
897    \{
898       \textcolor{comment}{//Content type}
899       p += sprintf(p, \textcolor{stringliteral}{"Content-Type: %s\(\backslash\)r\(\backslash\)n"}, connection->response.contentType);
900    \}
901 
902 \textcolor{preprocessor}{#if (HTTP\_SERVER\_GZIP\_TYPE\_SUPPORT == ENABLED)}
903    \textcolor{comment}{//Use gzip encoding?}
904    \textcolor{keywordflow}{if}(connection->response.gzipEncoding)
905    \{
906       \textcolor{comment}{//Set Transfer-Encoding field}
907       p += sprintf(p, \textcolor{stringliteral}{"Content-Encoding: gzip\(\backslash\)r\(\backslash\)n"});
908    \}
909 \textcolor{preprocessor}{#endif}
910 
911    \textcolor{comment}{//Use chunked encoding transfer?}
912    \textcolor{keywordflow}{if}(connection->response.chunkedEncoding)
913    \{
914       \textcolor{comment}{//Set Transfer-Encoding field}
915       p += sprintf(p, \textcolor{stringliteral}{"Transfer-Encoding: chunked\(\backslash\)r\(\backslash\)n"});
916    \}
917    \textcolor{comment}{//Persistent connection?}
918    \textcolor{keywordflow}{else} \textcolor{keywordflow}{if}(connection->response.keepAlive)
919    \{
920       \textcolor{comment}{//Set Content-Length field}
921       p += sprintf(p, \textcolor{stringliteral}{"Content-Length: %"} \hyperlink{compiler__port_8h_a2b7b0557dc6cd786df02dafbb51f5292}{PRIuSIZE} \textcolor{stringliteral}{"\(\backslash\)r\(\backslash\)n"}, connection->response.contentLength);
922    \}
923 
924    \textcolor{comment}{//Terminate the header with an empty line}
925    p += sprintf(p, \textcolor{stringliteral}{"\(\backslash\)r\(\backslash\)n"});
926 
927    \textcolor{comment}{//Successful processing}
928    \textcolor{keywordflow}{return} \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689cabf350750d0d4fabd8954c0f1e9bbae94}{NO\_ERROR};
929 \}
\end{DoxyCode}
\mbox{\Hypertarget{http__server__misc_8h_a34edbde4371909896b60846f2545fbaa}\label{http__server__misc_8h_a34edbde4371909896b60846f2545fbaa}} 
\index{http\+\_\+server\+\_\+misc.\+h@{http\+\_\+server\+\_\+misc.\+h}!http\+Get\+Absolute\+Path@{http\+Get\+Absolute\+Path}}
\index{http\+Get\+Absolute\+Path@{http\+Get\+Absolute\+Path}!http\+\_\+server\+\_\+misc.\+h@{http\+\_\+server\+\_\+misc.\+h}}
\subsubsection{\texorpdfstring{http\+Get\+Absolute\+Path()}{httpGetAbsolutePath()}}
{\footnotesize\ttfamily void http\+Get\+Absolute\+Path (\begin{DoxyParamCaption}\item[{\hyperlink{http__server_8h_a3506ecffde998ab02629dca83587d2f9}{Http\+Connection} $\ast$}]{connection,  }\item[{const \hyperlink{compiler__port_8h_a40bb5262bf908c328fbcfbe5d29d0201}{char\+\_\+t} $\ast$}]{relative,  }\item[{\hyperlink{compiler__port_8h_a40bb5262bf908c328fbcfbe5d29d0201}{char\+\_\+t} $\ast$}]{absolute,  }\item[{size\+\_\+t}]{max\+Len }\end{DoxyParamCaption})}



Retrieve the full pathname to the specified resource. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em connection} & Structure representing an H\+T\+TP connection \\
\hline
\mbox{\tt in}  & {\em relative} & String containing the relative path to the resource \\
\hline
\mbox{\tt out}  & {\em absolute} & Resulting string containing the absolute path \\
\hline
\mbox{\tt in}  & {\em max\+Len} & Maximum acceptable path length \\
\hline
\end{DoxyParams}


Definition at line 1070 of file http\+\_\+server\+\_\+misc.\+c.


\begin{DoxyCode}
1072 \{
1073    \textcolor{comment}{//Copy the root directory}
1074    strcpy(absolute, connection->settings->rootDirectory);
1075 
1076    \textcolor{comment}{//Append the specified path}
1077    \hyperlink{path_8c_a38625df4e9abd106fb932b8ff308adc3}{pathCombine}(absolute, relative, maxLen);
1078 
1079    \textcolor{comment}{//Clean the resulting path}
1080    \hyperlink{path_8c_a64519f81386b6ece797fb51f06e3052d}{pathCanonicalize}(absolute);
1081 \}
\end{DoxyCode}
\mbox{\Hypertarget{http__server__misc_8h_aafe1d6fec1869fb5f889d465c19f3306}\label{http__server__misc_8h_aafe1d6fec1869fb5f889d465c19f3306}} 
\index{http\+\_\+server\+\_\+misc.\+h@{http\+\_\+server\+\_\+misc.\+h}!http\+Init\+Response\+Header@{http\+Init\+Response\+Header}}
\index{http\+Init\+Response\+Header@{http\+Init\+Response\+Header}!http\+\_\+server\+\_\+misc.\+h@{http\+\_\+server\+\_\+misc.\+h}}
\subsubsection{\texorpdfstring{http\+Init\+Response\+Header()}{httpInitResponseHeader()}}
{\footnotesize\ttfamily void http\+Init\+Response\+Header (\begin{DoxyParamCaption}\item[{\hyperlink{http__server_8h_a3506ecffde998ab02629dca83587d2f9}{Http\+Connection} $\ast$}]{connection }\end{DoxyParamCaption})}



Initialize response header. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em connection} & Structure representing an H\+T\+TP connection \\
\hline
\end{DoxyParams}


Definition at line 747 of file http\+\_\+server\+\_\+misc.\+c.


\begin{DoxyCode}
748 \{
749    \textcolor{comment}{//Default HTTP header fields}
750    connection->response.version = connection->request.version;
751    connection->response.statusCode = 200;
752    connection->response.noCache = \hyperlink{os__port_8h_aa93f0eb578d23995850d61f7d61c55c1}{FALSE};
753    connection->response.maxAge = 0;
754    connection->response.location = \hyperlink{group__BSPDefine_ga070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL};
755    connection->response.contentType = \hyperlink{mime_8c_a9e79374594b83b65457d42c5589db7e0}{mimeGetType}(connection->request.uri);
756    connection->response.chunkedEncoding = \hyperlink{os__port_8h_aa8cecfc5c5c054d2875c03e77b7be15d}{TRUE};
757 
758 \textcolor{preprocessor}{#if (HTTP\_SERVER\_GZIP\_TYPE\_SUPPORT == ENABLED)}
759    \textcolor{comment}{//Do not use gzip encoding}
760    connection->response.gzipEncoding = \hyperlink{os__port_8h_aa93f0eb578d23995850d61f7d61c55c1}{FALSE};
761 \textcolor{preprocessor}{#endif}
762 
763 \textcolor{preprocessor}{#if (HTTP\_SERVER\_PERSISTENT\_CONN\_SUPPORT == ENABLED)}
764    \textcolor{comment}{//Persistent connections are accepted}
765    connection->response.keepAlive = connection->request.keepAlive;
766 \textcolor{preprocessor}{#else}
767    \textcolor{comment}{//Connections are not persistent by default}
768    connection->response.keepAlive = \hyperlink{os__port_8h_aa93f0eb578d23995850d61f7d61c55c1}{FALSE};
769 \textcolor{preprocessor}{#endif}
770 \}
\end{DoxyCode}
\mbox{\Hypertarget{http__server__misc_8h_a98227843b74e7daa4372cdb0db1355fe}\label{http__server__misc_8h_a98227843b74e7daa4372cdb0db1355fe}} 
\index{http\+\_\+server\+\_\+misc.\+h@{http\+\_\+server\+\_\+misc.\+h}!http\+Parse\+Accept\+Encoding\+Field@{http\+Parse\+Accept\+Encoding\+Field}}
\index{http\+Parse\+Accept\+Encoding\+Field@{http\+Parse\+Accept\+Encoding\+Field}!http\+\_\+server\+\_\+misc.\+h@{http\+\_\+server\+\_\+misc.\+h}}
\subsubsection{\texorpdfstring{http\+Parse\+Accept\+Encoding\+Field()}{httpParseAcceptEncodingField()}}
{\footnotesize\ttfamily void http\+Parse\+Accept\+Encoding\+Field (\begin{DoxyParamCaption}\item[{\hyperlink{http__server_8h_a3506ecffde998ab02629dca83587d2f9}{Http\+Connection} $\ast$}]{connection,  }\item[{\hyperlink{compiler__port_8h_a40bb5262bf908c328fbcfbe5d29d0201}{char\+\_\+t} $\ast$}]{value }\end{DoxyParamCaption})}



Parse Accept-\/\+Encoding header field. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em connection} & Structure representing an H\+T\+TP connection \\
\hline
\mbox{\tt in}  & {\em value} & Accept-\/\+Encoding field value \\
\hline
\end{DoxyParams}


Definition at line 616 of file http\+\_\+server\+\_\+misc.\+c.


\begin{DoxyCode}
618 \{
619 \textcolor{preprocessor}{#if (HTTP\_SERVER\_GZIP\_TYPE\_SUPPORT == ENABLED)}
620    \hyperlink{compiler__port_8h_a40bb5262bf908c328fbcfbe5d29d0201}{char\_t} *\hyperlink{ndp_8h_a6519522ad9a6f45e7a8d25d31392a977}{p};
621    \hyperlink{compiler__port_8h_a40bb5262bf908c328fbcfbe5d29d0201}{char\_t} *\hyperlink{coap__common_8h_aaa0137cdddb344591e20a2930a1ba54d}{token};
622 
623    \textcolor{comment}{//Get the first value of the list}
624    token = \hyperlink{strtok__r_8c_af18c3fca5cc30bc1313728d45c031ae9}{strtok\_r}(\hyperlink{dtls__misc_8h_a74bce8e92ccabd0c885447114a48b80e}{value}, \textcolor{stringliteral}{","}, &p);
625 
626    \textcolor{comment}{//Parse the comma-separated list}
627    \textcolor{keywordflow}{while}(token != \hyperlink{group__BSPDefine_ga070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL})
628    \{
629       \textcolor{comment}{//Trim whitespace characters}
630       \hyperlink{dtls__misc_8h_a74bce8e92ccabd0c885447114a48b80e}{value} = \hyperlink{str_8c_ade9441b268416af6b024eb2ba3a5847e}{strTrimWhitespace}(token);
631 
632       \textcolor{comment}{//Check current value}
633       \textcolor{keywordflow}{if}(!\hyperlink{os__port__windows_8h_ac99ec3f1036620727a68aa8c25a8963c}{strcasecmp}(\hyperlink{dtls__misc_8h_a74bce8e92ccabd0c885447114a48b80e}{value}, \textcolor{stringliteral}{"gzip"}))
634       \{
635          \textcolor{comment}{//gzip compression is supported}
636          connection->request.acceptGzipEncoding = \hyperlink{os__port_8h_aa8cecfc5c5c054d2875c03e77b7be15d}{TRUE};
637       \}
638 
639       \textcolor{comment}{//Get next value}
640       token = \hyperlink{strtok__r_8c_af18c3fca5cc30bc1313728d45c031ae9}{strtok\_r}(\hyperlink{group__BSPDefine_ga070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL}, \textcolor{stringliteral}{","}, &p);
641    \}
642 \textcolor{preprocessor}{#endif}
643 \}
\end{DoxyCode}
\mbox{\Hypertarget{http__server__misc_8h_acc10352f4c0ae57fc3f05efff219de63}\label{http__server__misc_8h_acc10352f4c0ae57fc3f05efff219de63}} 
\index{http\+\_\+server\+\_\+misc.\+h@{http\+\_\+server\+\_\+misc.\+h}!http\+Parse\+Connection\+Field@{http\+Parse\+Connection\+Field}}
\index{http\+Parse\+Connection\+Field@{http\+Parse\+Connection\+Field}!http\+\_\+server\+\_\+misc.\+h@{http\+\_\+server\+\_\+misc.\+h}}
\subsubsection{\texorpdfstring{http\+Parse\+Connection\+Field()}{httpParseConnectionField()}}
{\footnotesize\ttfamily void http\+Parse\+Connection\+Field (\begin{DoxyParamCaption}\item[{\hyperlink{http__server_8h_a3506ecffde998ab02629dca83587d2f9}{Http\+Connection} $\ast$}]{connection,  }\item[{\hyperlink{compiler__port_8h_a40bb5262bf908c328fbcfbe5d29d0201}{char\+\_\+t} $\ast$}]{value }\end{DoxyParamCaption})}



Parse Connection header field. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em connection} & Structure representing an H\+T\+TP connection \\
\hline
\mbox{\tt in}  & {\em value} & Connection field value \\
\hline
\end{DoxyParams}


Definition at line 501 of file http\+\_\+server\+\_\+misc.\+c.


\begin{DoxyCode}
503 \{
504    \hyperlink{compiler__port_8h_a40bb5262bf908c328fbcfbe5d29d0201}{char\_t} *\hyperlink{ndp_8h_a6519522ad9a6f45e7a8d25d31392a977}{p};
505    \hyperlink{compiler__port_8h_a40bb5262bf908c328fbcfbe5d29d0201}{char\_t} *\hyperlink{coap__common_8h_aaa0137cdddb344591e20a2930a1ba54d}{token};
506 
507    \textcolor{comment}{//Get the first value of the list}
508    token = \hyperlink{strtok__r_8c_af18c3fca5cc30bc1313728d45c031ae9}{strtok\_r}(\hyperlink{dtls__misc_8h_a74bce8e92ccabd0c885447114a48b80e}{value}, \textcolor{stringliteral}{","}, &p);
509 
510    \textcolor{comment}{//Parse the comma-separated list}
511    \textcolor{keywordflow}{while}(token != \hyperlink{group__BSPDefine_ga070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL})
512    \{
513       \textcolor{comment}{//Trim whitespace characters}
514       \hyperlink{dtls__misc_8h_a74bce8e92ccabd0c885447114a48b80e}{value} = \hyperlink{str_8c_ade9441b268416af6b024eb2ba3a5847e}{strTrimWhitespace}(token);
515 
516       \textcolor{comment}{//Check current value}
517       \textcolor{keywordflow}{if}(!\hyperlink{os__port__windows_8h_ac99ec3f1036620727a68aa8c25a8963c}{strcasecmp}(\hyperlink{dtls__misc_8h_a74bce8e92ccabd0c885447114a48b80e}{value}, \textcolor{stringliteral}{"keep-alive"}))
518       \{
519          \textcolor{comment}{//The connection is persistent}
520          connection->request.keepAlive = \hyperlink{os__port_8h_aa8cecfc5c5c054d2875c03e77b7be15d}{TRUE};
521       \}
522       \textcolor{keywordflow}{else} \textcolor{keywordflow}{if}(!\hyperlink{os__port__windows_8h_ac99ec3f1036620727a68aa8c25a8963c}{strcasecmp}(\hyperlink{dtls__misc_8h_a74bce8e92ccabd0c885447114a48b80e}{value}, \textcolor{stringliteral}{"close"}))
523       \{
524          \textcolor{comment}{//The connection will be closed after completion of the response}
525          connection->request.keepAlive = \hyperlink{os__port_8h_aa93f0eb578d23995850d61f7d61c55c1}{FALSE};
526       \}
527 \textcolor{preprocessor}{#if (HTTP\_SERVER\_WEB\_SOCKET\_SUPPORT == ENABLED)}
528       \textcolor{keywordflow}{else} \textcolor{keywordflow}{if}(!\hyperlink{os__port__windows_8h_ac99ec3f1036620727a68aa8c25a8963c}{strcasecmp}(\hyperlink{dtls__misc_8h_a74bce8e92ccabd0c885447114a48b80e}{value}, \textcolor{stringliteral}{"upgrade"}))
529       \{
530          \textcolor{comment}{//Upgrade the connection}
531          connection->request.connectionUpgrade = \hyperlink{os__port_8h_aa8cecfc5c5c054d2875c03e77b7be15d}{TRUE};
532       \}
533 \textcolor{preprocessor}{#endif}
534 
535       \textcolor{comment}{//Get next value}
536       token = \hyperlink{strtok__r_8c_af18c3fca5cc30bc1313728d45c031ae9}{strtok\_r}(\hyperlink{group__BSPDefine_ga070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL}, \textcolor{stringliteral}{","}, &p);
537    \}
538 \}
\end{DoxyCode}
\mbox{\Hypertarget{http__server__misc_8h_abbc813884f86b0ebe404ad88dc810137}\label{http__server__misc_8h_abbc813884f86b0ebe404ad88dc810137}} 
\index{http\+\_\+server\+\_\+misc.\+h@{http\+\_\+server\+\_\+misc.\+h}!http\+Parse\+Content\+Type\+Field@{http\+Parse\+Content\+Type\+Field}}
\index{http\+Parse\+Content\+Type\+Field@{http\+Parse\+Content\+Type\+Field}!http\+\_\+server\+\_\+misc.\+h@{http\+\_\+server\+\_\+misc.\+h}}
\subsubsection{\texorpdfstring{http\+Parse\+Content\+Type\+Field()}{httpParseContentTypeField()}}
{\footnotesize\ttfamily void http\+Parse\+Content\+Type\+Field (\begin{DoxyParamCaption}\item[{\hyperlink{http__server_8h_a3506ecffde998ab02629dca83587d2f9}{Http\+Connection} $\ast$}]{connection,  }\item[{\hyperlink{compiler__port_8h_a40bb5262bf908c328fbcfbe5d29d0201}{char\+\_\+t} $\ast$}]{value }\end{DoxyParamCaption})}



Parse Content-\/\+Type header field. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em connection} & Structure representing an H\+T\+TP connection \\
\hline
\mbox{\tt in}  & {\em value} & Content-\/\+Type field value \\
\hline
\end{DoxyParams}


Definition at line 547 of file http\+\_\+server\+\_\+misc.\+c.


\begin{DoxyCode}
549 \{
550 \textcolor{preprocessor}{#if (HTTP\_SERVER\_MULTIPART\_TYPE\_SUPPORT == ENABLED)}
551    \textcolor{keywordtype}{size\_t} \hyperlink{dhcpv6__common_8h_a5a648f5ec00c526b0dfa2df7a272c6c0}{n};
552    \hyperlink{compiler__port_8h_a40bb5262bf908c328fbcfbe5d29d0201}{char\_t} *\hyperlink{ndp_8h_a6519522ad9a6f45e7a8d25d31392a977}{p};
553    \hyperlink{compiler__port_8h_a40bb5262bf908c328fbcfbe5d29d0201}{char\_t} *\hyperlink{coap__common_8h_aaa0137cdddb344591e20a2930a1ba54d}{token};
554 
555    \textcolor{comment}{//Retrieve type}
556    token = \hyperlink{strtok__r_8c_af18c3fca5cc30bc1313728d45c031ae9}{strtok\_r}(\hyperlink{dtls__misc_8h_a74bce8e92ccabd0c885447114a48b80e}{value}, \textcolor{stringliteral}{"/"}, &p);
557    \textcolor{comment}{//Any parsing error?}
558    \textcolor{keywordflow}{if}(token == \hyperlink{group__BSPDefine_ga070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL})
559       \textcolor{keywordflow}{return};
560 
561    \textcolor{comment}{//The boundary parameter makes sense only for the multipart content-type}
562    \textcolor{keywordflow}{if}(!\hyperlink{os__port__windows_8h_ac99ec3f1036620727a68aa8c25a8963c}{strcasecmp}(token, \textcolor{stringliteral}{"multipart"}))
563    \{
564       \textcolor{comment}{//Skip subtype}
565       token = \hyperlink{strtok__r_8c_af18c3fca5cc30bc1313728d45c031ae9}{strtok\_r}(\hyperlink{group__BSPDefine_ga070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL}, \textcolor{stringliteral}{";"}, &p);
566       \textcolor{comment}{//Any parsing error?}
567       \textcolor{keywordflow}{if}(token == \hyperlink{group__BSPDefine_ga070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL})
568          \textcolor{keywordflow}{return};
569 
570       \textcolor{comment}{//Retrieve parameter name}
571       token = \hyperlink{strtok__r_8c_af18c3fca5cc30bc1313728d45c031ae9}{strtok\_r}(\hyperlink{group__BSPDefine_ga070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL}, \textcolor{stringliteral}{"="}, &p);
572       \textcolor{comment}{//Any parsing error?}
573       \textcolor{keywordflow}{if}(token == \hyperlink{group__BSPDefine_ga070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL})
574          \textcolor{keywordflow}{return};
575 
576       \textcolor{comment}{//Trim whitespace characters}
577       token = \hyperlink{str_8c_ade9441b268416af6b024eb2ba3a5847e}{strTrimWhitespace}(token);
578 
579       \textcolor{comment}{//Check parameter name}
580       \textcolor{keywordflow}{if}(!\hyperlink{os__port__windows_8h_ac99ec3f1036620727a68aa8c25a8963c}{strcasecmp}(token, \textcolor{stringliteral}{"boundary"}))
581       \{
582          \textcolor{comment}{//Retrieve parameter value}
583          token = \hyperlink{strtok__r_8c_af18c3fca5cc30bc1313728d45c031ae9}{strtok\_r}(\hyperlink{group__BSPDefine_ga070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL}, \textcolor{stringliteral}{";"}, &p);
584          \textcolor{comment}{//Any parsing error?}
585          \textcolor{keywordflow}{if}(token == \hyperlink{group__BSPDefine_ga070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL})
586             \textcolor{keywordflow}{return};
587 
588          \textcolor{comment}{//Trim whitespace characters}
589          token = \hyperlink{str_8c_ade9441b268416af6b024eb2ba3a5847e}{strTrimWhitespace}(token);
590          \textcolor{comment}{//Get the length of the boundary string}
591          n = strlen(token);
592 
593          \textcolor{comment}{//Check the length of the boundary string}
594          \textcolor{keywordflow}{if}(n < \hyperlink{http__server_8h_a1ecbcd512cdc74212d1ab9c4c8c8edde}{HTTP\_SERVER\_BOUNDARY\_MAX\_LEN})
595          \{
596             \textcolor{comment}{//Copy the boundary string}
597             strncpy(connection->request.boundary, token, n);
598             \textcolor{comment}{//Properly terminate the string}
599             connection->request.boundary[\hyperlink{dhcpv6__common_8h_a5a648f5ec00c526b0dfa2df7a272c6c0}{n}] = \textcolor{charliteral}{'\(\backslash\)0'};
600 
601             \textcolor{comment}{//Save the length of the boundary string}
602             connection->request.boundaryLength = \hyperlink{dhcpv6__common_8h_a5a648f5ec00c526b0dfa2df7a272c6c0}{n};
603          \}
604       \}
605    \}
606 \textcolor{preprocessor}{#endif}
607 \}
\end{DoxyCode}
\mbox{\Hypertarget{http__server__misc_8h_a9f1254a4277b1e87e76a054bafae65db}\label{http__server__misc_8h_a9f1254a4277b1e87e76a054bafae65db}} 
\index{http\+\_\+server\+\_\+misc.\+h@{http\+\_\+server\+\_\+misc.\+h}!http\+Parse\+Cookie\+Field@{http\+Parse\+Cookie\+Field}}
\index{http\+Parse\+Cookie\+Field@{http\+Parse\+Cookie\+Field}!http\+\_\+server\+\_\+misc.\+h@{http\+\_\+server\+\_\+misc.\+h}}
\subsubsection{\texorpdfstring{http\+Parse\+Cookie\+Field()}{httpParseCookieField()}}
{\footnotesize\ttfamily void http\+Parse\+Cookie\+Field (\begin{DoxyParamCaption}\item[{\hyperlink{http__server_8h_a3506ecffde998ab02629dca83587d2f9}{Http\+Connection} $\ast$}]{connection,  }\item[{\hyperlink{compiler__port_8h_a40bb5262bf908c328fbcfbe5d29d0201}{char\+\_\+t} $\ast$}]{value }\end{DoxyParamCaption})}



Parse Cookie header field. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em connection} & Structure representing an H\+T\+TP connection \\
\hline
\mbox{\tt in}  & {\em value} & Accept-\/\+Encoding field value \\
\hline
\end{DoxyParams}


Definition at line 652 of file http\+\_\+server\+\_\+misc.\+c.


\begin{DoxyCode}
653 \{
654 \textcolor{preprocessor}{#if (HTTP\_SERVER\_COOKIE\_SUPPORT == ENABLED)}
655    \textcolor{comment}{//Save the value of the header field}
656    \hyperlink{str_8c_ac10cb0bca1fb0c39b2c765afd068486d}{strSafeCopy}(connection->request.cookie, \hyperlink{dtls__misc_8h_a74bce8e92ccabd0c885447114a48b80e}{value}, 
      \hyperlink{http__server_8h_ad5dfb8361753ec3dc34f805ed450fc4e}{HTTP\_SERVER\_COOKIE\_MAX\_LEN});
657 \textcolor{preprocessor}{#endif}
658 \}
\end{DoxyCode}
\mbox{\Hypertarget{http__server__misc_8h_a2fe40f81ba5d3f65c2c34c03d0be8be6}\label{http__server__misc_8h_a2fe40f81ba5d3f65c2c34c03d0be8be6}} 
\index{http\+\_\+server\+\_\+misc.\+h@{http\+\_\+server\+\_\+misc.\+h}!http\+Parse\+Header\+Field@{http\+Parse\+Header\+Field}}
\index{http\+Parse\+Header\+Field@{http\+Parse\+Header\+Field}!http\+\_\+server\+\_\+misc.\+h@{http\+\_\+server\+\_\+misc.\+h}}
\subsubsection{\texorpdfstring{http\+Parse\+Header\+Field()}{httpParseHeaderField()}}
{\footnotesize\ttfamily void http\+Parse\+Header\+Field (\begin{DoxyParamCaption}\item[{\hyperlink{http__server_8h_a3506ecffde998ab02629dca83587d2f9}{Http\+Connection} $\ast$}]{connection,  }\item[{const \hyperlink{compiler__port_8h_a40bb5262bf908c328fbcfbe5d29d0201}{char\+\_\+t} $\ast$}]{name,  }\item[{\hyperlink{compiler__port_8h_a40bb5262bf908c328fbcfbe5d29d0201}{char\+\_\+t} $\ast$}]{value }\end{DoxyParamCaption})}



Parse H\+T\+TP header field. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em connection} & Structure representing an H\+T\+TP connection \\
\hline
\mbox{\tt in}  & {\em name} & Name of the header field \\
\hline
\mbox{\tt in}  & {\em value} & Value of the header field \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Error code 
\end{DoxyReturn}


Definition at line 421 of file http\+\_\+server\+\_\+misc.\+c.


\begin{DoxyCode}
423 \{
424    \textcolor{comment}{//Host header field?}
425    \textcolor{keywordflow}{if}(!\hyperlink{os__port__windows_8h_ac99ec3f1036620727a68aa8c25a8963c}{strcasecmp}(\hyperlink{resource__manager_8h_a26532d7194d592ae8da35222073f36d6}{name}, \textcolor{stringliteral}{"Host"}))
426    \{
427       \textcolor{comment}{//Save host name}
428       \hyperlink{str_8c_ac10cb0bca1fb0c39b2c765afd068486d}{strSafeCopy}(connection->request.host, \hyperlink{dtls__misc_8h_a74bce8e92ccabd0c885447114a48b80e}{value},
429          \hyperlink{http__server_8h_a69b97c891333388e6ed2ff330fd9aa94}{HTTP\_SERVER\_HOST\_MAX\_LEN});
430    \}
431    \textcolor{comment}{//Connection header field?}
432    \textcolor{keywordflow}{else} \textcolor{keywordflow}{if}(!\hyperlink{os__port__windows_8h_ac99ec3f1036620727a68aa8c25a8963c}{strcasecmp}(\hyperlink{resource__manager_8h_a26532d7194d592ae8da35222073f36d6}{name}, \textcolor{stringliteral}{"Connection"}))
433    \{
434       \textcolor{comment}{//Parse Connection header field}
435       \hyperlink{http__server__misc_8c_acc10352f4c0ae57fc3f05efff219de63}{httpParseConnectionField}(connection, \hyperlink{dtls__misc_8h_a74bce8e92ccabd0c885447114a48b80e}{value});
436    \}
437    \textcolor{comment}{//Transfer-Encoding header field?}
438    \textcolor{keywordflow}{else} \textcolor{keywordflow}{if}(!\hyperlink{os__port__windows_8h_ac99ec3f1036620727a68aa8c25a8963c}{strcasecmp}(\hyperlink{resource__manager_8h_a26532d7194d592ae8da35222073f36d6}{name}, \textcolor{stringliteral}{"Transfer-Encoding"}))
439    \{
440       \textcolor{comment}{//Check whether chunked encoding is used}
441       \textcolor{keywordflow}{if}(!\hyperlink{os__port__windows_8h_ac99ec3f1036620727a68aa8c25a8963c}{strcasecmp}(\hyperlink{dtls__misc_8h_a74bce8e92ccabd0c885447114a48b80e}{value}, \textcolor{stringliteral}{"chunked"}))
442          connection->request.chunkedEncoding = \hyperlink{os__port_8h_aa8cecfc5c5c054d2875c03e77b7be15d}{TRUE};
443    \}
444    \textcolor{comment}{//Content-Type field header?}
445    \textcolor{keywordflow}{else} \textcolor{keywordflow}{if}(!\hyperlink{os__port__windows_8h_ac99ec3f1036620727a68aa8c25a8963c}{strcasecmp}(\hyperlink{resource__manager_8h_a26532d7194d592ae8da35222073f36d6}{name}, \textcolor{stringliteral}{"Content-Type"}))
446    \{
447       \textcolor{comment}{//Parse Content-Type header field}
448       \hyperlink{http__server__misc_8c_abbc813884f86b0ebe404ad88dc810137}{httpParseContentTypeField}(connection, \hyperlink{dtls__misc_8h_a74bce8e92ccabd0c885447114a48b80e}{value});
449    \}
450    \textcolor{comment}{//Content-Length header field?}
451    \textcolor{keywordflow}{else} \textcolor{keywordflow}{if}(!\hyperlink{os__port__windows_8h_ac99ec3f1036620727a68aa8c25a8963c}{strcasecmp}(\hyperlink{resource__manager_8h_a26532d7194d592ae8da35222073f36d6}{name}, \textcolor{stringliteral}{"Content-Length"}))
452    \{
453       \textcolor{comment}{//Get the length of the body data}
454       connection->request.contentLength = atoi(\hyperlink{dtls__misc_8h_a74bce8e92ccabd0c885447114a48b80e}{value});
455    \}
456    \textcolor{comment}{//Accept-Encoding field header?}
457    \textcolor{keywordflow}{else} \textcolor{keywordflow}{if}(!\hyperlink{os__port__windows_8h_ac99ec3f1036620727a68aa8c25a8963c}{strcasecmp}(\hyperlink{resource__manager_8h_a26532d7194d592ae8da35222073f36d6}{name}, \textcolor{stringliteral}{"Accept-Encoding"}))
458    \{
459       \textcolor{comment}{//Parse Content-Type header field}
460       \hyperlink{http__server__misc_8c_a98227843b74e7daa4372cdb0db1355fe}{httpParseAcceptEncodingField}(connection, \hyperlink{dtls__misc_8h_a74bce8e92ccabd0c885447114a48b80e}{value});
461    \}
462    \textcolor{comment}{//Authorization header field?}
463    \textcolor{keywordflow}{else} \textcolor{keywordflow}{if}(!\hyperlink{os__port__windows_8h_ac99ec3f1036620727a68aa8c25a8963c}{strcasecmp}(\hyperlink{resource__manager_8h_a26532d7194d592ae8da35222073f36d6}{name}, \textcolor{stringliteral}{"Authorization"}))
464    \{
465       \textcolor{comment}{//Parse Authorization header field}
466       \hyperlink{http__server__auth_8c_a9bd78533b70da214a81f5db0ff6094c4}{httpParseAuthorizationField}(connection, \hyperlink{dtls__misc_8h_a74bce8e92ccabd0c885447114a48b80e}{value});
467    \}
468 \textcolor{preprocessor}{#if (HTTP\_SERVER\_WEB\_SOCKET\_SUPPORT == ENABLED)}
469    \textcolor{comment}{//Upgrade header field?}
470    \textcolor{keywordflow}{else} \textcolor{keywordflow}{if}(!\hyperlink{os__port__windows_8h_ac99ec3f1036620727a68aa8c25a8963c}{strcasecmp}(\hyperlink{resource__manager_8h_a26532d7194d592ae8da35222073f36d6}{name}, \textcolor{stringliteral}{"Upgrade"}))
471    \{
472       \textcolor{comment}{//WebSocket support?}
473       \textcolor{keywordflow}{if}(!\hyperlink{os__port__windows_8h_ac99ec3f1036620727a68aa8c25a8963c}{strcasecmp}(\hyperlink{dtls__misc_8h_a74bce8e92ccabd0c885447114a48b80e}{value}, \textcolor{stringliteral}{"websocket"}))
474          connection->request.upgradeWebSocket = \hyperlink{os__port_8h_aa8cecfc5c5c054d2875c03e77b7be15d}{TRUE};
475    \}
476    \textcolor{comment}{//Sec-WebSocket-Key header field?}
477    \textcolor{keywordflow}{else} \textcolor{keywordflow}{if}(!\hyperlink{os__port__windows_8h_ac99ec3f1036620727a68aa8c25a8963c}{strcasecmp}(\hyperlink{resource__manager_8h_a26532d7194d592ae8da35222073f36d6}{name}, \textcolor{stringliteral}{"Sec-WebSocket-Key"}))
478    \{
479       \textcolor{comment}{//Save the contents of the Sec-WebSocket-Key header field}
480       \hyperlink{str_8c_ac10cb0bca1fb0c39b2c765afd068486d}{strSafeCopy}(connection->request.clientKey, \hyperlink{dtls__misc_8h_a74bce8e92ccabd0c885447114a48b80e}{value},
481          \hyperlink{web__socket_8h_aec52a37b246082418c0b6dbf0235e99d}{WEB\_SOCKET\_CLIENT\_KEY\_SIZE} + 1);
482    \}
483 \textcolor{preprocessor}{#endif}
484 \textcolor{preprocessor}{#if (HTTP\_SERVER\_COOKIE\_SUPPORT == ENABLED)}
485    \textcolor{comment}{//Cookie header field?}
486    \textcolor{keywordflow}{else} \textcolor{keywordflow}{if}(!\hyperlink{os__port__windows_8h_ac99ec3f1036620727a68aa8c25a8963c}{strcasecmp}(\hyperlink{resource__manager_8h_a26532d7194d592ae8da35222073f36d6}{name}, \textcolor{stringliteral}{"Cookie"}))
487    \{
488       \textcolor{comment}{//Parse Cookie header field}
489       \hyperlink{http__server__misc_8c_a9f1254a4277b1e87e76a054bafae65db}{httpParseCookieField}(connection, \hyperlink{dtls__misc_8h_a74bce8e92ccabd0c885447114a48b80e}{value});
490    \}
491 \textcolor{preprocessor}{#endif}
492 \}
\end{DoxyCode}
\mbox{\Hypertarget{http__server__misc_8h_a9e311bb729435947dbea0e8a9479eb18}\label{http__server__misc_8h_a9e311bb729435947dbea0e8a9479eb18}} 
\index{http\+\_\+server\+\_\+misc.\+h@{http\+\_\+server\+\_\+misc.\+h}!http\+Parse\+Request\+Line@{http\+Parse\+Request\+Line}}
\index{http\+Parse\+Request\+Line@{http\+Parse\+Request\+Line}!http\+\_\+server\+\_\+misc.\+h@{http\+\_\+server\+\_\+misc.\+h}}
\subsubsection{\texorpdfstring{http\+Parse\+Request\+Line()}{httpParseRequestLine()}}
{\footnotesize\ttfamily \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689c}{error\+\_\+t} http\+Parse\+Request\+Line (\begin{DoxyParamCaption}\item[{\hyperlink{http__server_8h_a3506ecffde998ab02629dca83587d2f9}{Http\+Connection} $\ast$}]{connection,  }\item[{\hyperlink{compiler__port_8h_a40bb5262bf908c328fbcfbe5d29d0201}{char\+\_\+t} $\ast$}]{request\+Line }\end{DoxyParamCaption})}



Parse Request-\/\+Line. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em connection} & Structure representing an H\+T\+TP connection \\
\hline
\mbox{\tt in}  & {\em request\+Line} & Pointer to the string that holds the Request-\/\+Line \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Error code 
\end{DoxyReturn}


Definition at line 201 of file http\+\_\+server\+\_\+misc.\+c.


\begin{DoxyCode}
202 \{
203    \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689c}{error\_t} error;
204    \hyperlink{compiler__port_8h_a40bb5262bf908c328fbcfbe5d29d0201}{char\_t} *\hyperlink{coap__common_8h_aaa0137cdddb344591e20a2930a1ba54d}{token};
205    \hyperlink{compiler__port_8h_a40bb5262bf908c328fbcfbe5d29d0201}{char\_t} *\hyperlink{ndp_8h_a6519522ad9a6f45e7a8d25d31392a977}{p};
206    \hyperlink{compiler__port_8h_a40bb5262bf908c328fbcfbe5d29d0201}{char\_t} *\hyperlink{md2_8c_adf356ff381033f761b7de5f76e763a45}{s};
207 
208    \textcolor{comment}{//The Request-Line begins with a method token}
209    token = \hyperlink{strtok__r_8c_af18c3fca5cc30bc1313728d45c031ae9}{strtok\_r}(requestLine, \textcolor{stringliteral}{" \(\backslash\)r\(\backslash\)n"}, &p);
210    \textcolor{comment}{//Unable to retrieve the method?}
211    \textcolor{keywordflow}{if}(token == \hyperlink{group__BSPDefine_ga070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL})
212       \textcolor{keywordflow}{return} \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689ca58b9865a3dd951988ab2d8f53b0e4166}{ERROR\_INVALID\_REQUEST};
213 
214    \textcolor{comment}{//The Method token indicates the method to be performed on the}
215    \textcolor{comment}{//resource identified by the Request-URI}
216    error = \hyperlink{str_8c_ac10cb0bca1fb0c39b2c765afd068486d}{strSafeCopy}(connection->request.method, token, 
      \hyperlink{http__server_8h_a34523e60668c177e7019c01fcc6feacf}{HTTP\_SERVER\_METHOD\_MAX\_LEN});
217    \textcolor{comment}{//Any error to report?}
218    \textcolor{keywordflow}{if}(error)
219       \textcolor{keywordflow}{return} \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689ca58b9865a3dd951988ab2d8f53b0e4166}{ERROR\_INVALID\_REQUEST};
220 
221    \textcolor{comment}{//The Request-URI is following the method token}
222    token = \hyperlink{strtok__r_8c_af18c3fca5cc30bc1313728d45c031ae9}{strtok\_r}(\hyperlink{group__BSPDefine_ga070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL}, \textcolor{stringliteral}{" \(\backslash\)r\(\backslash\)n"}, &p);
223    \textcolor{comment}{//Unable to retrieve the Request-URI?}
224    \textcolor{keywordflow}{if}(token == \hyperlink{group__BSPDefine_ga070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL})
225       \textcolor{keywordflow}{return} \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689ca58b9865a3dd951988ab2d8f53b0e4166}{ERROR\_INVALID\_REQUEST};
226 
227    \textcolor{comment}{//Check whether a query string is present}
228    s = strchr(token, \textcolor{charliteral}{'?'});
229 
230    \textcolor{comment}{//Query string found?}
231    \textcolor{keywordflow}{if}(s != \hyperlink{group__BSPDefine_ga070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL})
232    \{
233       \textcolor{comment}{//Split the string}
234       *s = \textcolor{charliteral}{'\(\backslash\)0'};
235 
236       \textcolor{comment}{//Save the Request-URI}
237       error = \hyperlink{http__server__misc_8c_acc3ffce89629a854bba3a6021debf0fd}{httpDecodePercentEncodedString}(token,
238          connection->request.uri, \hyperlink{http__server_8h_aad636f905c4ba1aa4f135adbada5a70b}{HTTP\_SERVER\_URI\_MAX\_LEN});
239       \textcolor{comment}{//Any error to report?}
240       \textcolor{keywordflow}{if}(error)
241          \textcolor{keywordflow}{return} \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689ca58b9865a3dd951988ab2d8f53b0e4166}{ERROR\_INVALID\_REQUEST};
242 
243       \textcolor{comment}{//Check the length of the query string}
244       \textcolor{keywordflow}{if}(strlen(s + 1) > \hyperlink{http__server_8h_af206292720529e388faffbf1955fa0eb}{HTTP\_SERVER\_QUERY\_STRING\_MAX\_LEN})
245          \textcolor{keywordflow}{return} \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689ca58b9865a3dd951988ab2d8f53b0e4166}{ERROR\_INVALID\_REQUEST};
246 
247       \textcolor{comment}{//Save the query string}
248       strcpy(connection->request.queryString, s + 1);
249    \}
250    \textcolor{keywordflow}{else}
251    \{
252       \textcolor{comment}{//Save the Request-URI}
253       error = \hyperlink{http__server__misc_8c_acc3ffce89629a854bba3a6021debf0fd}{httpDecodePercentEncodedString}(token,
254          connection->request.uri, \hyperlink{http__server_8h_aad636f905c4ba1aa4f135adbada5a70b}{HTTP\_SERVER\_URI\_MAX\_LEN});
255       \textcolor{comment}{//Any error to report?}
256       \textcolor{keywordflow}{if}(error)
257          \textcolor{keywordflow}{return} \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689ca58b9865a3dd951988ab2d8f53b0e4166}{ERROR\_INVALID\_REQUEST};
258 
259       \textcolor{comment}{//No query string}
260       connection->request.queryString[0] = \textcolor{charliteral}{'\(\backslash\)0'};
261    \}
262 
263    \textcolor{comment}{//Redirect to the default home page if necessary}
264    \textcolor{keywordflow}{if}(!\hyperlink{os__port__windows_8h_ac99ec3f1036620727a68aa8c25a8963c}{strcasecmp}(connection->request.uri, \textcolor{stringliteral}{"/"}))
265       strcpy(connection->request.uri, connection->settings->defaultDocument);
266 
267    \textcolor{comment}{//Clean the resulting path}
268    \hyperlink{path_8c_a64519f81386b6ece797fb51f06e3052d}{pathCanonicalize}(connection->request.uri);
269 
270    \textcolor{comment}{//The protocol version is following the Request-URI}
271    token = \hyperlink{strtok__r_8c_af18c3fca5cc30bc1313728d45c031ae9}{strtok\_r}(\hyperlink{group__BSPDefine_ga070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL}, \textcolor{stringliteral}{" \(\backslash\)r\(\backslash\)n"}, &p);
272 
273    \textcolor{comment}{//HTTP version 0.9?}
274    \textcolor{keywordflow}{if}(token == \hyperlink{group__BSPDefine_ga070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL})
275    \{
276       \textcolor{comment}{//Save version number}
277       connection->request.version = \hyperlink{http__common_8h_ac870fd261da652aee69937751c6f7e7fabca6852c70f3b9617834ca911ee9e737}{HTTP\_VERSION\_0\_9};
278       \textcolor{comment}{//Persistent connections are not supported}
279       connection->request.keepAlive = \hyperlink{os__port_8h_aa93f0eb578d23995850d61f7d61c55c1}{FALSE};
280    \}
281    \textcolor{comment}{//HTTP version 1.0?}
282    \textcolor{keywordflow}{else} \textcolor{keywordflow}{if}(!\hyperlink{os__port__windows_8h_ac99ec3f1036620727a68aa8c25a8963c}{strcasecmp}(token, \textcolor{stringliteral}{"HTTP/1.0"}))
283    \{
284       \textcolor{comment}{//Save version number}
285       connection->request.version = \hyperlink{http__common_8h_ac870fd261da652aee69937751c6f7e7fa3932308db22120ce049dd60f3430b814}{HTTP\_VERSION\_1\_0};
286       \textcolor{comment}{//By default connections are not persistent}
287       connection->request.keepAlive = \hyperlink{os__port_8h_aa93f0eb578d23995850d61f7d61c55c1}{FALSE};
288    \}
289    \textcolor{comment}{//HTTP version 1.1?}
290    \textcolor{keywordflow}{else} \textcolor{keywordflow}{if}(!\hyperlink{os__port__windows_8h_ac99ec3f1036620727a68aa8c25a8963c}{strcasecmp}(token, \textcolor{stringliteral}{"HTTP/1.1"}))
291    \{
292       \textcolor{comment}{//Save version number}
293       connection->request.version = \hyperlink{http__common_8h_ac870fd261da652aee69937751c6f7e7faf1a34119b438038bc609a273f9bc08c6}{HTTP\_VERSION\_1\_1};
294       \textcolor{comment}{//HTTP 1.1 makes persistent connections the default}
295       connection->request.keepAlive = \hyperlink{os__port_8h_aa8cecfc5c5c054d2875c03e77b7be15d}{TRUE};
296    \}
297    \textcolor{comment}{//HTTP version not supported?}
298    \textcolor{keywordflow}{else}
299    \{
300       \textcolor{comment}{//Report an error}
301       \textcolor{keywordflow}{return} \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689ca58b9865a3dd951988ab2d8f53b0e4166}{ERROR\_INVALID\_REQUEST};
302    \}
303 
304    \textcolor{comment}{//Successful processing}
305    \textcolor{keywordflow}{return} \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689cabf350750d0d4fabd8954c0f1e9bbae94}{NO\_ERROR};
306 \}
\end{DoxyCode}
\mbox{\Hypertarget{http__server__misc_8h_acc3d795809c9a695d07ccdd0f084918f}\label{http__server__misc_8h_acc3d795809c9a695d07ccdd0f084918f}} 
\index{http\+\_\+server\+\_\+misc.\+h@{http\+\_\+server\+\_\+misc.\+h}!http\+Read\+Chunk\+Size@{http\+Read\+Chunk\+Size}}
\index{http\+Read\+Chunk\+Size@{http\+Read\+Chunk\+Size}!http\+\_\+server\+\_\+misc.\+h@{http\+\_\+server\+\_\+misc.\+h}}
\subsubsection{\texorpdfstring{http\+Read\+Chunk\+Size()}{httpReadChunkSize()}}
{\footnotesize\ttfamily \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689c}{error\+\_\+t} http\+Read\+Chunk\+Size (\begin{DoxyParamCaption}\item[{\hyperlink{http__server_8h_a3506ecffde998ab02629dca83587d2f9}{Http\+Connection} $\ast$}]{connection }\end{DoxyParamCaption})}



Read chunk-\/size field from the input stream. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em connection} & Structure representing an H\+T\+TP connection \\
\hline
\end{DoxyParams}


Definition at line 666 of file http\+\_\+server\+\_\+misc.\+c.


\begin{DoxyCode}
667 \{
668    \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689c}{error\_t} error;
669    \textcolor{keywordtype}{size\_t} \hyperlink{dhcpv6__common_8h_a5a648f5ec00c526b0dfa2df7a272c6c0}{n};
670    \hyperlink{compiler__port_8h_a40bb5262bf908c328fbcfbe5d29d0201}{char\_t} *end;
671    \hyperlink{compiler__port_8h_a40bb5262bf908c328fbcfbe5d29d0201}{char\_t} \hyperlink{md2_8c_adf356ff381033f761b7de5f76e763a45}{s}[8];
672 
673    \textcolor{comment}{//First chunk to be received?}
674    \textcolor{keywordflow}{if}(connection->request.firstChunk)
675    \{
676       \textcolor{comment}{//Clear the flag}
677       connection->request.firstChunk = \hyperlink{os__port_8h_aa93f0eb578d23995850d61f7d61c55c1}{FALSE};
678    \}
679    \textcolor{keywordflow}{else}
680    \{
681       \textcolor{comment}{//Read the CRLF that follows the previous chunk-data field}
682       error = \hyperlink{http__server__misc_8c_a2b807b3ad3566b5ab129e02287b3535f}{httpReceive}(connection, s, \textcolor{keyword}{sizeof}(s) - 1, &n, 
      \hyperlink{socket_8h_a36c1d45d435e2f0ebe609c31d0c2da16a8a9906d4aacdf7dd4b7203c86271006b}{SOCKET\_FLAG\_BREAK\_CRLF});
683       \textcolor{comment}{//Any error to report?}
684       \textcolor{keywordflow}{if}(error)
685          \textcolor{keywordflow}{return} error;
686 
687       \textcolor{comment}{//Properly terminate the string with a NULL character}
688       s[\hyperlink{dhcpv6__common_8h_a5a648f5ec00c526b0dfa2df7a272c6c0}{n}] = \textcolor{charliteral}{'\(\backslash\)0'};
689 
690       \textcolor{comment}{//The chunk data must be terminated by CRLF}
691       \textcolor{keywordflow}{if}(strcmp(s, \textcolor{stringliteral}{"\(\backslash\)r\(\backslash\)n"}))
692          \textcolor{keywordflow}{return} \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689ca502c4621b59b0b51a9f8337d6a902c9c}{ERROR\_WRONG\_ENCODING};
693    \}
694 
695    \textcolor{comment}{//Read the chunk-size field}
696    error = \hyperlink{http__server__misc_8c_a2b807b3ad3566b5ab129e02287b3535f}{httpReceive}(connection, s, \textcolor{keyword}{sizeof}(s) - 1, &n, 
      \hyperlink{socket_8h_a36c1d45d435e2f0ebe609c31d0c2da16a8a9906d4aacdf7dd4b7203c86271006b}{SOCKET\_FLAG\_BREAK\_CRLF});
697    \textcolor{comment}{//Any error to report?}
698    \textcolor{keywordflow}{if}(error)
699       \textcolor{keywordflow}{return} error;
700 
701    \textcolor{comment}{//Properly terminate the string with a NULL character}
702    s[\hyperlink{dhcpv6__common_8h_a5a648f5ec00c526b0dfa2df7a272c6c0}{n}] = \textcolor{charliteral}{'\(\backslash\)0'};
703    \textcolor{comment}{//Remove extra whitespaces}
704    \hyperlink{str_8c_a213a401a08b4083cbddd0fb4673ba430}{strRemoveTrailingSpace}(s);
705 
706    \textcolor{comment}{//Retrieve the size of the chunk}
707    connection->request.byteCount = strtoul(s, &end, 16);
708 
709    \textcolor{comment}{//No valid conversion could be performed?}
710    \textcolor{keywordflow}{if}(end == s || *end != \textcolor{charliteral}{'\(\backslash\)0'})
711       \textcolor{keywordflow}{return} \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689ca502c4621b59b0b51a9f8337d6a902c9c}{ERROR\_WRONG\_ENCODING};
712 
713    \textcolor{comment}{//Any chunk whose size is zero terminates the data transfer}
714    \textcolor{keywordflow}{if}(!connection->request.byteCount)
715    \{
716       \textcolor{comment}{//The end of the HTTP request body has been reached}
717       connection->request.lastChunk = \hyperlink{os__port_8h_aa8cecfc5c5c054d2875c03e77b7be15d}{TRUE};
718 
719       \textcolor{comment}{//Skip the trailer}
720       \textcolor{keywordflow}{while}(1)
721       \{
722          \textcolor{comment}{//Read a complete line}
723          error = \hyperlink{http__server__misc_8c_a2b807b3ad3566b5ab129e02287b3535f}{httpReceive}(connection, s, \textcolor{keyword}{sizeof}(s) - 1, &n, 
      \hyperlink{socket_8h_a36c1d45d435e2f0ebe609c31d0c2da16a8a9906d4aacdf7dd4b7203c86271006b}{SOCKET\_FLAG\_BREAK\_CRLF});
724          \textcolor{comment}{//Unable to read any data?}
725          \textcolor{keywordflow}{if}(error)
726             \textcolor{keywordflow}{return} error;
727 
728          \textcolor{comment}{//Properly terminate the string with a NULL character}
729          s[\hyperlink{dhcpv6__common_8h_a5a648f5ec00c526b0dfa2df7a272c6c0}{n}] = \textcolor{charliteral}{'\(\backslash\)0'};
730 
731          \textcolor{comment}{//The trailer is terminated by an empty line}
732          \textcolor{keywordflow}{if}(!strcmp(s, \textcolor{stringliteral}{"\(\backslash\)r\(\backslash\)n"}))
733             \textcolor{keywordflow}{break};
734       \}
735    \}
736 
737    \textcolor{comment}{//Successful processing}
738    \textcolor{keywordflow}{return} \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689cabf350750d0d4fabd8954c0f1e9bbae94}{NO\_ERROR};
739 \}
\end{DoxyCode}
\mbox{\Hypertarget{http__server__misc_8h_aa83dccde534c4cb053a434f062085049}\label{http__server__misc_8h_aa83dccde534c4cb053a434f062085049}} 
\index{http\+\_\+server\+\_\+misc.\+h@{http\+\_\+server\+\_\+misc.\+h}!http\+Read\+Header\+Field@{http\+Read\+Header\+Field}}
\index{http\+Read\+Header\+Field@{http\+Read\+Header\+Field}!http\+\_\+server\+\_\+misc.\+h@{http\+\_\+server\+\_\+misc.\+h}}
\subsubsection{\texorpdfstring{http\+Read\+Header\+Field()}{httpReadHeaderField()}}
{\footnotesize\ttfamily \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689c}{error\+\_\+t} http\+Read\+Header\+Field (\begin{DoxyParamCaption}\item[{\hyperlink{http__server_8h_a3506ecffde998ab02629dca83587d2f9}{Http\+Connection} $\ast$}]{connection,  }\item[{\hyperlink{compiler__port_8h_a40bb5262bf908c328fbcfbe5d29d0201}{char\+\_\+t} $\ast$}]{buffer,  }\item[{size\+\_\+t}]{size,  }\item[{\hyperlink{compiler__port_8h_a40bb5262bf908c328fbcfbe5d29d0201}{char\+\_\+t} $\ast$}]{first\+Char }\end{DoxyParamCaption})}



Read multiple-\/line header field. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em connection} & Structure representing an H\+T\+TP connection \\
\hline
\mbox{\tt out}  & {\em buffer} & Buffer where to store the header field \\
\hline
\mbox{\tt in}  & {\em size} & Size of the buffer, in bytes \\
\hline
\mbox{\tt in,out}  & {\em first\+Char} & Leading character of the header line \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Error code 
\end{DoxyReturn}


Definition at line 318 of file http\+\_\+server\+\_\+misc.\+c.


\begin{DoxyCode}
320 \{
321    \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689c}{error\_t} error;
322    \textcolor{keywordtype}{size\_t} \hyperlink{dhcpv6__common_8h_a5a648f5ec00c526b0dfa2df7a272c6c0}{n};
323    \textcolor{keywordtype}{size\_t} \hyperlink{dtls__misc_8h_ab43ca82dd7fa2a0e56f941032ef324c4}{length};
324 
325    \textcolor{comment}{//This is the actual length of the header field}
326    length = 0;
327 
328    \textcolor{comment}{//The process of moving from a multiple-line representation of a header}
329    \textcolor{comment}{//field to its single line representation is called unfolding}
330    \textcolor{keywordflow}{do}
331    \{
332       \textcolor{comment}{//Check the length of the header field}
333       \textcolor{keywordflow}{if}((length + 1) >= size)
334       \{
335          \textcolor{comment}{//Report an error}
336          error = \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689ca58b9865a3dd951988ab2d8f53b0e4166}{ERROR\_INVALID\_REQUEST};
337          \textcolor{comment}{//Exit immediately}
338          \textcolor{keywordflow}{break};
339       \}
340 
341       \textcolor{comment}{//NULL character found?}
342       \textcolor{keywordflow}{if}(*firstChar == \textcolor{charliteral}{'\(\backslash\)0'})
343       \{
344          \textcolor{comment}{//Prepare to decode the first header field}
345          length = 0;
346       \}
347       \textcolor{comment}{//LWSP character found?}
348       \textcolor{keywordflow}{else} \textcolor{keywordflow}{if}(*firstChar == \textcolor{charliteral}{' '} || *firstChar == \textcolor{charliteral}{'\(\backslash\)t'})
349       \{
350          \textcolor{comment}{//Unfolding is accomplished by regarding CRLF immediately}
351          \textcolor{comment}{//followed by a LWSP as equivalent to the LWSP character}
352          buffer[\hyperlink{dtls__misc_8h_ab43ca82dd7fa2a0e56f941032ef324c4}{length}] = *firstChar;
353          \textcolor{comment}{//The current header field spans multiple lines}
354          length++;
355       \}
356       \textcolor{comment}{//Any other character?}
357       \textcolor{keywordflow}{else}
358       \{
359          \textcolor{comment}{//Restore the very first character of the header field}
360          buffer[0] = *firstChar;
361          \textcolor{comment}{//Prepare to decode a new header field}
362          length = 1;
363       \}
364 
365       \textcolor{comment}{//Read data until a CLRF character is encountered}
366       error = \hyperlink{http__server__misc_8c_a2b807b3ad3566b5ab129e02287b3535f}{httpReceive}(connection, buffer + length,
367          size - 1 - length, &n, \hyperlink{socket_8h_a36c1d45d435e2f0ebe609c31d0c2da16a8a9906d4aacdf7dd4b7203c86271006b}{SOCKET\_FLAG\_BREAK\_CRLF});
368       \textcolor{comment}{//Any error to report?}
369       \textcolor{keywordflow}{if}(error)
370          \textcolor{keywordflow}{break};
371 
372       \textcolor{comment}{//Update the length of the header field}
373       length += \hyperlink{dhcpv6__common_8h_a5a648f5ec00c526b0dfa2df7a272c6c0}{n};
374       \textcolor{comment}{//Properly terminate the string with a NULL character}
375       buffer[\hyperlink{dtls__misc_8h_ab43ca82dd7fa2a0e56f941032ef324c4}{length}] = \textcolor{charliteral}{'\(\backslash\)0'};
376 
377       \textcolor{comment}{//An empty line indicates the end of the header fields}
378       \textcolor{keywordflow}{if}(!strcmp(buffer, \textcolor{stringliteral}{"\(\backslash\)r\(\backslash\)n"}))
379          \textcolor{keywordflow}{break};
380 
381       \textcolor{comment}{//Read the next character to detect if the CRLF is immediately}
382       \textcolor{comment}{//followed by a LWSP character}
383       error = \hyperlink{http__server__misc_8c_a2b807b3ad3566b5ab129e02287b3535f}{httpReceive}(connection, firstChar,
384          \textcolor{keyword}{sizeof}(\hyperlink{compiler__port_8h_a40bb5262bf908c328fbcfbe5d29d0201}{char\_t}), &n, \hyperlink{socket_8h_a36c1d45d435e2f0ebe609c31d0c2da16a39d0c7263a468e53133cbad1f6010df2}{SOCKET\_FLAG\_WAIT\_ALL});
385       \textcolor{comment}{//Any error to report?}
386       \textcolor{keywordflow}{if}(error)
387          \textcolor{keywordflow}{break};
388 
389       \textcolor{comment}{//LWSP character found?}
390       \textcolor{keywordflow}{if}(*firstChar == \textcolor{charliteral}{' '} || *firstChar == \textcolor{charliteral}{'\(\backslash\)t'})
391       \{
392          \textcolor{comment}{//CRLF immediately followed by LWSP as equivalent to the LWSP character}
393          \textcolor{keywordflow}{if}(length >= 2)
394          \{
395             \textcolor{keywordflow}{if}(buffer[length - 2] == \textcolor{charliteral}{'\(\backslash\)r'} || buffer[length - 1] == \textcolor{charliteral}{'\(\backslash\)n'})
396             \{
397                \textcolor{comment}{//Remove trailing CRLF sequence}
398                length -= 2;
399                \textcolor{comment}{//Properly terminate the string with a NULL character}
400                buffer[\hyperlink{dtls__misc_8h_ab43ca82dd7fa2a0e56f941032ef324c4}{length}] = \textcolor{charliteral}{'\(\backslash\)0'};
401             \}
402          \}
403       \}
404 
405       \textcolor{comment}{//A header field may span multiple lines...}
406    \} \textcolor{keywordflow}{while}(*firstChar == \textcolor{charliteral}{' '} || *firstChar == \textcolor{charliteral}{'\(\backslash\)t'});
407 
408    \textcolor{comment}{//Return status code}
409    \textcolor{keywordflow}{return} error;
410 \}
\end{DoxyCode}
\mbox{\Hypertarget{http__server__misc_8h_ad0e8b805bb61bdb5cbc6368370d2cb52}\label{http__server__misc_8h_ad0e8b805bb61bdb5cbc6368370d2cb52}} 
\index{http\+\_\+server\+\_\+misc.\+h@{http\+\_\+server\+\_\+misc.\+h}!http\+Read\+Request\+Header@{http\+Read\+Request\+Header}}
\index{http\+Read\+Request\+Header@{http\+Read\+Request\+Header}!http\+\_\+server\+\_\+misc.\+h@{http\+\_\+server\+\_\+misc.\+h}}
\subsubsection{\texorpdfstring{http\+Read\+Request\+Header()}{httpReadRequestHeader()}}
{\footnotesize\ttfamily \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689c}{error\+\_\+t} http\+Read\+Request\+Header (\begin{DoxyParamCaption}\item[{\hyperlink{http__server_8h_a3506ecffde998ab02629dca83587d2f9}{Http\+Connection} $\ast$}]{connection }\end{DoxyParamCaption})}



Read H\+T\+TP request header and parse its contents. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em connection} & Structure representing an H\+T\+TP connection \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Error code 
\end{DoxyReturn}


Definition at line 84 of file http\+\_\+server\+\_\+misc.\+c.


\begin{DoxyCode}
85 \{
86    \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689c}{error\_t} error;
87    \textcolor{keywordtype}{size\_t} \hyperlink{dtls__misc_8h_ab43ca82dd7fa2a0e56f941032ef324c4}{length};
88 
89    \textcolor{comment}{//Set the maximum time the server will wait for an HTTP}
90    \textcolor{comment}{//request before closing the connection}
91    error = \hyperlink{socket_8c_abdd29ac0ba4a644c726f5b1280680099}{socketSetTimeout}(connection->socket, 
      \hyperlink{http__server_8h_ab8b701829c3d98c6123192de3e2a0115}{HTTP\_SERVER\_IDLE\_TIMEOUT});
92    \textcolor{comment}{//Any error to report?}
93    \textcolor{keywordflow}{if}(error)
94       \textcolor{keywordflow}{return} error;
95 
96    \textcolor{comment}{//Read the first line of the request}
97    error = \hyperlink{http__server__misc_8c_a2b807b3ad3566b5ab129e02287b3535f}{httpReceive}(connection, connection->buffer,
98       \hyperlink{http__server_8h_a7323ad0fee234d179bd1f679496174d2}{HTTP\_SERVER\_BUFFER\_SIZE} - 1, &length, 
      \hyperlink{socket_8h_a36c1d45d435e2f0ebe609c31d0c2da16a8a9906d4aacdf7dd4b7203c86271006b}{SOCKET\_FLAG\_BREAK\_CRLF});
99    \textcolor{comment}{//Unable to read any data?}
100    \textcolor{keywordflow}{if}(error)
101       \textcolor{keywordflow}{return} error;
102 
103    \textcolor{comment}{//Revert to default timeout}
104    error = \hyperlink{socket_8c_abdd29ac0ba4a644c726f5b1280680099}{socketSetTimeout}(connection->socket, 
      \hyperlink{http__server_8h_ad3c60dd255112974bf9bb67ae4f5a289}{HTTP\_SERVER\_TIMEOUT});
105    \textcolor{comment}{//Any error to report?}
106    \textcolor{keywordflow}{if}(error)
107       \textcolor{keywordflow}{return} error;
108 
109    \textcolor{comment}{//Properly terminate the string with a NULL character}
110    connection->buffer[\hyperlink{dtls__misc_8h_ab43ca82dd7fa2a0e56f941032ef324c4}{length}] = \textcolor{charliteral}{'\(\backslash\)0'};
111    \textcolor{comment}{//Debug message}
112    \hyperlink{debug_8h_a7339bfd784193a5c79efcef2eeb2d6df}{TRACE\_INFO}(\textcolor{stringliteral}{"%s"}, connection->buffer);
113 
114    \textcolor{comment}{//Parse the Request-Line}
115    error = \hyperlink{http__server__misc_8c_a9e311bb729435947dbea0e8a9479eb18}{httpParseRequestLine}(connection, connection->buffer);
116    \textcolor{comment}{//Any error to report?}
117    \textcolor{keywordflow}{if}(error)
118       \textcolor{keywordflow}{return} error;
119 
120    \textcolor{comment}{//Default value for properties}
121    connection->request.chunkedEncoding = \hyperlink{os__port_8h_aa93f0eb578d23995850d61f7d61c55c1}{FALSE};
122    connection->request.contentLength = 0;
123 \textcolor{preprocessor}{#if (HTTP\_SERVER\_WEB\_SOCKET\_SUPPORT == ENABLED)}
124    connection->request.upgradeWebSocket = \hyperlink{os__port_8h_aa93f0eb578d23995850d61f7d61c55c1}{FALSE};
125    connection->request.connectionUpgrade = \hyperlink{os__port_8h_aa93f0eb578d23995850d61f7d61c55c1}{FALSE};
126    strcpy(connection->request.clientKey, \textcolor{stringliteral}{""});
127 \textcolor{preprocessor}{#endif}
128 
129    \textcolor{comment}{//HTTP 0.9 does not support Full-Request}
130    \textcolor{keywordflow}{if}(connection->request.version >= \hyperlink{http__common_8h_ac870fd261da652aee69937751c6f7e7fa3932308db22120ce049dd60f3430b814}{HTTP\_VERSION\_1\_0})
131    \{
132       \textcolor{comment}{//Local variables}
133       \hyperlink{compiler__port_8h_a40bb5262bf908c328fbcfbe5d29d0201}{char\_t} firstChar;
134       \hyperlink{compiler__port_8h_a40bb5262bf908c328fbcfbe5d29d0201}{char\_t} *separator;
135       \hyperlink{compiler__port_8h_a40bb5262bf908c328fbcfbe5d29d0201}{char\_t} *\hyperlink{resource__manager_8h_a26532d7194d592ae8da35222073f36d6}{name};
136       \hyperlink{compiler__port_8h_a40bb5262bf908c328fbcfbe5d29d0201}{char\_t} *\hyperlink{dtls__misc_8h_a74bce8e92ccabd0c885447114a48b80e}{value};
137 
138       \textcolor{comment}{//This variable is used to decode header fields that span multiple lines}
139       firstChar = \textcolor{charliteral}{'\(\backslash\)0'};
140 
141       \textcolor{comment}{//Parse the header fields of the HTTP request}
142       \textcolor{keywordflow}{while}(1)
143       \{
144          \textcolor{comment}{//Decode multiple-line header field}
145          error = \hyperlink{http__server__misc_8c_aa83dccde534c4cb053a434f062085049}{httpReadHeaderField}(connection, connection->buffer,
146             \hyperlink{http__server_8h_a7323ad0fee234d179bd1f679496174d2}{HTTP\_SERVER\_BUFFER\_SIZE}, &firstChar);
147          \textcolor{comment}{//Any error to report?}
148          \textcolor{keywordflow}{if}(error)
149             \textcolor{keywordflow}{return} error;
150 
151          \textcolor{comment}{//Debug message}
152          \hyperlink{debug_8h_a67a8f9bc74358aa21745a76e23768dae}{TRACE\_DEBUG}(\textcolor{stringliteral}{"%s"}, connection->buffer);
153 
154          \textcolor{comment}{//An empty line indicates the end of the header fields}
155          \textcolor{keywordflow}{if}(!strcmp(connection->buffer, \textcolor{stringliteral}{"\(\backslash\)r\(\backslash\)n"}))
156             \textcolor{keywordflow}{break};
157 
158          \textcolor{comment}{//Check whether a separator is present}
159          separator = strchr(connection->buffer, \textcolor{charliteral}{':'});
160 
161          \textcolor{comment}{//Separator found?}
162          \textcolor{keywordflow}{if}(separator != \hyperlink{group__BSPDefine_ga070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL})
163          \{
164             \textcolor{comment}{//Split the line}
165             *separator = \textcolor{charliteral}{'\(\backslash\)0'};
166 
167             \textcolor{comment}{//Trim whitespace characters}
168             name = \hyperlink{str_8c_ade9441b268416af6b024eb2ba3a5847e}{strTrimWhitespace}(connection->buffer);
169             value = \hyperlink{str_8c_ade9441b268416af6b024eb2ba3a5847e}{strTrimWhitespace}(separator + 1);
170 
171             \textcolor{comment}{//Parse HTTP header field}
172             \hyperlink{http__server__misc_8c_a2fe40f81ba5d3f65c2c34c03d0be8be6}{httpParseHeaderField}(connection, name, value);
173          \}
174       \}
175    \}
176 
177    \textcolor{comment}{//Prepare to read the HTTP request body}
178    \textcolor{keywordflow}{if}(connection->request.chunkedEncoding)
179    \{
180       connection->request.byteCount = 0;
181       connection->request.firstChunk = \hyperlink{os__port_8h_aa8cecfc5c5c054d2875c03e77b7be15d}{TRUE};
182       connection->request.lastChunk = \hyperlink{os__port_8h_aa93f0eb578d23995850d61f7d61c55c1}{FALSE};
183    \}
184    \textcolor{keywordflow}{else}
185    \{
186       connection->request.byteCount = connection->request.contentLength;
187    \}
188 
189    \textcolor{comment}{//The request header has been successfully parsed}
190    \textcolor{keywordflow}{return} \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689cabf350750d0d4fabd8954c0f1e9bbae94}{NO\_ERROR};
191 \}
\end{DoxyCode}
\mbox{\Hypertarget{http__server__misc_8h_a2b807b3ad3566b5ab129e02287b3535f}\label{http__server__misc_8h_a2b807b3ad3566b5ab129e02287b3535f}} 
\index{http\+\_\+server\+\_\+misc.\+h@{http\+\_\+server\+\_\+misc.\+h}!http\+Receive@{http\+Receive}}
\index{http\+Receive@{http\+Receive}!http\+\_\+server\+\_\+misc.\+h@{http\+\_\+server\+\_\+misc.\+h}}
\subsubsection{\texorpdfstring{http\+Receive()}{httpReceive()}}
{\footnotesize\ttfamily \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689c}{error\+\_\+t} http\+Receive (\begin{DoxyParamCaption}\item[{\hyperlink{http__server_8h_a3506ecffde998ab02629dca83587d2f9}{Http\+Connection} $\ast$}]{connection,  }\item[{void $\ast$}]{data,  }\item[{size\+\_\+t}]{size,  }\item[{size\+\_\+t $\ast$}]{received,  }\item[{\hyperlink{compiler__port_8h_a12a1e9b3ce141648783a82445d02b58d}{uint\+\_\+t}}]{flags }\end{DoxyParamCaption})}



Receive data from the client. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em connection} & Structure representing an H\+T\+TP connection \\
\hline
\mbox{\tt out}  & {\em data} & Buffer into which received data will be placed \\
\hline
\mbox{\tt in}  & {\em size} & Maximum number of bytes that can be received \\
\hline
\mbox{\tt out}  & {\em received} & Actual number of bytes that have been received \\
\hline
\mbox{\tt in}  & {\em flags} & Set of flags that influences the behavior of this function \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Error code 
\end{DoxyReturn}


Definition at line 988 of file http\+\_\+server\+\_\+misc.\+c.


\begin{DoxyCode}
990 \{
991 \textcolor{preprocessor}{#if (NET\_RTOS\_SUPPORT == ENABLED)}
992    \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689c}{error\_t} error;
993 
994 \textcolor{preprocessor}{#if (HTTP\_SERVER\_TLS\_SUPPORT == ENABLED)}
995    \textcolor{comment}{//Check whether a secure connection is being used}
996    \textcolor{keywordflow}{if}(connection->tlsContext != \hyperlink{group__BSPDefine_ga070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL})
997    \{
998       \textcolor{comment}{//Use TLS to receive data from the client}
999       error = \hyperlink{tls_8c_a6aa09693d0cdc6e93d9b88a6331bc247}{tlsRead}(connection->tlsContext, \hyperlink{dtls__misc_8h_a5c239a1bb87b52b0f1d6d68c4749cd2a}{data}, size, received, 
      \hyperlink{tcp_8h_aa2585d779da0ab21273a8d92de9a0ebe}{flags});
1000    \}
1001    \textcolor{keywordflow}{else}
1002 \textcolor{preprocessor}{#endif}
1003    \{
1004       \textcolor{comment}{//Receive data from the client}
1005       error = \hyperlink{socket_8c_a894c7bf0bfd4e3886fc584ed7ebbb087}{socketReceive}(connection->socket, \hyperlink{dtls__misc_8h_a5c239a1bb87b52b0f1d6d68c4749cd2a}{data}, size, received, 
      \hyperlink{tcp_8h_aa2585d779da0ab21273a8d92de9a0ebe}{flags});
1006    \}
1007 
1008    \textcolor{comment}{//Return status code}
1009    \textcolor{keywordflow}{return} error;
1010 \textcolor{preprocessor}{#else}
1011    \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689c}{error\_t} error;
1012    \hyperlink{compiler__port_8h_a40bb5262bf908c328fbcfbe5d29d0201}{char\_t} \hyperlink{aria_8c_a5dadc28804036d1b82e1dc027e95c9a6}{c};
1013    \textcolor{keywordtype}{size\_t} i;
1014    \textcolor{keywordtype}{size\_t} \hyperlink{dhcpv6__common_8h_a5a648f5ec00c526b0dfa2df7a272c6c0}{n};
1015 
1016    \textcolor{comment}{//Number of data bytes that are pending in the receive buffer}
1017    n = connection->bufferLen - connection->bufferPos;
1018 
1019    \textcolor{comment}{//Any data to be copied?}
1020    \textcolor{keywordflow}{if}(n > 0)
1021    \{
1022       \textcolor{comment}{//Limit the number of bytes to read at a time}
1023       n = \hyperlink{os__port_8h_a3acffbd305ee72dcd4593c0d8af64a4f}{MIN}(n, size);
1024 
1025       \textcolor{comment}{//The HTTP\_FLAG\_BREAK\_CHAR flag causes the function to stop reading}
1026       \textcolor{comment}{//data as soon as the specified break character is encountered}
1027       \textcolor{keywordflow}{if}(\hyperlink{tcp_8h_aa2585d779da0ab21273a8d92de9a0ebe}{flags} & \hyperlink{http__common_8h_a8d138d340435fa37e2a654238ed6deaba35b8fa7e52b8ce76e57c55ae530addbf}{HTTP\_FLAG\_BREAK\_CHAR})
1028       \{
1029          \textcolor{comment}{//Retrieve the break character code}
1030          c = \hyperlink{os__port_8h_a34a3aa6cbadec6a80ab1eae8efd0083d}{LSB}(\hyperlink{tcp_8h_aa2585d779da0ab21273a8d92de9a0ebe}{flags});
1031 
1032          \textcolor{comment}{//Search for the specified break character}
1033          \textcolor{keywordflow}{for}(i = 0; i < n && connection->buffer[connection->bufferPos + i] != \hyperlink{aria_8c_a5dadc28804036d1b82e1dc027e95c9a6}{c}; i++);
1034 
1035          \textcolor{comment}{//Adjust the number of data to read}
1036          n = \hyperlink{os__port_8h_a3acffbd305ee72dcd4593c0d8af64a4f}{MIN}(n, i + 1);
1037       \}
1038 
1039       \textcolor{comment}{//Copy data to user buffer}
1040       memcpy(\hyperlink{dtls__misc_8h_a5c239a1bb87b52b0f1d6d68c4749cd2a}{data}, connection->buffer + connection->bufferPos, n);
1041 
1042       \textcolor{comment}{//Advance current position}
1043       connection->bufferPos += \hyperlink{dhcpv6__common_8h_a5a648f5ec00c526b0dfa2df7a272c6c0}{n};
1044       \textcolor{comment}{//Total number of data that have been read}
1045       *received = \hyperlink{dhcpv6__common_8h_a5a648f5ec00c526b0dfa2df7a272c6c0}{n};
1046 
1047       \textcolor{comment}{//Successful processing}
1048       error = \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689cabf350750d0d4fabd8954c0f1e9bbae94}{NO\_ERROR};
1049    \}
1050    \textcolor{keywordflow}{else}
1051    \{
1052       \textcolor{comment}{//No more data available...}
1053       error = \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689ca8b7223773301a4f3dd811f1d35e13ce4}{ERROR\_END\_OF\_STREAM};
1054    \}
1055 
1056    \textcolor{comment}{//Return status code}
1057    \textcolor{keywordflow}{return} error;
1058 \textcolor{preprocessor}{#endif}
1059 \}
\end{DoxyCode}
\mbox{\Hypertarget{http__server__misc_8h_a8d6b785321ab0843c72699bbc8c9d51b}\label{http__server__misc_8h_a8d6b785321ab0843c72699bbc8c9d51b}} 
\index{http\+\_\+server\+\_\+misc.\+h@{http\+\_\+server\+\_\+misc.\+h}!http\+Send@{http\+Send}}
\index{http\+Send@{http\+Send}!http\+\_\+server\+\_\+misc.\+h@{http\+\_\+server\+\_\+misc.\+h}}
\subsubsection{\texorpdfstring{http\+Send()}{httpSend()}}
{\footnotesize\ttfamily \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689c}{error\+\_\+t} http\+Send (\begin{DoxyParamCaption}\item[{\hyperlink{http__server_8h_a3506ecffde998ab02629dca83587d2f9}{Http\+Connection} $\ast$}]{connection,  }\item[{const void $\ast$}]{data,  }\item[{size\+\_\+t}]{length,  }\item[{\hyperlink{compiler__port_8h_a12a1e9b3ce141648783a82445d02b58d}{uint\+\_\+t}}]{flags }\end{DoxyParamCaption})}



Send data to the client. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em connection} & Structure representing an H\+T\+TP connection \\
\hline
\mbox{\tt in}  & {\em data} & Pointer to a buffer containing the data to be transmitted \\
\hline
\mbox{\tt in}  & {\em length} & Number of bytes to be transmitted \\
\hline
\mbox{\tt in}  & {\em flags} & Set of flags that influences the behavior of this function \\
\hline
\end{DoxyParams}


Definition at line 940 of file http\+\_\+server\+\_\+misc.\+c.


\begin{DoxyCode}
942 \{
943 \textcolor{preprocessor}{#if (NET\_RTOS\_SUPPORT == ENABLED)}
944    \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689c}{error\_t} error;
945 
946 \textcolor{preprocessor}{#if (HTTP\_SERVER\_TLS\_SUPPORT == ENABLED)}
947    \textcolor{comment}{//Check whether a secure connection is being used}
948    \textcolor{keywordflow}{if}(connection->tlsContext != \hyperlink{group__BSPDefine_ga070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL})
949    \{
950       \textcolor{comment}{//Use TLS to transmit data to the client}
951       error = \hyperlink{tls_8c_a1b4b22502217a601f7f094403e700b4b}{tlsWrite}(connection->tlsContext, \hyperlink{dtls__misc_8h_a5c239a1bb87b52b0f1d6d68c4749cd2a}{data}, \hyperlink{dtls__misc_8h_ab43ca82dd7fa2a0e56f941032ef324c4}{length}, 
      \hyperlink{group__BSPDefine_ga070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL}, \hyperlink{tcp_8h_aa2585d779da0ab21273a8d92de9a0ebe}{flags});
952    \}
953    \textcolor{keywordflow}{else}
954 \textcolor{preprocessor}{#endif}
955    \{
956       \textcolor{comment}{//Transmit data to the client}
957       error = \hyperlink{socket_8c_aa4eeb3a3294d14d681675ba9f0d3e568}{socketSend}(connection->socket, \hyperlink{dtls__misc_8h_a5c239a1bb87b52b0f1d6d68c4749cd2a}{data}, \hyperlink{dtls__misc_8h_ab43ca82dd7fa2a0e56f941032ef324c4}{length}, 
      \hyperlink{group__BSPDefine_ga070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL}, \hyperlink{tcp_8h_aa2585d779da0ab21273a8d92de9a0ebe}{flags});
958    \}
959 
960    \textcolor{comment}{//Return status code}
961    \textcolor{keywordflow}{return} error;
962 \textcolor{preprocessor}{#else}
963    \textcolor{comment}{//Prevent buffer overflow}
964    \textcolor{keywordflow}{if}((connection->bufferLen + \hyperlink{dtls__misc_8h_ab43ca82dd7fa2a0e56f941032ef324c4}{length}) > \hyperlink{http__server_8h_a7323ad0fee234d179bd1f679496174d2}{HTTP\_SERVER\_BUFFER\_SIZE})
965       \textcolor{keywordflow}{return} \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689cabf3f6e48b0cfaea7cac34f4223cd8a57}{ERROR\_BUFFER\_OVERFLOW};
966 
967    \textcolor{comment}{//Copy user data}
968    memcpy(connection->buffer + connection->bufferLen, \hyperlink{dtls__misc_8h_a5c239a1bb87b52b0f1d6d68c4749cd2a}{data}, \hyperlink{dtls__misc_8h_ab43ca82dd7fa2a0e56f941032ef324c4}{length});
969    \textcolor{comment}{//Adjust the length of the buffer}
970    connection->bufferLen += \hyperlink{dtls__misc_8h_ab43ca82dd7fa2a0e56f941032ef324c4}{length};
971 
972    \textcolor{comment}{//Successful processing}
973    \textcolor{keywordflow}{return} \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689cabf350750d0d4fabd8954c0f1e9bbae94}{NO\_ERROR};
974 \textcolor{preprocessor}{#endif}
975 \}
\end{DoxyCode}
