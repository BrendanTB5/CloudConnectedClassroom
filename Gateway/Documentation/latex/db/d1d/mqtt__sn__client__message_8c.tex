\hypertarget{mqtt__sn__client__message_8c}{}\section{cyclone\+\_\+tcp/mqtt\+\_\+sn/mqtt\+\_\+sn\+\_\+client\+\_\+message.c File Reference}
\label{mqtt__sn__client__message_8c}\index{cyclone\+\_\+tcp/mqtt\+\_\+sn/mqtt\+\_\+sn\+\_\+client\+\_\+message.\+c@{cyclone\+\_\+tcp/mqtt\+\_\+sn/mqtt\+\_\+sn\+\_\+client\+\_\+message.\+c}}


M\+Q\+T\+T-\/\+SN message parsing and formatting.  


{\ttfamily \#include \char`\"{}core/net.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}mqtt\+\_\+sn/mqtt\+\_\+sn\+\_\+client.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}mqtt\+\_\+sn/mqtt\+\_\+sn\+\_\+client\+\_\+message.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}mqtt\+\_\+sn/mqtt\+\_\+sn\+\_\+client\+\_\+transport.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}mqtt\+\_\+sn/mqtt\+\_\+sn\+\_\+client\+\_\+misc.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}mqtt\+\_\+sn/mqtt\+\_\+sn\+\_\+message.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}mqtt\+\_\+sn/mqtt\+\_\+sn\+\_\+debug.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}debug.\+h\char`\"{}}\newline
\subsection*{Macros}
\begin{DoxyCompactItemize}
\item 
\#define \hyperlink{mqtt__sn__client__message_8c_afcdf5e66fd927a7f4cc64295acd20407}{T\+R\+A\+C\+E\+\_\+\+L\+E\+V\+EL}~\hyperlink{net__config_8h_a84a94bc8e8c71e7717663296513ed1d9}{M\+Q\+T\+T\+\_\+\+S\+N\+\_\+\+T\+R\+A\+C\+E\+\_\+\+L\+E\+V\+EL}
\end{DoxyCompactItemize}
\subsection*{Functions}
\begin{DoxyCompactItemize}
\item 
\hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689c}{error\+\_\+t} \hyperlink{mqtt__sn__client__message_8c_a852b40ae91fbf145a44da3cab0799349}{mqtt\+Sn\+Client\+Process\+Message} (\hyperlink{mqtt__sn__client_8h_aee99129ffa9bde57fd8b742f576ae3f5}{Mqtt\+Sn\+Client\+Context} $\ast$context, \hyperlink{structMqttSnMessage}{Mqtt\+Sn\+Message} $\ast$\hyperlink{pap_8h_a52f19d36a71e9b8ddea38fe00c291181}{message}, const \hyperlink{structIpAddr}{Ip\+Addr} $\ast$\hyperlink{ipcp_8h_a11542dd5a4de5976a89188df3d53b42d}{ip\+Addr}, \hyperlink{stdint_8h_a273cf69d639a59973b6019625df33e30}{uint16\+\_\+t} \hyperlink{dns__common_8h_a8e0798404bf2cf5dabb84c5ba9a4f236}{port})
\begin{DoxyCompactList}\small\item\em Process incoming M\+Q\+T\+T-\/\+SN message. \end{DoxyCompactList}\item 
\hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689c}{error\+\_\+t} \hyperlink{mqtt__sn__client__message_8c_ae3b5f1f8bea0adc0f71e64e69a6057b2}{mqtt\+Sn\+Client\+Process\+Gw\+Info} (\hyperlink{mqtt__sn__client_8h_aee99129ffa9bde57fd8b742f576ae3f5}{Mqtt\+Sn\+Client\+Context} $\ast$context, const \hyperlink{structMqttSnMessage}{Mqtt\+Sn\+Message} $\ast$\hyperlink{pap_8h_a52f19d36a71e9b8ddea38fe00c291181}{message}, const \hyperlink{structIpAddr}{Ip\+Addr} $\ast$\hyperlink{ipcp_8h_a11542dd5a4de5976a89188df3d53b42d}{ip\+Addr}, \hyperlink{stdint_8h_a273cf69d639a59973b6019625df33e30}{uint16\+\_\+t} \hyperlink{dns__common_8h_a8e0798404bf2cf5dabb84c5ba9a4f236}{port})
\begin{DoxyCompactList}\small\item\em Process incoming G\+W\+I\+N\+FO message. \end{DoxyCompactList}\item 
\hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689c}{error\+\_\+t} \hyperlink{mqtt__sn__client__message_8c_a6bb6e6c71a68ce554c35a5928ae123b0}{mqtt\+Sn\+Client\+Process\+Conn\+Ack} (\hyperlink{mqtt__sn__client_8h_aee99129ffa9bde57fd8b742f576ae3f5}{Mqtt\+Sn\+Client\+Context} $\ast$context, const \hyperlink{structMqttSnMessage}{Mqtt\+Sn\+Message} $\ast$\hyperlink{pap_8h_a52f19d36a71e9b8ddea38fe00c291181}{message})
\begin{DoxyCompactList}\small\item\em Process incoming C\+O\+N\+N\+A\+CK message. \end{DoxyCompactList}\item 
\hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689c}{error\+\_\+t} \hyperlink{mqtt__sn__client__message_8c_ac406b10e18ef00f095acb82fbbc3788d}{mqtt\+Sn\+Client\+Process\+Will\+Topic\+Req} (\hyperlink{mqtt__sn__client_8h_aee99129ffa9bde57fd8b742f576ae3f5}{Mqtt\+Sn\+Client\+Context} $\ast$context, const \hyperlink{structMqttSnMessage}{Mqtt\+Sn\+Message} $\ast$\hyperlink{pap_8h_a52f19d36a71e9b8ddea38fe00c291181}{message})
\begin{DoxyCompactList}\small\item\em Process incoming W\+I\+L\+L\+T\+O\+P\+I\+C\+R\+EQ message. \end{DoxyCompactList}\item 
\hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689c}{error\+\_\+t} \hyperlink{mqtt__sn__client__message_8c_a13a42a5e5021a5c412175b4e3a5c1424}{mqtt\+Sn\+Client\+Process\+Will\+Msg\+Req} (\hyperlink{mqtt__sn__client_8h_aee99129ffa9bde57fd8b742f576ae3f5}{Mqtt\+Sn\+Client\+Context} $\ast$context, const \hyperlink{structMqttSnMessage}{Mqtt\+Sn\+Message} $\ast$\hyperlink{pap_8h_a52f19d36a71e9b8ddea38fe00c291181}{message})
\begin{DoxyCompactList}\small\item\em Process incoming W\+I\+L\+L\+M\+S\+G\+R\+EQ message. \end{DoxyCompactList}\item 
\hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689c}{error\+\_\+t} \hyperlink{mqtt__sn__client__message_8c_af2e77f9976d8537b8123d1c9a516d8f9}{mqtt\+Sn\+Client\+Process\+Register} (\hyperlink{mqtt__sn__client_8h_aee99129ffa9bde57fd8b742f576ae3f5}{Mqtt\+Sn\+Client\+Context} $\ast$context, const \hyperlink{structMqttSnMessage}{Mqtt\+Sn\+Message} $\ast$\hyperlink{pap_8h_a52f19d36a71e9b8ddea38fe00c291181}{message})
\begin{DoxyCompactList}\small\item\em Process incoming R\+E\+G\+I\+S\+T\+ER message. \end{DoxyCompactList}\item 
\hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689c}{error\+\_\+t} \hyperlink{mqtt__sn__client__message_8c_a7c80786959337c6628f9a5a202e09446}{mqtt\+Sn\+Client\+Process\+Reg\+Ack} (\hyperlink{mqtt__sn__client_8h_aee99129ffa9bde57fd8b742f576ae3f5}{Mqtt\+Sn\+Client\+Context} $\ast$context, const \hyperlink{structMqttSnMessage}{Mqtt\+Sn\+Message} $\ast$\hyperlink{pap_8h_a52f19d36a71e9b8ddea38fe00c291181}{message})
\begin{DoxyCompactList}\small\item\em Process incoming R\+E\+G\+A\+CK message. \end{DoxyCompactList}\item 
\hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689c}{error\+\_\+t} \hyperlink{mqtt__sn__client__message_8c_adfb0ad5995ce169d040c4f9e5fb83ec4}{mqtt\+Sn\+Client\+Process\+Publish} (\hyperlink{mqtt__sn__client_8h_aee99129ffa9bde57fd8b742f576ae3f5}{Mqtt\+Sn\+Client\+Context} $\ast$context, const \hyperlink{structMqttSnMessage}{Mqtt\+Sn\+Message} $\ast$\hyperlink{pap_8h_a52f19d36a71e9b8ddea38fe00c291181}{message})
\begin{DoxyCompactList}\small\item\em Process incoming P\+U\+B\+L\+I\+SH message. \end{DoxyCompactList}\item 
\hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689c}{error\+\_\+t} \hyperlink{mqtt__sn__client__message_8c_a9b8af2098d0d316600c9e305615d8947}{mqtt\+Sn\+Client\+Process\+Pub\+Ack} (\hyperlink{mqtt__sn__client_8h_aee99129ffa9bde57fd8b742f576ae3f5}{Mqtt\+Sn\+Client\+Context} $\ast$context, const \hyperlink{structMqttSnMessage}{Mqtt\+Sn\+Message} $\ast$\hyperlink{pap_8h_a52f19d36a71e9b8ddea38fe00c291181}{message})
\begin{DoxyCompactList}\small\item\em Process incoming P\+U\+B\+A\+CK message. \end{DoxyCompactList}\item 
\hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689c}{error\+\_\+t} \hyperlink{mqtt__sn__client__message_8c_a71d8b174b6dbdddeced730e16a938984}{mqtt\+Sn\+Client\+Process\+Pub\+Rec} (\hyperlink{mqtt__sn__client_8h_aee99129ffa9bde57fd8b742f576ae3f5}{Mqtt\+Sn\+Client\+Context} $\ast$context, const \hyperlink{structMqttSnMessage}{Mqtt\+Sn\+Message} $\ast$\hyperlink{pap_8h_a52f19d36a71e9b8ddea38fe00c291181}{message})
\begin{DoxyCompactList}\small\item\em Process incoming P\+U\+B\+R\+EC message. \end{DoxyCompactList}\item 
\hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689c}{error\+\_\+t} \hyperlink{mqtt__sn__client__message_8c_aecb6c1ef6fde9e2c2672a67aec6fdca9}{mqtt\+Sn\+Client\+Process\+Pub\+Rel} (\hyperlink{mqtt__sn__client_8h_aee99129ffa9bde57fd8b742f576ae3f5}{Mqtt\+Sn\+Client\+Context} $\ast$context, const \hyperlink{structMqttSnMessage}{Mqtt\+Sn\+Message} $\ast$\hyperlink{pap_8h_a52f19d36a71e9b8ddea38fe00c291181}{message})
\begin{DoxyCompactList}\small\item\em Process incoming P\+U\+B\+R\+EL message. \end{DoxyCompactList}\item 
\hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689c}{error\+\_\+t} \hyperlink{mqtt__sn__client__message_8c_a88cc1304f15911563ebf177a9a29f48c}{mqtt\+Sn\+Client\+Process\+Pub\+Comp} (\hyperlink{mqtt__sn__client_8h_aee99129ffa9bde57fd8b742f576ae3f5}{Mqtt\+Sn\+Client\+Context} $\ast$context, const \hyperlink{structMqttSnMessage}{Mqtt\+Sn\+Message} $\ast$\hyperlink{pap_8h_a52f19d36a71e9b8ddea38fe00c291181}{message})
\begin{DoxyCompactList}\small\item\em Process incoming P\+U\+B\+C\+O\+MP message. \end{DoxyCompactList}\item 
\hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689c}{error\+\_\+t} \hyperlink{mqtt__sn__client__message_8c_adb5ed248526f29ff8707543f4f44525d}{mqtt\+Sn\+Client\+Process\+Sub\+Ack} (\hyperlink{mqtt__sn__client_8h_aee99129ffa9bde57fd8b742f576ae3f5}{Mqtt\+Sn\+Client\+Context} $\ast$context, const \hyperlink{structMqttSnMessage}{Mqtt\+Sn\+Message} $\ast$\hyperlink{pap_8h_a52f19d36a71e9b8ddea38fe00c291181}{message})
\begin{DoxyCompactList}\small\item\em Process incoming S\+U\+B\+A\+CK message. \end{DoxyCompactList}\item 
\hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689c}{error\+\_\+t} \hyperlink{mqtt__sn__client__message_8c_a72172e7d1931e9d6bacead45b10b487d}{mqtt\+Sn\+Client\+Process\+Unsub\+Ack} (\hyperlink{mqtt__sn__client_8h_aee99129ffa9bde57fd8b742f576ae3f5}{Mqtt\+Sn\+Client\+Context} $\ast$context, const \hyperlink{structMqttSnMessage}{Mqtt\+Sn\+Message} $\ast$\hyperlink{pap_8h_a52f19d36a71e9b8ddea38fe00c291181}{message})
\begin{DoxyCompactList}\small\item\em Process incoming U\+N\+S\+U\+B\+A\+CK message. \end{DoxyCompactList}\item 
\hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689c}{error\+\_\+t} \hyperlink{mqtt__sn__client__message_8c_af45f05c4af1df5dd2fa2fc41b2c40cc3}{mqtt\+Sn\+Client\+Process\+Ping\+Req} (\hyperlink{mqtt__sn__client_8h_aee99129ffa9bde57fd8b742f576ae3f5}{Mqtt\+Sn\+Client\+Context} $\ast$context, const \hyperlink{structMqttSnMessage}{Mqtt\+Sn\+Message} $\ast$\hyperlink{pap_8h_a52f19d36a71e9b8ddea38fe00c291181}{message})
\begin{DoxyCompactList}\small\item\em Process incoming P\+I\+N\+G\+R\+EQ message. \end{DoxyCompactList}\item 
\hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689c}{error\+\_\+t} \hyperlink{mqtt__sn__client__message_8c_a7e1ab492682f80e27d7378e933620212}{mqtt\+Sn\+Client\+Process\+Ping\+Resp} (\hyperlink{mqtt__sn__client_8h_aee99129ffa9bde57fd8b742f576ae3f5}{Mqtt\+Sn\+Client\+Context} $\ast$context, const \hyperlink{structMqttSnMessage}{Mqtt\+Sn\+Message} $\ast$\hyperlink{pap_8h_a52f19d36a71e9b8ddea38fe00c291181}{message})
\begin{DoxyCompactList}\small\item\em Process incoming P\+I\+N\+G\+R\+E\+SP message. \end{DoxyCompactList}\item 
\hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689c}{error\+\_\+t} \hyperlink{mqtt__sn__client__message_8c_a73d6d0de697faca0d6f1385eb8560a97}{mqtt\+Sn\+Client\+Process\+Disconnect} (\hyperlink{mqtt__sn__client_8h_aee99129ffa9bde57fd8b742f576ae3f5}{Mqtt\+Sn\+Client\+Context} $\ast$context, const \hyperlink{structMqttSnMessage}{Mqtt\+Sn\+Message} $\ast$\hyperlink{pap_8h_a52f19d36a71e9b8ddea38fe00c291181}{message})
\begin{DoxyCompactList}\small\item\em Process incoming D\+I\+S\+C\+O\+N\+N\+E\+CT message. \end{DoxyCompactList}\item 
\hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689c}{error\+\_\+t} \hyperlink{mqtt__sn__client__message_8c_a6216fdf8b0a84258e741896f869a9136}{mqtt\+Sn\+Client\+Process\+Will\+Topic\+Resp} (\hyperlink{mqtt__sn__client_8h_aee99129ffa9bde57fd8b742f576ae3f5}{Mqtt\+Sn\+Client\+Context} $\ast$context, const \hyperlink{structMqttSnMessage}{Mqtt\+Sn\+Message} $\ast$\hyperlink{pap_8h_a52f19d36a71e9b8ddea38fe00c291181}{message})
\begin{DoxyCompactList}\small\item\em Process incoming W\+I\+L\+L\+T\+O\+P\+I\+C\+R\+E\+SP message. \end{DoxyCompactList}\item 
\hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689c}{error\+\_\+t} \hyperlink{mqtt__sn__client__message_8c_a10bfdf89b6cd010417411507cf8bdb17}{mqtt\+Sn\+Client\+Process\+Will\+Msg\+Resp} (\hyperlink{mqtt__sn__client_8h_aee99129ffa9bde57fd8b742f576ae3f5}{Mqtt\+Sn\+Client\+Context} $\ast$context, const \hyperlink{structMqttSnMessage}{Mqtt\+Sn\+Message} $\ast$\hyperlink{pap_8h_a52f19d36a71e9b8ddea38fe00c291181}{message})
\begin{DoxyCompactList}\small\item\em Process incoming W\+I\+L\+L\+M\+S\+G\+R\+E\+SP message. \end{DoxyCompactList}\item 
\hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689c}{error\+\_\+t} \hyperlink{mqtt__sn__client__message_8c_a38ca7260c1fbba0dabcb84d4bb5a2528}{mqtt\+Sn\+Client\+Send\+Search\+Gw} (\hyperlink{mqtt__sn__client_8h_aee99129ffa9bde57fd8b742f576ae3f5}{Mqtt\+Sn\+Client\+Context} $\ast$context, \hyperlink{stdint_8h_aba7bc1797add20fe3efdf37ced1182c5}{uint8\+\_\+t} \hyperlink{mqtt__sn__common_8h_a3eba6170f6a65416202e05346c2d7541}{radius}, const \hyperlink{structIpAddr}{Ip\+Addr} $\ast$\hyperlink{ipcp_8h_a752e1719cf65f78dfec6274352cb56df}{dest\+Ip\+Addr}, \hyperlink{stdint_8h_a273cf69d639a59973b6019625df33e30}{uint16\+\_\+t} \hyperlink{udp_8h_af15d713ad2bc92686abfa6ab012b5039}{dest\+Port})
\begin{DoxyCompactList}\small\item\em Send S\+E\+A\+R\+C\+H\+GW message. \end{DoxyCompactList}\item 
\hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689c}{error\+\_\+t} \hyperlink{mqtt__sn__client__message_8c_a065452383ebdbb044bd37a36c8fbcc75}{mqtt\+Sn\+Client\+Send\+Connect} (\hyperlink{mqtt__sn__client_8h_aee99129ffa9bde57fd8b742f576ae3f5}{Mqtt\+Sn\+Client\+Context} $\ast$context, \hyperlink{compiler__port_8h_a812d16e5494522586b3784e55d479912}{bool\+\_\+t} \hyperlink{mqtt__sn__common_8h_a34fa00ac0448386d644eb92f070aadb6}{clean\+Session})
\begin{DoxyCompactList}\small\item\em Send C\+O\+N\+N\+E\+CT message. \end{DoxyCompactList}\item 
\hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689c}{error\+\_\+t} \hyperlink{mqtt__sn__client__message_8c_ae8de74ef1e947b45dc85affe65741c8a}{mqtt\+Sn\+Client\+Send\+Will\+Topic} (\hyperlink{mqtt__sn__client_8h_aee99129ffa9bde57fd8b742f576ae3f5}{Mqtt\+Sn\+Client\+Context} $\ast$context)
\begin{DoxyCompactList}\small\item\em Send W\+I\+L\+L\+T\+O\+P\+IC message. \end{DoxyCompactList}\item 
\hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689c}{error\+\_\+t} \hyperlink{mqtt__sn__client__message_8c_ab9c2686f0f3eb3415e00ac4180b6d1ea}{mqtt\+Sn\+Client\+Send\+Will\+Msg} (\hyperlink{mqtt__sn__client_8h_aee99129ffa9bde57fd8b742f576ae3f5}{Mqtt\+Sn\+Client\+Context} $\ast$context)
\begin{DoxyCompactList}\small\item\em Send W\+I\+L\+L\+M\+SG message. \end{DoxyCompactList}\item 
\hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689c}{error\+\_\+t} \hyperlink{mqtt__sn__client__message_8c_a8f404825e3cad7813b703b61aea12bcc}{mqtt\+Sn\+Client\+Send\+Register} (\hyperlink{mqtt__sn__client_8h_aee99129ffa9bde57fd8b742f576ae3f5}{Mqtt\+Sn\+Client\+Context} $\ast$context, const \hyperlink{compiler__port_8h_a40bb5262bf908c328fbcfbe5d29d0201}{char\+\_\+t} $\ast$\hyperlink{mqtt__sn__common_8h_a12172589bd20ef38ecbc6f4faf6ae3d0}{topic\+Name})
\begin{DoxyCompactList}\small\item\em Send R\+E\+G\+I\+S\+T\+ER message. \end{DoxyCompactList}\item 
\hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689c}{error\+\_\+t} \hyperlink{mqtt__sn__client__message_8c_a2f303b61851113e58d7ba6e0e734b08e}{mqtt\+Sn\+Client\+Send\+Reg\+Ack} (\hyperlink{mqtt__sn__client_8h_aee99129ffa9bde57fd8b742f576ae3f5}{Mqtt\+Sn\+Client\+Context} $\ast$context, \hyperlink{stdint_8h_a273cf69d639a59973b6019625df33e30}{uint16\+\_\+t} \hyperlink{mqtt__sn__common_8h_a2acf66d2c12f7b04f90ed704f5ac215c}{msg\+Id}, \hyperlink{stdint_8h_a273cf69d639a59973b6019625df33e30}{uint16\+\_\+t} \hyperlink{mqtt__sn__common_8h_a9f7eda5d21d45b5350db8cd0c451427a}{topic\+Id}, \hyperlink{mqtt__sn__common_8h_aa8ae09a48836472262f42c1f09638e9c}{Mqtt\+Sn\+Return\+Code} \hyperlink{mqtt__sn__common_8h_aa43af56bba229c3214623f0f0c23bf6e}{return\+Code})
\begin{DoxyCompactList}\small\item\em Send R\+E\+G\+A\+CK message. \end{DoxyCompactList}\item 
\hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689c}{error\+\_\+t} \hyperlink{mqtt__sn__client__message_8c_a7e170c895c48b07088a06135457afbc3}{mqtt\+Sn\+Client\+Send\+Publish} (\hyperlink{mqtt__sn__client_8h_aee99129ffa9bde57fd8b742f576ae3f5}{Mqtt\+Sn\+Client\+Context} $\ast$context, \hyperlink{stdint_8h_a273cf69d639a59973b6019625df33e30}{uint16\+\_\+t} \hyperlink{mqtt__sn__common_8h_a2acf66d2c12f7b04f90ed704f5ac215c}{msg\+Id}, const \hyperlink{compiler__port_8h_a40bb5262bf908c328fbcfbe5d29d0201}{char\+\_\+t} $\ast$\hyperlink{mqtt__sn__common_8h_a12172589bd20ef38ecbc6f4faf6ae3d0}{topic\+Name}, const \hyperlink{stdint_8h_aba7bc1797add20fe3efdf37ced1182c5}{uint8\+\_\+t} $\ast$\hyperlink{tftp__common_8h_a5c239a1bb87b52b0f1d6d68c4749cd2a}{data}, size\+\_\+t \hyperlink{ppp_8h_ab2b3adeb2a67e656ff030b56727fd0ac}{length}, \hyperlink{mqtt__sn__common_8h_a5037c476df69550c4f714d27359d38a6}{Mqtt\+Sn\+Qos\+Level} \hyperlink{mqtt__sn__common_8h_a65ee2b4b16f25052c441ff9959dcc7e7}{qos}, \hyperlink{compiler__port_8h_a812d16e5494522586b3784e55d479912}{bool\+\_\+t} \hyperlink{mqtt__sn__common_8h_ae25d47ab22bd975ad97012eddb6bbfce}{retain}, \hyperlink{compiler__port_8h_a812d16e5494522586b3784e55d479912}{bool\+\_\+t} \hyperlink{mqtt__sn__common_8h_a4e198deb57c49dad652a61d21ad478e6}{dup})
\begin{DoxyCompactList}\small\item\em Send P\+U\+B\+L\+I\+SH message. \end{DoxyCompactList}\item 
\hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689c}{error\+\_\+t} \hyperlink{mqtt__sn__client__message_8c_af488693ca181771dc767ef6b3fd3014a}{mqtt\+Sn\+Client\+Send\+Pub\+Ack} (\hyperlink{mqtt__sn__client_8h_aee99129ffa9bde57fd8b742f576ae3f5}{Mqtt\+Sn\+Client\+Context} $\ast$context, \hyperlink{stdint_8h_a273cf69d639a59973b6019625df33e30}{uint16\+\_\+t} \hyperlink{mqtt__sn__common_8h_a2acf66d2c12f7b04f90ed704f5ac215c}{msg\+Id}, \hyperlink{stdint_8h_a273cf69d639a59973b6019625df33e30}{uint16\+\_\+t} \hyperlink{mqtt__sn__common_8h_a9f7eda5d21d45b5350db8cd0c451427a}{topic\+Id}, \hyperlink{mqtt__sn__common_8h_aa8ae09a48836472262f42c1f09638e9c}{Mqtt\+Sn\+Return\+Code} \hyperlink{mqtt__sn__common_8h_aa43af56bba229c3214623f0f0c23bf6e}{return\+Code})
\begin{DoxyCompactList}\small\item\em Send P\+U\+B\+A\+CK message. \end{DoxyCompactList}\item 
\hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689c}{error\+\_\+t} \hyperlink{mqtt__sn__client__message_8c_ac8c5be25d943cda3efd1679d48f756a6}{mqtt\+Sn\+Client\+Send\+Pub\+Rec} (\hyperlink{mqtt__sn__client_8h_aee99129ffa9bde57fd8b742f576ae3f5}{Mqtt\+Sn\+Client\+Context} $\ast$context, \hyperlink{stdint_8h_a273cf69d639a59973b6019625df33e30}{uint16\+\_\+t} \hyperlink{mqtt__sn__common_8h_a2acf66d2c12f7b04f90ed704f5ac215c}{msg\+Id})
\begin{DoxyCompactList}\small\item\em Send P\+U\+B\+R\+EC message. \end{DoxyCompactList}\item 
\hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689c}{error\+\_\+t} \hyperlink{mqtt__sn__client__message_8c_a8d82c408d62580d958d24e397e05d161}{mqtt\+Sn\+Client\+Send\+Pub\+Rel} (\hyperlink{mqtt__sn__client_8h_aee99129ffa9bde57fd8b742f576ae3f5}{Mqtt\+Sn\+Client\+Context} $\ast$context, \hyperlink{stdint_8h_a273cf69d639a59973b6019625df33e30}{uint16\+\_\+t} \hyperlink{mqtt__sn__common_8h_a2acf66d2c12f7b04f90ed704f5ac215c}{msg\+Id})
\begin{DoxyCompactList}\small\item\em Send P\+U\+B\+R\+EL message. \end{DoxyCompactList}\item 
\hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689c}{error\+\_\+t} \hyperlink{mqtt__sn__client__message_8c_ad813b7a92cd1934b98298a11986a3468}{mqtt\+Sn\+Client\+Send\+Pub\+Comp} (\hyperlink{mqtt__sn__client_8h_aee99129ffa9bde57fd8b742f576ae3f5}{Mqtt\+Sn\+Client\+Context} $\ast$context, \hyperlink{stdint_8h_a273cf69d639a59973b6019625df33e30}{uint16\+\_\+t} \hyperlink{mqtt__sn__common_8h_a2acf66d2c12f7b04f90ed704f5ac215c}{msg\+Id})
\begin{DoxyCompactList}\small\item\em Send P\+U\+B\+C\+O\+MP message. \end{DoxyCompactList}\item 
\hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689c}{error\+\_\+t} \hyperlink{mqtt__sn__client__message_8c_aee1ec88500c030f48a42bcf86f13b8d8}{mqtt\+Sn\+Client\+Send\+Subscribe} (\hyperlink{mqtt__sn__client_8h_aee99129ffa9bde57fd8b742f576ae3f5}{Mqtt\+Sn\+Client\+Context} $\ast$context, const \hyperlink{compiler__port_8h_a40bb5262bf908c328fbcfbe5d29d0201}{char\+\_\+t} $\ast$\hyperlink{mqtt__sn__common_8h_a12172589bd20ef38ecbc6f4faf6ae3d0}{topic\+Name}, \hyperlink{mqtt__sn__common_8h_a5037c476df69550c4f714d27359d38a6}{Mqtt\+Sn\+Qos\+Level} \hyperlink{mqtt__sn__common_8h_a65ee2b4b16f25052c441ff9959dcc7e7}{qos})
\begin{DoxyCompactList}\small\item\em Send S\+U\+B\+S\+C\+R\+I\+BE message. \end{DoxyCompactList}\item 
\hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689c}{error\+\_\+t} \hyperlink{mqtt__sn__client__message_8c_abe5f55aaad9e4731caa9a813b41adc5b}{mqtt\+Sn\+Client\+Send\+Unsubscribe} (\hyperlink{mqtt__sn__client_8h_aee99129ffa9bde57fd8b742f576ae3f5}{Mqtt\+Sn\+Client\+Context} $\ast$context, const \hyperlink{compiler__port_8h_a40bb5262bf908c328fbcfbe5d29d0201}{char\+\_\+t} $\ast$\hyperlink{mqtt__sn__common_8h_a12172589bd20ef38ecbc6f4faf6ae3d0}{topic\+Name})
\begin{DoxyCompactList}\small\item\em Send U\+N\+S\+U\+B\+S\+C\+R\+I\+BE message. \end{DoxyCompactList}\item 
\hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689c}{error\+\_\+t} \hyperlink{mqtt__sn__client__message_8c_a6b0db34af4f76e875fd5e471de572589}{mqtt\+Sn\+Client\+Send\+Ping\+Req} (\hyperlink{mqtt__sn__client_8h_aee99129ffa9bde57fd8b742f576ae3f5}{Mqtt\+Sn\+Client\+Context} $\ast$context)
\begin{DoxyCompactList}\small\item\em Send P\+I\+N\+G\+R\+EQ message. \end{DoxyCompactList}\item 
\hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689c}{error\+\_\+t} \hyperlink{mqtt__sn__client__message_8c_a6df9a0a51c5adf7649de1dbb8fd05426}{mqtt\+Sn\+Client\+Send\+Ping\+Resp} (\hyperlink{mqtt__sn__client_8h_aee99129ffa9bde57fd8b742f576ae3f5}{Mqtt\+Sn\+Client\+Context} $\ast$context)
\begin{DoxyCompactList}\small\item\em Send P\+I\+N\+G\+R\+E\+SP message. \end{DoxyCompactList}\item 
\hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689c}{error\+\_\+t} \hyperlink{mqtt__sn__client__message_8c_a37cecab2e41579d1d84adbb92735a72c}{mqtt\+Sn\+Client\+Send\+Disconnect} (\hyperlink{mqtt__sn__client_8h_aee99129ffa9bde57fd8b742f576ae3f5}{Mqtt\+Sn\+Client\+Context} $\ast$context, \hyperlink{stdint_8h_a273cf69d639a59973b6019625df33e30}{uint16\+\_\+t} \hyperlink{mqtt__sn__common_8h_a5b14ef3e3e30242faa9bbef961493044}{duration})
\begin{DoxyCompactList}\small\item\em Send D\+I\+S\+C\+O\+N\+N\+E\+CT message. \end{DoxyCompactList}\item 
\hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689c}{error\+\_\+t} \hyperlink{mqtt__sn__client__message_8c_afe5e9dfec2ae9dba6dfabdcb17402d3f}{mqtt\+Sn\+Client\+Send\+Will\+Topic\+Upd} (\hyperlink{mqtt__sn__client_8h_aee99129ffa9bde57fd8b742f576ae3f5}{Mqtt\+Sn\+Client\+Context} $\ast$context)
\begin{DoxyCompactList}\small\item\em Send W\+I\+L\+L\+T\+O\+P\+I\+C\+U\+PD message. \end{DoxyCompactList}\item 
\hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689c}{error\+\_\+t} \hyperlink{mqtt__sn__client__message_8c_a32f7fa8e90f1dd58ca2ed8a83988e3b6}{mqtt\+Sn\+Client\+Send\+Will\+Msg\+Upd} (\hyperlink{mqtt__sn__client_8h_aee99129ffa9bde57fd8b742f576ae3f5}{Mqtt\+Sn\+Client\+Context} $\ast$context)
\begin{DoxyCompactList}\small\item\em Send W\+I\+L\+L\+M\+S\+G\+U\+PD message. \end{DoxyCompactList}\end{DoxyCompactItemize}


\subsection{Detailed Description}
M\+Q\+T\+T-\/\+SN message parsing and formatting. 

\hypertarget{pic32mz__ef__curiosity_8h_License}{}\subsection{License}\label{pic32mz__ef__curiosity_8h_License}
S\+P\+D\+X-\/\+License-\/\+Identifier\+: G\+P\+L-\/2.\+0-\/or-\/later

Copyright (C) 2010-\/2019 Oryx Embedded S\+A\+RL. All rights reserved.

This file is part of Cyclone\+T\+CP Open.

This program is free software; you can redistribute it and/or modify it under the terms of the G\+NU General Public License as published by the Free Software Foundation; either version 2 of the License, or (at your option) any later version.

This program is distributed in the hope that it will be useful, but W\+I\+T\+H\+O\+UT A\+NY W\+A\+R\+R\+A\+N\+TY; without even the implied warranty of M\+E\+R\+C\+H\+A\+N\+T\+A\+B\+I\+L\+I\+TY or F\+I\+T\+N\+E\+SS F\+OR A P\+A\+R\+T\+I\+C\+U\+L\+AR P\+U\+R\+P\+O\+SE. See the G\+NU General Public License for more details.

You should have received a copy of the G\+NU General Public License along with this program; if not, write to the Free Software Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-\/1301, U\+SA.

\begin{DoxyAuthor}{Author}
Oryx Embedded S\+A\+RL (www.\+oryx-\/embedded.\+com) 
\end{DoxyAuthor}
\begin{DoxyVersion}{Version}
1.\+9.\+6 
\end{DoxyVersion}


\subsection{Macro Definition Documentation}
\mbox{\Hypertarget{mqtt__sn__client__message_8c_afcdf5e66fd927a7f4cc64295acd20407}\label{mqtt__sn__client__message_8c_afcdf5e66fd927a7f4cc64295acd20407}} 
\index{mqtt\+\_\+sn\+\_\+client\+\_\+message.\+c@{mqtt\+\_\+sn\+\_\+client\+\_\+message.\+c}!T\+R\+A\+C\+E\+\_\+\+L\+E\+V\+EL@{T\+R\+A\+C\+E\+\_\+\+L\+E\+V\+EL}}
\index{T\+R\+A\+C\+E\+\_\+\+L\+E\+V\+EL@{T\+R\+A\+C\+E\+\_\+\+L\+E\+V\+EL}!mqtt\+\_\+sn\+\_\+client\+\_\+message.\+c@{mqtt\+\_\+sn\+\_\+client\+\_\+message.\+c}}
\subsubsection{\texorpdfstring{T\+R\+A\+C\+E\+\_\+\+L\+E\+V\+EL}{TRACE\_LEVEL}}
{\footnotesize\ttfamily \#define T\+R\+A\+C\+E\+\_\+\+L\+E\+V\+EL~\hyperlink{net__config_8h_a84a94bc8e8c71e7717663296513ed1d9}{M\+Q\+T\+T\+\_\+\+S\+N\+\_\+\+T\+R\+A\+C\+E\+\_\+\+L\+E\+V\+EL}}



Definition at line 32 of file mqtt\+\_\+sn\+\_\+client\+\_\+message.\+c.



\subsection{Function Documentation}
\mbox{\Hypertarget{mqtt__sn__client__message_8c_a6bb6e6c71a68ce554c35a5928ae123b0}\label{mqtt__sn__client__message_8c_a6bb6e6c71a68ce554c35a5928ae123b0}} 
\index{mqtt\+\_\+sn\+\_\+client\+\_\+message.\+c@{mqtt\+\_\+sn\+\_\+client\+\_\+message.\+c}!mqtt\+Sn\+Client\+Process\+Conn\+Ack@{mqtt\+Sn\+Client\+Process\+Conn\+Ack}}
\index{mqtt\+Sn\+Client\+Process\+Conn\+Ack@{mqtt\+Sn\+Client\+Process\+Conn\+Ack}!mqtt\+\_\+sn\+\_\+client\+\_\+message.\+c@{mqtt\+\_\+sn\+\_\+client\+\_\+message.\+c}}
\subsubsection{\texorpdfstring{mqtt\+Sn\+Client\+Process\+Conn\+Ack()}{mqttSnClientProcessConnAck()}}
{\footnotesize\ttfamily \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689c}{error\+\_\+t} mqtt\+Sn\+Client\+Process\+Conn\+Ack (\begin{DoxyParamCaption}\item[{\hyperlink{mqtt__sn__client_8h_aee99129ffa9bde57fd8b742f576ae3f5}{Mqtt\+Sn\+Client\+Context} $\ast$}]{context,  }\item[{const \hyperlink{structMqttSnMessage}{Mqtt\+Sn\+Message} $\ast$}]{message }\end{DoxyParamCaption})}



Process incoming C\+O\+N\+N\+A\+CK message. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em context} & Pointer to the M\+Q\+T\+T-\/\+SN client context \\
\hline
\mbox{\tt in}  & {\em message} & Pointer to the received M\+Q\+T\+T-\/\+SN message \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Error code 
\end{DoxyReturn}


Definition at line 237 of file mqtt\+\_\+sn\+\_\+client\+\_\+message.\+c.


\begin{DoxyCode}
239 \{
240    \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689c}{error\_t} error;
241    \hyperlink{mqtt__sn__common_8h_aa8ae09a48836472262f42c1f09638e9c}{MqttSnReturnCode} \hyperlink{mqtt__sn__common_8h_aa43af56bba229c3214623f0f0c23bf6e}{returnCode};
242 
243    \textcolor{comment}{//Parse CONNACK message}
244    error = \hyperlink{mqtt__sn__message_8c_a35eb74e1f7a31e7ff4d873ec5276ea92}{mqttSnParseConnAck}(message, &returnCode);
245 
246    \textcolor{comment}{//Valid message received?}
247    \textcolor{keywordflow}{if}(!error)
248    \{
249       \textcolor{comment}{//Check current state}
250       \textcolor{keywordflow}{if}(context->state == \hyperlink{mqtt__sn__client_8h_ac2c5b1752aff9aadfd267c2a11535071af7aeb72fac83c3e235aa59543c1da1bf}{MQTT\_SN\_CLIENT\_STATE\_SENDING\_REQ} &&
251          context->msgType == \hyperlink{mqtt__sn__common_8h_a0b5ccdae8aa73dc7c74ae2dfe62fd112a4c979545570ab87837cd7cb54799f566}{MQTT\_SN\_MSG\_TYPE\_CONNECT})
252       \{
253          \textcolor{comment}{//Notify the application that a CONNACK message has been received}
254          context->state = \hyperlink{mqtt__sn__client_8h_ac2c5b1752aff9aadfd267c2a11535071a9512423d440e0143284ff3e4ffaf2013}{MQTT\_SN\_CLIENT\_STATE\_RESP\_RECEIVED};
255          context->msgType = \hyperlink{mqtt__sn__common_8h_a0b5ccdae8aa73dc7c74ae2dfe62fd112af473b9ecc7101028dd6986d4c052fecd}{MQTT\_SN\_MSG\_TYPE\_CONNACK};
256          context->returnCode = \hyperlink{mqtt__sn__common_8h_aa43af56bba229c3214623f0f0c23bf6e}{returnCode};
257 
258          \textcolor{comment}{//The MQTT-SN gateway is alive}
259          context->keepAliveCounter = 0;
260       \}
261    \}
262 
263    \textcolor{comment}{//Return status code}
264    \textcolor{keywordflow}{return} error;
265 \}
\end{DoxyCode}
\mbox{\Hypertarget{mqtt__sn__client__message_8c_a73d6d0de697faca0d6f1385eb8560a97}\label{mqtt__sn__client__message_8c_a73d6d0de697faca0d6f1385eb8560a97}} 
\index{mqtt\+\_\+sn\+\_\+client\+\_\+message.\+c@{mqtt\+\_\+sn\+\_\+client\+\_\+message.\+c}!mqtt\+Sn\+Client\+Process\+Disconnect@{mqtt\+Sn\+Client\+Process\+Disconnect}}
\index{mqtt\+Sn\+Client\+Process\+Disconnect@{mqtt\+Sn\+Client\+Process\+Disconnect}!mqtt\+\_\+sn\+\_\+client\+\_\+message.\+c@{mqtt\+\_\+sn\+\_\+client\+\_\+message.\+c}}
\subsubsection{\texorpdfstring{mqtt\+Sn\+Client\+Process\+Disconnect()}{mqttSnClientProcessDisconnect()}}
{\footnotesize\ttfamily \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689c}{error\+\_\+t} mqtt\+Sn\+Client\+Process\+Disconnect (\begin{DoxyParamCaption}\item[{\hyperlink{mqtt__sn__client_8h_aee99129ffa9bde57fd8b742f576ae3f5}{Mqtt\+Sn\+Client\+Context} $\ast$}]{context,  }\item[{const \hyperlink{structMqttSnMessage}{Mqtt\+Sn\+Message} $\ast$}]{message }\end{DoxyParamCaption})}



Process incoming D\+I\+S\+C\+O\+N\+N\+E\+CT message. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em context} & Pointer to the M\+Q\+T\+T-\/\+SN client context \\
\hline
\mbox{\tt in}  & {\em message} & Pointer to the received M\+Q\+T\+T-\/\+SN message \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Error code 
\end{DoxyReturn}


Definition at line 810 of file mqtt\+\_\+sn\+\_\+client\+\_\+message.\+c.


\begin{DoxyCode}
812 \{
813    \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689c}{error\_t} error;
814    \hyperlink{stdint_8h_a273cf69d639a59973b6019625df33e30}{uint16\_t} \hyperlink{mqtt__sn__common_8h_a5b14ef3e3e30242faa9bbef961493044}{duration};
815 
816    \textcolor{comment}{//Parse DISCONNECT message}
817    error = \hyperlink{mqtt__sn__message_8c_a2f76ec7f356fe84020bef3693230f921}{mqttSnParseDisconnect}(message, &duration);
818 
819    \textcolor{comment}{//Valid message received?}
820    \textcolor{keywordflow}{if}(!error)
821    \{
822       \textcolor{comment}{//The gateway indicates that it wants to close the connection}
823       context->state = \hyperlink{mqtt__sn__client_8h_ac2c5b1752aff9aadfd267c2a11535071a9d08c1be6a78b37a6f433f52bf0e0092}{MQTT\_SN\_CLIENT\_STATE\_DISCONNECTING};
824    \}
825 
826    \textcolor{comment}{//Return status code}
827    \textcolor{keywordflow}{return} error;
828 \}
\end{DoxyCode}
\mbox{\Hypertarget{mqtt__sn__client__message_8c_ae3b5f1f8bea0adc0f71e64e69a6057b2}\label{mqtt__sn__client__message_8c_ae3b5f1f8bea0adc0f71e64e69a6057b2}} 
\index{mqtt\+\_\+sn\+\_\+client\+\_\+message.\+c@{mqtt\+\_\+sn\+\_\+client\+\_\+message.\+c}!mqtt\+Sn\+Client\+Process\+Gw\+Info@{mqtt\+Sn\+Client\+Process\+Gw\+Info}}
\index{mqtt\+Sn\+Client\+Process\+Gw\+Info@{mqtt\+Sn\+Client\+Process\+Gw\+Info}!mqtt\+\_\+sn\+\_\+client\+\_\+message.\+c@{mqtt\+\_\+sn\+\_\+client\+\_\+message.\+c}}
\subsubsection{\texorpdfstring{mqtt\+Sn\+Client\+Process\+Gw\+Info()}{mqttSnClientProcessGwInfo()}}
{\footnotesize\ttfamily \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689c}{error\+\_\+t} mqtt\+Sn\+Client\+Process\+Gw\+Info (\begin{DoxyParamCaption}\item[{\hyperlink{mqtt__sn__client_8h_aee99129ffa9bde57fd8b742f576ae3f5}{Mqtt\+Sn\+Client\+Context} $\ast$}]{context,  }\item[{const \hyperlink{structMqttSnMessage}{Mqtt\+Sn\+Message} $\ast$}]{message,  }\item[{const \hyperlink{structIpAddr}{Ip\+Addr} $\ast$}]{ip\+Addr,  }\item[{\hyperlink{stdint_8h_a273cf69d639a59973b6019625df33e30}{uint16\+\_\+t}}]{port }\end{DoxyParamCaption})}



Process incoming G\+W\+I\+N\+FO message. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em context} & Pointer to the M\+Q\+T\+T-\/\+SN client context \\
\hline
\mbox{\tt in}  & {\em message} & Pointer to the received M\+Q\+T\+T-\/\+SN message \\
\hline
\mbox{\tt in}  & {\em ip\+Addr} & Source IP address \\
\hline
\mbox{\tt in}  & {\em port} & Source port \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Error code 
\end{DoxyReturn}


Definition at line 200 of file mqtt\+\_\+sn\+\_\+client\+\_\+message.\+c.


\begin{DoxyCode}
202 \{
203    \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689c}{error\_t} error;
204    \hyperlink{stdint_8h_aba7bc1797add20fe3efdf37ced1182c5}{uint8\_t} \hyperlink{mqtt__sn__common_8h_a839c8eaa3240a2a4206e4afb1c50f327}{gwId};
205    \textcolor{keyword}{const} \hyperlink{stdint_8h_aba7bc1797add20fe3efdf37ced1182c5}{uint8\_t} *\hyperlink{mqtt__sn__common_8h_aa53d4ce1397134077209e0324224059f}{gwAdd};
206    \textcolor{keywordtype}{size\_t} gwAddLen;
207 
208    \textcolor{comment}{//Parse GWINFO message}
209    error = \hyperlink{mqtt__sn__message_8c_a525446cbeff5a7a6dca38494236a64bb}{mqttSnParseGwInfo}(message, &gwId, &gwAdd, &gwAddLen);
210 
211    \textcolor{comment}{//Valid message received?}
212    \textcolor{keywordflow}{if}(!error)
213    \{
214       \textcolor{comment}{//Check current state}
215       \textcolor{keywordflow}{if}(context->state == \hyperlink{mqtt__sn__client_8h_ac2c5b1752aff9aadfd267c2a11535071a467b75c7773b826b5bd91423b6bd91fc}{MQTT\_SN\_CLIENT\_STATE\_SEARCHING})
216       \{
217          \textcolor{comment}{//Notify the application that a GWINFO message has been received}
218          context->state = \hyperlink{mqtt__sn__client_8h_ac2c5b1752aff9aadfd267c2a11535071a9512423d440e0143284ff3e4ffaf2013}{MQTT\_SN\_CLIENT\_STATE\_RESP\_RECEIVED};
219          context->msgType = \hyperlink{mqtt__sn__common_8h_a0b5ccdae8aa73dc7c74ae2dfe62fd112a30bbcb61a716198dc41655b74be7d442}{MQTT\_SN\_MSG\_TYPE\_GWINFO};
220          context->gwIpAddr = *\hyperlink{mib__common_8h_a3860e959b1b7dd73686a6e11424805e2}{ipAddr};
221          context->gwPort = \hyperlink{dns__common_8h_a8e0798404bf2cf5dabb84c5ba9a4f236}{port};
222       \}
223    \}
224 
225    \textcolor{comment}{//Return status code}
226    \textcolor{keywordflow}{return} error;
227 \}
\end{DoxyCode}
\mbox{\Hypertarget{mqtt__sn__client__message_8c_a852b40ae91fbf145a44da3cab0799349}\label{mqtt__sn__client__message_8c_a852b40ae91fbf145a44da3cab0799349}} 
\index{mqtt\+\_\+sn\+\_\+client\+\_\+message.\+c@{mqtt\+\_\+sn\+\_\+client\+\_\+message.\+c}!mqtt\+Sn\+Client\+Process\+Message@{mqtt\+Sn\+Client\+Process\+Message}}
\index{mqtt\+Sn\+Client\+Process\+Message@{mqtt\+Sn\+Client\+Process\+Message}!mqtt\+\_\+sn\+\_\+client\+\_\+message.\+c@{mqtt\+\_\+sn\+\_\+client\+\_\+message.\+c}}
\subsubsection{\texorpdfstring{mqtt\+Sn\+Client\+Process\+Message()}{mqttSnClientProcessMessage()}}
{\footnotesize\ttfamily \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689c}{error\+\_\+t} mqtt\+Sn\+Client\+Process\+Message (\begin{DoxyParamCaption}\item[{\hyperlink{mqtt__sn__client_8h_aee99129ffa9bde57fd8b742f576ae3f5}{Mqtt\+Sn\+Client\+Context} $\ast$}]{context,  }\item[{\hyperlink{structMqttSnMessage}{Mqtt\+Sn\+Message} $\ast$}]{message,  }\item[{const \hyperlink{structIpAddr}{Ip\+Addr} $\ast$}]{ip\+Addr,  }\item[{\hyperlink{stdint_8h_a273cf69d639a59973b6019625df33e30}{uint16\+\_\+t}}]{port }\end{DoxyParamCaption})}



Process incoming M\+Q\+T\+T-\/\+SN message. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em context} & Pointer to the M\+Q\+T\+T-\/\+SN client context \\
\hline
\mbox{\tt in}  & {\em message} & Pointer to the received M\+Q\+T\+T-\/\+SN message \\
\hline
\mbox{\tt in}  & {\em ip\+Addr} & Source IP address \\
\hline
\mbox{\tt in}  & {\em port} & Source port \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Error code 
\end{DoxyReturn}


Definition at line 57 of file mqtt\+\_\+sn\+\_\+client\+\_\+message.\+c.


\begin{DoxyCode}
59 \{
60    \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689c}{error\_t} error;
61    \hyperlink{mqtt__sn__common_8h_a0b5ccdae8aa73dc7c74ae2dfe62fd112}{MqttSnMsgType} \hyperlink{resource__manager_8h_a12e46a33bfe90638e58ef067c6fd4a6e}{type};
62 
63    \textcolor{comment}{//Parse MQTT-SN message header}
64    error = \hyperlink{mqtt__sn__message_8c_a45575f6155c83f9f5626aff7045b5d36}{mqttSnParseHeader}(message, &type);
65 
66    \textcolor{comment}{//Check status code}
67    \textcolor{keywordflow}{if}(!error)
68    \{
69       \textcolor{comment}{//Debug message}
70       \hyperlink{debug_8h_a7339bfd784193a5c79efcef2eeb2d6df}{TRACE\_INFO}(\textcolor{stringliteral}{"%s message received (%"} \hyperlink{compiler__port_8h_a2b7b0557dc6cd786df02dafbb51f5292}{PRIuSIZE} \textcolor{stringliteral}{" bytes)...\(\backslash\)r\(\backslash\)n"},
71          \hyperlink{mqtt__sn__debug_8c_a4b77466726eafcff4fecdc4c719392a6}{mqttSnGetMessageName}(type), message->\hyperlink{structMqttSnMessage_a717fa07b0fe9c37cba433a2e913332d0}{length});
72 
73       \textcolor{comment}{//Dump the contents of the message for debugging purpose}
74       \hyperlink{mqtt__sn__debug_8c_a7b37acb16cbf453ab38f1f61de6de681}{mqttSnDumpMessage}(message->\hyperlink{structMqttSnMessage_a8e68c69d0e3ee59c0cc88aa146fe489a}{buffer}, message->\hyperlink{structMqttSnMessage_a717fa07b0fe9c37cba433a2e913332d0}{length});
75 
76       \textcolor{comment}{//Check message type}
77       \textcolor{keywordflow}{switch}(type)
78       \{
79       \textcolor{comment}{//GWINFO message received?}
80       \textcolor{keywordflow}{case} \hyperlink{mqtt__sn__common_8h_a0b5ccdae8aa73dc7c74ae2dfe62fd112a30bbcb61a716198dc41655b74be7d442}{MQTT\_SN\_MSG\_TYPE\_GWINFO}:
81          \textcolor{comment}{//Process incoming GWINFO message}
82          error = \hyperlink{mqtt__sn__client__message_8c_ae3b5f1f8bea0adc0f71e64e69a6057b2}{mqttSnClientProcessGwInfo}(context, message, ipAddr, 
      \hyperlink{dns__common_8h_a8e0798404bf2cf5dabb84c5ba9a4f236}{port});
83          \textcolor{keywordflow}{break};
84       \textcolor{comment}{//CONNACK message received?}
85       \textcolor{keywordflow}{case} \hyperlink{mqtt__sn__common_8h_a0b5ccdae8aa73dc7c74ae2dfe62fd112af473b9ecc7101028dd6986d4c052fecd}{MQTT\_SN\_MSG\_TYPE\_CONNACK}:
86          \textcolor{comment}{//Process incoming CONNACK message}
87          error = \hyperlink{mqtt__sn__client__message_8c_a6bb6e6c71a68ce554c35a5928ae123b0}{mqttSnClientProcessConnAck}(context, message);
88          \textcolor{keywordflow}{break};
89       \textcolor{comment}{//WILLTOPICREQ message received?}
90       \textcolor{keywordflow}{case} \hyperlink{mqtt__sn__common_8h_a0b5ccdae8aa73dc7c74ae2dfe62fd112a78a252b219215a8899fd9a993635b44e}{MQTT\_SN\_MSG\_TYPE\_WILLTOPICREQ}:
91          \textcolor{comment}{//Process incoming WILLTOPICREQ message}
92          error = \hyperlink{mqtt__sn__client__message_8c_ac406b10e18ef00f095acb82fbbc3788d}{mqttSnClientProcessWillTopicReq}(context, message);
93          \textcolor{keywordflow}{break};
94       \textcolor{comment}{//WILLMSGREQ message received?}
95       \textcolor{keywordflow}{case} \hyperlink{mqtt__sn__common_8h_a0b5ccdae8aa73dc7c74ae2dfe62fd112ab05fb88faea9a52d4584f76adeba70ce}{MQTT\_SN\_MSG\_TYPE\_WILLMSGREQ}:
96          \textcolor{comment}{//Process incoming WILLMSGREQ message}
97          error = \hyperlink{mqtt__sn__client__message_8c_a13a42a5e5021a5c412175b4e3a5c1424}{mqttSnClientProcessWillMsgReq}(context, message);
98          \textcolor{keywordflow}{break};
99       \textcolor{comment}{//REGISTER message received?}
100       \textcolor{keywordflow}{case} \hyperlink{mqtt__sn__common_8h_a0b5ccdae8aa73dc7c74ae2dfe62fd112a74d8f28e6bd857bad8753800d962b118}{MQTT\_SN\_MSG\_TYPE\_REGISTER}:
101          \textcolor{comment}{//Process incoming REGISTER message}
102          error = \hyperlink{mqtt__sn__client__message_8c_af2e77f9976d8537b8123d1c9a516d8f9}{mqttSnClientProcessRegister}(context, message);
103          \textcolor{keywordflow}{break};
104       \textcolor{comment}{//REGACK message received?}
105       \textcolor{keywordflow}{case} \hyperlink{mqtt__sn__common_8h_a0b5ccdae8aa73dc7c74ae2dfe62fd112adba83eda8e1643116d68daffce9c9923}{MQTT\_SN\_MSG\_TYPE\_REGACK}:
106          \textcolor{comment}{//Process incoming REGACK message}
107          error = \hyperlink{mqtt__sn__client__message_8c_a7c80786959337c6628f9a5a202e09446}{mqttSnClientProcessRegAck}(context, message);
108          \textcolor{keywordflow}{break};
109       \textcolor{comment}{//PUBLISH message received?}
110       \textcolor{keywordflow}{case} \hyperlink{mqtt__sn__common_8h_a0b5ccdae8aa73dc7c74ae2dfe62fd112a37c9bc96e12d4079199211d7aeda5398}{MQTT\_SN\_MSG\_TYPE\_PUBLISH}:
111          \textcolor{comment}{//Process incoming PUBLISH message}
112          error = \hyperlink{mqtt__sn__client__message_8c_adfb0ad5995ce169d040c4f9e5fb83ec4}{mqttSnClientProcessPublish}(context, message);
113          \textcolor{keywordflow}{break};
114       \textcolor{comment}{//PUBACK message received?}
115       \textcolor{keywordflow}{case} \hyperlink{mqtt__sn__common_8h_a0b5ccdae8aa73dc7c74ae2dfe62fd112a647bc2e2152d672947eb838eccbb233f}{MQTT\_SN\_MSG\_TYPE\_PUBACK}:
116          \textcolor{comment}{//Process incoming PUBACK message}
117          error = \hyperlink{mqtt__sn__client__message_8c_a9b8af2098d0d316600c9e305615d8947}{mqttSnClientProcessPubAck}(context, message);
118          \textcolor{keywordflow}{break};
119       \textcolor{comment}{//PUBREC message received?}
120       \textcolor{keywordflow}{case} \hyperlink{mqtt__sn__common_8h_a0b5ccdae8aa73dc7c74ae2dfe62fd112a92af8cf59403b5ad7e68c136d5af9ce9}{MQTT\_SN\_MSG\_TYPE\_PUBREC}:
121          \textcolor{comment}{//Process incoming PUBREC message}
122          error = \hyperlink{mqtt__sn__client__message_8c_a71d8b174b6dbdddeced730e16a938984}{mqttSnClientProcessPubRec}(context, message);
123          \textcolor{keywordflow}{break};
124       \textcolor{comment}{//PUBREL message received?}
125       \textcolor{keywordflow}{case} \hyperlink{mqtt__sn__common_8h_a0b5ccdae8aa73dc7c74ae2dfe62fd112ac8a07a546f23a523b469944a26de0ab1}{MQTT\_SN\_MSG\_TYPE\_PUBREL}:
126          \textcolor{comment}{//Process incoming PUBREL message}
127          error = \hyperlink{mqtt__sn__client__message_8c_aecb6c1ef6fde9e2c2672a67aec6fdca9}{mqttSnClientProcessPubRel}(context, message);
128          \textcolor{keywordflow}{break};
129       \textcolor{comment}{//PUBCOMP message received?}
130       \textcolor{keywordflow}{case} \hyperlink{mqtt__sn__common_8h_a0b5ccdae8aa73dc7c74ae2dfe62fd112ab0101d318c3bdf33f9d0650e80330ec6}{MQTT\_SN\_MSG\_TYPE\_PUBCOMP}:
131          \textcolor{comment}{//Process incoming PUBCOMP message}
132          error = \hyperlink{mqtt__sn__client__message_8c_a88cc1304f15911563ebf177a9a29f48c}{mqttSnClientProcessPubComp}(context, message);
133          \textcolor{keywordflow}{break};
134       \textcolor{comment}{//SUBACK message received?}
135       \textcolor{keywordflow}{case} \hyperlink{mqtt__sn__common_8h_a0b5ccdae8aa73dc7c74ae2dfe62fd112a10da2a99ac13fe51103649cdda53b89c}{MQTT\_SN\_MSG\_TYPE\_SUBACK}:
136          \textcolor{comment}{//Process incoming SUBACK message}
137          error = \hyperlink{mqtt__sn__client__message_8c_adb5ed248526f29ff8707543f4f44525d}{mqttSnClientProcessSubAck}(context, message);
138          \textcolor{keywordflow}{break};
139       \textcolor{comment}{//UNSUBACK message received?}
140       \textcolor{keywordflow}{case} \hyperlink{mqtt__sn__common_8h_a0b5ccdae8aa73dc7c74ae2dfe62fd112a248ff43605e58a25ff0f2f1ebb22e376}{MQTT\_SN\_MSG\_TYPE\_UNSUBACK}:
141          \textcolor{comment}{//Process incoming UNSUBACK message}
142          error = \hyperlink{mqtt__sn__client__message_8c_a72172e7d1931e9d6bacead45b10b487d}{mqttSnClientProcessUnsubAck}(context, message);
143          \textcolor{keywordflow}{break};
144       \textcolor{comment}{//PINGREQ message received?}
145       \textcolor{keywordflow}{case} \hyperlink{mqtt__sn__common_8h_a0b5ccdae8aa73dc7c74ae2dfe62fd112a194c6e9f117a199acf63ea58f394d57d}{MQTT\_SN\_MSG\_TYPE\_PINGREQ}:
146          \textcolor{comment}{//Process incoming PINGREQ message}
147          error = \hyperlink{mqtt__sn__client__message_8c_af45f05c4af1df5dd2fa2fc41b2c40cc3}{mqttSnClientProcessPingReq}(context, message);
148          \textcolor{keywordflow}{break};
149       \textcolor{comment}{//PINGRESP message received?}
150       \textcolor{keywordflow}{case} \hyperlink{mqtt__sn__common_8h_a0b5ccdae8aa73dc7c74ae2dfe62fd112a7b0b690c0417ac129942d2b7bcc4c033}{MQTT\_SN\_MSG\_TYPE\_PINGRESP}:
151          \textcolor{comment}{//Process incoming PINGRESP message}
152          error = \hyperlink{mqtt__sn__client__message_8c_a7e1ab492682f80e27d7378e933620212}{mqttSnClientProcessPingResp}(context, message);
153          \textcolor{keywordflow}{break};
154       \textcolor{comment}{//DISCONNECT message received?}
155       \textcolor{keywordflow}{case} \hyperlink{mqtt__sn__common_8h_a0b5ccdae8aa73dc7c74ae2dfe62fd112a1e564879cc7dd8cd6462507b52ae2508}{MQTT\_SN\_MSG\_TYPE\_DISCONNECT}:
156          \textcolor{comment}{//Process incoming DISCONNECT message}
157          error = \hyperlink{mqtt__sn__client__message_8c_a73d6d0de697faca0d6f1385eb8560a97}{mqttSnClientProcessDisconnect}(context, message);
158          \textcolor{keywordflow}{break};
159       \textcolor{comment}{//WILLTOPICRESP message received?}
160       \textcolor{keywordflow}{case} \hyperlink{mqtt__sn__common_8h_a0b5ccdae8aa73dc7c74ae2dfe62fd112a0a7130c585f58603d4ff5e5c76c721c4}{MQTT\_SN\_MSG\_TYPE\_WILLTOPICRESP}:
161          \textcolor{comment}{//Process incoming DISCONNECT message}
162          error = \hyperlink{mqtt__sn__client__message_8c_a6216fdf8b0a84258e741896f869a9136}{mqttSnClientProcessWillTopicResp}(context, message);
163          \textcolor{keywordflow}{break};
164       \textcolor{comment}{//WILLMSGRESP message received?}
165       \textcolor{keywordflow}{case} \hyperlink{mqtt__sn__common_8h_a0b5ccdae8aa73dc7c74ae2dfe62fd112a9765d8cdab39800ffcc84b85eb634da3}{MQTT\_SN\_MSG\_TYPE\_WILLMSGRESP}:
166          \textcolor{comment}{//Process incoming DISCONNECT message}
167          error = \hyperlink{mqtt__sn__client__message_8c_a10bfdf89b6cd010417411507cf8bdb17}{mqttSnClientProcessWillMsgResp}(context, message);
168          \textcolor{keywordflow}{break};
169       \textcolor{comment}{//Unknown message received?}
170       \textcolor{keywordflow}{default}:
171          \textcolor{comment}{//Report an error}
172          error = \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689ca2daa3c161edaa4477d1ae954c2136008}{ERROR\_INVALID\_TYPE};
173          \textcolor{keywordflow}{break};
174       \}
175    \}
176    \textcolor{keywordflow}{else}
177    \{
178       \textcolor{comment}{//Debug message}
179       \hyperlink{debug_8h_a72b9761add7486364dba449091cd2579}{TRACE\_WARNING}(\textcolor{stringliteral}{"Invalid message received (%"} \hyperlink{compiler__port_8h_a2b7b0557dc6cd786df02dafbb51f5292}{PRIuSIZE} \textcolor{stringliteral}{" bytes)...\(\backslash\)r\(\backslash\)n"},
180          message->\hyperlink{structMqttSnMessage_a717fa07b0fe9c37cba433a2e913332d0}{length});
181 
182       \textcolor{comment}{//Dump the contents of the message}
183       \hyperlink{debug_8h_a1f71019169d85407d8827300ed43bdf0}{TRACE\_DEBUG\_ARRAY}(\textcolor{stringliteral}{"  "}, message->\hyperlink{structMqttSnMessage_a8e68c69d0e3ee59c0cc88aa146fe489a}{buffer}, message->
      \hyperlink{structMqttSnMessage_a717fa07b0fe9c37cba433a2e913332d0}{length});
184    \}
185 
186    \textcolor{comment}{//Return status code}
187    \textcolor{keywordflow}{return} error;
188 \}
\end{DoxyCode}
\mbox{\Hypertarget{mqtt__sn__client__message_8c_af45f05c4af1df5dd2fa2fc41b2c40cc3}\label{mqtt__sn__client__message_8c_af45f05c4af1df5dd2fa2fc41b2c40cc3}} 
\index{mqtt\+\_\+sn\+\_\+client\+\_\+message.\+c@{mqtt\+\_\+sn\+\_\+client\+\_\+message.\+c}!mqtt\+Sn\+Client\+Process\+Ping\+Req@{mqtt\+Sn\+Client\+Process\+Ping\+Req}}
\index{mqtt\+Sn\+Client\+Process\+Ping\+Req@{mqtt\+Sn\+Client\+Process\+Ping\+Req}!mqtt\+\_\+sn\+\_\+client\+\_\+message.\+c@{mqtt\+\_\+sn\+\_\+client\+\_\+message.\+c}}
\subsubsection{\texorpdfstring{mqtt\+Sn\+Client\+Process\+Ping\+Req()}{mqttSnClientProcessPingReq()}}
{\footnotesize\ttfamily \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689c}{error\+\_\+t} mqtt\+Sn\+Client\+Process\+Ping\+Req (\begin{DoxyParamCaption}\item[{\hyperlink{mqtt__sn__client_8h_aee99129ffa9bde57fd8b742f576ae3f5}{Mqtt\+Sn\+Client\+Context} $\ast$}]{context,  }\item[{const \hyperlink{structMqttSnMessage}{Mqtt\+Sn\+Message} $\ast$}]{message }\end{DoxyParamCaption})}



Process incoming P\+I\+N\+G\+R\+EQ message. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em context} & Pointer to the M\+Q\+T\+T-\/\+SN client context \\
\hline
\mbox{\tt in}  & {\em message} & Pointer to the received M\+Q\+T\+T-\/\+SN message \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Error code 
\end{DoxyReturn}


Definition at line 745 of file mqtt\+\_\+sn\+\_\+client\+\_\+message.\+c.


\begin{DoxyCode}
747 \{
748    \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689c}{error\_t} error;
749    \textcolor{keyword}{const} \hyperlink{compiler__port_8h_a40bb5262bf908c328fbcfbe5d29d0201}{char\_t} *\hyperlink{mqtt__sn__common_8h_aaaf873d7efb58d9ccdddc5c8569e092b}{clientId};
750 
751    \textcolor{comment}{//Parse PINGREQ message}
752    error = \hyperlink{mqtt__sn__message_8c_aacced326a302af1eba6216ef91f2be22}{mqttSnParsePingReq}(message, &clientId);
753 
754    \textcolor{comment}{//Valid message received?}
755    \textcolor{keywordflow}{if}(!error)
756    \{
757       \textcolor{comment}{//A client shall answer with a PINGRESP message when it receives a}
758       \textcolor{comment}{//PINGREQ message from the GW to which it is connected}
759       error = \hyperlink{mqtt__sn__client__message_8c_a6df9a0a51c5adf7649de1dbb8fd05426}{mqttSnClientSendPingResp}(context);
760    \}
761 
762    \textcolor{comment}{//Return status code}
763    \textcolor{keywordflow}{return} error;
764 \}
\end{DoxyCode}
\mbox{\Hypertarget{mqtt__sn__client__message_8c_a7e1ab492682f80e27d7378e933620212}\label{mqtt__sn__client__message_8c_a7e1ab492682f80e27d7378e933620212}} 
\index{mqtt\+\_\+sn\+\_\+client\+\_\+message.\+c@{mqtt\+\_\+sn\+\_\+client\+\_\+message.\+c}!mqtt\+Sn\+Client\+Process\+Ping\+Resp@{mqtt\+Sn\+Client\+Process\+Ping\+Resp}}
\index{mqtt\+Sn\+Client\+Process\+Ping\+Resp@{mqtt\+Sn\+Client\+Process\+Ping\+Resp}!mqtt\+\_\+sn\+\_\+client\+\_\+message.\+c@{mqtt\+\_\+sn\+\_\+client\+\_\+message.\+c}}
\subsubsection{\texorpdfstring{mqtt\+Sn\+Client\+Process\+Ping\+Resp()}{mqttSnClientProcessPingResp()}}
{\footnotesize\ttfamily \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689c}{error\+\_\+t} mqtt\+Sn\+Client\+Process\+Ping\+Resp (\begin{DoxyParamCaption}\item[{\hyperlink{mqtt__sn__client_8h_aee99129ffa9bde57fd8b742f576ae3f5}{Mqtt\+Sn\+Client\+Context} $\ast$}]{context,  }\item[{const \hyperlink{structMqttSnMessage}{Mqtt\+Sn\+Message} $\ast$}]{message }\end{DoxyParamCaption})}



Process incoming P\+I\+N\+G\+R\+E\+SP message. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em context} & Pointer to the M\+Q\+T\+T-\/\+SN client context \\
\hline
\mbox{\tt in}  & {\em message} & Pointer to the received M\+Q\+T\+T-\/\+SN message \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Error code 
\end{DoxyReturn}


Definition at line 774 of file mqtt\+\_\+sn\+\_\+client\+\_\+message.\+c.


\begin{DoxyCode}
776 \{
777    \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689c}{error\_t} error;
778 
779    \textcolor{comment}{//Parse PINGRESP message}
780    error = \hyperlink{mqtt__sn__message_8c_addce54c1d0961c275f8b8fb2be6ffdb1}{mqttSnParsePingResp}(message);
781 
782    \textcolor{comment}{//Valid message received?}
783    \textcolor{keywordflow}{if}(!error)
784    \{
785       \textcolor{comment}{//Check current state}
786       \textcolor{keywordflow}{if}(context->state == \hyperlink{mqtt__sn__client_8h_ac2c5b1752aff9aadfd267c2a11535071af7aeb72fac83c3e235aa59543c1da1bf}{MQTT\_SN\_CLIENT\_STATE\_SENDING\_REQ} &&
787          context->msgType == \hyperlink{mqtt__sn__common_8h_a0b5ccdae8aa73dc7c74ae2dfe62fd112a194c6e9f117a199acf63ea58f394d57d}{MQTT\_SN\_MSG\_TYPE\_PINGREQ})
788       \{
789          \textcolor{comment}{//Notify the application that a PINGRESP message has been received}
790          context->state = \hyperlink{mqtt__sn__client_8h_ac2c5b1752aff9aadfd267c2a11535071a9512423d440e0143284ff3e4ffaf2013}{MQTT\_SN\_CLIENT\_STATE\_RESP\_RECEIVED};
791          context->msgType = \hyperlink{mqtt__sn__common_8h_a0b5ccdae8aa73dc7c74ae2dfe62fd112a7b0b690c0417ac129942d2b7bcc4c033}{MQTT\_SN\_MSG\_TYPE\_PINGRESP};
792       \}
793 
794       \textcolor{comment}{//The MQTT-SN gateway is alive}
795       context->keepAliveCounter = 0;
796    \}
797 
798    \textcolor{comment}{//Return status code}
799    \textcolor{keywordflow}{return} error;
800 \}
\end{DoxyCode}
\mbox{\Hypertarget{mqtt__sn__client__message_8c_a9b8af2098d0d316600c9e305615d8947}\label{mqtt__sn__client__message_8c_a9b8af2098d0d316600c9e305615d8947}} 
\index{mqtt\+\_\+sn\+\_\+client\+\_\+message.\+c@{mqtt\+\_\+sn\+\_\+client\+\_\+message.\+c}!mqtt\+Sn\+Client\+Process\+Pub\+Ack@{mqtt\+Sn\+Client\+Process\+Pub\+Ack}}
\index{mqtt\+Sn\+Client\+Process\+Pub\+Ack@{mqtt\+Sn\+Client\+Process\+Pub\+Ack}!mqtt\+\_\+sn\+\_\+client\+\_\+message.\+c@{mqtt\+\_\+sn\+\_\+client\+\_\+message.\+c}}
\subsubsection{\texorpdfstring{mqtt\+Sn\+Client\+Process\+Pub\+Ack()}{mqttSnClientProcessPubAck()}}
{\footnotesize\ttfamily \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689c}{error\+\_\+t} mqtt\+Sn\+Client\+Process\+Pub\+Ack (\begin{DoxyParamCaption}\item[{\hyperlink{mqtt__sn__client_8h_aee99129ffa9bde57fd8b742f576ae3f5}{Mqtt\+Sn\+Client\+Context} $\ast$}]{context,  }\item[{const \hyperlink{structMqttSnMessage}{Mqtt\+Sn\+Message} $\ast$}]{message }\end{DoxyParamCaption})}



Process incoming P\+U\+B\+A\+CK message. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em context} & Pointer to the M\+Q\+T\+T-\/\+SN client context \\
\hline
\mbox{\tt in}  & {\em message} & Pointer to the received M\+Q\+T\+T-\/\+SN message \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Error code 
\end{DoxyReturn}


Definition at line 515 of file mqtt\+\_\+sn\+\_\+client\+\_\+message.\+c.


\begin{DoxyCode}
517 \{
518    \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689c}{error\_t} error;
519    \hyperlink{stdint_8h_a273cf69d639a59973b6019625df33e30}{uint16\_t} \hyperlink{mqtt__sn__common_8h_a2acf66d2c12f7b04f90ed704f5ac215c}{msgId};
520    \hyperlink{stdint_8h_a273cf69d639a59973b6019625df33e30}{uint16\_t} \hyperlink{mqtt__sn__common_8h_a9f7eda5d21d45b5350db8cd0c451427a}{topicId};
521    \hyperlink{mqtt__sn__common_8h_aa8ae09a48836472262f42c1f09638e9c}{MqttSnReturnCode} \hyperlink{mqtt__sn__common_8h_aa43af56bba229c3214623f0f0c23bf6e}{returnCode};
522 
523    \textcolor{comment}{//Parse PUBACK message}
524    error = \hyperlink{mqtt__sn__message_8c_a5af464d5c767833ff22d31b478a323f1}{mqttSnParsePubAck}(message, &msgId, &topicId, &returnCode);
525 
526    \textcolor{comment}{//Valid message received?}
527    \textcolor{keywordflow}{if}(!error)
528    \{
529       \textcolor{comment}{//Check current state}
530       \textcolor{keywordflow}{if}(context->state == \hyperlink{mqtt__sn__client_8h_ac2c5b1752aff9aadfd267c2a11535071af7aeb72fac83c3e235aa59543c1da1bf}{MQTT\_SN\_CLIENT\_STATE\_SENDING\_REQ} &&
531          context->msgType == \hyperlink{mqtt__sn__common_8h_a0b5ccdae8aa73dc7c74ae2dfe62fd112a37c9bc96e12d4079199211d7aeda5398}{MQTT\_SN\_MSG\_TYPE\_PUBLISH} &&
532          context->msgId == msgId)
533       \{
534          \textcolor{comment}{//Notify the application that a PUBACK message has been received}
535          context->state = \hyperlink{mqtt__sn__client_8h_ac2c5b1752aff9aadfd267c2a11535071a9512423d440e0143284ff3e4ffaf2013}{MQTT\_SN\_CLIENT\_STATE\_RESP\_RECEIVED};
536          context->msgType = \hyperlink{mqtt__sn__common_8h_a0b5ccdae8aa73dc7c74ae2dfe62fd112a647bc2e2152d672947eb838eccbb233f}{MQTT\_SN\_MSG\_TYPE\_PUBACK};
537          context->returnCode = \hyperlink{mqtt__sn__common_8h_aa43af56bba229c3214623f0f0c23bf6e}{returnCode};
538 
539          \textcolor{comment}{//The MQTT-SN gateway is alive}
540          context->keepAliveCounter = 0;
541       \}
542    \}
543 
544    \textcolor{comment}{//Return status code}
545    \textcolor{keywordflow}{return} error;
546 \}
\end{DoxyCode}
\mbox{\Hypertarget{mqtt__sn__client__message_8c_a88cc1304f15911563ebf177a9a29f48c}\label{mqtt__sn__client__message_8c_a88cc1304f15911563ebf177a9a29f48c}} 
\index{mqtt\+\_\+sn\+\_\+client\+\_\+message.\+c@{mqtt\+\_\+sn\+\_\+client\+\_\+message.\+c}!mqtt\+Sn\+Client\+Process\+Pub\+Comp@{mqtt\+Sn\+Client\+Process\+Pub\+Comp}}
\index{mqtt\+Sn\+Client\+Process\+Pub\+Comp@{mqtt\+Sn\+Client\+Process\+Pub\+Comp}!mqtt\+\_\+sn\+\_\+client\+\_\+message.\+c@{mqtt\+\_\+sn\+\_\+client\+\_\+message.\+c}}
\subsubsection{\texorpdfstring{mqtt\+Sn\+Client\+Process\+Pub\+Comp()}{mqttSnClientProcessPubComp()}}
{\footnotesize\ttfamily \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689c}{error\+\_\+t} mqtt\+Sn\+Client\+Process\+Pub\+Comp (\begin{DoxyParamCaption}\item[{\hyperlink{mqtt__sn__client_8h_aee99129ffa9bde57fd8b742f576ae3f5}{Mqtt\+Sn\+Client\+Context} $\ast$}]{context,  }\item[{const \hyperlink{structMqttSnMessage}{Mqtt\+Sn\+Message} $\ast$}]{message }\end{DoxyParamCaption})}



Process incoming P\+U\+B\+C\+O\+MP message. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em context} & Pointer to the M\+Q\+T\+T-\/\+SN client context \\
\hline
\mbox{\tt in}  & {\em message} & Pointer to the received M\+Q\+T\+T-\/\+SN message \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Error code 
\end{DoxyReturn}


Definition at line 626 of file mqtt\+\_\+sn\+\_\+client\+\_\+message.\+c.


\begin{DoxyCode}
628 \{
629    \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689c}{error\_t} error;
630    \hyperlink{stdint_8h_a273cf69d639a59973b6019625df33e30}{uint16\_t} \hyperlink{mqtt__sn__common_8h_a2acf66d2c12f7b04f90ed704f5ac215c}{msgId};
631 
632    \textcolor{comment}{//Parse PUBCOMP message}
633    error = \hyperlink{mqtt__sn__message_8c_a8b76777fa3a62c3500b5529c9179aed0}{mqttSnParsePubComp}(message, &msgId);
634 
635    \textcolor{comment}{//Valid message received?}
636    \textcolor{keywordflow}{if}(!error)
637    \{
638       \textcolor{comment}{//Check current state}
639       \textcolor{keywordflow}{if}(context->state == \hyperlink{mqtt__sn__client_8h_ac2c5b1752aff9aadfd267c2a11535071af7aeb72fac83c3e235aa59543c1da1bf}{MQTT\_SN\_CLIENT\_STATE\_SENDING\_REQ} &&
640          context->msgType == \hyperlink{mqtt__sn__common_8h_a0b5ccdae8aa73dc7c74ae2dfe62fd112ac8a07a546f23a523b469944a26de0ab1}{MQTT\_SN\_MSG\_TYPE\_PUBREL} &&
641          context->msgId == msgId)
642       \{
643          \textcolor{comment}{//Notify the application that a PUBCOMP message has been received}
644          context->state = \hyperlink{mqtt__sn__client_8h_ac2c5b1752aff9aadfd267c2a11535071a9512423d440e0143284ff3e4ffaf2013}{MQTT\_SN\_CLIENT\_STATE\_RESP\_RECEIVED};
645          context->msgType = \hyperlink{mqtt__sn__common_8h_a0b5ccdae8aa73dc7c74ae2dfe62fd112ab0101d318c3bdf33f9d0650e80330ec6}{MQTT\_SN\_MSG\_TYPE\_PUBCOMP};
646 
647          \textcolor{comment}{//The MQTT-SN gateway is alive}
648          context->keepAliveCounter = 0;
649       \}
650    \}
651 
652    \textcolor{comment}{//Return status code}
653    \textcolor{keywordflow}{return} error;
654 \}
\end{DoxyCode}
\mbox{\Hypertarget{mqtt__sn__client__message_8c_adfb0ad5995ce169d040c4f9e5fb83ec4}\label{mqtt__sn__client__message_8c_adfb0ad5995ce169d040c4f9e5fb83ec4}} 
\index{mqtt\+\_\+sn\+\_\+client\+\_\+message.\+c@{mqtt\+\_\+sn\+\_\+client\+\_\+message.\+c}!mqtt\+Sn\+Client\+Process\+Publish@{mqtt\+Sn\+Client\+Process\+Publish}}
\index{mqtt\+Sn\+Client\+Process\+Publish@{mqtt\+Sn\+Client\+Process\+Publish}!mqtt\+\_\+sn\+\_\+client\+\_\+message.\+c@{mqtt\+\_\+sn\+\_\+client\+\_\+message.\+c}}
\subsubsection{\texorpdfstring{mqtt\+Sn\+Client\+Process\+Publish()}{mqttSnClientProcessPublish()}}
{\footnotesize\ttfamily \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689c}{error\+\_\+t} mqtt\+Sn\+Client\+Process\+Publish (\begin{DoxyParamCaption}\item[{\hyperlink{mqtt__sn__client_8h_aee99129ffa9bde57fd8b742f576ae3f5}{Mqtt\+Sn\+Client\+Context} $\ast$}]{context,  }\item[{const \hyperlink{structMqttSnMessage}{Mqtt\+Sn\+Message} $\ast$}]{message }\end{DoxyParamCaption})}



Process incoming P\+U\+B\+L\+I\+SH message. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em context} & Pointer to the M\+Q\+T\+T-\/\+SN client context \\
\hline
\mbox{\tt in}  & {\em message} & Pointer to the received M\+Q\+T\+T-\/\+SN message \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Error code 
\end{DoxyReturn}


Definition at line 414 of file mqtt\+\_\+sn\+\_\+client\+\_\+message.\+c.


\begin{DoxyCode}
416 \{
417    \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689c}{error\_t} error;
418    \hyperlink{compiler__port_8h_a812d16e5494522586b3784e55d479912}{bool\_t} duplicate;
419    \hyperlink{stdint_8h_a273cf69d639a59973b6019625df33e30}{uint16\_t} \hyperlink{mqtt__sn__common_8h_a2acf66d2c12f7b04f90ed704f5ac215c}{msgId};
420    \hyperlink{stdint_8h_a273cf69d639a59973b6019625df33e30}{uint16\_t} \hyperlink{mqtt__sn__common_8h_a9f7eda5d21d45b5350db8cd0c451427a}{topicId};
421    \textcolor{keyword}{const} \hyperlink{stdint_8h_aba7bc1797add20fe3efdf37ced1182c5}{uint8\_t} *\hyperlink{dtls__misc_8h_a5c239a1bb87b52b0f1d6d68c4749cd2a}{data};
422    \textcolor{keywordtype}{size\_t} dataLen;
423    \hyperlink{mqtt__sn__common_8h_adfa650f3c081a815eb81daa416bb94a0}{MqttSnFlags} \hyperlink{tcp_8h_aa2585d779da0ab21273a8d92de9a0ebe}{flags};
424    \hyperlink{mqtt__sn__common_8h_aa8ae09a48836472262f42c1f09638e9c}{MqttSnReturnCode} \hyperlink{mqtt__sn__common_8h_aa43af56bba229c3214623f0f0c23bf6e}{returnCode};
425 
426    \textcolor{comment}{//Parse PUBLISH message}
427    error = \hyperlink{mqtt__sn__message_8c_a928af55e0ea7253387840ab6c36381ca}{mqttSnParsePublish}(message, &flags, &msgId, &topicId,
428       &data, &dataLen);
429 
430    \textcolor{comment}{//Valid message received?}
431    \textcolor{keywordflow}{if}(!error)
432    \{
433       \textcolor{comment}{//Check QoS level}
434       \textcolor{keywordflow}{if}(flags.qos == \hyperlink{mqtt__sn__common_8h_a5037c476df69550c4f714d27359d38a6a7bf24115b2392060ea344c786c324075}{MQTT\_SN\_QOS\_LEVEL\_1})
435       \{
436          \textcolor{comment}{//Deliver the message to the application}
437          returnCode = \hyperlink{mqtt__sn__client__misc_8c_ad63494d6633856d2baaec02ff35d7db2}{mqttSnDeliverPublishMessage}(context, flags, topicId,
438             data, dataLen);
439 
440          \textcolor{comment}{//A PUBACK packet is the response to a PUBLISH packet with QoS level 1}
441          error = \hyperlink{mqtt__sn__client__message_8c_af488693ca181771dc767ef6b3fd3014a}{mqttSnClientSendPubAck}(context, msgId, topicId, returnCode);
442       \}
443       \textcolor{keywordflow}{else} \textcolor{keywordflow}{if}(flags.qos == \hyperlink{mqtt__sn__common_8h_a5037c476df69550c4f714d27359d38a6afcf6709e25108bc27d7f7002a1aeb28e}{MQTT\_SN\_QOS\_LEVEL\_2})
444       \{
445          \textcolor{comment}{//Check whether the ownership of the QoS 2 message has already been}
446          \textcolor{comment}{//transferred to the client}
447          duplicate = \hyperlink{mqtt__sn__client__misc_8c_a1c993b7a118e134d92ba1ad034de1245}{mqttSnClientIsDuplicateMessageId}(context, msgId);
448 
449          \textcolor{comment}{//Duplicate message?}
450          \textcolor{keywordflow}{if}(duplicate)
451          \{
452             \textcolor{comment}{//In QoS 2, the receiver must not cause duplicate messages to be}
453             \textcolor{comment}{//delivered to any onward recipients}
454             error = \hyperlink{mqtt__sn__client__message_8c_ac8c5be25d943cda3efd1679d48f756a6}{mqttSnClientSendPubRec}(context, msgId);
455          \}
456          \textcolor{keywordflow}{else}
457          \{
458             \textcolor{comment}{//Accept the ownership of the QoS 2 message}
459             error = \hyperlink{mqtt__sn__client__misc_8c_a74f6132ed62cc0427ebd0ca584893e0e}{mqttSnClientStoreMessageId}(context, msgId);
460 
461             \textcolor{comment}{//Check status code}
462             \textcolor{keywordflow}{if}(!error)
463             \{
464                \textcolor{comment}{//Initiate onward delivery of the application message}
465                returnCode = \hyperlink{mqtt__sn__client__misc_8c_ad63494d6633856d2baaec02ff35d7db2}{mqttSnDeliverPublishMessage}(context, flags, topicId,
466                   data, dataLen);
467             \}
468             \textcolor{keywordflow}{else}
469             \{
470                \textcolor{comment}{//The message identifier cannot be saved}
471                returnCode = \hyperlink{mqtt__sn__common_8h_aa8ae09a48836472262f42c1f09638e9ca9301eb88bd56ad397d3a2106823f7e10}{MQTT\_SN\_RETURN\_CODE\_REJECTED\_CONGESTION};
472             \}
473 
474             \textcolor{comment}{//Check whether the PUBLISH message has been accepted}
475             \textcolor{keywordflow}{if}(returnCode == \hyperlink{mqtt__sn__common_8h_aa8ae09a48836472262f42c1f09638e9ca09797026d22073f75af1a2012739a89a}{MQTT\_SN\_RETURN\_CODE\_ACCEPTED})
476             \{
477                \textcolor{comment}{//A PUBREC packet is the response to a PUBLISH packet with QoS 2.}
478                \textcolor{comment}{//It is the second packet of the QoS 2 protocol exchange}
479                error = \hyperlink{mqtt__sn__client__message_8c_ac8c5be25d943cda3efd1679d48f756a6}{mqttSnClientSendPubRec}(context, msgId);
480             \}
481             \textcolor{keywordflow}{else}
482             \{
483                \textcolor{comment}{//Discard message identifier}
484                \hyperlink{mqtt__sn__client__misc_8c_afa65039a1f4b7932cc3c26de1542a868}{mqttSnClientDiscardMessageId}(context, msgId);
485 
486                \textcolor{comment}{//Reject the PUBLISH message}
487                error = \hyperlink{mqtt__sn__client__message_8c_af488693ca181771dc767ef6b3fd3014a}{mqttSnClientSendPubAck}(context, msgId, topicId,
488                   returnCode);
489             \}
490          \}
491       \}
492       \textcolor{keywordflow}{else}
493       \{
494          \textcolor{comment}{//Deliver the message to the application}
495          returnCode = \hyperlink{mqtt__sn__client__misc_8c_ad63494d6633856d2baaec02ff35d7db2}{mqttSnDeliverPublishMessage}(context, flags, topicId,
496             data, dataLen);
497 
498          \textcolor{comment}{//In QoS 0, the receiver always accepts the message}
499          error = \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689cabf350750d0d4fabd8954c0f1e9bbae94}{NO\_ERROR};
500       \}
501    \}
502 
503    \textcolor{comment}{//Return status code}
504    \textcolor{keywordflow}{return} error;
505 \}
\end{DoxyCode}
\mbox{\Hypertarget{mqtt__sn__client__message_8c_a71d8b174b6dbdddeced730e16a938984}\label{mqtt__sn__client__message_8c_a71d8b174b6dbdddeced730e16a938984}} 
\index{mqtt\+\_\+sn\+\_\+client\+\_\+message.\+c@{mqtt\+\_\+sn\+\_\+client\+\_\+message.\+c}!mqtt\+Sn\+Client\+Process\+Pub\+Rec@{mqtt\+Sn\+Client\+Process\+Pub\+Rec}}
\index{mqtt\+Sn\+Client\+Process\+Pub\+Rec@{mqtt\+Sn\+Client\+Process\+Pub\+Rec}!mqtt\+\_\+sn\+\_\+client\+\_\+message.\+c@{mqtt\+\_\+sn\+\_\+client\+\_\+message.\+c}}
\subsubsection{\texorpdfstring{mqtt\+Sn\+Client\+Process\+Pub\+Rec()}{mqttSnClientProcessPubRec()}}
{\footnotesize\ttfamily \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689c}{error\+\_\+t} mqtt\+Sn\+Client\+Process\+Pub\+Rec (\begin{DoxyParamCaption}\item[{\hyperlink{mqtt__sn__client_8h_aee99129ffa9bde57fd8b742f576ae3f5}{Mqtt\+Sn\+Client\+Context} $\ast$}]{context,  }\item[{const \hyperlink{structMqttSnMessage}{Mqtt\+Sn\+Message} $\ast$}]{message }\end{DoxyParamCaption})}



Process incoming P\+U\+B\+R\+EC message. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em context} & Pointer to the M\+Q\+T\+T-\/\+SN client context \\
\hline
\mbox{\tt in}  & {\em message} & Pointer to the received M\+Q\+T\+T-\/\+SN message \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Error code 
\end{DoxyReturn}


Definition at line 556 of file mqtt\+\_\+sn\+\_\+client\+\_\+message.\+c.


\begin{DoxyCode}
558 \{
559    \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689c}{error\_t} error;
560    \hyperlink{stdint_8h_a273cf69d639a59973b6019625df33e30}{uint16\_t} \hyperlink{mqtt__sn__common_8h_a2acf66d2c12f7b04f90ed704f5ac215c}{msgId};
561 
562    \textcolor{comment}{//Parse PUBREC message}
563    error = \hyperlink{mqtt__sn__message_8c_af75463d1bab0f7d23e849f750fc81f67}{mqttSnParsePubRec}(message, &msgId);
564 
565    \textcolor{comment}{//Valid message received?}
566    \textcolor{keywordflow}{if}(!error)
567    \{
568       \textcolor{comment}{//Check current state}
569       \textcolor{keywordflow}{if}(context->state == \hyperlink{mqtt__sn__client_8h_ac2c5b1752aff9aadfd267c2a11535071af7aeb72fac83c3e235aa59543c1da1bf}{MQTT\_SN\_CLIENT\_STATE\_SENDING\_REQ} &&
570          context->msgType == \hyperlink{mqtt__sn__common_8h_a0b5ccdae8aa73dc7c74ae2dfe62fd112a37c9bc96e12d4079199211d7aeda5398}{MQTT\_SN\_MSG\_TYPE\_PUBLISH} &&
571          context->msgId == msgId)
572       \{
573          \textcolor{comment}{//Notify the application that a PUBREC message has been received}
574          context->state = \hyperlink{mqtt__sn__client_8h_ac2c5b1752aff9aadfd267c2a11535071a9512423d440e0143284ff3e4ffaf2013}{MQTT\_SN\_CLIENT\_STATE\_RESP\_RECEIVED};
575          context->msgType = \hyperlink{mqtt__sn__common_8h_a0b5ccdae8aa73dc7c74ae2dfe62fd112a92af8cf59403b5ad7e68c136d5af9ce9}{MQTT\_SN\_MSG\_TYPE\_PUBREC};
576 
577          \textcolor{comment}{//The MQTT-SN gateway is alive}
578          context->keepAliveCounter = 0;
579       \}
580    \}
581 
582    \textcolor{comment}{//Return status code}
583    \textcolor{keywordflow}{return} error;
584 \}
\end{DoxyCode}
\mbox{\Hypertarget{mqtt__sn__client__message_8c_aecb6c1ef6fde9e2c2672a67aec6fdca9}\label{mqtt__sn__client__message_8c_aecb6c1ef6fde9e2c2672a67aec6fdca9}} 
\index{mqtt\+\_\+sn\+\_\+client\+\_\+message.\+c@{mqtt\+\_\+sn\+\_\+client\+\_\+message.\+c}!mqtt\+Sn\+Client\+Process\+Pub\+Rel@{mqtt\+Sn\+Client\+Process\+Pub\+Rel}}
\index{mqtt\+Sn\+Client\+Process\+Pub\+Rel@{mqtt\+Sn\+Client\+Process\+Pub\+Rel}!mqtt\+\_\+sn\+\_\+client\+\_\+message.\+c@{mqtt\+\_\+sn\+\_\+client\+\_\+message.\+c}}
\subsubsection{\texorpdfstring{mqtt\+Sn\+Client\+Process\+Pub\+Rel()}{mqttSnClientProcessPubRel()}}
{\footnotesize\ttfamily \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689c}{error\+\_\+t} mqtt\+Sn\+Client\+Process\+Pub\+Rel (\begin{DoxyParamCaption}\item[{\hyperlink{mqtt__sn__client_8h_aee99129ffa9bde57fd8b742f576ae3f5}{Mqtt\+Sn\+Client\+Context} $\ast$}]{context,  }\item[{const \hyperlink{structMqttSnMessage}{Mqtt\+Sn\+Message} $\ast$}]{message }\end{DoxyParamCaption})}



Process incoming P\+U\+B\+R\+EL message. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em context} & Pointer to the M\+Q\+T\+T-\/\+SN client context \\
\hline
\mbox{\tt in}  & {\em message} & Pointer to the received M\+Q\+T\+T-\/\+SN message \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Error code 
\end{DoxyReturn}


Definition at line 594 of file mqtt\+\_\+sn\+\_\+client\+\_\+message.\+c.


\begin{DoxyCode}
596 \{
597    \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689c}{error\_t} error;
598    \hyperlink{stdint_8h_a273cf69d639a59973b6019625df33e30}{uint16\_t} \hyperlink{mqtt__sn__common_8h_a2acf66d2c12f7b04f90ed704f5ac215c}{msgId};
599 
600    \textcolor{comment}{//Parse PUBREL message}
601    error = \hyperlink{mqtt__sn__message_8c_a4ead947261f68568e4c172db2c7770e8}{mqttSnParsePubRel}(message, &msgId);
602 
603    \textcolor{comment}{//Valid message received?}
604    \textcolor{keywordflow}{if}(!error)
605    \{
606       \textcolor{comment}{//Discard message identifier}
607       \hyperlink{mqtt__sn__client__misc_8c_afa65039a1f4b7932cc3c26de1542a868}{mqttSnClientDiscardMessageId}(context, msgId);
608 
609       \textcolor{comment}{//A PUBCOMP message is the response to a PUBREL packet. It is the fourth}
610       \textcolor{comment}{//and final message of the QoS 2 protocol exchange}
611       error = \hyperlink{mqtt__sn__client__message_8c_ad813b7a92cd1934b98298a11986a3468}{mqttSnClientSendPubComp}(context, msgId);
612    \}
613 
614    \textcolor{comment}{//Return status code}
615    \textcolor{keywordflow}{return} error;
616 \}
\end{DoxyCode}
\mbox{\Hypertarget{mqtt__sn__client__message_8c_a7c80786959337c6628f9a5a202e09446}\label{mqtt__sn__client__message_8c_a7c80786959337c6628f9a5a202e09446}} 
\index{mqtt\+\_\+sn\+\_\+client\+\_\+message.\+c@{mqtt\+\_\+sn\+\_\+client\+\_\+message.\+c}!mqtt\+Sn\+Client\+Process\+Reg\+Ack@{mqtt\+Sn\+Client\+Process\+Reg\+Ack}}
\index{mqtt\+Sn\+Client\+Process\+Reg\+Ack@{mqtt\+Sn\+Client\+Process\+Reg\+Ack}!mqtt\+\_\+sn\+\_\+client\+\_\+message.\+c@{mqtt\+\_\+sn\+\_\+client\+\_\+message.\+c}}
\subsubsection{\texorpdfstring{mqtt\+Sn\+Client\+Process\+Reg\+Ack()}{mqttSnClientProcessRegAck()}}
{\footnotesize\ttfamily \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689c}{error\+\_\+t} mqtt\+Sn\+Client\+Process\+Reg\+Ack (\begin{DoxyParamCaption}\item[{\hyperlink{mqtt__sn__client_8h_aee99129ffa9bde57fd8b742f576ae3f5}{Mqtt\+Sn\+Client\+Context} $\ast$}]{context,  }\item[{const \hyperlink{structMqttSnMessage}{Mqtt\+Sn\+Message} $\ast$}]{message }\end{DoxyParamCaption})}



Process incoming R\+E\+G\+A\+CK message. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em context} & Pointer to the M\+Q\+T\+T-\/\+SN client context \\
\hline
\mbox{\tt in}  & {\em message} & Pointer to the received M\+Q\+T\+T-\/\+SN message \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Error code 
\end{DoxyReturn}


Definition at line 372 of file mqtt\+\_\+sn\+\_\+client\+\_\+message.\+c.


\begin{DoxyCode}
374 \{
375    \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689c}{error\_t} error;
376    \hyperlink{stdint_8h_a273cf69d639a59973b6019625df33e30}{uint16\_t} \hyperlink{mqtt__sn__common_8h_a2acf66d2c12f7b04f90ed704f5ac215c}{msgId};
377    \hyperlink{stdint_8h_a273cf69d639a59973b6019625df33e30}{uint16\_t} \hyperlink{mqtt__sn__common_8h_a9f7eda5d21d45b5350db8cd0c451427a}{topicId};
378    \hyperlink{mqtt__sn__common_8h_aa8ae09a48836472262f42c1f09638e9c}{MqttSnReturnCode} \hyperlink{mqtt__sn__common_8h_aa43af56bba229c3214623f0f0c23bf6e}{returnCode};
379 
380    \textcolor{comment}{//Parse REGACK message}
381    error = \hyperlink{mqtt__sn__message_8c_acde961cf8ae65ea7d00db07c6df2f1ba}{mqttSnParseRegAck}(message, &msgId, &topicId, &returnCode);
382 
383    \textcolor{comment}{//Valid message received?}
384    \textcolor{keywordflow}{if}(!error)
385    \{
386       \textcolor{comment}{//Check current state}
387       \textcolor{keywordflow}{if}(context->state == \hyperlink{mqtt__sn__client_8h_ac2c5b1752aff9aadfd267c2a11535071af7aeb72fac83c3e235aa59543c1da1bf}{MQTT\_SN\_CLIENT\_STATE\_SENDING\_REQ} &&
388          context->msgType == \hyperlink{mqtt__sn__common_8h_a0b5ccdae8aa73dc7c74ae2dfe62fd112a74d8f28e6bd857bad8753800d962b118}{MQTT\_SN\_MSG\_TYPE\_REGISTER} &&
389          context->msgId == msgId)
390       \{
391          \textcolor{comment}{//Notify the application that a REGACK message has been received}
392          context->state = \hyperlink{mqtt__sn__client_8h_ac2c5b1752aff9aadfd267c2a11535071a9512423d440e0143284ff3e4ffaf2013}{MQTT\_SN\_CLIENT\_STATE\_RESP\_RECEIVED};
393          context->msgType = \hyperlink{mqtt__sn__common_8h_a0b5ccdae8aa73dc7c74ae2dfe62fd112adba83eda8e1643116d68daffce9c9923}{MQTT\_SN\_MSG\_TYPE\_REGACK};
394          context->topicId = \hyperlink{mqtt__sn__common_8h_a9f7eda5d21d45b5350db8cd0c451427a}{topicId};
395          context->returnCode = \hyperlink{mqtt__sn__common_8h_aa43af56bba229c3214623f0f0c23bf6e}{returnCode};
396 
397          \textcolor{comment}{//The MQTT-SN gateway is alive}
398          context->keepAliveCounter = 0;
399       \}
400    \}
401 
402    \textcolor{comment}{//Return status code}
403    \textcolor{keywordflow}{return} error;
404 \}
\end{DoxyCode}
\mbox{\Hypertarget{mqtt__sn__client__message_8c_af2e77f9976d8537b8123d1c9a516d8f9}\label{mqtt__sn__client__message_8c_af2e77f9976d8537b8123d1c9a516d8f9}} 
\index{mqtt\+\_\+sn\+\_\+client\+\_\+message.\+c@{mqtt\+\_\+sn\+\_\+client\+\_\+message.\+c}!mqtt\+Sn\+Client\+Process\+Register@{mqtt\+Sn\+Client\+Process\+Register}}
\index{mqtt\+Sn\+Client\+Process\+Register@{mqtt\+Sn\+Client\+Process\+Register}!mqtt\+\_\+sn\+\_\+client\+\_\+message.\+c@{mqtt\+\_\+sn\+\_\+client\+\_\+message.\+c}}
\subsubsection{\texorpdfstring{mqtt\+Sn\+Client\+Process\+Register()}{mqttSnClientProcessRegister()}}
{\footnotesize\ttfamily \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689c}{error\+\_\+t} mqtt\+Sn\+Client\+Process\+Register (\begin{DoxyParamCaption}\item[{\hyperlink{mqtt__sn__client_8h_aee99129ffa9bde57fd8b742f576ae3f5}{Mqtt\+Sn\+Client\+Context} $\ast$}]{context,  }\item[{const \hyperlink{structMqttSnMessage}{Mqtt\+Sn\+Message} $\ast$}]{message }\end{DoxyParamCaption})}



Process incoming R\+E\+G\+I\+S\+T\+ER message. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em context} & Pointer to the M\+Q\+T\+T-\/\+SN client context \\
\hline
\mbox{\tt in}  & {\em message} & Pointer to the received M\+Q\+T\+T-\/\+SN message \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Error code 
\end{DoxyReturn}


Definition at line 331 of file mqtt\+\_\+sn\+\_\+client\+\_\+message.\+c.


\begin{DoxyCode}
333 \{
334    \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689c}{error\_t} error;
335    \hyperlink{stdint_8h_a273cf69d639a59973b6019625df33e30}{uint16\_t} \hyperlink{mqtt__sn__common_8h_a2acf66d2c12f7b04f90ed704f5ac215c}{msgId};
336    \hyperlink{stdint_8h_a273cf69d639a59973b6019625df33e30}{uint16\_t} \hyperlink{mqtt__sn__common_8h_a9f7eda5d21d45b5350db8cd0c451427a}{topicId};
337    \textcolor{keyword}{const} \hyperlink{compiler__port_8h_a40bb5262bf908c328fbcfbe5d29d0201}{char\_t} *\hyperlink{mqtt__sn__common_8h_a12172589bd20ef38ecbc6f4faf6ae3d0}{topicName};
338    \hyperlink{mqtt__sn__common_8h_aa8ae09a48836472262f42c1f09638e9c}{MqttSnReturnCode} \hyperlink{mqtt__sn__common_8h_aa43af56bba229c3214623f0f0c23bf6e}{returnCode};
339 
340    \textcolor{comment}{//Parse REGISTER message}
341    error = \hyperlink{mqtt__sn__message_8c_ae8d34fb3190f7bdc1f51c4fb2c39fb2a}{mqttSnParseRegister}(message, &msgId, &topicId, &topicName);
342 
343    \textcolor{comment}{//Valid message received?}
344    \textcolor{keywordflow}{if}(!error)
345    \{
346       \textcolor{comment}{//Save the topic ID assigned by the gateway}
347       error = \hyperlink{mqtt__sn__client__misc_8c_ad237e69506d77f2867af6da6e22e776c}{mqttSnClientAddTopic}(context, topicName, topicId);
348 
349       \textcolor{comment}{//Check status code}
350       \textcolor{keywordflow}{if}(!error)
351          returnCode = \hyperlink{mqtt__sn__common_8h_aa8ae09a48836472262f42c1f09638e9ca09797026d22073f75af1a2012739a89a}{MQTT\_SN\_RETURN\_CODE\_ACCEPTED};
352       \textcolor{keywordflow}{else}
353          returnCode = \hyperlink{mqtt__sn__common_8h_aa8ae09a48836472262f42c1f09638e9ca9301eb88bd56ad397d3a2106823f7e10}{MQTT\_SN\_RETURN\_CODE\_REJECTED\_CONGESTION};
354 
355       \textcolor{comment}{//The client sends a REGACK message to acknowledge the receipt and}
356       \textcolor{comment}{//processing of a REGISTER message}
357       error = \hyperlink{mqtt__sn__client__message_8c_a2f303b61851113e58d7ba6e0e734b08e}{mqttSnClientSendRegAck}(context, msgId, topicId, returnCode);
358    \}
359 
360    \textcolor{comment}{//Return status code}
361    \textcolor{keywordflow}{return} error;
362 \}
\end{DoxyCode}
\mbox{\Hypertarget{mqtt__sn__client__message_8c_adb5ed248526f29ff8707543f4f44525d}\label{mqtt__sn__client__message_8c_adb5ed248526f29ff8707543f4f44525d}} 
\index{mqtt\+\_\+sn\+\_\+client\+\_\+message.\+c@{mqtt\+\_\+sn\+\_\+client\+\_\+message.\+c}!mqtt\+Sn\+Client\+Process\+Sub\+Ack@{mqtt\+Sn\+Client\+Process\+Sub\+Ack}}
\index{mqtt\+Sn\+Client\+Process\+Sub\+Ack@{mqtt\+Sn\+Client\+Process\+Sub\+Ack}!mqtt\+\_\+sn\+\_\+client\+\_\+message.\+c@{mqtt\+\_\+sn\+\_\+client\+\_\+message.\+c}}
\subsubsection{\texorpdfstring{mqtt\+Sn\+Client\+Process\+Sub\+Ack()}{mqttSnClientProcessSubAck()}}
{\footnotesize\ttfamily \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689c}{error\+\_\+t} mqtt\+Sn\+Client\+Process\+Sub\+Ack (\begin{DoxyParamCaption}\item[{\hyperlink{mqtt__sn__client_8h_aee99129ffa9bde57fd8b742f576ae3f5}{Mqtt\+Sn\+Client\+Context} $\ast$}]{context,  }\item[{const \hyperlink{structMqttSnMessage}{Mqtt\+Sn\+Message} $\ast$}]{message }\end{DoxyParamCaption})}



Process incoming S\+U\+B\+A\+CK message. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em context} & Pointer to the M\+Q\+T\+T-\/\+SN client context \\
\hline
\mbox{\tt in}  & {\em message} & Pointer to the received M\+Q\+T\+T-\/\+SN message \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Error code 
\end{DoxyReturn}


Definition at line 664 of file mqtt\+\_\+sn\+\_\+client\+\_\+message.\+c.


\begin{DoxyCode}
666 \{
667    \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689c}{error\_t} error;
668    \hyperlink{stdint_8h_a273cf69d639a59973b6019625df33e30}{uint16\_t} \hyperlink{mqtt__sn__common_8h_a2acf66d2c12f7b04f90ed704f5ac215c}{msgId};
669    \hyperlink{stdint_8h_a273cf69d639a59973b6019625df33e30}{uint16\_t} \hyperlink{mqtt__sn__common_8h_a9f7eda5d21d45b5350db8cd0c451427a}{topicId};
670    \hyperlink{mqtt__sn__common_8h_adfa650f3c081a815eb81daa416bb94a0}{MqttSnFlags} \hyperlink{tcp_8h_aa2585d779da0ab21273a8d92de9a0ebe}{flags};
671    \hyperlink{mqtt__sn__common_8h_aa8ae09a48836472262f42c1f09638e9c}{MqttSnReturnCode} \hyperlink{mqtt__sn__common_8h_aa43af56bba229c3214623f0f0c23bf6e}{returnCode};
672 
673    \textcolor{comment}{//Parse SUBACK message}
674    error = \hyperlink{mqtt__sn__message_8c_a4879c6c38719e587a78c34897ad3ffdd}{mqttSnParseSubAck}(message, &flags, &msgId, &topicId, &returnCode);
675 
676    \textcolor{comment}{//Valid message received?}
677    \textcolor{keywordflow}{if}(!error)
678    \{
679       \textcolor{comment}{//Check current state}
680       \textcolor{keywordflow}{if}(context->state == \hyperlink{mqtt__sn__client_8h_ac2c5b1752aff9aadfd267c2a11535071af7aeb72fac83c3e235aa59543c1da1bf}{MQTT\_SN\_CLIENT\_STATE\_SENDING\_REQ} &&
681          context->msgType == \hyperlink{mqtt__sn__common_8h_a0b5ccdae8aa73dc7c74ae2dfe62fd112a5db574cf1af95868dc449fea0076923f}{MQTT\_SN\_MSG\_TYPE\_SUBSCRIBE} &&
682          context->msgId == msgId)
683       \{
684          \textcolor{comment}{//Notify the application that a SUBACK message has been received}
685          context->state = \hyperlink{mqtt__sn__client_8h_ac2c5b1752aff9aadfd267c2a11535071a9512423d440e0143284ff3e4ffaf2013}{MQTT\_SN\_CLIENT\_STATE\_RESP\_RECEIVED};
686          context->msgType = \hyperlink{mqtt__sn__common_8h_a0b5ccdae8aa73dc7c74ae2dfe62fd112a10da2a99ac13fe51103649cdda53b89c}{MQTT\_SN\_MSG\_TYPE\_SUBACK};
687          context->topicId = \hyperlink{mqtt__sn__common_8h_a9f7eda5d21d45b5350db8cd0c451427a}{topicId};
688          context->returnCode = \hyperlink{mqtt__sn__common_8h_aa43af56bba229c3214623f0f0c23bf6e}{returnCode};
689 
690          \textcolor{comment}{//The MQTT-SN gateway is alive}
691          context->keepAliveCounter = 0;
692       \}
693    \}
694 
695    \textcolor{comment}{//Return status code}
696    \textcolor{keywordflow}{return} error;
697 \}
\end{DoxyCode}
\mbox{\Hypertarget{mqtt__sn__client__message_8c_a72172e7d1931e9d6bacead45b10b487d}\label{mqtt__sn__client__message_8c_a72172e7d1931e9d6bacead45b10b487d}} 
\index{mqtt\+\_\+sn\+\_\+client\+\_\+message.\+c@{mqtt\+\_\+sn\+\_\+client\+\_\+message.\+c}!mqtt\+Sn\+Client\+Process\+Unsub\+Ack@{mqtt\+Sn\+Client\+Process\+Unsub\+Ack}}
\index{mqtt\+Sn\+Client\+Process\+Unsub\+Ack@{mqtt\+Sn\+Client\+Process\+Unsub\+Ack}!mqtt\+\_\+sn\+\_\+client\+\_\+message.\+c@{mqtt\+\_\+sn\+\_\+client\+\_\+message.\+c}}
\subsubsection{\texorpdfstring{mqtt\+Sn\+Client\+Process\+Unsub\+Ack()}{mqttSnClientProcessUnsubAck()}}
{\footnotesize\ttfamily \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689c}{error\+\_\+t} mqtt\+Sn\+Client\+Process\+Unsub\+Ack (\begin{DoxyParamCaption}\item[{\hyperlink{mqtt__sn__client_8h_aee99129ffa9bde57fd8b742f576ae3f5}{Mqtt\+Sn\+Client\+Context} $\ast$}]{context,  }\item[{const \hyperlink{structMqttSnMessage}{Mqtt\+Sn\+Message} $\ast$}]{message }\end{DoxyParamCaption})}



Process incoming U\+N\+S\+U\+B\+A\+CK message. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em context} & Pointer to the M\+Q\+T\+T-\/\+SN client context \\
\hline
\mbox{\tt in}  & {\em message} & Pointer to the received M\+Q\+T\+T-\/\+SN message \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Error code 
\end{DoxyReturn}


Definition at line 707 of file mqtt\+\_\+sn\+\_\+client\+\_\+message.\+c.


\begin{DoxyCode}
709 \{
710    \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689c}{error\_t} error;
711    \hyperlink{stdint_8h_a273cf69d639a59973b6019625df33e30}{uint16\_t} \hyperlink{mqtt__sn__common_8h_a2acf66d2c12f7b04f90ed704f5ac215c}{msgId};
712 
713    \textcolor{comment}{//Parse UNSUBACK message}
714    error = \hyperlink{mqtt__sn__message_8c_ac89abcc9d79eb33e9d093e467c1167c4}{mqttSnParseUnsubAck}(message, &msgId);
715 
716    \textcolor{comment}{//Valid message received?}
717    \textcolor{keywordflow}{if}(!error)
718    \{
719       \textcolor{comment}{//Check current state}
720       \textcolor{keywordflow}{if}(context->state == \hyperlink{mqtt__sn__client_8h_ac2c5b1752aff9aadfd267c2a11535071af7aeb72fac83c3e235aa59543c1da1bf}{MQTT\_SN\_CLIENT\_STATE\_SENDING\_REQ} &&
721          context->msgType == \hyperlink{mqtt__sn__common_8h_a0b5ccdae8aa73dc7c74ae2dfe62fd112a2c92708828018b62656632d3c4670ec8}{MQTT\_SN\_MSG\_TYPE\_UNSUBSCRIBE} &&
722          context->msgId == msgId)
723       \{
724          \textcolor{comment}{//Notify the application that a UNSUBACK message has been received}
725          context->state = \hyperlink{mqtt__sn__client_8h_ac2c5b1752aff9aadfd267c2a11535071a9512423d440e0143284ff3e4ffaf2013}{MQTT\_SN\_CLIENT\_STATE\_RESP\_RECEIVED};
726          context->msgType = \hyperlink{mqtt__sn__common_8h_a0b5ccdae8aa73dc7c74ae2dfe62fd112a248ff43605e58a25ff0f2f1ebb22e376}{MQTT\_SN\_MSG\_TYPE\_UNSUBACK};
727 
728          \textcolor{comment}{//The MQTT-SN gateway is alive}
729          context->keepAliveCounter = 0;
730       \}
731    \}
732 
733    \textcolor{comment}{//Return status code}
734    \textcolor{keywordflow}{return} error;
735 \}
\end{DoxyCode}
\mbox{\Hypertarget{mqtt__sn__client__message_8c_a13a42a5e5021a5c412175b4e3a5c1424}\label{mqtt__sn__client__message_8c_a13a42a5e5021a5c412175b4e3a5c1424}} 
\index{mqtt\+\_\+sn\+\_\+client\+\_\+message.\+c@{mqtt\+\_\+sn\+\_\+client\+\_\+message.\+c}!mqtt\+Sn\+Client\+Process\+Will\+Msg\+Req@{mqtt\+Sn\+Client\+Process\+Will\+Msg\+Req}}
\index{mqtt\+Sn\+Client\+Process\+Will\+Msg\+Req@{mqtt\+Sn\+Client\+Process\+Will\+Msg\+Req}!mqtt\+\_\+sn\+\_\+client\+\_\+message.\+c@{mqtt\+\_\+sn\+\_\+client\+\_\+message.\+c}}
\subsubsection{\texorpdfstring{mqtt\+Sn\+Client\+Process\+Will\+Msg\+Req()}{mqttSnClientProcessWillMsgReq()}}
{\footnotesize\ttfamily \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689c}{error\+\_\+t} mqtt\+Sn\+Client\+Process\+Will\+Msg\+Req (\begin{DoxyParamCaption}\item[{\hyperlink{mqtt__sn__client_8h_aee99129ffa9bde57fd8b742f576ae3f5}{Mqtt\+Sn\+Client\+Context} $\ast$}]{context,  }\item[{const \hyperlink{structMqttSnMessage}{Mqtt\+Sn\+Message} $\ast$}]{message }\end{DoxyParamCaption})}



Process incoming W\+I\+L\+L\+M\+S\+G\+R\+EQ message. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em context} & Pointer to the M\+Q\+T\+T-\/\+SN client context \\
\hline
\mbox{\tt in}  & {\em message} & Pointer to the received M\+Q\+T\+T-\/\+SN message \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Error code 
\end{DoxyReturn}


Definition at line 303 of file mqtt\+\_\+sn\+\_\+client\+\_\+message.\+c.


\begin{DoxyCode}
305 \{
306    \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689c}{error\_t} error;
307 
308    \textcolor{comment}{//Parse WILLMSGREQ message}
309    error = \hyperlink{mqtt__sn__message_8c_a5a28f0189f922f9e4fd76ee36bafeb37}{mqttSnParseWillMsgReq}(message);
310 
311    \textcolor{comment}{//Valid message received?}
312    \textcolor{keywordflow}{if}(!error)
313    \{
314       \textcolor{comment}{//The WILLMSG message is sent by a client as response to a WILLMSGREQ}
315       \textcolor{comment}{//for transferring its Will message to the GW}
316       error = \hyperlink{mqtt__sn__client__message_8c_ab9c2686f0f3eb3415e00ac4180b6d1ea}{mqttSnClientSendWillMsg}(context);
317    \}
318 
319    \textcolor{comment}{//Return status code}
320    \textcolor{keywordflow}{return} error;
321 \}
\end{DoxyCode}
\mbox{\Hypertarget{mqtt__sn__client__message_8c_a10bfdf89b6cd010417411507cf8bdb17}\label{mqtt__sn__client__message_8c_a10bfdf89b6cd010417411507cf8bdb17}} 
\index{mqtt\+\_\+sn\+\_\+client\+\_\+message.\+c@{mqtt\+\_\+sn\+\_\+client\+\_\+message.\+c}!mqtt\+Sn\+Client\+Process\+Will\+Msg\+Resp@{mqtt\+Sn\+Client\+Process\+Will\+Msg\+Resp}}
\index{mqtt\+Sn\+Client\+Process\+Will\+Msg\+Resp@{mqtt\+Sn\+Client\+Process\+Will\+Msg\+Resp}!mqtt\+\_\+sn\+\_\+client\+\_\+message.\+c@{mqtt\+\_\+sn\+\_\+client\+\_\+message.\+c}}
\subsubsection{\texorpdfstring{mqtt\+Sn\+Client\+Process\+Will\+Msg\+Resp()}{mqttSnClientProcessWillMsgResp()}}
{\footnotesize\ttfamily \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689c}{error\+\_\+t} mqtt\+Sn\+Client\+Process\+Will\+Msg\+Resp (\begin{DoxyParamCaption}\item[{\hyperlink{mqtt__sn__client_8h_aee99129ffa9bde57fd8b742f576ae3f5}{Mqtt\+Sn\+Client\+Context} $\ast$}]{context,  }\item[{const \hyperlink{structMqttSnMessage}{Mqtt\+Sn\+Message} $\ast$}]{message }\end{DoxyParamCaption})}



Process incoming W\+I\+L\+L\+M\+S\+G\+R\+E\+SP message. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em context} & Pointer to the M\+Q\+T\+T-\/\+SN client context \\
\hline
\mbox{\tt in}  & {\em message} & Pointer to the received M\+Q\+T\+T-\/\+SN message \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Error code 
\end{DoxyReturn}


Definition at line 876 of file mqtt\+\_\+sn\+\_\+client\+\_\+message.\+c.


\begin{DoxyCode}
878 \{
879    \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689c}{error\_t} error;
880    \hyperlink{mqtt__sn__common_8h_aa8ae09a48836472262f42c1f09638e9c}{MqttSnReturnCode} \hyperlink{mqtt__sn__common_8h_aa43af56bba229c3214623f0f0c23bf6e}{returnCode};
881 
882    \textcolor{comment}{//Parse WILLMSGRESP message}
883    error = \hyperlink{mqtt__sn__message_8c_a3848f7a28c2d72cc2e2f16306f6dea67}{mqttSnParseWillMsgResp}(message, &returnCode);
884 
885    \textcolor{comment}{//Valid message received?}
886    \textcolor{keywordflow}{if}(!error)
887    \{
888       \textcolor{comment}{//Check current state}
889       \textcolor{keywordflow}{if}(context->state == \hyperlink{mqtt__sn__client_8h_ac2c5b1752aff9aadfd267c2a11535071af7aeb72fac83c3e235aa59543c1da1bf}{MQTT\_SN\_CLIENT\_STATE\_SENDING\_REQ} &&
890          context->msgType == \hyperlink{mqtt__sn__common_8h_a0b5ccdae8aa73dc7c74ae2dfe62fd112a8aa84d8100f3ef131d29575c38165bac}{MQTT\_SN\_MSG\_TYPE\_WILLMSGUPD})
891       \{
892          \textcolor{comment}{//Notify the application that a WILLMSGRESP message has been received}
893          context->state = \hyperlink{mqtt__sn__client_8h_ac2c5b1752aff9aadfd267c2a11535071a9512423d440e0143284ff3e4ffaf2013}{MQTT\_SN\_CLIENT\_STATE\_RESP\_RECEIVED};
894          context->msgType = \hyperlink{mqtt__sn__common_8h_a0b5ccdae8aa73dc7c74ae2dfe62fd112a9765d8cdab39800ffcc84b85eb634da3}{MQTT\_SN\_MSG\_TYPE\_WILLMSGRESP};
895          context->returnCode = \hyperlink{mqtt__sn__common_8h_aa43af56bba229c3214623f0f0c23bf6e}{returnCode};
896 
897          \textcolor{comment}{//The MQTT-SN gateway is alive}
898          context->keepAliveCounter = 0;
899       \}
900    \}
901 
902    \textcolor{comment}{//Return status code}
903    \textcolor{keywordflow}{return} error;
904 \}
\end{DoxyCode}
\mbox{\Hypertarget{mqtt__sn__client__message_8c_ac406b10e18ef00f095acb82fbbc3788d}\label{mqtt__sn__client__message_8c_ac406b10e18ef00f095acb82fbbc3788d}} 
\index{mqtt\+\_\+sn\+\_\+client\+\_\+message.\+c@{mqtt\+\_\+sn\+\_\+client\+\_\+message.\+c}!mqtt\+Sn\+Client\+Process\+Will\+Topic\+Req@{mqtt\+Sn\+Client\+Process\+Will\+Topic\+Req}}
\index{mqtt\+Sn\+Client\+Process\+Will\+Topic\+Req@{mqtt\+Sn\+Client\+Process\+Will\+Topic\+Req}!mqtt\+\_\+sn\+\_\+client\+\_\+message.\+c@{mqtt\+\_\+sn\+\_\+client\+\_\+message.\+c}}
\subsubsection{\texorpdfstring{mqtt\+Sn\+Client\+Process\+Will\+Topic\+Req()}{mqttSnClientProcessWillTopicReq()}}
{\footnotesize\ttfamily \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689c}{error\+\_\+t} mqtt\+Sn\+Client\+Process\+Will\+Topic\+Req (\begin{DoxyParamCaption}\item[{\hyperlink{mqtt__sn__client_8h_aee99129ffa9bde57fd8b742f576ae3f5}{Mqtt\+Sn\+Client\+Context} $\ast$}]{context,  }\item[{const \hyperlink{structMqttSnMessage}{Mqtt\+Sn\+Message} $\ast$}]{message }\end{DoxyParamCaption})}



Process incoming W\+I\+L\+L\+T\+O\+P\+I\+C\+R\+EQ message. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em context} & Pointer to the M\+Q\+T\+T-\/\+SN client context \\
\hline
\mbox{\tt in}  & {\em message} & Pointer to the received M\+Q\+T\+T-\/\+SN message \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Error code 
\end{DoxyReturn}


Definition at line 275 of file mqtt\+\_\+sn\+\_\+client\+\_\+message.\+c.


\begin{DoxyCode}
277 \{
278    \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689c}{error\_t} error;
279 
280    \textcolor{comment}{//Parse WILLTOPICREQ message}
281    error = \hyperlink{mqtt__sn__message_8c_a3f256895389ec2141c30c34b7c86d366}{mqttSnParseWillTopicReq}(message);
282 
283    \textcolor{comment}{//Valid message received?}
284    \textcolor{keywordflow}{if}(!error)
285    \{
286       \textcolor{comment}{//The WILLTOPIC message is sent by a client as response to the WILLTOPICREQ}
287       \textcolor{comment}{//message for transferring its Will topic name to the GW}
288       error = \hyperlink{mqtt__sn__client__message_8c_ae8de74ef1e947b45dc85affe65741c8a}{mqttSnClientSendWillTopic}(context);
289    \}
290 
291    \textcolor{comment}{//Return status code}
292    \textcolor{keywordflow}{return} error;
293 \}
\end{DoxyCode}
\mbox{\Hypertarget{mqtt__sn__client__message_8c_a6216fdf8b0a84258e741896f869a9136}\label{mqtt__sn__client__message_8c_a6216fdf8b0a84258e741896f869a9136}} 
\index{mqtt\+\_\+sn\+\_\+client\+\_\+message.\+c@{mqtt\+\_\+sn\+\_\+client\+\_\+message.\+c}!mqtt\+Sn\+Client\+Process\+Will\+Topic\+Resp@{mqtt\+Sn\+Client\+Process\+Will\+Topic\+Resp}}
\index{mqtt\+Sn\+Client\+Process\+Will\+Topic\+Resp@{mqtt\+Sn\+Client\+Process\+Will\+Topic\+Resp}!mqtt\+\_\+sn\+\_\+client\+\_\+message.\+c@{mqtt\+\_\+sn\+\_\+client\+\_\+message.\+c}}
\subsubsection{\texorpdfstring{mqtt\+Sn\+Client\+Process\+Will\+Topic\+Resp()}{mqttSnClientProcessWillTopicResp()}}
{\footnotesize\ttfamily \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689c}{error\+\_\+t} mqtt\+Sn\+Client\+Process\+Will\+Topic\+Resp (\begin{DoxyParamCaption}\item[{\hyperlink{mqtt__sn__client_8h_aee99129ffa9bde57fd8b742f576ae3f5}{Mqtt\+Sn\+Client\+Context} $\ast$}]{context,  }\item[{const \hyperlink{structMqttSnMessage}{Mqtt\+Sn\+Message} $\ast$}]{message }\end{DoxyParamCaption})}



Process incoming W\+I\+L\+L\+T\+O\+P\+I\+C\+R\+E\+SP message. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em context} & Pointer to the M\+Q\+T\+T-\/\+SN client context \\
\hline
\mbox{\tt in}  & {\em message} & Pointer to the received M\+Q\+T\+T-\/\+SN message \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Error code 
\end{DoxyReturn}


Definition at line 838 of file mqtt\+\_\+sn\+\_\+client\+\_\+message.\+c.


\begin{DoxyCode}
840 \{
841    \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689c}{error\_t} error;
842    \hyperlink{mqtt__sn__common_8h_aa8ae09a48836472262f42c1f09638e9c}{MqttSnReturnCode} \hyperlink{mqtt__sn__common_8h_aa43af56bba229c3214623f0f0c23bf6e}{returnCode};
843 
844    \textcolor{comment}{//Parse WILLTOPICRESP message}
845    error = \hyperlink{mqtt__sn__message_8c_a7ab629d588fc1fa3271abe36fa971f15}{mqttSnParseWillTopicResp}(message, &returnCode);
846 
847    \textcolor{comment}{//Valid message received?}
848    \textcolor{keywordflow}{if}(!error)
849    \{
850       \textcolor{comment}{//Check current state}
851       \textcolor{keywordflow}{if}(context->state == \hyperlink{mqtt__sn__client_8h_ac2c5b1752aff9aadfd267c2a11535071af7aeb72fac83c3e235aa59543c1da1bf}{MQTT\_SN\_CLIENT\_STATE\_SENDING\_REQ} &&
852          context->msgType == \hyperlink{mqtt__sn__common_8h_a0b5ccdae8aa73dc7c74ae2dfe62fd112a38e7a463c018cbcd3de053913515e5db}{MQTT\_SN\_MSG\_TYPE\_WILLTOPICUPD})
853       \{
854          \textcolor{comment}{//Notify the application that a WILLTOPICRESP message has been received}
855          context->state = \hyperlink{mqtt__sn__client_8h_ac2c5b1752aff9aadfd267c2a11535071a9512423d440e0143284ff3e4ffaf2013}{MQTT\_SN\_CLIENT\_STATE\_RESP\_RECEIVED};
856          context->msgType = \hyperlink{mqtt__sn__common_8h_a0b5ccdae8aa73dc7c74ae2dfe62fd112a0a7130c585f58603d4ff5e5c76c721c4}{MQTT\_SN\_MSG\_TYPE\_WILLTOPICRESP};
857          context->returnCode = \hyperlink{mqtt__sn__common_8h_aa43af56bba229c3214623f0f0c23bf6e}{returnCode};
858 
859          \textcolor{comment}{//The MQTT-SN gateway is alive}
860          context->keepAliveCounter = 0;
861       \}
862    \}
863 
864    \textcolor{comment}{//Return status code}
865    \textcolor{keywordflow}{return} error;
866 \}
\end{DoxyCode}
\mbox{\Hypertarget{mqtt__sn__client__message_8c_a065452383ebdbb044bd37a36c8fbcc75}\label{mqtt__sn__client__message_8c_a065452383ebdbb044bd37a36c8fbcc75}} 
\index{mqtt\+\_\+sn\+\_\+client\+\_\+message.\+c@{mqtt\+\_\+sn\+\_\+client\+\_\+message.\+c}!mqtt\+Sn\+Client\+Send\+Connect@{mqtt\+Sn\+Client\+Send\+Connect}}
\index{mqtt\+Sn\+Client\+Send\+Connect@{mqtt\+Sn\+Client\+Send\+Connect}!mqtt\+\_\+sn\+\_\+client\+\_\+message.\+c@{mqtt\+\_\+sn\+\_\+client\+\_\+message.\+c}}
\subsubsection{\texorpdfstring{mqtt\+Sn\+Client\+Send\+Connect()}{mqttSnClientSendConnect()}}
{\footnotesize\ttfamily \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689c}{error\+\_\+t} mqtt\+Sn\+Client\+Send\+Connect (\begin{DoxyParamCaption}\item[{\hyperlink{mqtt__sn__client_8h_aee99129ffa9bde57fd8b742f576ae3f5}{Mqtt\+Sn\+Client\+Context} $\ast$}]{context,  }\item[{\hyperlink{compiler__port_8h_a812d16e5494522586b3784e55d479912}{bool\+\_\+t}}]{clean\+Session }\end{DoxyParamCaption})}



Send C\+O\+N\+N\+E\+CT message. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em context} & Pointer to the M\+Q\+T\+T-\/\+SN client context \\
\hline
\mbox{\tt in}  & {\em clean\+Session} & If this flag is set, then the client and server must discard any previous session and start a new one \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Error code 
\end{DoxyReturn}


Definition at line 955 of file mqtt\+\_\+sn\+\_\+client\+\_\+message.\+c.


\begin{DoxyCode}
957 \{
958    \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689c}{error\_t} error;
959    \hyperlink{compiler__port_8h_ae3e32a98d431a02106616da3071832dd}{systime\_t} \hyperlink{dhcpv6__common_8h_ae73654f333e4363463ad8c594eca1905}{time};
960    \hyperlink{mqtt__sn__common_8h_adfa650f3c081a815eb81daa416bb94a0}{MqttSnFlags} \hyperlink{tcp_8h_aa2585d779da0ab21273a8d92de9a0ebe}{flags};
961 
962    \textcolor{comment}{//The flags contains a number of parameters specifying the behavior of}
963    \textcolor{comment}{//the MQTT-SN connection}
964    flags.all = 0;
965 
966    \textcolor{comment}{//If CleanSession is set to 1, the client and server must discard any}
967    \textcolor{comment}{//previous session and start a new one}
968    \textcolor{keywordflow}{if}(\hyperlink{mqtt__sn__common_8h_a34fa00ac0448386d644eb92f070aadb6}{cleanSession})
969       flags.cleanSession = \hyperlink{os__port_8h_aa8cecfc5c5c054d2875c03e77b7be15d}{TRUE};
970 
971    \textcolor{comment}{//If the client supplies a zero-byte Client Identifier, the client must}
972    \textcolor{comment}{//also set CleanSession to 1}
973    \textcolor{keywordflow}{if}(context->clientId[0] == \textcolor{charliteral}{'\(\backslash\)0'})
974       flags.cleanSession = \hyperlink{os__port_8h_aa8cecfc5c5c054d2875c03e77b7be15d}{TRUE};
975 
976    \textcolor{comment}{//Check whether a valid Will message has been specified}
977    \textcolor{keywordflow}{if}(context->willMessage.topic[0] != \textcolor{charliteral}{'\(\backslash\)0'})
978       flags.will = \hyperlink{os__port_8h_aa8cecfc5c5c054d2875c03e77b7be15d}{TRUE};
979 
980    \textcolor{comment}{//Format CONNECT message}
981    error = \hyperlink{mqtt__sn__message_8c_add73dbd84f885066c5a44bcdd0999941}{mqttSnFormatConnect}(&context->message, flags,
982       context->keepAlive / 1000, context->clientId);
983 
984    \textcolor{comment}{//Check status code}
985    \textcolor{keywordflow}{if}(!error)
986    \{
987       \textcolor{comment}{//Debug message}
988       \hyperlink{debug_8h_a7339bfd784193a5c79efcef2eeb2d6df}{TRACE\_INFO}(\textcolor{stringliteral}{"Sending CONNECT message (%"} \hyperlink{compiler__port_8h_a2b7b0557dc6cd786df02dafbb51f5292}{PRIuSIZE} \textcolor{stringliteral}{" bytes)...\(\backslash\)r\(\backslash\)n"},
989          context->message.length);
990 
991       \textcolor{comment}{//Dump the contents of the message for debugging purpose}
992       \hyperlink{mqtt__sn__debug_8c_a7b37acb16cbf453ab38f1f61de6de681}{mqttSnDumpMessage}(context->message.buffer, context->message.length);
993 
994       \textcolor{comment}{//Send MQTT-SN message}
995       error = \hyperlink{mqtt__sn__client__transport_8c_ad3c6ad213a86998c744da9b880a19292}{mqttSnClientSendDatagram}(context, context->message.buffer,
996          context->message.length);
997 
998       \textcolor{comment}{//Get current time}
999       time = \hyperlink{os__port__chibios_8c_ab66a11272d40a916fa69dd8e4dc443d4}{osGetSystemTime}();
1000 
1001       \textcolor{comment}{//Save the time at which the message was sent}
1002       context->retransmitStartTime = \hyperlink{dhcpv6__common_8h_ae73654f333e4363463ad8c594eca1905}{time};
1003       context->keepAliveTimestamp = \hyperlink{dhcpv6__common_8h_ae73654f333e4363463ad8c594eca1905}{time};
1004 
1005       \textcolor{comment}{//Update MQTT-SN client state}
1006       context->state = \hyperlink{mqtt__sn__client_8h_ac2c5b1752aff9aadfd267c2a11535071af7aeb72fac83c3e235aa59543c1da1bf}{MQTT\_SN\_CLIENT\_STATE\_SENDING\_REQ};
1007       context->msgType = \hyperlink{mqtt__sn__common_8h_a0b5ccdae8aa73dc7c74ae2dfe62fd112a4c979545570ab87837cd7cb54799f566}{MQTT\_SN\_MSG\_TYPE\_CONNECT};
1008    \}
1009 
1010    \textcolor{comment}{//Return status code}
1011    \textcolor{keywordflow}{return} error;
1012 \}
\end{DoxyCode}
\mbox{\Hypertarget{mqtt__sn__client__message_8c_a37cecab2e41579d1d84adbb92735a72c}\label{mqtt__sn__client__message_8c_a37cecab2e41579d1d84adbb92735a72c}} 
\index{mqtt\+\_\+sn\+\_\+client\+\_\+message.\+c@{mqtt\+\_\+sn\+\_\+client\+\_\+message.\+c}!mqtt\+Sn\+Client\+Send\+Disconnect@{mqtt\+Sn\+Client\+Send\+Disconnect}}
\index{mqtt\+Sn\+Client\+Send\+Disconnect@{mqtt\+Sn\+Client\+Send\+Disconnect}!mqtt\+\_\+sn\+\_\+client\+\_\+message.\+c@{mqtt\+\_\+sn\+\_\+client\+\_\+message.\+c}}
\subsubsection{\texorpdfstring{mqtt\+Sn\+Client\+Send\+Disconnect()}{mqttSnClientSendDisconnect()}}
{\footnotesize\ttfamily \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689c}{error\+\_\+t} mqtt\+Sn\+Client\+Send\+Disconnect (\begin{DoxyParamCaption}\item[{\hyperlink{mqtt__sn__client_8h_aee99129ffa9bde57fd8b742f576ae3f5}{Mqtt\+Sn\+Client\+Context} $\ast$}]{context,  }\item[{\hyperlink{stdint_8h_a273cf69d639a59973b6019625df33e30}{uint16\+\_\+t}}]{duration }\end{DoxyParamCaption})}



Send D\+I\+S\+C\+O\+N\+N\+E\+CT message. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em context} & Pointer to the M\+Q\+T\+T-\/\+SN client context \\
\hline
\mbox{\tt in}  & {\em duration} & Value of the sleep timer \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Error code 
\end{DoxyReturn}


Definition at line 1682 of file mqtt\+\_\+sn\+\_\+client\+\_\+message.\+c.


\begin{DoxyCode}
1684 \{
1685    \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689c}{error\_t} error;
1686 
1687    \textcolor{comment}{//Format DISCONNECT message}
1688    error = \hyperlink{mqtt__sn__message_8c_a5901c6dbc3ebd94051d8e19f6a577a6a}{mqttSnFormatDisconnect}(&context->message, 
      \hyperlink{mqtt__sn__common_8h_a5b14ef3e3e30242faa9bbef961493044}{duration});
1689 
1690    \textcolor{comment}{//Check status code}
1691    \textcolor{keywordflow}{if}(!error)
1692    \{
1693       \textcolor{comment}{//Debug message}
1694       \hyperlink{debug_8h_a7339bfd784193a5c79efcef2eeb2d6df}{TRACE\_INFO}(\textcolor{stringliteral}{"Sending DISCONNECT message (%"} \hyperlink{compiler__port_8h_a2b7b0557dc6cd786df02dafbb51f5292}{PRIuSIZE} \textcolor{stringliteral}{" bytes)...\(\backslash\)r\(\backslash\)n"},
1695          context->message.length);
1696 
1697       \textcolor{comment}{//Dump the contents of the message for debugging purpose}
1698       \hyperlink{mqtt__sn__debug_8c_a7b37acb16cbf453ab38f1f61de6de681}{mqttSnDumpMessage}(context->message.buffer, context->message.length);
1699 
1700       \textcolor{comment}{//Send MQTT-SN message}
1701       error = \hyperlink{mqtt__sn__client__transport_8c_ad3c6ad213a86998c744da9b880a19292}{mqttSnClientSendDatagram}(context, context->message.buffer,
1702          context->message.length);
1703 
1704       \textcolor{comment}{//Save the time at which the message was sent}
1705       context->retransmitStartTime = \hyperlink{os__port__chibios_8c_ab66a11272d40a916fa69dd8e4dc443d4}{osGetSystemTime}();
1706 
1707       \textcolor{comment}{//Update MQTT-SN client state}
1708       context->state = \hyperlink{mqtt__sn__client_8h_ac2c5b1752aff9aadfd267c2a11535071af7aeb72fac83c3e235aa59543c1da1bf}{MQTT\_SN\_CLIENT\_STATE\_SENDING\_REQ};
1709       context->msgType = \hyperlink{mqtt__sn__common_8h_a0b5ccdae8aa73dc7c74ae2dfe62fd112a1e564879cc7dd8cd6462507b52ae2508}{MQTT\_SN\_MSG\_TYPE\_DISCONNECT};
1710    \}
1711 
1712    \textcolor{comment}{//Return status code}
1713    \textcolor{keywordflow}{return} error;
1714 \}
\end{DoxyCode}
\mbox{\Hypertarget{mqtt__sn__client__message_8c_a6b0db34af4f76e875fd5e471de572589}\label{mqtt__sn__client__message_8c_a6b0db34af4f76e875fd5e471de572589}} 
\index{mqtt\+\_\+sn\+\_\+client\+\_\+message.\+c@{mqtt\+\_\+sn\+\_\+client\+\_\+message.\+c}!mqtt\+Sn\+Client\+Send\+Ping\+Req@{mqtt\+Sn\+Client\+Send\+Ping\+Req}}
\index{mqtt\+Sn\+Client\+Send\+Ping\+Req@{mqtt\+Sn\+Client\+Send\+Ping\+Req}!mqtt\+\_\+sn\+\_\+client\+\_\+message.\+c@{mqtt\+\_\+sn\+\_\+client\+\_\+message.\+c}}
\subsubsection{\texorpdfstring{mqtt\+Sn\+Client\+Send\+Ping\+Req()}{mqttSnClientSendPingReq()}}
{\footnotesize\ttfamily \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689c}{error\+\_\+t} mqtt\+Sn\+Client\+Send\+Ping\+Req (\begin{DoxyParamCaption}\item[{\hyperlink{mqtt__sn__client_8h_aee99129ffa9bde57fd8b742f576ae3f5}{Mqtt\+Sn\+Client\+Context} $\ast$}]{context }\end{DoxyParamCaption})}



Send P\+I\+N\+G\+R\+EQ message. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em context} & Pointer to the M\+Q\+T\+T-\/\+SN client context \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Error code 
\end{DoxyReturn}


Definition at line 1612 of file mqtt\+\_\+sn\+\_\+client\+\_\+message.\+c.


\begin{DoxyCode}
1613 \{
1614    \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689c}{error\_t} error;
1615 
1616    \textcolor{comment}{//Format PINGREQ message}
1617    error = \hyperlink{mqtt__sn__message_8c_a7674091b1cb49cb985ec453c22a9234b}{mqttSnFormatPingReq}(&context->message, context->clientId);
1618 
1619    \textcolor{comment}{//Check status code}
1620    \textcolor{keywordflow}{if}(!error)
1621    \{
1622       \textcolor{comment}{//Debug message}
1623       \hyperlink{debug_8h_a7339bfd784193a5c79efcef2eeb2d6df}{TRACE\_INFO}(\textcolor{stringliteral}{"Sending PINGREQ message (%"} \hyperlink{compiler__port_8h_a2b7b0557dc6cd786df02dafbb51f5292}{PRIuSIZE} \textcolor{stringliteral}{" bytes)...\(\backslash\)r\(\backslash\)n"},
1624          context->message.length);
1625 
1626       \textcolor{comment}{//Dump the contents of the message for debugging purpose}
1627       \hyperlink{mqtt__sn__debug_8c_a7b37acb16cbf453ab38f1f61de6de681}{mqttSnDumpMessage}(context->message.buffer, context->message.length);
1628 
1629       \textcolor{comment}{//Send MQTT-SN message}
1630       error = \hyperlink{mqtt__sn__client__transport_8c_ad3c6ad213a86998c744da9b880a19292}{mqttSnClientSendDatagram}(context, context->message.buffer,
1631          context->message.length);
1632 
1633       \textcolor{comment}{//Save the time at which the message was sent}
1634       context->keepAliveTimestamp = \hyperlink{os__port__chibios_8c_ab66a11272d40a916fa69dd8e4dc443d4}{osGetSystemTime}();
1635    \}
1636 
1637    \textcolor{comment}{//Return status code}
1638    \textcolor{keywordflow}{return} error;
1639 \}
\end{DoxyCode}
\mbox{\Hypertarget{mqtt__sn__client__message_8c_a6df9a0a51c5adf7649de1dbb8fd05426}\label{mqtt__sn__client__message_8c_a6df9a0a51c5adf7649de1dbb8fd05426}} 
\index{mqtt\+\_\+sn\+\_\+client\+\_\+message.\+c@{mqtt\+\_\+sn\+\_\+client\+\_\+message.\+c}!mqtt\+Sn\+Client\+Send\+Ping\+Resp@{mqtt\+Sn\+Client\+Send\+Ping\+Resp}}
\index{mqtt\+Sn\+Client\+Send\+Ping\+Resp@{mqtt\+Sn\+Client\+Send\+Ping\+Resp}!mqtt\+\_\+sn\+\_\+client\+\_\+message.\+c@{mqtt\+\_\+sn\+\_\+client\+\_\+message.\+c}}
\subsubsection{\texorpdfstring{mqtt\+Sn\+Client\+Send\+Ping\+Resp()}{mqttSnClientSendPingResp()}}
{\footnotesize\ttfamily \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689c}{error\+\_\+t} mqtt\+Sn\+Client\+Send\+Ping\+Resp (\begin{DoxyParamCaption}\item[{\hyperlink{mqtt__sn__client_8h_aee99129ffa9bde57fd8b742f576ae3f5}{Mqtt\+Sn\+Client\+Context} $\ast$}]{context }\end{DoxyParamCaption})}



Send P\+I\+N\+G\+R\+E\+SP message. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em context} & Pointer to the M\+Q\+T\+T-\/\+SN client context \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Error code 
\end{DoxyReturn}


Definition at line 1648 of file mqtt\+\_\+sn\+\_\+client\+\_\+message.\+c.


\begin{DoxyCode}
1649 \{
1650    \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689c}{error\_t} error;
1651 
1652    \textcolor{comment}{//Format PINGRESP message}
1653    error = \hyperlink{mqtt__sn__message_8c_a76cc5d0a6e928a10d3762b0a7942602e}{mqttSnFormatPingResp}(&context->message);
1654 
1655    \textcolor{comment}{//Check status code}
1656    \textcolor{keywordflow}{if}(!error)
1657    \{
1658       \textcolor{comment}{//Debug message}
1659       \hyperlink{debug_8h_a7339bfd784193a5c79efcef2eeb2d6df}{TRACE\_INFO}(\textcolor{stringliteral}{"Sending PINGRESP message (%"} \hyperlink{compiler__port_8h_a2b7b0557dc6cd786df02dafbb51f5292}{PRIuSIZE} \textcolor{stringliteral}{" bytes)...\(\backslash\)r\(\backslash\)n"},
1660          context->message.length);
1661 
1662       \textcolor{comment}{//Dump the contents of the message for debugging purpose}
1663       \hyperlink{mqtt__sn__debug_8c_a7b37acb16cbf453ab38f1f61de6de681}{mqttSnDumpMessage}(context->message.buffer, context->message.length);
1664 
1665       \textcolor{comment}{//Send MQTT-SN message}
1666       error = \hyperlink{mqtt__sn__client__transport_8c_ad3c6ad213a86998c744da9b880a19292}{mqttSnClientSendDatagram}(context, context->message.buffer,
1667          context->message.length);
1668    \}
1669 
1670    \textcolor{comment}{//Return status code}
1671    \textcolor{keywordflow}{return} error;
1672 \}
\end{DoxyCode}
\mbox{\Hypertarget{mqtt__sn__client__message_8c_af488693ca181771dc767ef6b3fd3014a}\label{mqtt__sn__client__message_8c_af488693ca181771dc767ef6b3fd3014a}} 
\index{mqtt\+\_\+sn\+\_\+client\+\_\+message.\+c@{mqtt\+\_\+sn\+\_\+client\+\_\+message.\+c}!mqtt\+Sn\+Client\+Send\+Pub\+Ack@{mqtt\+Sn\+Client\+Send\+Pub\+Ack}}
\index{mqtt\+Sn\+Client\+Send\+Pub\+Ack@{mqtt\+Sn\+Client\+Send\+Pub\+Ack}!mqtt\+\_\+sn\+\_\+client\+\_\+message.\+c@{mqtt\+\_\+sn\+\_\+client\+\_\+message.\+c}}
\subsubsection{\texorpdfstring{mqtt\+Sn\+Client\+Send\+Pub\+Ack()}{mqttSnClientSendPubAck()}}
{\footnotesize\ttfamily \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689c}{error\+\_\+t} mqtt\+Sn\+Client\+Send\+Pub\+Ack (\begin{DoxyParamCaption}\item[{\hyperlink{mqtt__sn__client_8h_aee99129ffa9bde57fd8b742f576ae3f5}{Mqtt\+Sn\+Client\+Context} $\ast$}]{context,  }\item[{\hyperlink{stdint_8h_a273cf69d639a59973b6019625df33e30}{uint16\+\_\+t}}]{msg\+Id,  }\item[{\hyperlink{stdint_8h_a273cf69d639a59973b6019625df33e30}{uint16\+\_\+t}}]{topic\+Id,  }\item[{\hyperlink{mqtt__sn__common_8h_aa8ae09a48836472262f42c1f09638e9c}{Mqtt\+Sn\+Return\+Code}}]{return\+Code }\end{DoxyParamCaption})}



Send P\+U\+B\+A\+CK message. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em context} & Pointer to the M\+Q\+T\+T-\/\+SN client context \\
\hline
\mbox{\tt in}  & {\em msg\+Id} & Message identifier of the corresponding P\+U\+B\+L\+I\+SH message \\
\hline
\mbox{\tt in}  & {\em topic\+Id} & Topic identifier \\
\hline
\mbox{\tt in}  & {\em return\+Code} & Return code \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Error code 
\end{DoxyReturn}


Definition at line 1299 of file mqtt\+\_\+sn\+\_\+client\+\_\+message.\+c.


\begin{DoxyCode}
1301 \{
1302    \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689c}{error\_t} error;
1303 
1304    \textcolor{comment}{//Format PUBACK message}
1305    error = \hyperlink{mqtt__sn__message_8c_a3f4282b52e7e842a603d0fd746442b97}{mqttSnFormatPubAck}(&context->message, \hyperlink{mqtt__sn__common_8h_a2acf66d2c12f7b04f90ed704f5ac215c}{msgId}, 
      \hyperlink{mqtt__sn__common_8h_a9f7eda5d21d45b5350db8cd0c451427a}{topicId}, \hyperlink{mqtt__sn__common_8h_aa43af56bba229c3214623f0f0c23bf6e}{returnCode});
1306 
1307    \textcolor{comment}{//Check status code}
1308    \textcolor{keywordflow}{if}(!error)
1309    \{
1310       \textcolor{comment}{//Debug message}
1311       \hyperlink{debug_8h_a7339bfd784193a5c79efcef2eeb2d6df}{TRACE\_INFO}(\textcolor{stringliteral}{"Sending PUBACK message (%"} \hyperlink{compiler__port_8h_a2b7b0557dc6cd786df02dafbb51f5292}{PRIuSIZE} \textcolor{stringliteral}{" bytes)...\(\backslash\)r\(\backslash\)n"},
1312          context->message.length);
1313 
1314       \textcolor{comment}{//Dump the contents of the message for debugging purpose}
1315       \hyperlink{mqtt__sn__debug_8c_a7b37acb16cbf453ab38f1f61de6de681}{mqttSnDumpMessage}(context->message.buffer, context->message.length);
1316 
1317       \textcolor{comment}{//Send MQTT-SN message}
1318       error = \hyperlink{mqtt__sn__client__transport_8c_ad3c6ad213a86998c744da9b880a19292}{mqttSnClientSendDatagram}(context, context->message.buffer,
1319          context->message.length);
1320    \}
1321 
1322    \textcolor{comment}{//Return status code}
1323    \textcolor{keywordflow}{return} error;
1324 \}
\end{DoxyCode}
\mbox{\Hypertarget{mqtt__sn__client__message_8c_ad813b7a92cd1934b98298a11986a3468}\label{mqtt__sn__client__message_8c_ad813b7a92cd1934b98298a11986a3468}} 
\index{mqtt\+\_\+sn\+\_\+client\+\_\+message.\+c@{mqtt\+\_\+sn\+\_\+client\+\_\+message.\+c}!mqtt\+Sn\+Client\+Send\+Pub\+Comp@{mqtt\+Sn\+Client\+Send\+Pub\+Comp}}
\index{mqtt\+Sn\+Client\+Send\+Pub\+Comp@{mqtt\+Sn\+Client\+Send\+Pub\+Comp}!mqtt\+\_\+sn\+\_\+client\+\_\+message.\+c@{mqtt\+\_\+sn\+\_\+client\+\_\+message.\+c}}
\subsubsection{\texorpdfstring{mqtt\+Sn\+Client\+Send\+Pub\+Comp()}{mqttSnClientSendPubComp()}}
{\footnotesize\ttfamily \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689c}{error\+\_\+t} mqtt\+Sn\+Client\+Send\+Pub\+Comp (\begin{DoxyParamCaption}\item[{\hyperlink{mqtt__sn__client_8h_aee99129ffa9bde57fd8b742f576ae3f5}{Mqtt\+Sn\+Client\+Context} $\ast$}]{context,  }\item[{\hyperlink{stdint_8h_a273cf69d639a59973b6019625df33e30}{uint16\+\_\+t}}]{msg\+Id }\end{DoxyParamCaption})}



Send P\+U\+B\+C\+O\+MP message. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em context} & Pointer to the M\+Q\+T\+T-\/\+SN client context \\
\hline
\mbox{\tt in}  & {\em msg\+Id} & Message identifier of the corresponding P\+U\+B\+L\+I\+SH message \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Error code 
\end{DoxyReturn}


Definition at line 1414 of file mqtt\+\_\+sn\+\_\+client\+\_\+message.\+c.


\begin{DoxyCode}
1415 \{
1416    \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689c}{error\_t} error;
1417 
1418    \textcolor{comment}{//Format PUBCOMP message}
1419    error = \hyperlink{mqtt__sn__message_8c_aeef836fc77b3383e3bae77c1d5187df4}{mqttSnFormatPubComp}(&context->message, \hyperlink{mqtt__sn__common_8h_a2acf66d2c12f7b04f90ed704f5ac215c}{msgId});
1420 
1421    \textcolor{comment}{//Check status code}
1422    \textcolor{keywordflow}{if}(!error)
1423    \{
1424       \textcolor{comment}{//Debug message}
1425       \hyperlink{debug_8h_a7339bfd784193a5c79efcef2eeb2d6df}{TRACE\_INFO}(\textcolor{stringliteral}{"Sending PUBCOMP message (%"} \hyperlink{compiler__port_8h_a2b7b0557dc6cd786df02dafbb51f5292}{PRIuSIZE} \textcolor{stringliteral}{" bytes)...\(\backslash\)r\(\backslash\)n"},
1426          context->message.length);
1427 
1428       \textcolor{comment}{//Dump the contents of the message for debugging purpose}
1429       \hyperlink{mqtt__sn__debug_8c_a7b37acb16cbf453ab38f1f61de6de681}{mqttSnDumpMessage}(context->message.buffer, context->message.length);
1430 
1431       \textcolor{comment}{//Send MQTT-SN message}
1432       error = \hyperlink{mqtt__sn__client__transport_8c_ad3c6ad213a86998c744da9b880a19292}{mqttSnClientSendDatagram}(context, context->message.buffer,
1433          context->message.length);
1434    \}
1435 
1436    \textcolor{comment}{//Return status code}
1437    \textcolor{keywordflow}{return} error;
1438 \}
\end{DoxyCode}
\mbox{\Hypertarget{mqtt__sn__client__message_8c_a7e170c895c48b07088a06135457afbc3}\label{mqtt__sn__client__message_8c_a7e170c895c48b07088a06135457afbc3}} 
\index{mqtt\+\_\+sn\+\_\+client\+\_\+message.\+c@{mqtt\+\_\+sn\+\_\+client\+\_\+message.\+c}!mqtt\+Sn\+Client\+Send\+Publish@{mqtt\+Sn\+Client\+Send\+Publish}}
\index{mqtt\+Sn\+Client\+Send\+Publish@{mqtt\+Sn\+Client\+Send\+Publish}!mqtt\+\_\+sn\+\_\+client\+\_\+message.\+c@{mqtt\+\_\+sn\+\_\+client\+\_\+message.\+c}}
\subsubsection{\texorpdfstring{mqtt\+Sn\+Client\+Send\+Publish()}{mqttSnClientSendPublish()}}
{\footnotesize\ttfamily \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689c}{error\+\_\+t} mqtt\+Sn\+Client\+Send\+Publish (\begin{DoxyParamCaption}\item[{\hyperlink{mqtt__sn__client_8h_aee99129ffa9bde57fd8b742f576ae3f5}{Mqtt\+Sn\+Client\+Context} $\ast$}]{context,  }\item[{\hyperlink{stdint_8h_a273cf69d639a59973b6019625df33e30}{uint16\+\_\+t}}]{msg\+Id,  }\item[{const \hyperlink{compiler__port_8h_a40bb5262bf908c328fbcfbe5d29d0201}{char\+\_\+t} $\ast$}]{topic\+Name,  }\item[{const \hyperlink{stdint_8h_aba7bc1797add20fe3efdf37ced1182c5}{uint8\+\_\+t} $\ast$}]{data,  }\item[{size\+\_\+t}]{length,  }\item[{\hyperlink{mqtt__sn__common_8h_a5037c476df69550c4f714d27359d38a6}{Mqtt\+Sn\+Qos\+Level}}]{qos,  }\item[{\hyperlink{compiler__port_8h_a812d16e5494522586b3784e55d479912}{bool\+\_\+t}}]{retain,  }\item[{\hyperlink{compiler__port_8h_a812d16e5494522586b3784e55d479912}{bool\+\_\+t}}]{dup }\end{DoxyParamCaption})}



Send P\+U\+B\+L\+I\+SH message. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em context} & Pointer to the M\+Q\+T\+T-\/\+SN client context \\
\hline
\mbox{\tt in}  & {\em msg\+Id} & Message identifier \\
\hline
\mbox{\tt in}  & {\em topic\+Name} & Short topic name \\
\hline
\mbox{\tt in}  & {\em data} & Message payload \\
\hline
\mbox{\tt in}  & {\em length} & Length of the message payload \\
\hline
\mbox{\tt in}  & {\em qos} & QoS level to be used when publishing the message \\
\hline
\mbox{\tt in}  & {\em retain} & This flag specifies if the message is to be retained \\
\hline
\mbox{\tt in}  & {\em dup} & This flag specifies if the message is sent for the first time or if the message is retransmitted \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Error code 
\end{DoxyReturn}


Definition at line 1182 of file mqtt\+\_\+sn\+\_\+client\+\_\+message.\+c.


\begin{DoxyCode}
1185 \{
1186    \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689c}{error\_t} error;
1187    \hyperlink{compiler__port_8h_ae3e32a98d431a02106616da3071832dd}{systime\_t} \hyperlink{dhcpv6__common_8h_ae73654f333e4363463ad8c594eca1905}{time};
1188    \hyperlink{stdint_8h_a273cf69d639a59973b6019625df33e30}{uint16\_t} \hyperlink{mqtt__sn__common_8h_a9f7eda5d21d45b5350db8cd0c451427a}{topicId};
1189    \hyperlink{mqtt__sn__common_8h_adfa650f3c081a815eb81daa416bb94a0}{MqttSnFlags} \hyperlink{tcp_8h_aa2585d779da0ab21273a8d92de9a0ebe}{flags};
1190 
1191    \textcolor{comment}{//Initialize status code}
1192    error = \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689cabf350750d0d4fabd8954c0f1e9bbae94}{NO\_ERROR};
1193 
1194    \textcolor{comment}{//Reset unused flags}
1195    flags.all = 0;
1196    \textcolor{comment}{//Set QoS level}
1197    flags.qos = \hyperlink{mqtt__common_8h_a65ee2b4b16f25052c441ff9959dcc7e7}{qos};
1198    \textcolor{comment}{//Set RETAIN flag}
1199    flags.retain = \hyperlink{mqtt__common_8h_ae25d47ab22bd975ad97012eddb6bbfce}{retain};
1200    \textcolor{comment}{//set DUP flag}
1201    flags.dup = \hyperlink{mqtt__common_8h_a4e198deb57c49dad652a61d21ad478e6}{dup};
1202 
1203    \textcolor{comment}{//Short topic name?}
1204    \textcolor{keywordflow}{if}(\hyperlink{mqtt__sn__client__misc_8c_a562e489c567eebf11c934e7379b42022}{mqttSnClientIsShortTopicName}(\hyperlink{mqtt__sn__common_8h_a12172589bd20ef38ecbc6f4faf6ae3d0}{topicName}))
1205    \{
1206       \textcolor{comment}{//The PUBLISH message contains a short topic name}
1207       flags.topicIdType = \hyperlink{mqtt__sn__common_8h_a70807215f60d92d02503f2a5ed76ee96a558b98c894af8f1b6d373d93b5d17827}{MQTT\_SN\_SHORT\_TOPIC\_NAME};
1208       \textcolor{comment}{//The value of the topic ID is not relevant}
1209       topicId = 0;
1210    \}
1211    \textcolor{keywordflow}{else}
1212    \{
1213       \textcolor{comment}{//Check whether a predefined topic ID has been registered}
1214       topicId = \hyperlink{mqtt__sn__client__misc_8c_a5a3a8ce51441f762a4d7a92a24d1c936}{mqttSnClientFindPredefTopicName}(context, 
      \hyperlink{mqtt__sn__common_8h_a12172589bd20ef38ecbc6f4faf6ae3d0}{topicName});
1215 
1216       \textcolor{comment}{//Predefined topic ID found?}
1217       \textcolor{keywordflow}{if}(topicId != \hyperlink{mqtt__sn__common_8h_a124c3e4a030914b576c63af515fd1019}{MQTT\_SN\_INVALID\_TOPIC\_ID})
1218       \{
1219          \textcolor{comment}{//The PUBLISH message contains a predefined topic ID}
1220          flags.topicIdType = \hyperlink{mqtt__sn__common_8h_a70807215f60d92d02503f2a5ed76ee96a6bade83ea3e30d700f58005473c2736b}{MQTT\_SN\_PREDEFINED\_TOPIC\_ID};
1221       \}
1222       \textcolor{keywordflow}{else}
1223       \{
1224          \textcolor{comment}{//Check whether the topic name has been registered}
1225          topicId = \hyperlink{mqtt__sn__client__misc_8c_a2cd69e6ec99d3b7c7bddd0452a7308d0}{mqttSnClientFindTopicName}(context, 
      \hyperlink{mqtt__sn__common_8h_a12172589bd20ef38ecbc6f4faf6ae3d0}{topicName});
1226 
1227          \textcolor{comment}{//Topic ID found?}
1228          \textcolor{keywordflow}{if}(topicId != \hyperlink{mqtt__sn__common_8h_a124c3e4a030914b576c63af515fd1019}{MQTT\_SN\_INVALID\_TOPIC\_ID})
1229          \{
1230             \textcolor{comment}{//The PUBLISH message contains a normal topic ID}
1231             flags.topicIdType = \hyperlink{mqtt__sn__common_8h_a70807215f60d92d02503f2a5ed76ee96a041f445f341f6caa8749f3d627f481e5}{MQTT\_SN\_NORMAL\_TOPIC\_ID};
1232          \}
1233          \textcolor{keywordflow}{else}
1234          \{
1235             \textcolor{comment}{//The topic name has not been registered}
1236             error = \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689ca4cca37264afee88cb14cd105f0d59607}{ERROR\_NOT\_FOUND};
1237          \}
1238       \}
1239    \}
1240 
1241    \textcolor{comment}{//Check status code}
1242    \textcolor{keywordflow}{if}(!error)
1243    \{
1244       \textcolor{comment}{//Format PUBLISH message}
1245       error = \hyperlink{mqtt__sn__message_8c_a32dff3e1a905333815f26385d4d836ed}{mqttSnFormatPublish}(&context->message, flags, 
      \hyperlink{mqtt__sn__common_8h_a2acf66d2c12f7b04f90ed704f5ac215c}{msgId},
1246          topicId, \hyperlink{mqtt__sn__common_8h_a12172589bd20ef38ecbc6f4faf6ae3d0}{topicName}, \hyperlink{dtls__misc_8h_a5c239a1bb87b52b0f1d6d68c4749cd2a}{data}, \hyperlink{dtls__misc_8h_ab43ca82dd7fa2a0e56f941032ef324c4}{length});
1247    \}
1248 
1249    \textcolor{comment}{//Check status code}
1250    \textcolor{keywordflow}{if}(!error)
1251    \{
1252       \textcolor{comment}{//Debug message}
1253       \hyperlink{debug_8h_a7339bfd784193a5c79efcef2eeb2d6df}{TRACE\_INFO}(\textcolor{stringliteral}{"Sending PUBLISH message (%"} \hyperlink{compiler__port_8h_a2b7b0557dc6cd786df02dafbb51f5292}{PRIuSIZE} \textcolor{stringliteral}{" bytes)...\(\backslash\)r\(\backslash\)n"},
1254          context->message.length);
1255 
1256       \textcolor{comment}{//Dump the contents of the message for debugging purpose}
1257       \hyperlink{mqtt__sn__debug_8c_a7b37acb16cbf453ab38f1f61de6de681}{mqttSnDumpMessage}(context->message.buffer, context->message.length);
1258 
1259       \textcolor{comment}{//Send MQTT-SN message}
1260       error = \hyperlink{mqtt__sn__client__transport_8c_ad3c6ad213a86998c744da9b880a19292}{mqttSnClientSendDatagram}(context, context->message.buffer,
1261          context->message.length);
1262 
1263       \textcolor{comment}{//Get current time}
1264       time = \hyperlink{os__port__chibios_8c_ab66a11272d40a916fa69dd8e4dc443d4}{osGetSystemTime}();
1265 
1266       \textcolor{comment}{//Check QoS level}
1267       \textcolor{keywordflow}{if}(\hyperlink{mqtt__common_8h_a65ee2b4b16f25052c441ff9959dcc7e7}{qos} == \hyperlink{mqtt__sn__common_8h_a5037c476df69550c4f714d27359d38a6a7bf24115b2392060ea344c786c324075}{MQTT\_SN\_QOS\_LEVEL\_1} || \hyperlink{mqtt__common_8h_a65ee2b4b16f25052c441ff9959dcc7e7}{qos} == 
      \hyperlink{mqtt__sn__common_8h_a5037c476df69550c4f714d27359d38a6afcf6709e25108bc27d7f7002a1aeb28e}{MQTT\_SN\_QOS\_LEVEL\_2})
1268       \{
1269          \textcolor{comment}{//Save the time at which the message was sent}
1270          context->retransmitStartTime = \hyperlink{dhcpv6__common_8h_ae73654f333e4363463ad8c594eca1905}{time};
1271          context->keepAliveTimestamp = \hyperlink{dhcpv6__common_8h_ae73654f333e4363463ad8c594eca1905}{time};
1272 
1273          \textcolor{comment}{//Update MQTT-SN client state}
1274          context->state = \hyperlink{mqtt__sn__client_8h_ac2c5b1752aff9aadfd267c2a11535071af7aeb72fac83c3e235aa59543c1da1bf}{MQTT\_SN\_CLIENT\_STATE\_SENDING\_REQ};
1275          context->msgType = \hyperlink{mqtt__sn__common_8h_a0b5ccdae8aa73dc7c74ae2dfe62fd112a37c9bc96e12d4079199211d7aeda5398}{MQTT\_SN\_MSG\_TYPE\_PUBLISH};
1276       \}
1277       \textcolor{keywordflow}{else}
1278       \{
1279          \textcolor{comment}{//In the QoS 0, no response is sent by the receiver and no retry}
1280          \textcolor{comment}{//is performed by the sender}
1281          context->state = \hyperlink{mqtt__sn__client_8h_ac2c5b1752aff9aadfd267c2a11535071a5f379a957d11d1178d53e2b176ec8a30}{MQTT\_SN\_CLIENT\_STATE\_ACTIVE};
1282       \}
1283    \}
1284 
1285    \textcolor{comment}{//Return status code}
1286    \textcolor{keywordflow}{return} error;
1287 \}
\end{DoxyCode}
\mbox{\Hypertarget{mqtt__sn__client__message_8c_ac8c5be25d943cda3efd1679d48f756a6}\label{mqtt__sn__client__message_8c_ac8c5be25d943cda3efd1679d48f756a6}} 
\index{mqtt\+\_\+sn\+\_\+client\+\_\+message.\+c@{mqtt\+\_\+sn\+\_\+client\+\_\+message.\+c}!mqtt\+Sn\+Client\+Send\+Pub\+Rec@{mqtt\+Sn\+Client\+Send\+Pub\+Rec}}
\index{mqtt\+Sn\+Client\+Send\+Pub\+Rec@{mqtt\+Sn\+Client\+Send\+Pub\+Rec}!mqtt\+\_\+sn\+\_\+client\+\_\+message.\+c@{mqtt\+\_\+sn\+\_\+client\+\_\+message.\+c}}
\subsubsection{\texorpdfstring{mqtt\+Sn\+Client\+Send\+Pub\+Rec()}{mqttSnClientSendPubRec()}}
{\footnotesize\ttfamily \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689c}{error\+\_\+t} mqtt\+Sn\+Client\+Send\+Pub\+Rec (\begin{DoxyParamCaption}\item[{\hyperlink{mqtt__sn__client_8h_aee99129ffa9bde57fd8b742f576ae3f5}{Mqtt\+Sn\+Client\+Context} $\ast$}]{context,  }\item[{\hyperlink{stdint_8h_a273cf69d639a59973b6019625df33e30}{uint16\+\_\+t}}]{msg\+Id }\end{DoxyParamCaption})}



Send P\+U\+B\+R\+EC message. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em context} & Pointer to the M\+Q\+T\+T-\/\+SN client context \\
\hline
\mbox{\tt in}  & {\em msg\+Id} & Message identifier of the corresponding P\+U\+B\+L\+I\+SH message \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Error code 
\end{DoxyReturn}


Definition at line 1334 of file mqtt\+\_\+sn\+\_\+client\+\_\+message.\+c.


\begin{DoxyCode}
1335 \{
1336    \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689c}{error\_t} error;
1337 
1338    \textcolor{comment}{//Format PUBREC message}
1339    error = \hyperlink{mqtt__sn__message_8c_a455e00eff2e9f5a38e4c4ccbb3499454}{mqttSnFormatPubRec}(&context->message, \hyperlink{mqtt__sn__common_8h_a2acf66d2c12f7b04f90ed704f5ac215c}{msgId});
1340 
1341    \textcolor{comment}{//Check status code}
1342    \textcolor{keywordflow}{if}(!error)
1343    \{
1344       \textcolor{comment}{//Debug message}
1345       \hyperlink{debug_8h_a7339bfd784193a5c79efcef2eeb2d6df}{TRACE\_INFO}(\textcolor{stringliteral}{"Sending PUBREC message (%"} \hyperlink{compiler__port_8h_a2b7b0557dc6cd786df02dafbb51f5292}{PRIuSIZE} \textcolor{stringliteral}{" bytes)...\(\backslash\)r\(\backslash\)n"},
1346          context->message.length);
1347 
1348       \textcolor{comment}{//Dump the contents of the message for debugging purpose}
1349       \hyperlink{mqtt__sn__debug_8c_a7b37acb16cbf453ab38f1f61de6de681}{mqttSnDumpMessage}(context->message.buffer, context->message.length);
1350 
1351       \textcolor{comment}{//Send MQTT-SN message}
1352       error = \hyperlink{mqtt__sn__client__transport_8c_ad3c6ad213a86998c744da9b880a19292}{mqttSnClientSendDatagram}(context, context->message.buffer,
1353          context->message.length);
1354    \}
1355 
1356    \textcolor{comment}{//Return status code}
1357    \textcolor{keywordflow}{return} error;
1358 \}
\end{DoxyCode}
\mbox{\Hypertarget{mqtt__sn__client__message_8c_a8d82c408d62580d958d24e397e05d161}\label{mqtt__sn__client__message_8c_a8d82c408d62580d958d24e397e05d161}} 
\index{mqtt\+\_\+sn\+\_\+client\+\_\+message.\+c@{mqtt\+\_\+sn\+\_\+client\+\_\+message.\+c}!mqtt\+Sn\+Client\+Send\+Pub\+Rel@{mqtt\+Sn\+Client\+Send\+Pub\+Rel}}
\index{mqtt\+Sn\+Client\+Send\+Pub\+Rel@{mqtt\+Sn\+Client\+Send\+Pub\+Rel}!mqtt\+\_\+sn\+\_\+client\+\_\+message.\+c@{mqtt\+\_\+sn\+\_\+client\+\_\+message.\+c}}
\subsubsection{\texorpdfstring{mqtt\+Sn\+Client\+Send\+Pub\+Rel()}{mqttSnClientSendPubRel()}}
{\footnotesize\ttfamily \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689c}{error\+\_\+t} mqtt\+Sn\+Client\+Send\+Pub\+Rel (\begin{DoxyParamCaption}\item[{\hyperlink{mqtt__sn__client_8h_aee99129ffa9bde57fd8b742f576ae3f5}{Mqtt\+Sn\+Client\+Context} $\ast$}]{context,  }\item[{\hyperlink{stdint_8h_a273cf69d639a59973b6019625df33e30}{uint16\+\_\+t}}]{msg\+Id }\end{DoxyParamCaption})}



Send P\+U\+B\+R\+EL message. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em context} & Pointer to the M\+Q\+T\+T-\/\+SN client context \\
\hline
\mbox{\tt in}  & {\em msg\+Id} & Message identifier of the corresponding P\+U\+B\+L\+I\+SH message \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Error code 
\end{DoxyReturn}


Definition at line 1368 of file mqtt\+\_\+sn\+\_\+client\+\_\+message.\+c.


\begin{DoxyCode}
1369 \{
1370    \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689c}{error\_t} error;
1371    \hyperlink{compiler__port_8h_ae3e32a98d431a02106616da3071832dd}{systime\_t} \hyperlink{dhcpv6__common_8h_ae73654f333e4363463ad8c594eca1905}{time};
1372 
1373    \textcolor{comment}{//Format PUBREL message}
1374    error = \hyperlink{mqtt__sn__message_8c_a7d74e9bdcc884be6a283ec162c410a65}{mqttSnFormatPubRel}(&context->message, \hyperlink{mqtt__sn__common_8h_a2acf66d2c12f7b04f90ed704f5ac215c}{msgId});
1375 
1376    \textcolor{comment}{//Check status code}
1377    \textcolor{keywordflow}{if}(!error)
1378    \{
1379       \textcolor{comment}{//Debug message}
1380       \hyperlink{debug_8h_a7339bfd784193a5c79efcef2eeb2d6df}{TRACE\_INFO}(\textcolor{stringliteral}{"Sending PUBREL message (%"} \hyperlink{compiler__port_8h_a2b7b0557dc6cd786df02dafbb51f5292}{PRIuSIZE} \textcolor{stringliteral}{" bytes)...\(\backslash\)r\(\backslash\)n"},
1381          context->message.length);
1382 
1383       \textcolor{comment}{//Dump the contents of the message for debugging purpose}
1384       \hyperlink{mqtt__sn__debug_8c_a7b37acb16cbf453ab38f1f61de6de681}{mqttSnDumpMessage}(context->message.buffer, context->message.length);
1385 
1386       \textcolor{comment}{//Send MQTT-SN message}
1387       error = \hyperlink{mqtt__sn__client__transport_8c_ad3c6ad213a86998c744da9b880a19292}{mqttSnClientSendDatagram}(context, context->message.buffer,
1388          context->message.length);
1389 
1390       \textcolor{comment}{//Get current time}
1391       time = \hyperlink{os__port__chibios_8c_ab66a11272d40a916fa69dd8e4dc443d4}{osGetSystemTime}();
1392 
1393       \textcolor{comment}{//Save the time at which the message was sent}
1394       context->retransmitStartTime = \hyperlink{dhcpv6__common_8h_ae73654f333e4363463ad8c594eca1905}{time};
1395       context->keepAliveTimestamp = \hyperlink{dhcpv6__common_8h_ae73654f333e4363463ad8c594eca1905}{time};
1396 
1397       \textcolor{comment}{//Update MQTT-SN client state}
1398       context->state = \hyperlink{mqtt__sn__client_8h_ac2c5b1752aff9aadfd267c2a11535071af7aeb72fac83c3e235aa59543c1da1bf}{MQTT\_SN\_CLIENT\_STATE\_SENDING\_REQ};
1399       context->msgType = \hyperlink{mqtt__sn__common_8h_a0b5ccdae8aa73dc7c74ae2dfe62fd112ac8a07a546f23a523b469944a26de0ab1}{MQTT\_SN\_MSG\_TYPE\_PUBREL};
1400    \}
1401 
1402    \textcolor{comment}{//Return status code}
1403    \textcolor{keywordflow}{return} error;
1404 \}
\end{DoxyCode}
\mbox{\Hypertarget{mqtt__sn__client__message_8c_a2f303b61851113e58d7ba6e0e734b08e}\label{mqtt__sn__client__message_8c_a2f303b61851113e58d7ba6e0e734b08e}} 
\index{mqtt\+\_\+sn\+\_\+client\+\_\+message.\+c@{mqtt\+\_\+sn\+\_\+client\+\_\+message.\+c}!mqtt\+Sn\+Client\+Send\+Reg\+Ack@{mqtt\+Sn\+Client\+Send\+Reg\+Ack}}
\index{mqtt\+Sn\+Client\+Send\+Reg\+Ack@{mqtt\+Sn\+Client\+Send\+Reg\+Ack}!mqtt\+\_\+sn\+\_\+client\+\_\+message.\+c@{mqtt\+\_\+sn\+\_\+client\+\_\+message.\+c}}
\subsubsection{\texorpdfstring{mqtt\+Sn\+Client\+Send\+Reg\+Ack()}{mqttSnClientSendRegAck()}}
{\footnotesize\ttfamily \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689c}{error\+\_\+t} mqtt\+Sn\+Client\+Send\+Reg\+Ack (\begin{DoxyParamCaption}\item[{\hyperlink{mqtt__sn__client_8h_aee99129ffa9bde57fd8b742f576ae3f5}{Mqtt\+Sn\+Client\+Context} $\ast$}]{context,  }\item[{\hyperlink{stdint_8h_a273cf69d639a59973b6019625df33e30}{uint16\+\_\+t}}]{msg\+Id,  }\item[{\hyperlink{stdint_8h_a273cf69d639a59973b6019625df33e30}{uint16\+\_\+t}}]{topic\+Id,  }\item[{\hyperlink{mqtt__sn__common_8h_aa8ae09a48836472262f42c1f09638e9c}{Mqtt\+Sn\+Return\+Code}}]{return\+Code }\end{DoxyParamCaption})}



Send R\+E\+G\+A\+CK message. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em context} & Pointer to the M\+Q\+T\+T-\/\+SN client context \\
\hline
\mbox{\tt in}  & {\em msg\+Id} & Message identifier \\
\hline
\mbox{\tt in}  & {\em topic\+Id} & Topic identifier \\
\hline
\mbox{\tt in}  & {\em return\+Code} & Return code \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Error code 
\end{DoxyReturn}


Definition at line 1140 of file mqtt\+\_\+sn\+\_\+client\+\_\+message.\+c.


\begin{DoxyCode}
1142 \{
1143    \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689c}{error\_t} error;
1144 
1145    \textcolor{comment}{//Format REGACK message}
1146    error = \hyperlink{mqtt__sn__message_8c_a1cf0fbc06c248c08d060d453f2182936}{mqttSnFormatRegAck}(&context->message, \hyperlink{mqtt__sn__common_8h_a2acf66d2c12f7b04f90ed704f5ac215c}{msgId}, 
      \hyperlink{mqtt__sn__common_8h_a9f7eda5d21d45b5350db8cd0c451427a}{topicId}, \hyperlink{mqtt__sn__common_8h_aa43af56bba229c3214623f0f0c23bf6e}{returnCode});
1147 
1148    \textcolor{comment}{//Check status code}
1149    \textcolor{keywordflow}{if}(!error)
1150    \{
1151       \textcolor{comment}{//Debug message}
1152       \hyperlink{debug_8h_a7339bfd784193a5c79efcef2eeb2d6df}{TRACE\_INFO}(\textcolor{stringliteral}{"Sending REGACK message (%"} \hyperlink{compiler__port_8h_a2b7b0557dc6cd786df02dafbb51f5292}{PRIuSIZE} \textcolor{stringliteral}{" bytes)...\(\backslash\)r\(\backslash\)n"},
1153          context->message.length);
1154 
1155       \textcolor{comment}{//Dump the contents of the message for debugging purpose}
1156       \hyperlink{mqtt__sn__debug_8c_a7b37acb16cbf453ab38f1f61de6de681}{mqttSnDumpMessage}(context->message.buffer, context->message.length);
1157 
1158       \textcolor{comment}{//Send MQTT-SN message}
1159       error = \hyperlink{mqtt__sn__client__transport_8c_ad3c6ad213a86998c744da9b880a19292}{mqttSnClientSendDatagram}(context, context->message.buffer,
1160          context->message.length);
1161    \}
1162 
1163    \textcolor{comment}{//Return status code}
1164    \textcolor{keywordflow}{return} error;
1165 \}
\end{DoxyCode}
\mbox{\Hypertarget{mqtt__sn__client__message_8c_a8f404825e3cad7813b703b61aea12bcc}\label{mqtt__sn__client__message_8c_a8f404825e3cad7813b703b61aea12bcc}} 
\index{mqtt\+\_\+sn\+\_\+client\+\_\+message.\+c@{mqtt\+\_\+sn\+\_\+client\+\_\+message.\+c}!mqtt\+Sn\+Client\+Send\+Register@{mqtt\+Sn\+Client\+Send\+Register}}
\index{mqtt\+Sn\+Client\+Send\+Register@{mqtt\+Sn\+Client\+Send\+Register}!mqtt\+\_\+sn\+\_\+client\+\_\+message.\+c@{mqtt\+\_\+sn\+\_\+client\+\_\+message.\+c}}
\subsubsection{\texorpdfstring{mqtt\+Sn\+Client\+Send\+Register()}{mqttSnClientSendRegister()}}
{\footnotesize\ttfamily \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689c}{error\+\_\+t} mqtt\+Sn\+Client\+Send\+Register (\begin{DoxyParamCaption}\item[{\hyperlink{mqtt__sn__client_8h_aee99129ffa9bde57fd8b742f576ae3f5}{Mqtt\+Sn\+Client\+Context} $\ast$}]{context,  }\item[{const \hyperlink{compiler__port_8h_a40bb5262bf908c328fbcfbe5d29d0201}{char\+\_\+t} $\ast$}]{topic\+Name }\end{DoxyParamCaption})}



Send R\+E\+G\+I\+S\+T\+ER message. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em context} & Pointer to the M\+Q\+T\+T-\/\+SN client context \\
\hline
\mbox{\tt in}  & {\em topic\+Name} & Topic name \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Error code 
\end{DoxyReturn}


Definition at line 1090 of file mqtt\+\_\+sn\+\_\+client\+\_\+message.\+c.


\begin{DoxyCode}
1092 \{
1093    \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689c}{error\_t} error;
1094    \hyperlink{compiler__port_8h_ae3e32a98d431a02106616da3071832dd}{systime\_t} \hyperlink{dhcpv6__common_8h_ae73654f333e4363463ad8c594eca1905}{time};
1095 
1096    \textcolor{comment}{//Format REGISTER message}
1097    error = \hyperlink{mqtt__sn__message_8c_a84b352f0fd3dd17c3a7a338879caff6c}{mqttSnFormatRegister}(&context->message, context->msgId, 0,
1098       \hyperlink{mqtt__sn__common_8h_a12172589bd20ef38ecbc6f4faf6ae3d0}{topicName});
1099 
1100    \textcolor{comment}{//Check status code}
1101    \textcolor{keywordflow}{if}(!error)
1102    \{
1103       \textcolor{comment}{//Debug message}
1104       \hyperlink{debug_8h_a7339bfd784193a5c79efcef2eeb2d6df}{TRACE\_INFO}(\textcolor{stringliteral}{"Sending REGISTER message (%"} \hyperlink{compiler__port_8h_a2b7b0557dc6cd786df02dafbb51f5292}{PRIuSIZE} \textcolor{stringliteral}{" bytes)...\(\backslash\)r\(\backslash\)n"},
1105          context->message.length);
1106 
1107       \textcolor{comment}{//Dump the contents of the message for debugging purpose}
1108       \hyperlink{mqtt__sn__debug_8c_a7b37acb16cbf453ab38f1f61de6de681}{mqttSnDumpMessage}(context->message.buffer, context->message.length);
1109 
1110       \textcolor{comment}{//Send MQTT-SN message}
1111       error = \hyperlink{mqtt__sn__client__transport_8c_ad3c6ad213a86998c744da9b880a19292}{mqttSnClientSendDatagram}(context, context->message.buffer,
1112          context->message.length);
1113 
1114       \textcolor{comment}{//Get current time}
1115       time = \hyperlink{os__port__chibios_8c_ab66a11272d40a916fa69dd8e4dc443d4}{osGetSystemTime}();
1116 
1117       \textcolor{comment}{//Save the time at which the message was sent}
1118       context->retransmitStartTime = \hyperlink{dhcpv6__common_8h_ae73654f333e4363463ad8c594eca1905}{time};
1119       context->keepAliveTimestamp = \hyperlink{dhcpv6__common_8h_ae73654f333e4363463ad8c594eca1905}{time};
1120 
1121       \textcolor{comment}{//Update MQTT-SN client state}
1122       context->state = \hyperlink{mqtt__sn__client_8h_ac2c5b1752aff9aadfd267c2a11535071af7aeb72fac83c3e235aa59543c1da1bf}{MQTT\_SN\_CLIENT\_STATE\_SENDING\_REQ};
1123       context->msgType = \hyperlink{mqtt__sn__common_8h_a0b5ccdae8aa73dc7c74ae2dfe62fd112a74d8f28e6bd857bad8753800d962b118}{MQTT\_SN\_MSG\_TYPE\_REGISTER};
1124    \}
1125 
1126    \textcolor{comment}{//Return status code}
1127    \textcolor{keywordflow}{return} error;
1128 \}
\end{DoxyCode}
\mbox{\Hypertarget{mqtt__sn__client__message_8c_a38ca7260c1fbba0dabcb84d4bb5a2528}\label{mqtt__sn__client__message_8c_a38ca7260c1fbba0dabcb84d4bb5a2528}} 
\index{mqtt\+\_\+sn\+\_\+client\+\_\+message.\+c@{mqtt\+\_\+sn\+\_\+client\+\_\+message.\+c}!mqtt\+Sn\+Client\+Send\+Search\+Gw@{mqtt\+Sn\+Client\+Send\+Search\+Gw}}
\index{mqtt\+Sn\+Client\+Send\+Search\+Gw@{mqtt\+Sn\+Client\+Send\+Search\+Gw}!mqtt\+\_\+sn\+\_\+client\+\_\+message.\+c@{mqtt\+\_\+sn\+\_\+client\+\_\+message.\+c}}
\subsubsection{\texorpdfstring{mqtt\+Sn\+Client\+Send\+Search\+Gw()}{mqttSnClientSendSearchGw()}}
{\footnotesize\ttfamily \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689c}{error\+\_\+t} mqtt\+Sn\+Client\+Send\+Search\+Gw (\begin{DoxyParamCaption}\item[{\hyperlink{mqtt__sn__client_8h_aee99129ffa9bde57fd8b742f576ae3f5}{Mqtt\+Sn\+Client\+Context} $\ast$}]{context,  }\item[{\hyperlink{stdint_8h_aba7bc1797add20fe3efdf37ced1182c5}{uint8\+\_\+t}}]{radius,  }\item[{const \hyperlink{structIpAddr}{Ip\+Addr} $\ast$}]{dest\+Ip\+Addr,  }\item[{\hyperlink{stdint_8h_a273cf69d639a59973b6019625df33e30}{uint16\+\_\+t}}]{dest\+Port }\end{DoxyParamCaption})}



Send S\+E\+A\+R\+C\+H\+GW message. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em context} & Pointer to the M\+Q\+T\+T-\/\+SN client context \\
\hline
\mbox{\tt in}  & {\em radius} & Broadcast radius of S\+E\+A\+R\+C\+H\+GW message \\
\hline
\mbox{\tt in}  & {\em dest\+Ip\+Addr} & Destination IP address \\
\hline
\mbox{\tt in}  & {\em dest\+Port} & Destination port number \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Error code 
\end{DoxyReturn}


Definition at line 916 of file mqtt\+\_\+sn\+\_\+client\+\_\+message.\+c.


\begin{DoxyCode}
918 \{
919    \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689c}{error\_t} error;
920 
921    \textcolor{comment}{//Format SEARCHGW message}
922    error = \hyperlink{mqtt__sn__message_8c_a6f13a37e2ec64beaad7cb00a3affcc94}{mqttSnFormatSearchGw}(&context->message, \hyperlink{mqtt__sn__common_8h_a3eba6170f6a65416202e05346c2d7541}{radius});
923 
924    \textcolor{comment}{//Check status code}
925    \textcolor{keywordflow}{if}(!error)
926    \{
927       \textcolor{comment}{//Debug message}
928       \hyperlink{debug_8h_a7339bfd784193a5c79efcef2eeb2d6df}{TRACE\_INFO}(\textcolor{stringliteral}{"Sending SEARCHGW message (%"} \hyperlink{compiler__port_8h_a2b7b0557dc6cd786df02dafbb51f5292}{PRIuSIZE} \textcolor{stringliteral}{" bytes)...\(\backslash\)r\(\backslash\)n"},
929          context->message.length);
930 
931       \textcolor{comment}{//Dump the contents of the message for debugging purpose}
932       \hyperlink{mqtt__sn__debug_8c_a7b37acb16cbf453ab38f1f61de6de681}{mqttSnDumpMessage}(context->message.buffer, context->message.length);
933 
934       \textcolor{comment}{//Send MQTT-SN message}
935       error = \hyperlink{mqtt__sn__client__transport_8c_ad0cbc6136236b9a5ed67f5eb6b7ea576}{mqttSnClientBroadcastDatagram}(context, destIpAddr, 
      \hyperlink{tcp_8h_af15d713ad2bc92686abfa6ab012b5039}{destPort},
936          context->message.buffer, context->message.length);
937 
938       \textcolor{comment}{//Save the time at which the message was sent}
939       context->retransmitStartTime = \hyperlink{os__port__chibios_8c_ab66a11272d40a916fa69dd8e4dc443d4}{osGetSystemTime}();
940    \}
941 
942    \textcolor{comment}{//Return status code}
943    \textcolor{keywordflow}{return} error;
944 \}
\end{DoxyCode}
\mbox{\Hypertarget{mqtt__sn__client__message_8c_aee1ec88500c030f48a42bcf86f13b8d8}\label{mqtt__sn__client__message_8c_aee1ec88500c030f48a42bcf86f13b8d8}} 
\index{mqtt\+\_\+sn\+\_\+client\+\_\+message.\+c@{mqtt\+\_\+sn\+\_\+client\+\_\+message.\+c}!mqtt\+Sn\+Client\+Send\+Subscribe@{mqtt\+Sn\+Client\+Send\+Subscribe}}
\index{mqtt\+Sn\+Client\+Send\+Subscribe@{mqtt\+Sn\+Client\+Send\+Subscribe}!mqtt\+\_\+sn\+\_\+client\+\_\+message.\+c@{mqtt\+\_\+sn\+\_\+client\+\_\+message.\+c}}
\subsubsection{\texorpdfstring{mqtt\+Sn\+Client\+Send\+Subscribe()}{mqttSnClientSendSubscribe()}}
{\footnotesize\ttfamily \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689c}{error\+\_\+t} mqtt\+Sn\+Client\+Send\+Subscribe (\begin{DoxyParamCaption}\item[{\hyperlink{mqtt__sn__client_8h_aee99129ffa9bde57fd8b742f576ae3f5}{Mqtt\+Sn\+Client\+Context} $\ast$}]{context,  }\item[{const \hyperlink{compiler__port_8h_a40bb5262bf908c328fbcfbe5d29d0201}{char\+\_\+t} $\ast$}]{topic\+Name,  }\item[{\hyperlink{mqtt__sn__common_8h_a5037c476df69550c4f714d27359d38a6}{Mqtt\+Sn\+Qos\+Level}}]{qos }\end{DoxyParamCaption})}



Send S\+U\+B\+S\+C\+R\+I\+BE message. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em context} & Pointer to the M\+Q\+T\+T-\/\+SN client context \\
\hline
\mbox{\tt in}  & {\em topic\+Name} & Topic filter \\
\hline
\mbox{\tt in}  & {\em qos} & Maximum QoS level at which the server can send application messages to the client \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Error code 
\end{DoxyReturn}


Definition at line 1450 of file mqtt\+\_\+sn\+\_\+client\+\_\+message.\+c.


\begin{DoxyCode}
1452 \{
1453    \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689c}{error\_t} error;
1454    \hyperlink{compiler__port_8h_ae3e32a98d431a02106616da3071832dd}{systime\_t} \hyperlink{dhcpv6__common_8h_ae73654f333e4363463ad8c594eca1905}{time};
1455    \hyperlink{stdint_8h_a273cf69d639a59973b6019625df33e30}{uint16\_t} \hyperlink{mqtt__sn__common_8h_a9f7eda5d21d45b5350db8cd0c451427a}{topicId};
1456    \hyperlink{mqtt__sn__common_8h_adfa650f3c081a815eb81daa416bb94a0}{MqttSnFlags} \hyperlink{tcp_8h_aa2585d779da0ab21273a8d92de9a0ebe}{flags};
1457 
1458    \textcolor{comment}{//Initialize status code}
1459    error = \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689cabf350750d0d4fabd8954c0f1e9bbae94}{NO\_ERROR};
1460 
1461    \textcolor{comment}{//Reset unused flags}
1462    flags.all = 0;
1463    \textcolor{comment}{//Set QoS level}
1464    flags.qos = \hyperlink{mqtt__common_8h_a65ee2b4b16f25052c441ff9959dcc7e7}{qos};
1465 
1466    \textcolor{comment}{//Check whether a predefined topic ID has been registered}
1467    topicId = \hyperlink{mqtt__sn__client__misc_8c_a5a3a8ce51441f762a4d7a92a24d1c936}{mqttSnClientFindPredefTopicName}(context, 
      \hyperlink{mqtt__sn__common_8h_a12172589bd20ef38ecbc6f4faf6ae3d0}{topicName});
1468 
1469    \textcolor{comment}{//Predefined topic ID found?}
1470    \textcolor{keywordflow}{if}(topicId != \hyperlink{mqtt__sn__common_8h_a124c3e4a030914b576c63af515fd1019}{MQTT\_SN\_INVALID\_TOPIC\_ID})
1471    \{
1472       \textcolor{comment}{//The SUBSCRIBE message contains a predefined topic ID}
1473       flags.topicIdType = \hyperlink{mqtt__sn__common_8h_a70807215f60d92d02503f2a5ed76ee96a6bade83ea3e30d700f58005473c2736b}{MQTT\_SN\_PREDEFINED\_TOPIC\_ID};
1474    \}
1475    \textcolor{keywordflow}{else}
1476    \{
1477       \textcolor{comment}{//Short topic name?}
1478       \textcolor{keywordflow}{if}(\hyperlink{mqtt__sn__client__misc_8c_a562e489c567eebf11c934e7379b42022}{mqttSnClientIsShortTopicName}(\hyperlink{mqtt__sn__common_8h_a12172589bd20ef38ecbc6f4faf6ae3d0}{topicName}))
1479       \{
1480          \textcolor{comment}{//The SUBSCRIBE message contains a short topic name}
1481          flags.topicIdType = \hyperlink{mqtt__sn__common_8h_a70807215f60d92d02503f2a5ed76ee96a558b98c894af8f1b6d373d93b5d17827}{MQTT\_SN\_SHORT\_TOPIC\_NAME};
1482       \}
1483       \textcolor{keywordflow}{else}
1484       \{
1485          \textcolor{comment}{//The SUBSCRIBE message contains a normal topic name}
1486          flags.topicIdType = \hyperlink{mqtt__sn__common_8h_a70807215f60d92d02503f2a5ed76ee96a9002d75bcc419fb9550c7950570b70b6}{MQTT\_SN\_NORMAL\_TOPIC\_NAME};
1487       \}
1488 
1489       \textcolor{comment}{//Format SUBSCRIBE message}
1490       error = \hyperlink{mqtt__sn__message_8c_ae5fbfb688fcaa04ca27920f3ccbca3a0}{mqttSnFormatSubscribe}(&context->message, flags,
1491          context->msgId, topicId, \hyperlink{mqtt__sn__common_8h_a12172589bd20ef38ecbc6f4faf6ae3d0}{topicName});
1492    \}
1493 
1494    \textcolor{comment}{//Check status code}
1495    \textcolor{keywordflow}{if}(!error)
1496    \{
1497       \textcolor{comment}{//Debug message}
1498       \hyperlink{debug_8h_a7339bfd784193a5c79efcef2eeb2d6df}{TRACE\_INFO}(\textcolor{stringliteral}{"Sending SUBSCRIBE message (%"} \hyperlink{compiler__port_8h_a2b7b0557dc6cd786df02dafbb51f5292}{PRIuSIZE} \textcolor{stringliteral}{" bytes)...\(\backslash\)r\(\backslash\)n"},
1499          context->message.length);
1500 
1501       \textcolor{comment}{//Dump the contents of the message for debugging purpose}
1502       \hyperlink{mqtt__sn__debug_8c_a7b37acb16cbf453ab38f1f61de6de681}{mqttSnDumpMessage}(context->message.buffer, context->message.length);
1503 
1504       \textcolor{comment}{//Send MQTT-SN message}
1505       error = \hyperlink{mqtt__sn__client__transport_8c_ad3c6ad213a86998c744da9b880a19292}{mqttSnClientSendDatagram}(context, context->message.buffer,
1506          context->message.length);
1507 
1508       \textcolor{comment}{//Get current time}
1509       time = \hyperlink{os__port__chibios_8c_ab66a11272d40a916fa69dd8e4dc443d4}{osGetSystemTime}();
1510 
1511       \textcolor{comment}{//Save the time at which the message was sent}
1512       context->retransmitStartTime = \hyperlink{dhcpv6__common_8h_ae73654f333e4363463ad8c594eca1905}{time};
1513       context->keepAliveTimestamp = \hyperlink{dhcpv6__common_8h_ae73654f333e4363463ad8c594eca1905}{time};
1514 
1515       \textcolor{comment}{//Update MQTT-SN client state}
1516       context->state = \hyperlink{mqtt__sn__client_8h_ac2c5b1752aff9aadfd267c2a11535071af7aeb72fac83c3e235aa59543c1da1bf}{MQTT\_SN\_CLIENT\_STATE\_SENDING\_REQ};
1517       context->msgType = \hyperlink{mqtt__sn__common_8h_a0b5ccdae8aa73dc7c74ae2dfe62fd112a5db574cf1af95868dc449fea0076923f}{MQTT\_SN\_MSG\_TYPE\_SUBSCRIBE};
1518    \}
1519 
1520    \textcolor{comment}{//Return status code}
1521    \textcolor{keywordflow}{return} error;
1522 \}
\end{DoxyCode}
\mbox{\Hypertarget{mqtt__sn__client__message_8c_abe5f55aaad9e4731caa9a813b41adc5b}\label{mqtt__sn__client__message_8c_abe5f55aaad9e4731caa9a813b41adc5b}} 
\index{mqtt\+\_\+sn\+\_\+client\+\_\+message.\+c@{mqtt\+\_\+sn\+\_\+client\+\_\+message.\+c}!mqtt\+Sn\+Client\+Send\+Unsubscribe@{mqtt\+Sn\+Client\+Send\+Unsubscribe}}
\index{mqtt\+Sn\+Client\+Send\+Unsubscribe@{mqtt\+Sn\+Client\+Send\+Unsubscribe}!mqtt\+\_\+sn\+\_\+client\+\_\+message.\+c@{mqtt\+\_\+sn\+\_\+client\+\_\+message.\+c}}
\subsubsection{\texorpdfstring{mqtt\+Sn\+Client\+Send\+Unsubscribe()}{mqttSnClientSendUnsubscribe()}}
{\footnotesize\ttfamily \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689c}{error\+\_\+t} mqtt\+Sn\+Client\+Send\+Unsubscribe (\begin{DoxyParamCaption}\item[{\hyperlink{mqtt__sn__client_8h_aee99129ffa9bde57fd8b742f576ae3f5}{Mqtt\+Sn\+Client\+Context} $\ast$}]{context,  }\item[{const \hyperlink{compiler__port_8h_a40bb5262bf908c328fbcfbe5d29d0201}{char\+\_\+t} $\ast$}]{topic\+Name }\end{DoxyParamCaption})}



Send U\+N\+S\+U\+B\+S\+C\+R\+I\+BE message. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em context} & Pointer to the M\+Q\+T\+T-\/\+SN client context \\
\hline
\mbox{\tt in}  & {\em topic\+Name} & Topic filter \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Error code 
\end{DoxyReturn}


Definition at line 1532 of file mqtt\+\_\+sn\+\_\+client\+\_\+message.\+c.


\begin{DoxyCode}
1534 \{
1535    \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689c}{error\_t} error;
1536    \hyperlink{compiler__port_8h_ae3e32a98d431a02106616da3071832dd}{systime\_t} \hyperlink{dhcpv6__common_8h_ae73654f333e4363463ad8c594eca1905}{time};
1537    \hyperlink{stdint_8h_a273cf69d639a59973b6019625df33e30}{uint16\_t} \hyperlink{mqtt__sn__common_8h_a9f7eda5d21d45b5350db8cd0c451427a}{topicId};
1538    \hyperlink{mqtt__sn__common_8h_adfa650f3c081a815eb81daa416bb94a0}{MqttSnFlags} \hyperlink{tcp_8h_aa2585d779da0ab21273a8d92de9a0ebe}{flags};
1539 
1540    \textcolor{comment}{//Initialize status code}
1541    error = \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689cabf350750d0d4fabd8954c0f1e9bbae94}{NO\_ERROR};
1542 
1543    \textcolor{comment}{//Reset unused flags}
1544    flags.all = 0;
1545 
1546    \textcolor{comment}{//Check whether a predefined topic ID has been registered}
1547    topicId = \hyperlink{mqtt__sn__client__misc_8c_a5a3a8ce51441f762a4d7a92a24d1c936}{mqttSnClientFindPredefTopicName}(context, 
      \hyperlink{mqtt__sn__common_8h_a12172589bd20ef38ecbc6f4faf6ae3d0}{topicName});
1548 
1549    \textcolor{comment}{//Predefined topic ID found?}
1550    \textcolor{keywordflow}{if}(topicId != \hyperlink{mqtt__sn__common_8h_a124c3e4a030914b576c63af515fd1019}{MQTT\_SN\_INVALID\_TOPIC\_ID})
1551    \{
1552       \textcolor{comment}{//The UNSUBSCRIBE message contains a predefined topic ID}
1553       flags.topicIdType = \hyperlink{mqtt__sn__common_8h_a70807215f60d92d02503f2a5ed76ee96a6bade83ea3e30d700f58005473c2736b}{MQTT\_SN\_PREDEFINED\_TOPIC\_ID};
1554    \}
1555    \textcolor{keywordflow}{else}
1556    \{
1557       \textcolor{comment}{//Short topic name?}
1558       \textcolor{keywordflow}{if}(strlen(\hyperlink{mqtt__sn__common_8h_a12172589bd20ef38ecbc6f4faf6ae3d0}{topicName}) == 2 && strchr(\hyperlink{mqtt__sn__common_8h_a12172589bd20ef38ecbc6f4faf6ae3d0}{topicName}, \textcolor{charliteral}{'#'}) == 
      \hyperlink{group__BSPDefine_ga070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL} &&
1559          strchr(\hyperlink{mqtt__sn__common_8h_a12172589bd20ef38ecbc6f4faf6ae3d0}{topicName}, \textcolor{charliteral}{'+'}) == \hyperlink{group__BSPDefine_ga070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL})
1560       \{
1561          \textcolor{comment}{//The UNSUBSCRIBE message contains a short topic name}
1562          flags.topicIdType = \hyperlink{mqtt__sn__common_8h_a70807215f60d92d02503f2a5ed76ee96a558b98c894af8f1b6d373d93b5d17827}{MQTT\_SN\_SHORT\_TOPIC\_NAME};
1563       \}
1564       \textcolor{keywordflow}{else}
1565       \{
1566          \textcolor{comment}{//The UNSUBSCRIBE message contains a normal topic name}
1567          flags.topicIdType = \hyperlink{mqtt__sn__common_8h_a70807215f60d92d02503f2a5ed76ee96a9002d75bcc419fb9550c7950570b70b6}{MQTT\_SN\_NORMAL\_TOPIC\_NAME};
1568       \}
1569 
1570       \textcolor{comment}{//Format UNSUBSCRIBE message}
1571       error = \hyperlink{mqtt__sn__message_8c_a7955be3ceadffc43478ea5c037446ae4}{mqttSnFormatUnsubscribe}(&context->message, flags,
1572          context->msgId, topicId, \hyperlink{mqtt__sn__common_8h_a12172589bd20ef38ecbc6f4faf6ae3d0}{topicName});
1573    \}
1574 
1575    \textcolor{comment}{//Check status code}
1576    \textcolor{keywordflow}{if}(!error)
1577    \{
1578       \textcolor{comment}{//Debug message}
1579       \hyperlink{debug_8h_a7339bfd784193a5c79efcef2eeb2d6df}{TRACE\_INFO}(\textcolor{stringliteral}{"Sending UNSUBSCRIBE message (%"} \hyperlink{compiler__port_8h_a2b7b0557dc6cd786df02dafbb51f5292}{PRIuSIZE} \textcolor{stringliteral}{" bytes)...\(\backslash\)r\(\backslash\)n"},
1580          context->message.length);
1581 
1582       \textcolor{comment}{//Dump the contents of the message for debugging purpose}
1583       \hyperlink{mqtt__sn__debug_8c_a7b37acb16cbf453ab38f1f61de6de681}{mqttSnDumpMessage}(context->message.buffer, context->message.length);
1584 
1585       \textcolor{comment}{//Send MQTT-SN message}
1586       error = \hyperlink{mqtt__sn__client__transport_8c_ad3c6ad213a86998c744da9b880a19292}{mqttSnClientSendDatagram}(context, context->message.buffer,
1587          context->message.length);
1588 
1589       \textcolor{comment}{//Get current time}
1590       time = \hyperlink{os__port__chibios_8c_ab66a11272d40a916fa69dd8e4dc443d4}{osGetSystemTime}();
1591 
1592       \textcolor{comment}{//Save the time at which the message was sent}
1593       context->retransmitStartTime = \hyperlink{dhcpv6__common_8h_ae73654f333e4363463ad8c594eca1905}{time};
1594       context->keepAliveTimestamp = \hyperlink{dhcpv6__common_8h_ae73654f333e4363463ad8c594eca1905}{time};
1595 
1596       \textcolor{comment}{//Update MQTT-SN client state}
1597       context->state = \hyperlink{mqtt__sn__client_8h_ac2c5b1752aff9aadfd267c2a11535071af7aeb72fac83c3e235aa59543c1da1bf}{MQTT\_SN\_CLIENT\_STATE\_SENDING\_REQ};
1598       context->msgType = \hyperlink{mqtt__sn__common_8h_a0b5ccdae8aa73dc7c74ae2dfe62fd112a2c92708828018b62656632d3c4670ec8}{MQTT\_SN\_MSG\_TYPE\_UNSUBSCRIBE};
1599    \}
1600 
1601    \textcolor{comment}{//Return status code}
1602    \textcolor{keywordflow}{return} error;
1603 \}
\end{DoxyCode}
\mbox{\Hypertarget{mqtt__sn__client__message_8c_ab9c2686f0f3eb3415e00ac4180b6d1ea}\label{mqtt__sn__client__message_8c_ab9c2686f0f3eb3415e00ac4180b6d1ea}} 
\index{mqtt\+\_\+sn\+\_\+client\+\_\+message.\+c@{mqtt\+\_\+sn\+\_\+client\+\_\+message.\+c}!mqtt\+Sn\+Client\+Send\+Will\+Msg@{mqtt\+Sn\+Client\+Send\+Will\+Msg}}
\index{mqtt\+Sn\+Client\+Send\+Will\+Msg@{mqtt\+Sn\+Client\+Send\+Will\+Msg}!mqtt\+\_\+sn\+\_\+client\+\_\+message.\+c@{mqtt\+\_\+sn\+\_\+client\+\_\+message.\+c}}
\subsubsection{\texorpdfstring{mqtt\+Sn\+Client\+Send\+Will\+Msg()}{mqttSnClientSendWillMsg()}}
{\footnotesize\ttfamily \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689c}{error\+\_\+t} mqtt\+Sn\+Client\+Send\+Will\+Msg (\begin{DoxyParamCaption}\item[{\hyperlink{mqtt__sn__client_8h_aee99129ffa9bde57fd8b742f576ae3f5}{Mqtt\+Sn\+Client\+Context} $\ast$}]{context }\end{DoxyParamCaption})}



Send W\+I\+L\+L\+M\+SG message. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em context} & Pointer to the M\+Q\+T\+T-\/\+SN client context \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Error code 
\end{DoxyReturn}


Definition at line 1055 of file mqtt\+\_\+sn\+\_\+client\+\_\+message.\+c.


\begin{DoxyCode}
1056 \{
1057    \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689c}{error\_t} error;
1058 
1059    \textcolor{comment}{//Format WILLMSG message}
1060    error = \hyperlink{mqtt__sn__message_8c_ae92fb0695bada2caf38c98ff2c46cc43}{mqttSnFormatWillMsg}(&context->message,
1061       context->willMessage.payload, context->willMessage.length);
1062 
1063    \textcolor{comment}{//Check status code}
1064    \textcolor{keywordflow}{if}(!error)
1065    \{
1066       \textcolor{comment}{//Debug message}
1067       \hyperlink{debug_8h_a7339bfd784193a5c79efcef2eeb2d6df}{TRACE\_INFO}(\textcolor{stringliteral}{"Sending WILLMSG message (%"} \hyperlink{compiler__port_8h_a2b7b0557dc6cd786df02dafbb51f5292}{PRIuSIZE} \textcolor{stringliteral}{" bytes)...\(\backslash\)r\(\backslash\)n"},
1068          context->message.length);
1069 
1070       \textcolor{comment}{//Dump the contents of the message for debugging purpose}
1071       \hyperlink{mqtt__sn__debug_8c_a7b37acb16cbf453ab38f1f61de6de681}{mqttSnDumpMessage}(context->message.buffer, context->message.length);
1072 
1073       \textcolor{comment}{//Send MQTT-SN message}
1074       error = \hyperlink{mqtt__sn__client__transport_8c_ad3c6ad213a86998c744da9b880a19292}{mqttSnClientSendDatagram}(context, context->message.buffer,
1075          context->message.length);
1076    \}
1077 
1078    \textcolor{comment}{//Return status code}
1079    \textcolor{keywordflow}{return} error;
1080 \}
\end{DoxyCode}
\mbox{\Hypertarget{mqtt__sn__client__message_8c_a32f7fa8e90f1dd58ca2ed8a83988e3b6}\label{mqtt__sn__client__message_8c_a32f7fa8e90f1dd58ca2ed8a83988e3b6}} 
\index{mqtt\+\_\+sn\+\_\+client\+\_\+message.\+c@{mqtt\+\_\+sn\+\_\+client\+\_\+message.\+c}!mqtt\+Sn\+Client\+Send\+Will\+Msg\+Upd@{mqtt\+Sn\+Client\+Send\+Will\+Msg\+Upd}}
\index{mqtt\+Sn\+Client\+Send\+Will\+Msg\+Upd@{mqtt\+Sn\+Client\+Send\+Will\+Msg\+Upd}!mqtt\+\_\+sn\+\_\+client\+\_\+message.\+c@{mqtt\+\_\+sn\+\_\+client\+\_\+message.\+c}}
\subsubsection{\texorpdfstring{mqtt\+Sn\+Client\+Send\+Will\+Msg\+Upd()}{mqttSnClientSendWillMsgUpd()}}
{\footnotesize\ttfamily \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689c}{error\+\_\+t} mqtt\+Sn\+Client\+Send\+Will\+Msg\+Upd (\begin{DoxyParamCaption}\item[{\hyperlink{mqtt__sn__client_8h_aee99129ffa9bde57fd8b742f576ae3f5}{Mqtt\+Sn\+Client\+Context} $\ast$}]{context }\end{DoxyParamCaption})}



Send W\+I\+L\+L\+M\+S\+G\+U\+PD message. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em context} & Pointer to the M\+Q\+T\+T-\/\+SN client context \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Error code 
\end{DoxyReturn}


Definition at line 1769 of file mqtt\+\_\+sn\+\_\+client\+\_\+message.\+c.


\begin{DoxyCode}
1770 \{
1771    \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689c}{error\_t} error;
1772    \hyperlink{compiler__port_8h_ae3e32a98d431a02106616da3071832dd}{systime\_t} \hyperlink{dhcpv6__common_8h_ae73654f333e4363463ad8c594eca1905}{time};
1773 
1774    \textcolor{comment}{//Format WILLMSGUPD message}
1775    error = \hyperlink{mqtt__sn__message_8c_a1b5f07974b8ec6f98967a09167355fa4}{mqttSnFormatWillMsgUpd}(&context->message,
1776       context->willMessage.payload, context->willMessage.length);
1777 
1778    \textcolor{comment}{//Check status code}
1779    \textcolor{keywordflow}{if}(!error)
1780    \{
1781       \textcolor{comment}{//Debug message}
1782       \hyperlink{debug_8h_a7339bfd784193a5c79efcef2eeb2d6df}{TRACE\_INFO}(\textcolor{stringliteral}{"Sending WILLMSGUPD message (%"} \hyperlink{compiler__port_8h_a2b7b0557dc6cd786df02dafbb51f5292}{PRIuSIZE} \textcolor{stringliteral}{" bytes)...\(\backslash\)r\(\backslash\)n"},
1783          context->message.length);
1784 
1785       \textcolor{comment}{//Dump the contents of the message for debugging purpose}
1786       \hyperlink{mqtt__sn__debug_8c_a7b37acb16cbf453ab38f1f61de6de681}{mqttSnDumpMessage}(context->message.buffer, context->message.length);
1787 
1788       \textcolor{comment}{//Send MQTT-SN message}
1789       error = \hyperlink{mqtt__sn__client__transport_8c_ad3c6ad213a86998c744da9b880a19292}{mqttSnClientSendDatagram}(context, context->message.buffer,
1790          context->message.length);
1791 
1792       \textcolor{comment}{//Get current time}
1793       time = \hyperlink{os__port__chibios_8c_ab66a11272d40a916fa69dd8e4dc443d4}{osGetSystemTime}();
1794 
1795       \textcolor{comment}{//Save the time at which the message was sent}
1796       context->retransmitStartTime = \hyperlink{dhcpv6__common_8h_ae73654f333e4363463ad8c594eca1905}{time};
1797       context->keepAliveTimestamp = \hyperlink{dhcpv6__common_8h_ae73654f333e4363463ad8c594eca1905}{time};
1798 
1799       \textcolor{comment}{//Update MQTT-SN client state}
1800       context->state = \hyperlink{mqtt__sn__client_8h_ac2c5b1752aff9aadfd267c2a11535071af7aeb72fac83c3e235aa59543c1da1bf}{MQTT\_SN\_CLIENT\_STATE\_SENDING\_REQ};
1801       context->msgType = \hyperlink{mqtt__sn__common_8h_a0b5ccdae8aa73dc7c74ae2dfe62fd112a8aa84d8100f3ef131d29575c38165bac}{MQTT\_SN\_MSG\_TYPE\_WILLMSGUPD};
1802    \}
1803 
1804    \textcolor{comment}{//Return status code}
1805    \textcolor{keywordflow}{return} error;
1806 \}
\end{DoxyCode}
\mbox{\Hypertarget{mqtt__sn__client__message_8c_ae8de74ef1e947b45dc85affe65741c8a}\label{mqtt__sn__client__message_8c_ae8de74ef1e947b45dc85affe65741c8a}} 
\index{mqtt\+\_\+sn\+\_\+client\+\_\+message.\+c@{mqtt\+\_\+sn\+\_\+client\+\_\+message.\+c}!mqtt\+Sn\+Client\+Send\+Will\+Topic@{mqtt\+Sn\+Client\+Send\+Will\+Topic}}
\index{mqtt\+Sn\+Client\+Send\+Will\+Topic@{mqtt\+Sn\+Client\+Send\+Will\+Topic}!mqtt\+\_\+sn\+\_\+client\+\_\+message.\+c@{mqtt\+\_\+sn\+\_\+client\+\_\+message.\+c}}
\subsubsection{\texorpdfstring{mqtt\+Sn\+Client\+Send\+Will\+Topic()}{mqttSnClientSendWillTopic()}}
{\footnotesize\ttfamily \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689c}{error\+\_\+t} mqtt\+Sn\+Client\+Send\+Will\+Topic (\begin{DoxyParamCaption}\item[{\hyperlink{mqtt__sn__client_8h_aee99129ffa9bde57fd8b742f576ae3f5}{Mqtt\+Sn\+Client\+Context} $\ast$}]{context }\end{DoxyParamCaption})}



Send W\+I\+L\+L\+T\+O\+P\+IC message. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em context} & Pointer to the M\+Q\+T\+T-\/\+SN client context \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Error code 
\end{DoxyReturn}


Definition at line 1021 of file mqtt\+\_\+sn\+\_\+client\+\_\+message.\+c.


\begin{DoxyCode}
1022 \{
1023    \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689c}{error\_t} error;
1024 
1025    \textcolor{comment}{//Format WILLTOPIC message}
1026    error = \hyperlink{mqtt__sn__message_8c_a7eb03e15aca9d53e7f25ebc1013cf2ff}{mqttSnFormatWillTopic}(&context->message,
1027       context->willMessage.flags, context->willMessage.topic);
1028 
1029    \textcolor{comment}{//Check status code}
1030    \textcolor{keywordflow}{if}(!error)
1031    \{
1032       \textcolor{comment}{//Debug message}
1033       \hyperlink{debug_8h_a7339bfd784193a5c79efcef2eeb2d6df}{TRACE\_INFO}(\textcolor{stringliteral}{"Sending WILLTOPIC message (%"} \hyperlink{compiler__port_8h_a2b7b0557dc6cd786df02dafbb51f5292}{PRIuSIZE} \textcolor{stringliteral}{" bytes)...\(\backslash\)r\(\backslash\)n"},
1034          context->message.length);
1035 
1036       \textcolor{comment}{//Dump the contents of the message for debugging purpose}
1037       \hyperlink{mqtt__sn__debug_8c_a7b37acb16cbf453ab38f1f61de6de681}{mqttSnDumpMessage}(context->message.buffer, context->message.length);
1038 
1039       \textcolor{comment}{//Send MQTT-SN message}
1040       error = \hyperlink{mqtt__sn__client__transport_8c_ad3c6ad213a86998c744da9b880a19292}{mqttSnClientSendDatagram}(context, context->message.buffer,
1041          context->message.length);
1042    \}
1043 
1044    \textcolor{comment}{//Return status code}
1045    \textcolor{keywordflow}{return} error;
1046 \}
\end{DoxyCode}
\mbox{\Hypertarget{mqtt__sn__client__message_8c_afe5e9dfec2ae9dba6dfabdcb17402d3f}\label{mqtt__sn__client__message_8c_afe5e9dfec2ae9dba6dfabdcb17402d3f}} 
\index{mqtt\+\_\+sn\+\_\+client\+\_\+message.\+c@{mqtt\+\_\+sn\+\_\+client\+\_\+message.\+c}!mqtt\+Sn\+Client\+Send\+Will\+Topic\+Upd@{mqtt\+Sn\+Client\+Send\+Will\+Topic\+Upd}}
\index{mqtt\+Sn\+Client\+Send\+Will\+Topic\+Upd@{mqtt\+Sn\+Client\+Send\+Will\+Topic\+Upd}!mqtt\+\_\+sn\+\_\+client\+\_\+message.\+c@{mqtt\+\_\+sn\+\_\+client\+\_\+message.\+c}}
\subsubsection{\texorpdfstring{mqtt\+Sn\+Client\+Send\+Will\+Topic\+Upd()}{mqttSnClientSendWillTopicUpd()}}
{\footnotesize\ttfamily \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689c}{error\+\_\+t} mqtt\+Sn\+Client\+Send\+Will\+Topic\+Upd (\begin{DoxyParamCaption}\item[{\hyperlink{mqtt__sn__client_8h_aee99129ffa9bde57fd8b742f576ae3f5}{Mqtt\+Sn\+Client\+Context} $\ast$}]{context }\end{DoxyParamCaption})}



Send W\+I\+L\+L\+T\+O\+P\+I\+C\+U\+PD message. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em context} & Pointer to the M\+Q\+T\+T-\/\+SN client context \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Error code 
\end{DoxyReturn}


Definition at line 1723 of file mqtt\+\_\+sn\+\_\+client\+\_\+message.\+c.


\begin{DoxyCode}
1724 \{
1725    \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689c}{error\_t} error;
1726    \hyperlink{compiler__port_8h_ae3e32a98d431a02106616da3071832dd}{systime\_t} \hyperlink{dhcpv6__common_8h_ae73654f333e4363463ad8c594eca1905}{time};
1727 
1728    \textcolor{comment}{//Format WILLTOPICUPD message}
1729    error = \hyperlink{mqtt__sn__message_8c_abca35dd2e0c4f3d00ed013b1673389da}{mqttSnFormatWillTopicUpd}(&context->message,
1730       context->willMessage.flags, context->willMessage.topic);
1731 
1732    \textcolor{comment}{//Check status code}
1733    \textcolor{keywordflow}{if}(!error)
1734    \{
1735       \textcolor{comment}{//Debug message}
1736       \hyperlink{debug_8h_a7339bfd784193a5c79efcef2eeb2d6df}{TRACE\_INFO}(\textcolor{stringliteral}{"Sending WILLTOPICUPD message (%"} \hyperlink{compiler__port_8h_a2b7b0557dc6cd786df02dafbb51f5292}{PRIuSIZE} \textcolor{stringliteral}{" bytes)...\(\backslash\)r\(\backslash\)n"},
1737          context->message.length);
1738 
1739       \textcolor{comment}{//Dump the contents of the message for debugging purpose}
1740       \hyperlink{mqtt__sn__debug_8c_a7b37acb16cbf453ab38f1f61de6de681}{mqttSnDumpMessage}(context->message.buffer, context->message.length);
1741 
1742       \textcolor{comment}{//Send MQTT-SN message}
1743       error = \hyperlink{mqtt__sn__client__transport_8c_ad3c6ad213a86998c744da9b880a19292}{mqttSnClientSendDatagram}(context, context->message.buffer,
1744          context->message.length);
1745 
1746       \textcolor{comment}{//Get current time}
1747       time = \hyperlink{os__port__chibios_8c_ab66a11272d40a916fa69dd8e4dc443d4}{osGetSystemTime}();
1748 
1749       \textcolor{comment}{//Save the time at which the message was sent}
1750       context->retransmitStartTime = \hyperlink{dhcpv6__common_8h_ae73654f333e4363463ad8c594eca1905}{time};
1751       context->keepAliveTimestamp = \hyperlink{dhcpv6__common_8h_ae73654f333e4363463ad8c594eca1905}{time};
1752 
1753       \textcolor{comment}{//Update MQTT-SN client state}
1754       context->state = \hyperlink{mqtt__sn__client_8h_ac2c5b1752aff9aadfd267c2a11535071af7aeb72fac83c3e235aa59543c1da1bf}{MQTT\_SN\_CLIENT\_STATE\_SENDING\_REQ};
1755       context->msgType = \hyperlink{mqtt__sn__common_8h_a0b5ccdae8aa73dc7c74ae2dfe62fd112a38e7a463c018cbcd3de053913515e5db}{MQTT\_SN\_MSG\_TYPE\_WILLTOPICUPD};
1756    \}
1757 
1758    \textcolor{comment}{//Return status code}
1759    \textcolor{keywordflow}{return} error;
1760 \}
\end{DoxyCode}
