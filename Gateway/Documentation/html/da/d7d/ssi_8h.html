<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Senior Design Gateway: cyclone_tcp/http/ssi.h File Reference</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../resize.js"></script>
<script type="text/javascript" src="../../navtreedata.js"></script>
<script type="text/javascript" src="../../navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Senior Design Gateway
   &#160;<span id="projectnumber">1.0</span>
   </div>
   <div id="projectbrief">A HTTP To MQTT Converted for AWS IoT Core.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "../../search",false,'Search');
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('../../',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('da/d7d/ssi_8h.html','../../');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">ssi.h File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>SSI (Server Side Includes)  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &quot;<a class="el" href="../../dd/d95/http__server_8h_source.html">http/http_server.h</a>&quot;</code><br />
</div>
<p><a href="../../da/d7d/ssi_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:afe14b7f41b8507b8d8c7d35dca53b2a4"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../da/d41/error_8h.html#ac7659d73a8cdedc08e9f566bb406689c">error_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/d7d/ssi_8h.html#afe14b7f41b8507b8d8c7d35dca53b2a4">ssiExecuteScript</a> (<a class="el" href="../../dd/d95/http__server_8h.html#a3506ecffde998ab02629dca83587d2f9">HttpConnection</a> *connection, const <a class="el" href="../../d1/dfa/compiler__port_8h.html#a40bb5262bf908c328fbcfbe5d29d0201">char_t</a> *uri, <a class="el" href="../../d1/dfa/compiler__port_8h.html#a12a1e9b3ce141648783a82445d02b58d">uint_t</a> <a class="el" href="../../df/d79/tls_8h.html#abbb6c7c49508c1ac374683f2d1159e08">level</a>)</td></tr>
<tr class="memdesc:afe14b7f41b8507b8d8c7d35dca53b2a4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Execute SSI script.  <a href="#afe14b7f41b8507b8d8c7d35dca53b2a4">More...</a><br /></td></tr>
<tr class="separator:afe14b7f41b8507b8d8c7d35dca53b2a4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5d550bb3514d6c7ddaea0f4a79806b0a"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../da/d41/error_8h.html#ac7659d73a8cdedc08e9f566bb406689c">error_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/d7d/ssi_8h.html#a5d550bb3514d6c7ddaea0f4a79806b0a">ssiProcessCommand</a> (<a class="el" href="../../dd/d95/http__server_8h.html#a3506ecffde998ab02629dca83587d2f9">HttpConnection</a> *connection, const <a class="el" href="../../d1/dfa/compiler__port_8h.html#a40bb5262bf908c328fbcfbe5d29d0201">char_t</a> *tag, size_t <a class="el" href="../../d8/dca/ppp_8h.html#ab2b3adeb2a67e656ff030b56727fd0ac">length</a>, const <a class="el" href="../../d1/dfa/compiler__port_8h.html#a40bb5262bf908c328fbcfbe5d29d0201">char_t</a> *uri, <a class="el" href="../../d1/dfa/compiler__port_8h.html#a12a1e9b3ce141648783a82445d02b58d">uint_t</a> <a class="el" href="../../df/d79/tls_8h.html#abbb6c7c49508c1ac374683f2d1159e08">level</a>)</td></tr>
<tr class="memdesc:a5d550bb3514d6c7ddaea0f4a79806b0a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Process SSI directive.  <a href="#a5d550bb3514d6c7ddaea0f4a79806b0a">More...</a><br /></td></tr>
<tr class="separator:a5d550bb3514d6c7ddaea0f4a79806b0a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae023dd9991e79b7c622a4e12cd4bbe34"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../da/d41/error_8h.html#ac7659d73a8cdedc08e9f566bb406689c">error_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/d7d/ssi_8h.html#ae023dd9991e79b7c622a4e12cd4bbe34">ssiProcessIncludeCommand</a> (<a class="el" href="../../dd/d95/http__server_8h.html#a3506ecffde998ab02629dca83587d2f9">HttpConnection</a> *connection, const <a class="el" href="../../d1/dfa/compiler__port_8h.html#a40bb5262bf908c328fbcfbe5d29d0201">char_t</a> *tag, size_t <a class="el" href="../../d8/dca/ppp_8h.html#ab2b3adeb2a67e656ff030b56727fd0ac">length</a>, const <a class="el" href="../../d1/dfa/compiler__port_8h.html#a40bb5262bf908c328fbcfbe5d29d0201">char_t</a> *uri, <a class="el" href="../../d1/dfa/compiler__port_8h.html#a12a1e9b3ce141648783a82445d02b58d">uint_t</a> <a class="el" href="../../df/d79/tls_8h.html#abbb6c7c49508c1ac374683f2d1159e08">level</a>)</td></tr>
<tr class="memdesc:ae023dd9991e79b7c622a4e12cd4bbe34"><td class="mdescLeft">&#160;</td><td class="mdescRight">Process SSI include directive.  <a href="#ae023dd9991e79b7c622a4e12cd4bbe34">More...</a><br /></td></tr>
<tr class="separator:ae023dd9991e79b7c622a4e12cd4bbe34"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac8cdaca0cb930447f8f67d75c950f38f"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../da/d41/error_8h.html#ac7659d73a8cdedc08e9f566bb406689c">error_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/d7d/ssi_8h.html#ac8cdaca0cb930447f8f67d75c950f38f">ssiProcessEchoCommand</a> (<a class="el" href="../../dd/d95/http__server_8h.html#a3506ecffde998ab02629dca83587d2f9">HttpConnection</a> *connection, const <a class="el" href="../../d1/dfa/compiler__port_8h.html#a40bb5262bf908c328fbcfbe5d29d0201">char_t</a> *tag, size_t <a class="el" href="../../d8/dca/ppp_8h.html#ab2b3adeb2a67e656ff030b56727fd0ac">length</a>)</td></tr>
<tr class="memdesc:ac8cdaca0cb930447f8f67d75c950f38f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Process SSI echo directive.  <a href="#ac8cdaca0cb930447f8f67d75c950f38f">More...</a><br /></td></tr>
<tr class="separator:ac8cdaca0cb930447f8f67d75c950f38f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae7dfd6aaf6f5636c3ac9ede2923fb42e"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../da/d41/error_8h.html#ac7659d73a8cdedc08e9f566bb406689c">error_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/d7d/ssi_8h.html#ae7dfd6aaf6f5636c3ac9ede2923fb42e">ssiProcessExecCommand</a> (<a class="el" href="../../dd/d95/http__server_8h.html#a3506ecffde998ab02629dca83587d2f9">HttpConnection</a> *connection, const <a class="el" href="../../d1/dfa/compiler__port_8h.html#a40bb5262bf908c328fbcfbe5d29d0201">char_t</a> *tag, size_t <a class="el" href="../../d8/dca/ppp_8h.html#ab2b3adeb2a67e656ff030b56727fd0ac">length</a>)</td></tr>
<tr class="memdesc:ae7dfd6aaf6f5636c3ac9ede2923fb42e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Process SSI exec directive.  <a href="#ae7dfd6aaf6f5636c3ac9ede2923fb42e">More...</a><br /></td></tr>
<tr class="separator:ae7dfd6aaf6f5636c3ac9ede2923fb42e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a93e1f8064d7752a1ae1294bf6ba10b13"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../da/d41/error_8h.html#ac7659d73a8cdedc08e9f566bb406689c">error_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/d7d/ssi_8h.html#a93e1f8064d7752a1ae1294bf6ba10b13">ssiSearchTag</a> (const <a class="el" href="../../d1/dfa/compiler__port_8h.html#a40bb5262bf908c328fbcfbe5d29d0201">char_t</a> *<a class="el" href="../../d3/d8d/ndp_8h.html#a2dee666f0c1fe072c549ff86b1d0a8ab">s</a>, size_t sLen, const <a class="el" href="../../d1/dfa/compiler__port_8h.html#a40bb5262bf908c328fbcfbe5d29d0201">char_t</a> *tag, size_t tagLen, <a class="el" href="../../d1/dfa/compiler__port_8h.html#a12a1e9b3ce141648783a82445d02b58d">uint_t</a> *pos)</td></tr>
<tr class="memdesc:a93e1f8064d7752a1ae1294bf6ba10b13"><td class="mdescLeft">&#160;</td><td class="mdescRight">Search a string for a given tag.  <a href="#a93e1f8064d7752a1ae1294bf6ba10b13">More...</a><br /></td></tr>
<tr class="separator:a93e1f8064d7752a1ae1294bf6ba10b13"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>SSI (Server Side Includes) </p>
<h1><a class="anchor" id="License"></a>
License</h1>
<p>SPDX-License-Identifier: GPL-2.0-or-later</p>
<p>Copyright (C) 2010-2019 Oryx Embedded SARL. All rights reserved.</p>
<p>This file is part of CycloneTCP Open.</p>
<p>This program is free software; you can redistribute it and/or modify it under the terms of the GNU General Public License as published by the Free Software Foundation; either version 2 of the License, or (at your option) any later version.</p>
<p>This program is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for more details.</p>
<p>You should have received a copy of the GNU General Public License along with this program; if not, write to the Free Software Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301, USA.</p>
<dl class="section author"><dt>Author</dt><dd>Oryx Embedded SARL (www.oryx-embedded.com) </dd></dl>
<dl class="section version"><dt>Version</dt><dd>1.9.6 </dd></dl>

<p class="definition">Definition in file <a class="el" href="../../da/d7d/ssi_8h_source.html">ssi.h</a>.</p>
</div><h2 class="groupheader">Function Documentation</h2>
<a id="afe14b7f41b8507b8d8c7d35dca53b2a4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afe14b7f41b8507b8d8c7d35dca53b2a4">&#9670;&nbsp;</a></span>ssiExecuteScript()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../da/d41/error_8h.html#ac7659d73a8cdedc08e9f566bb406689c">error_t</a> ssiExecuteScript </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../dd/d95/http__server_8h.html#a3506ecffde998ab02629dca83587d2f9">HttpConnection</a> *&#160;</td>
          <td class="paramname"><em>connection</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="../../d1/dfa/compiler__port_8h.html#a40bb5262bf908c328fbcfbe5d29d0201">char_t</a> *&#160;</td>
          <td class="paramname"><em>uri</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d1/dfa/compiler__port_8h.html#a12a1e9b3ce141648783a82445d02b58d">uint_t</a>&#160;</td>
          <td class="paramname"><em>level</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Execute SSI script. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">connection</td><td>Structure representing an HTTP connection </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">uri</td><td>NULL-terminated string containing the file to process </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">level</td><td>Current level of recursion </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Error code </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../dc/d6b/ssi_8c_source.html#l00067">67</a> of file <a class="el" href="../../dc/d6b/ssi_8c_source.html">ssi.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;{</div><div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;   <a class="code" href="../../da/d41/error_8h.html#ac7659d73a8cdedc08e9f566bb406689c">error_t</a> error;</div><div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;   <span class="keywordtype">size_t</span> <a class="code" href="../../d3/d25/dtls__misc_8h.html#ab43ca82dd7fa2a0e56f941032ef324c4">length</a>;</div><div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;</div><div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;<span class="preprocessor">#if (HTTP_SERVER_FS_SUPPORT == ENABLED)</span></div><div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;   <a class="code" href="../../d1/dfa/compiler__port_8h.html#a812d16e5494522586b3784e55d479912">bool_t</a> more;</div><div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;   <a class="code" href="../../d1/dfa/compiler__port_8h.html#a12a1e9b3ce141648783a82445d02b58d">uint_t</a> pos;</div><div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;   <a class="code" href="../../d1/dfa/compiler__port_8h.html#a12a1e9b3ce141648783a82445d02b58d">uint_t</a> <a class="code" href="../../d1/ddf/dhcpv6__common_8h.html#a5a648f5ec00c526b0dfa2df7a272c6c0">n</a>;</div><div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;   <a class="code" href="../../d1/dfa/compiler__port_8h.html#a40bb5262bf908c328fbcfbe5d29d0201">char_t</a> *buffer;</div><div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;   <a class="code" href="../../de/d1d/fs__port__fatfs_8h.html#a913e2a93cbf8ed241fe05fb6abc3f316">FsFile</a> *<a class="code" href="../../d0/d63/dhcp__common_8h.html#a5c7003134e7a7486271d4f33c2e7b7de">file</a>;</div><div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;<span class="preprocessor">#else</span></div><div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;   <a class="code" href="../../d1/dfa/compiler__port_8h.html#a12a1e9b3ce141648783a82445d02b58d">uint_t</a> i;</div><div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;   <a class="code" href="../../d1/dfa/compiler__port_8h.html#a12a1e9b3ce141648783a82445d02b58d">uint_t</a> j;</div><div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;   <span class="keyword">const</span> <a class="code" href="../../d1/dfa/compiler__port_8h.html#a40bb5262bf908c328fbcfbe5d29d0201">char_t</a> *<a class="code" href="../../d3/d25/dtls__misc_8h.html#a5c239a1bb87b52b0f1d6d68c4749cd2a">data</a>;</div><div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;</div><div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;   <span class="comment">//Recursion limit exceeded?</span></div><div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;   <span class="keywordflow">if</span>(<a class="code" href="../../df/d79/tls_8h.html#abbb6c7c49508c1ac374683f2d1159e08">level</a> &gt;= <a class="code" href="../../dd/d95/http__server_8h.html#aa86d8e602f06770e2950eb80353b46f5">HTTP_SERVER_SSI_MAX_RECURSION</a>)</div><div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../da/d41/error_8h.html#ac7659d73a8cdedc08e9f566bb406689cabf350750d0d4fabd8954c0f1e9bbae94">NO_ERROR</a>;</div><div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;</div><div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;   <span class="comment">//Retrieve the full pathname</span></div><div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;   <a class="code" href="../../da/dc3/http__server__misc_8c.html#a34edbde4371909896b60846f2545fbaa">httpGetAbsolutePath</a>(connection, uri,</div><div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;      connection-&gt;buffer, <a class="code" href="../../dd/d95/http__server_8h.html#a7323ad0fee234d179bd1f679496174d2">HTTP_SERVER_BUFFER_SIZE</a>);</div><div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;</div><div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;<span class="preprocessor">#if (HTTP_SERVER_FS_SUPPORT == ENABLED)</span></div><div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;   <span class="comment">//Open the file for reading</span></div><div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;   file = <a class="code" href="../../d3/dad/fs__port__fatfs_8c.html#aba7fcc4f174dcf4652a8b84cdfff22b5">fsOpenFile</a>(connection-&gt;buffer, <a class="code" href="../../d9/d2e/fs__port_8h.html#a086887b0800535e5a06340d3fc76c51cadf6c1e1805f97fa4f535acbdc2d943db">FS_FILE_MODE_READ</a>);</div><div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;   <span class="comment">//Failed to open the file?</span></div><div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;   <span class="keywordflow">if</span>(file == <a class="code" href="../../de/da2/group__BSPDefine.html#ga070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)</div><div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../da/d41/error_8h.html#ac7659d73a8cdedc08e9f566bb406689ca4cca37264afee88cb14cd105f0d59607">ERROR_NOT_FOUND</a>;</div><div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;</div><div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;   <span class="comment">//Allocate a memory buffer</span></div><div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;   buffer = <a class="code" href="../../dd/d0d/os__port__chibios_8c.html#ae86758dcd9fc3c98247ae19815987c9a">osAllocMem</a>(<a class="code" href="../../dd/d95/http__server_8h.html#a7323ad0fee234d179bd1f679496174d2">HTTP_SERVER_BUFFER_SIZE</a>);</div><div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;   <span class="comment">//Failed to allocate memory?</span></div><div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;   <span class="keywordflow">if</span>(buffer == <a class="code" href="../../de/da2/group__BSPDefine.html#ga070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)</div><div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;   {</div><div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;      <span class="comment">//Close the file</span></div><div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;      <a class="code" href="../../d3/dad/fs__port__fatfs_8c.html#a563173066eb2924f61e00e87fbf9d0bc">fsCloseFile</a>(file);</div><div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;      <span class="comment">//Report an error</span></div><div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../da/d41/error_8h.html#ac7659d73a8cdedc08e9f566bb406689cac0a554045048d2fb61387cf735676f69">ERROR_OUT_OF_MEMORY</a>;</div><div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;   }</div><div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;<span class="preprocessor">#else</span></div><div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;   <span class="comment">//Get the resource data associated with the URI</span></div><div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;   error = <a class="code" href="../../d2/d71/resource__manager_8c.html#a0fe55f3dce16ce80683cae543c61f22c">resGetData</a>(connection-&gt;buffer, (<span class="keyword">const</span> <a class="code" href="../../df/dd8/stdint_8h.html#aba7bc1797add20fe3efdf37ced1182c5">uint8_t</a> **) &amp;data, &amp;length);</div><div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;   <span class="comment">//The specified URI cannot be found?</span></div><div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;   <span class="keywordflow">if</span>(error)</div><div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;      <span class="keywordflow">return</span> error;</div><div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;</div><div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;   <span class="comment">//Send the HTTP response header before executing the script</span></div><div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;   <span class="keywordflow">if</span>(!<a class="code" href="../../df/d79/tls_8h.html#abbb6c7c49508c1ac374683f2d1159e08">level</a>)</div><div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;   {</div><div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;      <span class="comment">//Format HTTP response header</span></div><div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;      connection-&gt;response.statusCode = 200;</div><div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;      connection-&gt;response.contentType = <a class="code" href="../../da/de9/mime_8c.html#a9e79374594b83b65457d42c5589db7e0">mimeGetType</a>(uri);</div><div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;      connection-&gt;response.chunkedEncoding = <a class="code" href="../../da/d42/os__port_8h.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>;</div><div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;</div><div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;      <span class="comment">//Send the header to the client</span></div><div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;      error = <a class="code" href="../../da/df4/http__server_8c.html#ae90b959869f2eec5ad37c951b156855f">httpWriteHeader</a>(connection);</div><div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;      <span class="comment">//Any error to report?</span></div><div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;      <span class="keywordflow">if</span>(error)</div><div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;      {</div><div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;<span class="preprocessor">#if (HTTP_SERVER_FS_SUPPORT == ENABLED)</span></div><div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;         <span class="comment">//Close the file</span></div><div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;         <a class="code" href="../../d3/dad/fs__port__fatfs_8c.html#a563173066eb2924f61e00e87fbf9d0bc">fsCloseFile</a>(file);</div><div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;         <span class="comment">//Release memory buffer</span></div><div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;         <a class="code" href="../../dd/d0d/os__port__chibios_8c.html#a68e4fa4326f2031eab28b92a25f2d68d">osFreeMem</a>(buffer);</div><div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;         <span class="comment">//Return status code</span></div><div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;         <span class="keywordflow">return</span> error;</div><div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;      }</div><div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;   }</div><div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;</div><div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;<span class="preprocessor">#if (HTTP_SERVER_FS_SUPPORT == ENABLED)</span></div><div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;   <span class="comment">//Point to the beginning of the buffer</span></div><div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;   pos = 0;</div><div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;   length = 0;</div><div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;</div><div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;   <span class="comment">//This flag indicates whether data should be read</span></div><div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;   more = <a class="code" href="../../da/d42/os__port_8h.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>;</div><div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;</div><div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;   <span class="comment">//Parse the specified file</span></div><div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;   <span class="keywordflow">while</span>(1)</div><div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;   {</div><div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;      <span class="comment">//Read more data if needed</span></div><div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;      <span class="keywordflow">if</span>(more)</div><div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;      {</div><div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;         <span class="comment">//Check whether the current position is aligned on 32-bit boundaries</span></div><div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;         n = 4 - ((pos + <a class="code" href="../../d3/d25/dtls__misc_8h.html#ab43ca82dd7fa2a0e56f941032ef324c4">length</a>) % 4);</div><div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;</div><div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;         <span class="comment">//Maintain proper alignment</span></div><div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;         <span class="keywordflow">if</span>(n != 4)</div><div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;         {</div><div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;            memmove(buffer + pos + n, buffer + pos, length);</div><div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;            pos += <a class="code" href="../../d1/ddf/dhcpv6__common_8h.html#a5a648f5ec00c526b0dfa2df7a272c6c0">n</a>;</div><div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;         }</div><div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;</div><div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;         <span class="comment">//Read data from the specified file</span></div><div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;         error = <a class="code" href="../../d3/dad/fs__port__fatfs_8c.html#af802c67ab60bcc6273bcc65a967d99ab">fsReadFile</a>(file, buffer + pos + length,</div><div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;            <a class="code" href="../../dd/d95/http__server_8h.html#a7323ad0fee234d179bd1f679496174d2">HTTP_SERVER_BUFFER_SIZE</a> - (pos + length), &amp;n);</div><div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;</div><div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;         <span class="comment">//End of input stream?</span></div><div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;         <span class="keywordflow">if</span>(error)</div><div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;         {</div><div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;            <span class="comment">//Purge data buffer</span></div><div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;            error = <a class="code" href="../../da/df4/http__server_8c.html#acb70b948502efdd99db7cf234fcb74db">httpWriteStream</a>(connection, buffer + pos, length);</div><div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;            <span class="comment">//Exit immediately</span></div><div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;         }</div><div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;</div><div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;         <span class="comment">//Adjust the length of the buffer</span></div><div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;         length += <a class="code" href="../../d1/ddf/dhcpv6__common_8h.html#a5a648f5ec00c526b0dfa2df7a272c6c0">n</a>;</div><div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;         <span class="comment">//Clear flag</span></div><div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;         more = <a class="code" href="../../da/d42/os__port_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;</div><div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;      }</div><div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;</div><div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;      <span class="comment">//Search for any SSI tags</span></div><div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;      error = <a class="code" href="../../dc/d6b/ssi_8c.html#a93e1f8064d7752a1ae1294bf6ba10b13">ssiSearchTag</a>(buffer + pos, length, <span class="stringliteral">&quot;&lt;!--#&quot;</span>, 5, &amp;n);</div><div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;</div><div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;      <span class="comment">//Full match?</span></div><div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;      <span class="keywordflow">if</span>(error == <a class="code" href="../../da/d41/error_8h.html#ac7659d73a8cdedc08e9f566bb406689cabf350750d0d4fabd8954c0f1e9bbae94">NO_ERROR</a>)</div><div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;      {</div><div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;         <span class="comment">//Send the part of the file that precedes the tag</span></div><div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;         error = <a class="code" href="../../da/df4/http__server_8c.html#acb70b948502efdd99db7cf234fcb74db">httpWriteStream</a>(connection, buffer + pos, n);</div><div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;         <span class="comment">//Failed to send data?</span></div><div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;         <span class="keywordflow">if</span>(error)</div><div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;</div><div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;         <span class="comment">//Advance data pointer</span></div><div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;         pos += <a class="code" href="../../d1/ddf/dhcpv6__common_8h.html#a5a648f5ec00c526b0dfa2df7a272c6c0">n</a>;</div><div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;         length -= <a class="code" href="../../d1/ddf/dhcpv6__common_8h.html#a5a648f5ec00c526b0dfa2df7a272c6c0">n</a>;</div><div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;</div><div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;         <span class="comment">//Search for the comment terminator</span></div><div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;         error = <a class="code" href="../../dc/d6b/ssi_8c.html#a93e1f8064d7752a1ae1294bf6ba10b13">ssiSearchTag</a>(buffer + pos + 5, length - 5, <span class="stringliteral">&quot;--&gt;&quot;</span>, 3, &amp;n);</div><div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;</div><div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;         <span class="comment">//Full match?</span></div><div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;         <span class="keywordflow">if</span>(error == <a class="code" href="../../da/d41/error_8h.html#ac7659d73a8cdedc08e9f566bb406689cabf350750d0d4fabd8954c0f1e9bbae94">NO_ERROR</a>)</div><div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;         {</div><div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;            <span class="comment">//Advance data pointer over the opening identifier</span></div><div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;            pos += 5;</div><div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;            length -= 5;</div><div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;</div><div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;            <span class="comment">//Process SSI directive</span></div><div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;            error = <a class="code" href="../../dc/d6b/ssi_8c.html#a5d550bb3514d6c7ddaea0f4a79806b0a">ssiProcessCommand</a>(connection, buffer + pos, n, uri, <a class="code" href="../../df/d79/tls_8h.html#abbb6c7c49508c1ac374683f2d1159e08">level</a>);</div><div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;            <span class="comment">//Any error to report?</span></div><div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;            <span class="keywordflow">if</span>(error)</div><div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;               <span class="keywordflow">break</span>;</div><div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;</div><div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;            <span class="comment">//Advance data pointer over the SSI tag</span></div><div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;            pos += n + 3;</div><div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;            length -= n + 3;</div><div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;         }</div><div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;         <span class="comment">//No match or partial match?</span></div><div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;         <span class="keywordflow">else</span></div><div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;         {</div><div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;            <span class="keywordflow">if</span>(pos &gt; 0)</div><div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;            {</div><div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;               <span class="comment">//Move the remaining bytes to the start of the buffer</span></div><div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;               memmove(buffer, buffer + pos, length);</div><div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;               <span class="comment">//Rewind to the beginning of the buffer</span></div><div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;               pos = 0;</div><div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;               <span class="comment">//More data are needed</span></div><div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;               more = <a class="code" href="../../da/d42/os__port_8h.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>;</div><div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;            }</div><div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;            <span class="keywordflow">else</span></div><div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;            {</div><div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;               <span class="comment">//Send data to the client</span></div><div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;               error = <a class="code" href="../../da/df4/http__server_8c.html#acb70b948502efdd99db7cf234fcb74db">httpWriteStream</a>(connection, buffer + pos, length);</div><div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;               <span class="comment">//Any error to report?</span></div><div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;               <span class="keywordflow">if</span>(error)</div><div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;                  <span class="keywordflow">break</span>;</div><div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;</div><div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;               <span class="comment">//Rewind to the beginning of the buffer</span></div><div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;               pos = 0;</div><div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;               length = 0;</div><div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;               <span class="comment">//More data are needed</span></div><div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;               more = <a class="code" href="../../da/d42/os__port_8h.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>;</div><div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;            }</div><div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;         }</div><div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;      }</div><div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;      <span class="comment">//Partial match?</span></div><div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;      <span class="keywordflow">else</span> <span class="keywordflow">if</span>(error == <a class="code" href="../../da/d41/error_8h.html#ac7659d73a8cdedc08e9f566bb406689ca87d35f569078d53830c08f9b8408787e">ERROR_PARTIAL_MATCH</a>)</div><div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;      {</div><div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;         <span class="comment">//Send the part of the file that precedes the tag</span></div><div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;         error = <a class="code" href="../../da/df4/http__server_8c.html#acb70b948502efdd99db7cf234fcb74db">httpWriteStream</a>(connection, buffer + pos, n);</div><div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;         <span class="comment">//Failed to send data?</span></div><div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;         <span class="keywordflow">if</span>(error)</div><div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;</div><div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;         <span class="comment">//Advance data pointer</span></div><div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;         pos += <a class="code" href="../../d1/ddf/dhcpv6__common_8h.html#a5a648f5ec00c526b0dfa2df7a272c6c0">n</a>;</div><div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;         length -= <a class="code" href="../../d1/ddf/dhcpv6__common_8h.html#a5a648f5ec00c526b0dfa2df7a272c6c0">n</a>;</div><div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;</div><div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;         <span class="comment">//Move the remaining bytes to the start of the buffer</span></div><div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;         memmove(buffer, buffer + pos, length);</div><div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;         <span class="comment">//Rewind to the beginning of the buffer</span></div><div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;         pos = 0;</div><div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;         <span class="comment">//More data are needed</span></div><div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;         more = <a class="code" href="../../da/d42/os__port_8h.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>;</div><div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;      }</div><div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;      <span class="comment">//No match?</span></div><div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;      <span class="keywordflow">else</span></div><div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;      {</div><div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;         <span class="comment">//Send data to the client</span></div><div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;         error = <a class="code" href="../../da/df4/http__server_8c.html#acb70b948502efdd99db7cf234fcb74db">httpWriteStream</a>(connection, buffer + pos, length);</div><div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;         <span class="comment">//Any error to report?</span></div><div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;         <span class="keywordflow">if</span>(error)</div><div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;</div><div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;         <span class="comment">//Rewind to the beginning of the buffer</span></div><div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;         pos = 0;</div><div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;         length = 0;</div><div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;         <span class="comment">//More data are needed</span></div><div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;         more = <a class="code" href="../../da/d42/os__port_8h.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>;</div><div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;      }</div><div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;   }</div><div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;</div><div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;   <span class="comment">//Close the file</span></div><div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;   <a class="code" href="../../d3/dad/fs__port__fatfs_8c.html#a563173066eb2924f61e00e87fbf9d0bc">fsCloseFile</a>(file);</div><div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;   <span class="comment">//Release memory buffer</span></div><div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;   <a class="code" href="../../dd/d0d/os__port__chibios_8c.html#a68e4fa4326f2031eab28b92a25f2d68d">osFreeMem</a>(buffer);</div><div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;</div><div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;   <span class="comment">//Properly close the output stream</span></div><div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;   <span class="keywordflow">if</span>(!<a class="code" href="../../df/d79/tls_8h.html#abbb6c7c49508c1ac374683f2d1159e08">level</a> &amp;&amp; error == <a class="code" href="../../da/d41/error_8h.html#ac7659d73a8cdedc08e9f566bb406689cabf350750d0d4fabd8954c0f1e9bbae94">NO_ERROR</a>)</div><div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;      error = <a class="code" href="../../da/df4/http__server_8c.html#ad794634ec0494f8b61a9ea4d439552a1">httpCloseStream</a>(connection);</div><div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;<span class="preprocessor">#else</span></div><div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;   <span class="comment">//Parse the specified file</span></div><div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;   <span class="keywordflow">while</span>(length &gt; 0)</div><div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;   {</div><div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;      <span class="comment">//Search for any SSI tags</span></div><div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;      error = <a class="code" href="../../dc/d6b/ssi_8c.html#a93e1f8064d7752a1ae1294bf6ba10b13">ssiSearchTag</a>(data, length, <span class="stringliteral">&quot;&lt;!--#&quot;</span>, 5, &amp;i);</div><div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;</div><div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;      <span class="comment">//Opening identifier found?</span></div><div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;      <span class="keywordflow">if</span>(!error)</div><div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;      {</div><div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;         <span class="comment">//Search for the comment terminator</span></div><div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;         error = <a class="code" href="../../dc/d6b/ssi_8c.html#a93e1f8064d7752a1ae1294bf6ba10b13">ssiSearchTag</a>(data + i + 5, length - i - 5, <span class="stringliteral">&quot;--&gt;&quot;</span>, 3, &amp;j);</div><div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;      }</div><div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;</div><div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;      <span class="comment">//Check whether a valid SSI tag has been found?</span></div><div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;      <span class="keywordflow">if</span>(!error)</div><div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;      {</div><div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;         <span class="comment">//Send the part of the file that precedes the tag</span></div><div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;         error = <a class="code" href="../../da/df4/http__server_8c.html#acb70b948502efdd99db7cf234fcb74db">httpWriteStream</a>(connection, data, i);</div><div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;         <span class="comment">//Failed to send data?</span></div><div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;         <span class="keywordflow">if</span>(error)</div><div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;            <span class="keywordflow">return</span> error;</div><div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;</div><div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;         <span class="comment">//Advance data pointer over the opening identifier</span></div><div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;         data += i + 5;</div><div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;         length -= i + 5;</div><div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;</div><div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;         <span class="comment">//Process SSI directive</span></div><div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;         error = <a class="code" href="../../dc/d6b/ssi_8c.html#a5d550bb3514d6c7ddaea0f4a79806b0a">ssiProcessCommand</a>(connection, data, j, uri, <a class="code" href="../../df/d79/tls_8h.html#abbb6c7c49508c1ac374683f2d1159e08">level</a>);</div><div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;         <span class="comment">//Any error to report?</span></div><div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;         <span class="keywordflow">if</span>(error)</div><div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;            <span class="keywordflow">return</span> error;</div><div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;</div><div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;         <span class="comment">//Advance data pointer over the SSI tag</span></div><div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;         data += j + 3;</div><div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;         length -= j + 3;</div><div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;      }</div><div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;      <span class="keywordflow">else</span></div><div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;      {</div><div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;         <span class="comment">//Send the rest of the file</span></div><div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;         error = <a class="code" href="../../da/df4/http__server_8c.html#acb70b948502efdd99db7cf234fcb74db">httpWriteStream</a>(connection, data, length);</div><div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;         <span class="comment">//Failed to send data?</span></div><div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;         <span class="keywordflow">if</span>(error)</div><div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;            <span class="keywordflow">return</span> error;</div><div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;</div><div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;         <span class="comment">//Advance data pointer</span></div><div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;         data += <a class="code" href="../../d3/d25/dtls__misc_8h.html#ab43ca82dd7fa2a0e56f941032ef324c4">length</a>;</div><div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;         length = 0;</div><div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;      }</div><div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;   }</div><div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;</div><div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;   <span class="comment">//Properly close the output stream</span></div><div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;   <span class="keywordflow">if</span>(!<a class="code" href="../../df/d79/tls_8h.html#abbb6c7c49508c1ac374683f2d1159e08">level</a>)</div><div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;      error = <a class="code" href="../../da/df4/http__server_8c.html#ad794634ec0494f8b61a9ea4d439552a1">httpCloseStream</a>(connection);</div><div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;</div><div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;   <span class="comment">//Return status code</span></div><div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;   <span class="keywordflow">return</span> error;</div><div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;}</div><div class="ttc" id="error_8h_html_ac7659d73a8cdedc08e9f566bb406689ca87d35f569078d53830c08f9b8408787e"><div class="ttname"><a href="../../da/d41/error_8h.html#ac7659d73a8cdedc08e9f566bb406689ca87d35f569078d53830c08f9b8408787e">ERROR_PARTIAL_MATCH</a></div><div class="ttdef"><b>Definition:</b> <a href="../../da/d41/error_8h_source.html#l00277">error.h:277</a></div></div>
<div class="ttc" id="compiler__port_8h_html_a40bb5262bf908c328fbcfbe5d29d0201"><div class="ttname"><a href="../../d1/dfa/compiler__port_8h.html#a40bb5262bf908c328fbcfbe5d29d0201">char_t</a></div><div class="ttdeci">char char_t</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dfa/compiler__port_8h_source.html#l00043">compiler_port.h:43</a></div></div>
<div class="ttc" id="os__port__chibios_8c_html_a68e4fa4326f2031eab28b92a25f2d68d"><div class="ttname"><a href="../../dd/d0d/os__port__chibios_8c.html#a68e4fa4326f2031eab28b92a25f2d68d">osFreeMem</a></div><div class="ttdeci">void osFreeMem(void *p)</div><div class="ttdoc">Release a previously allocated memory block. </div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d0d/os__port__chibios_8c_source.html#l00529">os_port_chibios.c:529</a></div></div>
<div class="ttc" id="mime_8c_html_a9e79374594b83b65457d42c5589db7e0"><div class="ttname"><a href="../../da/de9/mime_8c.html#a9e79374594b83b65457d42c5589db7e0">mimeGetType</a></div><div class="ttdeci">const char_t * mimeGetType(const char_t *filename)</div><div class="ttdoc">Get the MIME type from a given extension. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/de9/mime_8c_source.html#l00113">mime.c:113</a></div></div>
<div class="ttc" id="http__server_8h_html_a7323ad0fee234d179bd1f679496174d2"><div class="ttname"><a href="../../dd/d95/http__server_8h.html#a7323ad0fee234d179bd1f679496174d2">HTTP_SERVER_BUFFER_SIZE</a></div><div class="ttdeci">#define HTTP_SERVER_BUFFER_SIZE</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d95/http__server_8h_source.html#l00160">http_server.h:160</a></div></div>
<div class="ttc" id="fs__port__fatfs_8c_html_af802c67ab60bcc6273bcc65a967d99ab"><div class="ttname"><a href="../../d3/dad/fs__port__fatfs_8c.html#af802c67ab60bcc6273bcc65a967d99ab">fsReadFile</a></div><div class="ttdeci">error_t fsReadFile(FsFile *file, void *data, size_t size, size_t *length)</div><div class="ttdoc">Read data from the specified file. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dad/fs__port__fatfs_8c_source.html#l00481">fs_port_fatfs.c:481</a></div></div>
<div class="ttc" id="ssi_8c_html_a5d550bb3514d6c7ddaea0f4a79806b0a"><div class="ttname"><a href="../../dc/d6b/ssi_8c.html#a5d550bb3514d6c7ddaea0f4a79806b0a">ssiProcessCommand</a></div><div class="ttdeci">error_t ssiProcessCommand(HttpConnection *connection, const char_t *tag, size_t length, const char_t *uri, uint_t level)</div><div class="ttdoc">Process SSI directive. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d6b/ssi_8c_source.html#l00364">ssi.c:364</a></div></div>
<div class="ttc" id="group__BSPDefine_html_ga070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../de/da2/group__BSPDefine.html#ga070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d6b/nm__bsp_8h_source.html#l00070">nm_bsp.h:70</a></div></div>
<div class="ttc" id="tls_8h_html_abbb6c7c49508c1ac374683f2d1159e08"><div class="ttname"><a href="../../df/d79/tls_8h.html#abbb6c7c49508c1ac374683f2d1159e08">level</a></div><div class="ttdeci">uint8_t level</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d79/tls_8h_source.html#l01702">tls.h:1702</a></div></div>
<div class="ttc" id="stdint_8h_html_aba7bc1797add20fe3efdf37ced1182c5"><div class="ttname"><a href="../../df/dd8/stdint_8h.html#aba7bc1797add20fe3efdf37ced1182c5">uint8_t</a></div><div class="ttdeci">unsigned char uint8_t</div><div class="ttdef"><b>Definition:</b> <a href="../../df/dd8/stdint_8h_source.html#l00078">stdint.h:78</a></div></div>
<div class="ttc" id="http__server_8c_html_ae90b959869f2eec5ad37c951b156855f"><div class="ttname"><a href="../../da/df4/http__server_8c.html#ae90b959869f2eec5ad37c951b156855f">httpWriteHeader</a></div><div class="ttdeci">error_t httpWriteHeader(HttpConnection *connection)</div><div class="ttdoc">Send HTTP response header. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/df4/http__server_8c_source.html#l00511">http_server.c:511</a></div></div>
<div class="ttc" id="os__port_8h_html_aa8cecfc5c5c054d2875c03e77b7be15d"><div class="ttname"><a href="../../da/d42/os__port_8h.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a></div><div class="ttdeci">#define TRUE</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d42/os__port_8h_source.html#l00050">os_port.h:50</a></div></div>
<div class="ttc" id="dhcp__common_8h_html_a5c7003134e7a7486271d4f33c2e7b7de"><div class="ttname"><a href="../../d0/d63/dhcp__common_8h.html#a5c7003134e7a7486271d4f33c2e7b7de">file</a></div><div class="ttdeci">uint8_t file[128]</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d63/dhcp__common_8h_source.html#l00213">dhcp_common.h:213</a></div></div>
<div class="ttc" id="http__server__misc_8c_html_a34edbde4371909896b60846f2545fbaa"><div class="ttname"><a href="../../da/dc3/http__server__misc_8c.html#a34edbde4371909896b60846f2545fbaa">httpGetAbsolutePath</a></div><div class="ttdeci">void httpGetAbsolutePath(HttpConnection *connection, const char_t *relative, char_t *absolute, size_t maxLen)</div><div class="ttdoc">Retrieve the full pathname to the specified resource. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/dc3/http__server__misc_8c_source.html#l01070">http_server_misc.c:1070</a></div></div>
<div class="ttc" id="http__server_8c_html_acb70b948502efdd99db7cf234fcb74db"><div class="ttname"><a href="../../da/df4/http__server_8c.html#acb70b948502efdd99db7cf234fcb74db">httpWriteStream</a></div><div class="ttdeci">error_t httpWriteStream(HttpConnection *connection, const void *data, size_t length)</div><div class="ttdoc">Write data to the client. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/df4/http__server_8c_source.html#l00650">http_server.c:650</a></div></div>
<div class="ttc" id="error_8h_html_ac7659d73a8cdedc08e9f566bb406689cabf350750d0d4fabd8954c0f1e9bbae94"><div class="ttname"><a href="../../da/d41/error_8h.html#ac7659d73a8cdedc08e9f566bb406689cabf350750d0d4fabd8954c0f1e9bbae94">NO_ERROR</a></div><div class="ttdoc">Success. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/d41/error_8h_source.html#l00044">error.h:44</a></div></div>
<div class="ttc" id="http__server_8h_html_aa86d8e602f06770e2950eb80353b46f5"><div class="ttname"><a href="../../dd/d95/http__server_8h.html#aa86d8e602f06770e2950eb80353b46f5">HTTP_SERVER_SSI_MAX_RECURSION</a></div><div class="ttdeci">#define HTTP_SERVER_SSI_MAX_RECURSION</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d95/http__server_8h_source.html#l00223">http_server.h:223</a></div></div>
<div class="ttc" id="resource__manager_8c_html_a0fe55f3dce16ce80683cae543c61f22c"><div class="ttname"><a href="../../d2/d71/resource__manager_8c.html#a0fe55f3dce16ce80683cae543c61f22c">resGetData</a></div><div class="ttdeci">error_t resGetData(const char_t *path, const uint8_t **data, size_t *length)</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d71/resource__manager_8c_source.html#l00039">resource_manager.c:39</a></div></div>
<div class="ttc" id="os__port__chibios_8c_html_ae86758dcd9fc3c98247ae19815987c9a"><div class="ttname"><a href="../../dd/d0d/os__port__chibios_8c.html#ae86758dcd9fc3c98247ae19815987c9a">osAllocMem</a></div><div class="ttdeci">void * osAllocMem(size_t size)</div><div class="ttdoc">Allocate a memory block. </div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d0d/os__port__chibios_8c_source.html#l00509">os_port_chibios.c:509</a></div></div>
<div class="ttc" id="error_8h_html_ac7659d73a8cdedc08e9f566bb406689ca4cca37264afee88cb14cd105f0d59607"><div class="ttname"><a href="../../da/d41/error_8h.html#ac7659d73a8cdedc08e9f566bb406689ca4cca37264afee88cb14cd105f0d59607">ERROR_NOT_FOUND</a></div><div class="ttdef"><b>Definition:</b> <a href="../../da/d41/error_8h_source.html#l00145">error.h:145</a></div></div>
<div class="ttc" id="error_8h_html_ac7659d73a8cdedc08e9f566bb406689c"><div class="ttname"><a href="../../da/d41/error_8h.html#ac7659d73a8cdedc08e9f566bb406689c">error_t</a></div><div class="ttdeci">error_t</div><div class="ttdoc">Error codes. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/d41/error_8h_source.html#l00042">error.h:42</a></div></div>
<div class="ttc" id="http__server_8c_html_ad794634ec0494f8b61a9ea4d439552a1"><div class="ttname"><a href="../../da/df4/http__server_8c.html#ad794634ec0494f8b61a9ea4d439552a1">httpCloseStream</a></div><div class="ttdeci">error_t httpCloseStream(HttpConnection *connection)</div><div class="ttdoc">Close output stream. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/df4/http__server_8c_source.html#l00715">http_server.c:715</a></div></div>
<div class="ttc" id="compiler__port_8h_html_a12a1e9b3ce141648783a82445d02b58d"><div class="ttname"><a href="../../d1/dfa/compiler__port_8h.html#a12a1e9b3ce141648783a82445d02b58d">uint_t</a></div><div class="ttdeci">unsigned int uint_t</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dfa/compiler__port_8h_source.html#l00045">compiler_port.h:45</a></div></div>
<div class="ttc" id="dtls__misc_8h_html_a5c239a1bb87b52b0f1d6d68c4749cd2a"><div class="ttname"><a href="../../d3/d25/dtls__misc_8h.html#a5c239a1bb87b52b0f1d6d68c4749cd2a">data</a></div><div class="ttdeci">uint8_t data[]</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d25/dtls__misc_8h_source.html#l00176">dtls_misc.h:176</a></div></div>
<div class="ttc" id="ssi_8c_html_a93e1f8064d7752a1ae1294bf6ba10b13"><div class="ttname"><a href="../../dc/d6b/ssi_8c.html#a93e1f8064d7752a1ae1294bf6ba10b13">ssiSearchTag</a></div><div class="ttdeci">error_t ssiSearchTag(const char_t *s, size_t sLen, const char_t *tag, size_t tagLen, uint_t *pos)</div><div class="ttdoc">Search a string for a given tag. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d6b/ssi_8c_source.html#l00831">ssi.c:831</a></div></div>
<div class="ttc" id="fs__port__fatfs_8h_html_a913e2a93cbf8ed241fe05fb6abc3f316"><div class="ttname"><a href="../../de/d1d/fs__port__fatfs_8h.html#a913e2a93cbf8ed241fe05fb6abc3f316">FsFile</a></div><div class="ttdeci">void FsFile</div><div class="ttdoc">File descriptor. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d1d/fs__port__fatfs_8h_source.html#l00060">fs_port_fatfs.h:60</a></div></div>
<div class="ttc" id="dtls__misc_8h_html_ab43ca82dd7fa2a0e56f941032ef324c4"><div class="ttname"><a href="../../d3/d25/dtls__misc_8h.html#ab43ca82dd7fa2a0e56f941032ef324c4">length</a></div><div class="ttdeci">uint8_t length</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d25/dtls__misc_8h_source.html#l00149">dtls_misc.h:149</a></div></div>
<div class="ttc" id="dhcpv6__common_8h_html_a5a648f5ec00c526b0dfa2df7a272c6c0"><div class="ttname"><a href="../../d1/ddf/dhcpv6__common_8h.html#a5a648f5ec00c526b0dfa2df7a272c6c0">n</a></div><div class="ttdeci">uint8_t n</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/ddf/dhcpv6__common_8h_source.html#l00413">dhcpv6_common.h:413</a></div></div>
<div class="ttc" id="fs__port_8h_html_a086887b0800535e5a06340d3fc76c51cadf6c1e1805f97fa4f535acbdc2d943db"><div class="ttname"><a href="../../d9/d2e/fs__port_8h.html#a086887b0800535e5a06340d3fc76c51cadf6c1e1805f97fa4f535acbdc2d943db">FS_FILE_MODE_READ</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d2e/fs__port_8h_source.html#l00072">fs_port.h:72</a></div></div>
<div class="ttc" id="fs__port__fatfs_8c_html_a563173066eb2924f61e00e87fbf9d0bc"><div class="ttname"><a href="../../d3/dad/fs__port__fatfs_8c.html#a563173066eb2924f61e00e87fbf9d0bc">fsCloseFile</a></div><div class="ttdeci">void fsCloseFile(FsFile *file)</div><div class="ttdoc">Close a file. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dad/fs__port__fatfs_8c_source.html#l00528">fs_port_fatfs.c:528</a></div></div>
<div class="ttc" id="os__port_8h_html_aa93f0eb578d23995850d61f7d61c55c1"><div class="ttname"><a href="../../da/d42/os__port_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a></div><div class="ttdeci">#define FALSE</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d42/os__port_8h_source.html#l00046">os_port.h:46</a></div></div>
<div class="ttc" id="compiler__port_8h_html_a812d16e5494522586b3784e55d479912"><div class="ttname"><a href="../../d1/dfa/compiler__port_8h.html#a812d16e5494522586b3784e55d479912">bool_t</a></div><div class="ttdeci">int bool_t</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dfa/compiler__port_8h_source.html#l00049">compiler_port.h:49</a></div></div>
<div class="ttc" id="fs__port__fatfs_8c_html_aba7fcc4f174dcf4652a8b84cdfff22b5"><div class="ttname"><a href="../../d3/dad/fs__port__fatfs_8c.html#aba7fcc4f174dcf4652a8b84cdfff22b5">fsOpenFile</a></div><div class="ttdeci">FsFile * fsOpenFile(const char_t *path, uint_t mode)</div><div class="ttdoc">Open the specified file for reading or writing. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dad/fs__port__fatfs_8c_source.html#l00321">fs_port_fatfs.c:321</a></div></div>
<div class="ttc" id="error_8h_html_ac7659d73a8cdedc08e9f566bb406689cac0a554045048d2fb61387cf735676f69"><div class="ttname"><a href="../../da/d41/error_8h.html#ac7659d73a8cdedc08e9f566bb406689cac0a554045048d2fb61387cf735676f69">ERROR_OUT_OF_MEMORY</a></div><div class="ttdef"><b>Definition:</b> <a href="../../da/d41/error_8h_source.html#l00063">error.h:63</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a5d550bb3514d6c7ddaea0f4a79806b0a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5d550bb3514d6c7ddaea0f4a79806b0a">&#9670;&nbsp;</a></span>ssiProcessCommand()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../da/d41/error_8h.html#ac7659d73a8cdedc08e9f566bb406689c">error_t</a> ssiProcessCommand </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../dd/d95/http__server_8h.html#a3506ecffde998ab02629dca83587d2f9">HttpConnection</a> *&#160;</td>
          <td class="paramname"><em>connection</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="../../d1/dfa/compiler__port_8h.html#a40bb5262bf908c328fbcfbe5d29d0201">char_t</a> *&#160;</td>
          <td class="paramname"><em>tag</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>length</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="../../d1/dfa/compiler__port_8h.html#a40bb5262bf908c328fbcfbe5d29d0201">char_t</a> *&#160;</td>
          <td class="paramname"><em>uri</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d1/dfa/compiler__port_8h.html#a12a1e9b3ce141648783a82445d02b58d">uint_t</a>&#160;</td>
          <td class="paramname"><em>level</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Process SSI directive. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">connection</td><td>Structure representing an HTTP connection </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">tag</td><td>Pointer to the SSI tag </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">length</td><td>Total length of the SSI tag </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">uri</td><td>NULL-terminated string containing the file being processed </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">level</td><td>Current level of recursion </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Error code </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../dc/d6b/ssi_8c_source.html#l00364">364</a> of file <a class="el" href="../../dc/d6b/ssi_8c_source.html">ssi.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;{</div><div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;   <a class="code" href="../../da/d41/error_8h.html#ac7659d73a8cdedc08e9f566bb406689c">error_t</a> error;</div><div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;</div><div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;   <span class="comment">//Include command found?</span></div><div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;   <span class="keywordflow">if</span>(<a class="code" href="../../d3/d25/dtls__misc_8h.html#ab43ca82dd7fa2a0e56f941032ef324c4">length</a> &gt; 7 &amp;&amp; !<a class="code" href="../../de/dc7/os__port__windows_8h.html#aba00036f71bb67f8600b239a39cf5ec9">strncasecmp</a>(tag, <span class="stringliteral">&quot;include&quot;</span>, 7))</div><div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;   {</div><div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;      <span class="comment">//Process SSI include directive</span></div><div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;      error = <a class="code" href="../../dc/d6b/ssi_8c.html#ae023dd9991e79b7c622a4e12cd4bbe34">ssiProcessIncludeCommand</a>(connection, tag, <a class="code" href="../../d3/d25/dtls__misc_8h.html#ab43ca82dd7fa2a0e56f941032ef324c4">length</a>, uri, <a class="code" href="../../df/d79/tls_8h.html#abbb6c7c49508c1ac374683f2d1159e08">level</a>);</div><div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;   }</div><div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;   <span class="comment">//Echo command found?</span></div><div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;   <span class="keywordflow">else</span> <span class="keywordflow">if</span>(<a class="code" href="../../d3/d25/dtls__misc_8h.html#ab43ca82dd7fa2a0e56f941032ef324c4">length</a> &gt; 4 &amp;&amp; !<a class="code" href="../../de/dc7/os__port__windows_8h.html#aba00036f71bb67f8600b239a39cf5ec9">strncasecmp</a>(tag, <span class="stringliteral">&quot;echo&quot;</span>, 4))</div><div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;   {</div><div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;      <span class="comment">//Process SSI echo directive</span></div><div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;      error = <a class="code" href="../../dc/d6b/ssi_8c.html#ac8cdaca0cb930447f8f67d75c950f38f">ssiProcessEchoCommand</a>(connection, tag, <a class="code" href="../../d3/d25/dtls__misc_8h.html#ab43ca82dd7fa2a0e56f941032ef324c4">length</a>);</div><div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;   }</div><div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;   <span class="comment">//Exec command found?</span></div><div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;   <span class="keywordflow">else</span> <span class="keywordflow">if</span>(<a class="code" href="../../d3/d25/dtls__misc_8h.html#ab43ca82dd7fa2a0e56f941032ef324c4">length</a> &gt; 4 &amp;&amp; !<a class="code" href="../../de/dc7/os__port__windows_8h.html#aba00036f71bb67f8600b239a39cf5ec9">strncasecmp</a>(tag, <span class="stringliteral">&quot;exec&quot;</span>, 4))</div><div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;   {</div><div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;      <span class="comment">//Process SSI exec directive</span></div><div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;      error = <a class="code" href="../../dc/d6b/ssi_8c.html#ae7dfd6aaf6f5636c3ac9ede2923fb42e">ssiProcessExecCommand</a>(connection, tag, <a class="code" href="../../d3/d25/dtls__misc_8h.html#ab43ca82dd7fa2a0e56f941032ef324c4">length</a>);</div><div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;   }</div><div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;   <span class="comment">//Unknown command?</span></div><div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;   <span class="keywordflow">else</span></div><div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;   {</div><div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;      <span class="comment">//The server is unable to decode the SSI tag</span></div><div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;      error = <a class="code" href="../../da/d41/error_8h.html#ac7659d73a8cdedc08e9f566bb406689caf1442b36897b28194c3faa9d716ff808">ERROR_INVALID_TAG</a>;</div><div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;   }</div><div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;</div><div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;   <span class="comment">//Invalid SSI directive?</span></div><div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;   <span class="keywordflow">if</span>(error == <a class="code" href="../../da/d41/error_8h.html#ac7659d73a8cdedc08e9f566bb406689caf1442b36897b28194c3faa9d716ff808">ERROR_INVALID_TAG</a>)</div><div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;   {</div><div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;      <span class="comment">//Report a warning to the user</span></div><div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;      error = <a class="code" href="../../da/df4/http__server_8c.html#acb70b948502efdd99db7cf234fcb74db">httpWriteStream</a>(connection, <span class="stringliteral">&quot;Warning: Invalid SSI Tag&quot;</span>, 24);</div><div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;   }</div><div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;</div><div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;   <span class="comment">//Return status code</span></div><div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;   <span class="keywordflow">return</span> error;</div><div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;}</div><div class="ttc" id="tls_8h_html_abbb6c7c49508c1ac374683f2d1159e08"><div class="ttname"><a href="../../df/d79/tls_8h.html#abbb6c7c49508c1ac374683f2d1159e08">level</a></div><div class="ttdeci">uint8_t level</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d79/tls_8h_source.html#l01702">tls.h:1702</a></div></div>
<div class="ttc" id="ssi_8c_html_ae7dfd6aaf6f5636c3ac9ede2923fb42e"><div class="ttname"><a href="../../dc/d6b/ssi_8c.html#ae7dfd6aaf6f5636c3ac9ede2923fb42e">ssiProcessExecCommand</a></div><div class="ttdeci">error_t ssiProcessExecCommand(HttpConnection *connection, const char_t *tag, size_t length)</div><div class="ttdoc">Process SSI exec directive. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d6b/ssi_8c_source.html#l00757">ssi.c:757</a></div></div>
<div class="ttc" id="http__server_8c_html_acb70b948502efdd99db7cf234fcb74db"><div class="ttname"><a href="../../da/df4/http__server_8c.html#acb70b948502efdd99db7cf234fcb74db">httpWriteStream</a></div><div class="ttdeci">error_t httpWriteStream(HttpConnection *connection, const void *data, size_t length)</div><div class="ttdoc">Write data to the client. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/df4/http__server_8c_source.html#l00650">http_server.c:650</a></div></div>
<div class="ttc" id="error_8h_html_ac7659d73a8cdedc08e9f566bb406689caf1442b36897b28194c3faa9d716ff808"><div class="ttname"><a href="../../da/d41/error_8h.html#ac7659d73a8cdedc08e9f566bb406689caf1442b36897b28194c3faa9d716ff808">ERROR_INVALID_TAG</a></div><div class="ttdef"><b>Definition:</b> <a href="../../da/d41/error_8h_source.html#l00112">error.h:112</a></div></div>
<div class="ttc" id="ssi_8c_html_ae023dd9991e79b7c622a4e12cd4bbe34"><div class="ttname"><a href="../../dc/d6b/ssi_8c.html#ae023dd9991e79b7c622a4e12cd4bbe34">ssiProcessIncludeCommand</a></div><div class="ttdeci">error_t ssiProcessIncludeCommand(HttpConnection *connection, const char_t *tag, size_t length, const char_t *uri, uint_t level)</div><div class="ttdoc">Process SSI include directive. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d6b/ssi_8c_source.html#l00422">ssi.c:422</a></div></div>
<div class="ttc" id="error_8h_html_ac7659d73a8cdedc08e9f566bb406689c"><div class="ttname"><a href="../../da/d41/error_8h.html#ac7659d73a8cdedc08e9f566bb406689c">error_t</a></div><div class="ttdeci">error_t</div><div class="ttdoc">Error codes. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/d41/error_8h_source.html#l00042">error.h:42</a></div></div>
<div class="ttc" id="os__port__windows_8h_html_aba00036f71bb67f8600b239a39cf5ec9"><div class="ttname"><a href="../../de/dc7/os__port__windows_8h.html#aba00036f71bb67f8600b239a39cf5ec9">strncasecmp</a></div><div class="ttdeci">#define strncasecmp</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dc7/os__port__windows_8h_source.html#l00153">os_port_windows.h:153</a></div></div>
<div class="ttc" id="dtls__misc_8h_html_ab43ca82dd7fa2a0e56f941032ef324c4"><div class="ttname"><a href="../../d3/d25/dtls__misc_8h.html#ab43ca82dd7fa2a0e56f941032ef324c4">length</a></div><div class="ttdeci">uint8_t length</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d25/dtls__misc_8h_source.html#l00149">dtls_misc.h:149</a></div></div>
<div class="ttc" id="ssi_8c_html_ac8cdaca0cb930447f8f67d75c950f38f"><div class="ttname"><a href="../../dc/d6b/ssi_8c.html#ac8cdaca0cb930447f8f67d75c950f38f">ssiProcessEchoCommand</a></div><div class="ttdeci">error_t ssiProcessEchoCommand(HttpConnection *connection, const char_t *tag, size_t length)</div><div class="ttdoc">Process SSI echo directive. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d6b/ssi_8c_source.html#l00598">ssi.c:598</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ac8cdaca0cb930447f8f67d75c950f38f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac8cdaca0cb930447f8f67d75c950f38f">&#9670;&nbsp;</a></span>ssiProcessEchoCommand()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../da/d41/error_8h.html#ac7659d73a8cdedc08e9f566bb406689c">error_t</a> ssiProcessEchoCommand </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../dd/d95/http__server_8h.html#a3506ecffde998ab02629dca83587d2f9">HttpConnection</a> *&#160;</td>
          <td class="paramname"><em>connection</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="../../d1/dfa/compiler__port_8h.html#a40bb5262bf908c328fbcfbe5d29d0201">char_t</a> *&#160;</td>
          <td class="paramname"><em>tag</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>length</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Process SSI echo directive. </p>
<p>This echo directive displays the contents of a specified HTTP environment variable</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">connection</td><td>Structure representing an HTTP connection </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">tag</td><td>Pointer to the SSI tag </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">length</td><td>Total length of the SSI tag </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Error code </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../dc/d6b/ssi_8c_source.html#l00598">598</a> of file <a class="el" href="../../dc/d6b/ssi_8c_source.html">ssi.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160;{</div><div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160;   <a class="code" href="../../da/d41/error_8h.html#ac7659d73a8cdedc08e9f566bb406689c">error_t</a> error;</div><div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160;   <a class="code" href="../../d1/dfa/compiler__port_8h.html#a40bb5262bf908c328fbcfbe5d29d0201">char_t</a> *separator;</div><div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160;   <a class="code" href="../../d1/dfa/compiler__port_8h.html#a40bb5262bf908c328fbcfbe5d29d0201">char_t</a> *attribute;</div><div class="line"><a name="l00603"></a><span class="lineno">  603</span>&#160;   <a class="code" href="../../d1/dfa/compiler__port_8h.html#a40bb5262bf908c328fbcfbe5d29d0201">char_t</a> *<a class="code" href="../../d3/d25/dtls__misc_8h.html#a74bce8e92ccabd0c885447114a48b80e">value</a>;</div><div class="line"><a name="l00604"></a><span class="lineno">  604</span>&#160;</div><div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160;   <span class="comment">//Discard invalid SSI directives</span></div><div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160;   <span class="keywordflow">if</span>(length &lt; 4 || length &gt;= <a class="code" href="../../dd/d95/http__server_8h.html#a7323ad0fee234d179bd1f679496174d2">HTTP_SERVER_BUFFER_SIZE</a>)</div><div class="line"><a name="l00607"></a><span class="lineno">  607</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../da/d41/error_8h.html#ac7659d73a8cdedc08e9f566bb406689caf1442b36897b28194c3faa9d716ff808">ERROR_INVALID_TAG</a>;</div><div class="line"><a name="l00608"></a><span class="lineno">  608</span>&#160;</div><div class="line"><a name="l00609"></a><span class="lineno">  609</span>&#160;   <span class="comment">//Skip the SSI echo command (4 bytes)</span></div><div class="line"><a name="l00610"></a><span class="lineno">  610</span>&#160;   memcpy(connection-&gt;buffer, tag + 4, <a class="code" href="../../d3/d25/dtls__misc_8h.html#ab43ca82dd7fa2a0e56f941032ef324c4">length</a> - 4);</div><div class="line"><a name="l00611"></a><span class="lineno">  611</span>&#160;   <span class="comment">//Ensure the resulting string is NULL-terminated</span></div><div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160;   connection-&gt;buffer[<a class="code" href="../../d3/d25/dtls__misc_8h.html#ab43ca82dd7fa2a0e56f941032ef324c4">length</a> - 4] = <span class="charliteral">&#39;\0&#39;</span>;</div><div class="line"><a name="l00613"></a><span class="lineno">  613</span>&#160;</div><div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160;   <span class="comment">//Check whether a separator is present</span></div><div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160;   separator = strchr(connection-&gt;buffer, <span class="charliteral">&#39;=&#39;</span>);</div><div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160;   <span class="comment">//Separator not found?</span></div><div class="line"><a name="l00617"></a><span class="lineno">  617</span>&#160;   <span class="keywordflow">if</span>(!separator)</div><div class="line"><a name="l00618"></a><span class="lineno">  618</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../da/d41/error_8h.html#ac7659d73a8cdedc08e9f566bb406689caf1442b36897b28194c3faa9d716ff808">ERROR_INVALID_TAG</a>;</div><div class="line"><a name="l00619"></a><span class="lineno">  619</span>&#160;</div><div class="line"><a name="l00620"></a><span class="lineno">  620</span>&#160;   <span class="comment">//Split the tag</span></div><div class="line"><a name="l00621"></a><span class="lineno">  621</span>&#160;   *separator = <span class="charliteral">&#39;\0&#39;</span>;</div><div class="line"><a name="l00622"></a><span class="lineno">  622</span>&#160;</div><div class="line"><a name="l00623"></a><span class="lineno">  623</span>&#160;   <span class="comment">//Get attribute name and value</span></div><div class="line"><a name="l00624"></a><span class="lineno">  624</span>&#160;   attribute = <a class="code" href="../../df/d5f/str_8c.html#ade9441b268416af6b024eb2ba3a5847e">strTrimWhitespace</a>(connection-&gt;buffer);</div><div class="line"><a name="l00625"></a><span class="lineno">  625</span>&#160;   value = <a class="code" href="../../df/d5f/str_8c.html#ade9441b268416af6b024eb2ba3a5847e">strTrimWhitespace</a>(separator + 1);</div><div class="line"><a name="l00626"></a><span class="lineno">  626</span>&#160;</div><div class="line"><a name="l00627"></a><span class="lineno">  627</span>&#160;   <span class="comment">//Remove leading simple or double quote</span></div><div class="line"><a name="l00628"></a><span class="lineno">  628</span>&#160;   <span class="keywordflow">if</span>(value[0] == <span class="charliteral">&#39;\&#39;&#39;</span> || value[0] == <span class="charliteral">&#39;\&quot;&#39;</span>)</div><div class="line"><a name="l00629"></a><span class="lineno">  629</span>&#160;      value++;</div><div class="line"><a name="l00630"></a><span class="lineno">  630</span>&#160;</div><div class="line"><a name="l00631"></a><span class="lineno">  631</span>&#160;   <span class="comment">//Get the length of the attribute value</span></div><div class="line"><a name="l00632"></a><span class="lineno">  632</span>&#160;   <a class="code" href="../../d3/d25/dtls__misc_8h.html#ab43ca82dd7fa2a0e56f941032ef324c4">length</a> = strlen(value);</div><div class="line"><a name="l00633"></a><span class="lineno">  633</span>&#160;</div><div class="line"><a name="l00634"></a><span class="lineno">  634</span>&#160;   <span class="comment">//Remove trailing simple or double quote</span></div><div class="line"><a name="l00635"></a><span class="lineno">  635</span>&#160;   <span class="keywordflow">if</span>(<a class="code" href="../../d3/d25/dtls__misc_8h.html#ab43ca82dd7fa2a0e56f941032ef324c4">length</a> &gt; 0)</div><div class="line"><a name="l00636"></a><span class="lineno">  636</span>&#160;   {</div><div class="line"><a name="l00637"></a><span class="lineno">  637</span>&#160;      <span class="keywordflow">if</span>(value[<a class="code" href="../../d3/d25/dtls__misc_8h.html#ab43ca82dd7fa2a0e56f941032ef324c4">length</a> - 1] == <span class="charliteral">&#39;\&#39;&#39;</span> || value[<a class="code" href="../../d3/d25/dtls__misc_8h.html#ab43ca82dd7fa2a0e56f941032ef324c4">length</a> - 1] == <span class="charliteral">&#39;\&quot;&#39;</span>)</div><div class="line"><a name="l00638"></a><span class="lineno">  638</span>&#160;         value[<a class="code" href="../../d3/d25/dtls__misc_8h.html#ab43ca82dd7fa2a0e56f941032ef324c4">length</a> - 1] = <span class="charliteral">&#39;\0&#39;</span>;</div><div class="line"><a name="l00639"></a><span class="lineno">  639</span>&#160;   }</div><div class="line"><a name="l00640"></a><span class="lineno">  640</span>&#160;</div><div class="line"><a name="l00641"></a><span class="lineno">  641</span>&#160;   <span class="comment">//Enforce attribute name</span></div><div class="line"><a name="l00642"></a><span class="lineno">  642</span>&#160;   <span class="keywordflow">if</span>(<a class="code" href="../../de/dc7/os__port__windows_8h.html#ac99ec3f1036620727a68aa8c25a8963c">strcasecmp</a>(attribute, <span class="stringliteral">&quot;var&quot;</span>))</div><div class="line"><a name="l00643"></a><span class="lineno">  643</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../da/d41/error_8h.html#ac7659d73a8cdedc08e9f566bb406689caf1442b36897b28194c3faa9d716ff808">ERROR_INVALID_TAG</a>;</div><div class="line"><a name="l00644"></a><span class="lineno">  644</span>&#160;</div><div class="line"><a name="l00645"></a><span class="lineno">  645</span>&#160;   <span class="comment">//Remote address?</span></div><div class="line"><a name="l00646"></a><span class="lineno">  646</span>&#160;   <span class="keywordflow">if</span>(!<a class="code" href="../../de/dc7/os__port__windows_8h.html#ac99ec3f1036620727a68aa8c25a8963c">strcasecmp</a>(value, <span class="stringliteral">&quot;REMOTE_ADDR&quot;</span>))</div><div class="line"><a name="l00647"></a><span class="lineno">  647</span>&#160;   {</div><div class="line"><a name="l00648"></a><span class="lineno">  648</span>&#160;      <span class="comment">//The IP address of the host making this request</span></div><div class="line"><a name="l00649"></a><span class="lineno">  649</span>&#160;      <a class="code" href="../../d0/dc8/ip_8c.html#aecdb577de79f65f8c814d5f101c7c6ae">ipAddrToString</a>(&amp;connection-&gt;socket-&gt;remoteIpAddr, connection-&gt;buffer);</div><div class="line"><a name="l00650"></a><span class="lineno">  650</span>&#160;   }</div><div class="line"><a name="l00651"></a><span class="lineno">  651</span>&#160;   <span class="comment">//Remote port?</span></div><div class="line"><a name="l00652"></a><span class="lineno">  652</span>&#160;   <span class="keywordflow">else</span> <span class="keywordflow">if</span>(!<a class="code" href="../../de/dc7/os__port__windows_8h.html#ac99ec3f1036620727a68aa8c25a8963c">strcasecmp</a>(value, <span class="stringliteral">&quot;REMOTE_PORT&quot;</span>))</div><div class="line"><a name="l00653"></a><span class="lineno">  653</span>&#160;   {</div><div class="line"><a name="l00654"></a><span class="lineno">  654</span>&#160;      <span class="comment">//The port number used by the remote host when making this request</span></div><div class="line"><a name="l00655"></a><span class="lineno">  655</span>&#160;      sprintf(connection-&gt;buffer, <span class="stringliteral">&quot;%&quot;</span> PRIu16, connection-&gt;socket-&gt;remotePort);</div><div class="line"><a name="l00656"></a><span class="lineno">  656</span>&#160;   }</div><div class="line"><a name="l00657"></a><span class="lineno">  657</span>&#160;   <span class="comment">//Server address?</span></div><div class="line"><a name="l00658"></a><span class="lineno">  658</span>&#160;   <span class="keywordflow">else</span> <span class="keywordflow">if</span>(!<a class="code" href="../../de/dc7/os__port__windows_8h.html#ac99ec3f1036620727a68aa8c25a8963c">strcasecmp</a>(value, <span class="stringliteral">&quot;SERVER_ADDR&quot;</span>))</div><div class="line"><a name="l00659"></a><span class="lineno">  659</span>&#160;   {</div><div class="line"><a name="l00660"></a><span class="lineno">  660</span>&#160;      <span class="comment">//The IP address of the server for this URL</span></div><div class="line"><a name="l00661"></a><span class="lineno">  661</span>&#160;      <a class="code" href="../../d0/dc8/ip_8c.html#aecdb577de79f65f8c814d5f101c7c6ae">ipAddrToString</a>(&amp;connection-&gt;socket-&gt;localIpAddr, connection-&gt;buffer);</div><div class="line"><a name="l00662"></a><span class="lineno">  662</span>&#160;   }</div><div class="line"><a name="l00663"></a><span class="lineno">  663</span>&#160;   <span class="comment">//Server port?</span></div><div class="line"><a name="l00664"></a><span class="lineno">  664</span>&#160;   <span class="keywordflow">else</span> <span class="keywordflow">if</span>(!<a class="code" href="../../de/dc7/os__port__windows_8h.html#ac99ec3f1036620727a68aa8c25a8963c">strcasecmp</a>(value, <span class="stringliteral">&quot;SERVER_PORT&quot;</span>))</div><div class="line"><a name="l00665"></a><span class="lineno">  665</span>&#160;   {</div><div class="line"><a name="l00666"></a><span class="lineno">  666</span>&#160;      <span class="comment">//The port number on this server to which this request was directed</span></div><div class="line"><a name="l00667"></a><span class="lineno">  667</span>&#160;      sprintf(connection-&gt;buffer, <span class="stringliteral">&quot;%&quot;</span> PRIu16, connection-&gt;socket-&gt;localPort);</div><div class="line"><a name="l00668"></a><span class="lineno">  668</span>&#160;   }</div><div class="line"><a name="l00669"></a><span class="lineno">  669</span>&#160;   <span class="comment">//Request method?</span></div><div class="line"><a name="l00670"></a><span class="lineno">  670</span>&#160;   <span class="keywordflow">else</span> <span class="keywordflow">if</span>(!<a class="code" href="../../de/dc7/os__port__windows_8h.html#ac99ec3f1036620727a68aa8c25a8963c">strcasecmp</a>(value, <span class="stringliteral">&quot;REQUEST_METHOD&quot;</span>))</div><div class="line"><a name="l00671"></a><span class="lineno">  671</span>&#160;   {</div><div class="line"><a name="l00672"></a><span class="lineno">  672</span>&#160;      <span class="comment">//The method used for this HTTP request</span></div><div class="line"><a name="l00673"></a><span class="lineno">  673</span>&#160;      strcpy(connection-&gt;buffer, connection-&gt;request.method);</div><div class="line"><a name="l00674"></a><span class="lineno">  674</span>&#160;   }</div><div class="line"><a name="l00675"></a><span class="lineno">  675</span>&#160;   <span class="comment">//Document root?</span></div><div class="line"><a name="l00676"></a><span class="lineno">  676</span>&#160;   <span class="keywordflow">else</span> <span class="keywordflow">if</span>(!<a class="code" href="../../de/dc7/os__port__windows_8h.html#ac99ec3f1036620727a68aa8c25a8963c">strcasecmp</a>(value, <span class="stringliteral">&quot;DOCUMENT_ROOT&quot;</span>))</div><div class="line"><a name="l00677"></a><span class="lineno">  677</span>&#160;   {</div><div class="line"><a name="l00678"></a><span class="lineno">  678</span>&#160;      <span class="comment">//The root directory</span></div><div class="line"><a name="l00679"></a><span class="lineno">  679</span>&#160;      strcpy(connection-&gt;buffer, connection-&gt;settings-&gt;rootDirectory);</div><div class="line"><a name="l00680"></a><span class="lineno">  680</span>&#160;   }</div><div class="line"><a name="l00681"></a><span class="lineno">  681</span>&#160;   <span class="comment">//Document URI?</span></div><div class="line"><a name="l00682"></a><span class="lineno">  682</span>&#160;   <span class="keywordflow">else</span> <span class="keywordflow">if</span>(!<a class="code" href="../../de/dc7/os__port__windows_8h.html#ac99ec3f1036620727a68aa8c25a8963c">strcasecmp</a>(value, <span class="stringliteral">&quot;DOCUMENT_URI&quot;</span>))</div><div class="line"><a name="l00683"></a><span class="lineno">  683</span>&#160;   {</div><div class="line"><a name="l00684"></a><span class="lineno">  684</span>&#160;      <span class="comment">//The URI for this request relative to the root directory</span></div><div class="line"><a name="l00685"></a><span class="lineno">  685</span>&#160;      strcpy(connection-&gt;buffer, connection-&gt;request.uri);</div><div class="line"><a name="l00686"></a><span class="lineno">  686</span>&#160;   }</div><div class="line"><a name="l00687"></a><span class="lineno">  687</span>&#160;   <span class="comment">//Document name?</span></div><div class="line"><a name="l00688"></a><span class="lineno">  688</span>&#160;   <span class="keywordflow">else</span> <span class="keywordflow">if</span>(!<a class="code" href="../../de/dc7/os__port__windows_8h.html#ac99ec3f1036620727a68aa8c25a8963c">strcasecmp</a>(value, <span class="stringliteral">&quot;DOCUMENT_NAME&quot;</span>))</div><div class="line"><a name="l00689"></a><span class="lineno">  689</span>&#160;   {</div><div class="line"><a name="l00690"></a><span class="lineno">  690</span>&#160;      <span class="comment">//The full physical path and filename of the document requested</span></div><div class="line"><a name="l00691"></a><span class="lineno">  691</span>&#160;      <a class="code" href="../../da/dc3/http__server__misc_8c.html#a34edbde4371909896b60846f2545fbaa">httpGetAbsolutePath</a>(connection, connection-&gt;request.uri,</div><div class="line"><a name="l00692"></a><span class="lineno">  692</span>&#160;         connection-&gt;buffer, <a class="code" href="../../dd/d95/http__server_8h.html#a7323ad0fee234d179bd1f679496174d2">HTTP_SERVER_BUFFER_SIZE</a>);</div><div class="line"><a name="l00693"></a><span class="lineno">  693</span>&#160;   }</div><div class="line"><a name="l00694"></a><span class="lineno">  694</span>&#160;   <span class="comment">//Query string?</span></div><div class="line"><a name="l00695"></a><span class="lineno">  695</span>&#160;   <span class="keywordflow">else</span> <span class="keywordflow">if</span>(!<a class="code" href="../../de/dc7/os__port__windows_8h.html#ac99ec3f1036620727a68aa8c25a8963c">strcasecmp</a>(value, <span class="stringliteral">&quot;QUERY_STRING&quot;</span>))</div><div class="line"><a name="l00696"></a><span class="lineno">  696</span>&#160;   {</div><div class="line"><a name="l00697"></a><span class="lineno">  697</span>&#160;      <span class="comment">//The information following the &quot;?&quot; in the URL for this request</span></div><div class="line"><a name="l00698"></a><span class="lineno">  698</span>&#160;      strcpy(connection-&gt;buffer, connection-&gt;request.queryString);</div><div class="line"><a name="l00699"></a><span class="lineno">  699</span>&#160;   }</div><div class="line"><a name="l00700"></a><span class="lineno">  700</span>&#160;   <span class="comment">//User name?</span></div><div class="line"><a name="l00701"></a><span class="lineno">  701</span>&#160;   <span class="keywordflow">else</span> <span class="keywordflow">if</span>(!<a class="code" href="../../de/dc7/os__port__windows_8h.html#ac99ec3f1036620727a68aa8c25a8963c">strcasecmp</a>(value, <span class="stringliteral">&quot;AUTH_USER&quot;</span>))</div><div class="line"><a name="l00702"></a><span class="lineno">  702</span>&#160;   {</div><div class="line"><a name="l00703"></a><span class="lineno">  703</span>&#160;<span class="preprocessor">#if (HTTP_SERVER_BASIC_AUTH_SUPPORT == ENABLED || HTTP_SERVER_DIGEST_AUTH_SUPPORT == ENABLED)</span></div><div class="line"><a name="l00704"></a><span class="lineno">  704</span>&#160;      <span class="comment">//The username provided by the user to the server</span></div><div class="line"><a name="l00705"></a><span class="lineno">  705</span>&#160;      strcpy(connection-&gt;buffer, connection-&gt;request.auth.user);</div><div class="line"><a name="l00706"></a><span class="lineno">  706</span>&#160;<span class="preprocessor">#else</span></div><div class="line"><a name="l00707"></a><span class="lineno">  707</span>&#160;      <span class="comment">//Basic access authentication is not supported</span></div><div class="line"><a name="l00708"></a><span class="lineno">  708</span>&#160;      connection-&gt;buffer[0] = <span class="charliteral">&#39;\0&#39;</span>;</div><div class="line"><a name="l00709"></a><span class="lineno">  709</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00710"></a><span class="lineno">  710</span>&#160;   }</div><div class="line"><a name="l00711"></a><span class="lineno">  711</span>&#160;   <span class="comment">//GMT time?</span></div><div class="line"><a name="l00712"></a><span class="lineno">  712</span>&#160;   <span class="keywordflow">else</span> <span class="keywordflow">if</span>(!<a class="code" href="../../de/dc7/os__port__windows_8h.html#ac99ec3f1036620727a68aa8c25a8963c">strcasecmp</a>(value, <span class="stringliteral">&quot;DATE_GMT&quot;</span>))</div><div class="line"><a name="l00713"></a><span class="lineno">  713</span>&#160;   {</div><div class="line"><a name="l00714"></a><span class="lineno">  714</span>&#160;      <span class="comment">//The current date and time in Greenwich Mean Time</span></div><div class="line"><a name="l00715"></a><span class="lineno">  715</span>&#160;      connection-&gt;buffer[0] = <span class="charliteral">&#39;\0&#39;</span>;</div><div class="line"><a name="l00716"></a><span class="lineno">  716</span>&#160;   }</div><div class="line"><a name="l00717"></a><span class="lineno">  717</span>&#160;   <span class="comment">//Local time?</span></div><div class="line"><a name="l00718"></a><span class="lineno">  718</span>&#160;   <span class="keywordflow">else</span> <span class="keywordflow">if</span>(!<a class="code" href="../../de/dc7/os__port__windows_8h.html#ac99ec3f1036620727a68aa8c25a8963c">strcasecmp</a>(value, <span class="stringliteral">&quot;DATE_LOCAL&quot;</span>))</div><div class="line"><a name="l00719"></a><span class="lineno">  719</span>&#160;   {</div><div class="line"><a name="l00720"></a><span class="lineno">  720</span>&#160;      <span class="comment">//The current date and time in the local timezone</span></div><div class="line"><a name="l00721"></a><span class="lineno">  721</span>&#160;      connection-&gt;buffer[0] = <span class="charliteral">&#39;\0&#39;</span>;</div><div class="line"><a name="l00722"></a><span class="lineno">  722</span>&#160;   }</div><div class="line"><a name="l00723"></a><span class="lineno">  723</span>&#160;   <span class="comment">//Unknown variable?</span></div><div class="line"><a name="l00724"></a><span class="lineno">  724</span>&#160;   <span class="keywordflow">else</span></div><div class="line"><a name="l00725"></a><span class="lineno">  725</span>&#160;   {</div><div class="line"><a name="l00726"></a><span class="lineno">  726</span>&#160;      <span class="comment">//Report an error</span></div><div class="line"><a name="l00727"></a><span class="lineno">  727</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../da/d41/error_8h.html#ac7659d73a8cdedc08e9f566bb406689caf1442b36897b28194c3faa9d716ff808">ERROR_INVALID_TAG</a>;</div><div class="line"><a name="l00728"></a><span class="lineno">  728</span>&#160;   }</div><div class="line"><a name="l00729"></a><span class="lineno">  729</span>&#160;</div><div class="line"><a name="l00730"></a><span class="lineno">  730</span>&#160;   <span class="comment">//Get the length of the resulting string</span></div><div class="line"><a name="l00731"></a><span class="lineno">  731</span>&#160;   <a class="code" href="../../d3/d25/dtls__misc_8h.html#ab43ca82dd7fa2a0e56f941032ef324c4">length</a> = strlen(connection-&gt;buffer);</div><div class="line"><a name="l00732"></a><span class="lineno">  732</span>&#160;</div><div class="line"><a name="l00733"></a><span class="lineno">  733</span>&#160;   <span class="comment">//Send the contents of the specified environment variable</span></div><div class="line"><a name="l00734"></a><span class="lineno">  734</span>&#160;   error = <a class="code" href="../../da/df4/http__server_8c.html#acb70b948502efdd99db7cf234fcb74db">httpWriteStream</a>(connection, connection-&gt;buffer, <a class="code" href="../../d3/d25/dtls__misc_8h.html#ab43ca82dd7fa2a0e56f941032ef324c4">length</a>);</div><div class="line"><a name="l00735"></a><span class="lineno">  735</span>&#160;   <span class="comment">//Failed to send data?</span></div><div class="line"><a name="l00736"></a><span class="lineno">  736</span>&#160;   <span class="keywordflow">if</span>(error)</div><div class="line"><a name="l00737"></a><span class="lineno">  737</span>&#160;      <span class="keywordflow">return</span> error;</div><div class="line"><a name="l00738"></a><span class="lineno">  738</span>&#160;</div><div class="line"><a name="l00739"></a><span class="lineno">  739</span>&#160;   <span class="comment">//Successful processing</span></div><div class="line"><a name="l00740"></a><span class="lineno">  740</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../da/d41/error_8h.html#ac7659d73a8cdedc08e9f566bb406689cabf350750d0d4fabd8954c0f1e9bbae94">NO_ERROR</a>;</div><div class="line"><a name="l00741"></a><span class="lineno">  741</span>&#160;}</div><div class="ttc" id="compiler__port_8h_html_a40bb5262bf908c328fbcfbe5d29d0201"><div class="ttname"><a href="../../d1/dfa/compiler__port_8h.html#a40bb5262bf908c328fbcfbe5d29d0201">char_t</a></div><div class="ttdeci">char char_t</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dfa/compiler__port_8h_source.html#l00043">compiler_port.h:43</a></div></div>
<div class="ttc" id="http__server_8h_html_a7323ad0fee234d179bd1f679496174d2"><div class="ttname"><a href="../../dd/d95/http__server_8h.html#a7323ad0fee234d179bd1f679496174d2">HTTP_SERVER_BUFFER_SIZE</a></div><div class="ttdeci">#define HTTP_SERVER_BUFFER_SIZE</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d95/http__server_8h_source.html#l00160">http_server.h:160</a></div></div>
<div class="ttc" id="ip_8c_html_aecdb577de79f65f8c814d5f101c7c6ae"><div class="ttname"><a href="../../d0/dc8/ip_8c.html#aecdb577de79f65f8c814d5f101c7c6ae">ipAddrToString</a></div><div class="ttdeci">char_t * ipAddrToString(const IpAddr *ipAddr, char_t *str)</div><div class="ttdoc">Convert a binary IP address to a string representation. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dc8/ip_8c_source.html#l00726">ip.c:726</a></div></div>
<div class="ttc" id="os__port__windows_8h_html_ac99ec3f1036620727a68aa8c25a8963c"><div class="ttname"><a href="../../de/dc7/os__port__windows_8h.html#ac99ec3f1036620727a68aa8c25a8963c">strcasecmp</a></div><div class="ttdeci">#define strcasecmp</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dc7/os__port__windows_8h_source.html#l00152">os_port_windows.h:152</a></div></div>
<div class="ttc" id="http__server__misc_8c_html_a34edbde4371909896b60846f2545fbaa"><div class="ttname"><a href="../../da/dc3/http__server__misc_8c.html#a34edbde4371909896b60846f2545fbaa">httpGetAbsolutePath</a></div><div class="ttdeci">void httpGetAbsolutePath(HttpConnection *connection, const char_t *relative, char_t *absolute, size_t maxLen)</div><div class="ttdoc">Retrieve the full pathname to the specified resource. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/dc3/http__server__misc_8c_source.html#l01070">http_server_misc.c:1070</a></div></div>
<div class="ttc" id="http__server_8c_html_acb70b948502efdd99db7cf234fcb74db"><div class="ttname"><a href="../../da/df4/http__server_8c.html#acb70b948502efdd99db7cf234fcb74db">httpWriteStream</a></div><div class="ttdeci">error_t httpWriteStream(HttpConnection *connection, const void *data, size_t length)</div><div class="ttdoc">Write data to the client. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/df4/http__server_8c_source.html#l00650">http_server.c:650</a></div></div>
<div class="ttc" id="error_8h_html_ac7659d73a8cdedc08e9f566bb406689caf1442b36897b28194c3faa9d716ff808"><div class="ttname"><a href="../../da/d41/error_8h.html#ac7659d73a8cdedc08e9f566bb406689caf1442b36897b28194c3faa9d716ff808">ERROR_INVALID_TAG</a></div><div class="ttdef"><b>Definition:</b> <a href="../../da/d41/error_8h_source.html#l00112">error.h:112</a></div></div>
<div class="ttc" id="error_8h_html_ac7659d73a8cdedc08e9f566bb406689cabf350750d0d4fabd8954c0f1e9bbae94"><div class="ttname"><a href="../../da/d41/error_8h.html#ac7659d73a8cdedc08e9f566bb406689cabf350750d0d4fabd8954c0f1e9bbae94">NO_ERROR</a></div><div class="ttdoc">Success. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/d41/error_8h_source.html#l00044">error.h:44</a></div></div>
<div class="ttc" id="error_8h_html_ac7659d73a8cdedc08e9f566bb406689c"><div class="ttname"><a href="../../da/d41/error_8h.html#ac7659d73a8cdedc08e9f566bb406689c">error_t</a></div><div class="ttdeci">error_t</div><div class="ttdoc">Error codes. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/d41/error_8h_source.html#l00042">error.h:42</a></div></div>
<div class="ttc" id="dtls__misc_8h_html_a74bce8e92ccabd0c885447114a48b80e"><div class="ttname"><a href="../../d3/d25/dtls__misc_8h.html#a74bce8e92ccabd0c885447114a48b80e">value</a></div><div class="ttdeci">uint8_t value[]</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d25/dtls__misc_8h_source.html#l00150">dtls_misc.h:150</a></div></div>
<div class="ttc" id="str_8c_html_ade9441b268416af6b024eb2ba3a5847e"><div class="ttname"><a href="../../df/d5f/str_8c.html#ade9441b268416af6b024eb2ba3a5847e">strTrimWhitespace</a></div><div class="ttdeci">char_t * strTrimWhitespace(char_t *s)</div><div class="ttdoc">Removes all leading and trailing whitespace from a string. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d5f/str_8c_source.html#l00078">str.c:78</a></div></div>
<div class="ttc" id="dtls__misc_8h_html_ab43ca82dd7fa2a0e56f941032ef324c4"><div class="ttname"><a href="../../d3/d25/dtls__misc_8h.html#ab43ca82dd7fa2a0e56f941032ef324c4">length</a></div><div class="ttdeci">uint8_t length</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d25/dtls__misc_8h_source.html#l00149">dtls_misc.h:149</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ae7dfd6aaf6f5636c3ac9ede2923fb42e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae7dfd6aaf6f5636c3ac9ede2923fb42e">&#9670;&nbsp;</a></span>ssiProcessExecCommand()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../da/d41/error_8h.html#ac7659d73a8cdedc08e9f566bb406689c">error_t</a> ssiProcessExecCommand </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../dd/d95/http__server_8h.html#a3506ecffde998ab02629dca83587d2f9">HttpConnection</a> *&#160;</td>
          <td class="paramname"><em>connection</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="../../d1/dfa/compiler__port_8h.html#a40bb5262bf908c328fbcfbe5d29d0201">char_t</a> *&#160;</td>
          <td class="paramname"><em>tag</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>length</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Process SSI exec directive. </p>
<p>This exec directive executes a program, script, or shell command on the server. The cmd parameter specifies a server-side command. The cgi parameter specifies the path to a CGI script</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">connection</td><td>Structure representing an HTTP connection </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">tag</td><td>Pointer to the SSI tag </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">length</td><td>Total length of the SSI tag </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Error code </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../dc/d6b/ssi_8c_source.html#l00757">757</a> of file <a class="el" href="../../dc/d6b/ssi_8c_source.html">ssi.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00758"></a><span class="lineno">  758</span>&#160;{</div><div class="line"><a name="l00759"></a><span class="lineno">  759</span>&#160;   <a class="code" href="../../d1/dfa/compiler__port_8h.html#a40bb5262bf908c328fbcfbe5d29d0201">char_t</a> *separator;</div><div class="line"><a name="l00760"></a><span class="lineno">  760</span>&#160;   <a class="code" href="../../d1/dfa/compiler__port_8h.html#a40bb5262bf908c328fbcfbe5d29d0201">char_t</a> *attribute;</div><div class="line"><a name="l00761"></a><span class="lineno">  761</span>&#160;   <a class="code" href="../../d1/dfa/compiler__port_8h.html#a40bb5262bf908c328fbcfbe5d29d0201">char_t</a> *<a class="code" href="../../d3/d25/dtls__misc_8h.html#a74bce8e92ccabd0c885447114a48b80e">value</a>;</div><div class="line"><a name="l00762"></a><span class="lineno">  762</span>&#160;</div><div class="line"><a name="l00763"></a><span class="lineno">  763</span>&#160;   <span class="comment">//First, check whether CGI is supported by the server</span></div><div class="line"><a name="l00764"></a><span class="lineno">  764</span>&#160;   <span class="keywordflow">if</span>(connection-&gt;settings-&gt;cgiCallback == <a class="code" href="../../de/da2/group__BSPDefine.html#ga070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)</div><div class="line"><a name="l00765"></a><span class="lineno">  765</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../da/d41/error_8h.html#ac7659d73a8cdedc08e9f566bb406689caf1442b36897b28194c3faa9d716ff808">ERROR_INVALID_TAG</a>;</div><div class="line"><a name="l00766"></a><span class="lineno">  766</span>&#160;</div><div class="line"><a name="l00767"></a><span class="lineno">  767</span>&#160;   <span class="comment">//Discard invalid SSI directives</span></div><div class="line"><a name="l00768"></a><span class="lineno">  768</span>&#160;   <span class="keywordflow">if</span>(length &lt; 4 || length &gt;= <a class="code" href="../../dd/d95/http__server_8h.html#a7323ad0fee234d179bd1f679496174d2">HTTP_SERVER_BUFFER_SIZE</a>)</div><div class="line"><a name="l00769"></a><span class="lineno">  769</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../da/d41/error_8h.html#ac7659d73a8cdedc08e9f566bb406689caf1442b36897b28194c3faa9d716ff808">ERROR_INVALID_TAG</a>;</div><div class="line"><a name="l00770"></a><span class="lineno">  770</span>&#160;</div><div class="line"><a name="l00771"></a><span class="lineno">  771</span>&#160;   <span class="comment">//Skip the SSI exec command (4 bytes)</span></div><div class="line"><a name="l00772"></a><span class="lineno">  772</span>&#160;   memcpy(connection-&gt;buffer, tag + 4, <a class="code" href="../../d3/d25/dtls__misc_8h.html#ab43ca82dd7fa2a0e56f941032ef324c4">length</a> - 4);</div><div class="line"><a name="l00773"></a><span class="lineno">  773</span>&#160;   <span class="comment">//Ensure the resulting string is NULL-terminated</span></div><div class="line"><a name="l00774"></a><span class="lineno">  774</span>&#160;   connection-&gt;buffer[<a class="code" href="../../d3/d25/dtls__misc_8h.html#ab43ca82dd7fa2a0e56f941032ef324c4">length</a> - 4] = <span class="charliteral">&#39;\0&#39;</span>;</div><div class="line"><a name="l00775"></a><span class="lineno">  775</span>&#160;</div><div class="line"><a name="l00776"></a><span class="lineno">  776</span>&#160;   <span class="comment">//Check whether a separator is present</span></div><div class="line"><a name="l00777"></a><span class="lineno">  777</span>&#160;   separator = strchr(connection-&gt;buffer, <span class="charliteral">&#39;=&#39;</span>);</div><div class="line"><a name="l00778"></a><span class="lineno">  778</span>&#160;   <span class="comment">//Separator not found?</span></div><div class="line"><a name="l00779"></a><span class="lineno">  779</span>&#160;   <span class="keywordflow">if</span>(!separator)</div><div class="line"><a name="l00780"></a><span class="lineno">  780</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../da/d41/error_8h.html#ac7659d73a8cdedc08e9f566bb406689caf1442b36897b28194c3faa9d716ff808">ERROR_INVALID_TAG</a>;</div><div class="line"><a name="l00781"></a><span class="lineno">  781</span>&#160;</div><div class="line"><a name="l00782"></a><span class="lineno">  782</span>&#160;   <span class="comment">//Split the tag</span></div><div class="line"><a name="l00783"></a><span class="lineno">  783</span>&#160;   *separator = <span class="charliteral">&#39;\0&#39;</span>;</div><div class="line"><a name="l00784"></a><span class="lineno">  784</span>&#160;</div><div class="line"><a name="l00785"></a><span class="lineno">  785</span>&#160;   <span class="comment">//Get attribute name and value</span></div><div class="line"><a name="l00786"></a><span class="lineno">  786</span>&#160;   attribute = <a class="code" href="../../df/d5f/str_8c.html#ade9441b268416af6b024eb2ba3a5847e">strTrimWhitespace</a>(connection-&gt;buffer);</div><div class="line"><a name="l00787"></a><span class="lineno">  787</span>&#160;   value = <a class="code" href="../../df/d5f/str_8c.html#ade9441b268416af6b024eb2ba3a5847e">strTrimWhitespace</a>(separator + 1);</div><div class="line"><a name="l00788"></a><span class="lineno">  788</span>&#160;</div><div class="line"><a name="l00789"></a><span class="lineno">  789</span>&#160;   <span class="comment">//Remove leading simple or double quote</span></div><div class="line"><a name="l00790"></a><span class="lineno">  790</span>&#160;   <span class="keywordflow">if</span>(value[0] == <span class="charliteral">&#39;\&#39;&#39;</span> || value[0] == <span class="charliteral">&#39;\&quot;&#39;</span>)</div><div class="line"><a name="l00791"></a><span class="lineno">  791</span>&#160;      value++;</div><div class="line"><a name="l00792"></a><span class="lineno">  792</span>&#160;</div><div class="line"><a name="l00793"></a><span class="lineno">  793</span>&#160;   <span class="comment">//Get the length of the attribute value</span></div><div class="line"><a name="l00794"></a><span class="lineno">  794</span>&#160;   <a class="code" href="../../d3/d25/dtls__misc_8h.html#ab43ca82dd7fa2a0e56f941032ef324c4">length</a> = strlen(value);</div><div class="line"><a name="l00795"></a><span class="lineno">  795</span>&#160;</div><div class="line"><a name="l00796"></a><span class="lineno">  796</span>&#160;   <span class="comment">//Remove trailing simple or double quote</span></div><div class="line"><a name="l00797"></a><span class="lineno">  797</span>&#160;   <span class="keywordflow">if</span>(<a class="code" href="../../d3/d25/dtls__misc_8h.html#ab43ca82dd7fa2a0e56f941032ef324c4">length</a> &gt; 0)</div><div class="line"><a name="l00798"></a><span class="lineno">  798</span>&#160;   {</div><div class="line"><a name="l00799"></a><span class="lineno">  799</span>&#160;      <span class="keywordflow">if</span>(value[<a class="code" href="../../d3/d25/dtls__misc_8h.html#ab43ca82dd7fa2a0e56f941032ef324c4">length</a> - 1] == <span class="charliteral">&#39;\&#39;&#39;</span> || value[<a class="code" href="../../d3/d25/dtls__misc_8h.html#ab43ca82dd7fa2a0e56f941032ef324c4">length</a> - 1] == <span class="charliteral">&#39;\&quot;&#39;</span>)</div><div class="line"><a name="l00800"></a><span class="lineno">  800</span>&#160;         value[<a class="code" href="../../d3/d25/dtls__misc_8h.html#ab43ca82dd7fa2a0e56f941032ef324c4">length</a> - 1] = <span class="charliteral">&#39;\0&#39;</span>;</div><div class="line"><a name="l00801"></a><span class="lineno">  801</span>&#160;   }</div><div class="line"><a name="l00802"></a><span class="lineno">  802</span>&#160;</div><div class="line"><a name="l00803"></a><span class="lineno">  803</span>&#160;   <span class="comment">//Enforce attribute name</span></div><div class="line"><a name="l00804"></a><span class="lineno">  804</span>&#160;   <span class="keywordflow">if</span>(<a class="code" href="../../de/dc7/os__port__windows_8h.html#ac99ec3f1036620727a68aa8c25a8963c">strcasecmp</a>(attribute, <span class="stringliteral">&quot;cgi&quot;</span>) &amp;&amp; <a class="code" href="../../de/dc7/os__port__windows_8h.html#ac99ec3f1036620727a68aa8c25a8963c">strcasecmp</a>(attribute, <span class="stringliteral">&quot;cmd&quot;</span>) &amp;&amp; <a class="code" href="../../de/dc7/os__port__windows_8h.html#ac99ec3f1036620727a68aa8c25a8963c">strcasecmp</a>(attribute, <span class="stringliteral">&quot;cmd_argument&quot;</span>))</div><div class="line"><a name="l00805"></a><span class="lineno">  805</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../da/d41/error_8h.html#ac7659d73a8cdedc08e9f566bb406689caf1442b36897b28194c3faa9d716ff808">ERROR_INVALID_TAG</a>;</div><div class="line"><a name="l00806"></a><span class="lineno">  806</span>&#160;   <span class="comment">//Check the length of the CGI parameter</span></div><div class="line"><a name="l00807"></a><span class="lineno">  807</span>&#160;   <span class="keywordflow">if</span>(strlen(value) &gt; <a class="code" href="../../dd/d95/http__server_8h.html#a4a3fc828d1b1db329b49b1f339eb06fe">HTTP_SERVER_CGI_PARAM_MAX_LEN</a>)</div><div class="line"><a name="l00808"></a><span class="lineno">  808</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../da/d41/error_8h.html#ac7659d73a8cdedc08e9f566bb406689caf1442b36897b28194c3faa9d716ff808">ERROR_INVALID_TAG</a>;</div><div class="line"><a name="l00809"></a><span class="lineno">  809</span>&#160;</div><div class="line"><a name="l00810"></a><span class="lineno">  810</span>&#160;   <span class="comment">//The scratch buffer may be altered by the user-defined callback.</span></div><div class="line"><a name="l00811"></a><span class="lineno">  811</span>&#160;   <span class="comment">//So the CGI parameter must be copied prior to function invocation</span></div><div class="line"><a name="l00812"></a><span class="lineno">  812</span>&#160;   strcpy(connection-&gt;cgiParam, value);</div><div class="line"><a name="l00813"></a><span class="lineno">  813</span>&#160;</div><div class="line"><a name="l00814"></a><span class="lineno">  814</span>&#160;   <span class="comment">//Invoke user-defined callback</span></div><div class="line"><a name="l00815"></a><span class="lineno">  815</span>&#160;   <span class="keywordflow">return</span> connection-&gt;settings-&gt;cgiCallback(connection, connection-&gt;cgiParam);</div><div class="line"><a name="l00816"></a><span class="lineno">  816</span>&#160;}</div><div class="ttc" id="http__server_8h_html_a4a3fc828d1b1db329b49b1f339eb06fe"><div class="ttname"><a href="../../dd/d95/http__server_8h.html#a4a3fc828d1b1db329b49b1f339eb06fe">HTTP_SERVER_CGI_PARAM_MAX_LEN</a></div><div class="ttdeci">#define HTTP_SERVER_CGI_PARAM_MAX_LEN</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d95/http__server_8h_source.html#l00216">http_server.h:216</a></div></div>
<div class="ttc" id="compiler__port_8h_html_a40bb5262bf908c328fbcfbe5d29d0201"><div class="ttname"><a href="../../d1/dfa/compiler__port_8h.html#a40bb5262bf908c328fbcfbe5d29d0201">char_t</a></div><div class="ttdeci">char char_t</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dfa/compiler__port_8h_source.html#l00043">compiler_port.h:43</a></div></div>
<div class="ttc" id="http__server_8h_html_a7323ad0fee234d179bd1f679496174d2"><div class="ttname"><a href="../../dd/d95/http__server_8h.html#a7323ad0fee234d179bd1f679496174d2">HTTP_SERVER_BUFFER_SIZE</a></div><div class="ttdeci">#define HTTP_SERVER_BUFFER_SIZE</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d95/http__server_8h_source.html#l00160">http_server.h:160</a></div></div>
<div class="ttc" id="group__BSPDefine_html_ga070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../de/da2/group__BSPDefine.html#ga070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d6b/nm__bsp_8h_source.html#l00070">nm_bsp.h:70</a></div></div>
<div class="ttc" id="os__port__windows_8h_html_ac99ec3f1036620727a68aa8c25a8963c"><div class="ttname"><a href="../../de/dc7/os__port__windows_8h.html#ac99ec3f1036620727a68aa8c25a8963c">strcasecmp</a></div><div class="ttdeci">#define strcasecmp</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dc7/os__port__windows_8h_source.html#l00152">os_port_windows.h:152</a></div></div>
<div class="ttc" id="error_8h_html_ac7659d73a8cdedc08e9f566bb406689caf1442b36897b28194c3faa9d716ff808"><div class="ttname"><a href="../../da/d41/error_8h.html#ac7659d73a8cdedc08e9f566bb406689caf1442b36897b28194c3faa9d716ff808">ERROR_INVALID_TAG</a></div><div class="ttdef"><b>Definition:</b> <a href="../../da/d41/error_8h_source.html#l00112">error.h:112</a></div></div>
<div class="ttc" id="dtls__misc_8h_html_a74bce8e92ccabd0c885447114a48b80e"><div class="ttname"><a href="../../d3/d25/dtls__misc_8h.html#a74bce8e92ccabd0c885447114a48b80e">value</a></div><div class="ttdeci">uint8_t value[]</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d25/dtls__misc_8h_source.html#l00150">dtls_misc.h:150</a></div></div>
<div class="ttc" id="str_8c_html_ade9441b268416af6b024eb2ba3a5847e"><div class="ttname"><a href="../../df/d5f/str_8c.html#ade9441b268416af6b024eb2ba3a5847e">strTrimWhitespace</a></div><div class="ttdeci">char_t * strTrimWhitespace(char_t *s)</div><div class="ttdoc">Removes all leading and trailing whitespace from a string. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d5f/str_8c_source.html#l00078">str.c:78</a></div></div>
<div class="ttc" id="dtls__misc_8h_html_ab43ca82dd7fa2a0e56f941032ef324c4"><div class="ttname"><a href="../../d3/d25/dtls__misc_8h.html#ab43ca82dd7fa2a0e56f941032ef324c4">length</a></div><div class="ttdeci">uint8_t length</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d25/dtls__misc_8h_source.html#l00149">dtls_misc.h:149</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ae023dd9991e79b7c622a4e12cd4bbe34"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae023dd9991e79b7c622a4e12cd4bbe34">&#9670;&nbsp;</a></span>ssiProcessIncludeCommand()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../da/d41/error_8h.html#ac7659d73a8cdedc08e9f566bb406689c">error_t</a> ssiProcessIncludeCommand </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../dd/d95/http__server_8h.html#a3506ecffde998ab02629dca83587d2f9">HttpConnection</a> *&#160;</td>
          <td class="paramname"><em>connection</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="../../d1/dfa/compiler__port_8h.html#a40bb5262bf908c328fbcfbe5d29d0201">char_t</a> *&#160;</td>
          <td class="paramname"><em>tag</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>length</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="../../d1/dfa/compiler__port_8h.html#a40bb5262bf908c328fbcfbe5d29d0201">char_t</a> *&#160;</td>
          <td class="paramname"><em>uri</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d1/dfa/compiler__port_8h.html#a12a1e9b3ce141648783a82445d02b58d">uint_t</a>&#160;</td>
          <td class="paramname"><em>level</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Process SSI include directive. </p>
<p>This include directive allows the content of one document to be included in another. The file parameter defines the included file as relative to the document path. The virtual parameter defines the included file as relative to the document root</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">connection</td><td>Structure representing an HTTP connection </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">tag</td><td>Pointer to the SSI tag </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">length</td><td>Total length of the SSI tag </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">uri</td><td>NULL-terminated string containing the file being processed </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">level</td><td>Current level of recursion </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Error code </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../dc/d6b/ssi_8c_source.html#l00422">422</a> of file <a class="el" href="../../dc/d6b/ssi_8c_source.html">ssi.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;{</div><div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;   <a class="code" href="../../da/d41/error_8h.html#ac7659d73a8cdedc08e9f566bb406689c">error_t</a> error;</div><div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;   <a class="code" href="../../d1/dfa/compiler__port_8h.html#a40bb5262bf908c328fbcfbe5d29d0201">char_t</a> *separator;</div><div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;   <a class="code" href="../../d1/dfa/compiler__port_8h.html#a40bb5262bf908c328fbcfbe5d29d0201">char_t</a> *attribute;</div><div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;   <a class="code" href="../../d1/dfa/compiler__port_8h.html#a40bb5262bf908c328fbcfbe5d29d0201">char_t</a> *<a class="code" href="../../d3/d25/dtls__misc_8h.html#a74bce8e92ccabd0c885447114a48b80e">value</a>;</div><div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;   <a class="code" href="../../d1/dfa/compiler__port_8h.html#a40bb5262bf908c328fbcfbe5d29d0201">char_t</a> *path;</div><div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;   <a class="code" href="../../d1/dfa/compiler__port_8h.html#a40bb5262bf908c328fbcfbe5d29d0201">char_t</a> *<a class="code" href="../../d3/d8d/ndp_8h.html#a6519522ad9a6f45e7a8d25d31392a977">p</a>;</div><div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;</div><div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;   <span class="comment">//Discard invalid SSI directives</span></div><div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;   <span class="keywordflow">if</span>(length &lt; 7 || length &gt;= <a class="code" href="../../dd/d95/http__server_8h.html#a7323ad0fee234d179bd1f679496174d2">HTTP_SERVER_BUFFER_SIZE</a>)</div><div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../da/d41/error_8h.html#ac7659d73a8cdedc08e9f566bb406689caf1442b36897b28194c3faa9d716ff808">ERROR_INVALID_TAG</a>;</div><div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;</div><div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;   <span class="comment">//Skip the SSI include command (7 bytes)</span></div><div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;   memcpy(connection-&gt;buffer, tag + 7, <a class="code" href="../../d3/d25/dtls__misc_8h.html#ab43ca82dd7fa2a0e56f941032ef324c4">length</a> - 7);</div><div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;   <span class="comment">//Ensure the resulting string is NULL-terminated</span></div><div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;   connection-&gt;buffer[<a class="code" href="../../d3/d25/dtls__misc_8h.html#ab43ca82dd7fa2a0e56f941032ef324c4">length</a> - 7] = <span class="charliteral">&#39;\0&#39;</span>;</div><div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;</div><div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;   <span class="comment">//Check whether a separator is present</span></div><div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;   separator = strchr(connection-&gt;buffer, <span class="charliteral">&#39;=&#39;</span>);</div><div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;   <span class="comment">//Separator not found?</span></div><div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;   <span class="keywordflow">if</span>(!separator)</div><div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../da/d41/error_8h.html#ac7659d73a8cdedc08e9f566bb406689caf1442b36897b28194c3faa9d716ff808">ERROR_INVALID_TAG</a>;</div><div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;</div><div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;   <span class="comment">//Split the tag</span></div><div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;   *separator = <span class="charliteral">&#39;\0&#39;</span>;</div><div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;</div><div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;   <span class="comment">//Get attribute name and value</span></div><div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;   attribute = <a class="code" href="../../df/d5f/str_8c.html#ade9441b268416af6b024eb2ba3a5847e">strTrimWhitespace</a>(connection-&gt;buffer);</div><div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;   value = <a class="code" href="../../df/d5f/str_8c.html#ade9441b268416af6b024eb2ba3a5847e">strTrimWhitespace</a>(separator + 1);</div><div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;</div><div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;   <span class="comment">//Remove leading simple or double quote</span></div><div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;   <span class="keywordflow">if</span>(value[0] == <span class="charliteral">&#39;\&#39;&#39;</span> || value[0] == <span class="charliteral">&#39;\&quot;&#39;</span>)</div><div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;      value++;</div><div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;</div><div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;   <span class="comment">//Get the length of the attribute value</span></div><div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;   <a class="code" href="../../d3/d25/dtls__misc_8h.html#ab43ca82dd7fa2a0e56f941032ef324c4">length</a> = strlen(value);</div><div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;</div><div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;   <span class="comment">//Remove trailing simple or double quote</span></div><div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;   <span class="keywordflow">if</span>(<a class="code" href="../../d3/d25/dtls__misc_8h.html#ab43ca82dd7fa2a0e56f941032ef324c4">length</a> &gt; 0)</div><div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;   {</div><div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;      <span class="keywordflow">if</span>(value[<a class="code" href="../../d3/d25/dtls__misc_8h.html#ab43ca82dd7fa2a0e56f941032ef324c4">length</a> - 1] == <span class="charliteral">&#39;\&#39;&#39;</span> || value[<a class="code" href="../../d3/d25/dtls__misc_8h.html#ab43ca82dd7fa2a0e56f941032ef324c4">length</a> - 1] == <span class="charliteral">&#39;\&quot;&#39;</span>)</div><div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;         value[<a class="code" href="../../d3/d25/dtls__misc_8h.html#ab43ca82dd7fa2a0e56f941032ef324c4">length</a> - 1] = <span class="charliteral">&#39;\0&#39;</span>;</div><div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;   }</div><div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;</div><div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;   <span class="comment">//Check the length of the filename</span></div><div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;   <span class="keywordflow">if</span>(strlen(value) &gt; <a class="code" href="../../dd/d95/http__server_8h.html#aad636f905c4ba1aa4f135adbada5a70b">HTTP_SERVER_URI_MAX_LEN</a>)</div><div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../da/d41/error_8h.html#ac7659d73a8cdedc08e9f566bb406689caf1442b36897b28194c3faa9d716ff808">ERROR_INVALID_TAG</a>;</div><div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;</div><div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;   <span class="comment">//The file parameter defines the included file as relative to the document path</span></div><div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;   <span class="keywordflow">if</span>(!<a class="code" href="../../de/dc7/os__port__windows_8h.html#ac99ec3f1036620727a68aa8c25a8963c">strcasecmp</a>(attribute, <span class="stringliteral">&quot;file&quot;</span>))</div><div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;   {</div><div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;      <span class="comment">//Allocate a buffer to hold the path to the file to be included</span></div><div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;      path = <a class="code" href="../../dd/d0d/os__port__chibios_8c.html#ae86758dcd9fc3c98247ae19815987c9a">osAllocMem</a>(strlen(uri) + strlen(value) + 1);</div><div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;      <span class="comment">//Failed to allocate memory?</span></div><div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;      <span class="keywordflow">if</span>(path == <a class="code" href="../../de/da2/group__BSPDefine.html#ga070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)</div><div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;         <span class="keywordflow">return</span> <a class="code" href="../../da/d41/error_8h.html#ac7659d73a8cdedc08e9f566bb406689cac0a554045048d2fb61387cf735676f69">ERROR_OUT_OF_MEMORY</a>;</div><div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;</div><div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;      <span class="comment">//Copy the path identifying the script file being processed</span></div><div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;      strcpy(path, uri);</div><div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;      <span class="comment">//Search for the last slash character</span></div><div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;      p = strrchr(path, <span class="charliteral">&#39;/&#39;</span>);</div><div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;</div><div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;      <span class="comment">//Remove the filename from the path if applicable</span></div><div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;      <span class="keywordflow">if</span>(p)</div><div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;         strcpy(p + 1, value);</div><div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;      <span class="keywordflow">else</span></div><div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;         strcpy(path, value);</div><div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;   }</div><div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;   <span class="comment">//The virtual parameter defines the included file as relative to the document root</span></div><div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;   <span class="keywordflow">else</span> <span class="keywordflow">if</span>(!<a class="code" href="../../de/dc7/os__port__windows_8h.html#ac99ec3f1036620727a68aa8c25a8963c">strcasecmp</a>(attribute, <span class="stringliteral">&quot;virtual&quot;</span>))</div><div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;   {</div><div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;      <span class="comment">//Copy the absolute path</span></div><div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;      path = <a class="code" href="../../df/d5f/str_8c.html#a9006c65380cbc2ab5e7e02e57c8d3d4e">strDuplicate</a>(value);</div><div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;      <span class="comment">//Failed to duplicate the string?</span></div><div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;      <span class="keywordflow">if</span>(path == <a class="code" href="../../de/da2/group__BSPDefine.html#ga070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)</div><div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;         <span class="keywordflow">return</span> <a class="code" href="../../da/d41/error_8h.html#ac7659d73a8cdedc08e9f566bb406689cac0a554045048d2fb61387cf735676f69">ERROR_OUT_OF_MEMORY</a>;</div><div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;   }</div><div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;   <span class="comment">//Unknown parameter...</span></div><div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;   <span class="keywordflow">else</span></div><div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;   {</div><div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;      <span class="comment">//Report an error</span></div><div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../da/d41/error_8h.html#ac7659d73a8cdedc08e9f566bb406689caf1442b36897b28194c3faa9d716ff808">ERROR_INVALID_TAG</a>;</div><div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;   }</div><div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;</div><div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;   <span class="comment">//Use server-side scripting to dynamically generate HTML code?</span></div><div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;   <span class="keywordflow">if</span>(<a class="code" href="../../da/dc3/http__server__misc_8c.html#aebda8c10016605385b6958ff384013aa">httpCompExtension</a>(value, <span class="stringliteral">&quot;.stm&quot;</span>) ||</div><div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;      <a class="code" href="../../da/dc3/http__server__misc_8c.html#aebda8c10016605385b6958ff384013aa">httpCompExtension</a>(value, <span class="stringliteral">&quot;.shtm&quot;</span>) ||</div><div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;      <a class="code" href="../../da/dc3/http__server__misc_8c.html#aebda8c10016605385b6958ff384013aa">httpCompExtension</a>(value, <span class="stringliteral">&quot;.shtml&quot;</span>))</div><div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;   {</div><div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;      <span class="comment">//SSI processing (Server Side Includes)</span></div><div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;      error = <a class="code" href="../../dc/d6b/ssi_8c.html#afe14b7f41b8507b8d8c7d35dca53b2a4">ssiExecuteScript</a>(connection, path, <a class="code" href="../../df/d79/tls_8h.html#abbb6c7c49508c1ac374683f2d1159e08">level</a> + 1);</div><div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;   }</div><div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;   <span class="keywordflow">else</span></div><div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;   {</div><div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;<span class="preprocessor">#if (HTTP_SERVER_FS_SUPPORT == ENABLED)</span></div><div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;      <a class="code" href="../../de/d1d/fs__port__fatfs_8h.html#a913e2a93cbf8ed241fe05fb6abc3f316">FsFile</a> *<a class="code" href="../../d0/d63/dhcp__common_8h.html#a5c7003134e7a7486271d4f33c2e7b7de">file</a>;</div><div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;</div><div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;      <span class="comment">//Retrieve the full pathname</span></div><div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;      <a class="code" href="../../da/dc3/http__server__misc_8c.html#a34edbde4371909896b60846f2545fbaa">httpGetAbsolutePath</a>(connection, path,</div><div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;         connection-&gt;buffer, <a class="code" href="../../dd/d95/http__server_8h.html#a7323ad0fee234d179bd1f679496174d2">HTTP_SERVER_BUFFER_SIZE</a>);</div><div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;</div><div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;      <span class="comment">//Open the file for reading</span></div><div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;      file = <a class="code" href="../../d3/dad/fs__port__fatfs_8c.html#aba7fcc4f174dcf4652a8b84cdfff22b5">fsOpenFile</a>(connection-&gt;buffer, <a class="code" href="../../d9/d2e/fs__port_8h.html#a086887b0800535e5a06340d3fc76c51cadf6c1e1805f97fa4f535acbdc2d943db">FS_FILE_MODE_READ</a>);</div><div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;</div><div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;      <span class="comment">//Successful operation?</span></div><div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;      <span class="keywordflow">if</span>(file)</div><div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;      {</div><div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;         <span class="comment">//Send the contents of the requested file</span></div><div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;         <span class="keywordflow">while</span>(1)</div><div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;         {</div><div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;            <span class="comment">//Read data from the specified file</span></div><div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;            error = <a class="code" href="../../d3/dad/fs__port__fatfs_8c.html#af802c67ab60bcc6273bcc65a967d99ab">fsReadFile</a>(file, connection-&gt;buffer, <a class="code" href="../../dd/d95/http__server_8h.html#a7323ad0fee234d179bd1f679496174d2">HTTP_SERVER_BUFFER_SIZE</a>, &amp;<a class="code" href="../../d3/d25/dtls__misc_8h.html#ab43ca82dd7fa2a0e56f941032ef324c4">length</a>);</div><div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;            <span class="comment">//End of input stream?</span></div><div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;            <span class="keywordflow">if</span>(error)</div><div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;               <span class="keywordflow">break</span>;</div><div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;</div><div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160;            <span class="comment">//Send data to the client</span></div><div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;            error = <a class="code" href="../../da/df4/http__server_8c.html#acb70b948502efdd99db7cf234fcb74db">httpWriteStream</a>(connection, connection-&gt;buffer, <a class="code" href="../../d3/d25/dtls__misc_8h.html#ab43ca82dd7fa2a0e56f941032ef324c4">length</a>);</div><div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;            <span class="comment">//Any error to report?</span></div><div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;            <span class="keywordflow">if</span>(error)</div><div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;               <span class="keywordflow">break</span>;</div><div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;         }</div><div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160;</div><div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;         <span class="comment">//Close the file</span></div><div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160;         <a class="code" href="../../d3/dad/fs__port__fatfs_8c.html#a563173066eb2924f61e00e87fbf9d0bc">fsCloseFile</a>(file);</div><div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;</div><div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;         <span class="comment">//Successful file transfer?</span></div><div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160;         <span class="keywordflow">if</span>(error == <a class="code" href="../../da/d41/error_8h.html#ac7659d73a8cdedc08e9f566bb406689ca488b657f8cc2e6c29df47f282e8ff3ad">ERROR_END_OF_FILE</a>)</div><div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;            error = <a class="code" href="../../da/d41/error_8h.html#ac7659d73a8cdedc08e9f566bb406689cabf350750d0d4fabd8954c0f1e9bbae94">NO_ERROR</a>;</div><div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;      }</div><div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;      <span class="keywordflow">else</span></div><div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;      {</div><div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;         <span class="comment">//The specified URI cannot be found</span></div><div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;         error = <a class="code" href="../../da/d41/error_8h.html#ac7659d73a8cdedc08e9f566bb406689ca4cca37264afee88cb14cd105f0d59607">ERROR_NOT_FOUND</a>;</div><div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;      }</div><div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;<span class="preprocessor">#else</span></div><div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;      <span class="keyword">const</span> <a class="code" href="../../df/dd8/stdint_8h.html#aba7bc1797add20fe3efdf37ced1182c5">uint8_t</a> *<a class="code" href="../../d3/d25/dtls__misc_8h.html#a5c239a1bb87b52b0f1d6d68c4749cd2a">data</a>;</div><div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;</div><div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;      <span class="comment">//Retrieve the full pathname</span></div><div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;      <a class="code" href="../../da/dc3/http__server__misc_8c.html#a34edbde4371909896b60846f2545fbaa">httpGetAbsolutePath</a>(connection, path,</div><div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;         connection-&gt;buffer, <a class="code" href="../../dd/d95/http__server_8h.html#a7323ad0fee234d179bd1f679496174d2">HTTP_SERVER_BUFFER_SIZE</a>);</div><div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;</div><div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;      <span class="comment">//Get the resource data associated with the file</span></div><div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;      error = <a class="code" href="../../d2/d71/resource__manager_8c.html#a0fe55f3dce16ce80683cae543c61f22c">resGetData</a>(connection-&gt;buffer, &amp;data, &amp;<a class="code" href="../../d3/d25/dtls__misc_8h.html#ab43ca82dd7fa2a0e56f941032ef324c4">length</a>);</div><div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160;</div><div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;      <span class="comment">//Send the contents of the requested file</span></div><div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160;      <span class="keywordflow">if</span>(!error)</div><div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;         error = <a class="code" href="../../da/df4/http__server_8c.html#acb70b948502efdd99db7cf234fcb74db">httpWriteStream</a>(connection, data, <a class="code" href="../../d3/d25/dtls__misc_8h.html#ab43ca82dd7fa2a0e56f941032ef324c4">length</a>);</div><div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;   }</div><div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160;</div><div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160;   <span class="comment">//Cannot found the specified resource?</span></div><div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;   <span class="keywordflow">if</span>(error == <a class="code" href="../../da/d41/error_8h.html#ac7659d73a8cdedc08e9f566bb406689ca4cca37264afee88cb14cd105f0d59607">ERROR_NOT_FOUND</a>)</div><div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;      error = <a class="code" href="../../da/d41/error_8h.html#ac7659d73a8cdedc08e9f566bb406689caf1442b36897b28194c3faa9d716ff808">ERROR_INVALID_TAG</a>;</div><div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;</div><div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160;   <span class="comment">//Release previously allocated memory</span></div><div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;   <a class="code" href="../../dd/d0d/os__port__chibios_8c.html#a68e4fa4326f2031eab28b92a25f2d68d">osFreeMem</a>(path);</div><div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160;   <span class="comment">//return status code</span></div><div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;   <span class="keywordflow">return</span> error;</div><div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160;}</div><div class="ttc" id="compiler__port_8h_html_a40bb5262bf908c328fbcfbe5d29d0201"><div class="ttname"><a href="../../d1/dfa/compiler__port_8h.html#a40bb5262bf908c328fbcfbe5d29d0201">char_t</a></div><div class="ttdeci">char char_t</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dfa/compiler__port_8h_source.html#l00043">compiler_port.h:43</a></div></div>
<div class="ttc" id="os__port__chibios_8c_html_a68e4fa4326f2031eab28b92a25f2d68d"><div class="ttname"><a href="../../dd/d0d/os__port__chibios_8c.html#a68e4fa4326f2031eab28b92a25f2d68d">osFreeMem</a></div><div class="ttdeci">void osFreeMem(void *p)</div><div class="ttdoc">Release a previously allocated memory block. </div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d0d/os__port__chibios_8c_source.html#l00529">os_port_chibios.c:529</a></div></div>
<div class="ttc" id="ndp_8h_html_a6519522ad9a6f45e7a8d25d31392a977"><div class="ttname"><a href="../../d3/d8d/ndp_8h.html#a6519522ad9a6f45e7a8d25d31392a977">p</a></div><div class="ttdeci">uint8_t p</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d8d/ndp_8h_source.html#l00298">ndp.h:298</a></div></div>
<div class="ttc" id="ssi_8c_html_afe14b7f41b8507b8d8c7d35dca53b2a4"><div class="ttname"><a href="../../dc/d6b/ssi_8c.html#afe14b7f41b8507b8d8c7d35dca53b2a4">ssiExecuteScript</a></div><div class="ttdeci">error_t ssiExecuteScript(HttpConnection *connection, const char_t *uri, uint_t level)</div><div class="ttdoc">Execute SSI script. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d6b/ssi_8c_source.html#l00067">ssi.c:67</a></div></div>
<div class="ttc" id="http__server_8h_html_a7323ad0fee234d179bd1f679496174d2"><div class="ttname"><a href="../../dd/d95/http__server_8h.html#a7323ad0fee234d179bd1f679496174d2">HTTP_SERVER_BUFFER_SIZE</a></div><div class="ttdeci">#define HTTP_SERVER_BUFFER_SIZE</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d95/http__server_8h_source.html#l00160">http_server.h:160</a></div></div>
<div class="ttc" id="fs__port__fatfs_8c_html_af802c67ab60bcc6273bcc65a967d99ab"><div class="ttname"><a href="../../d3/dad/fs__port__fatfs_8c.html#af802c67ab60bcc6273bcc65a967d99ab">fsReadFile</a></div><div class="ttdeci">error_t fsReadFile(FsFile *file, void *data, size_t size, size_t *length)</div><div class="ttdoc">Read data from the specified file. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dad/fs__port__fatfs_8c_source.html#l00481">fs_port_fatfs.c:481</a></div></div>
<div class="ttc" id="error_8h_html_ac7659d73a8cdedc08e9f566bb406689ca488b657f8cc2e6c29df47f282e8ff3ad"><div class="ttname"><a href="../../da/d41/error_8h.html#ac7659d73a8cdedc08e9f566bb406689ca488b657f8cc2e6c29df47f282e8ff3ad">ERROR_END_OF_FILE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../da/d41/error_8h_source.html#l00157">error.h:157</a></div></div>
<div class="ttc" id="group__BSPDefine_html_ga070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../de/da2/group__BSPDefine.html#ga070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d6b/nm__bsp_8h_source.html#l00070">nm_bsp.h:70</a></div></div>
<div class="ttc" id="http__server_8h_html_aad636f905c4ba1aa4f135adbada5a70b"><div class="ttname"><a href="../../dd/d95/http__server_8h.html#aad636f905c4ba1aa4f135adbada5a70b">HTTP_SERVER_URI_MAX_LEN</a></div><div class="ttdeci">#define HTTP_SERVER_URI_MAX_LEN</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d95/http__server_8h_source.html#l00188">http_server.h:188</a></div></div>
<div class="ttc" id="tls_8h_html_abbb6c7c49508c1ac374683f2d1159e08"><div class="ttname"><a href="../../df/d79/tls_8h.html#abbb6c7c49508c1ac374683f2d1159e08">level</a></div><div class="ttdeci">uint8_t level</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d79/tls_8h_source.html#l01702">tls.h:1702</a></div></div>
<div class="ttc" id="stdint_8h_html_aba7bc1797add20fe3efdf37ced1182c5"><div class="ttname"><a href="../../df/dd8/stdint_8h.html#aba7bc1797add20fe3efdf37ced1182c5">uint8_t</a></div><div class="ttdeci">unsigned char uint8_t</div><div class="ttdef"><b>Definition:</b> <a href="../../df/dd8/stdint_8h_source.html#l00078">stdint.h:78</a></div></div>
<div class="ttc" id="os__port__windows_8h_html_ac99ec3f1036620727a68aa8c25a8963c"><div class="ttname"><a href="../../de/dc7/os__port__windows_8h.html#ac99ec3f1036620727a68aa8c25a8963c">strcasecmp</a></div><div class="ttdeci">#define strcasecmp</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dc7/os__port__windows_8h_source.html#l00152">os_port_windows.h:152</a></div></div>
<div class="ttc" id="dhcp__common_8h_html_a5c7003134e7a7486271d4f33c2e7b7de"><div class="ttname"><a href="../../d0/d63/dhcp__common_8h.html#a5c7003134e7a7486271d4f33c2e7b7de">file</a></div><div class="ttdeci">uint8_t file[128]</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d63/dhcp__common_8h_source.html#l00213">dhcp_common.h:213</a></div></div>
<div class="ttc" id="http__server__misc_8c_html_a34edbde4371909896b60846f2545fbaa"><div class="ttname"><a href="../../da/dc3/http__server__misc_8c.html#a34edbde4371909896b60846f2545fbaa">httpGetAbsolutePath</a></div><div class="ttdeci">void httpGetAbsolutePath(HttpConnection *connection, const char_t *relative, char_t *absolute, size_t maxLen)</div><div class="ttdoc">Retrieve the full pathname to the specified resource. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/dc3/http__server__misc_8c_source.html#l01070">http_server_misc.c:1070</a></div></div>
<div class="ttc" id="http__server_8c_html_acb70b948502efdd99db7cf234fcb74db"><div class="ttname"><a href="../../da/df4/http__server_8c.html#acb70b948502efdd99db7cf234fcb74db">httpWriteStream</a></div><div class="ttdeci">error_t httpWriteStream(HttpConnection *connection, const void *data, size_t length)</div><div class="ttdoc">Write data to the client. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/df4/http__server_8c_source.html#l00650">http_server.c:650</a></div></div>
<div class="ttc" id="str_8c_html_a9006c65380cbc2ab5e7e02e57c8d3d4e"><div class="ttname"><a href="../../df/d5f/str_8c.html#a9006c65380cbc2ab5e7e02e57c8d3d4e">strDuplicate</a></div><div class="ttdeci">char_t * strDuplicate(const char_t *s)</div><div class="ttdoc">Duplicate a string. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d5f/str_8c_source.html#l00042">str.c:42</a></div></div>
<div class="ttc" id="error_8h_html_ac7659d73a8cdedc08e9f566bb406689caf1442b36897b28194c3faa9d716ff808"><div class="ttname"><a href="../../da/d41/error_8h.html#ac7659d73a8cdedc08e9f566bb406689caf1442b36897b28194c3faa9d716ff808">ERROR_INVALID_TAG</a></div><div class="ttdef"><b>Definition:</b> <a href="../../da/d41/error_8h_source.html#l00112">error.h:112</a></div></div>
<div class="ttc" id="error_8h_html_ac7659d73a8cdedc08e9f566bb406689cabf350750d0d4fabd8954c0f1e9bbae94"><div class="ttname"><a href="../../da/d41/error_8h.html#ac7659d73a8cdedc08e9f566bb406689cabf350750d0d4fabd8954c0f1e9bbae94">NO_ERROR</a></div><div class="ttdoc">Success. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/d41/error_8h_source.html#l00044">error.h:44</a></div></div>
<div class="ttc" id="resource__manager_8c_html_a0fe55f3dce16ce80683cae543c61f22c"><div class="ttname"><a href="../../d2/d71/resource__manager_8c.html#a0fe55f3dce16ce80683cae543c61f22c">resGetData</a></div><div class="ttdeci">error_t resGetData(const char_t *path, const uint8_t **data, size_t *length)</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d71/resource__manager_8c_source.html#l00039">resource_manager.c:39</a></div></div>
<div class="ttc" id="os__port__chibios_8c_html_ae86758dcd9fc3c98247ae19815987c9a"><div class="ttname"><a href="../../dd/d0d/os__port__chibios_8c.html#ae86758dcd9fc3c98247ae19815987c9a">osAllocMem</a></div><div class="ttdeci">void * osAllocMem(size_t size)</div><div class="ttdoc">Allocate a memory block. </div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d0d/os__port__chibios_8c_source.html#l00509">os_port_chibios.c:509</a></div></div>
<div class="ttc" id="error_8h_html_ac7659d73a8cdedc08e9f566bb406689ca4cca37264afee88cb14cd105f0d59607"><div class="ttname"><a href="../../da/d41/error_8h.html#ac7659d73a8cdedc08e9f566bb406689ca4cca37264afee88cb14cd105f0d59607">ERROR_NOT_FOUND</a></div><div class="ttdef"><b>Definition:</b> <a href="../../da/d41/error_8h_source.html#l00145">error.h:145</a></div></div>
<div class="ttc" id="error_8h_html_ac7659d73a8cdedc08e9f566bb406689c"><div class="ttname"><a href="../../da/d41/error_8h.html#ac7659d73a8cdedc08e9f566bb406689c">error_t</a></div><div class="ttdeci">error_t</div><div class="ttdoc">Error codes. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/d41/error_8h_source.html#l00042">error.h:42</a></div></div>
<div class="ttc" id="dtls__misc_8h_html_a5c239a1bb87b52b0f1d6d68c4749cd2a"><div class="ttname"><a href="../../d3/d25/dtls__misc_8h.html#a5c239a1bb87b52b0f1d6d68c4749cd2a">data</a></div><div class="ttdeci">uint8_t data[]</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d25/dtls__misc_8h_source.html#l00176">dtls_misc.h:176</a></div></div>
<div class="ttc" id="dtls__misc_8h_html_a74bce8e92ccabd0c885447114a48b80e"><div class="ttname"><a href="../../d3/d25/dtls__misc_8h.html#a74bce8e92ccabd0c885447114a48b80e">value</a></div><div class="ttdeci">uint8_t value[]</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d25/dtls__misc_8h_source.html#l00150">dtls_misc.h:150</a></div></div>
<div class="ttc" id="str_8c_html_ade9441b268416af6b024eb2ba3a5847e"><div class="ttname"><a href="../../df/d5f/str_8c.html#ade9441b268416af6b024eb2ba3a5847e">strTrimWhitespace</a></div><div class="ttdeci">char_t * strTrimWhitespace(char_t *s)</div><div class="ttdoc">Removes all leading and trailing whitespace from a string. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d5f/str_8c_source.html#l00078">str.c:78</a></div></div>
<div class="ttc" id="fs__port__fatfs_8h_html_a913e2a93cbf8ed241fe05fb6abc3f316"><div class="ttname"><a href="../../de/d1d/fs__port__fatfs_8h.html#a913e2a93cbf8ed241fe05fb6abc3f316">FsFile</a></div><div class="ttdeci">void FsFile</div><div class="ttdoc">File descriptor. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d1d/fs__port__fatfs_8h_source.html#l00060">fs_port_fatfs.h:60</a></div></div>
<div class="ttc" id="dtls__misc_8h_html_ab43ca82dd7fa2a0e56f941032ef324c4"><div class="ttname"><a href="../../d3/d25/dtls__misc_8h.html#ab43ca82dd7fa2a0e56f941032ef324c4">length</a></div><div class="ttdeci">uint8_t length</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d25/dtls__misc_8h_source.html#l00149">dtls_misc.h:149</a></div></div>
<div class="ttc" id="fs__port_8h_html_a086887b0800535e5a06340d3fc76c51cadf6c1e1805f97fa4f535acbdc2d943db"><div class="ttname"><a href="../../d9/d2e/fs__port_8h.html#a086887b0800535e5a06340d3fc76c51cadf6c1e1805f97fa4f535acbdc2d943db">FS_FILE_MODE_READ</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d2e/fs__port_8h_source.html#l00072">fs_port.h:72</a></div></div>
<div class="ttc" id="fs__port__fatfs_8c_html_a563173066eb2924f61e00e87fbf9d0bc"><div class="ttname"><a href="../../d3/dad/fs__port__fatfs_8c.html#a563173066eb2924f61e00e87fbf9d0bc">fsCloseFile</a></div><div class="ttdeci">void fsCloseFile(FsFile *file)</div><div class="ttdoc">Close a file. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dad/fs__port__fatfs_8c_source.html#l00528">fs_port_fatfs.c:528</a></div></div>
<div class="ttc" id="http__server__misc_8c_html_aebda8c10016605385b6958ff384013aa"><div class="ttname"><a href="../../da/dc3/http__server__misc_8c.html#aebda8c10016605385b6958ff384013aa">httpCompExtension</a></div><div class="ttdeci">bool_t httpCompExtension(const char_t *filename, const char_t *extension)</div><div class="ttdoc">Compare filename extension. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/dc3/http__server__misc_8c_source.html#l01091">http_server_misc.c:1091</a></div></div>
<div class="ttc" id="fs__port__fatfs_8c_html_aba7fcc4f174dcf4652a8b84cdfff22b5"><div class="ttname"><a href="../../d3/dad/fs__port__fatfs_8c.html#aba7fcc4f174dcf4652a8b84cdfff22b5">fsOpenFile</a></div><div class="ttdeci">FsFile * fsOpenFile(const char_t *path, uint_t mode)</div><div class="ttdoc">Open the specified file for reading or writing. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dad/fs__port__fatfs_8c_source.html#l00321">fs_port_fatfs.c:321</a></div></div>
<div class="ttc" id="error_8h_html_ac7659d73a8cdedc08e9f566bb406689cac0a554045048d2fb61387cf735676f69"><div class="ttname"><a href="../../da/d41/error_8h.html#ac7659d73a8cdedc08e9f566bb406689cac0a554045048d2fb61387cf735676f69">ERROR_OUT_OF_MEMORY</a></div><div class="ttdef"><b>Definition:</b> <a href="../../da/d41/error_8h_source.html#l00063">error.h:63</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a93e1f8064d7752a1ae1294bf6ba10b13"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a93e1f8064d7752a1ae1294bf6ba10b13">&#9670;&nbsp;</a></span>ssiSearchTag()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../da/d41/error_8h.html#ac7659d73a8cdedc08e9f566bb406689c">error_t</a> ssiSearchTag </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="../../d1/dfa/compiler__port_8h.html#a40bb5262bf908c328fbcfbe5d29d0201">char_t</a> *&#160;</td>
          <td class="paramname"><em>s</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>sLen</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="../../d1/dfa/compiler__port_8h.html#a40bb5262bf908c328fbcfbe5d29d0201">char_t</a> *&#160;</td>
          <td class="paramname"><em>tag</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>tagLen</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d1/dfa/compiler__port_8h.html#a12a1e9b3ce141648783a82445d02b58d">uint_t</a> *&#160;</td>
          <td class="paramname"><em>pos</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Search a string for a given tag. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">s</td><td>String to search </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">sLen</td><td>Length of the string to search </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">tag</td><td>String containing the tag to search for </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">tagLen</td><td>Length of the tag </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">pos</td><td>The index of the first occurrence of the tag in the string, </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">NO_ERROR</td><td>if the specified tag has been found </td></tr>
    <tr><td class="paramname">ERROR_PARTIAL_MATCH</td><td>if a partial match occurs </td></tr>
    <tr><td class="paramname">ERROR_NO_MATCH</td><td>if the tag does not appear in the string </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../dc/d6b/ssi_8c_source.html#l00831">831</a> of file <a class="el" href="../../dc/d6b/ssi_8c_source.html">ssi.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00832"></a><span class="lineno">  832</span>&#160;{</div><div class="line"><a name="l00833"></a><span class="lineno">  833</span>&#160;   <a class="code" href="../../d1/dfa/compiler__port_8h.html#a12a1e9b3ce141648783a82445d02b58d">uint_t</a> i;</div><div class="line"><a name="l00834"></a><span class="lineno">  834</span>&#160;   <a class="code" href="../../d1/dfa/compiler__port_8h.html#a12a1e9b3ce141648783a82445d02b58d">uint_t</a> j;</div><div class="line"><a name="l00835"></a><span class="lineno">  835</span>&#160;</div><div class="line"><a name="l00836"></a><span class="lineno">  836</span>&#160;   <span class="comment">//Parse the input string</span></div><div class="line"><a name="l00837"></a><span class="lineno">  837</span>&#160;   <span class="keywordflow">for</span>(i = 0; i &lt;= sLen; i++)</div><div class="line"><a name="l00838"></a><span class="lineno">  838</span>&#160;   {</div><div class="line"><a name="l00839"></a><span class="lineno">  839</span>&#160;      <span class="comment">//Compare current substring with the given tag</span></div><div class="line"><a name="l00840"></a><span class="lineno">  840</span>&#160;      <span class="keywordflow">for</span>(j = 0; (i + j) &lt; sLen &amp;&amp; j &lt; tagLen; j++)</div><div class="line"><a name="l00841"></a><span class="lineno">  841</span>&#160;      {</div><div class="line"><a name="l00842"></a><span class="lineno">  842</span>&#160;         <span class="keywordflow">if</span>(<a class="code" href="../../dc/dd8/md2_8c.html#adf356ff381033f761b7de5f76e763a45">s</a>[i + j] != tag[j])</div><div class="line"><a name="l00843"></a><span class="lineno">  843</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l00844"></a><span class="lineno">  844</span>&#160;      }</div><div class="line"><a name="l00845"></a><span class="lineno">  845</span>&#160;</div><div class="line"><a name="l00846"></a><span class="lineno">  846</span>&#160;      <span class="comment">//Check whether a full match occurred</span></div><div class="line"><a name="l00847"></a><span class="lineno">  847</span>&#160;      <span class="keywordflow">if</span>(j == tagLen)</div><div class="line"><a name="l00848"></a><span class="lineno">  848</span>&#160;      {</div><div class="line"><a name="l00849"></a><span class="lineno">  849</span>&#160;         <span class="comment">//Save the position of the first character</span></div><div class="line"><a name="l00850"></a><span class="lineno">  850</span>&#160;         *pos = i;</div><div class="line"><a name="l00851"></a><span class="lineno">  851</span>&#160;         <span class="comment">//The specified tag has been found</span></div><div class="line"><a name="l00852"></a><span class="lineno">  852</span>&#160;         <span class="keywordflow">return</span> <a class="code" href="../../da/d41/error_8h.html#ac7659d73a8cdedc08e9f566bb406689cabf350750d0d4fabd8954c0f1e9bbae94">NO_ERROR</a>;</div><div class="line"><a name="l00853"></a><span class="lineno">  853</span>&#160;      }</div><div class="line"><a name="l00854"></a><span class="lineno">  854</span>&#160;      <span class="comment">//Check whether a partial match occurred</span></div><div class="line"><a name="l00855"></a><span class="lineno">  855</span>&#160;      <span class="keywordflow">else</span> <span class="keywordflow">if</span>((i + j) == sLen &amp;&amp; j &gt; 0)</div><div class="line"><a name="l00856"></a><span class="lineno">  856</span>&#160;      {</div><div class="line"><a name="l00857"></a><span class="lineno">  857</span>&#160;         <span class="comment">//Save the position of the first character</span></div><div class="line"><a name="l00858"></a><span class="lineno">  858</span>&#160;         *pos = i;</div><div class="line"><a name="l00859"></a><span class="lineno">  859</span>&#160;         <span class="comment">//The beginning of the tag matches the end of the string</span></div><div class="line"><a name="l00860"></a><span class="lineno">  860</span>&#160;         <span class="keywordflow">return</span> <a class="code" href="../../da/d41/error_8h.html#ac7659d73a8cdedc08e9f566bb406689ca87d35f569078d53830c08f9b8408787e">ERROR_PARTIAL_MATCH</a>;</div><div class="line"><a name="l00861"></a><span class="lineno">  861</span>&#160;      }</div><div class="line"><a name="l00862"></a><span class="lineno">  862</span>&#160;   }</div><div class="line"><a name="l00863"></a><span class="lineno">  863</span>&#160;</div><div class="line"><a name="l00864"></a><span class="lineno">  864</span>&#160;   <span class="comment">//The tag does not appear in the string</span></div><div class="line"><a name="l00865"></a><span class="lineno">  865</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../da/d41/error_8h.html#ac7659d73a8cdedc08e9f566bb406689ca512028ab157e5890d50e18052d577e39">ERROR_NO_MATCH</a>;</div><div class="line"><a name="l00866"></a><span class="lineno">  866</span>&#160;}</div><div class="ttc" id="error_8h_html_ac7659d73a8cdedc08e9f566bb406689ca87d35f569078d53830c08f9b8408787e"><div class="ttname"><a href="../../da/d41/error_8h.html#ac7659d73a8cdedc08e9f566bb406689ca87d35f569078d53830c08f9b8408787e">ERROR_PARTIAL_MATCH</a></div><div class="ttdef"><b>Definition:</b> <a href="../../da/d41/error_8h_source.html#l00277">error.h:277</a></div></div>
<div class="ttc" id="md2_8c_html_adf356ff381033f761b7de5f76e763a45"><div class="ttname"><a href="../../dc/dd8/md2_8c.html#adf356ff381033f761b7de5f76e763a45">s</a></div><div class="ttdeci">static const uint8_t s[256]</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/dd8/md2_8c_source.html#l00047">md2.c:47</a></div></div>
<div class="ttc" id="error_8h_html_ac7659d73a8cdedc08e9f566bb406689ca512028ab157e5890d50e18052d577e39"><div class="ttname"><a href="../../da/d41/error_8h.html#ac7659d73a8cdedc08e9f566bb406689ca512028ab157e5890d50e18052d577e39">ERROR_NO_MATCH</a></div><div class="ttdef"><b>Definition:</b> <a href="../../da/d41/error_8h_source.html#l00276">error.h:276</a></div></div>
<div class="ttc" id="error_8h_html_ac7659d73a8cdedc08e9f566bb406689cabf350750d0d4fabd8954c0f1e9bbae94"><div class="ttname"><a href="../../da/d41/error_8h.html#ac7659d73a8cdedc08e9f566bb406689cabf350750d0d4fabd8954c0f1e9bbae94">NO_ERROR</a></div><div class="ttdoc">Success. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/d41/error_8h_source.html#l00044">error.h:44</a></div></div>
<div class="ttc" id="compiler__port_8h_html_a12a1e9b3ce141648783a82445d02b58d"><div class="ttname"><a href="../../d1/dfa/compiler__port_8h.html#a12a1e9b3ce141648783a82445d02b58d">uint_t</a></div><div class="ttdeci">unsigned int uint_t</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dfa/compiler__port_8h_source.html#l00045">compiler_port.h:45</a></div></div>
</div><!-- fragment -->
</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="../../dir_7e9256e5f59bdf4e670955c020ed8bf3.html">cyclone_tcp</a></li><li class="navelem"><a class="el" href="../../dir_20ac19420c0760f7276c08929d7ce7cd.html">http</a></li><li class="navelem"><a class="el" href="../../da/d7d/ssi_8h.html">ssi.h</a></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="../../doxygen.png" alt="doxygen"/></a> 1.8.13 </li>
  </ul>
</div>
</body>
</html>
