\hypertarget{ipv6cp_8c}{}\section{cyclone\+\_\+tcp/ppp/ipv6cp.c File Reference}
\label{ipv6cp_8c}\index{cyclone\+\_\+tcp/ppp/ipv6cp.\+c@{cyclone\+\_\+tcp/ppp/ipv6cp.\+c}}


I\+P\+V6\+CP (P\+PP I\+Pv6 Control Protocol)  


{\ttfamily \#include \char`\"{}core/net.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}ipv6/ipv6.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}ipv6/ipv6\+\_\+misc.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}ppp/ppp\+\_\+fsm.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}ppp/ppp\+\_\+misc.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}ppp/ppp\+\_\+debug.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}ppp/ipv6cp.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}debug.\+h\char`\"{}}\newline
\subsection*{Macros}
\begin{DoxyCompactItemize}
\item 
\#define \hyperlink{ipv6cp_8c_afcdf5e66fd927a7f4cc64295acd20407}{T\+R\+A\+C\+E\+\_\+\+L\+E\+V\+EL}~P\+P\+P\+\_\+\+T\+R\+A\+C\+E\+\_\+\+L\+E\+V\+EL
\end{DoxyCompactItemize}
\subsection*{Functions}
\begin{DoxyCompactItemize}
\item 
\hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689c}{error\+\_\+t} \hyperlink{ipv6cp_8c_a0bef2c07fcc5f6302075dde648aec215}{ipv6cp\+Open} (\hyperlink{ppp_8h_a896c00dd8ba8bad09b3f442b7aa5ad9c}{Ppp\+Context} $\ast$context)
\begin{DoxyCompactList}\small\item\em I\+P\+V6\+CP Open event. \end{DoxyCompactList}\item 
\hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689c}{error\+\_\+t} \hyperlink{ipv6cp_8c_aa20fc6433bbfe276d8d2ea9aa0fcca78}{ipv6cp\+Close} (\hyperlink{ppp_8h_a896c00dd8ba8bad09b3f442b7aa5ad9c}{Ppp\+Context} $\ast$context)
\begin{DoxyCompactList}\small\item\em I\+P\+V6\+CP Close event. \end{DoxyCompactList}\item 
void \hyperlink{ipv6cp_8c_a4a7b1c64da15e7c08b39ef5e5c96de95}{ipv6cp\+Tick} (\hyperlink{ppp_8h_a896c00dd8ba8bad09b3f442b7aa5ad9c}{Ppp\+Context} $\ast$context)
\begin{DoxyCompactList}\small\item\em I\+P\+V6\+CP timer handler. \end{DoxyCompactList}\item 
void \hyperlink{ipv6cp_8c_a2affb96ff3fd10841c3a2b1508a2fcb6}{ipv6cp\+Process\+Packet} (\hyperlink{ppp_8h_a896c00dd8ba8bad09b3f442b7aa5ad9c}{Ppp\+Context} $\ast$context, const \hyperlink{ppp_8h_aa975a68f06316e1db0de962a31e30c2e}{Ppp\+Packet} $\ast$packet, size\+\_\+t \hyperlink{ppp_8h_ab2b3adeb2a67e656ff030b56727fd0ac}{length})
\begin{DoxyCompactList}\small\item\em Process an incoming I\+P\+V6\+CP packet. \end{DoxyCompactList}\item 
\hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689c}{error\+\_\+t} \hyperlink{ipv6cp_8c_a857d6287fd9a4a29adf17010c870e099}{ipv6cp\+Process\+Configure\+Req} (\hyperlink{ppp_8h_a896c00dd8ba8bad09b3f442b7aa5ad9c}{Ppp\+Context} $\ast$context, const \hyperlink{ppp_8h_a5f9516e80961edda7e2c0b9b964bdd66}{Ppp\+Configure\+Packet} $\ast$configure\+Req\+Packet)
\begin{DoxyCompactList}\small\item\em Process Configure-\/\+Request packet. \end{DoxyCompactList}\item 
\hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689c}{error\+\_\+t} \hyperlink{ipv6cp_8c_a4a2e99f43c47c076be7fc82f95cf49db}{ipv6cp\+Process\+Configure\+Ack} (\hyperlink{ppp_8h_a896c00dd8ba8bad09b3f442b7aa5ad9c}{Ppp\+Context} $\ast$context, const \hyperlink{ppp_8h_a5f9516e80961edda7e2c0b9b964bdd66}{Ppp\+Configure\+Packet} $\ast$configure\+Ack\+Packet)
\begin{DoxyCompactList}\small\item\em Process Configure-\/\+Ack packet. \end{DoxyCompactList}\item 
\hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689c}{error\+\_\+t} \hyperlink{ipv6cp_8c_a8b9bfc07eca660ad8b4f66057c9b221f}{ipv6cp\+Process\+Configure\+Nak} (\hyperlink{ppp_8h_a896c00dd8ba8bad09b3f442b7aa5ad9c}{Ppp\+Context} $\ast$context, const \hyperlink{ppp_8h_a5f9516e80961edda7e2c0b9b964bdd66}{Ppp\+Configure\+Packet} $\ast$configure\+Nak\+Packet)
\begin{DoxyCompactList}\small\item\em Process Configure-\/\+Nak packet. \end{DoxyCompactList}\item 
\hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689c}{error\+\_\+t} \hyperlink{ipv6cp_8c_a5e5e8ac6b1a544af3e2cbd3ebbf682da}{ipv6cp\+Process\+Configure\+Reject} (\hyperlink{ppp_8h_a896c00dd8ba8bad09b3f442b7aa5ad9c}{Ppp\+Context} $\ast$context, const \hyperlink{ppp_8h_a5f9516e80961edda7e2c0b9b964bdd66}{Ppp\+Configure\+Packet} $\ast$configure\+Rej\+Packet)
\begin{DoxyCompactList}\small\item\em Process Configure-\/\+Reject packet. \end{DoxyCompactList}\item 
\hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689c}{error\+\_\+t} \hyperlink{ipv6cp_8c_aa1f969fd6c01ef8fe8b63df350cec136}{ipv6cp\+Process\+Terminate\+Req} (\hyperlink{ppp_8h_a896c00dd8ba8bad09b3f442b7aa5ad9c}{Ppp\+Context} $\ast$context, const \hyperlink{ppp_8h_a224d9bad9d75f66f3d0284450ddf6fb4}{Ppp\+Terminate\+Packet} $\ast$terminate\+Req\+Packet)
\begin{DoxyCompactList}\small\item\em Process Terminate-\/\+Request packet. \end{DoxyCompactList}\item 
\hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689c}{error\+\_\+t} \hyperlink{ipv6cp_8c_a683f6180a3ffb01ed63d51d96c9c7313}{ipv6cp\+Process\+Terminate\+Ack} (\hyperlink{ppp_8h_a896c00dd8ba8bad09b3f442b7aa5ad9c}{Ppp\+Context} $\ast$context, const \hyperlink{ppp_8h_a224d9bad9d75f66f3d0284450ddf6fb4}{Ppp\+Terminate\+Packet} $\ast$terminate\+Ack\+Packet)
\begin{DoxyCompactList}\small\item\em Process Terminate-\/\+Ack packet. \end{DoxyCompactList}\item 
\hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689c}{error\+\_\+t} \hyperlink{ipv6cp_8c_a2396415da87efa9d3777c638d48a9671}{ipv6cp\+Process\+Code\+Rej} (\hyperlink{ppp_8h_a896c00dd8ba8bad09b3f442b7aa5ad9c}{Ppp\+Context} $\ast$context, const \hyperlink{ppp_8h_ad05fe14ee4cca32c7b40f2cdf9c48a8d}{Ppp\+Code\+Rej\+Packet} $\ast$code\+Rej\+Packet)
\begin{DoxyCompactList}\small\item\em Process Code-\/\+Reject packet. \end{DoxyCompactList}\item 
\hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689c}{error\+\_\+t} \hyperlink{ipv6cp_8c_a8861d1dc284507a62d678406519e06b0}{ipv6cp\+Process\+Unknown\+Code} (\hyperlink{ppp_8h_a896c00dd8ba8bad09b3f442b7aa5ad9c}{Ppp\+Context} $\ast$context, const \hyperlink{ppp_8h_aa975a68f06316e1db0de962a31e30c2e}{Ppp\+Packet} $\ast$packet)
\begin{DoxyCompactList}\small\item\em Process packet with unknown code. \end{DoxyCompactList}\item 
void \hyperlink{ipv6cp_8c_a0fd9d8ac1dc1c71a8e62f1e82bdc64b3}{ipv6cp\+This\+Layer\+Up} (\hyperlink{ppp_8h_a896c00dd8ba8bad09b3f442b7aa5ad9c}{Ppp\+Context} $\ast$context)
\begin{DoxyCompactList}\small\item\em This-\/\+Layer-\/\+Up callback function. \end{DoxyCompactList}\item 
void \hyperlink{ipv6cp_8c_ad502397f56b9a267a141d755a9523722}{ipv6cp\+This\+Layer\+Down} (\hyperlink{ppp_8h_a896c00dd8ba8bad09b3f442b7aa5ad9c}{Ppp\+Context} $\ast$context)
\begin{DoxyCompactList}\small\item\em This-\/\+Layer-\/\+Down callback function. \end{DoxyCompactList}\item 
void \hyperlink{ipv6cp_8c_afe66603f6f0f4979b35e58e79af6d541}{ipv6cp\+This\+Layer\+Started} (\hyperlink{ppp_8h_a896c00dd8ba8bad09b3f442b7aa5ad9c}{Ppp\+Context} $\ast$context)
\begin{DoxyCompactList}\small\item\em This-\/\+Layer-\/\+Started callback function. \end{DoxyCompactList}\item 
void \hyperlink{ipv6cp_8c_a12141aaf33a19fa6ceaa1a05fb28d9c0}{ipv6cp\+This\+Layer\+Finished} (\hyperlink{ppp_8h_a896c00dd8ba8bad09b3f442b7aa5ad9c}{Ppp\+Context} $\ast$context)
\begin{DoxyCompactList}\small\item\em This-\/\+Layer-\/\+Finished callback function. \end{DoxyCompactList}\item 
void \hyperlink{ipv6cp_8c_affe9b5b0ed6b2577bcbcdf26c86edfed}{ipv6cp\+Init\+Restart\+Count} (\hyperlink{ppp_8h_a896c00dd8ba8bad09b3f442b7aa5ad9c}{Ppp\+Context} $\ast$context, \hyperlink{compiler__port_8h_a12a1e9b3ce141648783a82445d02b58d}{uint\+\_\+t} \hyperlink{chap_8h_adfa040d04d16520129a735fff8fb1628}{value})
\begin{DoxyCompactList}\small\item\em Initialize-\/\+Restart-\/\+Count callback function. \end{DoxyCompactList}\item 
void \hyperlink{ipv6cp_8c_a742c61ab709b980eb146ba96c2c326d7}{ipv6cp\+Zero\+Restart\+Count} (\hyperlink{ppp_8h_a896c00dd8ba8bad09b3f442b7aa5ad9c}{Ppp\+Context} $\ast$context)
\begin{DoxyCompactList}\small\item\em Zero-\/\+Restart-\/\+Count callback function. \end{DoxyCompactList}\item 
\hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689c}{error\+\_\+t} \hyperlink{ipv6cp_8c_a2c25f1619f76f7f0cb513ba799a0c39c}{ipv6cp\+Send\+Configure\+Req} (\hyperlink{ppp_8h_a896c00dd8ba8bad09b3f442b7aa5ad9c}{Ppp\+Context} $\ast$context)
\begin{DoxyCompactList}\small\item\em Send-\/\+Configure-\/\+Request callback function. \end{DoxyCompactList}\item 
\hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689c}{error\+\_\+t} \hyperlink{ipv6cp_8c_adb65edf9100af92d60dff5d90d636fd1}{ipv6cp\+Send\+Configure\+Ack} (\hyperlink{ppp_8h_a896c00dd8ba8bad09b3f442b7aa5ad9c}{Ppp\+Context} $\ast$context, const \hyperlink{ppp_8h_a5f9516e80961edda7e2c0b9b964bdd66}{Ppp\+Configure\+Packet} $\ast$configure\+Req\+Packet)
\begin{DoxyCompactList}\small\item\em Send-\/\+Configure-\/\+Ack callback function. \end{DoxyCompactList}\item 
\hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689c}{error\+\_\+t} \hyperlink{ipv6cp_8c_abd4723de9d71fd0cbeadde499229a055}{ipv6cp\+Send\+Configure\+Nak} (\hyperlink{ppp_8h_a896c00dd8ba8bad09b3f442b7aa5ad9c}{Ppp\+Context} $\ast$context, const \hyperlink{ppp_8h_a5f9516e80961edda7e2c0b9b964bdd66}{Ppp\+Configure\+Packet} $\ast$configure\+Req\+Packet)
\begin{DoxyCompactList}\small\item\em Send-\/\+Configure-\/\+Nak callback function. \end{DoxyCompactList}\item 
\hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689c}{error\+\_\+t} \hyperlink{ipv6cp_8c_a6734bfbdf40994801ebd9845867c188e}{ipv6cp\+Send\+Configure\+Rej} (\hyperlink{ppp_8h_a896c00dd8ba8bad09b3f442b7aa5ad9c}{Ppp\+Context} $\ast$context, const \hyperlink{ppp_8h_a5f9516e80961edda7e2c0b9b964bdd66}{Ppp\+Configure\+Packet} $\ast$configure\+Req\+Packet)
\begin{DoxyCompactList}\small\item\em Send-\/\+Configure-\/\+Reject callback function. \end{DoxyCompactList}\item 
\hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689c}{error\+\_\+t} \hyperlink{ipv6cp_8c_a3ee94fa3889802ffe0004c11474d2a0c}{ipv6cp\+Send\+Terminate\+Req} (\hyperlink{ppp_8h_a896c00dd8ba8bad09b3f442b7aa5ad9c}{Ppp\+Context} $\ast$context)
\begin{DoxyCompactList}\small\item\em Send-\/\+Terminate-\/\+Request callback function. \end{DoxyCompactList}\item 
\hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689c}{error\+\_\+t} \hyperlink{ipv6cp_8c_a658c29f0f75a85cd3e65babdc0e3027f}{ipv6cp\+Send\+Terminate\+Ack} (\hyperlink{ppp_8h_a896c00dd8ba8bad09b3f442b7aa5ad9c}{Ppp\+Context} $\ast$context, const \hyperlink{ppp_8h_a224d9bad9d75f66f3d0284450ddf6fb4}{Ppp\+Terminate\+Packet} $\ast$terminate\+Req\+Packet)
\begin{DoxyCompactList}\small\item\em Send-\/\+Terminate-\/\+Ack callback function. \end{DoxyCompactList}\item 
\hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689c}{error\+\_\+t} \hyperlink{ipv6cp_8c_a05dd1ecb6cd15d0c06876f43ae2757d2}{ipv6cp\+Send\+Code\+Rej} (\hyperlink{ppp_8h_a896c00dd8ba8bad09b3f442b7aa5ad9c}{Ppp\+Context} $\ast$context, const \hyperlink{ppp_8h_aa975a68f06316e1db0de962a31e30c2e}{Ppp\+Packet} $\ast$packet)
\begin{DoxyCompactList}\small\item\em Send-\/\+Code-\/\+Reject callback function. \end{DoxyCompactList}\item 
\hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689c}{error\+\_\+t} \hyperlink{ipv6cp_8c_a7264dc210d753ef484aa5bfa6f5f5a7d}{ipv6cp\+Parse\+Option} (\hyperlink{ppp_8h_a896c00dd8ba8bad09b3f442b7aa5ad9c}{Ppp\+Context} $\ast$context, \hyperlink{ppp_8h_a531e616dc92a1bc09e2b7596eae470c8}{Ppp\+Option} $\ast$option, size\+\_\+t in\+Packet\+Len, \hyperlink{ppp_8h_a5f9516e80961edda7e2c0b9b964bdd66}{Ppp\+Configure\+Packet} $\ast$out\+Packet)
\begin{DoxyCompactList}\small\item\em Parse I\+P\+V6\+CP configuration option. \end{DoxyCompactList}\item 
\hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689c}{error\+\_\+t} \hyperlink{ipv6cp_8c_a720896c4447613679b6fa49f7c9be927}{ipv6cp\+Parse\+Interface\+Id\+Option} (\hyperlink{ppp_8h_a896c00dd8ba8bad09b3f442b7aa5ad9c}{Ppp\+Context} $\ast$context, \hyperlink{ipv6cp_8h_a2cbb4494b0a9b55715570a897c51d12d}{Ipv6cp\+Interface\+Id\+Option} $\ast$option, \hyperlink{ppp_8h_a5f9516e80961edda7e2c0b9b964bdd66}{Ppp\+Configure\+Packet} $\ast$out\+Packet)
\begin{DoxyCompactList}\small\item\em Parse Interface-\/\+Identifier option. \end{DoxyCompactList}\end{DoxyCompactItemize}
\subsection*{Variables}
\begin{DoxyCompactItemize}
\item 
const \hyperlink{structPppCallbacks}{Ppp\+Callbacks} \hyperlink{ipv6cp_8c_af27b47a14af596e2dfd51c437382c14e}{ipv6cp\+Callbacks}
\begin{DoxyCompactList}\small\item\em I\+P\+V6\+CP F\+SM callbacks. \end{DoxyCompactList}\end{DoxyCompactItemize}


\subsection{Detailed Description}
I\+P\+V6\+CP (P\+PP I\+Pv6 Control Protocol) 

\hypertarget{pic32mz__ef__curiosity_8h_License}{}\subsection{License}\label{pic32mz__ef__curiosity_8h_License}
S\+P\+D\+X-\/\+License-\/\+Identifier\+: G\+P\+L-\/2.\+0-\/or-\/later

Copyright (C) 2010-\/2019 Oryx Embedded S\+A\+RL. All rights reserved.

This file is part of Cyclone\+T\+CP Open.

This program is free software; you can redistribute it and/or modify it under the terms of the G\+NU General Public License as published by the Free Software Foundation; either version 2 of the License, or (at your option) any later version.

This program is distributed in the hope that it will be useful, but W\+I\+T\+H\+O\+UT A\+NY W\+A\+R\+R\+A\+N\+TY; without even the implied warranty of M\+E\+R\+C\+H\+A\+N\+T\+A\+B\+I\+L\+I\+TY or F\+I\+T\+N\+E\+SS F\+OR A P\+A\+R\+T\+I\+C\+U\+L\+AR P\+U\+R\+P\+O\+SE. See the G\+NU General Public License for more details.

You should have received a copy of the G\+NU General Public License along with this program; if not, write to the Free Software Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-\/1301, U\+SA.

\begin{DoxyAuthor}{Author}
Oryx Embedded S\+A\+RL (www.\+oryx-\/embedded.\+com) 
\end{DoxyAuthor}
\begin{DoxyVersion}{Version}
1.\+9.\+6 
\end{DoxyVersion}


\subsection{Macro Definition Documentation}
\mbox{\Hypertarget{ipv6cp_8c_afcdf5e66fd927a7f4cc64295acd20407}\label{ipv6cp_8c_afcdf5e66fd927a7f4cc64295acd20407}} 
\index{ipv6cp.\+c@{ipv6cp.\+c}!T\+R\+A\+C\+E\+\_\+\+L\+E\+V\+EL@{T\+R\+A\+C\+E\+\_\+\+L\+E\+V\+EL}}
\index{T\+R\+A\+C\+E\+\_\+\+L\+E\+V\+EL@{T\+R\+A\+C\+E\+\_\+\+L\+E\+V\+EL}!ipv6cp.\+c@{ipv6cp.\+c}}
\subsubsection{\texorpdfstring{T\+R\+A\+C\+E\+\_\+\+L\+E\+V\+EL}{TRACE\_LEVEL}}
{\footnotesize\ttfamily \#define T\+R\+A\+C\+E\+\_\+\+L\+E\+V\+EL~P\+P\+P\+\_\+\+T\+R\+A\+C\+E\+\_\+\+L\+E\+V\+EL}



Definition at line 32 of file ipv6cp.\+c.



\subsection{Function Documentation}
\mbox{\Hypertarget{ipv6cp_8c_aa20fc6433bbfe276d8d2ea9aa0fcca78}\label{ipv6cp_8c_aa20fc6433bbfe276d8d2ea9aa0fcca78}} 
\index{ipv6cp.\+c@{ipv6cp.\+c}!ipv6cp\+Close@{ipv6cp\+Close}}
\index{ipv6cp\+Close@{ipv6cp\+Close}!ipv6cp.\+c@{ipv6cp.\+c}}
\subsubsection{\texorpdfstring{ipv6cp\+Close()}{ipv6cpClose()}}
{\footnotesize\ttfamily \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689c}{error\+\_\+t} ipv6cp\+Close (\begin{DoxyParamCaption}\item[{\hyperlink{ppp_8h_a896c00dd8ba8bad09b3f442b7aa5ad9c}{Ppp\+Context} $\ast$}]{context }\end{DoxyParamCaption})}



I\+P\+V6\+CP Close event. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em context} & P\+PP context \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Error code 
\end{DoxyReturn}


Definition at line 98 of file ipv6cp.\+c.


\begin{DoxyCode}
99 \{
100    \textcolor{comment}{//Debug message}
101    \hyperlink{debug_8h_a7339bfd784193a5c79efcef2eeb2d6df}{TRACE\_INFO}(\textcolor{stringliteral}{"\(\backslash\)r\(\backslash\)nIPV6CP Close event\(\backslash\)r\(\backslash\)n"});
102 
103    \textcolor{comment}{//The lower layer is no longer ready to carry packets}
104    \hyperlink{ppp__fsm_8c_abada68985183c2e9b998f21ebb7cbe65}{pppDownEvent}(context, &context->ipv6cpFsm, &\hyperlink{ipv6cp_8c_af27b47a14af596e2dfd51c437382c14e}{ipv6cpCallbacks});
105    \textcolor{comment}{//The link is no longer available for traffic}
106    \hyperlink{ppp__fsm_8c_a99f9adb8cee4039fd63439bd3401b7f9}{pppCloseEvent}(context, &context->ipv6cpFsm, &\hyperlink{ipv6cp_8c_af27b47a14af596e2dfd51c437382c14e}{ipv6cpCallbacks});
107 
108    \textcolor{comment}{//Successful processing}
109    \textcolor{keywordflow}{return} \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689cabf350750d0d4fabd8954c0f1e9bbae94}{NO\_ERROR};
110 \}
\end{DoxyCode}
\mbox{\Hypertarget{ipv6cp_8c_affe9b5b0ed6b2577bcbcdf26c86edfed}\label{ipv6cp_8c_affe9b5b0ed6b2577bcbcdf26c86edfed}} 
\index{ipv6cp.\+c@{ipv6cp.\+c}!ipv6cp\+Init\+Restart\+Count@{ipv6cp\+Init\+Restart\+Count}}
\index{ipv6cp\+Init\+Restart\+Count@{ipv6cp\+Init\+Restart\+Count}!ipv6cp.\+c@{ipv6cp.\+c}}
\subsubsection{\texorpdfstring{ipv6cp\+Init\+Restart\+Count()}{ipv6cpInitRestartCount()}}
{\footnotesize\ttfamily void ipv6cp\+Init\+Restart\+Count (\begin{DoxyParamCaption}\item[{\hyperlink{ppp_8h_a896c00dd8ba8bad09b3f442b7aa5ad9c}{Ppp\+Context} $\ast$}]{context,  }\item[{\hyperlink{compiler__port_8h_a12a1e9b3ce141648783a82445d02b58d}{uint\+\_\+t}}]{value }\end{DoxyParamCaption})}



Initialize-\/\+Restart-\/\+Count callback function. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em context} & P\+PP context \\
\hline
\mbox{\tt in}  & {\em value} & Restart counter value \\
\hline
\end{DoxyParams}


Definition at line 679 of file ipv6cp.\+c.


\begin{DoxyCode}
680 \{
681    \textcolor{comment}{//Debug message}
682    \hyperlink{debug_8h_a7339bfd784193a5c79efcef2eeb2d6df}{TRACE\_INFO}(\textcolor{stringliteral}{"IPV6CP Initialize-Restart-Count callback\(\backslash\)r\(\backslash\)n"});
683 
684    \textcolor{comment}{//Initialize restart counter}
685    context->ipv6cpFsm.restartCounter = \hyperlink{dtls__misc_8h_a74bce8e92ccabd0c885447114a48b80e}{value};
686 \}
\end{DoxyCode}
\mbox{\Hypertarget{ipv6cp_8c_a0bef2c07fcc5f6302075dde648aec215}\label{ipv6cp_8c_a0bef2c07fcc5f6302075dde648aec215}} 
\index{ipv6cp.\+c@{ipv6cp.\+c}!ipv6cp\+Open@{ipv6cp\+Open}}
\index{ipv6cp\+Open@{ipv6cp\+Open}!ipv6cp.\+c@{ipv6cp.\+c}}
\subsubsection{\texorpdfstring{ipv6cp\+Open()}{ipv6cpOpen()}}
{\footnotesize\ttfamily \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689c}{error\+\_\+t} ipv6cp\+Open (\begin{DoxyParamCaption}\item[{\hyperlink{ppp_8h_a896c00dd8ba8bad09b3f442b7aa5ad9c}{Ppp\+Context} $\ast$}]{context }\end{DoxyParamCaption})}



I\+P\+V6\+CP Open event. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em context} & P\+PP context \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Error code 
\end{DoxyReturn}


Definition at line 77 of file ipv6cp.\+c.


\begin{DoxyCode}
78 \{
79    \textcolor{comment}{//Debug message}
80    \hyperlink{debug_8h_a7339bfd784193a5c79efcef2eeb2d6df}{TRACE\_INFO}(\textcolor{stringliteral}{"\(\backslash\)r\(\backslash\)nIPV6CP Open event\(\backslash\)r\(\backslash\)n"});
81 
82    \textcolor{comment}{//The link is administratively available for traffic}
83    \hyperlink{ppp__fsm_8c_a56a599e9081bd1ef91c41ecb597b9ba3}{pppOpenEvent}(context, &context->ipv6cpFsm, &\hyperlink{ipv6cp_8c_af27b47a14af596e2dfd51c437382c14e}{ipv6cpCallbacks});
84    \textcolor{comment}{//The lower layer is ready to carry packets}
85    \hyperlink{ppp__fsm_8c_ac8891398361d78b0e913933626ebd232}{pppUpEvent}(context, &context->ipv6cpFsm, &\hyperlink{ipv6cp_8c_af27b47a14af596e2dfd51c437382c14e}{ipv6cpCallbacks});
86 
87    \textcolor{comment}{//Successful processing}
88    \textcolor{keywordflow}{return} \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689cabf350750d0d4fabd8954c0f1e9bbae94}{NO\_ERROR};
89 \}
\end{DoxyCode}
\mbox{\Hypertarget{ipv6cp_8c_a720896c4447613679b6fa49f7c9be927}\label{ipv6cp_8c_a720896c4447613679b6fa49f7c9be927}} 
\index{ipv6cp.\+c@{ipv6cp.\+c}!ipv6cp\+Parse\+Interface\+Id\+Option@{ipv6cp\+Parse\+Interface\+Id\+Option}}
\index{ipv6cp\+Parse\+Interface\+Id\+Option@{ipv6cp\+Parse\+Interface\+Id\+Option}!ipv6cp.\+c@{ipv6cp.\+c}}
\subsubsection{\texorpdfstring{ipv6cp\+Parse\+Interface\+Id\+Option()}{ipv6cpParseInterfaceIdOption()}}
{\footnotesize\ttfamily \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689c}{error\+\_\+t} ipv6cp\+Parse\+Interface\+Id\+Option (\begin{DoxyParamCaption}\item[{\hyperlink{ppp_8h_a896c00dd8ba8bad09b3f442b7aa5ad9c}{Ppp\+Context} $\ast$}]{context,  }\item[{\hyperlink{ipv6cp_8h_a2cbb4494b0a9b55715570a897c51d12d}{Ipv6cp\+Interface\+Id\+Option} $\ast$}]{option,  }\item[{\hyperlink{ppp_8h_a5f9516e80961edda7e2c0b9b964bdd66}{Ppp\+Configure\+Packet} $\ast$}]{out\+Packet }\end{DoxyParamCaption})}



Parse Interface-\/\+Identifier option. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em context} & P\+PP context \\
\hline
\mbox{\tt in}  & {\em option} & Option to be checked \\
\hline
\mbox{\tt out}  & {\em out\+Packet} & Pointer to the Configure-\/\+Nak or Configure-\/\+Reject packet \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Error code 
\end{DoxyReturn}


Definition at line 981 of file ipv6cp.\+c.


\begin{DoxyCode}
983 \{
984    \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689c}{error\_t} error;
985 
986    \textcolor{comment}{//Check length field}
987    \textcolor{keywordflow}{if}(option->length == \textcolor{keyword}{sizeof}(\hyperlink{ipv6cp_8h_a2cbb4494b0a9b55715570a897c51d12d}{Ipv6cpInterfaceIdOption}))
988    \{
989       \textcolor{comment}{//Check whether the option value is acceptable}
990       \textcolor{keywordflow}{if}(!\hyperlink{ethernet_8h_a087787483d37f02cd45c25b5dbfc0d44}{eui64CompAddr}(&option->interfaceId, &
      \hyperlink{ethernet_8c_a81a37017a277d463608f4534331ddae2}{EUI64\_UNSPECIFIED\_ADDR}))
991       \{
992          \textcolor{comment}{//If every configuration option received in the Configure-Request is}
993          \textcolor{comment}{//recognizable and all values are acceptable, then the implementation}
994          \textcolor{comment}{//must transmit a Configure-Ack}
995          \textcolor{keywordflow}{if}(outPacket != \hyperlink{group__BSPDefine_ga070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL} && outPacket->code == \hyperlink{ppp_8h_a961984e634b12a11d381115a46f14188a915e8fc9f7c9bacb22b54dbccd684591}{PPP\_CODE\_CONFIGURE\_ACK})
996          \{
997             \textcolor{comment}{//Save interface identifier}
998             context->peerConfig.interfaceId = option->interfaceId;
999 
1000             \textcolor{comment}{//The options field of the Configure-Ack packet contains the}
1001             \textcolor{comment}{//configuration options that the sender is acknowledging}
1002             \hyperlink{ppp__misc_8c_a52b0a518f20c37d08e66f8c3b437c74f}{pppAddOption}(outPacket, \hyperlink{ipv6cp_8h_a3d700d5c3271bb0c36627bf74165259ea1db80b46491de378ce8a307bba6533f4}{IPV6CP\_OPTION\_INTERFACE\_ID},
1003                &option->interfaceId, option->length - \textcolor{keyword}{sizeof}(\hyperlink{ppp_8h_a531e616dc92a1bc09e2b7596eae470c8}{PppOption}));
1004          \}
1005 
1006          \textcolor{comment}{//The value is acceptable}
1007          error = \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689cabf350750d0d4fabd8954c0f1e9bbae94}{NO\_ERROR};
1008       \}
1009       \textcolor{keywordflow}{else}
1010       \{
1011          \textcolor{comment}{//If all configuration options are recognizable, but some values are not}
1012          \textcolor{comment}{//acceptable, then the implementation must transmit a Configure-Nak}
1013          \textcolor{keywordflow}{if}(outPacket != \hyperlink{group__BSPDefine_ga070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL} && outPacket->code == \hyperlink{ppp_8h_a961984e634b12a11d381115a46f14188aed576599db22b88142cb2cd4e71986be}{PPP\_CODE\_CONFIGURE\_NAK})
1014          \{
1015             \textcolor{comment}{//The option must be modified to a value acceptable to the}
1016             \textcolor{comment}{//Configure-Nak sender}
1017             \hyperlink{ppp__misc_8c_a52b0a518f20c37d08e66f8c3b437c74f}{pppAddOption}(outPacket, \hyperlink{ipv6cp_8h_a3d700d5c3271bb0c36627bf74165259ea1db80b46491de378ce8a307bba6533f4}{IPV6CP\_OPTION\_INTERFACE\_ID},
1018                &context->peerConfig.interfaceId, \textcolor{keyword}{sizeof}(\hyperlink{ethernet_8h_acbcae3afd042b3ce97e42f54013c8137}{Eui64}));
1019          \}
1020 
1021          \textcolor{comment}{//The value is not acceptable}
1022          error = \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689ca979424b1dc1779fe6193ab5161329513}{ERROR\_INVALID\_VALUE};
1023       \}
1024    \}
1025    \textcolor{keywordflow}{else}
1026    \{
1027       \textcolor{comment}{//Invalid length field}
1028       error = \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689cae5c014519c3ac2540447887ddca1bd28}{ERROR\_INVALID\_LENGTH};
1029    \}
1030 
1031    \textcolor{comment}{//Return status code}
1032    \textcolor{keywordflow}{return} error;
1033 \}
\end{DoxyCode}
\mbox{\Hypertarget{ipv6cp_8c_a7264dc210d753ef484aa5bfa6f5f5a7d}\label{ipv6cp_8c_a7264dc210d753ef484aa5bfa6f5f5a7d}} 
\index{ipv6cp.\+c@{ipv6cp.\+c}!ipv6cp\+Parse\+Option@{ipv6cp\+Parse\+Option}}
\index{ipv6cp\+Parse\+Option@{ipv6cp\+Parse\+Option}!ipv6cp.\+c@{ipv6cp.\+c}}
\subsubsection{\texorpdfstring{ipv6cp\+Parse\+Option()}{ipv6cpParseOption()}}
{\footnotesize\ttfamily \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689c}{error\+\_\+t} ipv6cp\+Parse\+Option (\begin{DoxyParamCaption}\item[{\hyperlink{ppp_8h_a896c00dd8ba8bad09b3f442b7aa5ad9c}{Ppp\+Context} $\ast$}]{context,  }\item[{\hyperlink{ppp_8h_a531e616dc92a1bc09e2b7596eae470c8}{Ppp\+Option} $\ast$}]{option,  }\item[{size\+\_\+t}]{in\+Packet\+Len,  }\item[{\hyperlink{ppp_8h_a5f9516e80961edda7e2c0b9b964bdd66}{Ppp\+Configure\+Packet} $\ast$}]{out\+Packet }\end{DoxyParamCaption})}



Parse I\+P\+V6\+CP configuration option. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em context} & P\+PP context \\
\hline
\mbox{\tt in}  & {\em option} & Option to be checked \\
\hline
\mbox{\tt in}  & {\em in\+Packet\+Len} & Remaining bytes to process in the incoming packet \\
\hline
\mbox{\tt out}  & {\em out\+Packet} & Pointer to the Configure-\/\+Ack, Nak or Reject packet \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Error code 
\end{DoxyReturn}


Definition at line 929 of file ipv6cp.\+c.


\begin{DoxyCode}
931 \{
932    \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689c}{error\_t} error;
933 
934    \textcolor{comment}{//Malformed IPV6CP packet?}
935    \textcolor{keywordflow}{if}(inPacketLen < \textcolor{keyword}{sizeof}(\hyperlink{ppp_8h_a531e616dc92a1bc09e2b7596eae470c8}{PppOption}))
936       \textcolor{keywordflow}{return} \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689cae5c014519c3ac2540447887ddca1bd28}{ERROR\_INVALID\_LENGTH};
937 
938    \textcolor{comment}{//Check option length}
939    \textcolor{keywordflow}{if}(option->length < \textcolor{keyword}{sizeof}(\hyperlink{ppp_8h_a531e616dc92a1bc09e2b7596eae470c8}{PppOption}))
940       \textcolor{keywordflow}{return} \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689cae5c014519c3ac2540447887ddca1bd28}{ERROR\_INVALID\_LENGTH};
941    \textcolor{keywordflow}{if}(option->length > inPacketLen)
942       \textcolor{keywordflow}{return} \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689cae5c014519c3ac2540447887ddca1bd28}{ERROR\_INVALID\_LENGTH};
943 
944    \textcolor{comment}{//Check option type}
945    \textcolor{keywordflow}{switch}(option->type)
946    \{
947    \textcolor{keywordflow}{case} \hyperlink{ipv6cp_8h_a3d700d5c3271bb0c36627bf74165259ea1db80b46491de378ce8a307bba6533f4}{IPV6CP\_OPTION\_INTERFACE\_ID}:
948       \textcolor{comment}{//Check Interface-Identifier option}
949       error = \hyperlink{ipv6cp_8c_a720896c4447613679b6fa49f7c9be927}{ipv6cpParseInterfaceIdOption}(context, (
      \hyperlink{ipv6cp_8h_a2cbb4494b0a9b55715570a897c51d12d}{Ipv6cpInterfaceIdOption} *) option, outPacket);
950       \textcolor{keywordflow}{break};
951    \textcolor{keywordflow}{default}:
952       \textcolor{comment}{//If some configuration options received in the Configure-Request are not}
953       \textcolor{comment}{//recognizable or not acceptable for negotiation, then the implementation}
954       \textcolor{comment}{//must transmit a Configure-Reject}
955       \textcolor{keywordflow}{if}(outPacket != \hyperlink{group__BSPDefine_ga070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL} && outPacket->code == \hyperlink{ppp_8h_a961984e634b12a11d381115a46f14188a5bd41f9dd646b4a1dd42c2f98f22cedd}{PPP\_CODE\_CONFIGURE\_REJ})
956       \{
957          \textcolor{comment}{//The options field of the Configure-Reject packet is filled}
958          \textcolor{comment}{//with the unrecognized options from the Configure-Request}
959          \hyperlink{ppp__misc_8c_a52b0a518f20c37d08e66f8c3b437c74f}{pppAddOption}(outPacket, option->type, option->data,
960             option->length - \textcolor{keyword}{sizeof}(\hyperlink{ppp_8h_a531e616dc92a1bc09e2b7596eae470c8}{PppOption}));
961       \}
962 
963       \textcolor{comment}{//The option is not acceptable for negotiation}
964       error = \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689ca2daa3c161edaa4477d1ae954c2136008}{ERROR\_INVALID\_TYPE};
965       \textcolor{keywordflow}{break};
966    \}
967 
968    \textcolor{comment}{//Return status code}
969    \textcolor{keywordflow}{return} error;
970 \}
\end{DoxyCode}
\mbox{\Hypertarget{ipv6cp_8c_a2396415da87efa9d3777c638d48a9671}\label{ipv6cp_8c_a2396415da87efa9d3777c638d48a9671}} 
\index{ipv6cp.\+c@{ipv6cp.\+c}!ipv6cp\+Process\+Code\+Rej@{ipv6cp\+Process\+Code\+Rej}}
\index{ipv6cp\+Process\+Code\+Rej@{ipv6cp\+Process\+Code\+Rej}!ipv6cp.\+c@{ipv6cp.\+c}}
\subsubsection{\texorpdfstring{ipv6cp\+Process\+Code\+Rej()}{ipv6cpProcessCodeRej()}}
{\footnotesize\ttfamily \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689c}{error\+\_\+t} ipv6cp\+Process\+Code\+Rej (\begin{DoxyParamCaption}\item[{\hyperlink{ppp_8h_a896c00dd8ba8bad09b3f442b7aa5ad9c}{Ppp\+Context} $\ast$}]{context,  }\item[{const \hyperlink{ppp_8h_ad05fe14ee4cca32c7b40f2cdf9c48a8d}{Ppp\+Code\+Rej\+Packet} $\ast$}]{code\+Rej\+Packet }\end{DoxyParamCaption})}



Process Code-\/\+Reject packet. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em context} & P\+PP context \\
\hline
\mbox{\tt in}  & {\em code\+Rej\+Packet} & Packet received from the peer \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Error code 
\end{DoxyReturn}


Definition at line 512 of file ipv6cp.\+c.


\begin{DoxyCode}
514 \{
515    \textcolor{keywordtype}{size\_t} \hyperlink{dtls__misc_8h_ab43ca82dd7fa2a0e56f941032ef324c4}{length};
516    \hyperlink{ppp_8h_aa975a68f06316e1db0de962a31e30c2e}{PppPacket} *packet;
517 
518    \textcolor{comment}{//Debug message}
519    \hyperlink{debug_8h_a7339bfd784193a5c79efcef2eeb2d6df}{TRACE\_INFO}(\textcolor{stringliteral}{"\(\backslash\)r\(\backslash\)nIPV6CP Receive-Code-Reject event\(\backslash\)r\(\backslash\)n"});
520 
521    \textcolor{comment}{//Point to the rejected packet}
522    packet = (\hyperlink{ppp_8h_aa975a68f06316e1db0de962a31e30c2e}{PppPacket} *) codeRejPacket->rejectedPacket;
523    \textcolor{comment}{//Retrieve the length of the rejected packet}
524    length = \hyperlink{cpu__endian_8h_a9312c6eb72e64f748ae0d0e0dc3ec9b9}{ntohs}(codeRejPacket->length) - \textcolor{keyword}{sizeof}(\hyperlink{ppp_8h_ad05fe14ee4cca32c7b40f2cdf9c48a8d}{PppCodeRejPacket});
525 
526    \textcolor{comment}{//Make sure the length of the rejected packet is valid}
527    \textcolor{keywordflow}{if}(length < \textcolor{keyword}{sizeof}(\hyperlink{ppp_8h_aa975a68f06316e1db0de962a31e30c2e}{PppPacket}))
528       \textcolor{keywordflow}{return} \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689cae5c014519c3ac2540447887ddca1bd28}{ERROR\_INVALID\_LENGTH};
529 
530    \textcolor{comment}{//Check whether the rejected value is acceptable or catastrophic}
531    \textcolor{keywordflow}{if}(packet->code < \hyperlink{ppp_8h_a961984e634b12a11d381115a46f14188a4e4279fdfcf8d81d216d58801f58d84d}{PPP\_CODE\_CONFIGURE\_REQ} ||
532       packet->code > \hyperlink{ppp_8h_a961984e634b12a11d381115a46f14188a7635f2c8a624bbf7fcb8eea300082a7d}{PPP\_CODE\_CODE\_REJ})
533    \{
534       \textcolor{comment}{//The RXJ+ event arises when the rejected value is acceptable, such}
535       \textcolor{comment}{//as a Code-Reject of an extended code, or a Protocol-Reject of a}
536       \textcolor{comment}{//NCP. These are within the scope of normal operation}
537       \hyperlink{ppp__fsm_8c_ab0b7104a9aeef47cf8a3611f8ff0c49d}{pppRcvCodeRejEvent}(context, &context->ipv6cpFsm, &
      \hyperlink{ipv6cp_8c_af27b47a14af596e2dfd51c437382c14e}{ipv6cpCallbacks}, \hyperlink{os__port_8h_aa8cecfc5c5c054d2875c03e77b7be15d}{TRUE});
538    \}
539    \textcolor{keywordflow}{else}
540    \{
541       \textcolor{comment}{//The RXJ- event arises when the rejected value is catastrophic, such}
542       \textcolor{comment}{//as a Code-Reject of Configure-Request! This event communicates an}
543       \textcolor{comment}{//unrecoverable error that terminates the connection}
544       \hyperlink{ppp__fsm_8c_ab0b7104a9aeef47cf8a3611f8ff0c49d}{pppRcvCodeRejEvent}(context, &context->ipv6cpFsm, &
      \hyperlink{ipv6cp_8c_af27b47a14af596e2dfd51c437382c14e}{ipv6cpCallbacks}, \hyperlink{os__port_8h_aa93f0eb578d23995850d61f7d61c55c1}{FALSE});
545    \}
546 
547    \textcolor{comment}{//Successful processing}
548    \textcolor{keywordflow}{return} \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689cabf350750d0d4fabd8954c0f1e9bbae94}{NO\_ERROR};
549 \}
\end{DoxyCode}
\mbox{\Hypertarget{ipv6cp_8c_a4a2e99f43c47c076be7fc82f95cf49db}\label{ipv6cp_8c_a4a2e99f43c47c076be7fc82f95cf49db}} 
\index{ipv6cp.\+c@{ipv6cp.\+c}!ipv6cp\+Process\+Configure\+Ack@{ipv6cp\+Process\+Configure\+Ack}}
\index{ipv6cp\+Process\+Configure\+Ack@{ipv6cp\+Process\+Configure\+Ack}!ipv6cp.\+c@{ipv6cp.\+c}}
\subsubsection{\texorpdfstring{ipv6cp\+Process\+Configure\+Ack()}{ipv6cpProcessConfigureAck()}}
{\footnotesize\ttfamily \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689c}{error\+\_\+t} ipv6cp\+Process\+Configure\+Ack (\begin{DoxyParamCaption}\item[{\hyperlink{ppp_8h_a896c00dd8ba8bad09b3f442b7aa5ad9c}{Ppp\+Context} $\ast$}]{context,  }\item[{const \hyperlink{ppp_8h_a5f9516e80961edda7e2c0b9b964bdd66}{Ppp\+Configure\+Packet} $\ast$}]{configure\+Ack\+Packet }\end{DoxyParamCaption})}



Process Configure-\/\+Ack packet. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em context} & P\+PP context \\
\hline
\mbox{\tt in}  & {\em configure\+Ack\+Packet} & Packet received from the peer \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Error code 
\end{DoxyReturn}


Definition at line 322 of file ipv6cp.\+c.


\begin{DoxyCode}
324 \{
325    \textcolor{comment}{//Debug message}
326    \hyperlink{debug_8h_a7339bfd784193a5c79efcef2eeb2d6df}{TRACE\_INFO}(\textcolor{stringliteral}{"\(\backslash\)r\(\backslash\)nIPV6CP Receive-Configure-Ack event\(\backslash\)r\(\backslash\)n"});
327 
328    \textcolor{comment}{//When a packet is received with an invalid Identifier field, the}
329    \textcolor{comment}{//packet is silently discarded without affecting the automaton}
330    \textcolor{keywordflow}{if}(configureAckPacket->identifier != context->ipv6cpFsm.identifier)
331       \textcolor{keywordflow}{return} \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689ca2bc2298123e24e3d82592b5c68c20612}{ERROR\_WRONG\_IDENTIFIER};
332 
333    \textcolor{comment}{//A valid Configure-Ack packet has been received from the peer}
334    \hyperlink{ppp__fsm_8c_a45bb9f242e43bee7a741258f86c9c276}{pppRcvConfigureAckEvent}(context, &context->ipv6cpFsm, &
      \hyperlink{ipv6cp_8c_af27b47a14af596e2dfd51c437382c14e}{ipv6cpCallbacks});
335 
336    \textcolor{comment}{//Successful processing}
337    \textcolor{keywordflow}{return} \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689cabf350750d0d4fabd8954c0f1e9bbae94}{NO\_ERROR};
338 \}
\end{DoxyCode}
\mbox{\Hypertarget{ipv6cp_8c_a8b9bfc07eca660ad8b4f66057c9b221f}\label{ipv6cp_8c_a8b9bfc07eca660ad8b4f66057c9b221f}} 
\index{ipv6cp.\+c@{ipv6cp.\+c}!ipv6cp\+Process\+Configure\+Nak@{ipv6cp\+Process\+Configure\+Nak}}
\index{ipv6cp\+Process\+Configure\+Nak@{ipv6cp\+Process\+Configure\+Nak}!ipv6cp.\+c@{ipv6cp.\+c}}
\subsubsection{\texorpdfstring{ipv6cp\+Process\+Configure\+Nak()}{ipv6cpProcessConfigureNak()}}
{\footnotesize\ttfamily \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689c}{error\+\_\+t} ipv6cp\+Process\+Configure\+Nak (\begin{DoxyParamCaption}\item[{\hyperlink{ppp_8h_a896c00dd8ba8bad09b3f442b7aa5ad9c}{Ppp\+Context} $\ast$}]{context,  }\item[{const \hyperlink{ppp_8h_a5f9516e80961edda7e2c0b9b964bdd66}{Ppp\+Configure\+Packet} $\ast$}]{configure\+Nak\+Packet }\end{DoxyParamCaption})}



Process Configure-\/\+Nak packet. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em context} & P\+PP context \\
\hline
\mbox{\tt in}  & {\em configure\+Nak\+Packet} & Packet received from the peer \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Error code 
\end{DoxyReturn}


Definition at line 348 of file ipv6cp.\+c.


\begin{DoxyCode}
350 \{
351    \textcolor{keywordtype}{size\_t} \hyperlink{dtls__misc_8h_ab43ca82dd7fa2a0e56f941032ef324c4}{length};
352    \hyperlink{ppp_8h_a531e616dc92a1bc09e2b7596eae470c8}{PppOption} *option;
353 
354    \textcolor{comment}{//Debug message}
355    \hyperlink{debug_8h_a7339bfd784193a5c79efcef2eeb2d6df}{TRACE\_INFO}(\textcolor{stringliteral}{"IPV6CP Receive-Configure-Nak event\(\backslash\)r\(\backslash\)n"});
356 
357    \textcolor{comment}{//When a packet is received with an invalid Identifier field, the}
358    \textcolor{comment}{//packet is silently discarded without affecting the automaton}
359    \textcolor{keywordflow}{if}(configureNakPacket->identifier != context->ipv6cpFsm.identifier)
360       \textcolor{keywordflow}{return} \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689ca2bc2298123e24e3d82592b5c68c20612}{ERROR\_WRONG\_IDENTIFIER};
361 
362    \textcolor{comment}{//Retrieve the length of the option list}
363    length = \hyperlink{cpu__endian_8h_a9312c6eb72e64f748ae0d0e0dc3ec9b9}{ntohs}(configureNakPacket->length) - \textcolor{keyword}{sizeof}(\hyperlink{ppp_8h_a5f9516e80961edda7e2c0b9b964bdd66}{PppConfigurePacket});
364    \textcolor{comment}{//Point to the first option}
365    option = (\hyperlink{ppp_8h_a531e616dc92a1bc09e2b7596eae470c8}{PppOption} *) configureNakPacket->options;
366 
367    \textcolor{comment}{//Parse configuration options}
368    \textcolor{keywordflow}{while}(length > 0)
369    \{
370       \textcolor{comment}{//Check option length}
371       \textcolor{keywordflow}{if}(option->length < \textcolor{keyword}{sizeof}(\hyperlink{ppp_8h_a531e616dc92a1bc09e2b7596eae470c8}{PppOption}))
372          \textcolor{keywordflow}{return} \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689cae5c014519c3ac2540447887ddca1bd28}{ERROR\_INVALID\_LENGTH};
373       \textcolor{keywordflow}{if}(option->length > length)
374          \textcolor{keywordflow}{return} \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689cae5c014519c3ac2540447887ddca1bd28}{ERROR\_INVALID\_LENGTH};
375 
376       \textcolor{comment}{//Interface-Identifier option?}
377       \textcolor{keywordflow}{if}(option->type == \hyperlink{ipv6cp_8h_a3d700d5c3271bb0c36627bf74165259ea1db80b46491de378ce8a307bba6533f4}{IPV6CP\_OPTION\_INTERFACE\_ID})
378       \{
379          \textcolor{comment}{//Cast option}
380          \hyperlink{ipv6cp_8h_a2cbb4494b0a9b55715570a897c51d12d}{Ipv6cpInterfaceIdOption} *interfaceIdOption = (
      \hyperlink{ipv6cp_8h_a2cbb4494b0a9b55715570a897c51d12d}{Ipv6cpInterfaceIdOption} *) option;
381 
382          \textcolor{comment}{//Check option length}
383          \textcolor{keywordflow}{if}(interfaceIdOption->length != \textcolor{keyword}{sizeof}(\hyperlink{ipv6cp_8h_a2cbb4494b0a9b55715570a897c51d12d}{Ipv6cpInterfaceIdOption}))
384             \textcolor{keywordflow}{return} \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689cae5c014519c3ac2540447887ddca1bd28}{ERROR\_INVALID\_LENGTH};
385 
386          \textcolor{comment}{//Save interface identifier}
387          context->localConfig.interfaceId = interfaceIdOption->interfaceId;
388       \}
389 
390       \textcolor{comment}{//Remaining bytes to process}
391       length -= option->length;
392       \textcolor{comment}{//Jump to the next option}
393       option = (\hyperlink{ppp_8h_a531e616dc92a1bc09e2b7596eae470c8}{PppOption} *) ((\hyperlink{stdint_8h_aba7bc1797add20fe3efdf37ced1182c5}{uint8\_t} *) option + option->length);
394    \}
395 
396    \textcolor{comment}{//A valid Configure-Nak or Configure-Reject packet has been received from the peer}
397    \hyperlink{ppp__fsm_8c_afb660738da04688fc48d49afbca2b594}{pppRcvConfigureNakEvent}(context, &context->ipv6cpFsm, &
      \hyperlink{ipv6cp_8c_af27b47a14af596e2dfd51c437382c14e}{ipv6cpCallbacks});
398 
399    \textcolor{comment}{//Successful processing}
400    \textcolor{keywordflow}{return} \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689cabf350750d0d4fabd8954c0f1e9bbae94}{NO\_ERROR};
401 \}
\end{DoxyCode}
\mbox{\Hypertarget{ipv6cp_8c_a5e5e8ac6b1a544af3e2cbd3ebbf682da}\label{ipv6cp_8c_a5e5e8ac6b1a544af3e2cbd3ebbf682da}} 
\index{ipv6cp.\+c@{ipv6cp.\+c}!ipv6cp\+Process\+Configure\+Reject@{ipv6cp\+Process\+Configure\+Reject}}
\index{ipv6cp\+Process\+Configure\+Reject@{ipv6cp\+Process\+Configure\+Reject}!ipv6cp.\+c@{ipv6cp.\+c}}
\subsubsection{\texorpdfstring{ipv6cp\+Process\+Configure\+Reject()}{ipv6cpProcessConfigureReject()}}
{\footnotesize\ttfamily \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689c}{error\+\_\+t} ipv6cp\+Process\+Configure\+Reject (\begin{DoxyParamCaption}\item[{\hyperlink{ppp_8h_a896c00dd8ba8bad09b3f442b7aa5ad9c}{Ppp\+Context} $\ast$}]{context,  }\item[{const \hyperlink{ppp_8h_a5f9516e80961edda7e2c0b9b964bdd66}{Ppp\+Configure\+Packet} $\ast$}]{configure\+Rej\+Packet }\end{DoxyParamCaption})}



Process Configure-\/\+Reject packet. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em context} & P\+PP context \\
\hline
\mbox{\tt in}  & {\em configure\+Rej\+Packet} & Packet received from the peer \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Error code 
\end{DoxyReturn}


Definition at line 411 of file ipv6cp.\+c.


\begin{DoxyCode}
413 \{
414    \textcolor{keywordtype}{size\_t} \hyperlink{dtls__misc_8h_ab43ca82dd7fa2a0e56f941032ef324c4}{length};
415    \hyperlink{ppp_8h_a531e616dc92a1bc09e2b7596eae470c8}{PppOption} *option;
416 
417    \textcolor{comment}{//Debug message}
418    \hyperlink{debug_8h_a7339bfd784193a5c79efcef2eeb2d6df}{TRACE\_INFO}(\textcolor{stringliteral}{"\(\backslash\)r\(\backslash\)nIPV6CP Receive-Configure-Reject event\(\backslash\)r\(\backslash\)n"});
419 
420    \textcolor{comment}{//When a packet is received with an invalid Identifier field, the}
421    \textcolor{comment}{//packet is silently discarded without affecting the automaton}
422    \textcolor{keywordflow}{if}(configureRejPacket->identifier != context->ipv6cpFsm.identifier)
423       \textcolor{keywordflow}{return} \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689ca2bc2298123e24e3d82592b5c68c20612}{ERROR\_WRONG\_IDENTIFIER};
424 
425    \textcolor{comment}{//Retrieve the length of the option list}
426    length = \hyperlink{cpu__endian_8h_a9312c6eb72e64f748ae0d0e0dc3ec9b9}{ntohs}(configureRejPacket->length) - \textcolor{keyword}{sizeof}(\hyperlink{ppp_8h_a5f9516e80961edda7e2c0b9b964bdd66}{PppConfigurePacket});
427    \textcolor{comment}{//Point to the first option}
428    option = (\hyperlink{ppp_8h_a531e616dc92a1bc09e2b7596eae470c8}{PppOption} *) configureRejPacket->options;
429 
430    \textcolor{comment}{//Parse configuration options}
431    \textcolor{keywordflow}{while}(length > 0)
432    \{
433       \textcolor{comment}{//Check option length}
434       \textcolor{keywordflow}{if}(option->length < \textcolor{keyword}{sizeof}(\hyperlink{ppp_8h_a531e616dc92a1bc09e2b7596eae470c8}{PppOption}))
435          \textcolor{keywordflow}{return} \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689cae5c014519c3ac2540447887ddca1bd28}{ERROR\_INVALID\_LENGTH};
436       \textcolor{keywordflow}{if}(option->length > length)
437          \textcolor{keywordflow}{return} \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689cae5c014519c3ac2540447887ddca1bd28}{ERROR\_INVALID\_LENGTH};
438 
439       \textcolor{comment}{//Interface-Identifier option?}
440       \textcolor{keywordflow}{if}(option->type == \hyperlink{ipv6cp_8h_a3d700d5c3271bb0c36627bf74165259ea1db80b46491de378ce8a307bba6533f4}{IPV6CP\_OPTION\_INTERFACE\_ID})
441       \{
442          \textcolor{comment}{//The option is not recognized by the peer}
443          context->localConfig.interfaceIdRejected = \hyperlink{os__port_8h_aa8cecfc5c5c054d2875c03e77b7be15d}{TRUE};
444       \}
445 
446       \textcolor{comment}{//Remaining bytes to process}
447       length -= option->length;
448       \textcolor{comment}{//Jump to the next option}
449       option = (\hyperlink{ppp_8h_a531e616dc92a1bc09e2b7596eae470c8}{PppOption} *) ((\hyperlink{stdint_8h_aba7bc1797add20fe3efdf37ced1182c5}{uint8\_t} *) option + option->length);
450    \}
451 
452    \textcolor{comment}{//A valid Configure-Nak or Configure-Reject packet has been received from the peer}
453    \hyperlink{ppp__fsm_8c_afb660738da04688fc48d49afbca2b594}{pppRcvConfigureNakEvent}(context, &context->ipv6cpFsm, &
      \hyperlink{ipv6cp_8c_af27b47a14af596e2dfd51c437382c14e}{ipv6cpCallbacks});
454 
455    \textcolor{comment}{//Successful processing}
456    \textcolor{keywordflow}{return} \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689cabf350750d0d4fabd8954c0f1e9bbae94}{NO\_ERROR};
457 \}
\end{DoxyCode}
\mbox{\Hypertarget{ipv6cp_8c_a857d6287fd9a4a29adf17010c870e099}\label{ipv6cp_8c_a857d6287fd9a4a29adf17010c870e099}} 
\index{ipv6cp.\+c@{ipv6cp.\+c}!ipv6cp\+Process\+Configure\+Req@{ipv6cp\+Process\+Configure\+Req}}
\index{ipv6cp\+Process\+Configure\+Req@{ipv6cp\+Process\+Configure\+Req}!ipv6cp.\+c@{ipv6cp.\+c}}
\subsubsection{\texorpdfstring{ipv6cp\+Process\+Configure\+Req()}{ipv6cpProcessConfigureReq()}}
{\footnotesize\ttfamily \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689c}{error\+\_\+t} ipv6cp\+Process\+Configure\+Req (\begin{DoxyParamCaption}\item[{\hyperlink{ppp_8h_a896c00dd8ba8bad09b3f442b7aa5ad9c}{Ppp\+Context} $\ast$}]{context,  }\item[{const \hyperlink{ppp_8h_a5f9516e80961edda7e2c0b9b964bdd66}{Ppp\+Configure\+Packet} $\ast$}]{configure\+Req\+Packet }\end{DoxyParamCaption})}



Process Configure-\/\+Request packet. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em context} & P\+PP context \\
\hline
\mbox{\tt in}  & {\em configure\+Req\+Packet} & Packet received from the peer \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Error code 
\end{DoxyReturn}


Definition at line 226 of file ipv6cp.\+c.


\begin{DoxyCode}
228 \{
229    \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689c}{error\_t} error;
230    \textcolor{keywordtype}{size\_t} \hyperlink{dtls__misc_8h_ab43ca82dd7fa2a0e56f941032ef324c4}{length};
231    \hyperlink{compiler__port_8h_a812d16e5494522586b3784e55d479912}{bool\_t} notRecognizable;
232    \hyperlink{compiler__port_8h_a812d16e5494522586b3784e55d479912}{bool\_t} notAcceptable;
233    \hyperlink{ppp_8h_a531e616dc92a1bc09e2b7596eae470c8}{PppOption} *option;
234 
235    \textcolor{comment}{//Debug message}
236    \hyperlink{debug_8h_a7339bfd784193a5c79efcef2eeb2d6df}{TRACE\_INFO}(\textcolor{stringliteral}{"\(\backslash\)r\(\backslash\)nIPV6CP Receive-Configure-Request event\(\backslash\)r\(\backslash\)n"});
237 
238    \textcolor{comment}{//Initialize variables}
239    error = \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689cabf350750d0d4fabd8954c0f1e9bbae94}{NO\_ERROR};
240    notRecognizable = \hyperlink{os__port_8h_aa93f0eb578d23995850d61f7d61c55c1}{FALSE};
241    notAcceptable = \hyperlink{os__port_8h_aa93f0eb578d23995850d61f7d61c55c1}{FALSE};
242 
243    \textcolor{comment}{//Retrieve the length of the option list}
244    length = \hyperlink{cpu__endian_8h_a9312c6eb72e64f748ae0d0e0dc3ec9b9}{ntohs}(configureReqPacket->length) - \textcolor{keyword}{sizeof}(\hyperlink{ppp_8h_a5f9516e80961edda7e2c0b9b964bdd66}{PppConfigurePacket});
245    \textcolor{comment}{//Point to the first option}
246    option = (\hyperlink{ppp_8h_a531e616dc92a1bc09e2b7596eae470c8}{PppOption} *) configureReqPacket->options;
247 
248    \textcolor{comment}{//Parse configuration options}
249    \textcolor{keywordflow}{while}(length > 0)
250    \{
251       \textcolor{comment}{//Parse current option}
252       error = \hyperlink{ipv6cp_8c_a7264dc210d753ef484aa5bfa6f5f5a7d}{ipv6cpParseOption}(context, option, length, \hyperlink{group__BSPDefine_ga070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL});
253 
254       \textcolor{comment}{//Any error to report?}
255       \textcolor{keywordflow}{if}(error == \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689ca2daa3c161edaa4477d1ae954c2136008}{ERROR\_INVALID\_TYPE})
256       \{
257          \textcolor{comment}{//Option not recognizable}
258          notRecognizable = \hyperlink{os__port_8h_aa8cecfc5c5c054d2875c03e77b7be15d}{TRUE};
259          \textcolor{comment}{//Catch error}
260          error = \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689cabf350750d0d4fabd8954c0f1e9bbae94}{NO\_ERROR};
261       \}
262       \textcolor{keywordflow}{else} \textcolor{keywordflow}{if}(error == \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689ca979424b1dc1779fe6193ab5161329513}{ERROR\_INVALID\_VALUE})
263       \{
264          \textcolor{comment}{//Option not acceptable for configuration}
265          notAcceptable = \hyperlink{os__port_8h_aa8cecfc5c5c054d2875c03e77b7be15d}{TRUE};
266          \textcolor{comment}{//Catch error}
267          error = \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689cabf350750d0d4fabd8954c0f1e9bbae94}{NO\_ERROR};
268       \}
269       \textcolor{keywordflow}{else} \textcolor{keywordflow}{if}(error)
270       \{
271          \textcolor{comment}{//Malformed Configure-Request packet}
272          \textcolor{keywordflow}{break};
273       \}
274 
275       \textcolor{comment}{//Remaining bytes to process}
276       length -= option->length;
277       \textcolor{comment}{//Jump to the next option}
278       option = (\hyperlink{ppp_8h_a531e616dc92a1bc09e2b7596eae470c8}{PppOption} *) ((\hyperlink{stdint_8h_aba7bc1797add20fe3efdf37ced1182c5}{uint8\_t} *) option + option->length);
279    \}
280 
281    \textcolor{comment}{//Valid Configure-Request packet received from the peer?}
282    \textcolor{keywordflow}{if}(!error)
283    \{
284       \textcolor{comment}{//Check flags}
285       \textcolor{keywordflow}{if}(notRecognizable)
286       \{
287          \textcolor{comment}{//If some configuration options received in the Configure-Request are not}
288          \textcolor{comment}{//recognizable or not acceptable for negotiation, then the implementation}
289          \textcolor{comment}{//must transmit a Configure-Reject}
290          \hyperlink{ppp__fsm_8c_af1c972a74fd368977eee1df1eedac2d4}{pppRcvConfigureReqEvent}(context, &context->ipv6cpFsm, &
      \hyperlink{ipv6cp_8c_af27b47a14af596e2dfd51c437382c14e}{ipv6cpCallbacks},
291             configureReqPacket, \hyperlink{ppp_8h_a961984e634b12a11d381115a46f14188a5bd41f9dd646b4a1dd42c2f98f22cedd}{PPP\_CODE\_CONFIGURE\_REJ});
292       \}
293       \textcolor{keywordflow}{else} \textcolor{keywordflow}{if}(notAcceptable)
294       \{
295          \textcolor{comment}{//If all configuration options are recognizable, but some values are not}
296          \textcolor{comment}{//acceptable, then the implementation must transmit a Configure-Nak}
297          \hyperlink{ppp__fsm_8c_af1c972a74fd368977eee1df1eedac2d4}{pppRcvConfigureReqEvent}(context, &context->ipv6cpFsm, &
      \hyperlink{ipv6cp_8c_af27b47a14af596e2dfd51c437382c14e}{ipv6cpCallbacks},
298             configureReqPacket, \hyperlink{ppp_8h_a961984e634b12a11d381115a46f14188aed576599db22b88142cb2cd4e71986be}{PPP\_CODE\_CONFIGURE\_NAK});
299       \}
300       \textcolor{keywordflow}{else}
301       \{
302          \textcolor{comment}{//If every configuration option received in the Configure-Request is}
303          \textcolor{comment}{//recognizable and all values are acceptable, then the implementation}
304          \textcolor{comment}{//must transmit a Configure-Ack}
305          \hyperlink{ppp__fsm_8c_af1c972a74fd368977eee1df1eedac2d4}{pppRcvConfigureReqEvent}(context, &context->ipv6cpFsm, &
      \hyperlink{ipv6cp_8c_af27b47a14af596e2dfd51c437382c14e}{ipv6cpCallbacks},
306             configureReqPacket, \hyperlink{ppp_8h_a961984e634b12a11d381115a46f14188a915e8fc9f7c9bacb22b54dbccd684591}{PPP\_CODE\_CONFIGURE\_ACK});
307       \}
308    \}
309 
310    \textcolor{comment}{//Return status code}
311    \textcolor{keywordflow}{return} error;
312 \}
\end{DoxyCode}
\mbox{\Hypertarget{ipv6cp_8c_a2affb96ff3fd10841c3a2b1508a2fcb6}\label{ipv6cp_8c_a2affb96ff3fd10841c3a2b1508a2fcb6}} 
\index{ipv6cp.\+c@{ipv6cp.\+c}!ipv6cp\+Process\+Packet@{ipv6cp\+Process\+Packet}}
\index{ipv6cp\+Process\+Packet@{ipv6cp\+Process\+Packet}!ipv6cp.\+c@{ipv6cp.\+c}}
\subsubsection{\texorpdfstring{ipv6cp\+Process\+Packet()}{ipv6cpProcessPacket()}}
{\footnotesize\ttfamily void ipv6cp\+Process\+Packet (\begin{DoxyParamCaption}\item[{\hyperlink{ppp_8h_a896c00dd8ba8bad09b3f442b7aa5ad9c}{Ppp\+Context} $\ast$}]{context,  }\item[{const \hyperlink{ppp_8h_aa975a68f06316e1db0de962a31e30c2e}{Ppp\+Packet} $\ast$}]{packet,  }\item[{size\+\_\+t}]{length }\end{DoxyParamCaption})}



Process an incoming I\+P\+V6\+CP packet. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em context} & P\+PP context \\
\hline
\mbox{\tt in}  & {\em packet} & I\+P\+V6\+CP packet received from the peer \\
\hline
\mbox{\tt in}  & {\em length} & Length of the packet, in bytes \\
\hline
\end{DoxyParams}


Definition at line 152 of file ipv6cp.\+c.


\begin{DoxyCode}
153 \{
154    \textcolor{comment}{//Ensure the length of the incoming IPV6CP packet is valid}
155    \textcolor{keywordflow}{if}(\hyperlink{dtls__misc_8h_ab43ca82dd7fa2a0e56f941032ef324c4}{length} < \textcolor{keyword}{sizeof}(\hyperlink{ppp_8h_aa975a68f06316e1db0de962a31e30c2e}{PppPacket}))
156       \textcolor{keywordflow}{return};
157 
158    \textcolor{comment}{//Check the length field}
159    \textcolor{keywordflow}{if}(\hyperlink{cpu__endian_8h_a9312c6eb72e64f748ae0d0e0dc3ec9b9}{ntohs}(packet->length) > \hyperlink{dtls__misc_8h_ab43ca82dd7fa2a0e56f941032ef324c4}{length})
160       \textcolor{keywordflow}{return};
161    \textcolor{keywordflow}{if}(\hyperlink{cpu__endian_8h_a9312c6eb72e64f748ae0d0e0dc3ec9b9}{ntohs}(packet->length) < \textcolor{keyword}{sizeof}(\hyperlink{ppp_8h_aa975a68f06316e1db0de962a31e30c2e}{PppPacket}))
162       \textcolor{keywordflow}{return};
163 
164    \textcolor{comment}{//Save the length of the IPV6CP packet}
165    \hyperlink{dtls__misc_8h_ab43ca82dd7fa2a0e56f941032ef324c4}{length} = \hyperlink{cpu__endian_8h_a9312c6eb72e64f748ae0d0e0dc3ec9b9}{ntohs}(packet->length);
166 
167    \textcolor{comment}{//Debug message}
168    \hyperlink{debug_8h_a7339bfd784193a5c79efcef2eeb2d6df}{TRACE\_INFO}(\textcolor{stringliteral}{"IPV6CP packet received (%"} \hyperlink{compiler__port_8h_a2b7b0557dc6cd786df02dafbb51f5292}{PRIuSIZE} \textcolor{stringliteral}{" bytes)...\(\backslash\)r\(\backslash\)n"}, 
      \hyperlink{dtls__misc_8h_ab43ca82dd7fa2a0e56f941032ef324c4}{length});
169    \textcolor{comment}{//Dump IPV6CP packet contents for debugging purpose}
170    \hyperlink{ppp__debug_8c_aebeb2591b3799b0ede290881fdd67e78}{pppDumpPacket}(packet, \hyperlink{dtls__misc_8h_ab43ca82dd7fa2a0e56f941032ef324c4}{length}, \hyperlink{ppp_8h_a5d2e3565b503cd5cb131aaff4e0ba9c2abc85aaca4959631f37902c4c8f34146a}{PPP\_PROTOCOL\_IPV6CP});
171 
172    \textcolor{comment}{//Check IPV6CP code field}
173    \textcolor{keywordflow}{switch}(packet->code)
174    \{
175    \textcolor{comment}{//Configure-Request packet?}
176    \textcolor{keywordflow}{case} \hyperlink{ppp_8h_a961984e634b12a11d381115a46f14188a4e4279fdfcf8d81d216d58801f58d84d}{PPP\_CODE\_CONFIGURE\_REQ}:
177       \textcolor{comment}{//Process Configure-Request packet}
178       \hyperlink{ipv6cp_8c_a857d6287fd9a4a29adf17010c870e099}{ipv6cpProcessConfigureReq}(context, (
      \hyperlink{ppp_8h_a5f9516e80961edda7e2c0b9b964bdd66}{PppConfigurePacket} *) packet);
179       \textcolor{keywordflow}{break};
180    \textcolor{comment}{//Configure-Ack packet?}
181    \textcolor{keywordflow}{case} \hyperlink{ppp_8h_a961984e634b12a11d381115a46f14188a915e8fc9f7c9bacb22b54dbccd684591}{PPP\_CODE\_CONFIGURE\_ACK}:
182       \textcolor{comment}{//Process Configure-Ack packet}
183       \hyperlink{ipv6cp_8c_a4a2e99f43c47c076be7fc82f95cf49db}{ipv6cpProcessConfigureAck}(context, (
      \hyperlink{ppp_8h_a5f9516e80961edda7e2c0b9b964bdd66}{PppConfigurePacket} *) packet);
184       \textcolor{keywordflow}{break};
185    \textcolor{comment}{//Configure-Nak packet?}
186    \textcolor{keywordflow}{case} \hyperlink{ppp_8h_a961984e634b12a11d381115a46f14188aed576599db22b88142cb2cd4e71986be}{PPP\_CODE\_CONFIGURE\_NAK}:
187       \textcolor{comment}{//Process Configure-Nak packet}
188       \hyperlink{ipv6cp_8c_a8b9bfc07eca660ad8b4f66057c9b221f}{ipv6cpProcessConfigureNak}(context, (
      \hyperlink{ppp_8h_a5f9516e80961edda7e2c0b9b964bdd66}{PppConfigurePacket} *) packet);
189       \textcolor{keywordflow}{break};
190    \textcolor{comment}{//Configure-Reject packet?}
191    \textcolor{keywordflow}{case} \hyperlink{ppp_8h_a961984e634b12a11d381115a46f14188a5bd41f9dd646b4a1dd42c2f98f22cedd}{PPP\_CODE\_CONFIGURE\_REJ}:
192       \textcolor{comment}{//Process Configure-Reject packet}
193       \hyperlink{ipv6cp_8c_a5e5e8ac6b1a544af3e2cbd3ebbf682da}{ipv6cpProcessConfigureReject}(context, (
      \hyperlink{ppp_8h_a5f9516e80961edda7e2c0b9b964bdd66}{PppConfigurePacket} *) packet);
194       \textcolor{keywordflow}{break};
195    \textcolor{comment}{//Terminate-Request packet?}
196    \textcolor{keywordflow}{case} \hyperlink{ppp_8h_a961984e634b12a11d381115a46f14188a7471c8252f420930c98ee6a789724a2d}{PPP\_CODE\_TERMINATE\_REQ}:
197       \textcolor{comment}{//Process Terminate-Request packet}
198       \hyperlink{ipv6cp_8c_aa1f969fd6c01ef8fe8b63df350cec136}{ipv6cpProcessTerminateReq}(context, (
      \hyperlink{ppp_8h_a224d9bad9d75f66f3d0284450ddf6fb4}{PppTerminatePacket} *) packet);
199       \textcolor{keywordflow}{break};
200    \textcolor{comment}{//Terminate-Ack packet?}
201    \textcolor{keywordflow}{case} \hyperlink{ppp_8h_a961984e634b12a11d381115a46f14188a6e7e46a330cfb72374afc3d09f275860}{PPP\_CODE\_TERMINATE\_ACK}:
202       \textcolor{comment}{//Process Terminate-Ack packet}
203       \hyperlink{ipv6cp_8c_a683f6180a3ffb01ed63d51d96c9c7313}{ipv6cpProcessTerminateAck}(context, (
      \hyperlink{ppp_8h_a224d9bad9d75f66f3d0284450ddf6fb4}{PppTerminatePacket} *) packet);
204       \textcolor{keywordflow}{break};
205    \textcolor{comment}{//Code-Reject packet?}
206    \textcolor{keywordflow}{case} \hyperlink{ppp_8h_a961984e634b12a11d381115a46f14188a7635f2c8a624bbf7fcb8eea300082a7d}{PPP\_CODE\_CODE\_REJ}:
207       \textcolor{comment}{//Process Code-Reject packet}
208       \hyperlink{ipv6cp_8c_a2396415da87efa9d3777c638d48a9671}{ipv6cpProcessCodeRej}(context, (\hyperlink{ppp_8h_ad05fe14ee4cca32c7b40f2cdf9c48a8d}{PppCodeRejPacket} *) packet);
209       \textcolor{keywordflow}{break};
210    \textcolor{comment}{//Unknown code field}
211    \textcolor{keywordflow}{default}:
212       \textcolor{comment}{//The packet is un-interpretable}
213       \hyperlink{ipv6cp_8c_a8861d1dc284507a62d678406519e06b0}{ipv6cpProcessUnknownCode}(context, packet);
214       \textcolor{keywordflow}{break};
215    \}
216 \}
\end{DoxyCode}
\mbox{\Hypertarget{ipv6cp_8c_a683f6180a3ffb01ed63d51d96c9c7313}\label{ipv6cp_8c_a683f6180a3ffb01ed63d51d96c9c7313}} 
\index{ipv6cp.\+c@{ipv6cp.\+c}!ipv6cp\+Process\+Terminate\+Ack@{ipv6cp\+Process\+Terminate\+Ack}}
\index{ipv6cp\+Process\+Terminate\+Ack@{ipv6cp\+Process\+Terminate\+Ack}!ipv6cp.\+c@{ipv6cp.\+c}}
\subsubsection{\texorpdfstring{ipv6cp\+Process\+Terminate\+Ack()}{ipv6cpProcessTerminateAck()}}
{\footnotesize\ttfamily \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689c}{error\+\_\+t} ipv6cp\+Process\+Terminate\+Ack (\begin{DoxyParamCaption}\item[{\hyperlink{ppp_8h_a896c00dd8ba8bad09b3f442b7aa5ad9c}{Ppp\+Context} $\ast$}]{context,  }\item[{const \hyperlink{ppp_8h_a224d9bad9d75f66f3d0284450ddf6fb4}{Ppp\+Terminate\+Packet} $\ast$}]{terminate\+Ack\+Packet }\end{DoxyParamCaption})}



Process Terminate-\/\+Ack packet. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em context} & P\+PP context \\
\hline
\mbox{\tt in}  & {\em terminate\+Ack\+Packet} & Packet received from the peer \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Error code 
\end{DoxyReturn}


Definition at line 489 of file ipv6cp.\+c.


\begin{DoxyCode}
491 \{
492    \textcolor{comment}{//Debug message}
493    \hyperlink{debug_8h_a7339bfd784193a5c79efcef2eeb2d6df}{TRACE\_INFO}(\textcolor{stringliteral}{"\(\backslash\)r\(\backslash\)nIPV6CP Receive-Terminate-Ack event\(\backslash\)r\(\backslash\)n"});
494 
495    \textcolor{comment}{//The Terminate-Ack packet is usually a response to a Terminate-Request}
496    \textcolor{comment}{//packet. This packet may also indicate that the peer is in Closed or}
497    \textcolor{comment}{//Stopped states, and serves to re-synchronize the link configuration}
498    \hyperlink{ppp__fsm_8c_aee79a99cb18b0c11f3d8a728d59b5ca8}{pppRcvTerminateAckEvent}(context, &context->ipv6cpFsm, &
      \hyperlink{ipv6cp_8c_af27b47a14af596e2dfd51c437382c14e}{ipv6cpCallbacks});
499 
500    \textcolor{comment}{//Successful processing}
501    \textcolor{keywordflow}{return} \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689cabf350750d0d4fabd8954c0f1e9bbae94}{NO\_ERROR};
502 \}
\end{DoxyCode}
\mbox{\Hypertarget{ipv6cp_8c_aa1f969fd6c01ef8fe8b63df350cec136}\label{ipv6cp_8c_aa1f969fd6c01ef8fe8b63df350cec136}} 
\index{ipv6cp.\+c@{ipv6cp.\+c}!ipv6cp\+Process\+Terminate\+Req@{ipv6cp\+Process\+Terminate\+Req}}
\index{ipv6cp\+Process\+Terminate\+Req@{ipv6cp\+Process\+Terminate\+Req}!ipv6cp.\+c@{ipv6cp.\+c}}
\subsubsection{\texorpdfstring{ipv6cp\+Process\+Terminate\+Req()}{ipv6cpProcessTerminateReq()}}
{\footnotesize\ttfamily \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689c}{error\+\_\+t} ipv6cp\+Process\+Terminate\+Req (\begin{DoxyParamCaption}\item[{\hyperlink{ppp_8h_a896c00dd8ba8bad09b3f442b7aa5ad9c}{Ppp\+Context} $\ast$}]{context,  }\item[{const \hyperlink{ppp_8h_a224d9bad9d75f66f3d0284450ddf6fb4}{Ppp\+Terminate\+Packet} $\ast$}]{terminate\+Req\+Packet }\end{DoxyParamCaption})}



Process Terminate-\/\+Request packet. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em context} & P\+PP context \\
\hline
\mbox{\tt in}  & {\em terminate\+Req\+Packet} & Packet received from the peer \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Error code 
\end{DoxyReturn}


Definition at line 467 of file ipv6cp.\+c.


\begin{DoxyCode}
469 \{
470    \textcolor{comment}{//Debug message}
471    \hyperlink{debug_8h_a7339bfd784193a5c79efcef2eeb2d6df}{TRACE\_INFO}(\textcolor{stringliteral}{"\(\backslash\)r\(\backslash\)nIPV6CP Receive-Terminate-Request event\(\backslash\)r\(\backslash\)n"});
472 
473    \textcolor{comment}{//The Terminate-Request indicates the desire of the peer to close the connection}
474    \hyperlink{ppp__fsm_8c_adf41be150eb29ecad7dcb966134f5d18}{pppRcvTerminateReqEvent}(context, &context->ipv6cpFsm,
475       &\hyperlink{ipv6cp_8c_af27b47a14af596e2dfd51c437382c14e}{ipv6cpCallbacks}, terminateReqPacket);
476 
477    \textcolor{comment}{//Successful processing}
478    \textcolor{keywordflow}{return} \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689cabf350750d0d4fabd8954c0f1e9bbae94}{NO\_ERROR};
479 \}
\end{DoxyCode}
\mbox{\Hypertarget{ipv6cp_8c_a8861d1dc284507a62d678406519e06b0}\label{ipv6cp_8c_a8861d1dc284507a62d678406519e06b0}} 
\index{ipv6cp.\+c@{ipv6cp.\+c}!ipv6cp\+Process\+Unknown\+Code@{ipv6cp\+Process\+Unknown\+Code}}
\index{ipv6cp\+Process\+Unknown\+Code@{ipv6cp\+Process\+Unknown\+Code}!ipv6cp.\+c@{ipv6cp.\+c}}
\subsubsection{\texorpdfstring{ipv6cp\+Process\+Unknown\+Code()}{ipv6cpProcessUnknownCode()}}
{\footnotesize\ttfamily \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689c}{error\+\_\+t} ipv6cp\+Process\+Unknown\+Code (\begin{DoxyParamCaption}\item[{\hyperlink{ppp_8h_a896c00dd8ba8bad09b3f442b7aa5ad9c}{Ppp\+Context} $\ast$}]{context,  }\item[{const \hyperlink{ppp_8h_aa975a68f06316e1db0de962a31e30c2e}{Ppp\+Packet} $\ast$}]{packet }\end{DoxyParamCaption})}



Process packet with unknown code. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em context} & P\+PP context \\
\hline
\mbox{\tt in}  & {\em packet} & Un-\/interpretable packet received from the peer \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Error code 
\end{DoxyReturn}


Definition at line 559 of file ipv6cp.\+c.


\begin{DoxyCode}
561 \{
562    \textcolor{comment}{//Debug message}
563    \hyperlink{debug_8h_a7339bfd784193a5c79efcef2eeb2d6df}{TRACE\_INFO}(\textcolor{stringliteral}{"\(\backslash\)r\(\backslash\)nIPV6CP Receive-Unknown-Code event\(\backslash\)r\(\backslash\)n"});
564 
565    \textcolor{comment}{//This event occurs when an un-interpretable packet is received from}
566    \textcolor{comment}{//the peer. A Code-Reject packet is sent in response}
567    \hyperlink{ppp__fsm_8c_acc5bb9360d00a9033e5aff533cfb9f79}{pppRcvUnknownCodeEvent}(context, &context->ipv6cpFsm, &
      \hyperlink{ipv6cp_8c_af27b47a14af596e2dfd51c437382c14e}{ipv6cpCallbacks}, packet);
568 
569    \textcolor{comment}{//Successful processing}
570    \textcolor{keywordflow}{return} \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689cabf350750d0d4fabd8954c0f1e9bbae94}{NO\_ERROR};
571 \}
\end{DoxyCode}
\mbox{\Hypertarget{ipv6cp_8c_a05dd1ecb6cd15d0c06876f43ae2757d2}\label{ipv6cp_8c_a05dd1ecb6cd15d0c06876f43ae2757d2}} 
\index{ipv6cp.\+c@{ipv6cp.\+c}!ipv6cp\+Send\+Code\+Rej@{ipv6cp\+Send\+Code\+Rej}}
\index{ipv6cp\+Send\+Code\+Rej@{ipv6cp\+Send\+Code\+Rej}!ipv6cp.\+c@{ipv6cp.\+c}}
\subsubsection{\texorpdfstring{ipv6cp\+Send\+Code\+Rej()}{ipv6cpSendCodeRej()}}
{\footnotesize\ttfamily \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689c}{error\+\_\+t} ipv6cp\+Send\+Code\+Rej (\begin{DoxyParamCaption}\item[{\hyperlink{ppp_8h_a896c00dd8ba8bad09b3f442b7aa5ad9c}{Ppp\+Context} $\ast$}]{context,  }\item[{const \hyperlink{ppp_8h_aa975a68f06316e1db0de962a31e30c2e}{Ppp\+Packet} $\ast$}]{packet }\end{DoxyParamCaption})}



Send-\/\+Code-\/\+Reject callback function. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em context} & P\+PP context \\
\hline
\mbox{\tt in}  & {\em packet} & Un-\/interpretable packet received from the peer \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Error code 
\end{DoxyReturn}


Definition at line 907 of file ipv6cp.\+c.


\begin{DoxyCode}
908 \{
909    \textcolor{comment}{//Debug message}
910    \hyperlink{debug_8h_a7339bfd784193a5c79efcef2eeb2d6df}{TRACE\_INFO}(\textcolor{stringliteral}{"IPV6CP Send-Code-Reject callback\(\backslash\)r\(\backslash\)n"});
911 
912    \textcolor{comment}{//The Identifier field must be changed for each Code-Reject sent}
913    context->ipv6cpFsm.identifier++;
914 
915    \textcolor{comment}{//Send Code-Reject packet}
916    \textcolor{keywordflow}{return} \hyperlink{ppp__misc_8c_a3767bc838defa017dacfee2546714ce1}{pppSendCodeRej}(context, packet, context->ipv6cpFsm.identifier, 
      \hyperlink{ppp_8h_a5d2e3565b503cd5cb131aaff4e0ba9c2abc85aaca4959631f37902c4c8f34146a}{PPP\_PROTOCOL\_IPV6CP});
917 \}
\end{DoxyCode}
\mbox{\Hypertarget{ipv6cp_8c_adb65edf9100af92d60dff5d90d636fd1}\label{ipv6cp_8c_adb65edf9100af92d60dff5d90d636fd1}} 
\index{ipv6cp.\+c@{ipv6cp.\+c}!ipv6cp\+Send\+Configure\+Ack@{ipv6cp\+Send\+Configure\+Ack}}
\index{ipv6cp\+Send\+Configure\+Ack@{ipv6cp\+Send\+Configure\+Ack}!ipv6cp.\+c@{ipv6cp.\+c}}
\subsubsection{\texorpdfstring{ipv6cp\+Send\+Configure\+Ack()}{ipv6cpSendConfigureAck()}}
{\footnotesize\ttfamily \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689c}{error\+\_\+t} ipv6cp\+Send\+Configure\+Ack (\begin{DoxyParamCaption}\item[{\hyperlink{ppp_8h_a896c00dd8ba8bad09b3f442b7aa5ad9c}{Ppp\+Context} $\ast$}]{context,  }\item[{const \hyperlink{ppp_8h_a5f9516e80961edda7e2c0b9b964bdd66}{Ppp\+Configure\+Packet} $\ast$}]{configure\+Req\+Packet }\end{DoxyParamCaption})}



Send-\/\+Configure-\/\+Ack callback function. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em context} & P\+PP context \\
\hline
\mbox{\tt in}  & {\em configure\+Req\+Packet} & Configure-\/\+Request packet received from the peer \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Error code 
\end{DoxyReturn}


Definition at line 785 of file ipv6cp.\+c.


\begin{DoxyCode}
787 \{
788    \textcolor{comment}{//Debug message}
789    \hyperlink{debug_8h_a7339bfd784193a5c79efcef2eeb2d6df}{TRACE\_INFO}(\textcolor{stringliteral}{"IPV6CP Send-Configure-Ack callback\(\backslash\)r\(\backslash\)n"});
790 
791    \textcolor{comment}{//Send Configure-Ack packet}
792    \textcolor{keywordflow}{return} \hyperlink{ppp__misc_8c_a3b9675b85f9c68935fdcba6d7c0b262f}{pppSendConfigureAckNak}(context, configureReqPacket,
793       \hyperlink{ppp_8h_a5d2e3565b503cd5cb131aaff4e0ba9c2abc85aaca4959631f37902c4c8f34146a}{PPP\_PROTOCOL\_IPV6CP}, \hyperlink{ppp_8h_a961984e634b12a11d381115a46f14188a915e8fc9f7c9bacb22b54dbccd684591}{PPP\_CODE\_CONFIGURE\_ACK});
794 \}
\end{DoxyCode}
\mbox{\Hypertarget{ipv6cp_8c_abd4723de9d71fd0cbeadde499229a055}\label{ipv6cp_8c_abd4723de9d71fd0cbeadde499229a055}} 
\index{ipv6cp.\+c@{ipv6cp.\+c}!ipv6cp\+Send\+Configure\+Nak@{ipv6cp\+Send\+Configure\+Nak}}
\index{ipv6cp\+Send\+Configure\+Nak@{ipv6cp\+Send\+Configure\+Nak}!ipv6cp.\+c@{ipv6cp.\+c}}
\subsubsection{\texorpdfstring{ipv6cp\+Send\+Configure\+Nak()}{ipv6cpSendConfigureNak()}}
{\footnotesize\ttfamily \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689c}{error\+\_\+t} ipv6cp\+Send\+Configure\+Nak (\begin{DoxyParamCaption}\item[{\hyperlink{ppp_8h_a896c00dd8ba8bad09b3f442b7aa5ad9c}{Ppp\+Context} $\ast$}]{context,  }\item[{const \hyperlink{ppp_8h_a5f9516e80961edda7e2c0b9b964bdd66}{Ppp\+Configure\+Packet} $\ast$}]{configure\+Req\+Packet }\end{DoxyParamCaption})}



Send-\/\+Configure-\/\+Nak callback function. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em context} & P\+PP context \\
\hline
\mbox{\tt in}  & {\em configure\+Req\+Packet} & Configure-\/\+Request packet received from the peer \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Error code 
\end{DoxyReturn}


Definition at line 804 of file ipv6cp.\+c.


\begin{DoxyCode}
806 \{
807    \textcolor{comment}{//Debug message}
808    \hyperlink{debug_8h_a7339bfd784193a5c79efcef2eeb2d6df}{TRACE\_INFO}(\textcolor{stringliteral}{"IPV6CP Send-Configure-Nak callback\(\backslash\)r\(\backslash\)n"});
809 
810    \textcolor{comment}{//Send Configure-Nak packet}
811    \textcolor{keywordflow}{return} \hyperlink{ppp__misc_8c_a3b9675b85f9c68935fdcba6d7c0b262f}{pppSendConfigureAckNak}(context, configureReqPacket,
812       \hyperlink{ppp_8h_a5d2e3565b503cd5cb131aaff4e0ba9c2abc85aaca4959631f37902c4c8f34146a}{PPP\_PROTOCOL\_IPV6CP}, \hyperlink{ppp_8h_a961984e634b12a11d381115a46f14188aed576599db22b88142cb2cd4e71986be}{PPP\_CODE\_CONFIGURE\_NAK});
813 \}
\end{DoxyCode}
\mbox{\Hypertarget{ipv6cp_8c_a6734bfbdf40994801ebd9845867c188e}\label{ipv6cp_8c_a6734bfbdf40994801ebd9845867c188e}} 
\index{ipv6cp.\+c@{ipv6cp.\+c}!ipv6cp\+Send\+Configure\+Rej@{ipv6cp\+Send\+Configure\+Rej}}
\index{ipv6cp\+Send\+Configure\+Rej@{ipv6cp\+Send\+Configure\+Rej}!ipv6cp.\+c@{ipv6cp.\+c}}
\subsubsection{\texorpdfstring{ipv6cp\+Send\+Configure\+Rej()}{ipv6cpSendConfigureRej()}}
{\footnotesize\ttfamily \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689c}{error\+\_\+t} ipv6cp\+Send\+Configure\+Rej (\begin{DoxyParamCaption}\item[{\hyperlink{ppp_8h_a896c00dd8ba8bad09b3f442b7aa5ad9c}{Ppp\+Context} $\ast$}]{context,  }\item[{const \hyperlink{ppp_8h_a5f9516e80961edda7e2c0b9b964bdd66}{Ppp\+Configure\+Packet} $\ast$}]{configure\+Req\+Packet }\end{DoxyParamCaption})}



Send-\/\+Configure-\/\+Reject callback function. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em context} & P\+PP context \\
\hline
\mbox{\tt in}  & {\em configure\+Req\+Packet} & Configure-\/\+Request packet received from the peer \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Error code 
\end{DoxyReturn}


Definition at line 823 of file ipv6cp.\+c.


\begin{DoxyCode}
825 \{
826    \textcolor{comment}{//Debug message}
827    \hyperlink{debug_8h_a7339bfd784193a5c79efcef2eeb2d6df}{TRACE\_INFO}(\textcolor{stringliteral}{"IPV6CP Send-Configure-Reject callback\(\backslash\)r\(\backslash\)n"});
828 
829    \textcolor{comment}{//Send Configure-Reject packet}
830    \textcolor{keywordflow}{return} \hyperlink{ppp__misc_8c_a3b9675b85f9c68935fdcba6d7c0b262f}{pppSendConfigureAckNak}(context, configureReqPacket,
831       \hyperlink{ppp_8h_a5d2e3565b503cd5cb131aaff4e0ba9c2abc85aaca4959631f37902c4c8f34146a}{PPP\_PROTOCOL\_IPV6CP}, \hyperlink{ppp_8h_a961984e634b12a11d381115a46f14188a5bd41f9dd646b4a1dd42c2f98f22cedd}{PPP\_CODE\_CONFIGURE\_REJ});
832 \}
\end{DoxyCode}
\mbox{\Hypertarget{ipv6cp_8c_a2c25f1619f76f7f0cb513ba799a0c39c}\label{ipv6cp_8c_a2c25f1619f76f7f0cb513ba799a0c39c}} 
\index{ipv6cp.\+c@{ipv6cp.\+c}!ipv6cp\+Send\+Configure\+Req@{ipv6cp\+Send\+Configure\+Req}}
\index{ipv6cp\+Send\+Configure\+Req@{ipv6cp\+Send\+Configure\+Req}!ipv6cp.\+c@{ipv6cp.\+c}}
\subsubsection{\texorpdfstring{ipv6cp\+Send\+Configure\+Req()}{ipv6cpSendConfigureReq()}}
{\footnotesize\ttfamily \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689c}{error\+\_\+t} ipv6cp\+Send\+Configure\+Req (\begin{DoxyParamCaption}\item[{\hyperlink{ppp_8h_a896c00dd8ba8bad09b3f442b7aa5ad9c}{Ppp\+Context} $\ast$}]{context }\end{DoxyParamCaption})}



Send-\/\+Configure-\/\+Request callback function. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em context} & P\+PP context \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Error code 
\end{DoxyReturn}


Definition at line 715 of file ipv6cp.\+c.


\begin{DoxyCode}
716 \{
717    \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689c}{error\_t} error;
718    \textcolor{keywordtype}{size\_t} \hyperlink{dtls__misc_8h_ab43ca82dd7fa2a0e56f941032ef324c4}{length};
719    \textcolor{keywordtype}{size\_t} \hyperlink{pic32mz_2isr__support_8h_a12a5aed8a193ebbf9a641104a310610d}{offset};
720    \hyperlink{structNetBuffer}{NetBuffer} *buffer;
721    \hyperlink{ppp_8h_a5f9516e80961edda7e2c0b9b964bdd66}{PppConfigurePacket} *configureReqPacket;
722 
723    \textcolor{comment}{//Debug message}
724    \hyperlink{debug_8h_a7339bfd784193a5c79efcef2eeb2d6df}{TRACE\_INFO}(\textcolor{stringliteral}{"IPV6CP Send-Configure-Request callback\(\backslash\)r\(\backslash\)n"});
725 
726    \textcolor{comment}{//Allocate a buffer memory to hold the Configure-Request packet}
727    buffer = \hyperlink{ppp_8c_a9100186e00aec050c4952fd462b035aa}{pppAllocBuffer}(\hyperlink{ppp_8h_ad62bee1d8548d875480b9ca6c8436445}{PPP\_MAX\_CONF\_REQ\_SIZE}, &offset);
728    \textcolor{comment}{//Failed to allocate memory?}
729    \textcolor{keywordflow}{if}(buffer == \hyperlink{group__BSPDefine_ga070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL})
730       \textcolor{keywordflow}{return} \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689cac0a554045048d2fb61387cf735676f69}{ERROR\_OUT\_OF\_MEMORY};
731 
732    \textcolor{comment}{//Point to the Configure-Request packet}
733    configureReqPacket = \hyperlink{net__mem_8c_a20d30c9db547b3b2743368b589cf482b}{netBufferAt}(buffer, offset);
734 
735    \textcolor{comment}{//Format packet header}
736    configureReqPacket->code = \hyperlink{ppp_8h_a961984e634b12a11d381115a46f14188a4e4279fdfcf8d81d216d58801f58d84d}{PPP\_CODE\_CONFIGURE\_REQ};
737    configureReqPacket->identifier = ++context->ipv6cpFsm.identifier;
738    configureReqPacket->length = \textcolor{keyword}{sizeof}(\hyperlink{ppp_8h_a5f9516e80961edda7e2c0b9b964bdd66}{PppConfigurePacket});
739 
740    \textcolor{comment}{//Make sure the Interface-Identifier option has not been previously rejected}
741    \textcolor{keywordflow}{if}(!context->localConfig.interfaceIdRejected)
742    \{
743       \textcolor{comment}{//Add option}
744       \hyperlink{ppp__misc_8c_a52b0a518f20c37d08e66f8c3b437c74f}{pppAddOption}(configureReqPacket, \hyperlink{ipv6cp_8h_a3d700d5c3271bb0c36627bf74165259ea1db80b46491de378ce8a307bba6533f4}{IPV6CP\_OPTION\_INTERFACE\_ID},
745          &context->localConfig.interfaceId, \textcolor{keyword}{sizeof}(\hyperlink{ethernet_8h_acbcae3afd042b3ce97e42f54013c8137}{Eui64}));
746    \}
747 
748    \textcolor{comment}{//Save packet length}
749    length = configureReqPacket->length;
750    \textcolor{comment}{//Convert length field to network byte order}
751    configureReqPacket->length = \hyperlink{cpu__endian_8h_a800cdbf435a85a9b3ad4f0edc518472a}{htons}(length);
752 
753    \textcolor{comment}{//Adjust the length of the multi-part buffer}
754    \hyperlink{net__mem_8c_ac0a46f396754e069dd1ee65cdc559b28}{netBufferSetLength}(buffer, offset + length);
755 
756    \textcolor{comment}{//Debug message}
757    \hyperlink{debug_8h_a7339bfd784193a5c79efcef2eeb2d6df}{TRACE\_INFO}(\textcolor{stringliteral}{"Sending Configure-Request packet (%"} \hyperlink{compiler__port_8h_a2b7b0557dc6cd786df02dafbb51f5292}{PRIuSIZE} \textcolor{stringliteral}{" bytes)...\(\backslash\)r\(\backslash\)n"}, length);
758    \textcolor{comment}{//Dump packet contents for debugging purpose}
759    \hyperlink{ppp__debug_8c_aebeb2591b3799b0ede290881fdd67e78}{pppDumpPacket}((\hyperlink{ppp_8h_aa975a68f06316e1db0de962a31e30c2e}{PppPacket} *) configureReqPacket, length, 
      \hyperlink{ppp_8h_a5d2e3565b503cd5cb131aaff4e0ba9c2abc85aaca4959631f37902c4c8f34146a}{PPP\_PROTOCOL\_IPV6CP});
760 
761    \textcolor{comment}{//Send PPP frame}
762    error = \hyperlink{ppp_8c_aaacd84d6af940a50fa94b67324b080ea}{pppSendFrame}(context->interface, buffer, offset, 
      \hyperlink{ppp_8h_a5d2e3565b503cd5cb131aaff4e0ba9c2abc85aaca4959631f37902c4c8f34146a}{PPP\_PROTOCOL\_IPV6CP});
763 
764    \textcolor{comment}{//The restart counter is decremented each time a Configure-Request is sent}
765    \textcolor{keywordflow}{if}(context->ipv6cpFsm.restartCounter > 0)
766       context->ipv6cpFsm.restartCounter--;
767 
768    \textcolor{comment}{//Save the time at which the packet was sent}
769    context->ipv6cpFsm.timestamp = \hyperlink{os__port__chibios_8c_ab66a11272d40a916fa69dd8e4dc443d4}{osGetSystemTime}();
770 
771    \textcolor{comment}{//Free previously allocated memory block}
772    \hyperlink{net__mem_8c_aa33fc4dd2a71649194052f297c707d08}{netBufferFree}(buffer);
773    \textcolor{comment}{//Return status code}
774    \textcolor{keywordflow}{return} error;
775 \}
\end{DoxyCode}
\mbox{\Hypertarget{ipv6cp_8c_a658c29f0f75a85cd3e65babdc0e3027f}\label{ipv6cp_8c_a658c29f0f75a85cd3e65babdc0e3027f}} 
\index{ipv6cp.\+c@{ipv6cp.\+c}!ipv6cp\+Send\+Terminate\+Ack@{ipv6cp\+Send\+Terminate\+Ack}}
\index{ipv6cp\+Send\+Terminate\+Ack@{ipv6cp\+Send\+Terminate\+Ack}!ipv6cp.\+c@{ipv6cp.\+c}}
\subsubsection{\texorpdfstring{ipv6cp\+Send\+Terminate\+Ack()}{ipv6cpSendTerminateAck()}}
{\footnotesize\ttfamily \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689c}{error\+\_\+t} ipv6cp\+Send\+Terminate\+Ack (\begin{DoxyParamCaption}\item[{\hyperlink{ppp_8h_a896c00dd8ba8bad09b3f442b7aa5ad9c}{Ppp\+Context} $\ast$}]{context,  }\item[{const \hyperlink{ppp_8h_a224d9bad9d75f66f3d0284450ddf6fb4}{Ppp\+Terminate\+Packet} $\ast$}]{terminate\+Req\+Packet }\end{DoxyParamCaption})}



Send-\/\+Terminate-\/\+Ack callback function. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em context} & P\+PP context \\
\hline
\mbox{\tt in}  & {\em terminate\+Req\+Packet} & Terminate-\/\+Request packet received from the peer \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Error code 
\end{DoxyReturn}


Definition at line 873 of file ipv6cp.\+c.


\begin{DoxyCode}
875 \{
876    \hyperlink{stdint_8h_aba7bc1797add20fe3efdf37ced1182c5}{uint8\_t} \hyperlink{dhcpv6__common_8h_a679cc9d376a65e69d88ec3496eea7122}{identifier};
877 
878    \textcolor{comment}{//Debug message}
879    \hyperlink{debug_8h_a7339bfd784193a5c79efcef2eeb2d6df}{TRACE\_INFO}(\textcolor{stringliteral}{"IPV6CP Send-Terminate-Ack callback\(\backslash\)r\(\backslash\)n"});
880 
881    \textcolor{comment}{//Check whether this Terminate-Ack acknowledges the reception of a}
882    \textcolor{comment}{//Terminate-Request packet}
883    \textcolor{keywordflow}{if}(terminateReqPacket != \hyperlink{group__BSPDefine_ga070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL})
884    \{
885       \textcolor{comment}{//The Identifier field of the Terminate-Request is copied into the}
886       \textcolor{comment}{//Identifier field of the Terminate-Ack packet}
887       identifier = terminateReqPacket->identifier;
888    \}
889    \textcolor{keywordflow}{else}
890    \{
891       \textcolor{comment}{//This Terminate-Ack packet serves to synchronize the automatons}
892       identifier = ++context->ipv6cpFsm.identifier;
893    \}
894 
895    \textcolor{comment}{//Send Terminate-Ack packet}
896    \textcolor{keywordflow}{return} \hyperlink{ppp__misc_8c_a2bd2959558a1ea861bacb3f481a31a5f}{pppSendTerminateAck}(context, identifier, 
      \hyperlink{ppp_8h_a5d2e3565b503cd5cb131aaff4e0ba9c2abc85aaca4959631f37902c4c8f34146a}{PPP\_PROTOCOL\_IPV6CP});
897 \}
\end{DoxyCode}
\mbox{\Hypertarget{ipv6cp_8c_a3ee94fa3889802ffe0004c11474d2a0c}\label{ipv6cp_8c_a3ee94fa3889802ffe0004c11474d2a0c}} 
\index{ipv6cp.\+c@{ipv6cp.\+c}!ipv6cp\+Send\+Terminate\+Req@{ipv6cp\+Send\+Terminate\+Req}}
\index{ipv6cp\+Send\+Terminate\+Req@{ipv6cp\+Send\+Terminate\+Req}!ipv6cp.\+c@{ipv6cp.\+c}}
\subsubsection{\texorpdfstring{ipv6cp\+Send\+Terminate\+Req()}{ipv6cpSendTerminateReq()}}
{\footnotesize\ttfamily \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689c}{error\+\_\+t} ipv6cp\+Send\+Terminate\+Req (\begin{DoxyParamCaption}\item[{\hyperlink{ppp_8h_a896c00dd8ba8bad09b3f442b7aa5ad9c}{Ppp\+Context} $\ast$}]{context }\end{DoxyParamCaption})}



Send-\/\+Terminate-\/\+Request callback function. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em context} & P\+PP context \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Error code 
\end{DoxyReturn}


Definition at line 841 of file ipv6cp.\+c.


\begin{DoxyCode}
842 \{
843    \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689c}{error\_t} error;
844 
845    \textcolor{comment}{//Debug message}
846    \hyperlink{debug_8h_a7339bfd784193a5c79efcef2eeb2d6df}{TRACE\_INFO}(\textcolor{stringliteral}{"IPV6CP Send-Terminate-Request callback\(\backslash\)r\(\backslash\)n"});
847 
848    \textcolor{comment}{//On transmission, the Identifier field must be changed}
849    context->ipv6cpFsm.identifier++;
850 
851    \textcolor{comment}{//Send Terminate-Request packet}
852    error = \hyperlink{ppp__misc_8c_aad98bd785df68e1f1067eb190bfc638a}{pppSendTerminateReq}(context, context->ipv6cpFsm.identifier, 
      \hyperlink{ppp_8h_a5d2e3565b503cd5cb131aaff4e0ba9c2abc85aaca4959631f37902c4c8f34146a}{PPP\_PROTOCOL\_IPV6CP});
853 
854    \textcolor{comment}{//The restart counter is decremented each time a Terminate-Request is sent}
855    \textcolor{keywordflow}{if}(context->ipv6cpFsm.restartCounter > 0)
856       context->ipv6cpFsm.restartCounter--;
857 
858    \textcolor{comment}{//Save the time at which the packet was sent}
859    context->ipv6cpFsm.timestamp = \hyperlink{os__port__chibios_8c_ab66a11272d40a916fa69dd8e4dc443d4}{osGetSystemTime}();
860 
861    \textcolor{comment}{//Return status code}
862    \textcolor{keywordflow}{return} error;
863 \}
\end{DoxyCode}
\mbox{\Hypertarget{ipv6cp_8c_ad502397f56b9a267a141d755a9523722}\label{ipv6cp_8c_ad502397f56b9a267a141d755a9523722}} 
\index{ipv6cp.\+c@{ipv6cp.\+c}!ipv6cp\+This\+Layer\+Down@{ipv6cp\+This\+Layer\+Down}}
\index{ipv6cp\+This\+Layer\+Down@{ipv6cp\+This\+Layer\+Down}!ipv6cp.\+c@{ipv6cp.\+c}}
\subsubsection{\texorpdfstring{ipv6cp\+This\+Layer\+Down()}{ipv6cpThisLayerDown()}}
{\footnotesize\ttfamily void ipv6cp\+This\+Layer\+Down (\begin{DoxyParamCaption}\item[{\hyperlink{ppp_8h_a896c00dd8ba8bad09b3f442b7aa5ad9c}{Ppp\+Context} $\ast$}]{context }\end{DoxyParamCaption})}



This-\/\+Layer-\/\+Down callback function. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em context} & P\+PP context \\
\hline
\end{DoxyParams}


Definition at line 627 of file ipv6cp.\+c.


\begin{DoxyCode}
628 \{
629    \hyperlink{net_8h_a2234db8911a1148c9159979d8f5e0d6b}{NetInterface} *interface;
630 
631    \textcolor{comment}{//Debug message}
632    \hyperlink{debug_8h_a7339bfd784193a5c79efcef2eeb2d6df}{TRACE\_INFO}(\textcolor{stringliteral}{"IPV6CP This-Layer-Down callback\(\backslash\)r\(\backslash\)n"});
633 
634    \textcolor{comment}{//Point to the underlying interface}
635    \textcolor{keyword}{interface }= context->interface;
636 
637    \textcolor{comment}{//Link is up}
638    interface->linkState = \hyperlink{os__port_8h_aa93f0eb578d23995850d61f7d61c55c1}{FALSE};
639 
640    \textcolor{comment}{//Disable interrupts}
641    interface->nicDriver->disableIrq(interface);
642    \textcolor{comment}{//Process link state change event}
643    \hyperlink{nic_8c_ae9054795c5d49a4db97396bf1d16b413}{nicNotifyLinkChange}(interface);
644    \textcolor{comment}{//Re-enable interrupts}
645    interface->nicDriver->enableIrq(interface);
646 \}
\end{DoxyCode}
\mbox{\Hypertarget{ipv6cp_8c_a12141aaf33a19fa6ceaa1a05fb28d9c0}\label{ipv6cp_8c_a12141aaf33a19fa6ceaa1a05fb28d9c0}} 
\index{ipv6cp.\+c@{ipv6cp.\+c}!ipv6cp\+This\+Layer\+Finished@{ipv6cp\+This\+Layer\+Finished}}
\index{ipv6cp\+This\+Layer\+Finished@{ipv6cp\+This\+Layer\+Finished}!ipv6cp.\+c@{ipv6cp.\+c}}
\subsubsection{\texorpdfstring{ipv6cp\+This\+Layer\+Finished()}{ipv6cpThisLayerFinished()}}
{\footnotesize\ttfamily void ipv6cp\+This\+Layer\+Finished (\begin{DoxyParamCaption}\item[{\hyperlink{ppp_8h_a896c00dd8ba8bad09b3f442b7aa5ad9c}{Ppp\+Context} $\ast$}]{context }\end{DoxyParamCaption})}



This-\/\+Layer-\/\+Finished callback function. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em context} & P\+PP context \\
\hline
\end{DoxyParams}


Definition at line 666 of file ipv6cp.\+c.


\begin{DoxyCode}
667 \{
668    \textcolor{comment}{//Debug message}
669    \hyperlink{debug_8h_a7339bfd784193a5c79efcef2eeb2d6df}{TRACE\_INFO}(\textcolor{stringliteral}{"IPV6CP This-Layer-Finished callback\(\backslash\)r\(\backslash\)n"});
670 \}
\end{DoxyCode}
\mbox{\Hypertarget{ipv6cp_8c_afe66603f6f0f4979b35e58e79af6d541}\label{ipv6cp_8c_afe66603f6f0f4979b35e58e79af6d541}} 
\index{ipv6cp.\+c@{ipv6cp.\+c}!ipv6cp\+This\+Layer\+Started@{ipv6cp\+This\+Layer\+Started}}
\index{ipv6cp\+This\+Layer\+Started@{ipv6cp\+This\+Layer\+Started}!ipv6cp.\+c@{ipv6cp.\+c}}
\subsubsection{\texorpdfstring{ipv6cp\+This\+Layer\+Started()}{ipv6cpThisLayerStarted()}}
{\footnotesize\ttfamily void ipv6cp\+This\+Layer\+Started (\begin{DoxyParamCaption}\item[{\hyperlink{ppp_8h_a896c00dd8ba8bad09b3f442b7aa5ad9c}{Ppp\+Context} $\ast$}]{context }\end{DoxyParamCaption})}



This-\/\+Layer-\/\+Started callback function. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em context} & P\+PP context \\
\hline
\end{DoxyParams}


Definition at line 654 of file ipv6cp.\+c.


\begin{DoxyCode}
655 \{
656    \textcolor{comment}{//Debug message}
657    \hyperlink{debug_8h_a7339bfd784193a5c79efcef2eeb2d6df}{TRACE\_INFO}(\textcolor{stringliteral}{"IPV6CP This-Layer-Started callback\(\backslash\)r\(\backslash\)n"});
658 \}
\end{DoxyCode}
\mbox{\Hypertarget{ipv6cp_8c_a0fd9d8ac1dc1c71a8e62f1e82bdc64b3}\label{ipv6cp_8c_a0fd9d8ac1dc1c71a8e62f1e82bdc64b3}} 
\index{ipv6cp.\+c@{ipv6cp.\+c}!ipv6cp\+This\+Layer\+Up@{ipv6cp\+This\+Layer\+Up}}
\index{ipv6cp\+This\+Layer\+Up@{ipv6cp\+This\+Layer\+Up}!ipv6cp.\+c@{ipv6cp.\+c}}
\subsubsection{\texorpdfstring{ipv6cp\+This\+Layer\+Up()}{ipv6cpThisLayerUp()}}
{\footnotesize\ttfamily void ipv6cp\+This\+Layer\+Up (\begin{DoxyParamCaption}\item[{\hyperlink{ppp_8h_a896c00dd8ba8bad09b3f442b7aa5ad9c}{Ppp\+Context} $\ast$}]{context }\end{DoxyParamCaption})}



This-\/\+Layer-\/\+Up callback function. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em context} & P\+PP context \\
\hline
\end{DoxyParams}


Definition at line 579 of file ipv6cp.\+c.


\begin{DoxyCode}
580 \{
581    \hyperlink{net_8h_a2234db8911a1148c9159979d8f5e0d6b}{NetInterface} *interface;
582    \hyperlink{ipv6_8h_aed0cbc40c61ed5b4fb681ebc55237e89}{Ipv6Addr} \hyperlink{mib__common_8h_a3860e959b1b7dd73686a6e11424805e2}{ipAddr};
583 
584    \textcolor{comment}{//Debug message}
585    \hyperlink{debug_8h_a7339bfd784193a5c79efcef2eeb2d6df}{TRACE\_INFO}(\textcolor{stringliteral}{"IPV6CP This-Layer-Up callback\(\backslash\)r\(\backslash\)n"});
586 
587    \textcolor{comment}{//Debug message}
588    \hyperlink{debug_8h_a7339bfd784193a5c79efcef2eeb2d6df}{TRACE\_INFO}(\textcolor{stringliteral}{"  Local Interface Id = %s\(\backslash\)r\(\backslash\)n"},
589       \hyperlink{ethernet_8c_ae93e1d661e17552708072ab30c2b1a7e}{eui64AddrToString}(&context->localConfig.interfaceId, \hyperlink{group__BSPDefine_ga070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL}));
590    \hyperlink{debug_8h_a7339bfd784193a5c79efcef2eeb2d6df}{TRACE\_INFO}(\textcolor{stringliteral}{"  Peer Interface Id = %s\(\backslash\)r\(\backslash\)n"},
591       \hyperlink{ethernet_8c_ae93e1d661e17552708072ab30c2b1a7e}{eui64AddrToString}(&context->peerConfig.interfaceId, \hyperlink{group__BSPDefine_ga070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL}));
592 
593    \textcolor{comment}{//Point to the underlying interface}
594    \textcolor{keyword}{interface }= context->interface;
595 
596    \textcolor{comment}{//Generate an IPv6 address from the local interface identifier}
597    \hyperlink{ipv6__misc_8c_a528bfb892811943ea3910ca0e13b0ed1}{ipv6GenerateLinkLocalAddr}(&context->localConfig.interfaceId, &ipAddr);
598 
599    \textcolor{comment}{//Update IPv6 configuration}
600    \hyperlink{ipv6__misc_8c_a260c329b0f6deb7be88e6ee7a1003063}{ipv6SetAddr}(interface, 0, &ipAddr, \hyperlink{ipv6_8h_acb54c5e2b7ee1652f5bf055e14cc518daaa3a0ce422a678d8eb14a36f4c642d16}{IPV6\_ADDR\_STATE\_PREFERRED},
601       \hyperlink{ndp_8h_a96fa12d04b522371a81350239b9e2d11}{NDP\_INFINITE\_LIFETIME}, \hyperlink{ndp_8h_a96fa12d04b522371a81350239b9e2d11}{NDP\_INFINITE\_LIFETIME}, 
      \hyperlink{os__port_8h_aa8cecfc5c5c054d2875c03e77b7be15d}{TRUE});
602 
603    \textcolor{comment}{//Generate an IPv6 address from the remote interface identifier}
604    \hyperlink{ipv6__misc_8c_a528bfb892811943ea3910ca0e13b0ed1}{ipv6GenerateLinkLocalAddr}(&context->peerConfig.interfaceId, &ipAddr);
605 
606    \textcolor{comment}{//Update IPv6 configuration}
607    interface->ipv6Context.routerList[0].addr = \hyperlink{mib__common_8h_a3860e959b1b7dd73686a6e11424805e2}{ipAddr};
608    interface->ipv6Context.routerList[0].permanent = \hyperlink{os__port_8h_aa8cecfc5c5c054d2875c03e77b7be15d}{TRUE};
609 
610    \textcolor{comment}{//Link is up}
611    interface->linkState = \hyperlink{os__port_8h_aa8cecfc5c5c054d2875c03e77b7be15d}{TRUE};
612 
613    \textcolor{comment}{//Disable interrupts}
614    interface->nicDriver->disableIrq(interface);
615    \textcolor{comment}{//Process link state change event}
616    \hyperlink{nic_8c_ae9054795c5d49a4db97396bf1d16b413}{nicNotifyLinkChange}(interface);
617    \textcolor{comment}{//Re-enable interrupts}
618    interface->nicDriver->enableIrq(interface);
619 \}
\end{DoxyCode}
\mbox{\Hypertarget{ipv6cp_8c_a4a7b1c64da15e7c08b39ef5e5c96de95}\label{ipv6cp_8c_a4a7b1c64da15e7c08b39ef5e5c96de95}} 
\index{ipv6cp.\+c@{ipv6cp.\+c}!ipv6cp\+Tick@{ipv6cp\+Tick}}
\index{ipv6cp\+Tick@{ipv6cp\+Tick}!ipv6cp.\+c@{ipv6cp.\+c}}
\subsubsection{\texorpdfstring{ipv6cp\+Tick()}{ipv6cpTick()}}
{\footnotesize\ttfamily void ipv6cp\+Tick (\begin{DoxyParamCaption}\item[{\hyperlink{ppp_8h_a896c00dd8ba8bad09b3f442b7aa5ad9c}{Ppp\+Context} $\ast$}]{context }\end{DoxyParamCaption})}



I\+P\+V6\+CP timer handler. 

This routine must be periodically called by the T\+C\+P/\+IP stack to manage retransmissions


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em context} & P\+PP context \\
\hline
\end{DoxyParams}


Definition at line 122 of file ipv6cp.\+c.


\begin{DoxyCode}
123 \{
124    \textcolor{comment}{//Check whether the restart timer is running}
125    \textcolor{keywordflow}{if}(context->ipv6cpFsm.state >= \hyperlink{ppp_8h_a4cd9e6fb37bf811037ccb89b4f314bbca517046b14cdbe60860cf08c716b4b632}{PPP\_STATE\_4\_CLOSING} &&
126       context->ipv6cpFsm.state <= \hyperlink{ppp_8h_a4cd9e6fb37bf811037ccb89b4f314bbca718e97f8e3cf50a96b56990eab353669}{PPP\_STATE\_8\_ACK\_SENT})
127    \{
128       \textcolor{comment}{//Get current time}
129       \hyperlink{compiler__port_8h_ae3e32a98d431a02106616da3071832dd}{systime\_t} \hyperlink{dhcpv6__common_8h_ae73654f333e4363463ad8c594eca1905}{time} = \hyperlink{os__port__chibios_8c_ab66a11272d40a916fa69dd8e4dc443d4}{osGetSystemTime}();
130 
131       \textcolor{comment}{//Check restart timer}
132       \textcolor{keywordflow}{if}((time - context->ipv6cpFsm.timestamp) >= \hyperlink{ppp_8h_af7ce638d012dba0785bb0767bf27027a}{PPP\_RESTART\_TIMER})
133       \{
134          \textcolor{comment}{//Debug message}
135          \hyperlink{debug_8h_a7339bfd784193a5c79efcef2eeb2d6df}{TRACE\_INFO}(\textcolor{stringliteral}{"\(\backslash\)r\(\backslash\)nIPV6CP Timeout event\(\backslash\)r\(\backslash\)n"});
136 
137          \textcolor{comment}{//The restart timer is used to retransmit Configure-Request}
138          \textcolor{comment}{//and Terminate-Request packets}
139          \hyperlink{ppp__fsm_8c_a36be609fbc1074aca17caeb84dc1430c}{pppTimeoutEvent}(context, &context->ipv6cpFsm, &
      \hyperlink{ipv6cp_8c_af27b47a14af596e2dfd51c437382c14e}{ipv6cpCallbacks});
140       \}
141    \}
142 \}
\end{DoxyCode}
\mbox{\Hypertarget{ipv6cp_8c_a742c61ab709b980eb146ba96c2c326d7}\label{ipv6cp_8c_a742c61ab709b980eb146ba96c2c326d7}} 
\index{ipv6cp.\+c@{ipv6cp.\+c}!ipv6cp\+Zero\+Restart\+Count@{ipv6cp\+Zero\+Restart\+Count}}
\index{ipv6cp\+Zero\+Restart\+Count@{ipv6cp\+Zero\+Restart\+Count}!ipv6cp.\+c@{ipv6cp.\+c}}
\subsubsection{\texorpdfstring{ipv6cp\+Zero\+Restart\+Count()}{ipv6cpZeroRestartCount()}}
{\footnotesize\ttfamily void ipv6cp\+Zero\+Restart\+Count (\begin{DoxyParamCaption}\item[{\hyperlink{ppp_8h_a896c00dd8ba8bad09b3f442b7aa5ad9c}{Ppp\+Context} $\ast$}]{context }\end{DoxyParamCaption})}



Zero-\/\+Restart-\/\+Count callback function. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em context} & P\+PP context \\
\hline
\end{DoxyParams}


Definition at line 694 of file ipv6cp.\+c.


\begin{DoxyCode}
695 \{
696    \textcolor{comment}{//Debug message}
697    \hyperlink{debug_8h_a7339bfd784193a5c79efcef2eeb2d6df}{TRACE\_INFO}(\textcolor{stringliteral}{"IPV6CP Zero-Restart-Count callback\(\backslash\)r\(\backslash\)n"});
698 
699    \textcolor{comment}{//Zero restart counter}
700    context->ipv6cpFsm.restartCounter = 0;
701 
702    \textcolor{comment}{//The receiver of a Terminate-Request should wait for the peer to}
703    \textcolor{comment}{//disconnect, and must not disconnect until at least one Restart}
704    \textcolor{comment}{//time has passed after sending a Terminate-Ack}
705    context->ipv6cpFsm.timestamp = \hyperlink{os__port__chibios_8c_ab66a11272d40a916fa69dd8e4dc443d4}{osGetSystemTime}();
706 \}
\end{DoxyCode}


\subsection{Variable Documentation}
\mbox{\Hypertarget{ipv6cp_8c_af27b47a14af596e2dfd51c437382c14e}\label{ipv6cp_8c_af27b47a14af596e2dfd51c437382c14e}} 
\index{ipv6cp.\+c@{ipv6cp.\+c}!ipv6cp\+Callbacks@{ipv6cp\+Callbacks}}
\index{ipv6cp\+Callbacks@{ipv6cp\+Callbacks}!ipv6cp.\+c@{ipv6cp.\+c}}
\subsubsection{\texorpdfstring{ipv6cp\+Callbacks}{ipv6cpCallbacks}}
{\footnotesize\ttfamily const \hyperlink{structPppCallbacks}{Ppp\+Callbacks} ipv6cp\+Callbacks}

{\bfseries Initial value\+:}
\begin{DoxyCode}
=
\{
   \hyperlink{ipv6cp_8c_a0fd9d8ac1dc1c71a8e62f1e82bdc64b3}{ipv6cpThisLayerUp},
   \hyperlink{ipv6cp_8c_ad502397f56b9a267a141d755a9523722}{ipv6cpThisLayerDown},
   \hyperlink{ipv6cp_8c_afe66603f6f0f4979b35e58e79af6d541}{ipv6cpThisLayerStarted},
   \hyperlink{ipv6cp_8c_a12141aaf33a19fa6ceaa1a05fb28d9c0}{ipv6cpThisLayerFinished},
   \hyperlink{ipv6cp_8c_affe9b5b0ed6b2577bcbcdf26c86edfed}{ipv6cpInitRestartCount},
   \hyperlink{ipv6cp_8c_a742c61ab709b980eb146ba96c2c326d7}{ipv6cpZeroRestartCount},
   \hyperlink{ipv6cp_8c_a2c25f1619f76f7f0cb513ba799a0c39c}{ipv6cpSendConfigureReq},
   \hyperlink{ipv6cp_8c_adb65edf9100af92d60dff5d90d636fd1}{ipv6cpSendConfigureAck},
   \hyperlink{ipv6cp_8c_abd4723de9d71fd0cbeadde499229a055}{ipv6cpSendConfigureNak},
   \hyperlink{ipv6cp_8c_a6734bfbdf40994801ebd9845867c188e}{ipv6cpSendConfigureRej},
   \hyperlink{ipv6cp_8c_a3ee94fa3889802ffe0004c11474d2a0c}{ipv6cpSendTerminateReq},
   \hyperlink{ipv6cp_8c_a658c29f0f75a85cd3e65babdc0e3027f}{ipv6cpSendTerminateAck},
   \hyperlink{ipv6cp_8c_a05dd1ecb6cd15d0c06876f43ae2757d2}{ipv6cpSendCodeRej},
   \hyperlink{group__BSPDefine_ga070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL}
\}
\end{DoxyCode}


I\+P\+V6\+CP F\+SM callbacks. 



Definition at line 52 of file ipv6cp.\+c.

