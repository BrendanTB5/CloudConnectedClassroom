\hypertarget{ipcp_8c}{}\section{cyclone\+\_\+tcp/ppp/ipcp.c File Reference}
\label{ipcp_8c}\index{cyclone\+\_\+tcp/ppp/ipcp.\+c@{cyclone\+\_\+tcp/ppp/ipcp.\+c}}


I\+P\+CP (P\+PP Internet Protocol Control Protocol)  


{\ttfamily \#include \char`\"{}core/net.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}ipv4/ipv4.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}ppp/ppp\+\_\+fsm.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}ppp/ppp\+\_\+misc.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}ppp/ppp\+\_\+debug.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}ppp/ipcp.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}debug.\+h\char`\"{}}\newline
\subsection*{Macros}
\begin{DoxyCompactItemize}
\item 
\#define \hyperlink{ipcp_8c_afcdf5e66fd927a7f4cc64295acd20407}{T\+R\+A\+C\+E\+\_\+\+L\+E\+V\+EL}~P\+P\+P\+\_\+\+T\+R\+A\+C\+E\+\_\+\+L\+E\+V\+EL
\end{DoxyCompactItemize}
\subsection*{Functions}
\begin{DoxyCompactItemize}
\item 
\hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689c}{error\+\_\+t} \hyperlink{ipcp_8c_a964305681ae4db8b15a060834fc95967}{ipcp\+Open} (\hyperlink{ppp_8h_a896c00dd8ba8bad09b3f442b7aa5ad9c}{Ppp\+Context} $\ast$context)
\begin{DoxyCompactList}\small\item\em I\+P\+CP Open event. \end{DoxyCompactList}\item 
\hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689c}{error\+\_\+t} \hyperlink{ipcp_8c_a461ccc0abc7cbcf8492efd87070e7b11}{ipcp\+Close} (\hyperlink{ppp_8h_a896c00dd8ba8bad09b3f442b7aa5ad9c}{Ppp\+Context} $\ast$context)
\begin{DoxyCompactList}\small\item\em I\+P\+CP Close event. \end{DoxyCompactList}\item 
void \hyperlink{ipcp_8c_a8477eeed2aca078da957d972a0298761}{ipcp\+Tick} (\hyperlink{ppp_8h_a896c00dd8ba8bad09b3f442b7aa5ad9c}{Ppp\+Context} $\ast$context)
\begin{DoxyCompactList}\small\item\em I\+P\+CP timer handler. \end{DoxyCompactList}\item 
void \hyperlink{ipcp_8c_a7606087c70322577cbfd6d2a0b6bf74b}{ipcp\+Process\+Packet} (\hyperlink{ppp_8h_a896c00dd8ba8bad09b3f442b7aa5ad9c}{Ppp\+Context} $\ast$context, const \hyperlink{ppp_8h_aa975a68f06316e1db0de962a31e30c2e}{Ppp\+Packet} $\ast$packet, size\+\_\+t \hyperlink{ppp_8h_ab2b3adeb2a67e656ff030b56727fd0ac}{length})
\begin{DoxyCompactList}\small\item\em Process an incoming I\+P\+CP packet. \end{DoxyCompactList}\item 
\hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689c}{error\+\_\+t} \hyperlink{ipcp_8c_a348c0f05fe1bb902a75b523a440516fc}{ipcp\+Process\+Configure\+Req} (\hyperlink{ppp_8h_a896c00dd8ba8bad09b3f442b7aa5ad9c}{Ppp\+Context} $\ast$context, const \hyperlink{ppp_8h_a5f9516e80961edda7e2c0b9b964bdd66}{Ppp\+Configure\+Packet} $\ast$configure\+Req\+Packet)
\begin{DoxyCompactList}\small\item\em Process Configure-\/\+Request packet. \end{DoxyCompactList}\item 
\hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689c}{error\+\_\+t} \hyperlink{ipcp_8c_af0929a9f83566f8ff0356ee9c5c0e68a}{ipcp\+Process\+Configure\+Ack} (\hyperlink{ppp_8h_a896c00dd8ba8bad09b3f442b7aa5ad9c}{Ppp\+Context} $\ast$context, const \hyperlink{ppp_8h_a5f9516e80961edda7e2c0b9b964bdd66}{Ppp\+Configure\+Packet} $\ast$configure\+Ack\+Packet)
\begin{DoxyCompactList}\small\item\em Process Configure-\/\+Ack packet. \end{DoxyCompactList}\item 
\hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689c}{error\+\_\+t} \hyperlink{ipcp_8c_a0630dbaa222d4ed2fc54135eae3de651}{ipcp\+Process\+Configure\+Nak} (\hyperlink{ppp_8h_a896c00dd8ba8bad09b3f442b7aa5ad9c}{Ppp\+Context} $\ast$context, const \hyperlink{ppp_8h_a5f9516e80961edda7e2c0b9b964bdd66}{Ppp\+Configure\+Packet} $\ast$configure\+Nak\+Packet)
\begin{DoxyCompactList}\small\item\em Process Configure-\/\+Nak packet. \end{DoxyCompactList}\item 
\hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689c}{error\+\_\+t} \hyperlink{ipcp_8c_a1b054435397e557dba93c7f33a4f7ca2}{ipcp\+Process\+Configure\+Reject} (\hyperlink{ppp_8h_a896c00dd8ba8bad09b3f442b7aa5ad9c}{Ppp\+Context} $\ast$context, const \hyperlink{ppp_8h_a5f9516e80961edda7e2c0b9b964bdd66}{Ppp\+Configure\+Packet} $\ast$configure\+Rej\+Packet)
\begin{DoxyCompactList}\small\item\em Process Configure-\/\+Reject packet. \end{DoxyCompactList}\item 
\hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689c}{error\+\_\+t} \hyperlink{ipcp_8c_aa7bfd7317c5161591f4a410856773503}{ipcp\+Process\+Terminate\+Req} (\hyperlink{ppp_8h_a896c00dd8ba8bad09b3f442b7aa5ad9c}{Ppp\+Context} $\ast$context, const \hyperlink{ppp_8h_a224d9bad9d75f66f3d0284450ddf6fb4}{Ppp\+Terminate\+Packet} $\ast$terminate\+Req\+Packet)
\begin{DoxyCompactList}\small\item\em Process Terminate-\/\+Request packet. \end{DoxyCompactList}\item 
\hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689c}{error\+\_\+t} \hyperlink{ipcp_8c_a40dec769a9b6627c9fa831b8b39bb254}{ipcp\+Process\+Terminate\+Ack} (\hyperlink{ppp_8h_a896c00dd8ba8bad09b3f442b7aa5ad9c}{Ppp\+Context} $\ast$context, const \hyperlink{ppp_8h_a224d9bad9d75f66f3d0284450ddf6fb4}{Ppp\+Terminate\+Packet} $\ast$terminate\+Ack\+Packet)
\begin{DoxyCompactList}\small\item\em Process Terminate-\/\+Ack packet. \end{DoxyCompactList}\item 
\hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689c}{error\+\_\+t} \hyperlink{ipcp_8c_af1047c6f32347c41b31f8c8c45d002e4}{ipcp\+Process\+Code\+Rej} (\hyperlink{ppp_8h_a896c00dd8ba8bad09b3f442b7aa5ad9c}{Ppp\+Context} $\ast$context, const \hyperlink{ppp_8h_ad05fe14ee4cca32c7b40f2cdf9c48a8d}{Ppp\+Code\+Rej\+Packet} $\ast$code\+Rej\+Packet)
\begin{DoxyCompactList}\small\item\em Process Code-\/\+Reject packet. \end{DoxyCompactList}\item 
\hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689c}{error\+\_\+t} \hyperlink{ipcp_8c_adce8a3b5aadeb8165abf25fd8fe35621}{ipcp\+Process\+Unknown\+Code} (\hyperlink{ppp_8h_a896c00dd8ba8bad09b3f442b7aa5ad9c}{Ppp\+Context} $\ast$context, const \hyperlink{ppp_8h_aa975a68f06316e1db0de962a31e30c2e}{Ppp\+Packet} $\ast$packet)
\begin{DoxyCompactList}\small\item\em Process packet with unknown code. \end{DoxyCompactList}\item 
void \hyperlink{ipcp_8c_a4c161cf5e5469734003de9628abdf192}{ipcp\+This\+Layer\+Up} (\hyperlink{ppp_8h_a896c00dd8ba8bad09b3f442b7aa5ad9c}{Ppp\+Context} $\ast$context)
\begin{DoxyCompactList}\small\item\em This-\/\+Layer-\/\+Up callback function. \end{DoxyCompactList}\item 
void \hyperlink{ipcp_8c_a74f5b4eee645f25e3e2744468bdafaa4}{ipcp\+This\+Layer\+Down} (\hyperlink{ppp_8h_a896c00dd8ba8bad09b3f442b7aa5ad9c}{Ppp\+Context} $\ast$context)
\begin{DoxyCompactList}\small\item\em This-\/\+Layer-\/\+Down callback function. \end{DoxyCompactList}\item 
void \hyperlink{ipcp_8c_a77769218c666a5804f2f97f9bb57e471}{ipcp\+This\+Layer\+Started} (\hyperlink{ppp_8h_a896c00dd8ba8bad09b3f442b7aa5ad9c}{Ppp\+Context} $\ast$context)
\begin{DoxyCompactList}\small\item\em This-\/\+Layer-\/\+Started callback function. \end{DoxyCompactList}\item 
void \hyperlink{ipcp_8c_a3acefccb62a94c0f962bed336664b4e2}{ipcp\+This\+Layer\+Finished} (\hyperlink{ppp_8h_a896c00dd8ba8bad09b3f442b7aa5ad9c}{Ppp\+Context} $\ast$context)
\begin{DoxyCompactList}\small\item\em This-\/\+Layer-\/\+Finished callback function. \end{DoxyCompactList}\item 
void \hyperlink{ipcp_8c_a30bc2e7c83f3e0fbcc54cada283e8073}{ipcp\+Init\+Restart\+Count} (\hyperlink{ppp_8h_a896c00dd8ba8bad09b3f442b7aa5ad9c}{Ppp\+Context} $\ast$context, \hyperlink{compiler__port_8h_a12a1e9b3ce141648783a82445d02b58d}{uint\+\_\+t} \hyperlink{chap_8h_adfa040d04d16520129a735fff8fb1628}{value})
\begin{DoxyCompactList}\small\item\em Initialize-\/\+Restart-\/\+Count callback function. \end{DoxyCompactList}\item 
void \hyperlink{ipcp_8c_af399b26ae3305739b04eeff27ed6c78c}{ipcp\+Zero\+Restart\+Count} (\hyperlink{ppp_8h_a896c00dd8ba8bad09b3f442b7aa5ad9c}{Ppp\+Context} $\ast$context)
\begin{DoxyCompactList}\small\item\em Zero-\/\+Restart-\/\+Count callback function. \end{DoxyCompactList}\item 
\hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689c}{error\+\_\+t} \hyperlink{ipcp_8c_a3748a0fecfb92f102fa51ad092a0be65}{ipcp\+Send\+Configure\+Req} (\hyperlink{ppp_8h_a896c00dd8ba8bad09b3f442b7aa5ad9c}{Ppp\+Context} $\ast$context)
\begin{DoxyCompactList}\small\item\em Send-\/\+Configure-\/\+Request callback function. \end{DoxyCompactList}\item 
\hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689c}{error\+\_\+t} \hyperlink{ipcp_8c_a4a738ead752747f644abc73841f7c495}{ipcp\+Send\+Configure\+Ack} (\hyperlink{ppp_8h_a896c00dd8ba8bad09b3f442b7aa5ad9c}{Ppp\+Context} $\ast$context, const \hyperlink{ppp_8h_a5f9516e80961edda7e2c0b9b964bdd66}{Ppp\+Configure\+Packet} $\ast$configure\+Req\+Packet)
\begin{DoxyCompactList}\small\item\em Send-\/\+Configure-\/\+Ack callback function. \end{DoxyCompactList}\item 
\hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689c}{error\+\_\+t} \hyperlink{ipcp_8c_adc203ac26383592ce00869823b23f4a8}{ipcp\+Send\+Configure\+Nak} (\hyperlink{ppp_8h_a896c00dd8ba8bad09b3f442b7aa5ad9c}{Ppp\+Context} $\ast$context, const \hyperlink{ppp_8h_a5f9516e80961edda7e2c0b9b964bdd66}{Ppp\+Configure\+Packet} $\ast$configure\+Req\+Packet)
\begin{DoxyCompactList}\small\item\em Send-\/\+Configure-\/\+Nak callback function. \end{DoxyCompactList}\item 
\hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689c}{error\+\_\+t} \hyperlink{ipcp_8c_a0fb133e786eed4006bf5b731fbb5761c}{ipcp\+Send\+Configure\+Rej} (\hyperlink{ppp_8h_a896c00dd8ba8bad09b3f442b7aa5ad9c}{Ppp\+Context} $\ast$context, const \hyperlink{ppp_8h_a5f9516e80961edda7e2c0b9b964bdd66}{Ppp\+Configure\+Packet} $\ast$configure\+Req\+Packet)
\begin{DoxyCompactList}\small\item\em Send-\/\+Configure-\/\+Reject callback function. \end{DoxyCompactList}\item 
\hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689c}{error\+\_\+t} \hyperlink{ipcp_8c_aaa88ca1506d09a54e2b202ff8ee58515}{ipcp\+Send\+Terminate\+Req} (\hyperlink{ppp_8h_a896c00dd8ba8bad09b3f442b7aa5ad9c}{Ppp\+Context} $\ast$context)
\begin{DoxyCompactList}\small\item\em Send-\/\+Terminate-\/\+Request callback function. \end{DoxyCompactList}\item 
\hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689c}{error\+\_\+t} \hyperlink{ipcp_8c_aaeaaf946900d1f9cc6e5ec3af995ac3f}{ipcp\+Send\+Terminate\+Ack} (\hyperlink{ppp_8h_a896c00dd8ba8bad09b3f442b7aa5ad9c}{Ppp\+Context} $\ast$context, const \hyperlink{ppp_8h_a224d9bad9d75f66f3d0284450ddf6fb4}{Ppp\+Terminate\+Packet} $\ast$terminate\+Req\+Packet)
\begin{DoxyCompactList}\small\item\em Send-\/\+Terminate-\/\+Ack callback function. \end{DoxyCompactList}\item 
\hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689c}{error\+\_\+t} \hyperlink{ipcp_8c_acd42a4349d99361f2fc089b75505fd5a}{ipcp\+Send\+Code\+Rej} (\hyperlink{ppp_8h_a896c00dd8ba8bad09b3f442b7aa5ad9c}{Ppp\+Context} $\ast$context, const \hyperlink{ppp_8h_aa975a68f06316e1db0de962a31e30c2e}{Ppp\+Packet} $\ast$packet)
\begin{DoxyCompactList}\small\item\em Send-\/\+Code-\/\+Reject callback function. \end{DoxyCompactList}\item 
\hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689c}{error\+\_\+t} \hyperlink{ipcp_8c_ae93349562b71505f9006df727ecc4773}{ipcp\+Parse\+Option} (\hyperlink{ppp_8h_a896c00dd8ba8bad09b3f442b7aa5ad9c}{Ppp\+Context} $\ast$context, \hyperlink{ppp_8h_a531e616dc92a1bc09e2b7596eae470c8}{Ppp\+Option} $\ast$option, size\+\_\+t in\+Packet\+Len, \hyperlink{ppp_8h_a5f9516e80961edda7e2c0b9b964bdd66}{Ppp\+Configure\+Packet} $\ast$out\+Packet)
\begin{DoxyCompactList}\small\item\em Parse I\+P\+CP configuration option. \end{DoxyCompactList}\item 
\hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689c}{error\+\_\+t} \hyperlink{ipcp_8c_a451eeed3fcb758b4d8215faa1fbce241}{ipcp\+Parse\+Ip\+Address\+Option} (\hyperlink{ppp_8h_a896c00dd8ba8bad09b3f442b7aa5ad9c}{Ppp\+Context} $\ast$context, \hyperlink{ipcp_8h_aced6e49dbb360621d0886269f2d38128}{Ipcp\+Ip\+Address\+Option} $\ast$option, \hyperlink{ppp_8h_a5f9516e80961edda7e2c0b9b964bdd66}{Ppp\+Configure\+Packet} $\ast$out\+Packet)
\begin{DoxyCompactList}\small\item\em Parse I\+P-\/\+Address option. \end{DoxyCompactList}\end{DoxyCompactItemize}
\subsection*{Variables}
\begin{DoxyCompactItemize}
\item 
const \hyperlink{structPppCallbacks}{Ppp\+Callbacks} \hyperlink{ipcp_8c_a3cf17c09508d1fca81c33857da92e17d}{ipcp\+Callbacks}
\begin{DoxyCompactList}\small\item\em I\+P\+CP F\+SM callbacks. \end{DoxyCompactList}\end{DoxyCompactItemize}


\subsection{Detailed Description}
I\+P\+CP (P\+PP Internet Protocol Control Protocol) 

\hypertarget{pic32mz__ef__curiosity_8h_License}{}\subsection{License}\label{pic32mz__ef__curiosity_8h_License}
S\+P\+D\+X-\/\+License-\/\+Identifier\+: G\+P\+L-\/2.\+0-\/or-\/later

Copyright (C) 2010-\/2019 Oryx Embedded S\+A\+RL. All rights reserved.

This file is part of Cyclone\+T\+CP Open.

This program is free software; you can redistribute it and/or modify it under the terms of the G\+NU General Public License as published by the Free Software Foundation; either version 2 of the License, or (at your option) any later version.

This program is distributed in the hope that it will be useful, but W\+I\+T\+H\+O\+UT A\+NY W\+A\+R\+R\+A\+N\+TY; without even the implied warranty of M\+E\+R\+C\+H\+A\+N\+T\+A\+B\+I\+L\+I\+TY or F\+I\+T\+N\+E\+SS F\+OR A P\+A\+R\+T\+I\+C\+U\+L\+AR P\+U\+R\+P\+O\+SE. See the G\+NU General Public License for more details.

You should have received a copy of the G\+NU General Public License along with this program; if not, write to the Free Software Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-\/1301, U\+SA.

\begin{DoxyAuthor}{Author}
Oryx Embedded S\+A\+RL (www.\+oryx-\/embedded.\+com) 
\end{DoxyAuthor}
\begin{DoxyVersion}{Version}
1.\+9.\+6 
\end{DoxyVersion}


\subsection{Macro Definition Documentation}
\mbox{\Hypertarget{ipcp_8c_afcdf5e66fd927a7f4cc64295acd20407}\label{ipcp_8c_afcdf5e66fd927a7f4cc64295acd20407}} 
\index{ipcp.\+c@{ipcp.\+c}!T\+R\+A\+C\+E\+\_\+\+L\+E\+V\+EL@{T\+R\+A\+C\+E\+\_\+\+L\+E\+V\+EL}}
\index{T\+R\+A\+C\+E\+\_\+\+L\+E\+V\+EL@{T\+R\+A\+C\+E\+\_\+\+L\+E\+V\+EL}!ipcp.\+c@{ipcp.\+c}}
\subsubsection{\texorpdfstring{T\+R\+A\+C\+E\+\_\+\+L\+E\+V\+EL}{TRACE\_LEVEL}}
{\footnotesize\ttfamily \#define T\+R\+A\+C\+E\+\_\+\+L\+E\+V\+EL~P\+P\+P\+\_\+\+T\+R\+A\+C\+E\+\_\+\+L\+E\+V\+EL}



Definition at line 32 of file ipcp.\+c.



\subsection{Function Documentation}
\mbox{\Hypertarget{ipcp_8c_a461ccc0abc7cbcf8492efd87070e7b11}\label{ipcp_8c_a461ccc0abc7cbcf8492efd87070e7b11}} 
\index{ipcp.\+c@{ipcp.\+c}!ipcp\+Close@{ipcp\+Close}}
\index{ipcp\+Close@{ipcp\+Close}!ipcp.\+c@{ipcp.\+c}}
\subsubsection{\texorpdfstring{ipcp\+Close()}{ipcpClose()}}
{\footnotesize\ttfamily \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689c}{error\+\_\+t} ipcp\+Close (\begin{DoxyParamCaption}\item[{\hyperlink{ppp_8h_a896c00dd8ba8bad09b3f442b7aa5ad9c}{Ppp\+Context} $\ast$}]{context }\end{DoxyParamCaption})}



I\+P\+CP Close event. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em context} & P\+PP context \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Error code 
\end{DoxyReturn}


Definition at line 97 of file ipcp.\+c.


\begin{DoxyCode}
98 \{
99    \textcolor{comment}{//Debug message}
100    \hyperlink{debug_8h_a7339bfd784193a5c79efcef2eeb2d6df}{TRACE\_INFO}(\textcolor{stringliteral}{"\(\backslash\)r\(\backslash\)nIPCP Close event\(\backslash\)r\(\backslash\)n"});
101 
102    \textcolor{comment}{//The lower layer is no longer ready to carry packets}
103    \hyperlink{ppp__fsm_8c_abada68985183c2e9b998f21ebb7cbe65}{pppDownEvent}(context, &context->ipcpFsm, &\hyperlink{ipcp_8c_a3cf17c09508d1fca81c33857da92e17d}{ipcpCallbacks});
104    \textcolor{comment}{//The link is no longer available for traffic}
105    \hyperlink{ppp__fsm_8c_a99f9adb8cee4039fd63439bd3401b7f9}{pppCloseEvent}(context, &context->ipcpFsm, &\hyperlink{ipcp_8c_a3cf17c09508d1fca81c33857da92e17d}{ipcpCallbacks});
106 
107    \textcolor{comment}{//Successful processing}
108    \textcolor{keywordflow}{return} \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689cabf350750d0d4fabd8954c0f1e9bbae94}{NO\_ERROR};
109 \}
\end{DoxyCode}
\mbox{\Hypertarget{ipcp_8c_a30bc2e7c83f3e0fbcc54cada283e8073}\label{ipcp_8c_a30bc2e7c83f3e0fbcc54cada283e8073}} 
\index{ipcp.\+c@{ipcp.\+c}!ipcp\+Init\+Restart\+Count@{ipcp\+Init\+Restart\+Count}}
\index{ipcp\+Init\+Restart\+Count@{ipcp\+Init\+Restart\+Count}!ipcp.\+c@{ipcp.\+c}}
\subsubsection{\texorpdfstring{ipcp\+Init\+Restart\+Count()}{ipcpInitRestartCount()}}
{\footnotesize\ttfamily void ipcp\+Init\+Restart\+Count (\begin{DoxyParamCaption}\item[{\hyperlink{ppp_8h_a896c00dd8ba8bad09b3f442b7aa5ad9c}{Ppp\+Context} $\ast$}]{context,  }\item[{\hyperlink{compiler__port_8h_a12a1e9b3ce141648783a82445d02b58d}{uint\+\_\+t}}]{value }\end{DoxyParamCaption})}



Initialize-\/\+Restart-\/\+Count callback function. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em context} & P\+PP context \\
\hline
\mbox{\tt in}  & {\em value} & Restart counter value \\
\hline
\end{DoxyParams}


Definition at line 715 of file ipcp.\+c.


\begin{DoxyCode}
716 \{
717    \textcolor{comment}{//Debug message}
718    \hyperlink{debug_8h_a7339bfd784193a5c79efcef2eeb2d6df}{TRACE\_INFO}(\textcolor{stringliteral}{"IPCP Initialize-Restart-Count callback\(\backslash\)r\(\backslash\)n"});
719 
720    \textcolor{comment}{//Initialize restart counter}
721    context->ipcpFsm.restartCounter = \hyperlink{dtls__misc_8h_a74bce8e92ccabd0c885447114a48b80e}{value};
722 \}
\end{DoxyCode}
\mbox{\Hypertarget{ipcp_8c_a964305681ae4db8b15a060834fc95967}\label{ipcp_8c_a964305681ae4db8b15a060834fc95967}} 
\index{ipcp.\+c@{ipcp.\+c}!ipcp\+Open@{ipcp\+Open}}
\index{ipcp\+Open@{ipcp\+Open}!ipcp.\+c@{ipcp.\+c}}
\subsubsection{\texorpdfstring{ipcp\+Open()}{ipcpOpen()}}
{\footnotesize\ttfamily \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689c}{error\+\_\+t} ipcp\+Open (\begin{DoxyParamCaption}\item[{\hyperlink{ppp_8h_a896c00dd8ba8bad09b3f442b7aa5ad9c}{Ppp\+Context} $\ast$}]{context }\end{DoxyParamCaption})}



I\+P\+CP Open event. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em context} & P\+PP context \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Error code 
\end{DoxyReturn}


Definition at line 76 of file ipcp.\+c.


\begin{DoxyCode}
77 \{
78    \textcolor{comment}{//Debug message}
79    \hyperlink{debug_8h_a7339bfd784193a5c79efcef2eeb2d6df}{TRACE\_INFO}(\textcolor{stringliteral}{"\(\backslash\)r\(\backslash\)nIPCP Open event\(\backslash\)r\(\backslash\)n"});
80 
81    \textcolor{comment}{//The link is administratively available for traffic}
82    \hyperlink{ppp__fsm_8c_a56a599e9081bd1ef91c41ecb597b9ba3}{pppOpenEvent}(context, &context->ipcpFsm, &\hyperlink{ipcp_8c_a3cf17c09508d1fca81c33857da92e17d}{ipcpCallbacks});
83    \textcolor{comment}{//The lower layer is ready to carry packets}
84    \hyperlink{ppp__fsm_8c_ac8891398361d78b0e913933626ebd232}{pppUpEvent}(context, &context->ipcpFsm, &\hyperlink{ipcp_8c_a3cf17c09508d1fca81c33857da92e17d}{ipcpCallbacks});
85 
86    \textcolor{comment}{//Successful processing}
87    \textcolor{keywordflow}{return} \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689cabf350750d0d4fabd8954c0f1e9bbae94}{NO\_ERROR};
88 \}
\end{DoxyCode}
\mbox{\Hypertarget{ipcp_8c_a451eeed3fcb758b4d8215faa1fbce241}\label{ipcp_8c_a451eeed3fcb758b4d8215faa1fbce241}} 
\index{ipcp.\+c@{ipcp.\+c}!ipcp\+Parse\+Ip\+Address\+Option@{ipcp\+Parse\+Ip\+Address\+Option}}
\index{ipcp\+Parse\+Ip\+Address\+Option@{ipcp\+Parse\+Ip\+Address\+Option}!ipcp.\+c@{ipcp.\+c}}
\subsubsection{\texorpdfstring{ipcp\+Parse\+Ip\+Address\+Option()}{ipcpParseIpAddressOption()}}
{\footnotesize\ttfamily \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689c}{error\+\_\+t} ipcp\+Parse\+Ip\+Address\+Option (\begin{DoxyParamCaption}\item[{\hyperlink{ppp_8h_a896c00dd8ba8bad09b3f442b7aa5ad9c}{Ppp\+Context} $\ast$}]{context,  }\item[{\hyperlink{ipcp_8h_aced6e49dbb360621d0886269f2d38128}{Ipcp\+Ip\+Address\+Option} $\ast$}]{option,  }\item[{\hyperlink{ppp_8h_a5f9516e80961edda7e2c0b9b964bdd66}{Ppp\+Configure\+Packet} $\ast$}]{out\+Packet }\end{DoxyParamCaption})}



Parse I\+P-\/\+Address option. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em context} & P\+PP context \\
\hline
\mbox{\tt in}  & {\em option} & Option to be checked \\
\hline
\mbox{\tt out}  & {\em out\+Packet} & Pointer to the Configure-\/\+Nak or Configure-\/\+Reject packet \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Error code 
\end{DoxyReturn}


Definition at line 1035 of file ipcp.\+c.


\begin{DoxyCode}
1037 \{
1038    \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689c}{error\_t} error;
1039 
1040    \textcolor{comment}{//Check length field}
1041    \textcolor{keywordflow}{if}(option->length == \textcolor{keyword}{sizeof}(\hyperlink{ipcp_8h_aced6e49dbb360621d0886269f2d38128}{IpcpIpAddressOption}))
1042    \{
1043       \textcolor{comment}{//Check whether the option value is acceptable}
1044       \textcolor{keywordflow}{if}(option->ipAddr != \hyperlink{ipv4_8h_aa9d277a6ff68d361eaf48d6af73e78e8}{IPV4\_UNSPECIFIED\_ADDR})
1045       \{
1046          \textcolor{comment}{//If every configuration option received in the Configure-Request is}
1047          \textcolor{comment}{//recognizable and all values are acceptable, then the implementation}
1048          \textcolor{comment}{//must transmit a Configure-Ack}
1049          \textcolor{keywordflow}{if}(outPacket != \hyperlink{group__BSPDefine_ga070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL} && outPacket->code == \hyperlink{ppp_8h_a961984e634b12a11d381115a46f14188a915e8fc9f7c9bacb22b54dbccd684591}{PPP\_CODE\_CONFIGURE\_ACK})
1050          \{
1051             \textcolor{comment}{//Save IP address}
1052             context->peerConfig.ipAddr = option->ipAddr;
1053 
1054             \textcolor{comment}{//The options field of the Configure-Ack packet contains the}
1055             \textcolor{comment}{//configuration options that the sender is acknowledging}
1056             \hyperlink{ppp__misc_8c_a52b0a518f20c37d08e66f8c3b437c74f}{pppAddOption}(outPacket, \hyperlink{ipcp_8h_a82079ac6099e93506f2b406bc75bbd45a124bafb002549c2de4cb293f5e158fd9}{IPCP\_OPTION\_IP\_ADDRESS},
1057                (\textcolor{keywordtype}{void} *) &option->ipAddr, option->length - \textcolor{keyword}{sizeof}(\hyperlink{ppp_8h_a531e616dc92a1bc09e2b7596eae470c8}{PppOption}));
1058          \}
1059 
1060          \textcolor{comment}{//The value is acceptable}
1061          error = \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689cabf350750d0d4fabd8954c0f1e9bbae94}{NO\_ERROR};
1062       \}
1063       \textcolor{keywordflow}{else}
1064       \{
1065          \textcolor{comment}{//If all configuration options are recognizable, but some values are not}
1066          \textcolor{comment}{//acceptable, then the implementation must transmit a Configure-Nak}
1067          \textcolor{keywordflow}{if}(outPacket != \hyperlink{group__BSPDefine_ga070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL} && outPacket->code == \hyperlink{ppp_8h_a961984e634b12a11d381115a46f14188aed576599db22b88142cb2cd4e71986be}{PPP\_CODE\_CONFIGURE\_NAK})
1068          \{
1069             \textcolor{comment}{//The option must be modified to a value acceptable to the}
1070             \textcolor{comment}{//Configure-Nak sender}
1071             \hyperlink{ppp__misc_8c_a52b0a518f20c37d08e66f8c3b437c74f}{pppAddOption}(outPacket, \hyperlink{ipcp_8h_a82079ac6099e93506f2b406bc75bbd45a124bafb002549c2de4cb293f5e158fd9}{IPCP\_OPTION\_IP\_ADDRESS},
1072                &context->peerConfig.ipAddr, \textcolor{keyword}{sizeof}(\hyperlink{ipv4_8h_a411debb3d770caa0c06d3f73367da37f}{Ipv4Addr}));
1073          \}
1074 
1075          \textcolor{comment}{//The value is not acceptable}
1076          error = \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689ca979424b1dc1779fe6193ab5161329513}{ERROR\_INVALID\_VALUE};
1077       \}
1078    \}
1079    \textcolor{keywordflow}{else}
1080    \{
1081       \textcolor{comment}{//Invalid length field}
1082       error = \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689cae5c014519c3ac2540447887ddca1bd28}{ERROR\_INVALID\_LENGTH};
1083    \}
1084 
1085    \textcolor{comment}{//Return status code}
1086    \textcolor{keywordflow}{return} error;
1087 \}
\end{DoxyCode}
\mbox{\Hypertarget{ipcp_8c_ae93349562b71505f9006df727ecc4773}\label{ipcp_8c_ae93349562b71505f9006df727ecc4773}} 
\index{ipcp.\+c@{ipcp.\+c}!ipcp\+Parse\+Option@{ipcp\+Parse\+Option}}
\index{ipcp\+Parse\+Option@{ipcp\+Parse\+Option}!ipcp.\+c@{ipcp.\+c}}
\subsubsection{\texorpdfstring{ipcp\+Parse\+Option()}{ipcpParseOption()}}
{\footnotesize\ttfamily \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689c}{error\+\_\+t} ipcp\+Parse\+Option (\begin{DoxyParamCaption}\item[{\hyperlink{ppp_8h_a896c00dd8ba8bad09b3f442b7aa5ad9c}{Ppp\+Context} $\ast$}]{context,  }\item[{\hyperlink{ppp_8h_a531e616dc92a1bc09e2b7596eae470c8}{Ppp\+Option} $\ast$}]{option,  }\item[{size\+\_\+t}]{in\+Packet\+Len,  }\item[{\hyperlink{ppp_8h_a5f9516e80961edda7e2c0b9b964bdd66}{Ppp\+Configure\+Packet} $\ast$}]{out\+Packet }\end{DoxyParamCaption})}



Parse I\+P\+CP configuration option. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em context} & P\+PP context \\
\hline
\mbox{\tt in}  & {\em option} & Option to be checked \\
\hline
\mbox{\tt in}  & {\em in\+Packet\+Len} & Remaining bytes to process in the incoming packet \\
\hline
\mbox{\tt out}  & {\em out\+Packet} & Pointer to the Configure-\/\+Ack, Nak or Reject packet \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Error code 
\end{DoxyReturn}


Definition at line 983 of file ipcp.\+c.


\begin{DoxyCode}
985 \{
986    \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689c}{error\_t} error;
987 
988    \textcolor{comment}{//Malformed IPCP packet?}
989    \textcolor{keywordflow}{if}(inPacketLen < \textcolor{keyword}{sizeof}(\hyperlink{ppp_8h_a531e616dc92a1bc09e2b7596eae470c8}{PppOption}))
990       \textcolor{keywordflow}{return} \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689cae5c014519c3ac2540447887ddca1bd28}{ERROR\_INVALID\_LENGTH};
991 
992    \textcolor{comment}{//Check option length}
993    \textcolor{keywordflow}{if}(option->length < \textcolor{keyword}{sizeof}(\hyperlink{ppp_8h_a531e616dc92a1bc09e2b7596eae470c8}{PppOption}))
994       \textcolor{keywordflow}{return} \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689cae5c014519c3ac2540447887ddca1bd28}{ERROR\_INVALID\_LENGTH};
995    \textcolor{keywordflow}{if}(option->length > inPacketLen)
996       \textcolor{keywordflow}{return} \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689cae5c014519c3ac2540447887ddca1bd28}{ERROR\_INVALID\_LENGTH};
997 
998    \textcolor{comment}{//Check option type}
999    \textcolor{keywordflow}{switch}(option->type)
1000    \{
1001    \textcolor{keywordflow}{case} \hyperlink{ipcp_8h_a82079ac6099e93506f2b406bc75bbd45a124bafb002549c2de4cb293f5e158fd9}{IPCP\_OPTION\_IP\_ADDRESS}:
1002       \textcolor{comment}{//Check IP-Address option}
1003       error = \hyperlink{ipcp_8c_a451eeed3fcb758b4d8215faa1fbce241}{ipcpParseIpAddressOption}(context, (
      \hyperlink{ipcp_8h_aced6e49dbb360621d0886269f2d38128}{IpcpIpAddressOption} *) option, outPacket);
1004       \textcolor{keywordflow}{break};
1005    \textcolor{keywordflow}{default}:
1006       \textcolor{comment}{//If some configuration options received in the Configure-Request are not}
1007       \textcolor{comment}{//recognizable or not acceptable for negotiation, then the implementation}
1008       \textcolor{comment}{//must transmit a Configure-Reject}
1009       \textcolor{keywordflow}{if}(outPacket != \hyperlink{group__BSPDefine_ga070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL} && outPacket->code == \hyperlink{ppp_8h_a961984e634b12a11d381115a46f14188a5bd41f9dd646b4a1dd42c2f98f22cedd}{PPP\_CODE\_CONFIGURE\_REJ})
1010       \{
1011          \textcolor{comment}{//The options field of the Configure-Reject packet is filled}
1012          \textcolor{comment}{//with the unrecognized options from the Configure-Request}
1013          \hyperlink{ppp__misc_8c_a52b0a518f20c37d08e66f8c3b437c74f}{pppAddOption}(outPacket, option->type, option->data,
1014             option->length - \textcolor{keyword}{sizeof}(\hyperlink{ppp_8h_a531e616dc92a1bc09e2b7596eae470c8}{PppOption}));
1015       \}
1016 
1017       \textcolor{comment}{//The option is not acceptable for negotiation}
1018       error = \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689ca2daa3c161edaa4477d1ae954c2136008}{ERROR\_INVALID\_TYPE};
1019       \textcolor{keywordflow}{break};
1020    \}
1021 
1022    \textcolor{comment}{//Return status code}
1023    \textcolor{keywordflow}{return} error;
1024 \}
\end{DoxyCode}
\mbox{\Hypertarget{ipcp_8c_af1047c6f32347c41b31f8c8c45d002e4}\label{ipcp_8c_af1047c6f32347c41b31f8c8c45d002e4}} 
\index{ipcp.\+c@{ipcp.\+c}!ipcp\+Process\+Code\+Rej@{ipcp\+Process\+Code\+Rej}}
\index{ipcp\+Process\+Code\+Rej@{ipcp\+Process\+Code\+Rej}!ipcp.\+c@{ipcp.\+c}}
\subsubsection{\texorpdfstring{ipcp\+Process\+Code\+Rej()}{ipcpProcessCodeRej()}}
{\footnotesize\ttfamily \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689c}{error\+\_\+t} ipcp\+Process\+Code\+Rej (\begin{DoxyParamCaption}\item[{\hyperlink{ppp_8h_a896c00dd8ba8bad09b3f442b7aa5ad9c}{Ppp\+Context} $\ast$}]{context,  }\item[{const \hyperlink{ppp_8h_ad05fe14ee4cca32c7b40f2cdf9c48a8d}{Ppp\+Code\+Rej\+Packet} $\ast$}]{code\+Rej\+Packet }\end{DoxyParamCaption})}



Process Code-\/\+Reject packet. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em context} & P\+PP context \\
\hline
\mbox{\tt in}  & {\em code\+Rej\+Packet} & Packet received from the peer \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Error code 
\end{DoxyReturn}


Definition at line 549 of file ipcp.\+c.


\begin{DoxyCode}
551 \{
552    \textcolor{keywordtype}{size\_t} \hyperlink{dtls__misc_8h_ab43ca82dd7fa2a0e56f941032ef324c4}{length};
553    \hyperlink{ppp_8h_aa975a68f06316e1db0de962a31e30c2e}{PppPacket} *packet;
554 
555    \textcolor{comment}{//Debug message}
556    \hyperlink{debug_8h_a7339bfd784193a5c79efcef2eeb2d6df}{TRACE\_INFO}(\textcolor{stringliteral}{"\(\backslash\)r\(\backslash\)nIPCP Receive-Code-Reject event\(\backslash\)r\(\backslash\)n"});
557 
558    \textcolor{comment}{//Point to the rejected packet}
559    packet = (\hyperlink{ppp_8h_aa975a68f06316e1db0de962a31e30c2e}{PppPacket} *) codeRejPacket->rejectedPacket;
560    \textcolor{comment}{//Retrieve the length of the rejected packet}
561    length = \hyperlink{cpu__endian_8h_a9312c6eb72e64f748ae0d0e0dc3ec9b9}{ntohs}(codeRejPacket->length) - \textcolor{keyword}{sizeof}(\hyperlink{ppp_8h_ad05fe14ee4cca32c7b40f2cdf9c48a8d}{PppCodeRejPacket});
562 
563    \textcolor{comment}{//Make sure the length of the rejected packet is valid}
564    \textcolor{keywordflow}{if}(length < \textcolor{keyword}{sizeof}(\hyperlink{ppp_8h_aa975a68f06316e1db0de962a31e30c2e}{PppPacket}))
565       \textcolor{keywordflow}{return} \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689cae5c014519c3ac2540447887ddca1bd28}{ERROR\_INVALID\_LENGTH};
566 
567    \textcolor{comment}{//Check whether the rejected value is acceptable or catastrophic}
568    \textcolor{keywordflow}{if}(packet->code < \hyperlink{ppp_8h_a961984e634b12a11d381115a46f14188a4e4279fdfcf8d81d216d58801f58d84d}{PPP\_CODE\_CONFIGURE\_REQ} ||
569       packet->code > \hyperlink{ppp_8h_a961984e634b12a11d381115a46f14188a7635f2c8a624bbf7fcb8eea300082a7d}{PPP\_CODE\_CODE\_REJ})
570    \{
571       \textcolor{comment}{//The RXJ+ event arises when the rejected value is acceptable, such}
572       \textcolor{comment}{//as a Code-Reject of an extended code, or a Protocol-Reject of a}
573       \textcolor{comment}{//NCP. These are within the scope of normal operation}
574       \hyperlink{ppp__fsm_8c_ab0b7104a9aeef47cf8a3611f8ff0c49d}{pppRcvCodeRejEvent}(context, &context->ipcpFsm, &
      \hyperlink{ipcp_8c_a3cf17c09508d1fca81c33857da92e17d}{ipcpCallbacks}, \hyperlink{os__port_8h_aa8cecfc5c5c054d2875c03e77b7be15d}{TRUE});
575    \}
576    \textcolor{keywordflow}{else}
577    \{
578       \textcolor{comment}{//The RXJ- event arises when the rejected value is catastrophic, such}
579       \textcolor{comment}{//as a Code-Reject of Configure-Request! This event communicates an}
580       \textcolor{comment}{//unrecoverable error that terminates the connection}
581       \hyperlink{ppp__fsm_8c_ab0b7104a9aeef47cf8a3611f8ff0c49d}{pppRcvCodeRejEvent}(context, &context->ipcpFsm, &
      \hyperlink{ipcp_8c_a3cf17c09508d1fca81c33857da92e17d}{ipcpCallbacks}, \hyperlink{os__port_8h_aa93f0eb578d23995850d61f7d61c55c1}{FALSE});
582    \}
583 
584    \textcolor{comment}{//Successful processing}
585    \textcolor{keywordflow}{return} \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689cabf350750d0d4fabd8954c0f1e9bbae94}{NO\_ERROR};
586 \}
\end{DoxyCode}
\mbox{\Hypertarget{ipcp_8c_af0929a9f83566f8ff0356ee9c5c0e68a}\label{ipcp_8c_af0929a9f83566f8ff0356ee9c5c0e68a}} 
\index{ipcp.\+c@{ipcp.\+c}!ipcp\+Process\+Configure\+Ack@{ipcp\+Process\+Configure\+Ack}}
\index{ipcp\+Process\+Configure\+Ack@{ipcp\+Process\+Configure\+Ack}!ipcp.\+c@{ipcp.\+c}}
\subsubsection{\texorpdfstring{ipcp\+Process\+Configure\+Ack()}{ipcpProcessConfigureAck()}}
{\footnotesize\ttfamily \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689c}{error\+\_\+t} ipcp\+Process\+Configure\+Ack (\begin{DoxyParamCaption}\item[{\hyperlink{ppp_8h_a896c00dd8ba8bad09b3f442b7aa5ad9c}{Ppp\+Context} $\ast$}]{context,  }\item[{const \hyperlink{ppp_8h_a5f9516e80961edda7e2c0b9b964bdd66}{Ppp\+Configure\+Packet} $\ast$}]{configure\+Ack\+Packet }\end{DoxyParamCaption})}



Process Configure-\/\+Ack packet. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em context} & P\+PP context \\
\hline
\mbox{\tt in}  & {\em configure\+Ack\+Packet} & Packet received from the peer \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Error code 
\end{DoxyReturn}


Definition at line 321 of file ipcp.\+c.


\begin{DoxyCode}
323 \{
324    \textcolor{comment}{//Debug message}
325    \hyperlink{debug_8h_a7339bfd784193a5c79efcef2eeb2d6df}{TRACE\_INFO}(\textcolor{stringliteral}{"\(\backslash\)r\(\backslash\)nIPCP Receive-Configure-Ack event\(\backslash\)r\(\backslash\)n"});
326 
327    \textcolor{comment}{//When a packet is received with an invalid Identifier field, the}
328    \textcolor{comment}{//packet is silently discarded without affecting the automaton}
329    \textcolor{keywordflow}{if}(configureAckPacket->identifier != context->ipcpFsm.identifier)
330       \textcolor{keywordflow}{return} \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689ca2bc2298123e24e3d82592b5c68c20612}{ERROR\_WRONG\_IDENTIFIER};
331 
332    \textcolor{comment}{//A valid Configure-Ack packet has been received from the peer}
333    \hyperlink{ppp__fsm_8c_a45bb9f242e43bee7a741258f86c9c276}{pppRcvConfigureAckEvent}(context, &context->ipcpFsm, &
      \hyperlink{ipcp_8c_a3cf17c09508d1fca81c33857da92e17d}{ipcpCallbacks});
334 
335    \textcolor{comment}{//Successful processing}
336    \textcolor{keywordflow}{return} \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689cabf350750d0d4fabd8954c0f1e9bbae94}{NO\_ERROR};
337 \}
\end{DoxyCode}
\mbox{\Hypertarget{ipcp_8c_a0630dbaa222d4ed2fc54135eae3de651}\label{ipcp_8c_a0630dbaa222d4ed2fc54135eae3de651}} 
\index{ipcp.\+c@{ipcp.\+c}!ipcp\+Process\+Configure\+Nak@{ipcp\+Process\+Configure\+Nak}}
\index{ipcp\+Process\+Configure\+Nak@{ipcp\+Process\+Configure\+Nak}!ipcp.\+c@{ipcp.\+c}}
\subsubsection{\texorpdfstring{ipcp\+Process\+Configure\+Nak()}{ipcpProcessConfigureNak()}}
{\footnotesize\ttfamily \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689c}{error\+\_\+t} ipcp\+Process\+Configure\+Nak (\begin{DoxyParamCaption}\item[{\hyperlink{ppp_8h_a896c00dd8ba8bad09b3f442b7aa5ad9c}{Ppp\+Context} $\ast$}]{context,  }\item[{const \hyperlink{ppp_8h_a5f9516e80961edda7e2c0b9b964bdd66}{Ppp\+Configure\+Packet} $\ast$}]{configure\+Nak\+Packet }\end{DoxyParamCaption})}



Process Configure-\/\+Nak packet. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em context} & P\+PP context \\
\hline
\mbox{\tt in}  & {\em configure\+Nak\+Packet} & Packet received from the peer \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Error code 
\end{DoxyReturn}


Definition at line 347 of file ipcp.\+c.


\begin{DoxyCode}
349 \{
350    \textcolor{keywordtype}{size\_t} \hyperlink{dtls__misc_8h_ab43ca82dd7fa2a0e56f941032ef324c4}{length};
351    \hyperlink{ppp_8h_a531e616dc92a1bc09e2b7596eae470c8}{PppOption} *option;
352 
353    \textcolor{comment}{//Debug message}
354    \hyperlink{debug_8h_a7339bfd784193a5c79efcef2eeb2d6df}{TRACE\_INFO}(\textcolor{stringliteral}{"IPCP Receive-Configure-Nak event\(\backslash\)r\(\backslash\)n"});
355 
356    \textcolor{comment}{//When a packet is received with an invalid Identifier field, the}
357    \textcolor{comment}{//packet is silently discarded without affecting the automaton}
358    \textcolor{keywordflow}{if}(configureNakPacket->identifier != context->ipcpFsm.identifier)
359       \textcolor{keywordflow}{return} \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689ca2bc2298123e24e3d82592b5c68c20612}{ERROR\_WRONG\_IDENTIFIER};
360 
361    \textcolor{comment}{//Retrieve the length of the option list}
362    length = \hyperlink{cpu__endian_8h_a9312c6eb72e64f748ae0d0e0dc3ec9b9}{ntohs}(configureNakPacket->length) - \textcolor{keyword}{sizeof}(\hyperlink{ppp_8h_a5f9516e80961edda7e2c0b9b964bdd66}{PppConfigurePacket});
363    \textcolor{comment}{//Point to the first option}
364    option = (\hyperlink{ppp_8h_a531e616dc92a1bc09e2b7596eae470c8}{PppOption} *) configureNakPacket->options;
365 
366    \textcolor{comment}{//Parse configuration options}
367    \textcolor{keywordflow}{while}(length > 0)
368    \{
369       \textcolor{comment}{//Check option length}
370       \textcolor{keywordflow}{if}(option->length < \textcolor{keyword}{sizeof}(\hyperlink{ppp_8h_a531e616dc92a1bc09e2b7596eae470c8}{PppOption}))
371          \textcolor{keywordflow}{return} \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689cae5c014519c3ac2540447887ddca1bd28}{ERROR\_INVALID\_LENGTH};
372       \textcolor{keywordflow}{if}(option->length > length)
373          \textcolor{keywordflow}{return} \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689cae5c014519c3ac2540447887ddca1bd28}{ERROR\_INVALID\_LENGTH};
374 
375       \textcolor{comment}{//IP-Address option?}
376       \textcolor{keywordflow}{if}(option->type == \hyperlink{ipcp_8h_a82079ac6099e93506f2b406bc75bbd45a124bafb002549c2de4cb293f5e158fd9}{IPCP\_OPTION\_IP\_ADDRESS})
377       \{
378          \textcolor{comment}{//Cast option}
379          \hyperlink{ipcp_8h_aced6e49dbb360621d0886269f2d38128}{IpcpIpAddressOption} *ipAddressOption = (
      \hyperlink{ipcp_8h_aced6e49dbb360621d0886269f2d38128}{IpcpIpAddressOption} *) option;
380 
381          \textcolor{comment}{//Check option length}
382          \textcolor{keywordflow}{if}(ipAddressOption->length != \textcolor{keyword}{sizeof}(\hyperlink{ipcp_8h_aced6e49dbb360621d0886269f2d38128}{IpcpIpAddressOption}))
383             \textcolor{keywordflow}{return} \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689cae5c014519c3ac2540447887ddca1bd28}{ERROR\_INVALID\_LENGTH};
384 
385          \textcolor{comment}{//Save IP address}
386          context->localConfig.ipAddr = ipAddressOption->ipAddr;
387       \}
388       \textcolor{comment}{//Primary-DNS-Server-Address option?}
389       \textcolor{keywordflow}{else} \textcolor{keywordflow}{if}(option->type == \hyperlink{ipcp_8h_a82079ac6099e93506f2b406bc75bbd45ad0bf3add16c3e3c90346b3ffdc692a55}{IPCP\_OPTION\_PRIMARY\_DNS})
390       \{
391          \textcolor{comment}{//Cast option}
392          \hyperlink{ipcp_8h_a784af30a529c5a188823c77b271fa4e6}{IpcpPrimaryDnsOption} *primaryDns = (
      \hyperlink{ipcp_8h_a784af30a529c5a188823c77b271fa4e6}{IpcpPrimaryDnsOption} *) option;
393 
394          \textcolor{comment}{//Check option length}
395          \textcolor{keywordflow}{if}(primaryDns->length != \textcolor{keyword}{sizeof}(\hyperlink{ipcp_8h_a784af30a529c5a188823c77b271fa4e6}{IpcpPrimaryDnsOption}))
396             \textcolor{keywordflow}{return} \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689cae5c014519c3ac2540447887ddca1bd28}{ERROR\_INVALID\_LENGTH};
397 
398          \textcolor{comment}{//Save primary DNS server address}
399          context->localConfig.primaryDns = primaryDns->ipAddr;
400       \}
401       \textcolor{comment}{//Secondary-DNS-Server-Address option?}
402       \textcolor{keywordflow}{else} \textcolor{keywordflow}{if}(option->type == \hyperlink{ipcp_8h_a82079ac6099e93506f2b406bc75bbd45abd3891dd42a37b50a69db93d70e55980}{IPCP\_OPTION\_SECONDARY\_DNS})
403       \{
404          \textcolor{comment}{//Cast option}
405          \hyperlink{ipcp_8h_a0d2335cdf965392a694d9a009ce67e85}{IpcpSecondaryDnsOption} *secondaryDns = (
      \hyperlink{ipcp_8h_a0d2335cdf965392a694d9a009ce67e85}{IpcpSecondaryDnsOption} *) option;
406 
407          \textcolor{comment}{//Check option length}
408          \textcolor{keywordflow}{if}(secondaryDns->length != \textcolor{keyword}{sizeof}(\hyperlink{ipcp_8h_a0d2335cdf965392a694d9a009ce67e85}{IpcpSecondaryDnsOption}))
409             \textcolor{keywordflow}{return} \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689cae5c014519c3ac2540447887ddca1bd28}{ERROR\_INVALID\_LENGTH};
410 
411          \textcolor{comment}{//Save secondary DNS server address}
412          context->localConfig.secondaryDns = secondaryDns->ipAddr;
413       \}
414 
415       \textcolor{comment}{//Remaining bytes to process}
416       length -= option->length;
417       \textcolor{comment}{//Jump to the next option}
418       option = (\hyperlink{ppp_8h_a531e616dc92a1bc09e2b7596eae470c8}{PppOption} *) ((\hyperlink{stdint_8h_aba7bc1797add20fe3efdf37ced1182c5}{uint8\_t} *) option + option->length);
419    \}
420 
421    \textcolor{comment}{//A valid Configure-Nak or Configure-Reject packet has been received from the peer}
422    \hyperlink{ppp__fsm_8c_afb660738da04688fc48d49afbca2b594}{pppRcvConfigureNakEvent}(context, &context->ipcpFsm, &
      \hyperlink{ipcp_8c_a3cf17c09508d1fca81c33857da92e17d}{ipcpCallbacks});
423 
424    \textcolor{comment}{//Successful processing}
425    \textcolor{keywordflow}{return} \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689cabf350750d0d4fabd8954c0f1e9bbae94}{NO\_ERROR};
426 \}
\end{DoxyCode}
\mbox{\Hypertarget{ipcp_8c_a1b054435397e557dba93c7f33a4f7ca2}\label{ipcp_8c_a1b054435397e557dba93c7f33a4f7ca2}} 
\index{ipcp.\+c@{ipcp.\+c}!ipcp\+Process\+Configure\+Reject@{ipcp\+Process\+Configure\+Reject}}
\index{ipcp\+Process\+Configure\+Reject@{ipcp\+Process\+Configure\+Reject}!ipcp.\+c@{ipcp.\+c}}
\subsubsection{\texorpdfstring{ipcp\+Process\+Configure\+Reject()}{ipcpProcessConfigureReject()}}
{\footnotesize\ttfamily \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689c}{error\+\_\+t} ipcp\+Process\+Configure\+Reject (\begin{DoxyParamCaption}\item[{\hyperlink{ppp_8h_a896c00dd8ba8bad09b3f442b7aa5ad9c}{Ppp\+Context} $\ast$}]{context,  }\item[{const \hyperlink{ppp_8h_a5f9516e80961edda7e2c0b9b964bdd66}{Ppp\+Configure\+Packet} $\ast$}]{configure\+Rej\+Packet }\end{DoxyParamCaption})}



Process Configure-\/\+Reject packet. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em context} & P\+PP context \\
\hline
\mbox{\tt in}  & {\em configure\+Rej\+Packet} & Packet received from the peer \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Error code 
\end{DoxyReturn}


Definition at line 436 of file ipcp.\+c.


\begin{DoxyCode}
438 \{
439    \textcolor{keywordtype}{size\_t} \hyperlink{dtls__misc_8h_ab43ca82dd7fa2a0e56f941032ef324c4}{length};
440    \hyperlink{ppp_8h_a531e616dc92a1bc09e2b7596eae470c8}{PppOption} *option;
441 
442    \textcolor{comment}{//Debug message}
443    \hyperlink{debug_8h_a7339bfd784193a5c79efcef2eeb2d6df}{TRACE\_INFO}(\textcolor{stringliteral}{"\(\backslash\)r\(\backslash\)nIPCP Receive-Configure-Reject event\(\backslash\)r\(\backslash\)n"});
444 
445    \textcolor{comment}{//When a packet is received with an invalid Identifier field, the}
446    \textcolor{comment}{//packet is silently discarded without affecting the automaton}
447    \textcolor{keywordflow}{if}(configureRejPacket->identifier != context->ipcpFsm.identifier)
448       \textcolor{keywordflow}{return} \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689ca2bc2298123e24e3d82592b5c68c20612}{ERROR\_WRONG\_IDENTIFIER};
449 
450    \textcolor{comment}{//Retrieve the length of the option list}
451    length = \hyperlink{cpu__endian_8h_a9312c6eb72e64f748ae0d0e0dc3ec9b9}{ntohs}(configureRejPacket->length) - \textcolor{keyword}{sizeof}(\hyperlink{ppp_8h_a5f9516e80961edda7e2c0b9b964bdd66}{PppConfigurePacket});
452    \textcolor{comment}{//Point to the first option}
453    option = (\hyperlink{ppp_8h_a531e616dc92a1bc09e2b7596eae470c8}{PppOption} *) configureRejPacket->options;
454 
455    \textcolor{comment}{//Parse configuration options}
456    \textcolor{keywordflow}{while}(length > 0)
457    \{
458       \textcolor{comment}{//Check option length}
459       \textcolor{keywordflow}{if}(option->length < \textcolor{keyword}{sizeof}(\hyperlink{ppp_8h_a531e616dc92a1bc09e2b7596eae470c8}{PppOption}))
460          \textcolor{keywordflow}{return} \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689cae5c014519c3ac2540447887ddca1bd28}{ERROR\_INVALID\_LENGTH};
461       \textcolor{keywordflow}{if}(option->length > length)
462          \textcolor{keywordflow}{return} \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689cae5c014519c3ac2540447887ddca1bd28}{ERROR\_INVALID\_LENGTH};
463 
464       \textcolor{comment}{//IP-Address option?}
465       \textcolor{keywordflow}{if}(option->type == \hyperlink{ipcp_8h_a82079ac6099e93506f2b406bc75bbd45a124bafb002549c2de4cb293f5e158fd9}{IPCP\_OPTION\_IP\_ADDRESS})
466       \{
467          \textcolor{comment}{//The option is not recognized by the peer}
468          context->localConfig.ipAddrRejected = \hyperlink{os__port_8h_aa8cecfc5c5c054d2875c03e77b7be15d}{TRUE};
469       \}
470       \textcolor{comment}{//Primary-DNS-Server-Address option?}
471       \textcolor{keywordflow}{else} \textcolor{keywordflow}{if}(option->type == \hyperlink{ipcp_8h_a82079ac6099e93506f2b406bc75bbd45ad0bf3add16c3e3c90346b3ffdc692a55}{IPCP\_OPTION\_PRIMARY\_DNS})
472       \{
473          \textcolor{comment}{//The option is not recognized by the peer}
474          context->localConfig.primaryDnsRejected = \hyperlink{os__port_8h_aa8cecfc5c5c054d2875c03e77b7be15d}{TRUE};
475       \}
476       \textcolor{comment}{//Secondary-DNS-Server-Address option?}
477       \textcolor{keywordflow}{else} \textcolor{keywordflow}{if}(option->type == \hyperlink{ipcp_8h_a82079ac6099e93506f2b406bc75bbd45abd3891dd42a37b50a69db93d70e55980}{IPCP\_OPTION\_SECONDARY\_DNS})
478       \{
479          \textcolor{comment}{//The option is not recognized by the peer}
480          context->localConfig.secondaryDnsRejected = \hyperlink{os__port_8h_aa8cecfc5c5c054d2875c03e77b7be15d}{TRUE};
481       \}
482 
483       \textcolor{comment}{//Remaining bytes to process}
484       length -= option->length;
485       \textcolor{comment}{//Jump to the next option}
486       option = (\hyperlink{ppp_8h_a531e616dc92a1bc09e2b7596eae470c8}{PppOption} *) ((\hyperlink{stdint_8h_aba7bc1797add20fe3efdf37ced1182c5}{uint8\_t} *) option + option->length);
487    \}
488 
489    \textcolor{comment}{//A valid Configure-Nak or Configure-Reject packet has been received from the peer}
490    \hyperlink{ppp__fsm_8c_afb660738da04688fc48d49afbca2b594}{pppRcvConfigureNakEvent}(context, &context->ipcpFsm, &
      \hyperlink{ipcp_8c_a3cf17c09508d1fca81c33857da92e17d}{ipcpCallbacks});
491 
492    \textcolor{comment}{//Successful processing}
493    \textcolor{keywordflow}{return} \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689cabf350750d0d4fabd8954c0f1e9bbae94}{NO\_ERROR};
494 \}
\end{DoxyCode}
\mbox{\Hypertarget{ipcp_8c_a348c0f05fe1bb902a75b523a440516fc}\label{ipcp_8c_a348c0f05fe1bb902a75b523a440516fc}} 
\index{ipcp.\+c@{ipcp.\+c}!ipcp\+Process\+Configure\+Req@{ipcp\+Process\+Configure\+Req}}
\index{ipcp\+Process\+Configure\+Req@{ipcp\+Process\+Configure\+Req}!ipcp.\+c@{ipcp.\+c}}
\subsubsection{\texorpdfstring{ipcp\+Process\+Configure\+Req()}{ipcpProcessConfigureReq()}}
{\footnotesize\ttfamily \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689c}{error\+\_\+t} ipcp\+Process\+Configure\+Req (\begin{DoxyParamCaption}\item[{\hyperlink{ppp_8h_a896c00dd8ba8bad09b3f442b7aa5ad9c}{Ppp\+Context} $\ast$}]{context,  }\item[{const \hyperlink{ppp_8h_a5f9516e80961edda7e2c0b9b964bdd66}{Ppp\+Configure\+Packet} $\ast$}]{configure\+Req\+Packet }\end{DoxyParamCaption})}



Process Configure-\/\+Request packet. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em context} & P\+PP context \\
\hline
\mbox{\tt in}  & {\em configure\+Req\+Packet} & Packet received from the peer \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Error code 
\end{DoxyReturn}


Definition at line 225 of file ipcp.\+c.


\begin{DoxyCode}
227 \{
228    \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689c}{error\_t} error;
229    \textcolor{keywordtype}{size\_t} \hyperlink{dtls__misc_8h_ab43ca82dd7fa2a0e56f941032ef324c4}{length};
230    \hyperlink{compiler__port_8h_a812d16e5494522586b3784e55d479912}{bool\_t} notRecognizable;
231    \hyperlink{compiler__port_8h_a812d16e5494522586b3784e55d479912}{bool\_t} notAcceptable;
232    \hyperlink{ppp_8h_a531e616dc92a1bc09e2b7596eae470c8}{PppOption} *option;
233 
234    \textcolor{comment}{//Debug message}
235    \hyperlink{debug_8h_a7339bfd784193a5c79efcef2eeb2d6df}{TRACE\_INFO}(\textcolor{stringliteral}{"\(\backslash\)r\(\backslash\)nIPCP Receive-Configure-Request event\(\backslash\)r\(\backslash\)n"});
236 
237    \textcolor{comment}{//Initialize variables}
238    error = \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689cabf350750d0d4fabd8954c0f1e9bbae94}{NO\_ERROR};
239    notRecognizable = \hyperlink{os__port_8h_aa93f0eb578d23995850d61f7d61c55c1}{FALSE};
240    notAcceptable = \hyperlink{os__port_8h_aa93f0eb578d23995850d61f7d61c55c1}{FALSE};
241 
242    \textcolor{comment}{//Retrieve the length of the option list}
243    length = \hyperlink{cpu__endian_8h_a9312c6eb72e64f748ae0d0e0dc3ec9b9}{ntohs}(configureReqPacket->length) - \textcolor{keyword}{sizeof}(\hyperlink{ppp_8h_a5f9516e80961edda7e2c0b9b964bdd66}{PppConfigurePacket});
244    \textcolor{comment}{//Point to the first option}
245    option = (\hyperlink{ppp_8h_a531e616dc92a1bc09e2b7596eae470c8}{PppOption} *) configureReqPacket->options;
246 
247    \textcolor{comment}{//Parse configuration options}
248    \textcolor{keywordflow}{while}(length > 0)
249    \{
250       \textcolor{comment}{//Parse current option}
251       error = \hyperlink{ipcp_8c_ae93349562b71505f9006df727ecc4773}{ipcpParseOption}(context, option, length, \hyperlink{group__BSPDefine_ga070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL});
252 
253       \textcolor{comment}{//Any error to report?}
254       \textcolor{keywordflow}{if}(error == \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689ca2daa3c161edaa4477d1ae954c2136008}{ERROR\_INVALID\_TYPE})
255       \{
256          \textcolor{comment}{//Option not recognizable}
257          notRecognizable = \hyperlink{os__port_8h_aa8cecfc5c5c054d2875c03e77b7be15d}{TRUE};
258          \textcolor{comment}{//Catch error}
259          error = \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689cabf350750d0d4fabd8954c0f1e9bbae94}{NO\_ERROR};
260       \}
261       \textcolor{keywordflow}{else} \textcolor{keywordflow}{if}(error == \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689ca979424b1dc1779fe6193ab5161329513}{ERROR\_INVALID\_VALUE})
262       \{
263          \textcolor{comment}{//Option not acceptable for configuration}
264          notAcceptable = \hyperlink{os__port_8h_aa8cecfc5c5c054d2875c03e77b7be15d}{TRUE};
265          \textcolor{comment}{//Catch error}
266          error = \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689cabf350750d0d4fabd8954c0f1e9bbae94}{NO\_ERROR};
267       \}
268       \textcolor{keywordflow}{else} \textcolor{keywordflow}{if}(error)
269       \{
270          \textcolor{comment}{//Malformed Configure-Request packet}
271          \textcolor{keywordflow}{break};
272       \}
273 
274       \textcolor{comment}{//Remaining bytes to process}
275       length -= option->length;
276       \textcolor{comment}{//Jump to the next option}
277       option = (\hyperlink{ppp_8h_a531e616dc92a1bc09e2b7596eae470c8}{PppOption} *) ((\hyperlink{stdint_8h_aba7bc1797add20fe3efdf37ced1182c5}{uint8\_t} *) option + option->length);
278    \}
279 
280    \textcolor{comment}{//Valid Configure-Request packet received from the peer?}
281    \textcolor{keywordflow}{if}(!error)
282    \{
283       \textcolor{comment}{//Check flags}
284       \textcolor{keywordflow}{if}(notRecognizable)
285       \{
286          \textcolor{comment}{//If some configuration options received in the Configure-Request are not}
287          \textcolor{comment}{//recognizable or not acceptable for negotiation, then the implementation}
288          \textcolor{comment}{//must transmit a Configure-Reject}
289          \hyperlink{ppp__fsm_8c_af1c972a74fd368977eee1df1eedac2d4}{pppRcvConfigureReqEvent}(context, &context->ipcpFsm, &
      \hyperlink{ipcp_8c_a3cf17c09508d1fca81c33857da92e17d}{ipcpCallbacks},
290             configureReqPacket, \hyperlink{ppp_8h_a961984e634b12a11d381115a46f14188a5bd41f9dd646b4a1dd42c2f98f22cedd}{PPP\_CODE\_CONFIGURE\_REJ});
291       \}
292       \textcolor{keywordflow}{else} \textcolor{keywordflow}{if}(notAcceptable)
293       \{
294          \textcolor{comment}{//If all configuration options are recognizable, but some values are not}
295          \textcolor{comment}{//acceptable, then the implementation must transmit a Configure-Nak}
296          \hyperlink{ppp__fsm_8c_af1c972a74fd368977eee1df1eedac2d4}{pppRcvConfigureReqEvent}(context, &context->ipcpFsm, &
      \hyperlink{ipcp_8c_a3cf17c09508d1fca81c33857da92e17d}{ipcpCallbacks},
297             configureReqPacket, \hyperlink{ppp_8h_a961984e634b12a11d381115a46f14188aed576599db22b88142cb2cd4e71986be}{PPP\_CODE\_CONFIGURE\_NAK});
298       \}
299       \textcolor{keywordflow}{else}
300       \{
301          \textcolor{comment}{//If every configuration option received in the Configure-Request is}
302          \textcolor{comment}{//recognizable and all values are acceptable, then the implementation}
303          \textcolor{comment}{//must transmit a Configure-Ack}
304          \hyperlink{ppp__fsm_8c_af1c972a74fd368977eee1df1eedac2d4}{pppRcvConfigureReqEvent}(context, &context->ipcpFsm, &
      \hyperlink{ipcp_8c_a3cf17c09508d1fca81c33857da92e17d}{ipcpCallbacks},
305             configureReqPacket, \hyperlink{ppp_8h_a961984e634b12a11d381115a46f14188a915e8fc9f7c9bacb22b54dbccd684591}{PPP\_CODE\_CONFIGURE\_ACK});
306       \}
307    \}
308 
309    \textcolor{comment}{//Return status code}
310    \textcolor{keywordflow}{return} error;
311 \}
\end{DoxyCode}
\mbox{\Hypertarget{ipcp_8c_a7606087c70322577cbfd6d2a0b6bf74b}\label{ipcp_8c_a7606087c70322577cbfd6d2a0b6bf74b}} 
\index{ipcp.\+c@{ipcp.\+c}!ipcp\+Process\+Packet@{ipcp\+Process\+Packet}}
\index{ipcp\+Process\+Packet@{ipcp\+Process\+Packet}!ipcp.\+c@{ipcp.\+c}}
\subsubsection{\texorpdfstring{ipcp\+Process\+Packet()}{ipcpProcessPacket()}}
{\footnotesize\ttfamily void ipcp\+Process\+Packet (\begin{DoxyParamCaption}\item[{\hyperlink{ppp_8h_a896c00dd8ba8bad09b3f442b7aa5ad9c}{Ppp\+Context} $\ast$}]{context,  }\item[{const \hyperlink{ppp_8h_aa975a68f06316e1db0de962a31e30c2e}{Ppp\+Packet} $\ast$}]{packet,  }\item[{size\+\_\+t}]{length }\end{DoxyParamCaption})}



Process an incoming I\+P\+CP packet. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em context} & P\+PP context \\
\hline
\mbox{\tt in}  & {\em packet} & I\+P\+CP packet received from the peer \\
\hline
\mbox{\tt in}  & {\em length} & Length of the packet, in bytes \\
\hline
\end{DoxyParams}


Definition at line 151 of file ipcp.\+c.


\begin{DoxyCode}
152 \{
153    \textcolor{comment}{//Ensure the length of the incoming IPCP packet is valid}
154    \textcolor{keywordflow}{if}(\hyperlink{dtls__misc_8h_ab43ca82dd7fa2a0e56f941032ef324c4}{length} < \textcolor{keyword}{sizeof}(\hyperlink{ppp_8h_aa975a68f06316e1db0de962a31e30c2e}{PppPacket}))
155       \textcolor{keywordflow}{return};
156 
157    \textcolor{comment}{//Check the length field}
158    \textcolor{keywordflow}{if}(\hyperlink{cpu__endian_8h_a9312c6eb72e64f748ae0d0e0dc3ec9b9}{ntohs}(packet->length) > \hyperlink{dtls__misc_8h_ab43ca82dd7fa2a0e56f941032ef324c4}{length})
159       \textcolor{keywordflow}{return};
160    \textcolor{keywordflow}{if}(\hyperlink{cpu__endian_8h_a9312c6eb72e64f748ae0d0e0dc3ec9b9}{ntohs}(packet->length) < \textcolor{keyword}{sizeof}(\hyperlink{ppp_8h_aa975a68f06316e1db0de962a31e30c2e}{PppPacket}))
161       \textcolor{keywordflow}{return};
162 
163    \textcolor{comment}{//Save the length of the IPCP packet}
164    \hyperlink{dtls__misc_8h_ab43ca82dd7fa2a0e56f941032ef324c4}{length} = \hyperlink{cpu__endian_8h_a9312c6eb72e64f748ae0d0e0dc3ec9b9}{ntohs}(packet->length);
165 
166    \textcolor{comment}{//Debug message}
167    \hyperlink{debug_8h_a7339bfd784193a5c79efcef2eeb2d6df}{TRACE\_INFO}(\textcolor{stringliteral}{"IPCP packet received (%"} \hyperlink{compiler__port_8h_a2b7b0557dc6cd786df02dafbb51f5292}{PRIuSIZE} \textcolor{stringliteral}{" bytes)...\(\backslash\)r\(\backslash\)n"}, 
      \hyperlink{dtls__misc_8h_ab43ca82dd7fa2a0e56f941032ef324c4}{length});
168    \textcolor{comment}{//Dump IPCP packet contents for debugging purpose}
169    \hyperlink{ppp__debug_8c_aebeb2591b3799b0ede290881fdd67e78}{pppDumpPacket}(packet, \hyperlink{dtls__misc_8h_ab43ca82dd7fa2a0e56f941032ef324c4}{length}, \hyperlink{ppp_8h_a5d2e3565b503cd5cb131aaff4e0ba9c2a1dbae0b4db670646438954a53f57254a}{PPP\_PROTOCOL\_IPCP});
170 
171    \textcolor{comment}{//Check IPCP code field}
172    \textcolor{keywordflow}{switch}(packet->code)
173    \{
174    \textcolor{comment}{//Configure-Request packet?}
175    \textcolor{keywordflow}{case} \hyperlink{ppp_8h_a961984e634b12a11d381115a46f14188a4e4279fdfcf8d81d216d58801f58d84d}{PPP\_CODE\_CONFIGURE\_REQ}:
176       \textcolor{comment}{//Process Configure-Request packet}
177       \hyperlink{ipcp_8c_a348c0f05fe1bb902a75b523a440516fc}{ipcpProcessConfigureReq}(context, (
      \hyperlink{ppp_8h_a5f9516e80961edda7e2c0b9b964bdd66}{PppConfigurePacket} *) packet);
178       \textcolor{keywordflow}{break};
179    \textcolor{comment}{//Configure-Ack packet?}
180    \textcolor{keywordflow}{case} \hyperlink{ppp_8h_a961984e634b12a11d381115a46f14188a915e8fc9f7c9bacb22b54dbccd684591}{PPP\_CODE\_CONFIGURE\_ACK}:
181       \textcolor{comment}{//Process Configure-Ack packet}
182       \hyperlink{ipcp_8c_af0929a9f83566f8ff0356ee9c5c0e68a}{ipcpProcessConfigureAck}(context, (
      \hyperlink{ppp_8h_a5f9516e80961edda7e2c0b9b964bdd66}{PppConfigurePacket} *) packet);
183       \textcolor{keywordflow}{break};
184    \textcolor{comment}{//Configure-Nak packet?}
185    \textcolor{keywordflow}{case} \hyperlink{ppp_8h_a961984e634b12a11d381115a46f14188aed576599db22b88142cb2cd4e71986be}{PPP\_CODE\_CONFIGURE\_NAK}:
186       \textcolor{comment}{//Process Configure-Nak packet}
187       \hyperlink{ipcp_8c_a0630dbaa222d4ed2fc54135eae3de651}{ipcpProcessConfigureNak}(context, (
      \hyperlink{ppp_8h_a5f9516e80961edda7e2c0b9b964bdd66}{PppConfigurePacket} *) packet);
188       \textcolor{keywordflow}{break};
189    \textcolor{comment}{//Configure-Reject packet?}
190    \textcolor{keywordflow}{case} \hyperlink{ppp_8h_a961984e634b12a11d381115a46f14188a5bd41f9dd646b4a1dd42c2f98f22cedd}{PPP\_CODE\_CONFIGURE\_REJ}:
191       \textcolor{comment}{//Process Configure-Reject packet}
192       \hyperlink{ipcp_8c_a1b054435397e557dba93c7f33a4f7ca2}{ipcpProcessConfigureReject}(context, (
      \hyperlink{ppp_8h_a5f9516e80961edda7e2c0b9b964bdd66}{PppConfigurePacket} *) packet);
193       \textcolor{keywordflow}{break};
194    \textcolor{comment}{//Terminate-Request packet?}
195    \textcolor{keywordflow}{case} \hyperlink{ppp_8h_a961984e634b12a11d381115a46f14188a7471c8252f420930c98ee6a789724a2d}{PPP\_CODE\_TERMINATE\_REQ}:
196       \textcolor{comment}{//Process Terminate-Request packet}
197       \hyperlink{ipcp_8c_aa7bfd7317c5161591f4a410856773503}{ipcpProcessTerminateReq}(context, (
      \hyperlink{ppp_8h_a224d9bad9d75f66f3d0284450ddf6fb4}{PppTerminatePacket} *) packet);
198       \textcolor{keywordflow}{break};
199    \textcolor{comment}{//Terminate-Ack packet?}
200    \textcolor{keywordflow}{case} \hyperlink{ppp_8h_a961984e634b12a11d381115a46f14188a6e7e46a330cfb72374afc3d09f275860}{PPP\_CODE\_TERMINATE\_ACK}:
201       \textcolor{comment}{//Process Terminate-Ack packet}
202       \hyperlink{ipcp_8c_a40dec769a9b6627c9fa831b8b39bb254}{ipcpProcessTerminateAck}(context, (
      \hyperlink{ppp_8h_a224d9bad9d75f66f3d0284450ddf6fb4}{PppTerminatePacket} *) packet);
203       \textcolor{keywordflow}{break};
204    \textcolor{comment}{//Code-Reject packet?}
205    \textcolor{keywordflow}{case} \hyperlink{ppp_8h_a961984e634b12a11d381115a46f14188a7635f2c8a624bbf7fcb8eea300082a7d}{PPP\_CODE\_CODE\_REJ}:
206       \textcolor{comment}{//Process Code-Reject packet}
207       \hyperlink{ipcp_8c_af1047c6f32347c41b31f8c8c45d002e4}{ipcpProcessCodeRej}(context, (\hyperlink{ppp_8h_ad05fe14ee4cca32c7b40f2cdf9c48a8d}{PppCodeRejPacket} *) packet);
208       \textcolor{keywordflow}{break};
209    \textcolor{comment}{//Unknown code field}
210    \textcolor{keywordflow}{default}:
211       \textcolor{comment}{//The packet is un-interpretable}
212       \hyperlink{ipcp_8c_adce8a3b5aadeb8165abf25fd8fe35621}{ipcpProcessUnknownCode}(context, packet);
213       \textcolor{keywordflow}{break};
214    \}
215 \}
\end{DoxyCode}
\mbox{\Hypertarget{ipcp_8c_a40dec769a9b6627c9fa831b8b39bb254}\label{ipcp_8c_a40dec769a9b6627c9fa831b8b39bb254}} 
\index{ipcp.\+c@{ipcp.\+c}!ipcp\+Process\+Terminate\+Ack@{ipcp\+Process\+Terminate\+Ack}}
\index{ipcp\+Process\+Terminate\+Ack@{ipcp\+Process\+Terminate\+Ack}!ipcp.\+c@{ipcp.\+c}}
\subsubsection{\texorpdfstring{ipcp\+Process\+Terminate\+Ack()}{ipcpProcessTerminateAck()}}
{\footnotesize\ttfamily \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689c}{error\+\_\+t} ipcp\+Process\+Terminate\+Ack (\begin{DoxyParamCaption}\item[{\hyperlink{ppp_8h_a896c00dd8ba8bad09b3f442b7aa5ad9c}{Ppp\+Context} $\ast$}]{context,  }\item[{const \hyperlink{ppp_8h_a224d9bad9d75f66f3d0284450ddf6fb4}{Ppp\+Terminate\+Packet} $\ast$}]{terminate\+Ack\+Packet }\end{DoxyParamCaption})}



Process Terminate-\/\+Ack packet. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em context} & P\+PP context \\
\hline
\mbox{\tt in}  & {\em terminate\+Ack\+Packet} & Packet received from the peer \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Error code 
\end{DoxyReturn}


Definition at line 526 of file ipcp.\+c.


\begin{DoxyCode}
528 \{
529    \textcolor{comment}{//Debug message}
530    \hyperlink{debug_8h_a7339bfd784193a5c79efcef2eeb2d6df}{TRACE\_INFO}(\textcolor{stringliteral}{"\(\backslash\)r\(\backslash\)nIPCP Receive-Terminate-Ack event\(\backslash\)r\(\backslash\)n"});
531 
532    \textcolor{comment}{//The Terminate-Ack packet is usually a response to a Terminate-Request}
533    \textcolor{comment}{//packet. This packet may also indicate that the peer is in Closed or}
534    \textcolor{comment}{//Stopped states, and serves to re-synchronize the link configuration}
535    \hyperlink{ppp__fsm_8c_aee79a99cb18b0c11f3d8a728d59b5ca8}{pppRcvTerminateAckEvent}(context, &context->ipcpFsm, &
      \hyperlink{ipcp_8c_a3cf17c09508d1fca81c33857da92e17d}{ipcpCallbacks});
536 
537    \textcolor{comment}{//Successful processing}
538    \textcolor{keywordflow}{return} \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689cabf350750d0d4fabd8954c0f1e9bbae94}{NO\_ERROR};
539 \}
\end{DoxyCode}
\mbox{\Hypertarget{ipcp_8c_aa7bfd7317c5161591f4a410856773503}\label{ipcp_8c_aa7bfd7317c5161591f4a410856773503}} 
\index{ipcp.\+c@{ipcp.\+c}!ipcp\+Process\+Terminate\+Req@{ipcp\+Process\+Terminate\+Req}}
\index{ipcp\+Process\+Terminate\+Req@{ipcp\+Process\+Terminate\+Req}!ipcp.\+c@{ipcp.\+c}}
\subsubsection{\texorpdfstring{ipcp\+Process\+Terminate\+Req()}{ipcpProcessTerminateReq()}}
{\footnotesize\ttfamily \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689c}{error\+\_\+t} ipcp\+Process\+Terminate\+Req (\begin{DoxyParamCaption}\item[{\hyperlink{ppp_8h_a896c00dd8ba8bad09b3f442b7aa5ad9c}{Ppp\+Context} $\ast$}]{context,  }\item[{const \hyperlink{ppp_8h_a224d9bad9d75f66f3d0284450ddf6fb4}{Ppp\+Terminate\+Packet} $\ast$}]{terminate\+Req\+Packet }\end{DoxyParamCaption})}



Process Terminate-\/\+Request packet. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em context} & P\+PP context \\
\hline
\mbox{\tt in}  & {\em terminate\+Req\+Packet} & Packet received from the peer \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Error code 
\end{DoxyReturn}


Definition at line 504 of file ipcp.\+c.


\begin{DoxyCode}
506 \{
507    \textcolor{comment}{//Debug message}
508    \hyperlink{debug_8h_a7339bfd784193a5c79efcef2eeb2d6df}{TRACE\_INFO}(\textcolor{stringliteral}{"\(\backslash\)r\(\backslash\)nIPCP Receive-Terminate-Request event\(\backslash\)r\(\backslash\)n"});
509 
510    \textcolor{comment}{//The Terminate-Request indicates the desire of the peer to close the connection}
511    \hyperlink{ppp__fsm_8c_adf41be150eb29ecad7dcb966134f5d18}{pppRcvTerminateReqEvent}(context, &context->ipcpFsm,
512       &\hyperlink{ipcp_8c_a3cf17c09508d1fca81c33857da92e17d}{ipcpCallbacks}, terminateReqPacket);
513 
514    \textcolor{comment}{//Successful processing}
515    \textcolor{keywordflow}{return} \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689cabf350750d0d4fabd8954c0f1e9bbae94}{NO\_ERROR};
516 \}
\end{DoxyCode}
\mbox{\Hypertarget{ipcp_8c_adce8a3b5aadeb8165abf25fd8fe35621}\label{ipcp_8c_adce8a3b5aadeb8165abf25fd8fe35621}} 
\index{ipcp.\+c@{ipcp.\+c}!ipcp\+Process\+Unknown\+Code@{ipcp\+Process\+Unknown\+Code}}
\index{ipcp\+Process\+Unknown\+Code@{ipcp\+Process\+Unknown\+Code}!ipcp.\+c@{ipcp.\+c}}
\subsubsection{\texorpdfstring{ipcp\+Process\+Unknown\+Code()}{ipcpProcessUnknownCode()}}
{\footnotesize\ttfamily \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689c}{error\+\_\+t} ipcp\+Process\+Unknown\+Code (\begin{DoxyParamCaption}\item[{\hyperlink{ppp_8h_a896c00dd8ba8bad09b3f442b7aa5ad9c}{Ppp\+Context} $\ast$}]{context,  }\item[{const \hyperlink{ppp_8h_aa975a68f06316e1db0de962a31e30c2e}{Ppp\+Packet} $\ast$}]{packet }\end{DoxyParamCaption})}



Process packet with unknown code. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em context} & P\+PP context \\
\hline
\mbox{\tt in}  & {\em packet} & Un-\/interpretable packet received from the peer \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Error code 
\end{DoxyReturn}


Definition at line 596 of file ipcp.\+c.


\begin{DoxyCode}
598 \{
599    \textcolor{comment}{//Debug message}
600    \hyperlink{debug_8h_a7339bfd784193a5c79efcef2eeb2d6df}{TRACE\_INFO}(\textcolor{stringliteral}{"\(\backslash\)r\(\backslash\)nIPCP Receive-Unknown-Code event\(\backslash\)r\(\backslash\)n"});
601 
602    \textcolor{comment}{//This event occurs when an un-interpretable packet is received from}
603    \textcolor{comment}{//the peer. A Code-Reject packet is sent in response}
604    \hyperlink{ppp__fsm_8c_acc5bb9360d00a9033e5aff533cfb9f79}{pppRcvUnknownCodeEvent}(context, &context->ipcpFsm, &
      \hyperlink{ipcp_8c_a3cf17c09508d1fca81c33857da92e17d}{ipcpCallbacks}, packet);
605 
606    \textcolor{comment}{//Successful processing}
607    \textcolor{keywordflow}{return} \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689cabf350750d0d4fabd8954c0f1e9bbae94}{NO\_ERROR};
608 \}
\end{DoxyCode}
\mbox{\Hypertarget{ipcp_8c_acd42a4349d99361f2fc089b75505fd5a}\label{ipcp_8c_acd42a4349d99361f2fc089b75505fd5a}} 
\index{ipcp.\+c@{ipcp.\+c}!ipcp\+Send\+Code\+Rej@{ipcp\+Send\+Code\+Rej}}
\index{ipcp\+Send\+Code\+Rej@{ipcp\+Send\+Code\+Rej}!ipcp.\+c@{ipcp.\+c}}
\subsubsection{\texorpdfstring{ipcp\+Send\+Code\+Rej()}{ipcpSendCodeRej()}}
{\footnotesize\ttfamily \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689c}{error\+\_\+t} ipcp\+Send\+Code\+Rej (\begin{DoxyParamCaption}\item[{\hyperlink{ppp_8h_a896c00dd8ba8bad09b3f442b7aa5ad9c}{Ppp\+Context} $\ast$}]{context,  }\item[{const \hyperlink{ppp_8h_aa975a68f06316e1db0de962a31e30c2e}{Ppp\+Packet} $\ast$}]{packet }\end{DoxyParamCaption})}



Send-\/\+Code-\/\+Reject callback function. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em context} & P\+PP context \\
\hline
\mbox{\tt in}  & {\em packet} & Un-\/interpretable packet received from the peer \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Error code 
\end{DoxyReturn}


Definition at line 961 of file ipcp.\+c.


\begin{DoxyCode}
962 \{
963    \textcolor{comment}{//Debug message}
964    \hyperlink{debug_8h_a7339bfd784193a5c79efcef2eeb2d6df}{TRACE\_INFO}(\textcolor{stringliteral}{"IPCP Send-Code-Reject callback\(\backslash\)r\(\backslash\)n"});
965 
966    \textcolor{comment}{//The Identifier field must be changed for each Code-Reject sent}
967    context->ipcpFsm.identifier++;
968 
969    \textcolor{comment}{//Send Code-Reject packet}
970    \textcolor{keywordflow}{return} \hyperlink{ppp__misc_8c_a3767bc838defa017dacfee2546714ce1}{pppSendCodeRej}(context, packet, context->ipcpFsm.identifier, 
      \hyperlink{ppp_8h_a5d2e3565b503cd5cb131aaff4e0ba9c2a1dbae0b4db670646438954a53f57254a}{PPP\_PROTOCOL\_IPCP});
971 \}
\end{DoxyCode}
\mbox{\Hypertarget{ipcp_8c_a4a738ead752747f644abc73841f7c495}\label{ipcp_8c_a4a738ead752747f644abc73841f7c495}} 
\index{ipcp.\+c@{ipcp.\+c}!ipcp\+Send\+Configure\+Ack@{ipcp\+Send\+Configure\+Ack}}
\index{ipcp\+Send\+Configure\+Ack@{ipcp\+Send\+Configure\+Ack}!ipcp.\+c@{ipcp.\+c}}
\subsubsection{\texorpdfstring{ipcp\+Send\+Configure\+Ack()}{ipcpSendConfigureAck()}}
{\footnotesize\ttfamily \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689c}{error\+\_\+t} ipcp\+Send\+Configure\+Ack (\begin{DoxyParamCaption}\item[{\hyperlink{ppp_8h_a896c00dd8ba8bad09b3f442b7aa5ad9c}{Ppp\+Context} $\ast$}]{context,  }\item[{const \hyperlink{ppp_8h_a5f9516e80961edda7e2c0b9b964bdd66}{Ppp\+Configure\+Packet} $\ast$}]{configure\+Req\+Packet }\end{DoxyParamCaption})}



Send-\/\+Configure-\/\+Ack callback function. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em context} & P\+PP context \\
\hline
\mbox{\tt in}  & {\em configure\+Req\+Packet} & Configure-\/\+Request packet received from the peer \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Error code 
\end{DoxyReturn}


Definition at line 839 of file ipcp.\+c.


\begin{DoxyCode}
841 \{
842    \textcolor{comment}{//Debug message}
843    \hyperlink{debug_8h_a7339bfd784193a5c79efcef2eeb2d6df}{TRACE\_INFO}(\textcolor{stringliteral}{"IPCP Send-Configure-Ack callback\(\backslash\)r\(\backslash\)n"});
844 
845    \textcolor{comment}{//Send Configure-Ack packet}
846    \textcolor{keywordflow}{return} \hyperlink{ppp__misc_8c_a3b9675b85f9c68935fdcba6d7c0b262f}{pppSendConfigureAckNak}(context, configureReqPacket,
847       \hyperlink{ppp_8h_a5d2e3565b503cd5cb131aaff4e0ba9c2a1dbae0b4db670646438954a53f57254a}{PPP\_PROTOCOL\_IPCP}, \hyperlink{ppp_8h_a961984e634b12a11d381115a46f14188a915e8fc9f7c9bacb22b54dbccd684591}{PPP\_CODE\_CONFIGURE\_ACK});
848 \}
\end{DoxyCode}
\mbox{\Hypertarget{ipcp_8c_adc203ac26383592ce00869823b23f4a8}\label{ipcp_8c_adc203ac26383592ce00869823b23f4a8}} 
\index{ipcp.\+c@{ipcp.\+c}!ipcp\+Send\+Configure\+Nak@{ipcp\+Send\+Configure\+Nak}}
\index{ipcp\+Send\+Configure\+Nak@{ipcp\+Send\+Configure\+Nak}!ipcp.\+c@{ipcp.\+c}}
\subsubsection{\texorpdfstring{ipcp\+Send\+Configure\+Nak()}{ipcpSendConfigureNak()}}
{\footnotesize\ttfamily \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689c}{error\+\_\+t} ipcp\+Send\+Configure\+Nak (\begin{DoxyParamCaption}\item[{\hyperlink{ppp_8h_a896c00dd8ba8bad09b3f442b7aa5ad9c}{Ppp\+Context} $\ast$}]{context,  }\item[{const \hyperlink{ppp_8h_a5f9516e80961edda7e2c0b9b964bdd66}{Ppp\+Configure\+Packet} $\ast$}]{configure\+Req\+Packet }\end{DoxyParamCaption})}



Send-\/\+Configure-\/\+Nak callback function. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em context} & P\+PP context \\
\hline
\mbox{\tt in}  & {\em configure\+Req\+Packet} & Configure-\/\+Request packet received from the peer \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Error code 
\end{DoxyReturn}


Definition at line 858 of file ipcp.\+c.


\begin{DoxyCode}
860 \{
861    \textcolor{comment}{//Debug message}
862    \hyperlink{debug_8h_a7339bfd784193a5c79efcef2eeb2d6df}{TRACE\_INFO}(\textcolor{stringliteral}{"IPCP Send-Configure-Nak callback\(\backslash\)r\(\backslash\)n"});
863 
864    \textcolor{comment}{//Send Configure-Nak packet}
865    \textcolor{keywordflow}{return} \hyperlink{ppp__misc_8c_a3b9675b85f9c68935fdcba6d7c0b262f}{pppSendConfigureAckNak}(context, configureReqPacket,
866       \hyperlink{ppp_8h_a5d2e3565b503cd5cb131aaff4e0ba9c2a1dbae0b4db670646438954a53f57254a}{PPP\_PROTOCOL\_IPCP}, \hyperlink{ppp_8h_a961984e634b12a11d381115a46f14188aed576599db22b88142cb2cd4e71986be}{PPP\_CODE\_CONFIGURE\_NAK});
867 \}
\end{DoxyCode}
\mbox{\Hypertarget{ipcp_8c_a0fb133e786eed4006bf5b731fbb5761c}\label{ipcp_8c_a0fb133e786eed4006bf5b731fbb5761c}} 
\index{ipcp.\+c@{ipcp.\+c}!ipcp\+Send\+Configure\+Rej@{ipcp\+Send\+Configure\+Rej}}
\index{ipcp\+Send\+Configure\+Rej@{ipcp\+Send\+Configure\+Rej}!ipcp.\+c@{ipcp.\+c}}
\subsubsection{\texorpdfstring{ipcp\+Send\+Configure\+Rej()}{ipcpSendConfigureRej()}}
{\footnotesize\ttfamily \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689c}{error\+\_\+t} ipcp\+Send\+Configure\+Rej (\begin{DoxyParamCaption}\item[{\hyperlink{ppp_8h_a896c00dd8ba8bad09b3f442b7aa5ad9c}{Ppp\+Context} $\ast$}]{context,  }\item[{const \hyperlink{ppp_8h_a5f9516e80961edda7e2c0b9b964bdd66}{Ppp\+Configure\+Packet} $\ast$}]{configure\+Req\+Packet }\end{DoxyParamCaption})}



Send-\/\+Configure-\/\+Reject callback function. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em context} & P\+PP context \\
\hline
\mbox{\tt in}  & {\em configure\+Req\+Packet} & Configure-\/\+Request packet received from the peer \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Error code 
\end{DoxyReturn}


Definition at line 877 of file ipcp.\+c.


\begin{DoxyCode}
879 \{
880    \textcolor{comment}{//Debug message}
881    \hyperlink{debug_8h_a7339bfd784193a5c79efcef2eeb2d6df}{TRACE\_INFO}(\textcolor{stringliteral}{"IPCP Send-Configure-Reject callback\(\backslash\)r\(\backslash\)n"});
882 
883    \textcolor{comment}{//Send Configure-Reject packet}
884    \textcolor{keywordflow}{return} \hyperlink{ppp__misc_8c_a3b9675b85f9c68935fdcba6d7c0b262f}{pppSendConfigureAckNak}(context, configureReqPacket,
885       \hyperlink{ppp_8h_a5d2e3565b503cd5cb131aaff4e0ba9c2a1dbae0b4db670646438954a53f57254a}{PPP\_PROTOCOL\_IPCP}, \hyperlink{ppp_8h_a961984e634b12a11d381115a46f14188a5bd41f9dd646b4a1dd42c2f98f22cedd}{PPP\_CODE\_CONFIGURE\_REJ});
886 \}
\end{DoxyCode}
\mbox{\Hypertarget{ipcp_8c_a3748a0fecfb92f102fa51ad092a0be65}\label{ipcp_8c_a3748a0fecfb92f102fa51ad092a0be65}} 
\index{ipcp.\+c@{ipcp.\+c}!ipcp\+Send\+Configure\+Req@{ipcp\+Send\+Configure\+Req}}
\index{ipcp\+Send\+Configure\+Req@{ipcp\+Send\+Configure\+Req}!ipcp.\+c@{ipcp.\+c}}
\subsubsection{\texorpdfstring{ipcp\+Send\+Configure\+Req()}{ipcpSendConfigureReq()}}
{\footnotesize\ttfamily \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689c}{error\+\_\+t} ipcp\+Send\+Configure\+Req (\begin{DoxyParamCaption}\item[{\hyperlink{ppp_8h_a896c00dd8ba8bad09b3f442b7aa5ad9c}{Ppp\+Context} $\ast$}]{context }\end{DoxyParamCaption})}



Send-\/\+Configure-\/\+Request callback function. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em context} & P\+PP context \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Error code 
\end{DoxyReturn}


Definition at line 751 of file ipcp.\+c.


\begin{DoxyCode}
752 \{
753    \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689c}{error\_t} error;
754    \textcolor{keywordtype}{size\_t} \hyperlink{dtls__misc_8h_ab43ca82dd7fa2a0e56f941032ef324c4}{length};
755    \textcolor{keywordtype}{size\_t} \hyperlink{pic32mz_2isr__support_8h_a12a5aed8a193ebbf9a641104a310610d}{offset};
756    \hyperlink{structNetBuffer}{NetBuffer} *buffer;
757    \hyperlink{ppp_8h_a5f9516e80961edda7e2c0b9b964bdd66}{PppConfigurePacket} *configureReqPacket;
758 
759    \textcolor{comment}{//Debug message}
760    \hyperlink{debug_8h_a7339bfd784193a5c79efcef2eeb2d6df}{TRACE\_INFO}(\textcolor{stringliteral}{"IPCP Send-Configure-Request callback\(\backslash\)r\(\backslash\)n"});
761 
762    \textcolor{comment}{//Allocate a buffer memory to hold the Configure-Request packet}
763    buffer = \hyperlink{ppp_8c_a9100186e00aec050c4952fd462b035aa}{pppAllocBuffer}(\hyperlink{ppp_8h_ad62bee1d8548d875480b9ca6c8436445}{PPP\_MAX\_CONF\_REQ\_SIZE}, &offset);
764    \textcolor{comment}{//Failed to allocate memory?}
765    \textcolor{keywordflow}{if}(buffer == \hyperlink{group__BSPDefine_ga070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL})
766       \textcolor{keywordflow}{return} \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689cac0a554045048d2fb61387cf735676f69}{ERROR\_OUT\_OF\_MEMORY};
767 
768    \textcolor{comment}{//Point to the Configure-Request packet}
769    configureReqPacket = \hyperlink{net__mem_8c_a20d30c9db547b3b2743368b589cf482b}{netBufferAt}(buffer, offset);
770 
771    \textcolor{comment}{//Format packet header}
772    configureReqPacket->code = \hyperlink{ppp_8h_a961984e634b12a11d381115a46f14188a4e4279fdfcf8d81d216d58801f58d84d}{PPP\_CODE\_CONFIGURE\_REQ};
773    configureReqPacket->identifier = ++context->ipcpFsm.identifier;
774    configureReqPacket->length = \textcolor{keyword}{sizeof}(\hyperlink{ppp_8h_a5f9516e80961edda7e2c0b9b964bdd66}{PppConfigurePacket});
775 
776    \textcolor{comment}{//Make sure the IP-Address option has not been previously rejected}
777    \textcolor{keywordflow}{if}(!context->localConfig.ipAddrRejected)
778    \{
779       \textcolor{comment}{//Add option}
780       \hyperlink{ppp__misc_8c_a52b0a518f20c37d08e66f8c3b437c74f}{pppAddOption}(configureReqPacket, \hyperlink{ipcp_8h_a82079ac6099e93506f2b406bc75bbd45a124bafb002549c2de4cb293f5e158fd9}{IPCP\_OPTION\_IP\_ADDRESS},
781          &context->localConfig.ipAddr, \textcolor{keyword}{sizeof}(\hyperlink{ipv4_8h_a411debb3d770caa0c06d3f73367da37f}{Ipv4Addr}));
782    \}
783 
784    \textcolor{comment}{//Make sure the Primary-DNS-Server-Address option has not been}
785    \textcolor{comment}{//previously rejected}
786    \textcolor{keywordflow}{if}(!context->localConfig.primaryDnsRejected)
787    \{
788       \textcolor{comment}{//Add option}
789       \hyperlink{ppp__misc_8c_a52b0a518f20c37d08e66f8c3b437c74f}{pppAddOption}(configureReqPacket, \hyperlink{ipcp_8h_a82079ac6099e93506f2b406bc75bbd45ad0bf3add16c3e3c90346b3ffdc692a55}{IPCP\_OPTION\_PRIMARY\_DNS},
790          &context->localConfig.primaryDns, \textcolor{keyword}{sizeof}(\hyperlink{ipv4_8h_a411debb3d770caa0c06d3f73367da37f}{Ipv4Addr}));
791    \}
792 
793    \textcolor{comment}{//Make sure the Secondary-DNS-Server-Address option has not been}
794    \textcolor{comment}{//previously rejected}
795    \textcolor{keywordflow}{if}(!context->localConfig.secondaryDnsRejected)
796    \{
797       \textcolor{comment}{//Add option}
798       \hyperlink{ppp__misc_8c_a52b0a518f20c37d08e66f8c3b437c74f}{pppAddOption}(configureReqPacket, \hyperlink{ipcp_8h_a82079ac6099e93506f2b406bc75bbd45abd3891dd42a37b50a69db93d70e55980}{IPCP\_OPTION\_SECONDARY\_DNS},
799          &context->localConfig.secondaryDns, \textcolor{keyword}{sizeof}(\hyperlink{ipv4_8h_a411debb3d770caa0c06d3f73367da37f}{Ipv4Addr}));
800    \}
801 
802    \textcolor{comment}{//Save packet length}
803    length = configureReqPacket->length;
804    \textcolor{comment}{//Convert length field to network byte order}
805    configureReqPacket->length = \hyperlink{cpu__endian_8h_a800cdbf435a85a9b3ad4f0edc518472a}{htons}(length);
806 
807    \textcolor{comment}{//Adjust the length of the multi-part buffer}
808    \hyperlink{net__mem_8c_ac0a46f396754e069dd1ee65cdc559b28}{netBufferSetLength}(buffer, offset + length);
809 
810    \textcolor{comment}{//Debug message}
811    \hyperlink{debug_8h_a7339bfd784193a5c79efcef2eeb2d6df}{TRACE\_INFO}(\textcolor{stringliteral}{"Sending Configure-Request packet (%"} \hyperlink{compiler__port_8h_a2b7b0557dc6cd786df02dafbb51f5292}{PRIuSIZE} \textcolor{stringliteral}{" bytes)...\(\backslash\)r\(\backslash\)n"}, length);
812    \textcolor{comment}{//Dump packet contents for debugging purpose}
813    \hyperlink{ppp__debug_8c_aebeb2591b3799b0ede290881fdd67e78}{pppDumpPacket}((\hyperlink{ppp_8h_aa975a68f06316e1db0de962a31e30c2e}{PppPacket} *) configureReqPacket, length, 
      \hyperlink{ppp_8h_a5d2e3565b503cd5cb131aaff4e0ba9c2a1dbae0b4db670646438954a53f57254a}{PPP\_PROTOCOL\_IPCP});
814 
815    \textcolor{comment}{//Send PPP frame}
816    error = \hyperlink{ppp_8c_aaacd84d6af940a50fa94b67324b080ea}{pppSendFrame}(context->interface, buffer, offset, 
      \hyperlink{ppp_8h_a5d2e3565b503cd5cb131aaff4e0ba9c2a1dbae0b4db670646438954a53f57254a}{PPP\_PROTOCOL\_IPCP});
817 
818    \textcolor{comment}{//The restart counter is decremented each time a Configure-Request is sent}
819    \textcolor{keywordflow}{if}(context->ipcpFsm.restartCounter > 0)
820       context->ipcpFsm.restartCounter--;
821 
822    \textcolor{comment}{//Save the time at which the packet was sent}
823    context->ipcpFsm.timestamp = \hyperlink{os__port__chibios_8c_ab66a11272d40a916fa69dd8e4dc443d4}{osGetSystemTime}();
824 
825    \textcolor{comment}{//Free previously allocated memory block}
826    \hyperlink{net__mem_8c_aa33fc4dd2a71649194052f297c707d08}{netBufferFree}(buffer);
827    \textcolor{comment}{//Return status code}
828    \textcolor{keywordflow}{return} error;
829 \}
\end{DoxyCode}
\mbox{\Hypertarget{ipcp_8c_aaeaaf946900d1f9cc6e5ec3af995ac3f}\label{ipcp_8c_aaeaaf946900d1f9cc6e5ec3af995ac3f}} 
\index{ipcp.\+c@{ipcp.\+c}!ipcp\+Send\+Terminate\+Ack@{ipcp\+Send\+Terminate\+Ack}}
\index{ipcp\+Send\+Terminate\+Ack@{ipcp\+Send\+Terminate\+Ack}!ipcp.\+c@{ipcp.\+c}}
\subsubsection{\texorpdfstring{ipcp\+Send\+Terminate\+Ack()}{ipcpSendTerminateAck()}}
{\footnotesize\ttfamily \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689c}{error\+\_\+t} ipcp\+Send\+Terminate\+Ack (\begin{DoxyParamCaption}\item[{\hyperlink{ppp_8h_a896c00dd8ba8bad09b3f442b7aa5ad9c}{Ppp\+Context} $\ast$}]{context,  }\item[{const \hyperlink{ppp_8h_a224d9bad9d75f66f3d0284450ddf6fb4}{Ppp\+Terminate\+Packet} $\ast$}]{terminate\+Req\+Packet }\end{DoxyParamCaption})}



Send-\/\+Terminate-\/\+Ack callback function. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em context} & P\+PP context \\
\hline
\mbox{\tt in}  & {\em terminate\+Req\+Packet} & Terminate-\/\+Request packet received from the peer \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Error code 
\end{DoxyReturn}


Definition at line 927 of file ipcp.\+c.


\begin{DoxyCode}
929 \{
930    \hyperlink{stdint_8h_aba7bc1797add20fe3efdf37ced1182c5}{uint8\_t} \hyperlink{dhcpv6__common_8h_a679cc9d376a65e69d88ec3496eea7122}{identifier};
931 
932    \textcolor{comment}{//Debug message}
933    \hyperlink{debug_8h_a7339bfd784193a5c79efcef2eeb2d6df}{TRACE\_INFO}(\textcolor{stringliteral}{"IPCP Send-Terminate-Ack callback\(\backslash\)r\(\backslash\)n"});
934 
935    \textcolor{comment}{//Check whether this Terminate-Ack acknowledges the reception of a}
936    \textcolor{comment}{//Terminate-Request packet}
937    \textcolor{keywordflow}{if}(terminateReqPacket != \hyperlink{group__BSPDefine_ga070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL})
938    \{
939       \textcolor{comment}{//The Identifier field of the Terminate-Request is copied into the}
940       \textcolor{comment}{//Identifier field of the Terminate-Ack packet}
941       identifier = terminateReqPacket->identifier;
942    \}
943    \textcolor{keywordflow}{else}
944    \{
945       \textcolor{comment}{//This Terminate-Ack packet serves to synchronize the automatons}
946       identifier = ++context->ipcpFsm.identifier;
947    \}
948 
949    \textcolor{comment}{//Send Terminate-Ack packet}
950    \textcolor{keywordflow}{return} \hyperlink{ppp__misc_8c_a2bd2959558a1ea861bacb3f481a31a5f}{pppSendTerminateAck}(context, identifier, 
      \hyperlink{ppp_8h_a5d2e3565b503cd5cb131aaff4e0ba9c2a1dbae0b4db670646438954a53f57254a}{PPP\_PROTOCOL\_IPCP});
951 \}
\end{DoxyCode}
\mbox{\Hypertarget{ipcp_8c_aaa88ca1506d09a54e2b202ff8ee58515}\label{ipcp_8c_aaa88ca1506d09a54e2b202ff8ee58515}} 
\index{ipcp.\+c@{ipcp.\+c}!ipcp\+Send\+Terminate\+Req@{ipcp\+Send\+Terminate\+Req}}
\index{ipcp\+Send\+Terminate\+Req@{ipcp\+Send\+Terminate\+Req}!ipcp.\+c@{ipcp.\+c}}
\subsubsection{\texorpdfstring{ipcp\+Send\+Terminate\+Req()}{ipcpSendTerminateReq()}}
{\footnotesize\ttfamily \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689c}{error\+\_\+t} ipcp\+Send\+Terminate\+Req (\begin{DoxyParamCaption}\item[{\hyperlink{ppp_8h_a896c00dd8ba8bad09b3f442b7aa5ad9c}{Ppp\+Context} $\ast$}]{context }\end{DoxyParamCaption})}



Send-\/\+Terminate-\/\+Request callback function. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em context} & P\+PP context \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Error code 
\end{DoxyReturn}


Definition at line 895 of file ipcp.\+c.


\begin{DoxyCode}
896 \{
897    \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689c}{error\_t} error;
898 
899    \textcolor{comment}{//Debug message}
900    \hyperlink{debug_8h_a7339bfd784193a5c79efcef2eeb2d6df}{TRACE\_INFO}(\textcolor{stringliteral}{"IPCP Send-Terminate-Request callback\(\backslash\)r\(\backslash\)n"});
901 
902    \textcolor{comment}{//On transmission, the Identifier field must be changed}
903    context->ipcpFsm.identifier++;
904 
905    \textcolor{comment}{//Send Terminate-Request packet}
906    error = \hyperlink{ppp__misc_8c_aad98bd785df68e1f1067eb190bfc638a}{pppSendTerminateReq}(context, context->ipcpFsm.identifier, 
      \hyperlink{ppp_8h_a5d2e3565b503cd5cb131aaff4e0ba9c2a1dbae0b4db670646438954a53f57254a}{PPP\_PROTOCOL\_IPCP});
907 
908    \textcolor{comment}{//The restart counter is decremented each time a Terminate-Request is sent}
909    \textcolor{keywordflow}{if}(context->ipcpFsm.restartCounter > 0)
910       context->ipcpFsm.restartCounter--;
911 
912    \textcolor{comment}{//Save the time at which the packet was sent}
913    context->ipcpFsm.timestamp = \hyperlink{os__port__chibios_8c_ab66a11272d40a916fa69dd8e4dc443d4}{osGetSystemTime}();
914 
915    \textcolor{comment}{//Return status code}
916    \textcolor{keywordflow}{return} error;
917 \}
\end{DoxyCode}
\mbox{\Hypertarget{ipcp_8c_a74f5b4eee645f25e3e2744468bdafaa4}\label{ipcp_8c_a74f5b4eee645f25e3e2744468bdafaa4}} 
\index{ipcp.\+c@{ipcp.\+c}!ipcp\+This\+Layer\+Down@{ipcp\+This\+Layer\+Down}}
\index{ipcp\+This\+Layer\+Down@{ipcp\+This\+Layer\+Down}!ipcp.\+c@{ipcp.\+c}}
\subsubsection{\texorpdfstring{ipcp\+This\+Layer\+Down()}{ipcpThisLayerDown()}}
{\footnotesize\ttfamily void ipcp\+This\+Layer\+Down (\begin{DoxyParamCaption}\item[{\hyperlink{ppp_8h_a896c00dd8ba8bad09b3f442b7aa5ad9c}{Ppp\+Context} $\ast$}]{context }\end{DoxyParamCaption})}



This-\/\+Layer-\/\+Down callback function. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em context} & P\+PP context \\
\hline
\end{DoxyParams}


Definition at line 663 of file ipcp.\+c.


\begin{DoxyCode}
664 \{
665    \hyperlink{net_8h_a2234db8911a1148c9159979d8f5e0d6b}{NetInterface} *interface;
666 
667    \textcolor{comment}{//Debug message}
668    \hyperlink{debug_8h_a7339bfd784193a5c79efcef2eeb2d6df}{TRACE\_INFO}(\textcolor{stringliteral}{"IPCP This-Layer-Down callback\(\backslash\)r\(\backslash\)n"});
669 
670    \textcolor{comment}{//Point to the underlying interface}
671    \textcolor{keyword}{interface }= context->interface;
672 
673    \textcolor{comment}{//Link is up}
674    interface->linkState = \hyperlink{os__port_8h_aa93f0eb578d23995850d61f7d61c55c1}{FALSE};
675 
676    \textcolor{comment}{//Disable interrupts}
677    interface->nicDriver->disableIrq(interface);
678    \textcolor{comment}{//Process link state change event}
679    \hyperlink{nic_8c_ae9054795c5d49a4db97396bf1d16b413}{nicNotifyLinkChange}(interface);
680    \textcolor{comment}{//Re-enable interrupts}
681    interface->nicDriver->enableIrq(interface);
682 \}
\end{DoxyCode}
\mbox{\Hypertarget{ipcp_8c_a3acefccb62a94c0f962bed336664b4e2}\label{ipcp_8c_a3acefccb62a94c0f962bed336664b4e2}} 
\index{ipcp.\+c@{ipcp.\+c}!ipcp\+This\+Layer\+Finished@{ipcp\+This\+Layer\+Finished}}
\index{ipcp\+This\+Layer\+Finished@{ipcp\+This\+Layer\+Finished}!ipcp.\+c@{ipcp.\+c}}
\subsubsection{\texorpdfstring{ipcp\+This\+Layer\+Finished()}{ipcpThisLayerFinished()}}
{\footnotesize\ttfamily void ipcp\+This\+Layer\+Finished (\begin{DoxyParamCaption}\item[{\hyperlink{ppp_8h_a896c00dd8ba8bad09b3f442b7aa5ad9c}{Ppp\+Context} $\ast$}]{context }\end{DoxyParamCaption})}



This-\/\+Layer-\/\+Finished callback function. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em context} & P\+PP context \\
\hline
\end{DoxyParams}


Definition at line 702 of file ipcp.\+c.


\begin{DoxyCode}
703 \{
704    \textcolor{comment}{//Debug message}
705    \hyperlink{debug_8h_a7339bfd784193a5c79efcef2eeb2d6df}{TRACE\_INFO}(\textcolor{stringliteral}{"IPCP This-Layer-Finished callback\(\backslash\)r\(\backslash\)n"});
706 \}
\end{DoxyCode}
\mbox{\Hypertarget{ipcp_8c_a77769218c666a5804f2f97f9bb57e471}\label{ipcp_8c_a77769218c666a5804f2f97f9bb57e471}} 
\index{ipcp.\+c@{ipcp.\+c}!ipcp\+This\+Layer\+Started@{ipcp\+This\+Layer\+Started}}
\index{ipcp\+This\+Layer\+Started@{ipcp\+This\+Layer\+Started}!ipcp.\+c@{ipcp.\+c}}
\subsubsection{\texorpdfstring{ipcp\+This\+Layer\+Started()}{ipcpThisLayerStarted()}}
{\footnotesize\ttfamily void ipcp\+This\+Layer\+Started (\begin{DoxyParamCaption}\item[{\hyperlink{ppp_8h_a896c00dd8ba8bad09b3f442b7aa5ad9c}{Ppp\+Context} $\ast$}]{context }\end{DoxyParamCaption})}



This-\/\+Layer-\/\+Started callback function. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em context} & P\+PP context \\
\hline
\end{DoxyParams}


Definition at line 690 of file ipcp.\+c.


\begin{DoxyCode}
691 \{
692    \textcolor{comment}{//Debug message}
693    \hyperlink{debug_8h_a7339bfd784193a5c79efcef2eeb2d6df}{TRACE\_INFO}(\textcolor{stringliteral}{"IPCP This-Layer-Started callback\(\backslash\)r\(\backslash\)n"});
694 \}
\end{DoxyCode}
\mbox{\Hypertarget{ipcp_8c_a4c161cf5e5469734003de9628abdf192}\label{ipcp_8c_a4c161cf5e5469734003de9628abdf192}} 
\index{ipcp.\+c@{ipcp.\+c}!ipcp\+This\+Layer\+Up@{ipcp\+This\+Layer\+Up}}
\index{ipcp\+This\+Layer\+Up@{ipcp\+This\+Layer\+Up}!ipcp.\+c@{ipcp.\+c}}
\subsubsection{\texorpdfstring{ipcp\+This\+Layer\+Up()}{ipcpThisLayerUp()}}
{\footnotesize\ttfamily void ipcp\+This\+Layer\+Up (\begin{DoxyParamCaption}\item[{\hyperlink{ppp_8h_a896c00dd8ba8bad09b3f442b7aa5ad9c}{Ppp\+Context} $\ast$}]{context }\end{DoxyParamCaption})}



This-\/\+Layer-\/\+Up callback function. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em context} & P\+PP context \\
\hline
\end{DoxyParams}


Definition at line 616 of file ipcp.\+c.


\begin{DoxyCode}
617 \{
618    \hyperlink{net_8h_a2234db8911a1148c9159979d8f5e0d6b}{NetInterface} *interface;
619 
620    \textcolor{comment}{//Debug message}
621    \hyperlink{debug_8h_a7339bfd784193a5c79efcef2eeb2d6df}{TRACE\_INFO}(\textcolor{stringliteral}{"IPCP This-Layer-Up callback\(\backslash\)r\(\backslash\)n"});
622 
623    \textcolor{comment}{//Debug message}
624    \hyperlink{debug_8h_a7339bfd784193a5c79efcef2eeb2d6df}{TRACE\_INFO}(\textcolor{stringliteral}{"  Local IP Addr = %s\(\backslash\)r\(\backslash\)n"}, \hyperlink{ipv4_8c_a6d826409fb54a5cc0ce23c5f88f5c7c1}{ipv4AddrToString}(context->localConfig.
      ipAddr, \hyperlink{group__BSPDefine_ga070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL}));
625    \hyperlink{debug_8h_a7339bfd784193a5c79efcef2eeb2d6df}{TRACE\_INFO}(\textcolor{stringliteral}{"  Peer IP Addr = %s\(\backslash\)r\(\backslash\)n"}, \hyperlink{ipv4_8c_a6d826409fb54a5cc0ce23c5f88f5c7c1}{ipv4AddrToString}(context->peerConfig.
      ipAddr, \hyperlink{group__BSPDefine_ga070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL}));
626    \hyperlink{debug_8h_a7339bfd784193a5c79efcef2eeb2d6df}{TRACE\_INFO}(\textcolor{stringliteral}{"  Primary DNS = %s\(\backslash\)r\(\backslash\)n"}, \hyperlink{ipv4_8c_a6d826409fb54a5cc0ce23c5f88f5c7c1}{ipv4AddrToString}(context->localConfig.
      primaryDns, \hyperlink{group__BSPDefine_ga070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL}));
627    \hyperlink{debug_8h_a7339bfd784193a5c79efcef2eeb2d6df}{TRACE\_INFO}(\textcolor{stringliteral}{"  Secondary DNS = %s\(\backslash\)r\(\backslash\)n"}, \hyperlink{ipv4_8c_a6d826409fb54a5cc0ce23c5f88f5c7c1}{ipv4AddrToString}(context->localConfig.
      secondaryDns, \hyperlink{group__BSPDefine_ga070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL}));
628 
629    \textcolor{comment}{//Point to the underlying interface}
630    \textcolor{keyword}{interface }= context->interface;
631 
632    \textcolor{comment}{//Update IPv4 configuration}
633    interface->ipv4Context.addrList[0].addr = context->localConfig.ipAddr;
634    interface->ipv4Context.addrList[0].state = \hyperlink{ipv4_8h_a7bc59b5d625b1217a91f1db3917e8358a10bd90ad767ea6ae259e9016e6186477}{IPV4\_ADDR\_STATE\_VALID};
635    interface->ipv4Context.addrList[0].defaultGateway = context->peerConfig.ipAddr;
636 
637    \textcolor{comment}{//Update the list of DNS servers}
638    interface->ipv4Context.dnsServerList[0] = context->localConfig.primaryDns;
639 \textcolor{preprocessor}{#if (IPV4\_DNS\_SERVER\_LIST\_SIZE >= 2)}
640    interface->ipv4Context.dnsServerList[1] = context->localConfig.secondaryDns;
641 \textcolor{preprocessor}{#endif}
642 
643    \textcolor{comment}{//All the outgoing traffic will be routed to the other end of the link}
644    interface->ipv4Context.addrList[0].subnetMask = \hyperlink{ipcp_8h_a17f09a75508e38b7c65b2e9a0f027b70}{IPCP\_DEFAULT\_SUBNET\_MASK};
645 
646    \textcolor{comment}{//Link is up}
647    interface->linkState = \hyperlink{os__port_8h_aa8cecfc5c5c054d2875c03e77b7be15d}{TRUE};
648 
649    \textcolor{comment}{//Disable interrupts}
650    interface->nicDriver->disableIrq(interface);
651    \textcolor{comment}{//Process link state change event}
652    \hyperlink{nic_8c_ae9054795c5d49a4db97396bf1d16b413}{nicNotifyLinkChange}(interface);
653    \textcolor{comment}{//Re-enable interrupts}
654    interface->nicDriver->enableIrq(interface);
655 \}
\end{DoxyCode}
\mbox{\Hypertarget{ipcp_8c_a8477eeed2aca078da957d972a0298761}\label{ipcp_8c_a8477eeed2aca078da957d972a0298761}} 
\index{ipcp.\+c@{ipcp.\+c}!ipcp\+Tick@{ipcp\+Tick}}
\index{ipcp\+Tick@{ipcp\+Tick}!ipcp.\+c@{ipcp.\+c}}
\subsubsection{\texorpdfstring{ipcp\+Tick()}{ipcpTick()}}
{\footnotesize\ttfamily void ipcp\+Tick (\begin{DoxyParamCaption}\item[{\hyperlink{ppp_8h_a896c00dd8ba8bad09b3f442b7aa5ad9c}{Ppp\+Context} $\ast$}]{context }\end{DoxyParamCaption})}



I\+P\+CP timer handler. 

This routine must be periodically called by the T\+C\+P/\+IP stack to manage retransmissions


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em context} & P\+PP context \\
\hline
\end{DoxyParams}


Definition at line 121 of file ipcp.\+c.


\begin{DoxyCode}
122 \{
123    \textcolor{comment}{//Check whether the restart timer is running}
124    \textcolor{keywordflow}{if}(context->ipcpFsm.state >= \hyperlink{ppp_8h_a4cd9e6fb37bf811037ccb89b4f314bbca517046b14cdbe60860cf08c716b4b632}{PPP\_STATE\_4\_CLOSING} &&
125       context->ipcpFsm.state <= \hyperlink{ppp_8h_a4cd9e6fb37bf811037ccb89b4f314bbca718e97f8e3cf50a96b56990eab353669}{PPP\_STATE\_8\_ACK\_SENT})
126    \{
127       \textcolor{comment}{//Get current time}
128       \hyperlink{compiler__port_8h_ae3e32a98d431a02106616da3071832dd}{systime\_t} \hyperlink{dhcpv6__common_8h_ae73654f333e4363463ad8c594eca1905}{time} = \hyperlink{os__port__chibios_8c_ab66a11272d40a916fa69dd8e4dc443d4}{osGetSystemTime}();
129 
130       \textcolor{comment}{//Check restart timer}
131       \textcolor{keywordflow}{if}((time - context->ipcpFsm.timestamp) >= \hyperlink{ppp_8h_af7ce638d012dba0785bb0767bf27027a}{PPP\_RESTART\_TIMER})
132       \{
133          \textcolor{comment}{//Debug message}
134          \hyperlink{debug_8h_a7339bfd784193a5c79efcef2eeb2d6df}{TRACE\_INFO}(\textcolor{stringliteral}{"\(\backslash\)r\(\backslash\)nIPCP Timeout event\(\backslash\)r\(\backslash\)n"});
135 
136          \textcolor{comment}{//The restart timer is used to retransmit Configure-Request}
137          \textcolor{comment}{//and Terminate-Request packets}
138          \hyperlink{ppp__fsm_8c_a36be609fbc1074aca17caeb84dc1430c}{pppTimeoutEvent}(context, &context->ipcpFsm, &
      \hyperlink{ipcp_8c_a3cf17c09508d1fca81c33857da92e17d}{ipcpCallbacks});
139       \}
140    \}
141 \}
\end{DoxyCode}
\mbox{\Hypertarget{ipcp_8c_af399b26ae3305739b04eeff27ed6c78c}\label{ipcp_8c_af399b26ae3305739b04eeff27ed6c78c}} 
\index{ipcp.\+c@{ipcp.\+c}!ipcp\+Zero\+Restart\+Count@{ipcp\+Zero\+Restart\+Count}}
\index{ipcp\+Zero\+Restart\+Count@{ipcp\+Zero\+Restart\+Count}!ipcp.\+c@{ipcp.\+c}}
\subsubsection{\texorpdfstring{ipcp\+Zero\+Restart\+Count()}{ipcpZeroRestartCount()}}
{\footnotesize\ttfamily void ipcp\+Zero\+Restart\+Count (\begin{DoxyParamCaption}\item[{\hyperlink{ppp_8h_a896c00dd8ba8bad09b3f442b7aa5ad9c}{Ppp\+Context} $\ast$}]{context }\end{DoxyParamCaption})}



Zero-\/\+Restart-\/\+Count callback function. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em context} & P\+PP context \\
\hline
\end{DoxyParams}


Definition at line 730 of file ipcp.\+c.


\begin{DoxyCode}
731 \{
732    \textcolor{comment}{//Debug message}
733    \hyperlink{debug_8h_a7339bfd784193a5c79efcef2eeb2d6df}{TRACE\_INFO}(\textcolor{stringliteral}{"IPCP Zero-Restart-Count callback\(\backslash\)r\(\backslash\)n"});
734 
735    \textcolor{comment}{//Zero restart counter}
736    context->ipcpFsm.restartCounter = 0;
737 
738    \textcolor{comment}{//The receiver of a Terminate-Request should wait for the peer to}
739    \textcolor{comment}{//disconnect, and must not disconnect until at least one Restart}
740    \textcolor{comment}{//time has passed after sending a Terminate-Ack}
741    context->ipcpFsm.timestamp = \hyperlink{os__port__chibios_8c_ab66a11272d40a916fa69dd8e4dc443d4}{osGetSystemTime}();
742 \}
\end{DoxyCode}


\subsection{Variable Documentation}
\mbox{\Hypertarget{ipcp_8c_a3cf17c09508d1fca81c33857da92e17d}\label{ipcp_8c_a3cf17c09508d1fca81c33857da92e17d}} 
\index{ipcp.\+c@{ipcp.\+c}!ipcp\+Callbacks@{ipcp\+Callbacks}}
\index{ipcp\+Callbacks@{ipcp\+Callbacks}!ipcp.\+c@{ipcp.\+c}}
\subsubsection{\texorpdfstring{ipcp\+Callbacks}{ipcpCallbacks}}
{\footnotesize\ttfamily const \hyperlink{structPppCallbacks}{Ppp\+Callbacks} ipcp\+Callbacks}

{\bfseries Initial value\+:}
\begin{DoxyCode}
=
\{
   \hyperlink{ipcp_8c_a4c161cf5e5469734003de9628abdf192}{ipcpThisLayerUp},
   \hyperlink{ipcp_8c_a74f5b4eee645f25e3e2744468bdafaa4}{ipcpThisLayerDown},
   \hyperlink{ipcp_8c_a77769218c666a5804f2f97f9bb57e471}{ipcpThisLayerStarted},
   \hyperlink{ipcp_8c_a3acefccb62a94c0f962bed336664b4e2}{ipcpThisLayerFinished},
   \hyperlink{ipcp_8c_a30bc2e7c83f3e0fbcc54cada283e8073}{ipcpInitRestartCount},
   \hyperlink{ipcp_8c_af399b26ae3305739b04eeff27ed6c78c}{ipcpZeroRestartCount},
   \hyperlink{ipcp_8c_a3748a0fecfb92f102fa51ad092a0be65}{ipcpSendConfigureReq},
   \hyperlink{ipcp_8c_a4a738ead752747f644abc73841f7c495}{ipcpSendConfigureAck},
   \hyperlink{ipcp_8c_adc203ac26383592ce00869823b23f4a8}{ipcpSendConfigureNak},
   \hyperlink{ipcp_8c_a0fb133e786eed4006bf5b731fbb5761c}{ipcpSendConfigureRej},
   \hyperlink{ipcp_8c_aaa88ca1506d09a54e2b202ff8ee58515}{ipcpSendTerminateReq},
   \hyperlink{ipcp_8c_aaeaaf946900d1f9cc6e5ec3af995ac3f}{ipcpSendTerminateAck},
   \hyperlink{ipcp_8c_acd42a4349d99361f2fc089b75505fd5a}{ipcpSendCodeRej},
   \hyperlink{group__BSPDefine_ga070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL}
\}
\end{DoxyCode}


I\+P\+CP F\+SM callbacks. 



Definition at line 51 of file ipcp.\+c.

