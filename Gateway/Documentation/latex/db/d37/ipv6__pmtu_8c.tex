\hypertarget{ipv6__pmtu_8c}{}\section{cyclone\+\_\+tcp/ipv6/ipv6\+\_\+pmtu.c File Reference}
\label{ipv6__pmtu_8c}\index{cyclone\+\_\+tcp/ipv6/ipv6\+\_\+pmtu.\+c@{cyclone\+\_\+tcp/ipv6/ipv6\+\_\+pmtu.\+c}}


Path M\+TU Discovery for I\+Pv6.  


{\ttfamily \#include \char`\"{}core/net.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}core/ip.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}ipv6/ipv6.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}ipv6/ipv6\+\_\+pmtu.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}ipv6/ndp.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}ipv6/ndp\+\_\+cache.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}debug.\+h\char`\"{}}\newline
\subsection*{Macros}
\begin{DoxyCompactItemize}
\item 
\#define \hyperlink{ipv6__pmtu_8c_afcdf5e66fd927a7f4cc64295acd20407}{T\+R\+A\+C\+E\+\_\+\+L\+E\+V\+EL}~\hyperlink{net__config_8h_abdf5ff5f080602055c37443bec1fe78c}{I\+P\+V6\+\_\+\+T\+R\+A\+C\+E\+\_\+\+L\+E\+V\+EL}
\end{DoxyCompactItemize}
\subsection*{Functions}
\begin{DoxyCompactItemize}
\item 
size\+\_\+t \hyperlink{ipv6__pmtu_8c_a1c25ee920fee3b90c736dfd82c151d47}{ipv6\+Get\+Path\+Mtu} (\hyperlink{net_8h_a2234db8911a1148c9159979d8f5e0d6b}{Net\+Interface} $\ast$interface, const \hyperlink{ipv6_8h_aed0cbc40c61ed5b4fb681ebc55237e89}{Ipv6\+Addr} $\ast$\hyperlink{ndp_8h_ab217f0ee2104c7c5529a4ece1f77e02c}{dest\+Addr})
\begin{DoxyCompactList}\small\item\em Retrieve the P\+M\+TU for the specified path. \end{DoxyCompactList}\item 
void \hyperlink{ipv6__pmtu_8c_a97ab6cebe947b05986a40fa8e20d159c}{ipv6\+Update\+Path\+Mtu} (\hyperlink{net_8h_a2234db8911a1148c9159979d8f5e0d6b}{Net\+Interface} $\ast$interface, const \hyperlink{ipv6_8h_aed0cbc40c61ed5b4fb681ebc55237e89}{Ipv6\+Addr} $\ast$\hyperlink{ndp_8h_ab217f0ee2104c7c5529a4ece1f77e02c}{dest\+Addr}, size\+\_\+t tentative\+Path\+Mtu)
\begin{DoxyCompactList}\small\item\em Update the P\+M\+TU for the specified path. \end{DoxyCompactList}\end{DoxyCompactItemize}


\subsection{Detailed Description}
Path M\+TU Discovery for I\+Pv6. 

\hypertarget{pic32mz__ef__curiosity_8h_License}{}\subsection{License}\label{pic32mz__ef__curiosity_8h_License}
S\+P\+D\+X-\/\+License-\/\+Identifier\+: G\+P\+L-\/2.\+0-\/or-\/later

Copyright (C) 2010-\/2019 Oryx Embedded S\+A\+RL. All rights reserved.

This file is part of Cyclone\+T\+CP Open.

This program is free software; you can redistribute it and/or modify it under the terms of the G\+NU General Public License as published by the Free Software Foundation; either version 2 of the License, or (at your option) any later version.

This program is distributed in the hope that it will be useful, but W\+I\+T\+H\+O\+UT A\+NY W\+A\+R\+R\+A\+N\+TY; without even the implied warranty of M\+E\+R\+C\+H\+A\+N\+T\+A\+B\+I\+L\+I\+TY or F\+I\+T\+N\+E\+SS F\+OR A P\+A\+R\+T\+I\+C\+U\+L\+AR P\+U\+R\+P\+O\+SE. See the G\+NU General Public License for more details.

You should have received a copy of the G\+NU General Public License along with this program; if not, write to the Free Software Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-\/1301, U\+SA.

\begin{DoxyAuthor}{Author}
Oryx Embedded S\+A\+RL (www.\+oryx-\/embedded.\+com) 
\end{DoxyAuthor}
\begin{DoxyVersion}{Version}
1.\+9.\+6 
\end{DoxyVersion}


\subsection{Macro Definition Documentation}
\mbox{\Hypertarget{ipv6__pmtu_8c_afcdf5e66fd927a7f4cc64295acd20407}\label{ipv6__pmtu_8c_afcdf5e66fd927a7f4cc64295acd20407}} 
\index{ipv6\+\_\+pmtu.\+c@{ipv6\+\_\+pmtu.\+c}!T\+R\+A\+C\+E\+\_\+\+L\+E\+V\+EL@{T\+R\+A\+C\+E\+\_\+\+L\+E\+V\+EL}}
\index{T\+R\+A\+C\+E\+\_\+\+L\+E\+V\+EL@{T\+R\+A\+C\+E\+\_\+\+L\+E\+V\+EL}!ipv6\+\_\+pmtu.\+c@{ipv6\+\_\+pmtu.\+c}}
\subsubsection{\texorpdfstring{T\+R\+A\+C\+E\+\_\+\+L\+E\+V\+EL}{TRACE\_LEVEL}}
{\footnotesize\ttfamily \#define T\+R\+A\+C\+E\+\_\+\+L\+E\+V\+EL~\hyperlink{net__config_8h_abdf5ff5f080602055c37443bec1fe78c}{I\+P\+V6\+\_\+\+T\+R\+A\+C\+E\+\_\+\+L\+E\+V\+EL}}



Definition at line 32 of file ipv6\+\_\+pmtu.\+c.



\subsection{Function Documentation}
\mbox{\Hypertarget{ipv6__pmtu_8c_a1c25ee920fee3b90c736dfd82c151d47}\label{ipv6__pmtu_8c_a1c25ee920fee3b90c736dfd82c151d47}} 
\index{ipv6\+\_\+pmtu.\+c@{ipv6\+\_\+pmtu.\+c}!ipv6\+Get\+Path\+Mtu@{ipv6\+Get\+Path\+Mtu}}
\index{ipv6\+Get\+Path\+Mtu@{ipv6\+Get\+Path\+Mtu}!ipv6\+\_\+pmtu.\+c@{ipv6\+\_\+pmtu.\+c}}
\subsubsection{\texorpdfstring{ipv6\+Get\+Path\+Mtu()}{ipv6GetPathMtu()}}
{\footnotesize\ttfamily size\+\_\+t ipv6\+Get\+Path\+Mtu (\begin{DoxyParamCaption}\item[{\hyperlink{net_8h_a2234db8911a1148c9159979d8f5e0d6b}{Net\+Interface} $\ast$}]{interface,  }\item[{const \hyperlink{ipv6_8h_aed0cbc40c61ed5b4fb681ebc55237e89}{Ipv6\+Addr} $\ast$}]{dest\+Addr }\end{DoxyParamCaption})}



Retrieve the P\+M\+TU for the specified path. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em interface} & Underlying network interface \\
\hline
\mbox{\tt in}  & {\em dest\+Addr} & Destination I\+Pv6 address \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
P\+M\+TU value 
\end{DoxyReturn}


Definition at line 54 of file ipv6\+\_\+pmtu.\+c.


\begin{DoxyCode}
55 \{
56    \textcolor{keywordtype}{size\_t} pathMtu;
57 
58 \textcolor{preprocessor}{#if (NDP\_SUPPORT == ENABLED)}
59    \hyperlink{structNdpDestCacheEntry}{NdpDestCacheEntry} *entry;
60 
61    \textcolor{comment}{//Search the Destination Cache for the specified IPv6 address}
62    entry = \hyperlink{ndp__cache_8c_a8fff27f53999959c6e2964700774a25d}{ndpFindDestCacheEntry}(interface, \hyperlink{ethernet_8h_a00f00b33d6300737183211cc435fa7e2}{destAddr});
63 
64    \textcolor{comment}{//Check whether a matching entry has been found in the Destination Cache}
65    \textcolor{keywordflow}{if}(entry != \hyperlink{group__BSPDefine_ga070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL})
66    \{
67       \textcolor{comment}{//Use the existing PMTU estimate}
68       pathMtu = entry->\hyperlink{structNdpDestCacheEntry_aa9f02a7bf3d1a681861c8affd54e0354}{pathMtu};
69    \}
70    \textcolor{keywordflow}{else}
71    \{
72       \textcolor{comment}{//If no entry exists in the Destination Cache, the PMTU value for}
73       \textcolor{comment}{//the path is assumed to be the MTU of the first-hop link}
74       pathMtu = interface->ipv6Context.linkMtu;
75    \}
76 \textcolor{preprocessor}{#else}
77    \textcolor{comment}{//The PMTU value for the path is assumed to be the MTU of the first-hop link}
78    pathMtu = interface->ipv6Context.linkMtu;
79 \textcolor{preprocessor}{#endif}
80 
81    \textcolor{comment}{//Return the PMTU value}
82    \textcolor{keywordflow}{return} pathMtu;
83 \}
\end{DoxyCode}
\mbox{\Hypertarget{ipv6__pmtu_8c_a97ab6cebe947b05986a40fa8e20d159c}\label{ipv6__pmtu_8c_a97ab6cebe947b05986a40fa8e20d159c}} 
\index{ipv6\+\_\+pmtu.\+c@{ipv6\+\_\+pmtu.\+c}!ipv6\+Update\+Path\+Mtu@{ipv6\+Update\+Path\+Mtu}}
\index{ipv6\+Update\+Path\+Mtu@{ipv6\+Update\+Path\+Mtu}!ipv6\+\_\+pmtu.\+c@{ipv6\+\_\+pmtu.\+c}}
\subsubsection{\texorpdfstring{ipv6\+Update\+Path\+Mtu()}{ipv6UpdatePathMtu()}}
{\footnotesize\ttfamily void ipv6\+Update\+Path\+Mtu (\begin{DoxyParamCaption}\item[{\hyperlink{net_8h_a2234db8911a1148c9159979d8f5e0d6b}{Net\+Interface} $\ast$}]{interface,  }\item[{const \hyperlink{ipv6_8h_aed0cbc40c61ed5b4fb681ebc55237e89}{Ipv6\+Addr} $\ast$}]{dest\+Addr,  }\item[{size\+\_\+t}]{tentative\+Path\+Mtu }\end{DoxyParamCaption})}



Update the P\+M\+TU for the specified path. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em interface} & Underlying network interface \\
\hline
\mbox{\tt in}  & {\em dest\+Addr} & Destination I\+Pv6 address \\
\hline
\mbox{\tt in}  & {\em tentative\+Path\+Mtu} & Tentative P\+M\+TU value \\
\hline
\end{DoxyParams}


Definition at line 93 of file ipv6\+\_\+pmtu.\+c.


\begin{DoxyCode}
95 \{
96 \textcolor{preprocessor}{#if (NDP\_SUPPORT == ENABLED)}
97    \hyperlink{structNdpDestCacheEntry}{NdpDestCacheEntry} *entry;
98 
99    \textcolor{comment}{//The destination address from the original packet is used to determine}
100    \textcolor{comment}{//which path the message applies to}
101    entry = \hyperlink{ndp__cache_8c_a8fff27f53999959c6e2964700774a25d}{ndpFindDestCacheEntry}(interface, \hyperlink{ethernet_8h_a00f00b33d6300737183211cc435fa7e2}{destAddr});
102 
103    \textcolor{comment}{//Check whether a matching entry has been found in the Destination Cache}
104    \textcolor{keywordflow}{if}(entry != \hyperlink{group__BSPDefine_ga070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL})
105    \{
106       \textcolor{comment}{//Compare the tentative PMTU to the existing PMTU}
107       \textcolor{keywordflow}{if}(tentativePathMtu < entry->pathMtu)
108       \{
109          \textcolor{comment}{//If the tentative PMTU is less than the existing PMTU estimate,}
110          \textcolor{comment}{//the tentative PMTU replaces the existing PMTU}
111          entry->\hyperlink{structNdpDestCacheEntry_aa9f02a7bf3d1a681861c8affd54e0354}{pathMtu} = tentativePathMtu;
112       \}
113    \}
114 \textcolor{preprocessor}{#endif}
115 \}
\end{DoxyCode}
