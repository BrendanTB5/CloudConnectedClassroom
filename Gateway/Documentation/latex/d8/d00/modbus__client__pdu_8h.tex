\hypertarget{modbus__client__pdu_8h}{}\section{cyclone\+\_\+tcp/modbus/modbus\+\_\+client\+\_\+pdu.h File Reference}
\label{modbus__client__pdu_8h}\index{cyclone\+\_\+tcp/modbus/modbus\+\_\+client\+\_\+pdu.\+h@{cyclone\+\_\+tcp/modbus/modbus\+\_\+client\+\_\+pdu.\+h}}


Modbus P\+DU formatting and parsing.  


{\ttfamily \#include \char`\"{}core/net.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}modbus/modbus\+\_\+client.\+h\char`\"{}}\newline
\subsection*{Functions}
\begin{DoxyCompactItemize}
\item 
\hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689c}{error\+\_\+t} \hyperlink{modbus__client__pdu_8h_a6d65f5a9314320d56db6fe2316d0c915}{modbus\+Client\+Format\+Read\+Coils\+Req} (\hyperlink{modbus__client_8h_afb534cba0b839b960b7afd907b978713}{Modbus\+Client\+Context} $\ast$context, \hyperlink{stdint_8h_a273cf69d639a59973b6019625df33e30}{uint16\+\_\+t} \hyperlink{ndp_8h_a1b452a6c3ab338d73213b321b6750f2b}{address}, \hyperlink{compiler__port_8h_a12a1e9b3ce141648783a82445d02b58d}{uint\+\_\+t} quantity)
\begin{DoxyCompactList}\small\item\em Format Read Coils request. \end{DoxyCompactList}\item 
\hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689c}{error\+\_\+t} \hyperlink{modbus__client__pdu_8h_a0ffcf5d78d2fb09105e8986ef111e78e}{modbus\+Client\+Format\+Read\+Discrete\+Inputs\+Req} (\hyperlink{modbus__client_8h_afb534cba0b839b960b7afd907b978713}{Modbus\+Client\+Context} $\ast$context, \hyperlink{stdint_8h_a273cf69d639a59973b6019625df33e30}{uint16\+\_\+t} \hyperlink{ndp_8h_a1b452a6c3ab338d73213b321b6750f2b}{address}, \hyperlink{compiler__port_8h_a12a1e9b3ce141648783a82445d02b58d}{uint\+\_\+t} quantity)
\begin{DoxyCompactList}\small\item\em Format Read Discrete Inputs request. \end{DoxyCompactList}\item 
\hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689c}{error\+\_\+t} \hyperlink{modbus__client__pdu_8h_af4fb92206762a3a063f16bc6145b2b1b}{modbus\+Client\+Format\+Read\+Holding\+Regs\+Req} (\hyperlink{modbus__client_8h_afb534cba0b839b960b7afd907b978713}{Modbus\+Client\+Context} $\ast$context, \hyperlink{stdint_8h_a273cf69d639a59973b6019625df33e30}{uint16\+\_\+t} \hyperlink{ndp_8h_a1b452a6c3ab338d73213b321b6750f2b}{address}, \hyperlink{compiler__port_8h_a12a1e9b3ce141648783a82445d02b58d}{uint\+\_\+t} quantity)
\begin{DoxyCompactList}\small\item\em Format Read Holding Registers request. \end{DoxyCompactList}\item 
\hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689c}{error\+\_\+t} \hyperlink{modbus__client__pdu_8h_a3da499e457bf1180b69e83d8057988e6}{modbus\+Client\+Format\+Read\+Input\+Regs\+Req} (\hyperlink{modbus__client_8h_afb534cba0b839b960b7afd907b978713}{Modbus\+Client\+Context} $\ast$context, \hyperlink{stdint_8h_a273cf69d639a59973b6019625df33e30}{uint16\+\_\+t} \hyperlink{ndp_8h_a1b452a6c3ab338d73213b321b6750f2b}{address}, \hyperlink{compiler__port_8h_a12a1e9b3ce141648783a82445d02b58d}{uint\+\_\+t} quantity)
\begin{DoxyCompactList}\small\item\em Format Read Input Registers request. \end{DoxyCompactList}\item 
\hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689c}{error\+\_\+t} \hyperlink{modbus__client__pdu_8h_a07aa9e2f6d2254aef859a4621fe51323}{modbus\+Client\+Format\+Write\+Single\+Coil\+Req} (\hyperlink{modbus__client_8h_afb534cba0b839b960b7afd907b978713}{Modbus\+Client\+Context} $\ast$context, \hyperlink{stdint_8h_a273cf69d639a59973b6019625df33e30}{uint16\+\_\+t} \hyperlink{ndp_8h_a1b452a6c3ab338d73213b321b6750f2b}{address}, \hyperlink{compiler__port_8h_a812d16e5494522586b3784e55d479912}{bool\+\_\+t} \hyperlink{chap_8h_adfa040d04d16520129a735fff8fb1628}{value})
\begin{DoxyCompactList}\small\item\em Format Write Single Coil request. \end{DoxyCompactList}\item 
\hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689c}{error\+\_\+t} \hyperlink{modbus__client__pdu_8h_aa3240da227782d3039460b3e591a983e}{modbus\+Client\+Format\+Write\+Single\+Reg\+Req} (\hyperlink{modbus__client_8h_afb534cba0b839b960b7afd907b978713}{Modbus\+Client\+Context} $\ast$context, \hyperlink{stdint_8h_a273cf69d639a59973b6019625df33e30}{uint16\+\_\+t} \hyperlink{ndp_8h_a1b452a6c3ab338d73213b321b6750f2b}{address}, \hyperlink{stdint_8h_a273cf69d639a59973b6019625df33e30}{uint16\+\_\+t} \hyperlink{chap_8h_adfa040d04d16520129a735fff8fb1628}{value})
\begin{DoxyCompactList}\small\item\em Format Write Single Register request. \end{DoxyCompactList}\item 
\hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689c}{error\+\_\+t} \hyperlink{modbus__client__pdu_8h_ad4953be07e3af367f21843c616ba031e}{modbus\+Client\+Format\+Write\+Multiple\+Coils\+Req} (\hyperlink{modbus__client_8h_afb534cba0b839b960b7afd907b978713}{Modbus\+Client\+Context} $\ast$context, \hyperlink{stdint_8h_a273cf69d639a59973b6019625df33e30}{uint16\+\_\+t} \hyperlink{ndp_8h_a1b452a6c3ab338d73213b321b6750f2b}{address}, \hyperlink{compiler__port_8h_a12a1e9b3ce141648783a82445d02b58d}{uint\+\_\+t} quantity, const \hyperlink{stdint_8h_aba7bc1797add20fe3efdf37ced1182c5}{uint8\+\_\+t} $\ast$\hyperlink{chap_8h_adfa040d04d16520129a735fff8fb1628}{value})
\begin{DoxyCompactList}\small\item\em Format Write Multiple Coils request. \end{DoxyCompactList}\item 
\hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689c}{error\+\_\+t} \hyperlink{modbus__client__pdu_8h_a1152d96efdbf05e382200af8fba25493}{modbus\+Client\+Format\+Write\+Multiple\+Regs\+Req} (\hyperlink{modbus__client_8h_afb534cba0b839b960b7afd907b978713}{Modbus\+Client\+Context} $\ast$context, \hyperlink{stdint_8h_a273cf69d639a59973b6019625df33e30}{uint16\+\_\+t} \hyperlink{ndp_8h_a1b452a6c3ab338d73213b321b6750f2b}{address}, \hyperlink{compiler__port_8h_a12a1e9b3ce141648783a82445d02b58d}{uint\+\_\+t} quantity, const \hyperlink{stdint_8h_a273cf69d639a59973b6019625df33e30}{uint16\+\_\+t} $\ast$\hyperlink{chap_8h_adfa040d04d16520129a735fff8fb1628}{value})
\begin{DoxyCompactList}\small\item\em Format Write Multiple Registers request. \end{DoxyCompactList}\item 
\hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689c}{error\+\_\+t} \hyperlink{modbus__client__pdu_8h_a854cb8b1f31643653dcd3a73f1757360}{modbus\+Client\+Format\+Mask\+Write\+Reg\+Req} (\hyperlink{modbus__client_8h_afb534cba0b839b960b7afd907b978713}{Modbus\+Client\+Context} $\ast$context, \hyperlink{stdint_8h_a273cf69d639a59973b6019625df33e30}{uint16\+\_\+t} \hyperlink{ndp_8h_a1b452a6c3ab338d73213b321b6750f2b}{address}, \hyperlink{stdint_8h_a273cf69d639a59973b6019625df33e30}{uint16\+\_\+t} \hyperlink{modbus__common_8h_acb3a59cf566f9458f57ee33d025a6edb}{and\+Mask}, \hyperlink{stdint_8h_a273cf69d639a59973b6019625df33e30}{uint16\+\_\+t} \hyperlink{modbus__common_8h_ab78e691ac48889ca164516c323c53791}{or\+Mask})
\begin{DoxyCompactList}\small\item\em Format Mask Write Register request. \end{DoxyCompactList}\item 
\hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689c}{error\+\_\+t} \hyperlink{modbus__client__pdu_8h_a12c5d6ed170584244bc3b28db7e32230}{modbus\+Client\+Format\+Read\+Write\+Multiple\+Regs\+Req} (\hyperlink{modbus__client_8h_afb534cba0b839b960b7afd907b978713}{Modbus\+Client\+Context} $\ast$context, \hyperlink{stdint_8h_a273cf69d639a59973b6019625df33e30}{uint16\+\_\+t} read\+Address, \hyperlink{stdint_8h_a273cf69d639a59973b6019625df33e30}{uint16\+\_\+t} read\+Quantity, \hyperlink{stdint_8h_a273cf69d639a59973b6019625df33e30}{uint16\+\_\+t} write\+Address, \hyperlink{stdint_8h_a273cf69d639a59973b6019625df33e30}{uint16\+\_\+t} write\+Quantity, const \hyperlink{stdint_8h_a273cf69d639a59973b6019625df33e30}{uint16\+\_\+t} $\ast$write\+Value)
\begin{DoxyCompactList}\small\item\em Format Read/\+Write Multiple Registers request. \end{DoxyCompactList}\item 
\hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689c}{error\+\_\+t} \hyperlink{modbus__client__pdu_8h_a4205e1f9a7963cf1ed454dfecb5f3006}{modbus\+Client\+Parse\+Read\+Coils\+Resp} (\hyperlink{modbus__client_8h_afb534cba0b839b960b7afd907b978713}{Modbus\+Client\+Context} $\ast$context, \hyperlink{compiler__port_8h_a12a1e9b3ce141648783a82445d02b58d}{uint\+\_\+t} quantity, \hyperlink{stdint_8h_aba7bc1797add20fe3efdf37ced1182c5}{uint8\+\_\+t} $\ast$\hyperlink{chap_8h_adfa040d04d16520129a735fff8fb1628}{value})
\begin{DoxyCompactList}\small\item\em Parse Read Coils response. \end{DoxyCompactList}\item 
\hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689c}{error\+\_\+t} \hyperlink{modbus__client__pdu_8h_a1d9d277568750c2acfb511e85d6d564b}{modbus\+Client\+Parse\+Read\+Discrete\+Inputs\+Resp} (\hyperlink{modbus__client_8h_afb534cba0b839b960b7afd907b978713}{Modbus\+Client\+Context} $\ast$context, \hyperlink{compiler__port_8h_a12a1e9b3ce141648783a82445d02b58d}{uint\+\_\+t} quantity, \hyperlink{stdint_8h_aba7bc1797add20fe3efdf37ced1182c5}{uint8\+\_\+t} $\ast$\hyperlink{chap_8h_adfa040d04d16520129a735fff8fb1628}{value})
\begin{DoxyCompactList}\small\item\em Parse Discrete Inputs response. \end{DoxyCompactList}\item 
\hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689c}{error\+\_\+t} \hyperlink{modbus__client__pdu_8h_ad8297274243d28b7ddcdc67fc4332270}{modbus\+Client\+Parse\+Read\+Holding\+Regs\+Resp} (\hyperlink{modbus__client_8h_afb534cba0b839b960b7afd907b978713}{Modbus\+Client\+Context} $\ast$context, \hyperlink{compiler__port_8h_a12a1e9b3ce141648783a82445d02b58d}{uint\+\_\+t} quantity, \hyperlink{stdint_8h_a273cf69d639a59973b6019625df33e30}{uint16\+\_\+t} $\ast$\hyperlink{chap_8h_adfa040d04d16520129a735fff8fb1628}{value})
\begin{DoxyCompactList}\small\item\em Parse Read Holding Registers response. \end{DoxyCompactList}\item 
\hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689c}{error\+\_\+t} \hyperlink{modbus__client__pdu_8h_ae31de7c95a40e22e5ebce273ba9ca578}{modbus\+Client\+Parse\+Read\+Input\+Regs\+Resp} (\hyperlink{modbus__client_8h_afb534cba0b839b960b7afd907b978713}{Modbus\+Client\+Context} $\ast$context, \hyperlink{compiler__port_8h_a12a1e9b3ce141648783a82445d02b58d}{uint\+\_\+t} quantity, \hyperlink{stdint_8h_a273cf69d639a59973b6019625df33e30}{uint16\+\_\+t} $\ast$\hyperlink{chap_8h_adfa040d04d16520129a735fff8fb1628}{value})
\begin{DoxyCompactList}\small\item\em Parse Read Input Registers response. \end{DoxyCompactList}\item 
\hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689c}{error\+\_\+t} \hyperlink{modbus__client__pdu_8h_a03b80491b0fa1ec26e810849c0fb0063}{modbus\+Client\+Parse\+Write\+Single\+Coil\+Resp} (\hyperlink{modbus__client_8h_afb534cba0b839b960b7afd907b978713}{Modbus\+Client\+Context} $\ast$context, \hyperlink{stdint_8h_a273cf69d639a59973b6019625df33e30}{uint16\+\_\+t} \hyperlink{ndp_8h_a1b452a6c3ab338d73213b321b6750f2b}{address}, \hyperlink{compiler__port_8h_a812d16e5494522586b3784e55d479912}{bool\+\_\+t} \hyperlink{chap_8h_adfa040d04d16520129a735fff8fb1628}{value})
\begin{DoxyCompactList}\small\item\em Parse Write Single Coil response. \end{DoxyCompactList}\item 
\hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689c}{error\+\_\+t} \hyperlink{modbus__client__pdu_8h_a8d89e61555a73e81f2cae0cc8b220e90}{modbus\+Client\+Parse\+Write\+Single\+Reg\+Resp} (\hyperlink{modbus__client_8h_afb534cba0b839b960b7afd907b978713}{Modbus\+Client\+Context} $\ast$context, \hyperlink{stdint_8h_a273cf69d639a59973b6019625df33e30}{uint16\+\_\+t} \hyperlink{ndp_8h_a1b452a6c3ab338d73213b321b6750f2b}{address}, \hyperlink{stdint_8h_a273cf69d639a59973b6019625df33e30}{uint16\+\_\+t} \hyperlink{chap_8h_adfa040d04d16520129a735fff8fb1628}{value})
\begin{DoxyCompactList}\small\item\em Parse Write Single Register response. \end{DoxyCompactList}\item 
\hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689c}{error\+\_\+t} \hyperlink{modbus__client__pdu_8h_ad30fd09b9c968aea88b414fdf2b6047a}{modbus\+Client\+Parse\+Write\+Multiple\+Coils\+Resp} (\hyperlink{modbus__client_8h_afb534cba0b839b960b7afd907b978713}{Modbus\+Client\+Context} $\ast$context, \hyperlink{stdint_8h_a273cf69d639a59973b6019625df33e30}{uint16\+\_\+t} \hyperlink{ndp_8h_a1b452a6c3ab338d73213b321b6750f2b}{address}, \hyperlink{compiler__port_8h_a12a1e9b3ce141648783a82445d02b58d}{uint\+\_\+t} quantity)
\begin{DoxyCompactList}\small\item\em Parse Write Multiple Coils response. \end{DoxyCompactList}\item 
\hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689c}{error\+\_\+t} \hyperlink{modbus__client__pdu_8h_a3e6e413549fc0f6e20feea143be68649}{modbus\+Client\+Parse\+Write\+Multiple\+Regs\+Resp} (\hyperlink{modbus__client_8h_afb534cba0b839b960b7afd907b978713}{Modbus\+Client\+Context} $\ast$context, \hyperlink{stdint_8h_a273cf69d639a59973b6019625df33e30}{uint16\+\_\+t} \hyperlink{ndp_8h_a1b452a6c3ab338d73213b321b6750f2b}{address}, \hyperlink{compiler__port_8h_a12a1e9b3ce141648783a82445d02b58d}{uint\+\_\+t} quantity)
\begin{DoxyCompactList}\small\item\em Parse Write Multiple Registers response. \end{DoxyCompactList}\item 
\hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689c}{error\+\_\+t} \hyperlink{modbus__client__pdu_8h_abcac03cf3106f461c66a023e37eee9f4}{modbus\+Client\+Parse\+Mask\+Write\+Reg\+Resp} (\hyperlink{modbus__client_8h_afb534cba0b839b960b7afd907b978713}{Modbus\+Client\+Context} $\ast$context, \hyperlink{stdint_8h_a273cf69d639a59973b6019625df33e30}{uint16\+\_\+t} \hyperlink{ndp_8h_a1b452a6c3ab338d73213b321b6750f2b}{address}, \hyperlink{stdint_8h_a273cf69d639a59973b6019625df33e30}{uint16\+\_\+t} \hyperlink{modbus__common_8h_acb3a59cf566f9458f57ee33d025a6edb}{and\+Mask}, \hyperlink{stdint_8h_a273cf69d639a59973b6019625df33e30}{uint16\+\_\+t} \hyperlink{modbus__common_8h_ab78e691ac48889ca164516c323c53791}{or\+Mask})
\begin{DoxyCompactList}\small\item\em Parse Mask Write Register response. \end{DoxyCompactList}\item 
\hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689c}{error\+\_\+t} \hyperlink{modbus__client__pdu_8h_a5de535b4743f992e6754acacb60431dd}{modbus\+Client\+Parse\+Read\+Write\+Multiple\+Regs\+Resp} (\hyperlink{modbus__client_8h_afb534cba0b839b960b7afd907b978713}{Modbus\+Client\+Context} $\ast$context, \hyperlink{compiler__port_8h_a12a1e9b3ce141648783a82445d02b58d}{uint\+\_\+t} read\+Quantity, \hyperlink{stdint_8h_a273cf69d639a59973b6019625df33e30}{uint16\+\_\+t} $\ast$read\+Value)
\begin{DoxyCompactList}\small\item\em Parse Read/\+Write Multiple Registers response. \end{DoxyCompactList}\item 
\hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689c}{error\+\_\+t} \hyperlink{modbus__client__pdu_8h_a8f5e0fe62aa8de28a7fad79c147b7f95}{modbus\+Client\+Parse\+Exception\+Resp} (\hyperlink{modbus__client_8h_afb534cba0b839b960b7afd907b978713}{Modbus\+Client\+Context} $\ast$context)
\begin{DoxyCompactList}\small\item\em Parse Exception response. \end{DoxyCompactList}\end{DoxyCompactItemize}


\subsection{Detailed Description}
Modbus P\+DU formatting and parsing. 

\hypertarget{pic32mz__ef__curiosity_8h_License}{}\subsection{License}\label{pic32mz__ef__curiosity_8h_License}
S\+P\+D\+X-\/\+License-\/\+Identifier\+: G\+P\+L-\/2.\+0-\/or-\/later

Copyright (C) 2010-\/2019 Oryx Embedded S\+A\+RL. All rights reserved.

This file is part of Cyclone\+T\+CP Open.

This program is free software; you can redistribute it and/or modify it under the terms of the G\+NU General Public License as published by the Free Software Foundation; either version 2 of the License, or (at your option) any later version.

This program is distributed in the hope that it will be useful, but W\+I\+T\+H\+O\+UT A\+NY W\+A\+R\+R\+A\+N\+TY; without even the implied warranty of M\+E\+R\+C\+H\+A\+N\+T\+A\+B\+I\+L\+I\+TY or F\+I\+T\+N\+E\+SS F\+OR A P\+A\+R\+T\+I\+C\+U\+L\+AR P\+U\+R\+P\+O\+SE. See the G\+NU General Public License for more details.

You should have received a copy of the G\+NU General Public License along with this program; if not, write to the Free Software Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-\/1301, U\+SA.

\begin{DoxyAuthor}{Author}
Oryx Embedded S\+A\+RL (www.\+oryx-\/embedded.\+com) 
\end{DoxyAuthor}
\begin{DoxyVersion}{Version}
1.\+9.\+6 
\end{DoxyVersion}


\subsection{Function Documentation}
\mbox{\Hypertarget{modbus__client__pdu_8h_a854cb8b1f31643653dcd3a73f1757360}\label{modbus__client__pdu_8h_a854cb8b1f31643653dcd3a73f1757360}} 
\index{modbus\+\_\+client\+\_\+pdu.\+h@{modbus\+\_\+client\+\_\+pdu.\+h}!modbus\+Client\+Format\+Mask\+Write\+Reg\+Req@{modbus\+Client\+Format\+Mask\+Write\+Reg\+Req}}
\index{modbus\+Client\+Format\+Mask\+Write\+Reg\+Req@{modbus\+Client\+Format\+Mask\+Write\+Reg\+Req}!modbus\+\_\+client\+\_\+pdu.\+h@{modbus\+\_\+client\+\_\+pdu.\+h}}
\subsubsection{\texorpdfstring{modbus\+Client\+Format\+Mask\+Write\+Reg\+Req()}{modbusClientFormatMaskWriteRegReq()}}
{\footnotesize\ttfamily \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689c}{error\+\_\+t} modbus\+Client\+Format\+Mask\+Write\+Reg\+Req (\begin{DoxyParamCaption}\item[{\hyperlink{modbus__client_8h_afb534cba0b839b960b7afd907b978713}{Modbus\+Client\+Context} $\ast$}]{context,  }\item[{\hyperlink{stdint_8h_a273cf69d639a59973b6019625df33e30}{uint16\+\_\+t}}]{address,  }\item[{\hyperlink{stdint_8h_a273cf69d639a59973b6019625df33e30}{uint16\+\_\+t}}]{and\+Mask,  }\item[{\hyperlink{stdint_8h_a273cf69d639a59973b6019625df33e30}{uint16\+\_\+t}}]{or\+Mask }\end{DoxyParamCaption})}



Format Mask Write Register request. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em context} & Pointer to the Modbus/\+T\+CP client context \\
\hline
\mbox{\tt in}  & {\em address} & Address of the holding register \\
\hline
\mbox{\tt in}  & {\em and\+Mask} & A\+ND bitmask \\
\hline
\mbox{\tt in}  & {\em or\+Mask} & OR bitmask \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Error code 
\end{DoxyReturn}


Definition at line 354 of file modbus\+\_\+client\+\_\+pdu.\+c.


\begin{DoxyCode}
356 \{
357    \textcolor{keywordtype}{size\_t} \hyperlink{dtls__misc_8h_ab43ca82dd7fa2a0e56f941032ef324c4}{length};
358    \hyperlink{modbus__common_8h_a7539dcefe33983a8d5c3f4cc09aa8a4e}{ModbusMaskWriteRegReq} *request;
359 
360    \textcolor{comment}{//Point to the Modbus request PDU}
361    request = \hyperlink{modbus__client__misc_8c_acd0d7bb7f621eb8b0d8d37c2d2cc8e42}{modbusClientGetRequestPdu}(context);
362 
363    \textcolor{comment}{//Format Write Single Register request}
364    request->functionCode = \hyperlink{modbus__common_8h_a5dc067f13fceb5a2ac4b5d83c997ae0babbd7f08400866e875a12838c719edc7c}{MODBUS\_FUNCTION\_MASK\_WRITE\_REG};
365    request->referenceAddr = \hyperlink{cpu__endian_8h_a800cdbf435a85a9b3ad4f0edc518472a}{htons}(\hyperlink{dhcpv6__common_8h_aaee906fadd211e863c2e29a3690b25c4}{address});
366    request->andMask = \hyperlink{cpu__endian_8h_a800cdbf435a85a9b3ad4f0edc518472a}{htons}(\hyperlink{modbus__common_8h_acb3a59cf566f9458f57ee33d025a6edb}{andMask});
367    request->orMask = \hyperlink{cpu__endian_8h_a800cdbf435a85a9b3ad4f0edc518472a}{htons}(\hyperlink{modbus__common_8h_ab78e691ac48889ca164516c323c53791}{orMask});
368 
369    \textcolor{comment}{//Compute the length of the request PDU}
370    length = \textcolor{keyword}{sizeof}(\hyperlink{modbus__common_8h_a7539dcefe33983a8d5c3f4cc09aa8a4e}{ModbusMaskWriteRegReq});
371 
372    \textcolor{comment}{//Debug message}
373    \hyperlink{debug_8h_a67a8f9bc74358aa21745a76e23768dae}{TRACE\_DEBUG}(\textcolor{stringliteral}{"\(\backslash\)r\(\backslash\)nModbus Client: Sending Request PDU (%"} \hyperlink{compiler__port_8h_a2b7b0557dc6cd786df02dafbb51f5292}{PRIuSIZE} \textcolor{stringliteral}{" bytes)...\(\backslash\)r\(\backslash\)n"}, 
      length);
374    \textcolor{comment}{//Dump the contents of the PDU for debugging purpose}
375    \hyperlink{modbus__debug_8c_ac0d13d0c10bfd7327330fd26bdbd1925}{modbusDumpRequestPdu}(request, length);
376 
377    \textcolor{comment}{//Format MBAP header}
378    \textcolor{keywordflow}{return} \hyperlink{modbus__client__misc_8c_acb2507388b42c35c5b798efbae04bea7}{modbusClientFormatMbapHeader}(context, length);
379 \}
\end{DoxyCode}
\mbox{\Hypertarget{modbus__client__pdu_8h_a6d65f5a9314320d56db6fe2316d0c915}\label{modbus__client__pdu_8h_a6d65f5a9314320d56db6fe2316d0c915}} 
\index{modbus\+\_\+client\+\_\+pdu.\+h@{modbus\+\_\+client\+\_\+pdu.\+h}!modbus\+Client\+Format\+Read\+Coils\+Req@{modbus\+Client\+Format\+Read\+Coils\+Req}}
\index{modbus\+Client\+Format\+Read\+Coils\+Req@{modbus\+Client\+Format\+Read\+Coils\+Req}!modbus\+\_\+client\+\_\+pdu.\+h@{modbus\+\_\+client\+\_\+pdu.\+h}}
\subsubsection{\texorpdfstring{modbus\+Client\+Format\+Read\+Coils\+Req()}{modbusClientFormatReadCoilsReq()}}
{\footnotesize\ttfamily \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689c}{error\+\_\+t} modbus\+Client\+Format\+Read\+Coils\+Req (\begin{DoxyParamCaption}\item[{\hyperlink{modbus__client_8h_afb534cba0b839b960b7afd907b978713}{Modbus\+Client\+Context} $\ast$}]{context,  }\item[{\hyperlink{stdint_8h_a273cf69d639a59973b6019625df33e30}{uint16\+\_\+t}}]{address,  }\item[{\hyperlink{compiler__port_8h_a12a1e9b3ce141648783a82445d02b58d}{uint\+\_\+t}}]{quantity }\end{DoxyParamCaption})}



Format Read Coils request. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em context} & Pointer to the Modbus/\+T\+CP client context \\
\hline
\mbox{\tt in}  & {\em address} & Address of the first coil \\
\hline
\mbox{\tt in}  & {\em quantity} & Number of coils \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Error code 
\end{DoxyReturn}


Definition at line 53 of file modbus\+\_\+client\+\_\+pdu.\+c.


\begin{DoxyCode}
55 \{
56    \textcolor{keywordtype}{size\_t} \hyperlink{dtls__misc_8h_ab43ca82dd7fa2a0e56f941032ef324c4}{length};
57    \hyperlink{modbus__common_8h_aa4702d51ba783b5878e2d85eb50f12eb}{ModbusReadCoilsReq} *request;
58 
59    \textcolor{comment}{//Point to the Modbus request PDU}
60    request = \hyperlink{modbus__client__misc_8c_acd0d7bb7f621eb8b0d8d37c2d2cc8e42}{modbusClientGetRequestPdu}(context);
61 
62    \textcolor{comment}{//Format Read Coils request}
63    request->functionCode = \hyperlink{modbus__common_8h_a5dc067f13fceb5a2ac4b5d83c997ae0ba07d947f92ea81f0d663f5dcb388ed09d}{MODBUS\_FUNCTION\_READ\_COILS};
64    request->startingAddr = \hyperlink{cpu__endian_8h_a800cdbf435a85a9b3ad4f0edc518472a}{htons}(\hyperlink{dhcpv6__common_8h_aaee906fadd211e863c2e29a3690b25c4}{address});
65    request->quantityOfCoils = \hyperlink{cpu__endian_8h_a800cdbf435a85a9b3ad4f0edc518472a}{htons}(quantity);
66 
67    \textcolor{comment}{//Compute the length of the request PDU}
68    length = \textcolor{keyword}{sizeof}(\hyperlink{modbus__common_8h_aa4702d51ba783b5878e2d85eb50f12eb}{ModbusReadCoilsReq});
69 
70    \textcolor{comment}{//Debug message}
71    \hyperlink{debug_8h_a67a8f9bc74358aa21745a76e23768dae}{TRACE\_DEBUG}(\textcolor{stringliteral}{"\(\backslash\)r\(\backslash\)nModbus Client: Sending Request PDU (%"} \hyperlink{compiler__port_8h_a2b7b0557dc6cd786df02dafbb51f5292}{PRIuSIZE} \textcolor{stringliteral}{" bytes)...\(\backslash\)r\(\backslash\)n"}, 
      length);
72    \textcolor{comment}{//Dump the contents of the PDU for debugging purpose}
73    \hyperlink{modbus__debug_8c_ac0d13d0c10bfd7327330fd26bdbd1925}{modbusDumpRequestPdu}(request, length);
74 
75    \textcolor{comment}{//Format MBAP header}
76    \textcolor{keywordflow}{return} \hyperlink{modbus__client__misc_8c_acb2507388b42c35c5b798efbae04bea7}{modbusClientFormatMbapHeader}(context, length);
77 \}
\end{DoxyCode}
\mbox{\Hypertarget{modbus__client__pdu_8h_a0ffcf5d78d2fb09105e8986ef111e78e}\label{modbus__client__pdu_8h_a0ffcf5d78d2fb09105e8986ef111e78e}} 
\index{modbus\+\_\+client\+\_\+pdu.\+h@{modbus\+\_\+client\+\_\+pdu.\+h}!modbus\+Client\+Format\+Read\+Discrete\+Inputs\+Req@{modbus\+Client\+Format\+Read\+Discrete\+Inputs\+Req}}
\index{modbus\+Client\+Format\+Read\+Discrete\+Inputs\+Req@{modbus\+Client\+Format\+Read\+Discrete\+Inputs\+Req}!modbus\+\_\+client\+\_\+pdu.\+h@{modbus\+\_\+client\+\_\+pdu.\+h}}
\subsubsection{\texorpdfstring{modbus\+Client\+Format\+Read\+Discrete\+Inputs\+Req()}{modbusClientFormatReadDiscreteInputsReq()}}
{\footnotesize\ttfamily \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689c}{error\+\_\+t} modbus\+Client\+Format\+Read\+Discrete\+Inputs\+Req (\begin{DoxyParamCaption}\item[{\hyperlink{modbus__client_8h_afb534cba0b839b960b7afd907b978713}{Modbus\+Client\+Context} $\ast$}]{context,  }\item[{\hyperlink{stdint_8h_a273cf69d639a59973b6019625df33e30}{uint16\+\_\+t}}]{address,  }\item[{\hyperlink{compiler__port_8h_a12a1e9b3ce141648783a82445d02b58d}{uint\+\_\+t}}]{quantity }\end{DoxyParamCaption})}



Format Read Discrete Inputs request. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em context} & Pointer to the Modbus/\+T\+CP client context \\
\hline
\mbox{\tt in}  & {\em address} & Address of the first coil \\
\hline
\mbox{\tt in}  & {\em quantity} & Number of inputs \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Error code 
\end{DoxyReturn}


Definition at line 88 of file modbus\+\_\+client\+\_\+pdu.\+c.


\begin{DoxyCode}
90 \{
91    \textcolor{keywordtype}{size\_t} \hyperlink{dtls__misc_8h_ab43ca82dd7fa2a0e56f941032ef324c4}{length};
92    \hyperlink{modbus__common_8h_a6b3c6bf2487d67b21ae247c81021f9d9}{ModbusReadDiscreteInputsReq} *request;
93 
94    \textcolor{comment}{//Point to the Modbus request PDU}
95    request = \hyperlink{modbus__client__misc_8c_acd0d7bb7f621eb8b0d8d37c2d2cc8e42}{modbusClientGetRequestPdu}(context);
96 
97    \textcolor{comment}{//Format Read Discrete Inputs request}
98    request->functionCode = \hyperlink{modbus__common_8h_a5dc067f13fceb5a2ac4b5d83c997ae0babcff2d7c5fdc39674ce6fa20542d2767}{MODBUS\_FUNCTION\_READ\_DISCRETE\_INPUTS};
99    request->startingAddr = \hyperlink{cpu__endian_8h_a800cdbf435a85a9b3ad4f0edc518472a}{htons}(\hyperlink{dhcpv6__common_8h_aaee906fadd211e863c2e29a3690b25c4}{address});
100    request->quantityOfInputs = \hyperlink{cpu__endian_8h_a800cdbf435a85a9b3ad4f0edc518472a}{htons}(quantity);
101 
102    \textcolor{comment}{//Compute the length of the request PDU}
103    length = \textcolor{keyword}{sizeof}(\hyperlink{modbus__common_8h_a6b3c6bf2487d67b21ae247c81021f9d9}{ModbusReadDiscreteInputsReq});
104 
105    \textcolor{comment}{//Debug message}
106    \hyperlink{debug_8h_a67a8f9bc74358aa21745a76e23768dae}{TRACE\_DEBUG}(\textcolor{stringliteral}{"\(\backslash\)r\(\backslash\)nModbus Client: Sending Request PDU (%"} \hyperlink{compiler__port_8h_a2b7b0557dc6cd786df02dafbb51f5292}{PRIuSIZE} \textcolor{stringliteral}{" bytes)...\(\backslash\)r\(\backslash\)n"}, 
      length);
107    \textcolor{comment}{//Dump the contents of the PDU for debugging purpose}
108    \hyperlink{modbus__debug_8c_ac0d13d0c10bfd7327330fd26bdbd1925}{modbusDumpRequestPdu}(request, length);
109 
110    \textcolor{comment}{//Format MBAP header}
111    \textcolor{keywordflow}{return} \hyperlink{modbus__client__misc_8c_acb2507388b42c35c5b798efbae04bea7}{modbusClientFormatMbapHeader}(context, length);
112 \}
\end{DoxyCode}
\mbox{\Hypertarget{modbus__client__pdu_8h_af4fb92206762a3a063f16bc6145b2b1b}\label{modbus__client__pdu_8h_af4fb92206762a3a063f16bc6145b2b1b}} 
\index{modbus\+\_\+client\+\_\+pdu.\+h@{modbus\+\_\+client\+\_\+pdu.\+h}!modbus\+Client\+Format\+Read\+Holding\+Regs\+Req@{modbus\+Client\+Format\+Read\+Holding\+Regs\+Req}}
\index{modbus\+Client\+Format\+Read\+Holding\+Regs\+Req@{modbus\+Client\+Format\+Read\+Holding\+Regs\+Req}!modbus\+\_\+client\+\_\+pdu.\+h@{modbus\+\_\+client\+\_\+pdu.\+h}}
\subsubsection{\texorpdfstring{modbus\+Client\+Format\+Read\+Holding\+Regs\+Req()}{modbusClientFormatReadHoldingRegsReq()}}
{\footnotesize\ttfamily \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689c}{error\+\_\+t} modbus\+Client\+Format\+Read\+Holding\+Regs\+Req (\begin{DoxyParamCaption}\item[{\hyperlink{modbus__client_8h_afb534cba0b839b960b7afd907b978713}{Modbus\+Client\+Context} $\ast$}]{context,  }\item[{\hyperlink{stdint_8h_a273cf69d639a59973b6019625df33e30}{uint16\+\_\+t}}]{address,  }\item[{\hyperlink{compiler__port_8h_a12a1e9b3ce141648783a82445d02b58d}{uint\+\_\+t}}]{quantity }\end{DoxyParamCaption})}



Format Read Holding Registers request. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em context} & Pointer to the Modbus/\+T\+CP client context \\
\hline
\mbox{\tt in}  & {\em address} & Starting register address \\
\hline
\mbox{\tt in}  & {\em quantity} & Number of registers \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Error code 
\end{DoxyReturn}


Definition at line 123 of file modbus\+\_\+client\+\_\+pdu.\+c.


\begin{DoxyCode}
125 \{
126    \textcolor{keywordtype}{size\_t} \hyperlink{dtls__misc_8h_ab43ca82dd7fa2a0e56f941032ef324c4}{length};
127    \hyperlink{modbus__common_8h_aa297b84e33b977936179091b40b94105}{ModbusReadHoldingRegsReq} *request;
128 
129    \textcolor{comment}{//Point to the Modbus request PDU}
130    request = \hyperlink{modbus__client__misc_8c_acd0d7bb7f621eb8b0d8d37c2d2cc8e42}{modbusClientGetRequestPdu}(context);
131 
132    \textcolor{comment}{//Format Read Holding Registers request}
133    request->functionCode = \hyperlink{modbus__common_8h_a5dc067f13fceb5a2ac4b5d83c997ae0ba52b26a210214dfc2d06eef1eeec41b04}{MODBUS\_FUNCTION\_READ\_HOLDING\_REGS};
134    request->startingAddr = \hyperlink{cpu__endian_8h_a800cdbf435a85a9b3ad4f0edc518472a}{htons}(\hyperlink{dhcpv6__common_8h_aaee906fadd211e863c2e29a3690b25c4}{address});
135    request->quantityOfRegs = \hyperlink{cpu__endian_8h_a800cdbf435a85a9b3ad4f0edc518472a}{htons}(quantity);
136 
137    \textcolor{comment}{//Compute the length of the request PDU}
138    length = \textcolor{keyword}{sizeof}(\hyperlink{modbus__common_8h_aa297b84e33b977936179091b40b94105}{ModbusReadHoldingRegsReq});
139 
140    \textcolor{comment}{//Debug message}
141    \hyperlink{debug_8h_a67a8f9bc74358aa21745a76e23768dae}{TRACE\_DEBUG}(\textcolor{stringliteral}{"\(\backslash\)r\(\backslash\)nModbus Client: Sending Request PDU (%"} \hyperlink{compiler__port_8h_a2b7b0557dc6cd786df02dafbb51f5292}{PRIuSIZE} \textcolor{stringliteral}{" bytes)...\(\backslash\)r\(\backslash\)n"}, 
      length);
142    \textcolor{comment}{//Dump the contents of the PDU for debugging purpose}
143    \hyperlink{modbus__debug_8c_ac0d13d0c10bfd7327330fd26bdbd1925}{modbusDumpRequestPdu}(request, length);
144 
145    \textcolor{comment}{//Format MBAP header}
146    \textcolor{keywordflow}{return} \hyperlink{modbus__client__misc_8c_acb2507388b42c35c5b798efbae04bea7}{modbusClientFormatMbapHeader}(context, length);
147 \}
\end{DoxyCode}
\mbox{\Hypertarget{modbus__client__pdu_8h_a3da499e457bf1180b69e83d8057988e6}\label{modbus__client__pdu_8h_a3da499e457bf1180b69e83d8057988e6}} 
\index{modbus\+\_\+client\+\_\+pdu.\+h@{modbus\+\_\+client\+\_\+pdu.\+h}!modbus\+Client\+Format\+Read\+Input\+Regs\+Req@{modbus\+Client\+Format\+Read\+Input\+Regs\+Req}}
\index{modbus\+Client\+Format\+Read\+Input\+Regs\+Req@{modbus\+Client\+Format\+Read\+Input\+Regs\+Req}!modbus\+\_\+client\+\_\+pdu.\+h@{modbus\+\_\+client\+\_\+pdu.\+h}}
\subsubsection{\texorpdfstring{modbus\+Client\+Format\+Read\+Input\+Regs\+Req()}{modbusClientFormatReadInputRegsReq()}}
{\footnotesize\ttfamily \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689c}{error\+\_\+t} modbus\+Client\+Format\+Read\+Input\+Regs\+Req (\begin{DoxyParamCaption}\item[{\hyperlink{modbus__client_8h_afb534cba0b839b960b7afd907b978713}{Modbus\+Client\+Context} $\ast$}]{context,  }\item[{\hyperlink{stdint_8h_a273cf69d639a59973b6019625df33e30}{uint16\+\_\+t}}]{address,  }\item[{\hyperlink{compiler__port_8h_a12a1e9b3ce141648783a82445d02b58d}{uint\+\_\+t}}]{quantity }\end{DoxyParamCaption})}



Format Read Input Registers request. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em context} & Pointer to the Modbus/\+T\+CP client context \\
\hline
\mbox{\tt in}  & {\em address} & Starting register address \\
\hline
\mbox{\tt in}  & {\em quantity} & Number of registers \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Error code 
\end{DoxyReturn}


Definition at line 158 of file modbus\+\_\+client\+\_\+pdu.\+c.


\begin{DoxyCode}
160 \{
161    \textcolor{keywordtype}{size\_t} \hyperlink{dtls__misc_8h_ab43ca82dd7fa2a0e56f941032ef324c4}{length};
162    \hyperlink{modbus__common_8h_afa5ef848526c22d4c830ba2f983c5d9e}{ModbusReadInputRegsReq} *request;
163 
164    \textcolor{comment}{//Point to the Modbus request PDU}
165    request = \hyperlink{modbus__client__misc_8c_acd0d7bb7f621eb8b0d8d37c2d2cc8e42}{modbusClientGetRequestPdu}(context);
166 
167    \textcolor{comment}{//Format Read Input Registers request}
168    request->functionCode = \hyperlink{modbus__common_8h_a5dc067f13fceb5a2ac4b5d83c997ae0ba95a506d74dc629acae8bd404d92ab232}{MODBUS\_FUNCTION\_READ\_INPUT\_REGS};
169    request->startingAddr = \hyperlink{cpu__endian_8h_a800cdbf435a85a9b3ad4f0edc518472a}{htons}(\hyperlink{dhcpv6__common_8h_aaee906fadd211e863c2e29a3690b25c4}{address});
170    request->quantityOfRegs = \hyperlink{cpu__endian_8h_a800cdbf435a85a9b3ad4f0edc518472a}{htons}(quantity);
171 
172    \textcolor{comment}{//Compute the length of the request PDU}
173    length = \textcolor{keyword}{sizeof}(\hyperlink{modbus__common_8h_afa5ef848526c22d4c830ba2f983c5d9e}{ModbusReadInputRegsReq});
174 
175    \textcolor{comment}{//Debug message}
176    \hyperlink{debug_8h_a67a8f9bc74358aa21745a76e23768dae}{TRACE\_DEBUG}(\textcolor{stringliteral}{"\(\backslash\)r\(\backslash\)nModbus Client: Sending Request PDU (%"} \hyperlink{compiler__port_8h_a2b7b0557dc6cd786df02dafbb51f5292}{PRIuSIZE} \textcolor{stringliteral}{" bytes)...\(\backslash\)r\(\backslash\)n"}, 
      length);
177    \textcolor{comment}{//Dump the contents of the PDU for debugging purpose}
178    \hyperlink{modbus__debug_8c_ac0d13d0c10bfd7327330fd26bdbd1925}{modbusDumpRequestPdu}(request, length);
179 
180    \textcolor{comment}{//Format MBAP header}
181    \textcolor{keywordflow}{return} \hyperlink{modbus__client__misc_8c_acb2507388b42c35c5b798efbae04bea7}{modbusClientFormatMbapHeader}(context, length);
182 \}
\end{DoxyCode}
\mbox{\Hypertarget{modbus__client__pdu_8h_a12c5d6ed170584244bc3b28db7e32230}\label{modbus__client__pdu_8h_a12c5d6ed170584244bc3b28db7e32230}} 
\index{modbus\+\_\+client\+\_\+pdu.\+h@{modbus\+\_\+client\+\_\+pdu.\+h}!modbus\+Client\+Format\+Read\+Write\+Multiple\+Regs\+Req@{modbus\+Client\+Format\+Read\+Write\+Multiple\+Regs\+Req}}
\index{modbus\+Client\+Format\+Read\+Write\+Multiple\+Regs\+Req@{modbus\+Client\+Format\+Read\+Write\+Multiple\+Regs\+Req}!modbus\+\_\+client\+\_\+pdu.\+h@{modbus\+\_\+client\+\_\+pdu.\+h}}
\subsubsection{\texorpdfstring{modbus\+Client\+Format\+Read\+Write\+Multiple\+Regs\+Req()}{modbusClientFormatReadWriteMultipleRegsReq()}}
{\footnotesize\ttfamily \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689c}{error\+\_\+t} modbus\+Client\+Format\+Read\+Write\+Multiple\+Regs\+Req (\begin{DoxyParamCaption}\item[{\hyperlink{modbus__client_8h_afb534cba0b839b960b7afd907b978713}{Modbus\+Client\+Context} $\ast$}]{context,  }\item[{\hyperlink{stdint_8h_a273cf69d639a59973b6019625df33e30}{uint16\+\_\+t}}]{read\+Address,  }\item[{\hyperlink{stdint_8h_a273cf69d639a59973b6019625df33e30}{uint16\+\_\+t}}]{read\+Quantity,  }\item[{\hyperlink{stdint_8h_a273cf69d639a59973b6019625df33e30}{uint16\+\_\+t}}]{write\+Address,  }\item[{\hyperlink{stdint_8h_a273cf69d639a59973b6019625df33e30}{uint16\+\_\+t}}]{write\+Quantity,  }\item[{const \hyperlink{stdint_8h_a273cf69d639a59973b6019625df33e30}{uint16\+\_\+t} $\ast$}]{write\+Value }\end{DoxyParamCaption})}



Format Read/\+Write Multiple Registers request. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em context} & Pointer to the Modbus/\+T\+CP client context \\
\hline
\mbox{\tt in}  & {\em read\+Address} & Address of the first holding registers to be read \\
\hline
\mbox{\tt in}  & {\em read\+Quantity} & Number of holding registers to be read \\
\hline
\mbox{\tt in}  & {\em write\+Address} & Address of the first holding registers to be written \\
\hline
\mbox{\tt in}  & {\em write\+Quantity} & Number of holding registers to be written \\
\hline
\mbox{\tt in}  & {\em write\+Value} & Value of the holding registers (write operation) \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Error code 
\end{DoxyReturn}


Definition at line 393 of file modbus\+\_\+client\+\_\+pdu.\+c.


\begin{DoxyCode}
396 \{
397    \hyperlink{compiler__port_8h_a12a1e9b3ce141648783a82445d02b58d}{uint\_t} i;
398    \textcolor{keywordtype}{size\_t} \hyperlink{dtls__misc_8h_ab43ca82dd7fa2a0e56f941032ef324c4}{length};
399    \hyperlink{modbus__common_8h_a61b1d57beb231e4493215507659b8fa3}{ModbusReadWriteMultipleRegsReq} *request;
400 
401    \textcolor{comment}{//Point to the Modbus request PDU}
402    request = \hyperlink{modbus__client__misc_8c_acd0d7bb7f621eb8b0d8d37c2d2cc8e42}{modbusClientGetRequestPdu}(context);
403 
404    \textcolor{comment}{//Format Read/Write Multiple Registers request}
405    request->functionCode = \hyperlink{modbus__common_8h_a5dc067f13fceb5a2ac4b5d83c997ae0ba3c4313c27737af1dad599ec82de77267}{MODBUS\_FUNCTION\_READ\_WRITE\_MULTIPLE\_REGS}
      ;
406    request->readStartingAddr = \hyperlink{cpu__endian_8h_a800cdbf435a85a9b3ad4f0edc518472a}{htons}(readAddress);
407    request->quantityToRead = \hyperlink{cpu__endian_8h_a800cdbf435a85a9b3ad4f0edc518472a}{htons}(readQuantity);
408    request->writeStartingAddr = \hyperlink{cpu__endian_8h_a800cdbf435a85a9b3ad4f0edc518472a}{htons}(writeAddress);
409    request->quantityToWrite = \hyperlink{cpu__endian_8h_a800cdbf435a85a9b3ad4f0edc518472a}{htons}(writeQuantity);
410    request->writeByteCount = writeQuantity * \textcolor{keyword}{sizeof}(\hyperlink{stdint_8h_a273cf69d639a59973b6019625df33e30}{uint16\_t});
411 
412    \textcolor{comment}{//Copy register values}
413    \textcolor{keywordflow}{for}(i = 0; i < writeQuantity; i++)
414    \{
415       request->writeRegValue[i] = \hyperlink{cpu__endian_8h_a9312c6eb72e64f748ae0d0e0dc3ec9b9}{ntohs}(writeValue[i]);
416    \}
417 
418    \textcolor{comment}{//Compute the length of the request PDU}
419    length = \textcolor{keyword}{sizeof}(\hyperlink{modbus__common_8h_a61b1d57beb231e4493215507659b8fa3}{ModbusReadWriteMultipleRegsReq}) + request->writeByteCount;
420 
421    \textcolor{comment}{//Debug message}
422    \hyperlink{debug_8h_a67a8f9bc74358aa21745a76e23768dae}{TRACE\_DEBUG}(\textcolor{stringliteral}{"\(\backslash\)r\(\backslash\)nModbus Client: Sending Request PDU (%"} \hyperlink{compiler__port_8h_a2b7b0557dc6cd786df02dafbb51f5292}{PRIuSIZE} \textcolor{stringliteral}{" bytes)...\(\backslash\)r\(\backslash\)n"}, 
      length);
423    \textcolor{comment}{//Dump the contents of the PDU for debugging purpose}
424    \hyperlink{modbus__debug_8c_ac0d13d0c10bfd7327330fd26bdbd1925}{modbusDumpRequestPdu}(request, length);
425 
426    \textcolor{comment}{//Format MBAP header}
427    \textcolor{keywordflow}{return} \hyperlink{modbus__client__misc_8c_acb2507388b42c35c5b798efbae04bea7}{modbusClientFormatMbapHeader}(context, length);
428 \}
\end{DoxyCode}
\mbox{\Hypertarget{modbus__client__pdu_8h_ad4953be07e3af367f21843c616ba031e}\label{modbus__client__pdu_8h_ad4953be07e3af367f21843c616ba031e}} 
\index{modbus\+\_\+client\+\_\+pdu.\+h@{modbus\+\_\+client\+\_\+pdu.\+h}!modbus\+Client\+Format\+Write\+Multiple\+Coils\+Req@{modbus\+Client\+Format\+Write\+Multiple\+Coils\+Req}}
\index{modbus\+Client\+Format\+Write\+Multiple\+Coils\+Req@{modbus\+Client\+Format\+Write\+Multiple\+Coils\+Req}!modbus\+\_\+client\+\_\+pdu.\+h@{modbus\+\_\+client\+\_\+pdu.\+h}}
\subsubsection{\texorpdfstring{modbus\+Client\+Format\+Write\+Multiple\+Coils\+Req()}{modbusClientFormatWriteMultipleCoilsReq()}}
{\footnotesize\ttfamily \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689c}{error\+\_\+t} modbus\+Client\+Format\+Write\+Multiple\+Coils\+Req (\begin{DoxyParamCaption}\item[{\hyperlink{modbus__client_8h_afb534cba0b839b960b7afd907b978713}{Modbus\+Client\+Context} $\ast$}]{context,  }\item[{\hyperlink{stdint_8h_a273cf69d639a59973b6019625df33e30}{uint16\+\_\+t}}]{address,  }\item[{\hyperlink{compiler__port_8h_a12a1e9b3ce141648783a82445d02b58d}{uint\+\_\+t}}]{quantity,  }\item[{const \hyperlink{stdint_8h_aba7bc1797add20fe3efdf37ced1182c5}{uint8\+\_\+t} $\ast$}]{value }\end{DoxyParamCaption})}



Format Write Multiple Coils request. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em context} & Pointer to the Modbus/\+T\+CP client context \\
\hline
\mbox{\tt in}  & {\em address} & Address of the first coil to be forced \\
\hline
\mbox{\tt in}  & {\em quantity} & Number of coils \\
\hline
\mbox{\tt in}  & {\em value} & Value of the discrete outputs \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Error code 
\end{DoxyReturn}


Definition at line 270 of file modbus\+\_\+client\+\_\+pdu.\+c.


\begin{DoxyCode}
272 \{
273    \textcolor{keywordtype}{size\_t} \hyperlink{dtls__misc_8h_ab43ca82dd7fa2a0e56f941032ef324c4}{length};
274    \hyperlink{modbus__common_8h_a19f63f9dc17af71e9c7828d1ec2c642a}{ModbusWriteMultipleCoilsReq} *request;
275 
276    \textcolor{comment}{//Point to the Modbus request PDU}
277    request = \hyperlink{modbus__client__misc_8c_acd0d7bb7f621eb8b0d8d37c2d2cc8e42}{modbusClientGetRequestPdu}(context);
278 
279    \textcolor{comment}{//Format Write Multiple Coils request}
280    request->functionCode = \hyperlink{modbus__common_8h_a5dc067f13fceb5a2ac4b5d83c997ae0ba7237b6ded4add7362096cd9be58d3647}{MODBUS\_FUNCTION\_WRITE\_MULTIPLE\_COILS};
281    request->startingAddr = \hyperlink{cpu__endian_8h_a800cdbf435a85a9b3ad4f0edc518472a}{htons}(\hyperlink{dhcpv6__common_8h_aaee906fadd211e863c2e29a3690b25c4}{address});
282    request->quantityOfOutputs = \hyperlink{cpu__endian_8h_a800cdbf435a85a9b3ad4f0edc518472a}{htons}(quantity);
283    request->byteCount = (quantity + 7) / 8;
284 
285    \textcolor{comment}{//Copy coil values}
286    memcpy(request->outputValue, \hyperlink{dtls__misc_8h_a74bce8e92ccabd0c885447114a48b80e}{value}, request->byteCount);
287 
288    \textcolor{comment}{//Compute the length of the request PDU}
289    length = \textcolor{keyword}{sizeof}(\hyperlink{modbus__common_8h_a19f63f9dc17af71e9c7828d1ec2c642a}{ModbusWriteMultipleCoilsReq}) + request->byteCount;
290 
291    \textcolor{comment}{//Debug message}
292    \hyperlink{debug_8h_a67a8f9bc74358aa21745a76e23768dae}{TRACE\_DEBUG}(\textcolor{stringliteral}{"\(\backslash\)r\(\backslash\)nModbus Client: Sending Request PDU (%"} \hyperlink{compiler__port_8h_a2b7b0557dc6cd786df02dafbb51f5292}{PRIuSIZE} \textcolor{stringliteral}{" bytes)...\(\backslash\)r\(\backslash\)n"}, 
      length);
293    \textcolor{comment}{//Dump the contents of the PDU for debugging purpose}
294    \hyperlink{modbus__debug_8c_ac0d13d0c10bfd7327330fd26bdbd1925}{modbusDumpRequestPdu}(request, length);
295 
296    \textcolor{comment}{//Format MBAP header}
297    \textcolor{keywordflow}{return} \hyperlink{modbus__client__misc_8c_acb2507388b42c35c5b798efbae04bea7}{modbusClientFormatMbapHeader}(context, length);
298 \}
\end{DoxyCode}
\mbox{\Hypertarget{modbus__client__pdu_8h_a1152d96efdbf05e382200af8fba25493}\label{modbus__client__pdu_8h_a1152d96efdbf05e382200af8fba25493}} 
\index{modbus\+\_\+client\+\_\+pdu.\+h@{modbus\+\_\+client\+\_\+pdu.\+h}!modbus\+Client\+Format\+Write\+Multiple\+Regs\+Req@{modbus\+Client\+Format\+Write\+Multiple\+Regs\+Req}}
\index{modbus\+Client\+Format\+Write\+Multiple\+Regs\+Req@{modbus\+Client\+Format\+Write\+Multiple\+Regs\+Req}!modbus\+\_\+client\+\_\+pdu.\+h@{modbus\+\_\+client\+\_\+pdu.\+h}}
\subsubsection{\texorpdfstring{modbus\+Client\+Format\+Write\+Multiple\+Regs\+Req()}{modbusClientFormatWriteMultipleRegsReq()}}
{\footnotesize\ttfamily \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689c}{error\+\_\+t} modbus\+Client\+Format\+Write\+Multiple\+Regs\+Req (\begin{DoxyParamCaption}\item[{\hyperlink{modbus__client_8h_afb534cba0b839b960b7afd907b978713}{Modbus\+Client\+Context} $\ast$}]{context,  }\item[{\hyperlink{stdint_8h_a273cf69d639a59973b6019625df33e30}{uint16\+\_\+t}}]{address,  }\item[{\hyperlink{compiler__port_8h_a12a1e9b3ce141648783a82445d02b58d}{uint\+\_\+t}}]{quantity,  }\item[{const \hyperlink{stdint_8h_a273cf69d639a59973b6019625df33e30}{uint16\+\_\+t} $\ast$}]{value }\end{DoxyParamCaption})}



Format Write Multiple Registers request. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em context} & Pointer to the Modbus/\+T\+CP client context \\
\hline
\mbox{\tt in}  & {\em address} & Starting register address \\
\hline
\mbox{\tt in}  & {\em quantity} & Number of registers \\
\hline
\mbox{\tt in}  & {\em value} & Value of the holding registers \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Error code 
\end{DoxyReturn}


Definition at line 310 of file modbus\+\_\+client\+\_\+pdu.\+c.


\begin{DoxyCode}
312 \{
313    \hyperlink{compiler__port_8h_a12a1e9b3ce141648783a82445d02b58d}{uint\_t} i;
314    \textcolor{keywordtype}{size\_t} \hyperlink{dtls__misc_8h_ab43ca82dd7fa2a0e56f941032ef324c4}{length};
315    \hyperlink{modbus__common_8h_a0df4ddefd60ea51eeed19e72451abb6f}{ModbusWriteMultipleRegsReq} *request;
316 
317    \textcolor{comment}{//Point to the Modbus request PDU}
318    request = \hyperlink{modbus__client__misc_8c_acd0d7bb7f621eb8b0d8d37c2d2cc8e42}{modbusClientGetRequestPdu}(context);
319 
320    \textcolor{comment}{//Format Write Multiple Registers request}
321    request->functionCode = \hyperlink{modbus__common_8h_a5dc067f13fceb5a2ac4b5d83c997ae0ba3cd57886a5db63792fdb96a759435a16}{MODBUS\_FUNCTION\_WRITE\_MULTIPLE\_REGS};
322    request->startingAddr = \hyperlink{cpu__endian_8h_a800cdbf435a85a9b3ad4f0edc518472a}{htons}(\hyperlink{dhcpv6__common_8h_aaee906fadd211e863c2e29a3690b25c4}{address});
323    request->quantityOfRegs = \hyperlink{cpu__endian_8h_a800cdbf435a85a9b3ad4f0edc518472a}{htons}(quantity);
324    request->byteCount = quantity * \textcolor{keyword}{sizeof}(\hyperlink{stdint_8h_a273cf69d639a59973b6019625df33e30}{uint16\_t});
325 
326    \textcolor{comment}{//Copy register values}
327    \textcolor{keywordflow}{for}(i = 0; i < quantity; i++)
328    \{
329       request->regValue[i] = \hyperlink{cpu__endian_8h_a9312c6eb72e64f748ae0d0e0dc3ec9b9}{ntohs}(\hyperlink{dtls__misc_8h_a74bce8e92ccabd0c885447114a48b80e}{value}[i]);
330    \}
331 
332    \textcolor{comment}{//Compute the length of the request PDU}
333    length = \textcolor{keyword}{sizeof}(\hyperlink{modbus__common_8h_a0df4ddefd60ea51eeed19e72451abb6f}{ModbusWriteMultipleRegsReq}) + request->byteCount;
334 
335    \textcolor{comment}{//Debug message}
336    \hyperlink{debug_8h_a67a8f9bc74358aa21745a76e23768dae}{TRACE\_DEBUG}(\textcolor{stringliteral}{"\(\backslash\)r\(\backslash\)nModbus Client: Sending Request PDU (%"} \hyperlink{compiler__port_8h_a2b7b0557dc6cd786df02dafbb51f5292}{PRIuSIZE} \textcolor{stringliteral}{" bytes)...\(\backslash\)r\(\backslash\)n"}, 
      length);
337    \textcolor{comment}{//Dump the contents of the PDU for debugging purpose}
338    \hyperlink{modbus__debug_8c_ac0d13d0c10bfd7327330fd26bdbd1925}{modbusDumpRequestPdu}(request, length);
339 
340    \textcolor{comment}{//Format MBAP header}
341    \textcolor{keywordflow}{return} \hyperlink{modbus__client__misc_8c_acb2507388b42c35c5b798efbae04bea7}{modbusClientFormatMbapHeader}(context, length);
342 \}
\end{DoxyCode}
\mbox{\Hypertarget{modbus__client__pdu_8h_a07aa9e2f6d2254aef859a4621fe51323}\label{modbus__client__pdu_8h_a07aa9e2f6d2254aef859a4621fe51323}} 
\index{modbus\+\_\+client\+\_\+pdu.\+h@{modbus\+\_\+client\+\_\+pdu.\+h}!modbus\+Client\+Format\+Write\+Single\+Coil\+Req@{modbus\+Client\+Format\+Write\+Single\+Coil\+Req}}
\index{modbus\+Client\+Format\+Write\+Single\+Coil\+Req@{modbus\+Client\+Format\+Write\+Single\+Coil\+Req}!modbus\+\_\+client\+\_\+pdu.\+h@{modbus\+\_\+client\+\_\+pdu.\+h}}
\subsubsection{\texorpdfstring{modbus\+Client\+Format\+Write\+Single\+Coil\+Req()}{modbusClientFormatWriteSingleCoilReq()}}
{\footnotesize\ttfamily \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689c}{error\+\_\+t} modbus\+Client\+Format\+Write\+Single\+Coil\+Req (\begin{DoxyParamCaption}\item[{\hyperlink{modbus__client_8h_afb534cba0b839b960b7afd907b978713}{Modbus\+Client\+Context} $\ast$}]{context,  }\item[{\hyperlink{stdint_8h_a273cf69d639a59973b6019625df33e30}{uint16\+\_\+t}}]{address,  }\item[{\hyperlink{compiler__port_8h_a812d16e5494522586b3784e55d479912}{bool\+\_\+t}}]{value }\end{DoxyParamCaption})}



Format Write Single Coil request. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em context} & Pointer to the Modbus/\+T\+CP client context \\
\hline
\mbox{\tt in}  & {\em address} & Address of the coil to be forced \\
\hline
\mbox{\tt in}  & {\em value} & Value of the discrete output \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Error code 
\end{DoxyReturn}


Definition at line 193 of file modbus\+\_\+client\+\_\+pdu.\+c.


\begin{DoxyCode}
195 \{
196    \textcolor{keywordtype}{size\_t} \hyperlink{dtls__misc_8h_ab43ca82dd7fa2a0e56f941032ef324c4}{length};
197    \hyperlink{modbus__common_8h_aad1ac61db943fe79841b4fbce3052319}{ModbusWriteSingleCoilReq} *request;
198 
199    \textcolor{comment}{//Point to the Modbus request PDU}
200    request = \hyperlink{modbus__client__misc_8c_acd0d7bb7f621eb8b0d8d37c2d2cc8e42}{modbusClientGetRequestPdu}(context);
201 
202    \textcolor{comment}{//Format Write Single Coil request}
203    request->functionCode = \hyperlink{modbus__common_8h_a5dc067f13fceb5a2ac4b5d83c997ae0ba0736abb54b479e55e76ae8941675999c}{MODBUS\_FUNCTION\_WRITE\_SINGLE\_COIL};
204    request->outputAddr = \hyperlink{cpu__endian_8h_a800cdbf435a85a9b3ad4f0edc518472a}{htons}(\hyperlink{dhcpv6__common_8h_aaee906fadd211e863c2e29a3690b25c4}{address});
205 
206    \textcolor{comment}{//A value of 0xFF00 requests the output to be ON. A value of 0x0000}
207    \textcolor{comment}{//requests it to be OFF}
208    \textcolor{keywordflow}{if}(\hyperlink{dtls__misc_8h_a74bce8e92ccabd0c885447114a48b80e}{value})
209       request->outputValue = \hyperlink{cpu__endian_8h_a15540dbaeee98b6df80805f92e2f6759}{HTONS}(\hyperlink{modbus__common_8h_ac0f3225620ad337214b8983403fba6bba125beb486b3996f82c2cca173622f7b5}{MODBUS\_COIL\_STATE\_ON});
210    \textcolor{keywordflow}{else}
211       request->outputValue = \hyperlink{cpu__endian_8h_a15540dbaeee98b6df80805f92e2f6759}{HTONS}(\hyperlink{modbus__common_8h_ac0f3225620ad337214b8983403fba6bbaf3da41abc2fd602b161001e6fb3dfb9c}{MODBUS\_COIL\_STATE\_OFF});
212 
213    \textcolor{comment}{//Compute the length of the request PDU}
214    length = \textcolor{keyword}{sizeof}(\hyperlink{modbus__common_8h_aad1ac61db943fe79841b4fbce3052319}{ModbusWriteSingleCoilReq});
215 
216    \textcolor{comment}{//Debug message}
217    \hyperlink{debug_8h_a67a8f9bc74358aa21745a76e23768dae}{TRACE\_DEBUG}(\textcolor{stringliteral}{"\(\backslash\)r\(\backslash\)nModbus Client: Sending Request PDU (%"} \hyperlink{compiler__port_8h_a2b7b0557dc6cd786df02dafbb51f5292}{PRIuSIZE} \textcolor{stringliteral}{" bytes)...\(\backslash\)r\(\backslash\)n"}, 
      length);
218    \textcolor{comment}{//Dump the contents of the PDU for debugging purpose}
219    \hyperlink{modbus__debug_8c_ac0d13d0c10bfd7327330fd26bdbd1925}{modbusDumpRequestPdu}(request, length);
220 
221    \textcolor{comment}{//Format MBAP header}
222    \textcolor{keywordflow}{return} \hyperlink{modbus__client__misc_8c_acb2507388b42c35c5b798efbae04bea7}{modbusClientFormatMbapHeader}(context, length);
223 \}
\end{DoxyCode}
\mbox{\Hypertarget{modbus__client__pdu_8h_aa3240da227782d3039460b3e591a983e}\label{modbus__client__pdu_8h_aa3240da227782d3039460b3e591a983e}} 
\index{modbus\+\_\+client\+\_\+pdu.\+h@{modbus\+\_\+client\+\_\+pdu.\+h}!modbus\+Client\+Format\+Write\+Single\+Reg\+Req@{modbus\+Client\+Format\+Write\+Single\+Reg\+Req}}
\index{modbus\+Client\+Format\+Write\+Single\+Reg\+Req@{modbus\+Client\+Format\+Write\+Single\+Reg\+Req}!modbus\+\_\+client\+\_\+pdu.\+h@{modbus\+\_\+client\+\_\+pdu.\+h}}
\subsubsection{\texorpdfstring{modbus\+Client\+Format\+Write\+Single\+Reg\+Req()}{modbusClientFormatWriteSingleRegReq()}}
{\footnotesize\ttfamily \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689c}{error\+\_\+t} modbus\+Client\+Format\+Write\+Single\+Reg\+Req (\begin{DoxyParamCaption}\item[{\hyperlink{modbus__client_8h_afb534cba0b839b960b7afd907b978713}{Modbus\+Client\+Context} $\ast$}]{context,  }\item[{\hyperlink{stdint_8h_a273cf69d639a59973b6019625df33e30}{uint16\+\_\+t}}]{address,  }\item[{\hyperlink{stdint_8h_a273cf69d639a59973b6019625df33e30}{uint16\+\_\+t}}]{value }\end{DoxyParamCaption})}



Format Write Single Register request. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em context} & Pointer to the Modbus/\+T\+CP client context \\
\hline
\mbox{\tt in}  & {\em address} & Address of the register to be written \\
\hline
\mbox{\tt in}  & {\em value} & Register value \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Error code 
\end{DoxyReturn}


Definition at line 234 of file modbus\+\_\+client\+\_\+pdu.\+c.


\begin{DoxyCode}
236 \{
237    \textcolor{keywordtype}{size\_t} \hyperlink{dtls__misc_8h_ab43ca82dd7fa2a0e56f941032ef324c4}{length};
238    \hyperlink{modbus__common_8h_a74bda8038d20dce920761c0034bd14b4}{ModbusWriteSingleRegReq} *request;
239 
240    \textcolor{comment}{//Point to the Modbus request PDU}
241    request = \hyperlink{modbus__client__misc_8c_acd0d7bb7f621eb8b0d8d37c2d2cc8e42}{modbusClientGetRequestPdu}(context);
242 
243    \textcolor{comment}{//Format Write Single Register request}
244    request->functionCode = \hyperlink{modbus__common_8h_a5dc067f13fceb5a2ac4b5d83c997ae0ba0f3b918c28650fb91247afcc40b15c0f}{MODBUS\_FUNCTION\_WRITE\_SINGLE\_REG};
245    request->regAddr = \hyperlink{cpu__endian_8h_a800cdbf435a85a9b3ad4f0edc518472a}{htons}(\hyperlink{dhcpv6__common_8h_aaee906fadd211e863c2e29a3690b25c4}{address});
246    request->regValue = \hyperlink{cpu__endian_8h_a800cdbf435a85a9b3ad4f0edc518472a}{htons}(\hyperlink{dtls__misc_8h_a74bce8e92ccabd0c885447114a48b80e}{value});
247 
248    \textcolor{comment}{//Compute the length of the request PDU}
249    length = \textcolor{keyword}{sizeof}(\hyperlink{modbus__common_8h_a74bda8038d20dce920761c0034bd14b4}{ModbusWriteSingleRegReq});
250 
251    \textcolor{comment}{//Debug message}
252    \hyperlink{debug_8h_a67a8f9bc74358aa21745a76e23768dae}{TRACE\_DEBUG}(\textcolor{stringliteral}{"\(\backslash\)r\(\backslash\)nModbus Client: Sending Request PDU (%"} \hyperlink{compiler__port_8h_a2b7b0557dc6cd786df02dafbb51f5292}{PRIuSIZE} \textcolor{stringliteral}{" bytes)...\(\backslash\)r\(\backslash\)n"}, 
      length);
253    \textcolor{comment}{//Dump the contents of the PDU for debugging purpose}
254    \hyperlink{modbus__debug_8c_ac0d13d0c10bfd7327330fd26bdbd1925}{modbusDumpRequestPdu}(request, length);
255 
256    \textcolor{comment}{//Format MBAP header}
257    \textcolor{keywordflow}{return} \hyperlink{modbus__client__misc_8c_acb2507388b42c35c5b798efbae04bea7}{modbusClientFormatMbapHeader}(context, length);
258 \}
\end{DoxyCode}
\mbox{\Hypertarget{modbus__client__pdu_8h_a8f5e0fe62aa8de28a7fad79c147b7f95}\label{modbus__client__pdu_8h_a8f5e0fe62aa8de28a7fad79c147b7f95}} 
\index{modbus\+\_\+client\+\_\+pdu.\+h@{modbus\+\_\+client\+\_\+pdu.\+h}!modbus\+Client\+Parse\+Exception\+Resp@{modbus\+Client\+Parse\+Exception\+Resp}}
\index{modbus\+Client\+Parse\+Exception\+Resp@{modbus\+Client\+Parse\+Exception\+Resp}!modbus\+\_\+client\+\_\+pdu.\+h@{modbus\+\_\+client\+\_\+pdu.\+h}}
\subsubsection{\texorpdfstring{modbus\+Client\+Parse\+Exception\+Resp()}{modbusClientParseExceptionResp()}}
{\footnotesize\ttfamily \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689c}{error\+\_\+t} modbus\+Client\+Parse\+Exception\+Resp (\begin{DoxyParamCaption}\item[{\hyperlink{modbus__client_8h_afb534cba0b839b960b7afd907b978713}{Modbus\+Client\+Context} $\ast$}]{context }\end{DoxyParamCaption})}



Parse Exception response. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em context} & Pointer to the Modbus/\+T\+CP client context \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Error code 
\end{DoxyReturn}


Definition at line 857 of file modbus\+\_\+client\+\_\+pdu.\+c.


\begin{DoxyCode}
858 \{
859    \textcolor{keywordtype}{size\_t} \hyperlink{dtls__misc_8h_ab43ca82dd7fa2a0e56f941032ef324c4}{length};
860    \hyperlink{modbus__common_8h_ac67e266bf48a77fcfa7c438e8b45e461}{ModbusExceptionResp} *response;
861 
862    \textcolor{comment}{//Point to the Modbus response PDU}
863    response = \hyperlink{modbus__client__misc_8c_ac190f02d3cb9e1882240d7de4587092a}{modbusClientGetResponsePdu}(context, &length);
864 
865    \textcolor{comment}{//Malformed PDU?}
866    \textcolor{keywordflow}{if}(length < \textcolor{keyword}{sizeof}(\hyperlink{modbus__common_8h_ac67e266bf48a77fcfa7c438e8b45e461}{ModbusExceptionResp}))
867       \textcolor{keywordflow}{return} \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689cae5c014519c3ac2540447887ddca1bd28}{ERROR\_INVALID\_LENGTH};
868 
869    \textcolor{comment}{//Save exception code}
870    context->exceptionCode = (\hyperlink{modbus__common_8h_a0b7f726dfaa2b4cf98aaaed1eb42fa72}{ModbusExceptionCode}) response->exceptionCode;
871 
872    \textcolor{comment}{//Send a negative confirmation to the user application}
873    \textcolor{keywordflow}{return} \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689ca3abc488679bf966898aca817f5c24a73}{ERROR\_EXCEPTION\_RECEIVED};
874 \}
\end{DoxyCode}
\mbox{\Hypertarget{modbus__client__pdu_8h_abcac03cf3106f461c66a023e37eee9f4}\label{modbus__client__pdu_8h_abcac03cf3106f461c66a023e37eee9f4}} 
\index{modbus\+\_\+client\+\_\+pdu.\+h@{modbus\+\_\+client\+\_\+pdu.\+h}!modbus\+Client\+Parse\+Mask\+Write\+Reg\+Resp@{modbus\+Client\+Parse\+Mask\+Write\+Reg\+Resp}}
\index{modbus\+Client\+Parse\+Mask\+Write\+Reg\+Resp@{modbus\+Client\+Parse\+Mask\+Write\+Reg\+Resp}!modbus\+\_\+client\+\_\+pdu.\+h@{modbus\+\_\+client\+\_\+pdu.\+h}}
\subsubsection{\texorpdfstring{modbus\+Client\+Parse\+Mask\+Write\+Reg\+Resp()}{modbusClientParseMaskWriteRegResp()}}
{\footnotesize\ttfamily \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689c}{error\+\_\+t} modbus\+Client\+Parse\+Mask\+Write\+Reg\+Resp (\begin{DoxyParamCaption}\item[{\hyperlink{modbus__client_8h_afb534cba0b839b960b7afd907b978713}{Modbus\+Client\+Context} $\ast$}]{context,  }\item[{\hyperlink{stdint_8h_a273cf69d639a59973b6019625df33e30}{uint16\+\_\+t}}]{address,  }\item[{\hyperlink{stdint_8h_a273cf69d639a59973b6019625df33e30}{uint16\+\_\+t}}]{and\+Mask,  }\item[{\hyperlink{stdint_8h_a273cf69d639a59973b6019625df33e30}{uint16\+\_\+t}}]{or\+Mask }\end{DoxyParamCaption})}



Parse Mask Write Register response. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em context} & Pointer to the Modbus/\+T\+CP client context \\
\hline
\mbox{\tt in}  & {\em address} & Address of the holding register \\
\hline
\mbox{\tt in}  & {\em and\+Mask} & A\+ND bitmask \\
\hline
\mbox{\tt in}  & {\em or\+Mask} & OR bitmask \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Error code 
\end{DoxyReturn}


Definition at line 773 of file modbus\+\_\+client\+\_\+pdu.\+c.


\begin{DoxyCode}
775 \{
776    \textcolor{keywordtype}{size\_t} \hyperlink{dtls__misc_8h_ab43ca82dd7fa2a0e56f941032ef324c4}{length};
777    \hyperlink{modbus__common_8h_ab12c078025995256fd47af2a77b48da9}{ModbusMaskWriteRegResp} *response;
778 
779    \textcolor{comment}{//Point to the Modbus response PDU}
780    response = \hyperlink{modbus__client__misc_8c_ac190f02d3cb9e1882240d7de4587092a}{modbusClientGetResponsePdu}(context, &length);
781 
782    \textcolor{comment}{//Malformed PDU?}
783    \textcolor{keywordflow}{if}(length < \textcolor{keyword}{sizeof}(\hyperlink{modbus__common_8h_ab12c078025995256fd47af2a77b48da9}{ModbusMaskWriteRegResp}))
784       \textcolor{keywordflow}{return} \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689cae5c014519c3ac2540447887ddca1bd28}{ERROR\_INVALID\_LENGTH};
785 
786    \textcolor{comment}{//Check function code}
787    \textcolor{keywordflow}{if}(response->functionCode != \hyperlink{modbus__common_8h_a5dc067f13fceb5a2ac4b5d83c997ae0babbd7f08400866e875a12838c719edc7c}{MODBUS\_FUNCTION\_MASK\_WRITE\_REG})
788       \textcolor{keywordflow}{return} \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689cafd5c9c677dc32cd4fb3f620843159ec4}{ERROR\_INVALID\_RESPONSE};
789 
790    \textcolor{comment}{//The normal response is an echo of the request}
791    \textcolor{keywordflow}{if}(\hyperlink{cpu__endian_8h_a9312c6eb72e64f748ae0d0e0dc3ec9b9}{ntohs}(response->referenceAddr) != \hyperlink{dhcpv6__common_8h_aaee906fadd211e863c2e29a3690b25c4}{address} ||
792       \hyperlink{cpu__endian_8h_a9312c6eb72e64f748ae0d0e0dc3ec9b9}{ntohs}(response->andMask) != \hyperlink{modbus__common_8h_acb3a59cf566f9458f57ee33d025a6edb}{andMask} ||
793       \hyperlink{cpu__endian_8h_a9312c6eb72e64f748ae0d0e0dc3ec9b9}{ntohs}(response->orMask) != \hyperlink{modbus__common_8h_ab78e691ac48889ca164516c323c53791}{orMask})
794    \{
795       \textcolor{keywordflow}{return} \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689cafd5c9c677dc32cd4fb3f620843159ec4}{ERROR\_INVALID\_RESPONSE};
796    \}
797 
798    \textcolor{comment}{//Successful processing}
799    \textcolor{keywordflow}{return} \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689cabf350750d0d4fabd8954c0f1e9bbae94}{NO\_ERROR};
800 \}
\end{DoxyCode}
\mbox{\Hypertarget{modbus__client__pdu_8h_a4205e1f9a7963cf1ed454dfecb5f3006}\label{modbus__client__pdu_8h_a4205e1f9a7963cf1ed454dfecb5f3006}} 
\index{modbus\+\_\+client\+\_\+pdu.\+h@{modbus\+\_\+client\+\_\+pdu.\+h}!modbus\+Client\+Parse\+Read\+Coils\+Resp@{modbus\+Client\+Parse\+Read\+Coils\+Resp}}
\index{modbus\+Client\+Parse\+Read\+Coils\+Resp@{modbus\+Client\+Parse\+Read\+Coils\+Resp}!modbus\+\_\+client\+\_\+pdu.\+h@{modbus\+\_\+client\+\_\+pdu.\+h}}
\subsubsection{\texorpdfstring{modbus\+Client\+Parse\+Read\+Coils\+Resp()}{modbusClientParseReadCoilsResp()}}
{\footnotesize\ttfamily \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689c}{error\+\_\+t} modbus\+Client\+Parse\+Read\+Coils\+Resp (\begin{DoxyParamCaption}\item[{\hyperlink{modbus__client_8h_afb534cba0b839b960b7afd907b978713}{Modbus\+Client\+Context} $\ast$}]{context,  }\item[{\hyperlink{compiler__port_8h_a12a1e9b3ce141648783a82445d02b58d}{uint\+\_\+t}}]{quantity,  }\item[{\hyperlink{stdint_8h_aba7bc1797add20fe3efdf37ced1182c5}{uint8\+\_\+t} $\ast$}]{value }\end{DoxyParamCaption})}



Parse Read Coils response. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em context} & Pointer to the Modbus/\+T\+CP client context \\
\hline
\mbox{\tt in}  & {\em quantity} & Number of coils \\
\hline
\mbox{\tt out}  & {\em value} & Value of the discrete outputs \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Error code 
\end{DoxyReturn}


Definition at line 439 of file modbus\+\_\+client\+\_\+pdu.\+c.


\begin{DoxyCode}
441 \{
442    \textcolor{keywordtype}{size\_t} \hyperlink{dhcpv6__common_8h_a5a648f5ec00c526b0dfa2df7a272c6c0}{n};
443    \textcolor{keywordtype}{size\_t} \hyperlink{dtls__misc_8h_ab43ca82dd7fa2a0e56f941032ef324c4}{length};
444    \hyperlink{modbus__common_8h_a58be1323c5adde030c9ddca852296a4a}{ModbusReadCoilsResp} *response;
445 
446    \textcolor{comment}{//Point to the Modbus response PDU}
447    response = \hyperlink{modbus__client__misc_8c_ac190f02d3cb9e1882240d7de4587092a}{modbusClientGetResponsePdu}(context, &length);
448 
449    \textcolor{comment}{//Malformed PDU?}
450    \textcolor{keywordflow}{if}(length < \textcolor{keyword}{sizeof}(\hyperlink{modbus__common_8h_a58be1323c5adde030c9ddca852296a4a}{ModbusReadCoilsResp}))
451       \textcolor{keywordflow}{return} \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689cae5c014519c3ac2540447887ddca1bd28}{ERROR\_INVALID\_LENGTH};
452 
453    \textcolor{comment}{//Compute the length of the data field}
454    n = length - \textcolor{keyword}{sizeof}(\hyperlink{modbus__common_8h_a58be1323c5adde030c9ddca852296a4a}{ModbusReadCoilsResp});
455 
456    \textcolor{comment}{//Check function code}
457    \textcolor{keywordflow}{if}(response->functionCode != \hyperlink{modbus__common_8h_a5dc067f13fceb5a2ac4b5d83c997ae0ba07d947f92ea81f0d663f5dcb388ed09d}{MODBUS\_FUNCTION\_READ\_COILS})
458       \textcolor{keywordflow}{return} \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689cafd5c9c677dc32cd4fb3f620843159ec4}{ERROR\_INVALID\_RESPONSE};
459 
460    \textcolor{comment}{//Check byte count field}
461    \textcolor{keywordflow}{if}(response->byteCount != n || response->byteCount != ((quantity + 7) / 8))
462       \textcolor{keywordflow}{return} \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689cae5c014519c3ac2540447887ddca1bd28}{ERROR\_INVALID\_LENGTH};
463 
464    \textcolor{comment}{//Copy coil values}
465    memcpy(\hyperlink{dtls__misc_8h_a74bce8e92ccabd0c885447114a48b80e}{value}, response->coilStatus, response->byteCount);
466 
467    \textcolor{comment}{//Successful processing}
468    \textcolor{keywordflow}{return} \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689cabf350750d0d4fabd8954c0f1e9bbae94}{NO\_ERROR};
469 \}
\end{DoxyCode}
\mbox{\Hypertarget{modbus__client__pdu_8h_a1d9d277568750c2acfb511e85d6d564b}\label{modbus__client__pdu_8h_a1d9d277568750c2acfb511e85d6d564b}} 
\index{modbus\+\_\+client\+\_\+pdu.\+h@{modbus\+\_\+client\+\_\+pdu.\+h}!modbus\+Client\+Parse\+Read\+Discrete\+Inputs\+Resp@{modbus\+Client\+Parse\+Read\+Discrete\+Inputs\+Resp}}
\index{modbus\+Client\+Parse\+Read\+Discrete\+Inputs\+Resp@{modbus\+Client\+Parse\+Read\+Discrete\+Inputs\+Resp}!modbus\+\_\+client\+\_\+pdu.\+h@{modbus\+\_\+client\+\_\+pdu.\+h}}
\subsubsection{\texorpdfstring{modbus\+Client\+Parse\+Read\+Discrete\+Inputs\+Resp()}{modbusClientParseReadDiscreteInputsResp()}}
{\footnotesize\ttfamily \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689c}{error\+\_\+t} modbus\+Client\+Parse\+Read\+Discrete\+Inputs\+Resp (\begin{DoxyParamCaption}\item[{\hyperlink{modbus__client_8h_afb534cba0b839b960b7afd907b978713}{Modbus\+Client\+Context} $\ast$}]{context,  }\item[{\hyperlink{compiler__port_8h_a12a1e9b3ce141648783a82445d02b58d}{uint\+\_\+t}}]{quantity,  }\item[{\hyperlink{stdint_8h_aba7bc1797add20fe3efdf37ced1182c5}{uint8\+\_\+t} $\ast$}]{value }\end{DoxyParamCaption})}



Parse Discrete Inputs response. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em context} & Pointer to the Modbus/\+T\+CP client context \\
\hline
\mbox{\tt in}  & {\em quantity} & Number of inputs \\
\hline
\mbox{\tt out}  & {\em value} & Value of the discrete inputs \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Error code 
\end{DoxyReturn}


Definition at line 480 of file modbus\+\_\+client\+\_\+pdu.\+c.


\begin{DoxyCode}
482 \{
483    \textcolor{keywordtype}{size\_t} \hyperlink{dhcpv6__common_8h_a5a648f5ec00c526b0dfa2df7a272c6c0}{n};
484    \textcolor{keywordtype}{size\_t} \hyperlink{dtls__misc_8h_ab43ca82dd7fa2a0e56f941032ef324c4}{length};
485    \hyperlink{modbus__common_8h_a63a55a927abd455c91e8d6d460102507}{ModbusReadDiscreteInputsResp} *response;
486 
487    \textcolor{comment}{//Point to the Modbus response PDU}
488    response = \hyperlink{modbus__client__misc_8c_ac190f02d3cb9e1882240d7de4587092a}{modbusClientGetResponsePdu}(context, &length);
489 
490    \textcolor{comment}{//Malformed PDU?}
491    \textcolor{keywordflow}{if}(length < \textcolor{keyword}{sizeof}(\hyperlink{modbus__common_8h_a63a55a927abd455c91e8d6d460102507}{ModbusReadDiscreteInputsResp}))
492       \textcolor{keywordflow}{return} \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689cae5c014519c3ac2540447887ddca1bd28}{ERROR\_INVALID\_LENGTH};
493 
494    \textcolor{comment}{//Compute the length of the data field}
495    n = length - \textcolor{keyword}{sizeof}(\hyperlink{modbus__common_8h_a63a55a927abd455c91e8d6d460102507}{ModbusReadDiscreteInputsResp});
496 
497    \textcolor{comment}{//Check function code}
498    \textcolor{keywordflow}{if}(response->functionCode != \hyperlink{modbus__common_8h_a5dc067f13fceb5a2ac4b5d83c997ae0babcff2d7c5fdc39674ce6fa20542d2767}{MODBUS\_FUNCTION\_READ\_DISCRETE\_INPUTS})
499       \textcolor{keywordflow}{return} \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689cafd5c9c677dc32cd4fb3f620843159ec4}{ERROR\_INVALID\_RESPONSE};
500 
501    \textcolor{comment}{//Check byte count field}
502    \textcolor{keywordflow}{if}(response->byteCount != n || response->byteCount != ((quantity + 7) / 8))
503       \textcolor{keywordflow}{return} \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689cae5c014519c3ac2540447887ddca1bd28}{ERROR\_INVALID\_LENGTH};
504 
505    \textcolor{comment}{//Copy discrete input values}
506    memcpy(\hyperlink{dtls__misc_8h_a74bce8e92ccabd0c885447114a48b80e}{value}, response->inputStatus, response->byteCount);
507 
508    \textcolor{comment}{//Successful processing}
509    \textcolor{keywordflow}{return} \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689cabf350750d0d4fabd8954c0f1e9bbae94}{NO\_ERROR};
510 \}
\end{DoxyCode}
\mbox{\Hypertarget{modbus__client__pdu_8h_ad8297274243d28b7ddcdc67fc4332270}\label{modbus__client__pdu_8h_ad8297274243d28b7ddcdc67fc4332270}} 
\index{modbus\+\_\+client\+\_\+pdu.\+h@{modbus\+\_\+client\+\_\+pdu.\+h}!modbus\+Client\+Parse\+Read\+Holding\+Regs\+Resp@{modbus\+Client\+Parse\+Read\+Holding\+Regs\+Resp}}
\index{modbus\+Client\+Parse\+Read\+Holding\+Regs\+Resp@{modbus\+Client\+Parse\+Read\+Holding\+Regs\+Resp}!modbus\+\_\+client\+\_\+pdu.\+h@{modbus\+\_\+client\+\_\+pdu.\+h}}
\subsubsection{\texorpdfstring{modbus\+Client\+Parse\+Read\+Holding\+Regs\+Resp()}{modbusClientParseReadHoldingRegsResp()}}
{\footnotesize\ttfamily \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689c}{error\+\_\+t} modbus\+Client\+Parse\+Read\+Holding\+Regs\+Resp (\begin{DoxyParamCaption}\item[{\hyperlink{modbus__client_8h_afb534cba0b839b960b7afd907b978713}{Modbus\+Client\+Context} $\ast$}]{context,  }\item[{\hyperlink{compiler__port_8h_a12a1e9b3ce141648783a82445d02b58d}{uint\+\_\+t}}]{quantity,  }\item[{\hyperlink{stdint_8h_a273cf69d639a59973b6019625df33e30}{uint16\+\_\+t} $\ast$}]{value }\end{DoxyParamCaption})}



Parse Read Holding Registers response. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em context} & Pointer to the Modbus/\+T\+CP client context \\
\hline
\mbox{\tt in}  & {\em quantity} & Number of registers \\
\hline
\mbox{\tt out}  & {\em value} & Value of the holding registers \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Error code 
\end{DoxyReturn}


Definition at line 521 of file modbus\+\_\+client\+\_\+pdu.\+c.


\begin{DoxyCode}
523 \{
524    \hyperlink{compiler__port_8h_a12a1e9b3ce141648783a82445d02b58d}{uint\_t} i;
525    \textcolor{keywordtype}{size\_t} \hyperlink{dhcpv6__common_8h_a5a648f5ec00c526b0dfa2df7a272c6c0}{n};
526    \textcolor{keywordtype}{size\_t} \hyperlink{dtls__misc_8h_ab43ca82dd7fa2a0e56f941032ef324c4}{length};
527    \hyperlink{modbus__common_8h_aeada894fa61622eaacc0c122f30b12f5}{ModbusReadHoldingRegsResp} *response;
528 
529    \textcolor{comment}{//Point to the Modbus response PDU}
530    response = \hyperlink{modbus__client__misc_8c_ac190f02d3cb9e1882240d7de4587092a}{modbusClientGetResponsePdu}(context, &length);
531 
532    \textcolor{comment}{//Malformed PDU?}
533    \textcolor{keywordflow}{if}(length < \textcolor{keyword}{sizeof}(\hyperlink{modbus__common_8h_aeada894fa61622eaacc0c122f30b12f5}{ModbusReadHoldingRegsResp}))
534       \textcolor{keywordflow}{return} \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689cae5c014519c3ac2540447887ddca1bd28}{ERROR\_INVALID\_LENGTH};
535 
536    \textcolor{comment}{//Compute the length of the data field}
537    n = length - \textcolor{keyword}{sizeof}(\hyperlink{modbus__common_8h_aeada894fa61622eaacc0c122f30b12f5}{ModbusReadHoldingRegsResp});
538 
539    \textcolor{comment}{//Check function code}
540    \textcolor{keywordflow}{if}(response->functionCode != \hyperlink{modbus__common_8h_a5dc067f13fceb5a2ac4b5d83c997ae0ba52b26a210214dfc2d06eef1eeec41b04}{MODBUS\_FUNCTION\_READ\_HOLDING\_REGS})
541       \textcolor{keywordflow}{return} \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689cafd5c9c677dc32cd4fb3f620843159ec4}{ERROR\_INVALID\_RESPONSE};
542 
543    \textcolor{comment}{//Check byte count field}
544    \textcolor{keywordflow}{if}(response->byteCount != n ||
545       response->byteCount != (quantity * \textcolor{keyword}{sizeof}(\hyperlink{stdint_8h_a273cf69d639a59973b6019625df33e30}{uint16\_t})))
546    \{
547       \textcolor{keywordflow}{return} \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689cae5c014519c3ac2540447887ddca1bd28}{ERROR\_INVALID\_LENGTH};
548    \}
549 
550    \textcolor{comment}{//Copy register values}
551    \textcolor{keywordflow}{for}(i = 0; i < quantity; i++)
552    \{
553       \hyperlink{dtls__misc_8h_a74bce8e92ccabd0c885447114a48b80e}{value}[i] = \hyperlink{cpu__endian_8h_a9312c6eb72e64f748ae0d0e0dc3ec9b9}{ntohs}(response->regValue[i]);
554    \}
555 
556    \textcolor{comment}{//Successful processing}
557    \textcolor{keywordflow}{return} \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689cabf350750d0d4fabd8954c0f1e9bbae94}{NO\_ERROR};
558 \}
\end{DoxyCode}
\mbox{\Hypertarget{modbus__client__pdu_8h_ae31de7c95a40e22e5ebce273ba9ca578}\label{modbus__client__pdu_8h_ae31de7c95a40e22e5ebce273ba9ca578}} 
\index{modbus\+\_\+client\+\_\+pdu.\+h@{modbus\+\_\+client\+\_\+pdu.\+h}!modbus\+Client\+Parse\+Read\+Input\+Regs\+Resp@{modbus\+Client\+Parse\+Read\+Input\+Regs\+Resp}}
\index{modbus\+Client\+Parse\+Read\+Input\+Regs\+Resp@{modbus\+Client\+Parse\+Read\+Input\+Regs\+Resp}!modbus\+\_\+client\+\_\+pdu.\+h@{modbus\+\_\+client\+\_\+pdu.\+h}}
\subsubsection{\texorpdfstring{modbus\+Client\+Parse\+Read\+Input\+Regs\+Resp()}{modbusClientParseReadInputRegsResp()}}
{\footnotesize\ttfamily \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689c}{error\+\_\+t} modbus\+Client\+Parse\+Read\+Input\+Regs\+Resp (\begin{DoxyParamCaption}\item[{\hyperlink{modbus__client_8h_afb534cba0b839b960b7afd907b978713}{Modbus\+Client\+Context} $\ast$}]{context,  }\item[{\hyperlink{compiler__port_8h_a12a1e9b3ce141648783a82445d02b58d}{uint\+\_\+t}}]{quantity,  }\item[{\hyperlink{stdint_8h_a273cf69d639a59973b6019625df33e30}{uint16\+\_\+t} $\ast$}]{value }\end{DoxyParamCaption})}



Parse Read Input Registers response. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em context} & Pointer to the Modbus/\+T\+CP client context \\
\hline
\mbox{\tt in}  & {\em quantity} & Number of registers \\
\hline
\mbox{\tt out}  & {\em value} & Value of the input registers \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Error code 
\end{DoxyReturn}


Definition at line 569 of file modbus\+\_\+client\+\_\+pdu.\+c.


\begin{DoxyCode}
571 \{
572    \hyperlink{compiler__port_8h_a12a1e9b3ce141648783a82445d02b58d}{uint\_t} i;
573    \textcolor{keywordtype}{size\_t} \hyperlink{dhcpv6__common_8h_a5a648f5ec00c526b0dfa2df7a272c6c0}{n};
574    \textcolor{keywordtype}{size\_t} \hyperlink{dtls__misc_8h_ab43ca82dd7fa2a0e56f941032ef324c4}{length};
575    \hyperlink{modbus__common_8h_a677438bee40c2d73e2de284c5fb896ed}{ModbusReadInputRegsResp} *response;
576 
577    \textcolor{comment}{//Point to the Modbus response PDU}
578    response = \hyperlink{modbus__client__misc_8c_ac190f02d3cb9e1882240d7de4587092a}{modbusClientGetResponsePdu}(context, &length);
579 
580    \textcolor{comment}{//Malformed PDU?}
581    \textcolor{keywordflow}{if}(length < \textcolor{keyword}{sizeof}(\hyperlink{modbus__common_8h_a677438bee40c2d73e2de284c5fb896ed}{ModbusReadInputRegsResp}))
582       \textcolor{keywordflow}{return} \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689cae5c014519c3ac2540447887ddca1bd28}{ERROR\_INVALID\_LENGTH};
583 
584    \textcolor{comment}{//Compute the length of the data field}
585    n = length - \textcolor{keyword}{sizeof}(\hyperlink{modbus__common_8h_a677438bee40c2d73e2de284c5fb896ed}{ModbusReadInputRegsResp});
586 
587    \textcolor{comment}{//Check function code}
588    \textcolor{keywordflow}{if}(response->functionCode != \hyperlink{modbus__common_8h_a5dc067f13fceb5a2ac4b5d83c997ae0ba95a506d74dc629acae8bd404d92ab232}{MODBUS\_FUNCTION\_READ\_INPUT\_REGS})
589       \textcolor{keywordflow}{return} \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689cafd5c9c677dc32cd4fb3f620843159ec4}{ERROR\_INVALID\_RESPONSE};
590 
591    \textcolor{comment}{//Check byte count field}
592    \textcolor{keywordflow}{if}(response->byteCount != n ||
593       response->byteCount != (quantity * \textcolor{keyword}{sizeof}(\hyperlink{stdint_8h_a273cf69d639a59973b6019625df33e30}{uint16\_t})))
594    \{
595       \textcolor{keywordflow}{return} \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689cae5c014519c3ac2540447887ddca1bd28}{ERROR\_INVALID\_LENGTH};
596    \}
597 
598    \textcolor{comment}{//Copy register values}
599    \textcolor{keywordflow}{for}(i = 0; i < quantity; i++)
600    \{
601       \hyperlink{dtls__misc_8h_a74bce8e92ccabd0c885447114a48b80e}{value}[i] = \hyperlink{cpu__endian_8h_a9312c6eb72e64f748ae0d0e0dc3ec9b9}{ntohs}(response->regValue[i]);
602    \}
603 
604    \textcolor{comment}{//Successful processing}
605    \textcolor{keywordflow}{return} \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689cabf350750d0d4fabd8954c0f1e9bbae94}{NO\_ERROR};
606 \}
\end{DoxyCode}
\mbox{\Hypertarget{modbus__client__pdu_8h_a5de535b4743f992e6754acacb60431dd}\label{modbus__client__pdu_8h_a5de535b4743f992e6754acacb60431dd}} 
\index{modbus\+\_\+client\+\_\+pdu.\+h@{modbus\+\_\+client\+\_\+pdu.\+h}!modbus\+Client\+Parse\+Read\+Write\+Multiple\+Regs\+Resp@{modbus\+Client\+Parse\+Read\+Write\+Multiple\+Regs\+Resp}}
\index{modbus\+Client\+Parse\+Read\+Write\+Multiple\+Regs\+Resp@{modbus\+Client\+Parse\+Read\+Write\+Multiple\+Regs\+Resp}!modbus\+\_\+client\+\_\+pdu.\+h@{modbus\+\_\+client\+\_\+pdu.\+h}}
\subsubsection{\texorpdfstring{modbus\+Client\+Parse\+Read\+Write\+Multiple\+Regs\+Resp()}{modbusClientParseReadWriteMultipleRegsResp()}}
{\footnotesize\ttfamily \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689c}{error\+\_\+t} modbus\+Client\+Parse\+Read\+Write\+Multiple\+Regs\+Resp (\begin{DoxyParamCaption}\item[{\hyperlink{modbus__client_8h_afb534cba0b839b960b7afd907b978713}{Modbus\+Client\+Context} $\ast$}]{context,  }\item[{\hyperlink{compiler__port_8h_a12a1e9b3ce141648783a82445d02b58d}{uint\+\_\+t}}]{read\+Quantity,  }\item[{\hyperlink{stdint_8h_a273cf69d639a59973b6019625df33e30}{uint16\+\_\+t} $\ast$}]{read\+Value }\end{DoxyParamCaption})}



Parse Read/\+Write Multiple Registers response. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em context} & Pointer to the Modbus/\+T\+CP client context \\
\hline
\mbox{\tt in}  & {\em read\+Quantity} & Number of holding registers to be read \\
\hline
\mbox{\tt out}  & {\em read\+Value} & Value of the holding registers \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Error code 
\end{DoxyReturn}


Definition at line 811 of file modbus\+\_\+client\+\_\+pdu.\+c.


\begin{DoxyCode}
813 \{
814    \hyperlink{compiler__port_8h_a12a1e9b3ce141648783a82445d02b58d}{uint\_t} i;
815    \textcolor{keywordtype}{size\_t} \hyperlink{dhcpv6__common_8h_a5a648f5ec00c526b0dfa2df7a272c6c0}{n};
816    \textcolor{keywordtype}{size\_t} \hyperlink{dtls__misc_8h_ab43ca82dd7fa2a0e56f941032ef324c4}{length};
817    \hyperlink{modbus__common_8h_a2c66e843f88ab1c99e9135345b818a4a}{ModbusReadWriteMultipleRegsResp} *response;
818 
819    \textcolor{comment}{//Point to the Modbus response PDU}
820    response = \hyperlink{modbus__client__misc_8c_ac190f02d3cb9e1882240d7de4587092a}{modbusClientGetResponsePdu}(context, &length);
821 
822    \textcolor{comment}{//Malformed PDU?}
823    \textcolor{keywordflow}{if}(length < \textcolor{keyword}{sizeof}(\hyperlink{modbus__common_8h_a2c66e843f88ab1c99e9135345b818a4a}{ModbusReadWriteMultipleRegsResp}))
824       \textcolor{keywordflow}{return} \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689cae5c014519c3ac2540447887ddca1bd28}{ERROR\_INVALID\_LENGTH};
825 
826    \textcolor{comment}{//Compute the length of the data field}
827    n = length - \textcolor{keyword}{sizeof}(\hyperlink{modbus__common_8h_a677438bee40c2d73e2de284c5fb896ed}{ModbusReadInputRegsResp});
828 
829    \textcolor{comment}{//Check function code}
830    \textcolor{keywordflow}{if}(response->functionCode != \hyperlink{modbus__common_8h_a5dc067f13fceb5a2ac4b5d83c997ae0ba3c4313c27737af1dad599ec82de77267}{MODBUS\_FUNCTION\_READ\_WRITE\_MULTIPLE\_REGS}
      )
831       \textcolor{keywordflow}{return} \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689cafd5c9c677dc32cd4fb3f620843159ec4}{ERROR\_INVALID\_RESPONSE};
832 
833    \textcolor{comment}{//Check byte count field}
834    \textcolor{keywordflow}{if}(response->readByteCount != n ||
835       response->readByteCount != (readQuantity * \textcolor{keyword}{sizeof}(\hyperlink{stdint_8h_a273cf69d639a59973b6019625df33e30}{uint16\_t})))
836    \{
837       \textcolor{keywordflow}{return} \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689cae5c014519c3ac2540447887ddca1bd28}{ERROR\_INVALID\_LENGTH};
838    \}
839 
840    \textcolor{comment}{//Copy register values}
841    \textcolor{keywordflow}{for}(i = 0; i < readQuantity; i++)
842    \{
843       readValue[i] = \hyperlink{cpu__endian_8h_a9312c6eb72e64f748ae0d0e0dc3ec9b9}{ntohs}(response->readRegValue[i]);
844    \}
845 
846    \textcolor{comment}{//Successful processing}
847    \textcolor{keywordflow}{return} \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689cabf350750d0d4fabd8954c0f1e9bbae94}{NO\_ERROR};
848 \}
\end{DoxyCode}
\mbox{\Hypertarget{modbus__client__pdu_8h_ad30fd09b9c968aea88b414fdf2b6047a}\label{modbus__client__pdu_8h_ad30fd09b9c968aea88b414fdf2b6047a}} 
\index{modbus\+\_\+client\+\_\+pdu.\+h@{modbus\+\_\+client\+\_\+pdu.\+h}!modbus\+Client\+Parse\+Write\+Multiple\+Coils\+Resp@{modbus\+Client\+Parse\+Write\+Multiple\+Coils\+Resp}}
\index{modbus\+Client\+Parse\+Write\+Multiple\+Coils\+Resp@{modbus\+Client\+Parse\+Write\+Multiple\+Coils\+Resp}!modbus\+\_\+client\+\_\+pdu.\+h@{modbus\+\_\+client\+\_\+pdu.\+h}}
\subsubsection{\texorpdfstring{modbus\+Client\+Parse\+Write\+Multiple\+Coils\+Resp()}{modbusClientParseWriteMultipleCoilsResp()}}
{\footnotesize\ttfamily \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689c}{error\+\_\+t} modbus\+Client\+Parse\+Write\+Multiple\+Coils\+Resp (\begin{DoxyParamCaption}\item[{\hyperlink{modbus__client_8h_afb534cba0b839b960b7afd907b978713}{Modbus\+Client\+Context} $\ast$}]{context,  }\item[{\hyperlink{stdint_8h_a273cf69d639a59973b6019625df33e30}{uint16\+\_\+t}}]{address,  }\item[{\hyperlink{compiler__port_8h_a12a1e9b3ce141648783a82445d02b58d}{uint\+\_\+t}}]{quantity }\end{DoxyParamCaption})}



Parse Write Multiple Coils response. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em context} & Pointer to the Modbus/\+T\+CP client context \\
\hline
\mbox{\tt in}  & {\em address} & Address of the first coil to be forced \\
\hline
\mbox{\tt in}  & {\em quantity} & Number of coils \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Error code 
\end{DoxyReturn}


Definition at line 696 of file modbus\+\_\+client\+\_\+pdu.\+c.


\begin{DoxyCode}
698 \{
699    \textcolor{keywordtype}{size\_t} \hyperlink{dtls__misc_8h_ab43ca82dd7fa2a0e56f941032ef324c4}{length};
700    \hyperlink{modbus__common_8h_ace13f6faa98c98242f810f16599a68e3}{ModbusWriteMultipleCoilsResp} *response;
701 
702    \textcolor{comment}{//Point to the Modbus response PDU}
703    response = \hyperlink{modbus__client__misc_8c_ac190f02d3cb9e1882240d7de4587092a}{modbusClientGetResponsePdu}(context, &length);
704 
705    \textcolor{comment}{//Malformed PDU?}
706    \textcolor{keywordflow}{if}(length < \textcolor{keyword}{sizeof}(\hyperlink{modbus__common_8h_ace13f6faa98c98242f810f16599a68e3}{ModbusWriteMultipleCoilsResp}))
707       \textcolor{keywordflow}{return} \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689cae5c014519c3ac2540447887ddca1bd28}{ERROR\_INVALID\_LENGTH};
708 
709    \textcolor{comment}{//Check function code}
710    \textcolor{keywordflow}{if}(response->functionCode != \hyperlink{modbus__common_8h_a5dc067f13fceb5a2ac4b5d83c997ae0ba7237b6ded4add7362096cd9be58d3647}{MODBUS\_FUNCTION\_WRITE\_MULTIPLE\_COILS})
711       \textcolor{keywordflow}{return} \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689cafd5c9c677dc32cd4fb3f620843159ec4}{ERROR\_INVALID\_RESPONSE};
712 
713    \textcolor{comment}{//The normal response returns the starting address, and quantity of}
714    \textcolor{comment}{//coils forced}
715    \textcolor{keywordflow}{if}(\hyperlink{cpu__endian_8h_a9312c6eb72e64f748ae0d0e0dc3ec9b9}{ntohs}(response->startingAddr) != \hyperlink{dhcpv6__common_8h_aaee906fadd211e863c2e29a3690b25c4}{address} ||
716       \hyperlink{cpu__endian_8h_a9312c6eb72e64f748ae0d0e0dc3ec9b9}{ntohs}(response->quantityOfOutputs) != quantity)
717    \{
718       \textcolor{keywordflow}{return} \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689cafd5c9c677dc32cd4fb3f620843159ec4}{ERROR\_INVALID\_RESPONSE};
719    \}
720 
721    \textcolor{comment}{//Successful processing}
722    \textcolor{keywordflow}{return} \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689cabf350750d0d4fabd8954c0f1e9bbae94}{NO\_ERROR};
723 \}
\end{DoxyCode}
\mbox{\Hypertarget{modbus__client__pdu_8h_a3e6e413549fc0f6e20feea143be68649}\label{modbus__client__pdu_8h_a3e6e413549fc0f6e20feea143be68649}} 
\index{modbus\+\_\+client\+\_\+pdu.\+h@{modbus\+\_\+client\+\_\+pdu.\+h}!modbus\+Client\+Parse\+Write\+Multiple\+Regs\+Resp@{modbus\+Client\+Parse\+Write\+Multiple\+Regs\+Resp}}
\index{modbus\+Client\+Parse\+Write\+Multiple\+Regs\+Resp@{modbus\+Client\+Parse\+Write\+Multiple\+Regs\+Resp}!modbus\+\_\+client\+\_\+pdu.\+h@{modbus\+\_\+client\+\_\+pdu.\+h}}
\subsubsection{\texorpdfstring{modbus\+Client\+Parse\+Write\+Multiple\+Regs\+Resp()}{modbusClientParseWriteMultipleRegsResp()}}
{\footnotesize\ttfamily \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689c}{error\+\_\+t} modbus\+Client\+Parse\+Write\+Multiple\+Regs\+Resp (\begin{DoxyParamCaption}\item[{\hyperlink{modbus__client_8h_afb534cba0b839b960b7afd907b978713}{Modbus\+Client\+Context} $\ast$}]{context,  }\item[{\hyperlink{stdint_8h_a273cf69d639a59973b6019625df33e30}{uint16\+\_\+t}}]{address,  }\item[{\hyperlink{compiler__port_8h_a12a1e9b3ce141648783a82445d02b58d}{uint\+\_\+t}}]{quantity }\end{DoxyParamCaption})}



Parse Write Multiple Registers response. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em context} & Pointer to the Modbus/\+T\+CP client context \\
\hline
\mbox{\tt in}  & {\em address} & Starting register address \\
\hline
\mbox{\tt in}  & {\em quantity} & Number of registers \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Error code 
\end{DoxyReturn}


Definition at line 734 of file modbus\+\_\+client\+\_\+pdu.\+c.


\begin{DoxyCode}
736 \{
737    \textcolor{keywordtype}{size\_t} \hyperlink{dtls__misc_8h_ab43ca82dd7fa2a0e56f941032ef324c4}{length};
738    \hyperlink{modbus__common_8h_a9e705f8cd771473661fe9acbe0a82bf3}{ModbusWriteMultipleRegsResp} *response;
739 
740    \textcolor{comment}{//Point to the Modbus response PDU}
741    response = \hyperlink{modbus__client__misc_8c_ac190f02d3cb9e1882240d7de4587092a}{modbusClientGetResponsePdu}(context, &length);
742 
743    \textcolor{comment}{//Malformed PDU?}
744    \textcolor{keywordflow}{if}(length < \textcolor{keyword}{sizeof}(\hyperlink{modbus__common_8h_a9e705f8cd771473661fe9acbe0a82bf3}{ModbusWriteMultipleRegsResp}))
745       \textcolor{keywordflow}{return} \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689cae5c014519c3ac2540447887ddca1bd28}{ERROR\_INVALID\_LENGTH};
746 
747    \textcolor{comment}{//Check function code}
748    \textcolor{keywordflow}{if}(response->functionCode != \hyperlink{modbus__common_8h_a5dc067f13fceb5a2ac4b5d83c997ae0ba3cd57886a5db63792fdb96a759435a16}{MODBUS\_FUNCTION\_WRITE\_MULTIPLE\_REGS})
749       \textcolor{keywordflow}{return} \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689cafd5c9c677dc32cd4fb3f620843159ec4}{ERROR\_INVALID\_RESPONSE};
750 
751    \textcolor{comment}{//The normal response returns the starting address, and quantity of}
752    \textcolor{comment}{//registers written}
753    \textcolor{keywordflow}{if}(\hyperlink{cpu__endian_8h_a9312c6eb72e64f748ae0d0e0dc3ec9b9}{ntohs}(response->startingAddr) != \hyperlink{dhcpv6__common_8h_aaee906fadd211e863c2e29a3690b25c4}{address} ||
754       \hyperlink{cpu__endian_8h_a9312c6eb72e64f748ae0d0e0dc3ec9b9}{ntohs}(response->quantityOfRegs) != quantity)
755    \{
756       \textcolor{keywordflow}{return} \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689cafd5c9c677dc32cd4fb3f620843159ec4}{ERROR\_INVALID\_RESPONSE};
757    \}
758 
759    \textcolor{comment}{//Successful processing}
760    \textcolor{keywordflow}{return} \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689cabf350750d0d4fabd8954c0f1e9bbae94}{NO\_ERROR};
761 \}
\end{DoxyCode}
\mbox{\Hypertarget{modbus__client__pdu_8h_a03b80491b0fa1ec26e810849c0fb0063}\label{modbus__client__pdu_8h_a03b80491b0fa1ec26e810849c0fb0063}} 
\index{modbus\+\_\+client\+\_\+pdu.\+h@{modbus\+\_\+client\+\_\+pdu.\+h}!modbus\+Client\+Parse\+Write\+Single\+Coil\+Resp@{modbus\+Client\+Parse\+Write\+Single\+Coil\+Resp}}
\index{modbus\+Client\+Parse\+Write\+Single\+Coil\+Resp@{modbus\+Client\+Parse\+Write\+Single\+Coil\+Resp}!modbus\+\_\+client\+\_\+pdu.\+h@{modbus\+\_\+client\+\_\+pdu.\+h}}
\subsubsection{\texorpdfstring{modbus\+Client\+Parse\+Write\+Single\+Coil\+Resp()}{modbusClientParseWriteSingleCoilResp()}}
{\footnotesize\ttfamily \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689c}{error\+\_\+t} modbus\+Client\+Parse\+Write\+Single\+Coil\+Resp (\begin{DoxyParamCaption}\item[{\hyperlink{modbus__client_8h_afb534cba0b839b960b7afd907b978713}{Modbus\+Client\+Context} $\ast$}]{context,  }\item[{\hyperlink{stdint_8h_a273cf69d639a59973b6019625df33e30}{uint16\+\_\+t}}]{address,  }\item[{\hyperlink{compiler__port_8h_a812d16e5494522586b3784e55d479912}{bool\+\_\+t}}]{value }\end{DoxyParamCaption})}



Parse Write Single Coil response. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em context} & Pointer to the Modbus/\+T\+CP client context \\
\hline
\mbox{\tt in}  & {\em address} & Address of the coil to be forced \\
\hline
\mbox{\tt in}  & {\em value} & Value of the discrete output \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Error code 
\end{DoxyReturn}


Definition at line 617 of file modbus\+\_\+client\+\_\+pdu.\+c.


\begin{DoxyCode}
619 \{
620    \textcolor{keywordtype}{size\_t} \hyperlink{dtls__misc_8h_ab43ca82dd7fa2a0e56f941032ef324c4}{length};
621    \hyperlink{compiler__port_8h_a812d16e5494522586b3784e55d479912}{bool\_t} referenceValue;
622    \hyperlink{modbus__common_8h_a32e40876f9d5132564d72b54ba79fc00}{ModbusWriteSingleCoilResp} *response;
623 
624    \textcolor{comment}{//Point to the Modbus response PDU}
625    response = \hyperlink{modbus__client__misc_8c_ac190f02d3cb9e1882240d7de4587092a}{modbusClientGetResponsePdu}(context, &length);
626 
627    \textcolor{comment}{//Malformed PDU?}
628    \textcolor{keywordflow}{if}(length < \textcolor{keyword}{sizeof}(\hyperlink{modbus__common_8h_a32e40876f9d5132564d72b54ba79fc00}{ModbusWriteSingleCoilResp}))
629       \textcolor{keywordflow}{return} \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689cae5c014519c3ac2540447887ddca1bd28}{ERROR\_INVALID\_LENGTH};
630 
631    \textcolor{comment}{//Check function code}
632    \textcolor{keywordflow}{if}(response->functionCode != \hyperlink{modbus__common_8h_a5dc067f13fceb5a2ac4b5d83c997ae0ba0736abb54b479e55e76ae8941675999c}{MODBUS\_FUNCTION\_WRITE\_SINGLE\_COIL})
633       \textcolor{keywordflow}{return} \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689cafd5c9c677dc32cd4fb3f620843159ec4}{ERROR\_INVALID\_RESPONSE};
634 
635    \textcolor{comment}{//A value of 0xFF00 requests the output to be ON. A value of 0x0000}
636    \textcolor{comment}{//requests it to be OFF}
637    referenceValue = \hyperlink{dtls__misc_8h_a74bce8e92ccabd0c885447114a48b80e}{value} ? \hyperlink{modbus__common_8h_ac0f3225620ad337214b8983403fba6bba125beb486b3996f82c2cca173622f7b5}{MODBUS\_COIL\_STATE\_ON} : 
      \hyperlink{modbus__common_8h_ac0f3225620ad337214b8983403fba6bbaf3da41abc2fd602b161001e6fb3dfb9c}{MODBUS\_COIL\_STATE\_OFF};
638 
639    \textcolor{comment}{//The normal response is an echo of the request}
640    \textcolor{keywordflow}{if}(\hyperlink{cpu__endian_8h_a9312c6eb72e64f748ae0d0e0dc3ec9b9}{ntohs}(response->outputAddr) != \hyperlink{dhcpv6__common_8h_aaee906fadd211e863c2e29a3690b25c4}{address} ||
641       \hyperlink{cpu__endian_8h_a9312c6eb72e64f748ae0d0e0dc3ec9b9}{ntohs}(response->outputValue) != referenceValue)
642    \{
643       \textcolor{keywordflow}{return} \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689cafd5c9c677dc32cd4fb3f620843159ec4}{ERROR\_INVALID\_RESPONSE};
644    \}
645 
646    \textcolor{comment}{//Successful processing}
647    \textcolor{keywordflow}{return} \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689cabf350750d0d4fabd8954c0f1e9bbae94}{NO\_ERROR};
648 \}
\end{DoxyCode}
\mbox{\Hypertarget{modbus__client__pdu_8h_a8d89e61555a73e81f2cae0cc8b220e90}\label{modbus__client__pdu_8h_a8d89e61555a73e81f2cae0cc8b220e90}} 
\index{modbus\+\_\+client\+\_\+pdu.\+h@{modbus\+\_\+client\+\_\+pdu.\+h}!modbus\+Client\+Parse\+Write\+Single\+Reg\+Resp@{modbus\+Client\+Parse\+Write\+Single\+Reg\+Resp}}
\index{modbus\+Client\+Parse\+Write\+Single\+Reg\+Resp@{modbus\+Client\+Parse\+Write\+Single\+Reg\+Resp}!modbus\+\_\+client\+\_\+pdu.\+h@{modbus\+\_\+client\+\_\+pdu.\+h}}
\subsubsection{\texorpdfstring{modbus\+Client\+Parse\+Write\+Single\+Reg\+Resp()}{modbusClientParseWriteSingleRegResp()}}
{\footnotesize\ttfamily \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689c}{error\+\_\+t} modbus\+Client\+Parse\+Write\+Single\+Reg\+Resp (\begin{DoxyParamCaption}\item[{\hyperlink{modbus__client_8h_afb534cba0b839b960b7afd907b978713}{Modbus\+Client\+Context} $\ast$}]{context,  }\item[{\hyperlink{stdint_8h_a273cf69d639a59973b6019625df33e30}{uint16\+\_\+t}}]{address,  }\item[{\hyperlink{stdint_8h_a273cf69d639a59973b6019625df33e30}{uint16\+\_\+t}}]{value }\end{DoxyParamCaption})}



Parse Write Single Register response. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em context} & Pointer to the Modbus/\+T\+CP client context \\
\hline
\mbox{\tt in}  & {\em address} & Address of the register to be written \\
\hline
\mbox{\tt in}  & {\em value} & Register value \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Error code 
\end{DoxyReturn}


Definition at line 659 of file modbus\+\_\+client\+\_\+pdu.\+c.


\begin{DoxyCode}
661 \{
662    \textcolor{keywordtype}{size\_t} \hyperlink{dtls__misc_8h_ab43ca82dd7fa2a0e56f941032ef324c4}{length};
663    \hyperlink{modbus__common_8h_a49602e089ca6e7199f5df159e96b129d}{ModbusWriteSingleRegResp} *response;
664 
665    \textcolor{comment}{//Point to the Modbus response PDU}
666    response = \hyperlink{modbus__client__misc_8c_ac190f02d3cb9e1882240d7de4587092a}{modbusClientGetResponsePdu}(context, &length);
667 
668    \textcolor{comment}{//Malformed PDU?}
669    \textcolor{keywordflow}{if}(length < \textcolor{keyword}{sizeof}(\hyperlink{modbus__common_8h_a49602e089ca6e7199f5df159e96b129d}{ModbusWriteSingleRegResp}))
670       \textcolor{keywordflow}{return} \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689cae5c014519c3ac2540447887ddca1bd28}{ERROR\_INVALID\_LENGTH};
671 
672    \textcolor{comment}{//Check function code}
673    \textcolor{keywordflow}{if}(response->functionCode != \hyperlink{modbus__common_8h_a5dc067f13fceb5a2ac4b5d83c997ae0ba0f3b918c28650fb91247afcc40b15c0f}{MODBUS\_FUNCTION\_WRITE\_SINGLE\_REG})
674       \textcolor{keywordflow}{return} \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689cafd5c9c677dc32cd4fb3f620843159ec4}{ERROR\_INVALID\_RESPONSE};
675 
676    \textcolor{comment}{//The normal response is an echo of the request}
677    \textcolor{keywordflow}{if}(\hyperlink{cpu__endian_8h_a9312c6eb72e64f748ae0d0e0dc3ec9b9}{ntohs}(response->regAddr) != \hyperlink{dhcpv6__common_8h_aaee906fadd211e863c2e29a3690b25c4}{address} ||
678       \hyperlink{cpu__endian_8h_a9312c6eb72e64f748ae0d0e0dc3ec9b9}{ntohs}(response->regValue) != \hyperlink{dtls__misc_8h_a74bce8e92ccabd0c885447114a48b80e}{value})
679    \{
680       \textcolor{keywordflow}{return} \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689cafd5c9c677dc32cd4fb3f620843159ec4}{ERROR\_INVALID\_RESPONSE};
681    \}
682 
683    \textcolor{comment}{//Successful processing}
684    \textcolor{keywordflow}{return} \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689cabf350750d0d4fabd8954c0f1e9bbae94}{NO\_ERROR};
685 \}
\end{DoxyCode}
