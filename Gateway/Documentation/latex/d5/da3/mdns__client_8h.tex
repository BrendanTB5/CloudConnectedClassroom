\hypertarget{mdns__client_8h}{}\section{cyclone\+\_\+tcp/mdns/mdns\+\_\+client.h File Reference}
\label{mdns__client_8h}\index{cyclone\+\_\+tcp/mdns/mdns\+\_\+client.\+h@{cyclone\+\_\+tcp/mdns/mdns\+\_\+client.\+h}}


m\+D\+NS client (Multicast D\+NS)  


{\ttfamily \#include \char`\"{}core/net.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}core/socket.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}core/udp.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}dns/dns\+\_\+cache.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}dns/dns\+\_\+common.\+h\char`\"{}}\newline
\subsection*{Macros}
\begin{DoxyCompactItemize}
\item 
\#define \hyperlink{mdns__client_8h_aae613e4576a8e8835474748b30653c92}{M\+D\+N\+S\+\_\+\+C\+L\+I\+E\+N\+T\+\_\+\+S\+U\+P\+P\+O\+RT}~\hyperlink{os__port_8h_abd5c8ab57c190a6522ccdbf0ed7577da}{D\+I\+S\+A\+B\+L\+ED}
\item 
\#define \hyperlink{mdns__client_8h_aa45a2b091a99f115e7d86181acaaad9d}{M\+D\+N\+S\+\_\+\+C\+L\+I\+E\+N\+T\+\_\+\+M\+A\+X\+\_\+\+R\+E\+T\+R\+I\+ES}~3
\item 
\#define \hyperlink{mdns__client_8h_a48168840669f129ac7d6da0b4a7dc388}{M\+D\+N\+S\+\_\+\+C\+L\+I\+E\+N\+T\+\_\+\+I\+N\+I\+T\+\_\+\+T\+I\+M\+E\+O\+UT}~1000
\item 
\#define \hyperlink{mdns__client_8h_a5106d722efd893f3189d9e5ecc96dea1}{M\+D\+N\+S\+\_\+\+C\+L\+I\+E\+N\+T\+\_\+\+M\+A\+X\+\_\+\+T\+I\+M\+E\+O\+UT}~1000
\item 
\#define \hyperlink{mdns__client_8h_aa88fd6cadfc5dc85b0253614ab31b002}{M\+D\+N\+S\+\_\+\+M\+A\+X\+\_\+\+L\+I\+F\+E\+T\+I\+ME}~60000
\end{DoxyCompactItemize}
\subsection*{Functions}
\begin{DoxyCompactItemize}
\item 
\hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689c}{error\+\_\+t} \hyperlink{mdns__client_8h_a0532eb8be56a816f5050773de4320807}{mdns\+Client\+Resolve} (\hyperlink{net_8h_a2234db8911a1148c9159979d8f5e0d6b}{Net\+Interface} $\ast$interface, const \hyperlink{compiler__port_8h_a40bb5262bf908c328fbcfbe5d29d0201}{char\+\_\+t} $\ast$\hyperlink{resource__manager_8h_a26532d7194d592ae8da35222073f36d6}{name}, \hyperlink{socket_8h_ab5e32e6fb9dfb43706584ab98de9a7bd}{Host\+Type} \hyperlink{ppp_8h_a1d127017fb298b889f4ba24752d08b8e}{type}, \hyperlink{structIpAddr}{Ip\+Addr} $\ast$\hyperlink{ipcp_8h_a11542dd5a4de5976a89188df3d53b42d}{ip\+Addr})
\begin{DoxyCompactList}\small\item\em Resolve a host name using m\+D\+NS. \end{DoxyCompactList}\item 
\hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689c}{error\+\_\+t} \hyperlink{mdns__client_8h_a552c202117e19d36b8deaa21b62a9a63}{mdns\+Client\+Send\+Query} (\hyperlink{structDnsCacheEntry}{Dns\+Cache\+Entry} $\ast$entry)
\begin{DoxyCompactList}\small\item\em Send a m\+D\+NS query message. \end{DoxyCompactList}\item 
void \hyperlink{mdns__client_8h_a8ed7df3053e1c0197c4b742ed1ea4f3e}{mdns\+Client\+Parse\+An\+Record} (\hyperlink{net_8h_a2234db8911a1148c9159979d8f5e0d6b}{Net\+Interface} $\ast$interface, const \hyperlink{structMdnsMessage}{Mdns\+Message} $\ast$\hyperlink{pap_8h_a52f19d36a71e9b8ddea38fe00c291181}{message}, size\+\_\+t \hyperlink{pic32mz_2isr__support_8h_ac0542d92dfcd62c19170fd963f9e5052}{offset}, const \hyperlink{dns__common_8h_a801d4a933cd802d56c5450013b4c0969}{Dns\+Resource\+Record} $\ast$record)
\begin{DoxyCompactList}\small\item\em Parse a resource record from the Answer Section. \end{DoxyCompactList}\end{DoxyCompactItemize}


\subsection{Detailed Description}
m\+D\+NS client (Multicast D\+NS) 

\hypertarget{pic32mz__ef__curiosity_8h_License}{}\subsection{License}\label{pic32mz__ef__curiosity_8h_License}
S\+P\+D\+X-\/\+License-\/\+Identifier\+: G\+P\+L-\/2.\+0-\/or-\/later

Copyright (C) 2010-\/2019 Oryx Embedded S\+A\+RL. All rights reserved.

This file is part of Cyclone\+T\+CP Open.

This program is free software; you can redistribute it and/or modify it under the terms of the G\+NU General Public License as published by the Free Software Foundation; either version 2 of the License, or (at your option) any later version.

This program is distributed in the hope that it will be useful, but W\+I\+T\+H\+O\+UT A\+NY W\+A\+R\+R\+A\+N\+TY; without even the implied warranty of M\+E\+R\+C\+H\+A\+N\+T\+A\+B\+I\+L\+I\+TY or F\+I\+T\+N\+E\+SS F\+OR A P\+A\+R\+T\+I\+C\+U\+L\+AR P\+U\+R\+P\+O\+SE. See the G\+NU General Public License for more details.

You should have received a copy of the G\+NU General Public License along with this program; if not, write to the Free Software Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-\/1301, U\+SA.

\begin{DoxyAuthor}{Author}
Oryx Embedded S\+A\+RL (www.\+oryx-\/embedded.\+com) 
\end{DoxyAuthor}
\begin{DoxyVersion}{Version}
1.\+9.\+6 
\end{DoxyVersion}


\subsection{Macro Definition Documentation}
\mbox{\Hypertarget{mdns__client_8h_a48168840669f129ac7d6da0b4a7dc388}\label{mdns__client_8h_a48168840669f129ac7d6da0b4a7dc388}} 
\index{mdns\+\_\+client.\+h@{mdns\+\_\+client.\+h}!M\+D\+N\+S\+\_\+\+C\+L\+I\+E\+N\+T\+\_\+\+I\+N\+I\+T\+\_\+\+T\+I\+M\+E\+O\+UT@{M\+D\+N\+S\+\_\+\+C\+L\+I\+E\+N\+T\+\_\+\+I\+N\+I\+T\+\_\+\+T\+I\+M\+E\+O\+UT}}
\index{M\+D\+N\+S\+\_\+\+C\+L\+I\+E\+N\+T\+\_\+\+I\+N\+I\+T\+\_\+\+T\+I\+M\+E\+O\+UT@{M\+D\+N\+S\+\_\+\+C\+L\+I\+E\+N\+T\+\_\+\+I\+N\+I\+T\+\_\+\+T\+I\+M\+E\+O\+UT}!mdns\+\_\+client.\+h@{mdns\+\_\+client.\+h}}
\subsubsection{\texorpdfstring{M\+D\+N\+S\+\_\+\+C\+L\+I\+E\+N\+T\+\_\+\+I\+N\+I\+T\+\_\+\+T\+I\+M\+E\+O\+UT}{MDNS\_CLIENT\_INIT\_TIMEOUT}}
{\footnotesize\ttfamily \#define M\+D\+N\+S\+\_\+\+C\+L\+I\+E\+N\+T\+\_\+\+I\+N\+I\+T\+\_\+\+T\+I\+M\+E\+O\+UT~1000}



Definition at line 57 of file mdns\+\_\+client.\+h.

\mbox{\Hypertarget{mdns__client_8h_aa45a2b091a99f115e7d86181acaaad9d}\label{mdns__client_8h_aa45a2b091a99f115e7d86181acaaad9d}} 
\index{mdns\+\_\+client.\+h@{mdns\+\_\+client.\+h}!M\+D\+N\+S\+\_\+\+C\+L\+I\+E\+N\+T\+\_\+\+M\+A\+X\+\_\+\+R\+E\+T\+R\+I\+ES@{M\+D\+N\+S\+\_\+\+C\+L\+I\+E\+N\+T\+\_\+\+M\+A\+X\+\_\+\+R\+E\+T\+R\+I\+ES}}
\index{M\+D\+N\+S\+\_\+\+C\+L\+I\+E\+N\+T\+\_\+\+M\+A\+X\+\_\+\+R\+E\+T\+R\+I\+ES@{M\+D\+N\+S\+\_\+\+C\+L\+I\+E\+N\+T\+\_\+\+M\+A\+X\+\_\+\+R\+E\+T\+R\+I\+ES}!mdns\+\_\+client.\+h@{mdns\+\_\+client.\+h}}
\subsubsection{\texorpdfstring{M\+D\+N\+S\+\_\+\+C\+L\+I\+E\+N\+T\+\_\+\+M\+A\+X\+\_\+\+R\+E\+T\+R\+I\+ES}{MDNS\_CLIENT\_MAX\_RETRIES}}
{\footnotesize\ttfamily \#define M\+D\+N\+S\+\_\+\+C\+L\+I\+E\+N\+T\+\_\+\+M\+A\+X\+\_\+\+R\+E\+T\+R\+I\+ES~3}



Definition at line 50 of file mdns\+\_\+client.\+h.

\mbox{\Hypertarget{mdns__client_8h_a5106d722efd893f3189d9e5ecc96dea1}\label{mdns__client_8h_a5106d722efd893f3189d9e5ecc96dea1}} 
\index{mdns\+\_\+client.\+h@{mdns\+\_\+client.\+h}!M\+D\+N\+S\+\_\+\+C\+L\+I\+E\+N\+T\+\_\+\+M\+A\+X\+\_\+\+T\+I\+M\+E\+O\+UT@{M\+D\+N\+S\+\_\+\+C\+L\+I\+E\+N\+T\+\_\+\+M\+A\+X\+\_\+\+T\+I\+M\+E\+O\+UT}}
\index{M\+D\+N\+S\+\_\+\+C\+L\+I\+E\+N\+T\+\_\+\+M\+A\+X\+\_\+\+T\+I\+M\+E\+O\+UT@{M\+D\+N\+S\+\_\+\+C\+L\+I\+E\+N\+T\+\_\+\+M\+A\+X\+\_\+\+T\+I\+M\+E\+O\+UT}!mdns\+\_\+client.\+h@{mdns\+\_\+client.\+h}}
\subsubsection{\texorpdfstring{M\+D\+N\+S\+\_\+\+C\+L\+I\+E\+N\+T\+\_\+\+M\+A\+X\+\_\+\+T\+I\+M\+E\+O\+UT}{MDNS\_CLIENT\_MAX\_TIMEOUT}}
{\footnotesize\ttfamily \#define M\+D\+N\+S\+\_\+\+C\+L\+I\+E\+N\+T\+\_\+\+M\+A\+X\+\_\+\+T\+I\+M\+E\+O\+UT~1000}



Definition at line 64 of file mdns\+\_\+client.\+h.

\mbox{\Hypertarget{mdns__client_8h_aae613e4576a8e8835474748b30653c92}\label{mdns__client_8h_aae613e4576a8e8835474748b30653c92}} 
\index{mdns\+\_\+client.\+h@{mdns\+\_\+client.\+h}!M\+D\+N\+S\+\_\+\+C\+L\+I\+E\+N\+T\+\_\+\+S\+U\+P\+P\+O\+RT@{M\+D\+N\+S\+\_\+\+C\+L\+I\+E\+N\+T\+\_\+\+S\+U\+P\+P\+O\+RT}}
\index{M\+D\+N\+S\+\_\+\+C\+L\+I\+E\+N\+T\+\_\+\+S\+U\+P\+P\+O\+RT@{M\+D\+N\+S\+\_\+\+C\+L\+I\+E\+N\+T\+\_\+\+S\+U\+P\+P\+O\+RT}!mdns\+\_\+client.\+h@{mdns\+\_\+client.\+h}}
\subsubsection{\texorpdfstring{M\+D\+N\+S\+\_\+\+C\+L\+I\+E\+N\+T\+\_\+\+S\+U\+P\+P\+O\+RT}{MDNS\_CLIENT\_SUPPORT}}
{\footnotesize\ttfamily \#define M\+D\+N\+S\+\_\+\+C\+L\+I\+E\+N\+T\+\_\+\+S\+U\+P\+P\+O\+RT~\hyperlink{os__port_8h_abd5c8ab57c190a6522ccdbf0ed7577da}{D\+I\+S\+A\+B\+L\+ED}}



Definition at line 43 of file mdns\+\_\+client.\+h.

\mbox{\Hypertarget{mdns__client_8h_aa88fd6cadfc5dc85b0253614ab31b002}\label{mdns__client_8h_aa88fd6cadfc5dc85b0253614ab31b002}} 
\index{mdns\+\_\+client.\+h@{mdns\+\_\+client.\+h}!M\+D\+N\+S\+\_\+\+M\+A\+X\+\_\+\+L\+I\+F\+E\+T\+I\+ME@{M\+D\+N\+S\+\_\+\+M\+A\+X\+\_\+\+L\+I\+F\+E\+T\+I\+ME}}
\index{M\+D\+N\+S\+\_\+\+M\+A\+X\+\_\+\+L\+I\+F\+E\+T\+I\+ME@{M\+D\+N\+S\+\_\+\+M\+A\+X\+\_\+\+L\+I\+F\+E\+T\+I\+ME}!mdns\+\_\+client.\+h@{mdns\+\_\+client.\+h}}
\subsubsection{\texorpdfstring{M\+D\+N\+S\+\_\+\+M\+A\+X\+\_\+\+L\+I\+F\+E\+T\+I\+ME}{MDNS\_MAX\_LIFETIME}}
{\footnotesize\ttfamily \#define M\+D\+N\+S\+\_\+\+M\+A\+X\+\_\+\+L\+I\+F\+E\+T\+I\+ME~60000}



Definition at line 71 of file mdns\+\_\+client.\+h.



\subsection{Function Documentation}
\mbox{\Hypertarget{mdns__client_8h_a8ed7df3053e1c0197c4b742ed1ea4f3e}\label{mdns__client_8h_a8ed7df3053e1c0197c4b742ed1ea4f3e}} 
\index{mdns\+\_\+client.\+h@{mdns\+\_\+client.\+h}!mdns\+Client\+Parse\+An\+Record@{mdns\+Client\+Parse\+An\+Record}}
\index{mdns\+Client\+Parse\+An\+Record@{mdns\+Client\+Parse\+An\+Record}!mdns\+\_\+client.\+h@{mdns\+\_\+client.\+h}}
\subsubsection{\texorpdfstring{mdns\+Client\+Parse\+An\+Record()}{mdnsClientParseAnRecord()}}
{\footnotesize\ttfamily void mdns\+Client\+Parse\+An\+Record (\begin{DoxyParamCaption}\item[{\hyperlink{net_8h_a2234db8911a1148c9159979d8f5e0d6b}{Net\+Interface} $\ast$}]{interface,  }\item[{const \hyperlink{structMdnsMessage}{Mdns\+Message} $\ast$}]{message,  }\item[{size\+\_\+t}]{offset,  }\item[{const \hyperlink{dns__common_8h_a801d4a933cd802d56c5450013b4c0969}{Dns\+Resource\+Record} $\ast$}]{record }\end{DoxyParamCaption})}



Parse a resource record from the Answer Section. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em interface} & Underlying network interface \\
\hline
\mbox{\tt in}  & {\em message} & Pointer to the m\+D\+NS message \\
\hline
\mbox{\tt in}  & {\em offset} & Offset to first byte of the resource record \\
\hline
\mbox{\tt in}  & {\em record} & Pointer to the resource record \\
\hline
\end{DoxyParams}


Definition at line 258 of file mdns\+\_\+client.\+c.


\begin{DoxyCode}
260 \{
261    \hyperlink{compiler__port_8h_a12a1e9b3ce141648783a82445d02b58d}{uint\_t} i;
262    \hyperlink{stdint_8h_a273cf69d639a59973b6019625df33e30}{uint16\_t} \hyperlink{dns__common_8h_ab71c0274cba7f2fc8f94ded11b72917a}{rclass};
263    \hyperlink{structDnsCacheEntry}{DnsCacheEntry} *entry;
264 
265    \textcolor{comment}{//Loop through DNS cache entries}
266    \textcolor{keywordflow}{for}(i = 0; i < \hyperlink{dns__cache_8h_a0559240be0228278dd24ac2103aa0c66}{DNS\_CACHE\_SIZE}; i++)
267    \{
268       \textcolor{comment}{//Point to the current entry}
269       entry = &\hyperlink{dns__cache_8c_a459576a3a6c3ed0c90f544dabacc8377}{dnsCache}[i];
270 
271       \textcolor{comment}{//mDNS name resolution in progress?}
272       \textcolor{keywordflow}{if}(entry->\hyperlink{structDnsCacheEntry_ac0f0a02b2f1fece9d83ec3345bb618c0}{state} == \hyperlink{dns__cache_8h_a57ef307e25adab4205cf584115875ef3affcd994aeea92ea47ae5be4f6a2f7511}{DNS\_STATE\_IN\_PROGRESS} &&
273          entry->\hyperlink{structDnsCacheEntry_aeb800b57a9593f4749e3ae8ac03f4a71}{protocol} == \hyperlink{socket_8h_adb58068eb0cfd0e54798ac480eb19f94a9e9dee333128d92abfcdb6d58f2b7cb4}{HOST\_NAME\_RESOLVER\_MDNS})
274       \{
275          \textcolor{comment}{//Compare resource record name}
276          \textcolor{keywordflow}{if}(!\hyperlink{dns__common_8c_a09647d0528e53280cc0a35866cb2b224}{dnsCompareName}(message->\hyperlink{structMdnsMessage_ac5ab08c143472d040db637c76c972cab}{dnsHeader}, message->
      \hyperlink{structMdnsMessage_ad1ebbfad05745924fdeee3389f270e52}{length}, \hyperlink{pic32mz_2isr__support_8h_a12a5aed8a193ebbf9a641104a310610d}{offset}, entry->\hyperlink{structDnsCacheEntry_a81b2ed3b8465dd82a249f7141865dae6}{name}, 0))
277          \{
278             \textcolor{comment}{//Convert the class to host byte order}
279             rclass = \hyperlink{cpu__endian_8h_a9312c6eb72e64f748ae0d0e0dc3ec9b9}{ntohs}(record->rclass);
280             \textcolor{comment}{//Discard Cache Flush flag}
281             rclass &= ~\hyperlink{mdns__common_8h_ac8f63bafad3fb67887a45586c82f71e9}{MDNS\_RCLASS\_CACHE\_FLUSH};
282 
283             \textcolor{comment}{//Check the class of the resource record}
284             \textcolor{keywordflow}{if}(rclass == \hyperlink{dns__common_8h_aa541e7289dae8934f7f37e74c15cc5a5ae4d96c0329f035328ba190627f2782e9}{DNS\_RR\_CLASS\_IN})
285             \{
286 \textcolor{preprocessor}{#if (IPV4\_SUPPORT == ENABLED)}
287                \textcolor{comment}{//IPv4 address expected?}
288                \textcolor{keywordflow}{if}(entry->\hyperlink{structDnsCacheEntry_a5520082c9b81d8244f858641785ac01e}{type} == \hyperlink{socket_8h_ab5e32e6fb9dfb43706584ab98de9a7bdaebe58bd51c617e7f9024189e369dc8e9}{HOST\_TYPE\_IPV4})
289                \{
290                   \textcolor{comment}{//A resource record found?}
291                   \textcolor{keywordflow}{if}(\hyperlink{cpu__endian_8h_a9312c6eb72e64f748ae0d0e0dc3ec9b9}{ntohs}(record->rtype) == \hyperlink{dns__common_8h_aa24a9fb31b6fb3858a24a8d8682e23d1a420fd47ef427589e0f1961e35b46756b}{DNS\_RR\_TYPE\_A})
292                   \{
293                      \textcolor{comment}{//Verify the length of the data field}
294                      \textcolor{keywordflow}{if}(\hyperlink{cpu__endian_8h_a9312c6eb72e64f748ae0d0e0dc3ec9b9}{ntohs}(record->rdlength) == \textcolor{keyword}{sizeof}(\hyperlink{ipv4_8h_a411debb3d770caa0c06d3f73367da37f}{Ipv4Addr}))
295                      \{
296                         \textcolor{comment}{//Copy the IPv4 address}
297                         entry->\hyperlink{structDnsCacheEntry_aad3958e8dcdeb2eea1a99089b2a8f5b1}{ipAddr}.\hyperlink{structIpAddr_ae61478bd1e79361fca7dd04a21aeb2f8}{length} = \textcolor{keyword}{sizeof}(\hyperlink{ipv4_8h_a411debb3d770caa0c06d3f73367da37f}{Ipv4Addr});
298                         \hyperlink{ipv4_8h_a36a3af47ec7eec9b1781964eb0494b6f}{ipv4CopyAddr}(&entry->\hyperlink{structDnsCacheEntry_aad3958e8dcdeb2eea1a99089b2a8f5b1}{ipAddr}.\hyperlink{structIpAddr_a8de6f49cb0461f57c1eda49bb1088916}{ipv4Addr}, record->rdata);
299 
300                         \textcolor{comment}{//Save current time}
301                         entry->\hyperlink{structDnsCacheEntry_ae149514d2ade99ae033ecedd03a5daf0}{timestamp} = \hyperlink{os__port__chibios_8c_ab66a11272d40a916fa69dd8e4dc443d4}{osGetSystemTime}();
302                         \textcolor{comment}{//Save TTL value}
303                         entry->\hyperlink{structDnsCacheEntry_a5bf3981653624c3e313f7f364b526cdb}{timeout} = \hyperlink{cpu__endian_8h_a22f92ea3318059b7d88dfbd98d0cbc3e}{ntohl}(record->ttl) * 1000;
304                         \textcolor{comment}{//Limit the lifetime of the mDNS cache entries}
305                         entry->\hyperlink{structDnsCacheEntry_a5bf3981653624c3e313f7f364b526cdb}{timeout} = \hyperlink{os__port_8h_a3acffbd305ee72dcd4593c0d8af64a4f}{MIN}(entry->\hyperlink{structDnsCacheEntry_a5bf3981653624c3e313f7f364b526cdb}{timeout}, 
      \hyperlink{mdns__client_8h_aa88fd6cadfc5dc85b0253614ab31b002}{MDNS\_MAX\_LIFETIME});
306 
307                         \textcolor{comment}{//Host name successfully resolved}
308                         entry->\hyperlink{structDnsCacheEntry_ac0f0a02b2f1fece9d83ec3345bb618c0}{state} = \hyperlink{dns__cache_8h_a57ef307e25adab4205cf584115875ef3a29c9441f0fda002de6ba63d19b20f334}{DNS\_STATE\_RESOLVED};
309                      \}
310                   \}
311                \}
312 \textcolor{preprocessor}{#endif}
313 \textcolor{preprocessor}{#if (IPV6\_SUPPORT == ENABLED)}
314                \textcolor{comment}{//IPv6 address expected?}
315                \textcolor{keywordflow}{if}(entry->\hyperlink{structDnsCacheEntry_a5520082c9b81d8244f858641785ac01e}{type} == \hyperlink{socket_8h_ab5e32e6fb9dfb43706584ab98de9a7bdaa1f89753ef33b5e8efcc253208e11c61}{HOST\_TYPE\_IPV6})
316                \{
317                   \textcolor{comment}{//AAAA resource record found?}
318                   \textcolor{keywordflow}{if}(\hyperlink{cpu__endian_8h_a9312c6eb72e64f748ae0d0e0dc3ec9b9}{ntohs}(record->rtype) == \hyperlink{dns__common_8h_aa24a9fb31b6fb3858a24a8d8682e23d1a4d0fc3b547030a6a0f32b3ca455927fe}{DNS\_RR\_TYPE\_AAAA})
319                   \{
320                      \textcolor{comment}{//Verify the length of the data field}
321                      \textcolor{keywordflow}{if}(\hyperlink{cpu__endian_8h_a9312c6eb72e64f748ae0d0e0dc3ec9b9}{ntohs}(record->rdlength) == \textcolor{keyword}{sizeof}(\hyperlink{ipv6_8h_aed0cbc40c61ed5b4fb681ebc55237e89}{Ipv6Addr}))
322                      \{
323                         \textcolor{comment}{//Copy the IPv6 address}
324                         entry->\hyperlink{structDnsCacheEntry_aad3958e8dcdeb2eea1a99089b2a8f5b1}{ipAddr}.\hyperlink{structIpAddr_ae61478bd1e79361fca7dd04a21aeb2f8}{length} = \textcolor{keyword}{sizeof}(\hyperlink{ipv6_8h_aed0cbc40c61ed5b4fb681ebc55237e89}{Ipv6Addr});
325                         \hyperlink{ipv6_8h_ac22b1fcd381d1c288e269cb8d164bfec}{ipv6CopyAddr}(&entry->\hyperlink{structDnsCacheEntry_aad3958e8dcdeb2eea1a99089b2a8f5b1}{ipAddr}.\hyperlink{structIpAddr_a9bc2340a9c0bc5a0b8aa9695b74e2ee6}{ipv6Addr}, record->rdata);
326 
327                         \textcolor{comment}{//Save current time}
328                         entry->\hyperlink{structDnsCacheEntry_ae149514d2ade99ae033ecedd03a5daf0}{timestamp} = \hyperlink{os__port__chibios_8c_ab66a11272d40a916fa69dd8e4dc443d4}{osGetSystemTime}();
329                         \textcolor{comment}{//Save TTL value}
330                         entry->\hyperlink{structDnsCacheEntry_a5bf3981653624c3e313f7f364b526cdb}{timeout} = \hyperlink{cpu__endian_8h_a22f92ea3318059b7d88dfbd98d0cbc3e}{ntohl}(record->ttl) * 1000;
331                         \textcolor{comment}{//Limit the lifetime of the mDNS cache entries}
332                         entry->\hyperlink{structDnsCacheEntry_a5bf3981653624c3e313f7f364b526cdb}{timeout} = \hyperlink{os__port_8h_a3acffbd305ee72dcd4593c0d8af64a4f}{MIN}(entry->\hyperlink{structDnsCacheEntry_a5bf3981653624c3e313f7f364b526cdb}{timeout}, 
      \hyperlink{mdns__client_8h_aa88fd6cadfc5dc85b0253614ab31b002}{MDNS\_MAX\_LIFETIME});
333 
334                         \textcolor{comment}{//Host name successfully resolved}
335                         entry->\hyperlink{structDnsCacheEntry_ac0f0a02b2f1fece9d83ec3345bb618c0}{state} = \hyperlink{dns__cache_8h_a57ef307e25adab4205cf584115875ef3a29c9441f0fda002de6ba63d19b20f334}{DNS\_STATE\_RESOLVED};
336                      \}
337                   \}
338                \}
339 \textcolor{preprocessor}{#endif}
340             \}
341          \}
342       \}
343    \}
344 \}
\end{DoxyCode}
\mbox{\Hypertarget{mdns__client_8h_a0532eb8be56a816f5050773de4320807}\label{mdns__client_8h_a0532eb8be56a816f5050773de4320807}} 
\index{mdns\+\_\+client.\+h@{mdns\+\_\+client.\+h}!mdns\+Client\+Resolve@{mdns\+Client\+Resolve}}
\index{mdns\+Client\+Resolve@{mdns\+Client\+Resolve}!mdns\+\_\+client.\+h@{mdns\+\_\+client.\+h}}
\subsubsection{\texorpdfstring{mdns\+Client\+Resolve()}{mdnsClientResolve()}}
{\footnotesize\ttfamily \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689c}{error\+\_\+t} mdns\+Client\+Resolve (\begin{DoxyParamCaption}\item[{\hyperlink{net_8h_a2234db8911a1148c9159979d8f5e0d6b}{Net\+Interface} $\ast$}]{interface,  }\item[{const \hyperlink{compiler__port_8h_a40bb5262bf908c328fbcfbe5d29d0201}{char\+\_\+t} $\ast$}]{name,  }\item[{\hyperlink{socket_8h_ab5e32e6fb9dfb43706584ab98de9a7bd}{Host\+Type}}]{type,  }\item[{\hyperlink{structIpAddr}{Ip\+Addr} $\ast$}]{ip\+Addr }\end{DoxyParamCaption})}



Resolve a host name using m\+D\+NS. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em interface} & Underlying network interface \\
\hline
\mbox{\tt in}  & {\em name} & Name of the host to be resolved \\
\hline
\mbox{\tt in}  & {\em type} & Host type (I\+Pv4 or I\+Pv6) \\
\hline
\mbox{\tt out}  & {\em ip\+Addr} & IP address corresponding to the specified host name \\
\hline
\end{DoxyParams}


Definition at line 56 of file mdns\+\_\+client.\+c.


\begin{DoxyCode}
58 \{
59    \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689c}{error\_t} error;
60    \hyperlink{structDnsCacheEntry}{DnsCacheEntry} *entry;
61 
62 \textcolor{preprocessor}{#if (NET\_RTOS\_SUPPORT == ENABLED)}
63    \hyperlink{compiler__port_8h_ae3e32a98d431a02106616da3071832dd}{systime\_t} delay;
64 
65    \textcolor{comment}{//Debug message}
66    \hyperlink{debug_8h_a7339bfd784193a5c79efcef2eeb2d6df}{TRACE\_INFO}(\textcolor{stringliteral}{"Resolving host name %s (mDNS resolver)...\(\backslash\)r\(\backslash\)n"}, \hyperlink{resource__manager_8h_a26532d7194d592ae8da35222073f36d6}{name});
67 \textcolor{preprocessor}{#endif}
68 
69    \textcolor{comment}{//Get exclusive access}
70    \hyperlink{os__port__chibios_8c_a58485224df4bfa522246d55b35bbd83a}{osAcquireMutex}(&\hyperlink{net_8c_afe31551ad26115fae8e575654346d441}{netMutex});
71 
72    \textcolor{comment}{//Search the DNS cache for the specified host name}
73    entry = \hyperlink{dns__cache_8c_a079712e25d65a0e902068e6fea3141ae}{dnsFindEntry}(interface, \hyperlink{resource__manager_8h_a26532d7194d592ae8da35222073f36d6}{name}, \hyperlink{resource__manager_8h_a12e46a33bfe90638e58ef067c6fd4a6e}{type}, 
      \hyperlink{socket_8h_adb58068eb0cfd0e54798ac480eb19f94a9e9dee333128d92abfcdb6d58f2b7cb4}{HOST\_NAME\_RESOLVER\_MDNS});
74 
75    \textcolor{comment}{//Check whether a matching entry has been found}
76    \textcolor{keywordflow}{if}(entry)
77    \{
78       \textcolor{comment}{//Host name already resolved?}
79       \textcolor{keywordflow}{if}(entry->\hyperlink{structDnsCacheEntry_ac0f0a02b2f1fece9d83ec3345bb618c0}{state} == \hyperlink{dns__cache_8h_a57ef307e25adab4205cf584115875ef3a29c9441f0fda002de6ba63d19b20f334}{DNS\_STATE\_RESOLVED} ||
80          entry->\hyperlink{structDnsCacheEntry_ac0f0a02b2f1fece9d83ec3345bb618c0}{state} == \hyperlink{dns__cache_8h_a57ef307e25adab4205cf584115875ef3ada34e46aacf8dc68d5c86add93157ea2}{DNS\_STATE\_PERMANENT})
81       \{
82          \textcolor{comment}{//Return the corresponding IP address}
83          *ipAddr = entry->\hyperlink{structDnsCacheEntry_aad3958e8dcdeb2eea1a99089b2a8f5b1}{ipAddr};
84          \textcolor{comment}{//Successful host name resolution}
85          error = \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689cabf350750d0d4fabd8954c0f1e9bbae94}{NO\_ERROR};
86       \}
87       \textcolor{keywordflow}{else}
88       \{
89          \textcolor{comment}{//Host name resolution is in progress...}
90          error = \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689ca14596397b69ee6fd1d74ca77fb55e186}{ERROR\_IN\_PROGRESS};
91       \}
92    \}
93    \textcolor{keywordflow}{else}
94    \{
95       \textcolor{comment}{//If no entry exists, then create a new one}
96       entry = \hyperlink{dns__cache_8c_ac154126efa899c325ee537727c9f5174}{dnsCreateEntry}();
97 
98       \textcolor{comment}{//Record the host name whose IP address is unknown}
99       strcpy(entry->\hyperlink{structDnsCacheEntry_a81b2ed3b8465dd82a249f7141865dae6}{name}, \hyperlink{resource__manager_8h_a26532d7194d592ae8da35222073f36d6}{name});
100 
101       \textcolor{comment}{//Initialize DNS cache entry}
102       entry->\hyperlink{structDnsCacheEntry_a5520082c9b81d8244f858641785ac01e}{type} = \hyperlink{resource__manager_8h_a12e46a33bfe90638e58ef067c6fd4a6e}{type};
103       entry->\hyperlink{structDnsCacheEntry_aeb800b57a9593f4749e3ae8ac03f4a71}{protocol} = \hyperlink{socket_8h_adb58068eb0cfd0e54798ac480eb19f94a9e9dee333128d92abfcdb6d58f2b7cb4}{HOST\_NAME\_RESOLVER\_MDNS};
104       entry->\hyperlink{structDnsCacheEntry_ad0d0a0228fc29308f59f4b2d402758e6}{interface} = interface;
105 
106       \textcolor{comment}{//Initialize retransmission counter}
107       entry->\hyperlink{structDnsCacheEntry_aa1813da7ebe162f069a6079aa2365db1}{retransmitCount} = \hyperlink{mdns__client_8h_aa45a2b091a99f115e7d86181acaaad9d}{MDNS\_CLIENT\_MAX\_RETRIES};
108       \textcolor{comment}{//Send mDNS query}
109       error = \hyperlink{mdns__client_8c_a552c202117e19d36b8deaa21b62a9a63}{mdnsClientSendQuery}(entry);
110 
111       \textcolor{comment}{//mDNS message successfully sent?}
112       \textcolor{keywordflow}{if}(!error)
113       \{
114          \textcolor{comment}{//Save the time at which the query message was sent}
115          entry->\hyperlink{structDnsCacheEntry_ae149514d2ade99ae033ecedd03a5daf0}{timestamp} = \hyperlink{os__port__chibios_8c_ab66a11272d40a916fa69dd8e4dc443d4}{osGetSystemTime}();
116          \textcolor{comment}{//Set timeout value}
117          entry->\hyperlink{structDnsCacheEntry_a5bf3981653624c3e313f7f364b526cdb}{timeout} = \hyperlink{mdns__client_8h_a48168840669f129ac7d6da0b4a7dc388}{MDNS\_CLIENT\_INIT\_TIMEOUT};
118          entry->\hyperlink{structDnsCacheEntry_a4167197fb96cd19e4efdcd25184749c1}{maxTimeout} = \hyperlink{mdns__client_8h_a5106d722efd893f3189d9e5ecc96dea1}{MDNS\_CLIENT\_MAX\_TIMEOUT};
119          \textcolor{comment}{//Decrement retransmission counter}
120          entry->\hyperlink{structDnsCacheEntry_aa1813da7ebe162f069a6079aa2365db1}{retransmitCount}--;
121 
122          \textcolor{comment}{//Switch state}
123          entry->\hyperlink{structDnsCacheEntry_ac0f0a02b2f1fece9d83ec3345bb618c0}{state} = \hyperlink{dns__cache_8h_a57ef307e25adab4205cf584115875ef3affcd994aeea92ea47ae5be4f6a2f7511}{DNS\_STATE\_IN\_PROGRESS};
124          \textcolor{comment}{//Host name resolution is in progress}
125          error = \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689ca14596397b69ee6fd1d74ca77fb55e186}{ERROR\_IN\_PROGRESS};
126       \}
127    \}
128 
129    \textcolor{comment}{//Release exclusive access}
130    \hyperlink{os__port__chibios_8c_a8e10e5b2c6d3877b5ba60e375ac45d79}{osReleaseMutex}(&\hyperlink{net_8c_afe31551ad26115fae8e575654346d441}{netMutex});
131 
132 \textcolor{preprocessor}{#if (NET\_RTOS\_SUPPORT == ENABLED)}
133    \textcolor{comment}{//Set default polling interval}
134    delay = \hyperlink{dns__cache_8h_a437dbba366682cad097edc5d6e463d06}{DNS\_CACHE\_INIT\_POLLING\_INTERVAL};
135 
136    \textcolor{comment}{//Wait the host name resolution to complete}
137    \textcolor{keywordflow}{while}(error == \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689ca14596397b69ee6fd1d74ca77fb55e186}{ERROR\_IN\_PROGRESS})
138    \{
139       \textcolor{comment}{//Wait until the next polling period}
140       \hyperlink{os__port__chibios_8c_a69608590db97c707277aebf15be010e5}{osDelayTask}(delay);
141 
142       \textcolor{comment}{//Get exclusive access}
143       \hyperlink{os__port__chibios_8c_a58485224df4bfa522246d55b35bbd83a}{osAcquireMutex}(&\hyperlink{net_8c_afe31551ad26115fae8e575654346d441}{netMutex});
144 
145       \textcolor{comment}{//Search the DNS cache for the specified host name}
146       entry = \hyperlink{dns__cache_8c_a079712e25d65a0e902068e6fea3141ae}{dnsFindEntry}(interface, \hyperlink{resource__manager_8h_a26532d7194d592ae8da35222073f36d6}{name}, \hyperlink{resource__manager_8h_a12e46a33bfe90638e58ef067c6fd4a6e}{type}, 
      \hyperlink{socket_8h_adb58068eb0cfd0e54798ac480eb19f94a9e9dee333128d92abfcdb6d58f2b7cb4}{HOST\_NAME\_RESOLVER\_MDNS});
147 
148       \textcolor{comment}{//Check whether a matching entry has been found}
149       \textcolor{keywordflow}{if}(entry)
150       \{
151          \textcolor{comment}{//Host name successfully resolved?}
152          \textcolor{keywordflow}{if}(entry->\hyperlink{structDnsCacheEntry_ac0f0a02b2f1fece9d83ec3345bb618c0}{state} == \hyperlink{dns__cache_8h_a57ef307e25adab4205cf584115875ef3a29c9441f0fda002de6ba63d19b20f334}{DNS\_STATE\_RESOLVED})
153          \{
154             \textcolor{comment}{//Return the corresponding IP address}
155             *ipAddr = entry->\hyperlink{structDnsCacheEntry_aad3958e8dcdeb2eea1a99089b2a8f5b1}{ipAddr};
156             \textcolor{comment}{//Successful host name resolution}
157             error = \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689cabf350750d0d4fabd8954c0f1e9bbae94}{NO\_ERROR};
158          \}
159       \}
160       \textcolor{keywordflow}{else}
161       \{
162          \textcolor{comment}{//Host name resolution failed}
163          error = \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689cae9be6449970fca5714ab9957b16562a5}{ERROR\_FAILURE};
164       \}
165 
166       \textcolor{comment}{//Release exclusive access}
167       \hyperlink{os__port__chibios_8c_a8e10e5b2c6d3877b5ba60e375ac45d79}{osReleaseMutex}(&\hyperlink{net_8c_afe31551ad26115fae8e575654346d441}{netMutex});
168 
169       \textcolor{comment}{//Backoff support for less aggressive polling}
170       delay = \hyperlink{os__port_8h_a3acffbd305ee72dcd4593c0d8af64a4f}{MIN}(delay * 2, \hyperlink{dns__cache_8h_aec92c7ec467dd08af86f9b5c77473b0e}{DNS\_CACHE\_MAX\_POLLING\_INTERVAL});
171    \}
172 
173    \textcolor{comment}{//Check status code}
174    \textcolor{keywordflow}{if}(error)
175    \{
176       \textcolor{comment}{//Failed to resolve host name}
177       \hyperlink{debug_8h_a7339bfd784193a5c79efcef2eeb2d6df}{TRACE\_INFO}(\textcolor{stringliteral}{"Host name resolution failed!\(\backslash\)r\(\backslash\)n"});
178    \}
179    \textcolor{keywordflow}{else}
180    \{
181       \textcolor{comment}{//Successful host name resolution}
182       \hyperlink{debug_8h_a7339bfd784193a5c79efcef2eeb2d6df}{TRACE\_INFO}(\textcolor{stringliteral}{"Host name resolved to %s...\(\backslash\)r\(\backslash\)n"}, \hyperlink{ip_8c_aecdb577de79f65f8c814d5f101c7c6ae}{ipAddrToString}(ipAddr, 
      \hyperlink{group__BSPDefine_ga070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL}));
183    \}
184 \textcolor{preprocessor}{#endif}
185 
186    \textcolor{comment}{//Return status code}
187    \textcolor{keywordflow}{return} error;
188 \}
\end{DoxyCode}
\mbox{\Hypertarget{mdns__client_8h_a552c202117e19d36b8deaa21b62a9a63}\label{mdns__client_8h_a552c202117e19d36b8deaa21b62a9a63}} 
\index{mdns\+\_\+client.\+h@{mdns\+\_\+client.\+h}!mdns\+Client\+Send\+Query@{mdns\+Client\+Send\+Query}}
\index{mdns\+Client\+Send\+Query@{mdns\+Client\+Send\+Query}!mdns\+\_\+client.\+h@{mdns\+\_\+client.\+h}}
\subsubsection{\texorpdfstring{mdns\+Client\+Send\+Query()}{mdnsClientSendQuery()}}
{\footnotesize\ttfamily \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689c}{error\+\_\+t} mdns\+Client\+Send\+Query (\begin{DoxyParamCaption}\item[{\hyperlink{structDnsCacheEntry}{Dns\+Cache\+Entry} $\ast$}]{entry }\end{DoxyParamCaption})}



Send a m\+D\+NS query message. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em entry} & Pointer to a valid D\+NS cache entry \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Error code 
\end{DoxyReturn}


Definition at line 197 of file mdns\+\_\+client.\+c.


\begin{DoxyCode}
198 \{
199    \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689c}{error\_t} error;
200    \hyperlink{dns__common_8h_ac1ef063cc8bc932118463092c282f188}{DnsQuestion} *dnsQuestion;
201    \hyperlink{structMdnsMessage}{MdnsMessage} \hyperlink{chap_8h_a52f19d36a71e9b8ddea38fe00c291181}{message};
202 
203    \textcolor{comment}{//Create an empty mDNS query message}
204    error = \hyperlink{mdns__common_8c_a5c5005850cf4d8dd089bbd62641aa9ba}{mdnsCreateMessage}(&message, \hyperlink{os__port_8h_aa93f0eb578d23995850d61f7d61c55c1}{FALSE});
205    \textcolor{comment}{//Any error to report?}
206    \textcolor{keywordflow}{if}(error)
207       \textcolor{keywordflow}{return} error;
208 
209    \textcolor{comment}{//Encode the host name using the DNS name notation}
210    message.\hyperlink{structMdnsMessage_ad1ebbfad05745924fdeee3389f270e52}{length} += \hyperlink{dns__common_8c_aa375505b90ab1f2473b3084c97ace370}{dnsEncodeName}(entry->\hyperlink{structDnsCacheEntry_a81b2ed3b8465dd82a249f7141865dae6}{name}, message.
      \hyperlink{structMdnsMessage_ac5ab08c143472d040db637c76c972cab}{dnsHeader}->questions);
211 
212    \textcolor{comment}{//Point to the corresponding question structure}
213    dnsQuestion = \hyperlink{dns__common_8h_a66ca704f3f850dcbb2f3ceefe90afcc5}{DNS\_GET\_QUESTION}(message.\hyperlink{structMdnsMessage_ac5ab08c143472d040db637c76c972cab}{dnsHeader}, message.
      \hyperlink{structMdnsMessage_ad1ebbfad05745924fdeee3389f270e52}{length});
214 
215 \textcolor{preprocessor}{#if (IPV4\_SUPPORT == ENABLED)}
216    \textcolor{comment}{//An IPv4 address is expected?}
217    \textcolor{keywordflow}{if}(entry->\hyperlink{structDnsCacheEntry_a5520082c9b81d8244f858641785ac01e}{type} == \hyperlink{socket_8h_ab5e32e6fb9dfb43706584ab98de9a7bdaebe58bd51c617e7f9024189e369dc8e9}{HOST\_TYPE\_IPV4})
218    \{
219       \textcolor{comment}{//Fill in question structure}
220       dnsQuestion->qtype = \hyperlink{cpu__endian_8h_a15540dbaeee98b6df80805f92e2f6759}{HTONS}(\hyperlink{dns__common_8h_aa24a9fb31b6fb3858a24a8d8682e23d1a420fd47ef427589e0f1961e35b46756b}{DNS\_RR\_TYPE\_A});
221       dnsQuestion->qclass = \hyperlink{cpu__endian_8h_a15540dbaeee98b6df80805f92e2f6759}{HTONS}(\hyperlink{dns__common_8h_aa541e7289dae8934f7f37e74c15cc5a5ae4d96c0329f035328ba190627f2782e9}{DNS\_RR\_CLASS\_IN});
222    \}
223 \textcolor{preprocessor}{#endif}
224 \textcolor{preprocessor}{#if (IPV6\_SUPPORT == ENABLED)}
225    \textcolor{comment}{//An IPv6 address is expected?}
226    \textcolor{keywordflow}{if}(entry->\hyperlink{structDnsCacheEntry_a5520082c9b81d8244f858641785ac01e}{type} == \hyperlink{socket_8h_ab5e32e6fb9dfb43706584ab98de9a7bdaa1f89753ef33b5e8efcc253208e11c61}{HOST\_TYPE\_IPV6})
227    \{
228       \textcolor{comment}{//Fill in question structure}
229       dnsQuestion->qtype = \hyperlink{cpu__endian_8h_a15540dbaeee98b6df80805f92e2f6759}{HTONS}(\hyperlink{dns__common_8h_aa24a9fb31b6fb3858a24a8d8682e23d1a4d0fc3b547030a6a0f32b3ca455927fe}{DNS\_RR\_TYPE\_AAAA});
230       dnsQuestion->qclass = \hyperlink{cpu__endian_8h_a15540dbaeee98b6df80805f92e2f6759}{HTONS}(\hyperlink{dns__common_8h_aa541e7289dae8934f7f37e74c15cc5a5ae4d96c0329f035328ba190627f2782e9}{DNS\_RR\_CLASS\_IN});
231    \}
232 \textcolor{preprocessor}{#endif}
233 
234    \textcolor{comment}{//Update the length of the mDNS query message}
235    message.\hyperlink{structMdnsMessage_ad1ebbfad05745924fdeee3389f270e52}{length} += \textcolor{keyword}{sizeof}(\hyperlink{dns__common_8h_ac1ef063cc8bc932118463092c282f188}{DnsQuestion});
236    \textcolor{comment}{//Number of questions in the Question Section}
237    message.\hyperlink{structMdnsMessage_ac5ab08c143472d040db637c76c972cab}{dnsHeader}->qdcount = 1;
238 
239    \textcolor{comment}{//Send mDNS message}
240    error = \hyperlink{mdns__common_8c_ae9c33998a8a019066d4da724a80f6674}{mdnsSendMessage}(entry->\hyperlink{structDnsCacheEntry_ad0d0a0228fc29308f59f4b2d402758e6}{interface}, &message, 
      \hyperlink{group__BSPDefine_ga070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL}, \hyperlink{mdns__common_8h_ab16900c77e60e00f401b684c45a37c34}{MDNS\_PORT});
241 
242    \textcolor{comment}{//Free previously allocated memory}
243    \hyperlink{mdns__common_8c_a07a3be8974e6aa1ec47c6364a9ddaafd}{mdnsDeleteMessage}(&message);
244 
245    \textcolor{comment}{//Return status code}
246    \textcolor{keywordflow}{return} error;
247 \}
\end{DoxyCode}
