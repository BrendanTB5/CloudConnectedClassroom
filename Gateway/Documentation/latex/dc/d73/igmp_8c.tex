\hypertarget{igmp_8c}{}\section{cyclone\+\_\+tcp/ipv4/igmp.c File Reference}
\label{igmp_8c}\index{cyclone\+\_\+tcp/ipv4/igmp.\+c@{cyclone\+\_\+tcp/ipv4/igmp.\+c}}


I\+G\+MP (Internet Group Management Protocol)  


{\ttfamily \#include \char`\"{}core/net.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}core/ip.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}ipv4/ipv4.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}ipv4/igmp.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}debug.\+h\char`\"{}}\newline
\subsection*{Macros}
\begin{DoxyCompactItemize}
\item 
\#define \hyperlink{igmp_8c_afcdf5e66fd927a7f4cc64295acd20407}{T\+R\+A\+C\+E\+\_\+\+L\+E\+V\+EL}~\hyperlink{net__config_8h_a6fb58fa24260d1cd348bf55a22154c6a}{I\+G\+M\+P\+\_\+\+T\+R\+A\+C\+E\+\_\+\+L\+E\+V\+EL}
\end{DoxyCompactItemize}
\subsection*{Functions}
\begin{DoxyCompactItemize}
\item 
\hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689c}{error\+\_\+t} \hyperlink{igmp_8c_a00733854143421278db466a47576761a}{igmp\+Init} (\hyperlink{net_8h_a2234db8911a1148c9159979d8f5e0d6b}{Net\+Interface} $\ast$interface)
\begin{DoxyCompactList}\small\item\em I\+G\+MP initialization. \end{DoxyCompactList}\item 
\hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689c}{error\+\_\+t} \hyperlink{igmp_8c_a21c3e7c72469bf08cd853cca95909a4c}{igmp\+Join\+Group} (\hyperlink{net_8h_a2234db8911a1148c9159979d8f5e0d6b}{Net\+Interface} $\ast$interface, \hyperlink{structIpv4FilterEntry}{Ipv4\+Filter\+Entry} $\ast$entry)
\begin{DoxyCompactList}\small\item\em Join the specified host group. \end{DoxyCompactList}\item 
\hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689c}{error\+\_\+t} \hyperlink{igmp_8c_a14366b34311d9e6995f3e2f5aec456b6}{igmp\+Leave\+Group} (\hyperlink{net_8h_a2234db8911a1148c9159979d8f5e0d6b}{Net\+Interface} $\ast$interface, \hyperlink{structIpv4FilterEntry}{Ipv4\+Filter\+Entry} $\ast$entry)
\begin{DoxyCompactList}\small\item\em Leave the specified host group. \end{DoxyCompactList}\item 
void \hyperlink{igmp_8c_af842aaa35305590982d9db0e762ccdb7}{igmp\+Tick} (\hyperlink{net_8h_a2234db8911a1148c9159979d8f5e0d6b}{Net\+Interface} $\ast$interface)
\begin{DoxyCompactList}\small\item\em I\+G\+MP timer handler. \end{DoxyCompactList}\item 
void \hyperlink{igmp_8c_a2dde2038b4e2c63a290b7d655e3d2e76}{igmp\+Link\+Change\+Event} (\hyperlink{net_8h_a2234db8911a1148c9159979d8f5e0d6b}{Net\+Interface} $\ast$interface)
\begin{DoxyCompactList}\small\item\em Callback function for link change event. \end{DoxyCompactList}\item 
void \hyperlink{igmp_8c_a43178cad85b82edfc42b5be0b2d61817}{igmp\+Process\+Message} (\hyperlink{net_8h_a2234db8911a1148c9159979d8f5e0d6b}{Net\+Interface} $\ast$interface, const \hyperlink{structNetBuffer}{Net\+Buffer} $\ast$buffer, size\+\_\+t \hyperlink{pic32mz_2isr__support_8h_ac0542d92dfcd62c19170fd963f9e5052}{offset})
\begin{DoxyCompactList}\small\item\em Process incoming I\+G\+MP message. \end{DoxyCompactList}\item 
void \hyperlink{igmp_8c_a678eec35b7c89d03f133069cb9202241}{igmp\+Process\+Query\+Message} (\hyperlink{net_8h_a2234db8911a1148c9159979d8f5e0d6b}{Net\+Interface} $\ast$interface, const \hyperlink{igmp_8h_a5272f6bc4b6ce32cc7aae99f18c47dd3}{Igmp\+Message} $\ast$\hyperlink{pap_8h_a52f19d36a71e9b8ddea38fe00c291181}{message}, size\+\_\+t \hyperlink{ppp_8h_ab2b3adeb2a67e656ff030b56727fd0ac}{length})
\begin{DoxyCompactList}\small\item\em Process incoming Membership Query message. \end{DoxyCompactList}\item 
void \hyperlink{igmp_8c_ad3f0891bf918389eb6610edeb4927c32}{igmp\+Process\+Report\+Message} (\hyperlink{net_8h_a2234db8911a1148c9159979d8f5e0d6b}{Net\+Interface} $\ast$interface, const \hyperlink{igmp_8h_a5272f6bc4b6ce32cc7aae99f18c47dd3}{Igmp\+Message} $\ast$\hyperlink{pap_8h_a52f19d36a71e9b8ddea38fe00c291181}{message}, size\+\_\+t \hyperlink{ppp_8h_ab2b3adeb2a67e656ff030b56727fd0ac}{length})
\begin{DoxyCompactList}\small\item\em Process incoming Membership Report message. \end{DoxyCompactList}\item 
\hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689c}{error\+\_\+t} \hyperlink{igmp_8c_a353f3fa45c5b834265b95c33077ef5f7}{igmp\+Send\+Report\+Message} (\hyperlink{net_8h_a2234db8911a1148c9159979d8f5e0d6b}{Net\+Interface} $\ast$interface, \hyperlink{ipv4_8h_a411debb3d770caa0c06d3f73367da37f}{Ipv4\+Addr} \hyperlink{ipcp_8h_a11542dd5a4de5976a89188df3d53b42d}{ip\+Addr})
\begin{DoxyCompactList}\small\item\em Send Membership Report message. \end{DoxyCompactList}\item 
\hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689c}{error\+\_\+t} \hyperlink{igmp_8c_af70852aebecaa4687cfa6d8c58bf0de3}{igmp\+Send\+Leave\+Group\+Message} (\hyperlink{net_8h_a2234db8911a1148c9159979d8f5e0d6b}{Net\+Interface} $\ast$interface, \hyperlink{ipv4_8h_a411debb3d770caa0c06d3f73367da37f}{Ipv4\+Addr} \hyperlink{ipcp_8h_a11542dd5a4de5976a89188df3d53b42d}{ip\+Addr})
\begin{DoxyCompactList}\small\item\em Send Leave Group message. \end{DoxyCompactList}\item 
\hyperlink{stdint_8h_a435d1572bf3f880d55459d9805097f62}{uint32\+\_\+t} \hyperlink{igmp_8c_a9a788b2f683e19a623689b0fe7728770}{igmp\+Rand} (\hyperlink{stdint_8h_a435d1572bf3f880d55459d9805097f62}{uint32\+\_\+t} max)
\begin{DoxyCompactList}\small\item\em Get a random value in the specified range. \end{DoxyCompactList}\item 
void \hyperlink{igmp_8c_a995a877f6a786e08c501cdac70e3e9bd}{igmp\+Dump\+Message} (const \hyperlink{igmp_8h_a5272f6bc4b6ce32cc7aae99f18c47dd3}{Igmp\+Message} $\ast$\hyperlink{pap_8h_a52f19d36a71e9b8ddea38fe00c291181}{message})
\begin{DoxyCompactList}\small\item\em Dump I\+G\+MP message for debugging purpose. \end{DoxyCompactList}\end{DoxyCompactItemize}
\subsection*{Variables}
\begin{DoxyCompactItemize}
\item 
\hyperlink{compiler__port_8h_ae3e32a98d431a02106616da3071832dd}{systime\+\_\+t} \hyperlink{igmp_8c_a04bf70fce2f50dde04956ed9b26c49f8}{igmp\+Tick\+Counter}
\end{DoxyCompactItemize}


\subsection{Detailed Description}
I\+G\+MP (Internet Group Management Protocol) 

\hypertarget{pic32mz__ef__curiosity_8h_License}{}\subsection{License}\label{pic32mz__ef__curiosity_8h_License}
S\+P\+D\+X-\/\+License-\/\+Identifier\+: G\+P\+L-\/2.\+0-\/or-\/later

Copyright (C) 2010-\/2019 Oryx Embedded S\+A\+RL. All rights reserved.

This file is part of Cyclone\+T\+CP Open.

This program is free software; you can redistribute it and/or modify it under the terms of the G\+NU General Public License as published by the Free Software Foundation; either version 2 of the License, or (at your option) any later version.

This program is distributed in the hope that it will be useful, but W\+I\+T\+H\+O\+UT A\+NY W\+A\+R\+R\+A\+N\+TY; without even the implied warranty of M\+E\+R\+C\+H\+A\+N\+T\+A\+B\+I\+L\+I\+TY or F\+I\+T\+N\+E\+SS F\+OR A P\+A\+R\+T\+I\+C\+U\+L\+AR P\+U\+R\+P\+O\+SE. See the G\+NU General Public License for more details.

You should have received a copy of the G\+NU General Public License along with this program; if not, write to the Free Software Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-\/1301, U\+SA.\hypertarget{tftp__server_8c_Description}{}\subsection{Description}\label{tftp__server_8c_Description}
I\+G\+MP is used by IP hosts to report their multicast group memberships to routers. Refer to the following R\+F\+Cs for complete details\+:
\begin{DoxyItemize}
\item R\+FC 1112\+: Host Extensions for IP Multicasting
\item R\+FC 2236\+: Internet Group Management Protocol, Version 2
\item R\+FC 3376\+: Internet Group Management Protocol, Version 3
\end{DoxyItemize}

\begin{DoxyAuthor}{Author}
Oryx Embedded S\+A\+RL (www.\+oryx-\/embedded.\+com) 
\end{DoxyAuthor}
\begin{DoxyVersion}{Version}
1.\+9.\+6 
\end{DoxyVersion}


\subsection{Macro Definition Documentation}
\mbox{\Hypertarget{igmp_8c_afcdf5e66fd927a7f4cc64295acd20407}\label{igmp_8c_afcdf5e66fd927a7f4cc64295acd20407}} 
\index{igmp.\+c@{igmp.\+c}!T\+R\+A\+C\+E\+\_\+\+L\+E\+V\+EL@{T\+R\+A\+C\+E\+\_\+\+L\+E\+V\+EL}}
\index{T\+R\+A\+C\+E\+\_\+\+L\+E\+V\+EL@{T\+R\+A\+C\+E\+\_\+\+L\+E\+V\+EL}!igmp.\+c@{igmp.\+c}}
\subsubsection{\texorpdfstring{T\+R\+A\+C\+E\+\_\+\+L\+E\+V\+EL}{TRACE\_LEVEL}}
{\footnotesize\ttfamily \#define T\+R\+A\+C\+E\+\_\+\+L\+E\+V\+EL~\hyperlink{net__config_8h_a6fb58fa24260d1cd348bf55a22154c6a}{I\+G\+M\+P\+\_\+\+T\+R\+A\+C\+E\+\_\+\+L\+E\+V\+EL}}



Definition at line 40 of file igmp.\+c.



\subsection{Function Documentation}
\mbox{\Hypertarget{igmp_8c_a995a877f6a786e08c501cdac70e3e9bd}\label{igmp_8c_a995a877f6a786e08c501cdac70e3e9bd}} 
\index{igmp.\+c@{igmp.\+c}!igmp\+Dump\+Message@{igmp\+Dump\+Message}}
\index{igmp\+Dump\+Message@{igmp\+Dump\+Message}!igmp.\+c@{igmp.\+c}}
\subsubsection{\texorpdfstring{igmp\+Dump\+Message()}{igmpDumpMessage()}}
{\footnotesize\ttfamily void igmp\+Dump\+Message (\begin{DoxyParamCaption}\item[{const \hyperlink{igmp_8h_a5272f6bc4b6ce32cc7aae99f18c47dd3}{Igmp\+Message} $\ast$}]{message }\end{DoxyParamCaption})}



Dump I\+G\+MP message for debugging purpose. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em message} & Pointer to the I\+G\+MP message \\
\hline
\end{DoxyParams}


Definition at line 625 of file igmp.\+c.


\begin{DoxyCode}
626 \{
627    \textcolor{comment}{//Dump IGMP message}
628    \hyperlink{debug_8h_a67a8f9bc74358aa21745a76e23768dae}{TRACE\_DEBUG}(\textcolor{stringliteral}{"  Type = 0x%02"} PRIX8 \textcolor{stringliteral}{"\(\backslash\)r\(\backslash\)n"}, \hyperlink{chap_8h_a52f19d36a71e9b8ddea38fe00c291181}{message}->type);
629    \hyperlink{debug_8h_a67a8f9bc74358aa21745a76e23768dae}{TRACE\_DEBUG}(\textcolor{stringliteral}{"  Max Resp Time = 0x%02"} PRIX8 \textcolor{stringliteral}{"\(\backslash\)r\(\backslash\)n"}, \hyperlink{chap_8h_a52f19d36a71e9b8ddea38fe00c291181}{message}->maxRespTime);
630    \hyperlink{debug_8h_a67a8f9bc74358aa21745a76e23768dae}{TRACE\_DEBUG}(\textcolor{stringliteral}{"  Checksum = 0x%04"} PRIX16 \textcolor{stringliteral}{"\(\backslash\)r\(\backslash\)n"}, \hyperlink{cpu__endian_8h_a9312c6eb72e64f748ae0d0e0dc3ec9b9}{ntohs}(\hyperlink{chap_8h_a52f19d36a71e9b8ddea38fe00c291181}{message}->checksum));
631    \hyperlink{debug_8h_a67a8f9bc74358aa21745a76e23768dae}{TRACE\_DEBUG}(\textcolor{stringliteral}{"  Group Address = %s\(\backslash\)r\(\backslash\)n"}, \hyperlink{ipv4_8c_a6d826409fb54a5cc0ce23c5f88f5c7c1}{ipv4AddrToString}(
      \hyperlink{chap_8h_a52f19d36a71e9b8ddea38fe00c291181}{message}->groupAddr, \hyperlink{group__BSPDefine_ga070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL}));
632 \}
\end{DoxyCode}
\mbox{\Hypertarget{igmp_8c_a00733854143421278db466a47576761a}\label{igmp_8c_a00733854143421278db466a47576761a}} 
\index{igmp.\+c@{igmp.\+c}!igmp\+Init@{igmp\+Init}}
\index{igmp\+Init@{igmp\+Init}!igmp.\+c@{igmp.\+c}}
\subsubsection{\texorpdfstring{igmp\+Init()}{igmpInit()}}
{\footnotesize\ttfamily \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689c}{error\+\_\+t} igmp\+Init (\begin{DoxyParamCaption}\item[{\hyperlink{net_8h_a2234db8911a1148c9159979d8f5e0d6b}{Net\+Interface} $\ast$}]{interface }\end{DoxyParamCaption})}



I\+G\+MP initialization. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em interface} & Underlying network interface \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Error code 
\end{DoxyReturn}


Definition at line 62 of file igmp.\+c.


\begin{DoxyCode}
63 \{
64    \textcolor{comment}{//The default host compatibility mode is IGMPv2}
65    interface->igmpv1RouterPresent = \hyperlink{os__port_8h_aa93f0eb578d23995850d61f7d61c55c1}{FALSE};
66 
67    \textcolor{comment}{//Start IGMPv1 router present timer}
68    interface->igmpv1RouterPresentTimer =
69       \hyperlink{os__port__chibios_8c_ab66a11272d40a916fa69dd8e4dc443d4}{osGetSystemTime}() + \hyperlink{igmp_8h_aa2b1aaaa952d299d2878607d0695caec}{IGMP\_V1\_ROUTER\_PRESENT\_TIMEOUT};
70 
71    \textcolor{comment}{//Successful initialization}
72    \textcolor{keywordflow}{return} \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689cabf350750d0d4fabd8954c0f1e9bbae94}{NO\_ERROR};
73 \}
\end{DoxyCode}
\mbox{\Hypertarget{igmp_8c_a21c3e7c72469bf08cd853cca95909a4c}\label{igmp_8c_a21c3e7c72469bf08cd853cca95909a4c}} 
\index{igmp.\+c@{igmp.\+c}!igmp\+Join\+Group@{igmp\+Join\+Group}}
\index{igmp\+Join\+Group@{igmp\+Join\+Group}!igmp.\+c@{igmp.\+c}}
\subsubsection{\texorpdfstring{igmp\+Join\+Group()}{igmpJoinGroup()}}
{\footnotesize\ttfamily \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689c}{error\+\_\+t} igmp\+Join\+Group (\begin{DoxyParamCaption}\item[{\hyperlink{net_8h_a2234db8911a1148c9159979d8f5e0d6b}{Net\+Interface} $\ast$}]{interface,  }\item[{\hyperlink{structIpv4FilterEntry}{Ipv4\+Filter\+Entry} $\ast$}]{entry }\end{DoxyParamCaption})}



Join the specified host group. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em interface} & Underlying network interface \\
\hline
\mbox{\tt in}  & {\em entry} & I\+Pv4 filter entry identifying the host group to join \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Error code 
\end{DoxyReturn}


Definition at line 83 of file igmp.\+c.


\begin{DoxyCode}
84 \{
85    \textcolor{comment}{//The all-systems group (address 224.0.0.1) is handled as a special}
86    \textcolor{comment}{//case. The host starts in Idle Member state for that group on every}
87    \textcolor{comment}{//interface and never transitions to another state}
88    \textcolor{keywordflow}{if}(entry->\hyperlink{structIpv4FilterEntry_a81c9fd6af892b3527845d3b39d3b256d}{addr} == \hyperlink{igmp_8h_ae2df9640f294bc95a5f646769b8930da}{IGMP\_ALL\_SYSTEMS\_ADDR})
89    \{
90       \textcolor{comment}{//Clear flag}
91       entry->\hyperlink{structIpv4FilterEntry_a3821e585190d92f01df1529e828c124f}{flag} = \hyperlink{os__port_8h_aa93f0eb578d23995850d61f7d61c55c1}{FALSE};
92       \textcolor{comment}{//Enter the Idle Member state}
93       entry->\hyperlink{structIpv4FilterEntry_abc0b2be8dd44f499324d119243959111}{state} = \hyperlink{igmp_8h_ae0708ed3a74176c0163189a95e280ee2a58e5bc240c4336678551655793a2a629}{IGMP\_STATE\_IDLE\_MEMBER};
94    \}
95    \textcolor{keywordflow}{else}
96    \{
97       \textcolor{comment}{//Link is up?}
98       \textcolor{keywordflow}{if}(interface->linkState)
99       \{
100          \textcolor{comment}{//When a host joins a multicast group, it should immediately transmit}
101          \textcolor{comment}{//an unsolicited Membership Report for that group}
102          \hyperlink{igmp_8c_a353f3fa45c5b834265b95c33077ef5f7}{igmpSendReportMessage}(interface, entry->\hyperlink{structIpv4FilterEntry_a81c9fd6af892b3527845d3b39d3b256d}{addr});
103 
104          \textcolor{comment}{//Set flag}
105          entry->\hyperlink{structIpv4FilterEntry_a3821e585190d92f01df1529e828c124f}{flag} = \hyperlink{os__port_8h_aa8cecfc5c5c054d2875c03e77b7be15d}{TRUE};
106          \textcolor{comment}{//Start timer}
107          entry->\hyperlink{structIpv4FilterEntry_aaa44209273e6a296c3e63b789f7441d4}{timer} = \hyperlink{os__port__chibios_8c_ab66a11272d40a916fa69dd8e4dc443d4}{osGetSystemTime}() + 
      \hyperlink{igmp_8h_a1b62d83415356b31c3547b72089dfb22}{IGMP\_UNSOLICITED\_REPORT\_INTERVAL};
108          \textcolor{comment}{//Enter the Delaying Member state}
109          entry->\hyperlink{structIpv4FilterEntry_abc0b2be8dd44f499324d119243959111}{state} = \hyperlink{igmp_8h_ae0708ed3a74176c0163189a95e280ee2a1e8b0d650bdd2b8869e1416b745f73c4}{IGMP\_STATE\_DELAYING\_MEMBER};
110       \}
111       \textcolor{comment}{//Link is down?}
112       \textcolor{keywordflow}{else}
113       \{
114          \textcolor{comment}{//Clear flag}
115          entry->\hyperlink{structIpv4FilterEntry_a3821e585190d92f01df1529e828c124f}{flag} = \hyperlink{os__port_8h_aa93f0eb578d23995850d61f7d61c55c1}{FALSE};
116          \textcolor{comment}{//Enter the Idle Member state}
117          entry->\hyperlink{structIpv4FilterEntry_abc0b2be8dd44f499324d119243959111}{state} = \hyperlink{igmp_8h_ae0708ed3a74176c0163189a95e280ee2a58e5bc240c4336678551655793a2a629}{IGMP\_STATE\_IDLE\_MEMBER};
118       \}
119    \}
120 
121    \textcolor{comment}{//Successful processing}
122    \textcolor{keywordflow}{return} \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689cabf350750d0d4fabd8954c0f1e9bbae94}{NO\_ERROR};
123 \}
\end{DoxyCode}
\mbox{\Hypertarget{igmp_8c_a14366b34311d9e6995f3e2f5aec456b6}\label{igmp_8c_a14366b34311d9e6995f3e2f5aec456b6}} 
\index{igmp.\+c@{igmp.\+c}!igmp\+Leave\+Group@{igmp\+Leave\+Group}}
\index{igmp\+Leave\+Group@{igmp\+Leave\+Group}!igmp.\+c@{igmp.\+c}}
\subsubsection{\texorpdfstring{igmp\+Leave\+Group()}{igmpLeaveGroup()}}
{\footnotesize\ttfamily \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689c}{error\+\_\+t} igmp\+Leave\+Group (\begin{DoxyParamCaption}\item[{\hyperlink{net_8h_a2234db8911a1148c9159979d8f5e0d6b}{Net\+Interface} $\ast$}]{interface,  }\item[{\hyperlink{structIpv4FilterEntry}{Ipv4\+Filter\+Entry} $\ast$}]{entry }\end{DoxyParamCaption})}



Leave the specified host group. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em interface} & Underlying network interface \\
\hline
\mbox{\tt in}  & {\em entry} & I\+Pv4 filter entry identifying the host group to leave \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Error code 
\end{DoxyReturn}


Definition at line 133 of file igmp.\+c.


\begin{DoxyCode}
134 \{
135    \textcolor{comment}{//Check link state}
136    \textcolor{keywordflow}{if}(interface->linkState)
137    \{
138       \textcolor{comment}{//Send a Leave Group message if the flag is set}
139       \textcolor{keywordflow}{if}(entry->\hyperlink{structIpv4FilterEntry_a3821e585190d92f01df1529e828c124f}{flag})
140          \hyperlink{igmp_8c_af70852aebecaa4687cfa6d8c58bf0de3}{igmpSendLeaveGroupMessage}(interface, entry->
      \hyperlink{structIpv4FilterEntry_a81c9fd6af892b3527845d3b39d3b256d}{addr});
141    \}
142 
143    \textcolor{comment}{//Switch to the Non-Member state}
144    entry->\hyperlink{structIpv4FilterEntry_abc0b2be8dd44f499324d119243959111}{state} = \hyperlink{igmp_8h_ae0708ed3a74176c0163189a95e280ee2a377587963a9057dbdc07c382a58a9e5c}{IGMP\_STATE\_NON\_MEMBER};
145 
146    \textcolor{comment}{//Successful processing}
147    \textcolor{keywordflow}{return} \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689cabf350750d0d4fabd8954c0f1e9bbae94}{NO\_ERROR};
148 \}
\end{DoxyCode}
\mbox{\Hypertarget{igmp_8c_a2dde2038b4e2c63a290b7d655e3d2e76}\label{igmp_8c_a2dde2038b4e2c63a290b7d655e3d2e76}} 
\index{igmp.\+c@{igmp.\+c}!igmp\+Link\+Change\+Event@{igmp\+Link\+Change\+Event}}
\index{igmp\+Link\+Change\+Event@{igmp\+Link\+Change\+Event}!igmp.\+c@{igmp.\+c}}
\subsubsection{\texorpdfstring{igmp\+Link\+Change\+Event()}{igmpLinkChangeEvent()}}
{\footnotesize\ttfamily void igmp\+Link\+Change\+Event (\begin{DoxyParamCaption}\item[{\hyperlink{net_8h_a2234db8911a1148c9159979d8f5e0d6b}{Net\+Interface} $\ast$}]{interface }\end{DoxyParamCaption})}



Callback function for link change event. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em interface} & Underlying network interface \\
\hline
\end{DoxyParams}


Definition at line 207 of file igmp.\+c.


\begin{DoxyCode}
208 \{
209    \hyperlink{compiler__port_8h_a12a1e9b3ce141648783a82445d02b58d}{uint\_t} i;
210    \hyperlink{compiler__port_8h_ae3e32a98d431a02106616da3071832dd}{systime\_t} \hyperlink{dhcpv6__common_8h_ae73654f333e4363463ad8c594eca1905}{time};
211    \hyperlink{structIpv4FilterEntry}{Ipv4FilterEntry} *entry;
212 
213    \textcolor{comment}{//Get current time}
214    time = \hyperlink{os__port__chibios_8c_ab66a11272d40a916fa69dd8e4dc443d4}{osGetSystemTime}();
215 
216    \textcolor{comment}{//Link up event?}
217    \textcolor{keywordflow}{if}(interface->linkState)
218    \{
219       \textcolor{comment}{//The default host compatibility mode is IGMPv2}
220       interface->igmpv1RouterPresent = \hyperlink{os__port_8h_aa93f0eb578d23995850d61f7d61c55c1}{FALSE};
221       \textcolor{comment}{//Start IGMPv1 router present timer}
222       interface->igmpv1RouterPresentTimer = time + 
      \hyperlink{igmp_8h_aa2b1aaaa952d299d2878607d0695caec}{IGMP\_V1\_ROUTER\_PRESENT\_TIMEOUT};
223 
224       \textcolor{comment}{//Go through the multicast filter table}
225       \textcolor{keywordflow}{for}(i = 0; i < \hyperlink{ipv4_8h_abad540441745129e90052cdfd1b27943}{IPV4\_MULTICAST\_FILTER\_SIZE}; i++)
226       \{
227          \textcolor{comment}{//Point to the current entry}
228          entry = &interface->ipv4Context.multicastFilter[i];
229 
230          \textcolor{comment}{//Valid entry?}
231          \textcolor{keywordflow}{if}(entry->\hyperlink{structIpv4FilterEntry_a6841595a84b65414b1b30aa0ef5ef1e6}{refCount} > 0)
232          \{
233             \textcolor{comment}{//The all-systems group (address 224.0.0.1) is handled as a special}
234             \textcolor{comment}{//case. The host starts in Idle Member state for that group on every}
235             \textcolor{comment}{//interface and never transitions to another state}
236             \textcolor{keywordflow}{if}(entry->\hyperlink{structIpv4FilterEntry_a81c9fd6af892b3527845d3b39d3b256d}{addr} != \hyperlink{igmp_8h_ae2df9640f294bc95a5f646769b8930da}{IGMP\_ALL\_SYSTEMS\_ADDR})
237             \{
238                \textcolor{comment}{//Send an unsolicited Membership Report for that group}
239                \hyperlink{igmp_8c_a353f3fa45c5b834265b95c33077ef5f7}{igmpSendReportMessage}(interface, entry->\hyperlink{structIpv4FilterEntry_a81c9fd6af892b3527845d3b39d3b256d}{addr});
240 
241                \textcolor{comment}{//Set flag}
242                entry->\hyperlink{structIpv4FilterEntry_a3821e585190d92f01df1529e828c124f}{flag} = \hyperlink{os__port_8h_aa8cecfc5c5c054d2875c03e77b7be15d}{TRUE};
243                \textcolor{comment}{//Start timer}
244                entry->\hyperlink{structIpv4FilterEntry_aaa44209273e6a296c3e63b789f7441d4}{timer} = time + \hyperlink{igmp_8h_a1b62d83415356b31c3547b72089dfb22}{IGMP\_UNSOLICITED\_REPORT\_INTERVAL};
245                \textcolor{comment}{//Enter the Delaying Member state}
246                entry->\hyperlink{structIpv4FilterEntry_abc0b2be8dd44f499324d119243959111}{state} = \hyperlink{igmp_8h_ae0708ed3a74176c0163189a95e280ee2a1e8b0d650bdd2b8869e1416b745f73c4}{IGMP\_STATE\_DELAYING\_MEMBER};
247             \}
248          \}
249       \}
250    \}
251    \textcolor{comment}{//Link down event?}
252    \textcolor{keywordflow}{else}
253    \{
254       \textcolor{comment}{//Go through the multicast filter table}
255       \textcolor{keywordflow}{for}(i = 0; i < \hyperlink{ipv4_8h_abad540441745129e90052cdfd1b27943}{IPV4\_MULTICAST\_FILTER\_SIZE}; i++)
256       \{
257          \textcolor{comment}{//Point to the current entry}
258          entry = &interface->ipv4Context.multicastFilter[i];
259 
260          \textcolor{comment}{//Valid entry?}
261          \textcolor{keywordflow}{if}(entry->\hyperlink{structIpv4FilterEntry_a6841595a84b65414b1b30aa0ef5ef1e6}{refCount} > 0)
262          \{
263             \textcolor{comment}{//Clear flag}
264             entry->\hyperlink{structIpv4FilterEntry_a3821e585190d92f01df1529e828c124f}{flag} = \hyperlink{os__port_8h_aa93f0eb578d23995850d61f7d61c55c1}{FALSE};
265             \textcolor{comment}{//Enter the Idle Member state}
266             entry->\hyperlink{structIpv4FilterEntry_abc0b2be8dd44f499324d119243959111}{state} = \hyperlink{igmp_8h_ae0708ed3a74176c0163189a95e280ee2a58e5bc240c4336678551655793a2a629}{IGMP\_STATE\_IDLE\_MEMBER};
267          \}
268       \}
269    \}
270 \}
\end{DoxyCode}
\mbox{\Hypertarget{igmp_8c_a43178cad85b82edfc42b5be0b2d61817}\label{igmp_8c_a43178cad85b82edfc42b5be0b2d61817}} 
\index{igmp.\+c@{igmp.\+c}!igmp\+Process\+Message@{igmp\+Process\+Message}}
\index{igmp\+Process\+Message@{igmp\+Process\+Message}!igmp.\+c@{igmp.\+c}}
\subsubsection{\texorpdfstring{igmp\+Process\+Message()}{igmpProcessMessage()}}
{\footnotesize\ttfamily void igmp\+Process\+Message (\begin{DoxyParamCaption}\item[{\hyperlink{net_8h_a2234db8911a1148c9159979d8f5e0d6b}{Net\+Interface} $\ast$}]{interface,  }\item[{const \hyperlink{structNetBuffer}{Net\+Buffer} $\ast$}]{buffer,  }\item[{size\+\_\+t}]{offset }\end{DoxyParamCaption})}



Process incoming I\+G\+MP message. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em interface} & Underlying network interface \\
\hline
\mbox{\tt in}  & {\em buffer} & Multi-\/part buffer containing the incoming I\+G\+MP message \\
\hline
\mbox{\tt in}  & {\em offset} & Offset to the first byte of the I\+G\+MP message \\
\hline
\end{DoxyParams}


Definition at line 280 of file igmp.\+c.


\begin{DoxyCode}
282 \{
283    \textcolor{keywordtype}{size\_t} \hyperlink{dtls__misc_8h_ab43ca82dd7fa2a0e56f941032ef324c4}{length};
284    \hyperlink{igmp_8h_a5272f6bc4b6ce32cc7aae99f18c47dd3}{IgmpMessage} *\hyperlink{chap_8h_a52f19d36a71e9b8ddea38fe00c291181}{message};
285 
286    \textcolor{comment}{//Retrieve the length of the IGMP message}
287    length = \hyperlink{net__mem_8c_ac9dbcd9e28e61d8f4f6d2e9af2607b68}{netBufferGetLength}(buffer) - \hyperlink{pic32mz_2isr__support_8h_a12a5aed8a193ebbf9a641104a310610d}{offset};
288 
289    \textcolor{comment}{//Ensure the message length is correct}
290    \textcolor{keywordflow}{if}(length < \textcolor{keyword}{sizeof}(\hyperlink{igmp_8h_a5272f6bc4b6ce32cc7aae99f18c47dd3}{IgmpMessage}))
291    \{
292       \textcolor{comment}{//Debug message}
293       \hyperlink{debug_8h_a72b9761add7486364dba449091cd2579}{TRACE\_WARNING}(\textcolor{stringliteral}{"IGMP message length is invalid!\(\backslash\)r\(\backslash\)n"});
294       \textcolor{comment}{//Silently discard incoming message}
295       \textcolor{keywordflow}{return};
296    \}
297 
298    \textcolor{comment}{//Point to the beginning of the IGMP message}
299    message = \hyperlink{net__mem_8c_a20d30c9db547b3b2743368b589cf482b}{netBufferAt}(buffer, \hyperlink{pic32mz_2isr__support_8h_a12a5aed8a193ebbf9a641104a310610d}{offset});
300    \textcolor{comment}{//Sanity check}
301    \textcolor{keywordflow}{if}(message == \hyperlink{group__BSPDefine_ga070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL})
302       \textcolor{keywordflow}{return};
303 
304    \textcolor{comment}{//Debug message}
305    \hyperlink{debug_8h_a7339bfd784193a5c79efcef2eeb2d6df}{TRACE\_INFO}(\textcolor{stringliteral}{"IGMP message received (%"} \hyperlink{compiler__port_8h_a2b7b0557dc6cd786df02dafbb51f5292}{PRIuSIZE} \textcolor{stringliteral}{" bytes)...\(\backslash\)r\(\backslash\)n"}, length);
306    \textcolor{comment}{//Dump message contents for debugging purpose}
307    \hyperlink{igmp_8c_a995a877f6a786e08c501cdac70e3e9bd}{igmpDumpMessage}(message);
308 
309    \textcolor{comment}{//Verify checksum value}
310    \textcolor{keywordflow}{if}(\hyperlink{ip_8c_a888dbaa377c95a06a4d511cb9ec4f278}{ipCalcChecksumEx}(buffer, \hyperlink{pic32mz_2isr__support_8h_a12a5aed8a193ebbf9a641104a310610d}{offset}, length) != 0x0000)
311    \{
312       \textcolor{comment}{//Debug message}
313       \hyperlink{debug_8h_a72b9761add7486364dba449091cd2579}{TRACE\_WARNING}(\textcolor{stringliteral}{"Wrong IGMP header checksum!\(\backslash\)r\(\backslash\)n"});
314       \textcolor{comment}{//Drop incoming message}
315       \textcolor{keywordflow}{return};
316    \}
317 
318    \textcolor{comment}{//Check the type field}
319    \textcolor{keywordflow}{switch}(message->type)
320    \{
321    \textcolor{comment}{//Membership Query message?}
322    \textcolor{keywordflow}{case} \hyperlink{igmp_8h_a96d71ad3d8af39ebb9b9158bb78b65acaff692874a10c93a4864140b1e40eb47b}{IGMP\_TYPE\_MEMBERSHIP\_QUERY}:
323       \textcolor{comment}{//Process Membership Query message}
324       \hyperlink{igmp_8c_a678eec35b7c89d03f133069cb9202241}{igmpProcessQueryMessage}(interface, message, length);
325       \textcolor{keywordflow}{break};
326    \textcolor{comment}{//Membership Report message?}
327    \textcolor{keywordflow}{case} \hyperlink{igmp_8h_a96d71ad3d8af39ebb9b9158bb78b65acaeb7639101b1c6da606bb05b871b22bec}{IGMP\_TYPE\_MEMBERSHIP\_REPORT\_V1}:
328    \textcolor{keywordflow}{case} \hyperlink{igmp_8h_a96d71ad3d8af39ebb9b9158bb78b65acacd49f6a2df8f68c587f6d02b954cab3f}{IGMP\_TYPE\_MEMBERSHIP\_REPORT\_V2}:
329       \textcolor{comment}{//Process Membership Query message}
330       \hyperlink{igmp_8c_ad3f0891bf918389eb6610edeb4927c32}{igmpProcessReportMessage}(interface, message, length);
331       \textcolor{keywordflow}{break};
332    \textcolor{comment}{//Unknown type?}
333    \textcolor{keywordflow}{default}:
334       \textcolor{comment}{//Debug message}
335       \hyperlink{debug_8h_a72b9761add7486364dba449091cd2579}{TRACE\_WARNING}(\textcolor{stringliteral}{"Unknown IGMP message type!\(\backslash\)r\(\backslash\)n"});
336       \textcolor{comment}{//Discard incoming IGMP message}
337       \textcolor{keywordflow}{break};
338    \}
339 \}
\end{DoxyCode}
\mbox{\Hypertarget{igmp_8c_a678eec35b7c89d03f133069cb9202241}\label{igmp_8c_a678eec35b7c89d03f133069cb9202241}} 
\index{igmp.\+c@{igmp.\+c}!igmp\+Process\+Query\+Message@{igmp\+Process\+Query\+Message}}
\index{igmp\+Process\+Query\+Message@{igmp\+Process\+Query\+Message}!igmp.\+c@{igmp.\+c}}
\subsubsection{\texorpdfstring{igmp\+Process\+Query\+Message()}{igmpProcessQueryMessage()}}
{\footnotesize\ttfamily void igmp\+Process\+Query\+Message (\begin{DoxyParamCaption}\item[{\hyperlink{net_8h_a2234db8911a1148c9159979d8f5e0d6b}{Net\+Interface} $\ast$}]{interface,  }\item[{const \hyperlink{igmp_8h_a5272f6bc4b6ce32cc7aae99f18c47dd3}{Igmp\+Message} $\ast$}]{message,  }\item[{size\+\_\+t}]{length }\end{DoxyParamCaption})}



Process incoming Membership Query message. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em interface} & Underlying network interface \\
\hline
\mbox{\tt in}  & {\em message} & Incoming Membership Query message \\
\hline
\mbox{\tt in}  & {\em length} & Message length \\
\hline
\end{DoxyParams}


Definition at line 349 of file igmp.\+c.


\begin{DoxyCode}
351 \{
352    \hyperlink{compiler__port_8h_a12a1e9b3ce141648783a82445d02b58d}{uint\_t} i;
353    \hyperlink{compiler__port_8h_ae3e32a98d431a02106616da3071832dd}{systime\_t} \hyperlink{dhcpv6__common_8h_ae73654f333e4363463ad8c594eca1905}{time};
354    \hyperlink{compiler__port_8h_ae3e32a98d431a02106616da3071832dd}{systime\_t} \hyperlink{igmp_8h_ad1e69fb96c9a0d81b66068a1dbcfd7f3}{maxRespTime};
355    \hyperlink{structIpv4FilterEntry}{Ipv4FilterEntry} *entry;
356 
357    \textcolor{comment}{//Get current time}
358    time = \hyperlink{os__port__chibios_8c_ab66a11272d40a916fa69dd8e4dc443d4}{osGetSystemTime}();
359 
360    \textcolor{comment}{//IGMPv1 Membership Query message?}
361    \textcolor{keywordflow}{if}(\hyperlink{chap_8h_a52f19d36a71e9b8ddea38fe00c291181}{message}->maxRespTime == 0)
362    \{
363       \textcolor{comment}{//The host receives a query with the Max Response Time field set to 0}
364       interface->igmpv1RouterPresent = \hyperlink{os__port_8h_aa8cecfc5c5c054d2875c03e77b7be15d}{TRUE};
365       \textcolor{comment}{//Restart IGMPv1 router present timer}
366       interface->igmpv1RouterPresentTimer = time + 
      \hyperlink{igmp_8h_aa2b1aaaa952d299d2878607d0695caec}{IGMP\_V1\_ROUTER\_PRESENT\_TIMEOUT};
367       \textcolor{comment}{//The maximum response time is 10 seconds by default}
368       maxRespTime = \hyperlink{igmp_8h_a77a18415d26438118708ca79b7b38efd}{IGMP\_V1\_MAX\_RESPONSE\_TIME};
369    \}
370    \textcolor{comment}{//IGMPv2 Membership Query message?}
371    \textcolor{keywordflow}{else}
372    \{
373       \textcolor{comment}{//The Max Resp Time field specifies the maximum time allowed}
374       \textcolor{comment}{//before sending a responding report}
375       maxRespTime = \hyperlink{chap_8h_a52f19d36a71e9b8ddea38fe00c291181}{message}->maxRespTime * 10;
376    \}
377 
378    \textcolor{comment}{//Go through the multicast filter table}
379    \textcolor{keywordflow}{for}(i = 0; i < \hyperlink{ipv4_8h_abad540441745129e90052cdfd1b27943}{IPV4\_MULTICAST\_FILTER\_SIZE}; i++)
380    \{
381       \textcolor{comment}{//Point to the current entry}
382       entry = &interface->ipv4Context.multicastFilter[i];
383 
384       \textcolor{comment}{//Valid entry?}
385       \textcolor{keywordflow}{if}(entry->\hyperlink{structIpv4FilterEntry_a6841595a84b65414b1b30aa0ef5ef1e6}{refCount} > 0)
386       \{
387          \textcolor{comment}{//The all-systems group (224.0.0.1) is handled as a special case. The}
388          \textcolor{comment}{//host starts in Idle Member state for that group on every interface}
389          \textcolor{comment}{//and never transitions to another state}
390          \textcolor{keywordflow}{if}(entry->\hyperlink{structIpv4FilterEntry_a81c9fd6af892b3527845d3b39d3b256d}{addr} != \hyperlink{igmp_8h_ae2df9640f294bc95a5f646769b8930da}{IGMP\_ALL\_SYSTEMS\_ADDR})
391          \{
392             \textcolor{comment}{//A General Query applies to all memberships on the interface from which}
393             \textcolor{comment}{//the Query is received. A Group-Specific Query applies to membership}
394             \textcolor{comment}{//in a single group on the interface from which the Query is received}
395             \textcolor{keywordflow}{if}(\hyperlink{chap_8h_a52f19d36a71e9b8ddea38fe00c291181}{message}->groupAddr == \hyperlink{ipv4_8h_aa9d277a6ff68d361eaf48d6af73e78e8}{IPV4\_UNSPECIFIED\_ADDR} ||
396                \hyperlink{chap_8h_a52f19d36a71e9b8ddea38fe00c291181}{message}->groupAddr == entry->\hyperlink{structIpv4FilterEntry_a81c9fd6af892b3527845d3b39d3b256d}{addr})
397             \{
398                \textcolor{comment}{//Delaying Member state?}
399                \textcolor{keywordflow}{if}(entry->\hyperlink{structIpv4FilterEntry_abc0b2be8dd44f499324d119243959111}{state} == \hyperlink{igmp_8h_ae0708ed3a74176c0163189a95e280ee2a1e8b0d650bdd2b8869e1416b745f73c4}{IGMP\_STATE\_DELAYING\_MEMBER})
400                \{
401                   \textcolor{comment}{//The timer has not yet expired?}
402                   \textcolor{keywordflow}{if}(\hyperlink{os__port_8h_a25c13833ef003da02045a91b1080263a}{timeCompare}(time, entry->\hyperlink{structIpv4FilterEntry_aaa44209273e6a296c3e63b789f7441d4}{timer}) < 0)
403                   \{
404                      \textcolor{comment}{//If a timer for the group is already running, it is reset to}
405                      \textcolor{comment}{//the random value only if the requested Max Response Time is}
406                      \textcolor{comment}{//less than the remaining value of the running timer}
407                      \textcolor{keywordflow}{if}(maxRespTime < (entry->\hyperlink{structIpv4FilterEntry_aaa44209273e6a296c3e63b789f7441d4}{timer} - time))
408                      \{
409                         \textcolor{comment}{//Restart delay timer}
410                         entry->\hyperlink{structIpv4FilterEntry_aaa44209273e6a296c3e63b789f7441d4}{timer} = time + \hyperlink{igmp_8c_a9a788b2f683e19a623689b0fe7728770}{igmpRand}(maxRespTime);
411                      \}
412                   \}
413                \}
414                \textcolor{comment}{//Idle Member state?}
415                \textcolor{keywordflow}{else} \textcolor{keywordflow}{if}(entry->\hyperlink{structIpv4FilterEntry_abc0b2be8dd44f499324d119243959111}{state} == \hyperlink{igmp_8h_ae0708ed3a74176c0163189a95e280ee2a58e5bc240c4336678551655793a2a629}{IGMP\_STATE\_IDLE\_MEMBER})
416                \{
417                   \textcolor{comment}{//Switch to the Delaying Member state}
418                   entry->\hyperlink{structIpv4FilterEntry_abc0b2be8dd44f499324d119243959111}{state} = \hyperlink{igmp_8h_ae0708ed3a74176c0163189a95e280ee2a1e8b0d650bdd2b8869e1416b745f73c4}{IGMP\_STATE\_DELAYING\_MEMBER};
419                   \textcolor{comment}{//Delay the response by a random amount of time}
420                   entry->\hyperlink{structIpv4FilterEntry_aaa44209273e6a296c3e63b789f7441d4}{timer} = time + \hyperlink{igmp_8c_a9a788b2f683e19a623689b0fe7728770}{igmpRand}(maxRespTime);
421                \}
422             \}
423          \}
424       \}
425    \}
426 \}
\end{DoxyCode}
\mbox{\Hypertarget{igmp_8c_ad3f0891bf918389eb6610edeb4927c32}\label{igmp_8c_ad3f0891bf918389eb6610edeb4927c32}} 
\index{igmp.\+c@{igmp.\+c}!igmp\+Process\+Report\+Message@{igmp\+Process\+Report\+Message}}
\index{igmp\+Process\+Report\+Message@{igmp\+Process\+Report\+Message}!igmp.\+c@{igmp.\+c}}
\subsubsection{\texorpdfstring{igmp\+Process\+Report\+Message()}{igmpProcessReportMessage()}}
{\footnotesize\ttfamily void igmp\+Process\+Report\+Message (\begin{DoxyParamCaption}\item[{\hyperlink{net_8h_a2234db8911a1148c9159979d8f5e0d6b}{Net\+Interface} $\ast$}]{interface,  }\item[{const \hyperlink{igmp_8h_a5272f6bc4b6ce32cc7aae99f18c47dd3}{Igmp\+Message} $\ast$}]{message,  }\item[{size\+\_\+t}]{length }\end{DoxyParamCaption})}



Process incoming Membership Report message. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em interface} & Underlying network interface \\
\hline
\mbox{\tt in}  & {\em message} & Incoming Membership Report message \\
\hline
\mbox{\tt in}  & {\em length} & Message length \\
\hline
\end{DoxyParams}


Definition at line 436 of file igmp.\+c.


\begin{DoxyCode}
438 \{
439    \hyperlink{compiler__port_8h_a12a1e9b3ce141648783a82445d02b58d}{uint\_t} i;
440    \hyperlink{structIpv4FilterEntry}{Ipv4FilterEntry} *entry;
441 
442    \textcolor{comment}{//Go through the multicast filter table}
443    \textcolor{keywordflow}{for}(i = 0; i < \hyperlink{ipv4_8h_abad540441745129e90052cdfd1b27943}{IPV4\_MULTICAST\_FILTER\_SIZE}; i++)
444    \{
445       \textcolor{comment}{//Point to the current entry}
446       entry = &interface->ipv4Context.multicastFilter[i];
447 
448       \textcolor{comment}{//Valid entry?}
449       \textcolor{keywordflow}{if}(entry->\hyperlink{structIpv4FilterEntry_a6841595a84b65414b1b30aa0ef5ef1e6}{refCount} > 0)
450       \{
451          \textcolor{comment}{//Report messages are ignored for memberships in}
452          \textcolor{comment}{//the Non-Member or Idle Member state}
453          \textcolor{keywordflow}{if}(entry->\hyperlink{structIpv4FilterEntry_abc0b2be8dd44f499324d119243959111}{state} == \hyperlink{igmp_8h_ae0708ed3a74176c0163189a95e280ee2a1e8b0d650bdd2b8869e1416b745f73c4}{IGMP\_STATE\_DELAYING\_MEMBER})
454          \{
455             \textcolor{comment}{//The Membership Report message matches the current entry?}
456             \textcolor{keywordflow}{if}(\hyperlink{chap_8h_a52f19d36a71e9b8ddea38fe00c291181}{message}->groupAddr == entry->\hyperlink{structIpv4FilterEntry_a81c9fd6af892b3527845d3b39d3b256d}{addr})
457             \{
458                \textcolor{comment}{//Clear flag}
459                entry->\hyperlink{structIpv4FilterEntry_a3821e585190d92f01df1529e828c124f}{flag} = \hyperlink{os__port_8h_aa93f0eb578d23995850d61f7d61c55c1}{FALSE};
460                \textcolor{comment}{//Switch to the Idle Member state}
461                entry->\hyperlink{structIpv4FilterEntry_abc0b2be8dd44f499324d119243959111}{state} = \hyperlink{igmp_8h_ae0708ed3a74176c0163189a95e280ee2a58e5bc240c4336678551655793a2a629}{IGMP\_STATE\_IDLE\_MEMBER};
462             \}
463          \}
464       \}
465    \}
466 \}
\end{DoxyCode}
\mbox{\Hypertarget{igmp_8c_a9a788b2f683e19a623689b0fe7728770}\label{igmp_8c_a9a788b2f683e19a623689b0fe7728770}} 
\index{igmp.\+c@{igmp.\+c}!igmp\+Rand@{igmp\+Rand}}
\index{igmp\+Rand@{igmp\+Rand}!igmp.\+c@{igmp.\+c}}
\subsubsection{\texorpdfstring{igmp\+Rand()}{igmpRand()}}
{\footnotesize\ttfamily \hyperlink{stdint_8h_a435d1572bf3f880d55459d9805097f62}{uint32\+\_\+t} igmp\+Rand (\begin{DoxyParamCaption}\item[{\hyperlink{stdint_8h_a435d1572bf3f880d55459d9805097f62}{uint32\+\_\+t}}]{max }\end{DoxyParamCaption})}



Get a random value in the specified range. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em max} & Upper bound \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Random value in the specified range 
\end{DoxyReturn}


Definition at line 613 of file igmp.\+c.


\begin{DoxyCode}
614 \{
615    \textcolor{comment}{//Return a random value in the given range}
616    \textcolor{keywordflow}{return} \hyperlink{net_8c_a7bb00b31d641749ac8ce742261eb1f6d}{netGetRand}() % (max + 1);
617 \}
\end{DoxyCode}
\mbox{\Hypertarget{igmp_8c_af70852aebecaa4687cfa6d8c58bf0de3}\label{igmp_8c_af70852aebecaa4687cfa6d8c58bf0de3}} 
\index{igmp.\+c@{igmp.\+c}!igmp\+Send\+Leave\+Group\+Message@{igmp\+Send\+Leave\+Group\+Message}}
\index{igmp\+Send\+Leave\+Group\+Message@{igmp\+Send\+Leave\+Group\+Message}!igmp.\+c@{igmp.\+c}}
\subsubsection{\texorpdfstring{igmp\+Send\+Leave\+Group\+Message()}{igmpSendLeaveGroupMessage()}}
{\footnotesize\ttfamily \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689c}{error\+\_\+t} igmp\+Send\+Leave\+Group\+Message (\begin{DoxyParamCaption}\item[{\hyperlink{net_8h_a2234db8911a1148c9159979d8f5e0d6b}{Net\+Interface} $\ast$}]{interface,  }\item[{\hyperlink{ipv4_8h_a411debb3d770caa0c06d3f73367da37f}{Ipv4\+Addr}}]{ip\+Addr }\end{DoxyParamCaption})}



Send Leave Group message. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em interface} & Underlying network interface \\
\hline
\mbox{\tt in}  & {\em ip\+Addr} & I\+Pv4 address specifying the group address being left \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Error code 
\end{DoxyReturn}


Definition at line 545 of file igmp.\+c.


\begin{DoxyCode}
546 \{
547    \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689c}{error\_t} error;
548    \textcolor{keywordtype}{size\_t} \hyperlink{pic32mz_2isr__support_8h_a12a5aed8a193ebbf9a641104a310610d}{offset};
549    \hyperlink{structNetBuffer}{NetBuffer} *buffer;
550    \hyperlink{igmp_8h_a5272f6bc4b6ce32cc7aae99f18c47dd3}{IgmpMessage} *\hyperlink{chap_8h_a52f19d36a71e9b8ddea38fe00c291181}{message};
551    \hyperlink{ipv4_8h_a0e92b64e038199f1bb6383f2a76f30b6}{Ipv4PseudoHeader} pseudoHeader;
552 
553    \textcolor{comment}{//Make sure the specified address is a valid multicast address}
554    \textcolor{keywordflow}{if}(!\hyperlink{ipv4_8h_aada5b622e70acf16bd1cd5a9c08ea107}{ipv4IsMulticastAddr}(\hyperlink{mib__common_8h_a3860e959b1b7dd73686a6e11424805e2}{ipAddr}))
555       \textcolor{keywordflow}{return} \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689ca21cbabf2c791471c05a9bc2710638aec}{ERROR\_INVALID\_ADDRESS};
556 
557    \textcolor{comment}{//The all-systems group (224.0.0.1) is handled as a special case.}
558    \textcolor{comment}{//The host never sends a Leave Group message for that group}
559    \textcolor{keywordflow}{if}(\hyperlink{mib__common_8h_a3860e959b1b7dd73686a6e11424805e2}{ipAddr} == \hyperlink{igmp_8h_ae2df9640f294bc95a5f646769b8930da}{IGMP\_ALL\_SYSTEMS\_ADDR})
560       \textcolor{keywordflow}{return} \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689ca21cbabf2c791471c05a9bc2710638aec}{ERROR\_INVALID\_ADDRESS};
561 
562    \textcolor{comment}{//If the interface state says the querier is running}
563    \textcolor{comment}{//IGMPv1, this action should be skipped}
564    \textcolor{keywordflow}{if}(interface->igmpv1RouterPresent)
565       \textcolor{keywordflow}{return} \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689cabf350750d0d4fabd8954c0f1e9bbae94}{NO\_ERROR};
566 
567    \textcolor{comment}{//Allocate a memory buffer to hold an IGMP message}
568    buffer = \hyperlink{ip_8c_a2222fb64b1b18140283119eea309c1b3}{ipAllocBuffer}(\textcolor{keyword}{sizeof}(\hyperlink{igmp_8h_a5272f6bc4b6ce32cc7aae99f18c47dd3}{IgmpMessage}), &offset);
569    \textcolor{comment}{//Failed to allocate memory?}
570    \textcolor{keywordflow}{if}(buffer == \hyperlink{group__BSPDefine_ga070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL})
571       \textcolor{keywordflow}{return} \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689cac0a554045048d2fb61387cf735676f69}{ERROR\_OUT\_OF\_MEMORY};
572 
573    \textcolor{comment}{//Point to the beginning of the IGMP message}
574    message = \hyperlink{net__mem_8c_a20d30c9db547b3b2743368b589cf482b}{netBufferAt}(buffer, offset);
575 
576    \textcolor{comment}{//Format the Leave Group message}
577    message->type = \hyperlink{igmp_8h_a96d71ad3d8af39ebb9b9158bb78b65aca21da27f5f6f70cb7d71e6aeffb15c664}{IGMP\_TYPE\_LEAVE\_GROUP};
578    message->maxRespTime = 0;
579    message->checksum = 0;
580    message->groupAddr = \hyperlink{mib__common_8h_a3860e959b1b7dd73686a6e11424805e2}{ipAddr};
581 
582    \textcolor{comment}{//Message checksum calculation}
583    message->checksum = \hyperlink{ip_8c_a888dbaa377c95a06a4d511cb9ec4f278}{ipCalcChecksumEx}(buffer, offset, \textcolor{keyword}{sizeof}(
      \hyperlink{igmp_8h_a5272f6bc4b6ce32cc7aae99f18c47dd3}{IgmpMessage}));
584 
585    \textcolor{comment}{//Format IPv4 pseudo header}
586    pseudoHeader.srcAddr = interface->ipv4Context.addrList[0].addr;
587    pseudoHeader.destAddr = \hyperlink{igmp_8h_af59abc8cf8771d755dbb65655e844af1}{IGMP\_ALL\_ROUTERS\_ADDR};
588    pseudoHeader.reserved = 0;
589    pseudoHeader.protocol = \hyperlink{ipv4_8h_a113cd13f7321e81a3f55491fa3b7db23a02078354528a746f693591b186db927a}{IPV4\_PROTOCOL\_IGMP};
590    pseudoHeader.length = \hyperlink{cpu__endian_8h_a15540dbaeee98b6df80805f92e2f6759}{HTONS}(\textcolor{keyword}{sizeof}(\hyperlink{igmp_8h_a5272f6bc4b6ce32cc7aae99f18c47dd3}{IgmpMessage}));
591 
592    \textcolor{comment}{//Debug message}
593    \hyperlink{debug_8h_a7339bfd784193a5c79efcef2eeb2d6df}{TRACE\_INFO}(\textcolor{stringliteral}{"Sending IGMP message (%"} \hyperlink{compiler__port_8h_a2b7b0557dc6cd786df02dafbb51f5292}{PRIuSIZE} \textcolor{stringliteral}{" bytes)...\(\backslash\)r\(\backslash\)n"}, \textcolor{keyword}{sizeof}(
      \hyperlink{igmp_8h_a5272f6bc4b6ce32cc7aae99f18c47dd3}{IgmpMessage}));
594    \textcolor{comment}{//Dump message contents for debugging purpose}
595    \hyperlink{igmp_8c_a995a877f6a786e08c501cdac70e3e9bd}{igmpDumpMessage}(message);
596 
597    \textcolor{comment}{//The Leave Group message is sent to the all-routers multicast group}
598    error = \hyperlink{ipv4_8c_a26addbb0c6bcabe165be9d7b96c4b4b1}{ipv4SendDatagram}(interface, &pseudoHeader, buffer, offset, 
      \hyperlink{igmp_8h_a6ff76a6f7654b21a70e216151c97a869}{IGMP\_TTL});
599 
600    \textcolor{comment}{//Free previously allocated memory}
601    \hyperlink{net__mem_8c_aa33fc4dd2a71649194052f297c707d08}{netBufferFree}(buffer);
602    \textcolor{comment}{//Return status code}
603    \textcolor{keywordflow}{return} error;
604 \}
\end{DoxyCode}
\mbox{\Hypertarget{igmp_8c_a353f3fa45c5b834265b95c33077ef5f7}\label{igmp_8c_a353f3fa45c5b834265b95c33077ef5f7}} 
\index{igmp.\+c@{igmp.\+c}!igmp\+Send\+Report\+Message@{igmp\+Send\+Report\+Message}}
\index{igmp\+Send\+Report\+Message@{igmp\+Send\+Report\+Message}!igmp.\+c@{igmp.\+c}}
\subsubsection{\texorpdfstring{igmp\+Send\+Report\+Message()}{igmpSendReportMessage()}}
{\footnotesize\ttfamily \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689c}{error\+\_\+t} igmp\+Send\+Report\+Message (\begin{DoxyParamCaption}\item[{\hyperlink{net_8h_a2234db8911a1148c9159979d8f5e0d6b}{Net\+Interface} $\ast$}]{interface,  }\item[{\hyperlink{ipv4_8h_a411debb3d770caa0c06d3f73367da37f}{Ipv4\+Addr}}]{ip\+Addr }\end{DoxyParamCaption})}



Send Membership Report message. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em interface} & Underlying network interface \\
\hline
\mbox{\tt in}  & {\em ip\+Addr} & I\+Pv4 address specifying the group address \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Error code 
\end{DoxyReturn}


Definition at line 476 of file igmp.\+c.


\begin{DoxyCode}
477 \{
478    \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689c}{error\_t} error;
479    \textcolor{keywordtype}{size\_t} \hyperlink{pic32mz_2isr__support_8h_a12a5aed8a193ebbf9a641104a310610d}{offset};
480    \hyperlink{igmp_8h_a5272f6bc4b6ce32cc7aae99f18c47dd3}{IgmpMessage} *\hyperlink{chap_8h_a52f19d36a71e9b8ddea38fe00c291181}{message};
481    \hyperlink{structNetBuffer}{NetBuffer} *buffer;
482    \hyperlink{ipv4_8h_a0e92b64e038199f1bb6383f2a76f30b6}{Ipv4PseudoHeader} pseudoHeader;
483 
484    \textcolor{comment}{//Make sure the specified address is a valid multicast address}
485    \textcolor{keywordflow}{if}(!\hyperlink{ipv4_8h_aada5b622e70acf16bd1cd5a9c08ea107}{ipv4IsMulticastAddr}(\hyperlink{mib__common_8h_a3860e959b1b7dd73686a6e11424805e2}{ipAddr}))
486       \textcolor{keywordflow}{return} \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689ca21cbabf2c791471c05a9bc2710638aec}{ERROR\_INVALID\_ADDRESS};
487 
488    \textcolor{comment}{//The all-systems group (224.0.0.1) is handled as a special case.}
489    \textcolor{comment}{//The host never sends a report for that group}
490    \textcolor{keywordflow}{if}(\hyperlink{mib__common_8h_a3860e959b1b7dd73686a6e11424805e2}{ipAddr} == \hyperlink{igmp_8h_ae2df9640f294bc95a5f646769b8930da}{IGMP\_ALL\_SYSTEMS\_ADDR})
491       \textcolor{keywordflow}{return} \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689ca21cbabf2c791471c05a9bc2710638aec}{ERROR\_INVALID\_ADDRESS};
492 
493    \textcolor{comment}{//Allocate a memory buffer to hold an IGMP message}
494    buffer = \hyperlink{ip_8c_a2222fb64b1b18140283119eea309c1b3}{ipAllocBuffer}(\textcolor{keyword}{sizeof}(\hyperlink{igmp_8h_a5272f6bc4b6ce32cc7aae99f18c47dd3}{IgmpMessage}), &offset);
495    \textcolor{comment}{//Failed to allocate memory?}
496    \textcolor{keywordflow}{if}(buffer == \hyperlink{group__BSPDefine_ga070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL})
497       \textcolor{keywordflow}{return} \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689cac0a554045048d2fb61387cf735676f69}{ERROR\_OUT\_OF\_MEMORY};
498 
499    \textcolor{comment}{//Point to the beginning of the IGMP message}
500    message = \hyperlink{net__mem_8c_a20d30c9db547b3b2743368b589cf482b}{netBufferAt}(buffer, offset);
501 
502    \textcolor{comment}{//The type of report is determined by the state of the interface}
503    \textcolor{keywordflow}{if}(interface->igmpv1RouterPresent)
504       message->type = \hyperlink{igmp_8h_a96d71ad3d8af39ebb9b9158bb78b65acaeb7639101b1c6da606bb05b871b22bec}{IGMP\_TYPE\_MEMBERSHIP\_REPORT\_V1};
505    \textcolor{keywordflow}{else}
506       message->type = \hyperlink{igmp_8h_a96d71ad3d8af39ebb9b9158bb78b65acacd49f6a2df8f68c587f6d02b954cab3f}{IGMP\_TYPE\_MEMBERSHIP\_REPORT\_V2};
507 
508    \textcolor{comment}{//Format the Membership Report message}
509    message->maxRespTime = 0;
510    message->checksum = 0;
511    message->groupAddr = \hyperlink{mib__common_8h_a3860e959b1b7dd73686a6e11424805e2}{ipAddr};
512 
513    \textcolor{comment}{//Message checksum calculation}
514    message->checksum = \hyperlink{ip_8c_a888dbaa377c95a06a4d511cb9ec4f278}{ipCalcChecksumEx}(buffer, offset, \textcolor{keyword}{sizeof}(
      \hyperlink{igmp_8h_a5272f6bc4b6ce32cc7aae99f18c47dd3}{IgmpMessage}));
515 
516    \textcolor{comment}{//Format IPv4 pseudo header}
517    pseudoHeader.srcAddr = interface->ipv4Context.addrList[0].addr;
518    pseudoHeader.destAddr = \hyperlink{mib__common_8h_a3860e959b1b7dd73686a6e11424805e2}{ipAddr};
519    pseudoHeader.reserved = 0;
520    pseudoHeader.protocol = \hyperlink{ipv4_8h_a113cd13f7321e81a3f55491fa3b7db23a02078354528a746f693591b186db927a}{IPV4\_PROTOCOL\_IGMP};
521    pseudoHeader.length = \hyperlink{cpu__endian_8h_a15540dbaeee98b6df80805f92e2f6759}{HTONS}(\textcolor{keyword}{sizeof}(\hyperlink{igmp_8h_a5272f6bc4b6ce32cc7aae99f18c47dd3}{IgmpMessage}));
522 
523    \textcolor{comment}{//Debug message}
524    \hyperlink{debug_8h_a7339bfd784193a5c79efcef2eeb2d6df}{TRACE\_INFO}(\textcolor{stringliteral}{"Sending IGMP message (%"} \hyperlink{compiler__port_8h_a2b7b0557dc6cd786df02dafbb51f5292}{PRIuSIZE} \textcolor{stringliteral}{" bytes)...\(\backslash\)r\(\backslash\)n"}, \textcolor{keyword}{sizeof}(
      \hyperlink{igmp_8h_a5272f6bc4b6ce32cc7aae99f18c47dd3}{IgmpMessage}));
525    \textcolor{comment}{//Dump message contents for debugging purpose}
526    \hyperlink{igmp_8c_a995a877f6a786e08c501cdac70e3e9bd}{igmpDumpMessage}(message);
527 
528    \textcolor{comment}{//The Membership Report message is sent to the group being reported}
529    error = \hyperlink{ipv4_8c_a26addbb0c6bcabe165be9d7b96c4b4b1}{ipv4SendDatagram}(interface, &pseudoHeader, buffer, offset, 
      \hyperlink{igmp_8h_a6ff76a6f7654b21a70e216151c97a869}{IGMP\_TTL});
530 
531    \textcolor{comment}{//Free previously allocated memory}
532    \hyperlink{net__mem_8c_aa33fc4dd2a71649194052f297c707d08}{netBufferFree}(buffer);
533    \textcolor{comment}{//Return status code}
534    \textcolor{keywordflow}{return} error;
535 \}
\end{DoxyCode}
\mbox{\Hypertarget{igmp_8c_af842aaa35305590982d9db0e762ccdb7}\label{igmp_8c_af842aaa35305590982d9db0e762ccdb7}} 
\index{igmp.\+c@{igmp.\+c}!igmp\+Tick@{igmp\+Tick}}
\index{igmp\+Tick@{igmp\+Tick}!igmp.\+c@{igmp.\+c}}
\subsubsection{\texorpdfstring{igmp\+Tick()}{igmpTick()}}
{\footnotesize\ttfamily void igmp\+Tick (\begin{DoxyParamCaption}\item[{\hyperlink{net_8h_a2234db8911a1148c9159979d8f5e0d6b}{Net\+Interface} $\ast$}]{interface }\end{DoxyParamCaption})}



I\+G\+MP timer handler. 

This routine must be periodically called by the T\+C\+P/\+IP stack to handle I\+G\+MP related timers


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em interface} & Underlying network interface \\
\hline
\end{DoxyParams}


Definition at line 160 of file igmp.\+c.


\begin{DoxyCode}
161 \{
162    \hyperlink{compiler__port_8h_a12a1e9b3ce141648783a82445d02b58d}{uint\_t} i;
163    \hyperlink{compiler__port_8h_ae3e32a98d431a02106616da3071832dd}{systime\_t} \hyperlink{dhcpv6__common_8h_ae73654f333e4363463ad8c594eca1905}{time};
164    \hyperlink{structIpv4FilterEntry}{Ipv4FilterEntry} *entry;
165 
166    \textcolor{comment}{//Get current time}
167    time = \hyperlink{os__port__chibios_8c_ab66a11272d40a916fa69dd8e4dc443d4}{osGetSystemTime}();
168 
169    \textcolor{comment}{//Check IGMPv1 router present timer}
170    \textcolor{keywordflow}{if}(\hyperlink{os__port_8h_a25c13833ef003da02045a91b1080263a}{timeCompare}(time, interface->igmpv1RouterPresentTimer) >= 0)
171       interface->igmpv1RouterPresent = \hyperlink{os__port_8h_aa93f0eb578d23995850d61f7d61c55c1}{FALSE};
172 
173    \textcolor{comment}{//Go through the multicast filter table}
174    \textcolor{keywordflow}{for}(i = 0; i < \hyperlink{ipv4_8h_abad540441745129e90052cdfd1b27943}{IPV4\_MULTICAST\_FILTER\_SIZE}; i++)
175    \{
176       \textcolor{comment}{//Point to the current entry}
177       entry = &interface->ipv4Context.multicastFilter[i];
178 
179       \textcolor{comment}{//Valid entry?}
180       \textcolor{keywordflow}{if}(entry->\hyperlink{structIpv4FilterEntry_a6841595a84b65414b1b30aa0ef5ef1e6}{refCount} > 0)
181       \{
182          \textcolor{comment}{//Delaying Member state?}
183          \textcolor{keywordflow}{if}(entry->\hyperlink{structIpv4FilterEntry_abc0b2be8dd44f499324d119243959111}{state} == \hyperlink{igmp_8h_ae0708ed3a74176c0163189a95e280ee2a1e8b0d650bdd2b8869e1416b745f73c4}{IGMP\_STATE\_DELAYING\_MEMBER})
184          \{
185             \textcolor{comment}{//Timer expired?}
186             \textcolor{keywordflow}{if}(\hyperlink{os__port_8h_a25c13833ef003da02045a91b1080263a}{timeCompare}(time, entry->\hyperlink{structIpv4FilterEntry_aaa44209273e6a296c3e63b789f7441d4}{timer}) >= 0)
187             \{
188                \textcolor{comment}{//Send a Membership Report message for the group on the interface}
189                \hyperlink{igmp_8c_a353f3fa45c5b834265b95c33077ef5f7}{igmpSendReportMessage}(interface, entry->\hyperlink{structIpv4FilterEntry_a81c9fd6af892b3527845d3b39d3b256d}{addr});
190 
191                \textcolor{comment}{//Set flag}
192                entry->\hyperlink{structIpv4FilterEntry_a3821e585190d92f01df1529e828c124f}{flag} = \hyperlink{os__port_8h_aa8cecfc5c5c054d2875c03e77b7be15d}{TRUE};
193                \textcolor{comment}{//Switch to the Idle Member state}
194                entry->\hyperlink{structIpv4FilterEntry_abc0b2be8dd44f499324d119243959111}{state} = \hyperlink{igmp_8h_ae0708ed3a74176c0163189a95e280ee2a58e5bc240c4336678551655793a2a629}{IGMP\_STATE\_IDLE\_MEMBER};
195             \}
196          \}
197       \}
198    \}
199 \}
\end{DoxyCode}


\subsection{Variable Documentation}
\mbox{\Hypertarget{igmp_8c_a04bf70fce2f50dde04956ed9b26c49f8}\label{igmp_8c_a04bf70fce2f50dde04956ed9b26c49f8}} 
\index{igmp.\+c@{igmp.\+c}!igmp\+Tick\+Counter@{igmp\+Tick\+Counter}}
\index{igmp\+Tick\+Counter@{igmp\+Tick\+Counter}!igmp.\+c@{igmp.\+c}}
\subsubsection{\texorpdfstring{igmp\+Tick\+Counter}{igmpTickCounter}}
{\footnotesize\ttfamily \hyperlink{compiler__port_8h_ae3e32a98d431a02106616da3071832dd}{systime\+\_\+t} igmp\+Tick\+Counter}



Definition at line 53 of file igmp.\+c.

