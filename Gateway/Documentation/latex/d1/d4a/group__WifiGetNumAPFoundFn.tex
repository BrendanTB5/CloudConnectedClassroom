\hypertarget{group__WifiGetNumAPFoundFn}{}\section{m2m\+\_\+wifi\+\_\+get\+\_\+num\+\_\+ap\+\_\+found}
\label{group__WifiGetNumAPFoundFn}\index{m2m\+\_\+wifi\+\_\+get\+\_\+num\+\_\+ap\+\_\+found@{m2m\+\_\+wifi\+\_\+get\+\_\+num\+\_\+ap\+\_\+found}}
\subsection*{Functions}
\begin{DoxyCompactItemize}
\item 
\hyperlink{group__BSPDefine_gaecc0323d771e41ef81a76b5f12783e22}{N\+M\+I\+\_\+\+A\+PI} \hyperlink{group__DataT_ga4df709a77647e870bbf1d955b8edc9a6}{uint8} \hyperlink{group__WifiGetNumAPFoundFn_gac92223273822358f4aee6e133b11815d}{m2m\+\_\+wifi\+\_\+get\+\_\+num\+\_\+ap\+\_\+found} (void)
\begin{DoxyCompactList}\small\item\em Reads the number of AP\textquotesingle{}s found in the last Scan Request, The function read the number of AP\textquotesingle{}s from global variable which updated in the wifi\+\_\+cb in M2\+M\+\_\+\+W\+I\+F\+I\+\_\+\+R\+E\+S\+P\+\_\+\+S\+C\+A\+N\+\_\+\+D\+O\+NE. \end{DoxyCompactList}\end{DoxyCompactItemize}


\subsection{Detailed Description}
Synchronous function to retrieve the number of AP\textquotesingle{}s found in the last scan request, The function read the number of AP\textquotesingle{}s from global variable which updated in the wi-\/fi callback fucntion through the \hyperlink{group__WlanEnums_gga064de09dec1d5e88ed8d075fa40f57dead835febbe18b7e3cc6ce4693951354fe}{M2\+M\+\_\+\+W\+I\+F\+I\+\_\+\+R\+E\+S\+P\+\_\+\+S\+C\+A\+N\+\_\+\+D\+O\+NE} event. Function used only in S\+TA mode only. 

\subsection{Function Documentation}
\mbox{\Hypertarget{group__WifiGetNumAPFoundFn_gac92223273822358f4aee6e133b11815d}\label{group__WifiGetNumAPFoundFn_gac92223273822358f4aee6e133b11815d}} 
\index{m2m\+\_\+wifi\+\_\+get\+\_\+num\+\_\+ap\+\_\+found@{m2m\+\_\+wifi\+\_\+get\+\_\+num\+\_\+ap\+\_\+found}!m2m\+\_\+wifi\+\_\+get\+\_\+num\+\_\+ap\+\_\+found@{m2m\+\_\+wifi\+\_\+get\+\_\+num\+\_\+ap\+\_\+found}}
\index{m2m\+\_\+wifi\+\_\+get\+\_\+num\+\_\+ap\+\_\+found@{m2m\+\_\+wifi\+\_\+get\+\_\+num\+\_\+ap\+\_\+found}!m2m\+\_\+wifi\+\_\+get\+\_\+num\+\_\+ap\+\_\+found@{m2m\+\_\+wifi\+\_\+get\+\_\+num\+\_\+ap\+\_\+found}}
\subsubsection{\texorpdfstring{m2m\+\_\+wifi\+\_\+get\+\_\+num\+\_\+ap\+\_\+found()}{m2m\_wifi\_get\_num\_ap\_found()}}
{\footnotesize\ttfamily \hyperlink{group__BSPDefine_gaecc0323d771e41ef81a76b5f12783e22}{N\+M\+I\+\_\+\+A\+PI} \hyperlink{group__DataT_ga4df709a77647e870bbf1d955b8edc9a6}{uint8} m2m\+\_\+wifi\+\_\+get\+\_\+num\+\_\+ap\+\_\+found (\begin{DoxyParamCaption}\item[{void}]{ }\end{DoxyParamCaption})}



{\ttfamily \#include $<$\hyperlink{m2m__wifi_8h}{third\+\_\+party/atmel/devices/wilc1000/driver/include/m2m\+\_\+wifi.\+h}$>$}



Reads the number of AP\textquotesingle{}s found in the last Scan Request, The function read the number of AP\textquotesingle{}s from global variable which updated in the wifi\+\_\+cb in M2\+M\+\_\+\+W\+I\+F\+I\+\_\+\+R\+E\+S\+P\+\_\+\+S\+C\+A\+N\+\_\+\+D\+O\+NE. 

\begin{DoxySeeAlso}{See also}
\hyperlink{group__WifiRequestScanFn_ga499dfa24a19c2e84776aeabedf897135}{m2m\+\_\+wifi\+\_\+request\+\_\+scan} \hyperlink{group__WlanEnums_gga064de09dec1d5e88ed8d075fa40f57dead835febbe18b7e3cc6ce4693951354fe}{M2\+M\+\_\+\+W\+I\+F\+I\+\_\+\+R\+E\+S\+P\+\_\+\+S\+C\+A\+N\+\_\+\+D\+O\+NE} \hyperlink{group__WlanEnums_gga064de09dec1d5e88ed8d075fa40f57deadfb48e88c3a8e5f9dac634d62d3f53e5}{M2\+M\+\_\+\+W\+I\+F\+I\+\_\+\+R\+E\+S\+P\+\_\+\+S\+C\+A\+N\+\_\+\+R\+E\+S\+U\+LT} 
\end{DoxySeeAlso}
\begin{DoxyPrecond}{Precondition}
m2m\+\_\+wifi\+\_\+request\+\_\+scan need to be called first
\begin{DoxyItemize}
\item A Wi-\/\+Fi notification callback of type \hyperlink{group__WlanEnums_gac5302f32839285fe8375c159087aa8a1}{tpf\+App\+Wifi\+Cb} M\+U\+ST be implemented and registered at intialization. Registering the callback is done through passing it to the \hyperlink{group__WifiInitFn_ga73c734812e844d96d860c4e93e9daf35}{m2m\+\_\+wifi\+\_\+init}.
\item The event \hyperlink{group__WlanEnums_gga064de09dec1d5e88ed8d075fa40f57dead835febbe18b7e3cc6ce4693951354fe}{M2\+M\+\_\+\+W\+I\+F\+I\+\_\+\+R\+E\+S\+P\+\_\+\+S\+C\+A\+N\+\_\+\+D\+O\+NE} must be handled in the callback to receive the requested connection information. 
\end{DoxyItemize}
\end{DoxyPrecond}
\begin{DoxyWarning}{Warning}
This function must be called only in the wi-\/fi callback function when the events \hyperlink{group__WlanEnums_gga064de09dec1d5e88ed8d075fa40f57dead835febbe18b7e3cc6ce4693951354fe}{M2\+M\+\_\+\+W\+I\+F\+I\+\_\+\+R\+E\+S\+P\+\_\+\+S\+C\+A\+N\+\_\+\+D\+O\+NE} or \hyperlink{group__WlanEnums_gga064de09dec1d5e88ed8d075fa40f57deadfb48e88c3a8e5f9dac634d62d3f53e5}{M2\+M\+\_\+\+W\+I\+F\+I\+\_\+\+R\+E\+S\+P\+\_\+\+S\+C\+A\+N\+\_\+\+R\+E\+S\+U\+LT} are received. Calling this function in any other place will result in undefined/outdated numbers. 
\end{DoxyWarning}
\begin{DoxyReturn}{Returns}
Return the number of AP\textquotesingle{}s found in the last Scan Request.
\end{DoxyReturn}
\hypertarget{group__WifiEnableMonitorModeFn_Example}{}\subsection{Example}\label{group__WifiEnableMonitorModeFn_Example}
The code snippet demonstrates an example of how the scan request is called from the application\textquotesingle{}s main function and the handling of the events received in response. 
\begin{DoxyCode}
\textcolor{preprocessor}{#include "\hyperlink{m2m__wifi_8h}{m2m\_wifi.h}"}
\textcolor{preprocessor}{#include "\hyperlink{m2m__types_8h}{m2m\_types.h}"}

\textcolor{keywordtype}{void} wifi\_event\_cb(\hyperlink{group__DataT_ga4df709a77647e870bbf1d955b8edc9a6}{uint8} u8WiFiEvent, \textcolor{keywordtype}{void} * pvMsg)
\{
    \textcolor{keyword}{static} \hyperlink{group__DataT_ga4df709a77647e870bbf1d955b8edc9a6}{uint8}    u8ScanResultIdx = 0;
    
    \textcolor{keywordflow}{switch}(u8WiFiEvent)
    \{
    \textcolor{keywordflow}{case} \hyperlink{group__WlanEnums_gga064de09dec1d5e88ed8d075fa40f57dead835febbe18b7e3cc6ce4693951354fe}{M2M\_WIFI\_RESP\_SCAN\_DONE}:
        \{
            \hyperlink{structtstrM2mScanDone}{tstrM2mScanDone} *pstrInfo = (\hyperlink{structtstrM2mScanDone}{tstrM2mScanDone}*)pvMsg;
            
            printf(\textcolor{stringliteral}{"Num of AP found %d\(\backslash\)r\(\backslash\)n"},pstrInfo->\hyperlink{structtstrM2mScanDone_a1303b806dd93bfdd4b4a51ad750b023b}{u8NumofCh});
            \textcolor{keywordflow}{if}(pstrInfo->\hyperlink{structtstrM2mScanDone_adf06f5d0db8d0fb98e7674672ee8439d}{s8ScanState} == \hyperlink{nm__common_8h_a9ef27ba27aafdd1aa3a79d3ba2c36b8f}{M2M\_SUCCESS})
            \{
                u8ScanResultIdx = 0;
                \textcolor{keywordflow}{if}(pstrInfo->\hyperlink{structtstrM2mScanDone_a1303b806dd93bfdd4b4a51ad750b023b}{u8NumofCh} >= 1)
                \{
                    \hyperlink{group__WifiReqScanResult_ga2585ee08ee8ecac67155ec99dd4d0863}{m2m\_wifi\_req\_scan\_result}(u8ScanResultIdx);
                    u8ScanResultIdx ++;
                \}
                \textcolor{keywordflow}{else}
                \{
                    printf(\textcolor{stringliteral}{"No AP Found Rescan\(\backslash\)r\(\backslash\)n"});
                    \hyperlink{group__WifiRequestScanFn_ga499dfa24a19c2e84776aeabedf897135}{m2m\_wifi\_request\_scan}(\hyperlink{group__WlanEnums_gga2a91dd671e2672dba1a7ed45230f3a99a9ab262cc4f83b59a0710ffb80134c637}{M2M\_WIFI\_CH\_ALL});
                \}
            \}
            \textcolor{keywordflow}{else}
            \{
                printf(\textcolor{stringliteral}{"(ERR) Scan fail with error <%d>\(\backslash\)r\(\backslash\)n"},pstrInfo->
      \hyperlink{structtstrM2mScanDone_adf06f5d0db8d0fb98e7674672ee8439d}{s8ScanState});
            \}
        \}
        \textcolor{keywordflow}{break};
    
    \textcolor{keywordflow}{case} \hyperlink{group__WlanEnums_gga064de09dec1d5e88ed8d075fa40f57deadfb48e88c3a8e5f9dac634d62d3f53e5}{M2M\_WIFI\_RESP\_SCAN\_RESULT}:
        \{
            \hyperlink{structtstrM2mWifiscanResult}{tstrM2mWifiscanResult}       *pstrScanResult =(
      \hyperlink{structtstrM2mWifiscanResult}{tstrM2mWifiscanResult}*)pvMsg;
            \hyperlink{group__DataT_ga4df709a77647e870bbf1d955b8edc9a6}{uint8}                       u8NumFoundAPs = 
      \hyperlink{group__WifiGetNumAPFoundFn_gac92223273822358f4aee6e133b11815d}{m2m\_wifi\_get\_num\_ap\_found}();
            
            printf(\textcolor{stringliteral}{">>%02d RI %d SEC %s CH %02d BSSID %02X:%02X:%02X:%02X:%02X:%02X SSID %s\(\backslash\)r\(\backslash\)n"},
                pstrScanResult->\hyperlink{structtstrM2mWifiscanResult_a70c6b917a7693e2afcc8e912e10f1d96}{u8index},pstrScanResult->\hyperlink{structtstrM2mWifiscanResult_a34d94f696097c6c569b480fe4262a2cc}{s8rssi},
                pstrScanResult->\hyperlink{structtstrM2mWifiscanResult_a0b9dbf6b40e1def154c89c53a7ceb381}{u8AuthType},
                pstrScanResult->\hyperlink{structtstrM2mWifiscanResult_a345089f7fa5a6570886c340c08cfeb2e}{u8ch},
                pstrScanResult->\hyperlink{structtstrM2mWifiscanResult_ae1d4c47f31a39e2423d5c7894022b95c}{au8BSSID}[0], pstrScanResult->\hyperlink{structtstrM2mWifiscanResult_ae1d4c47f31a39e2423d5c7894022b95c}{au8BSSID}[1], pstrScanResult->
      \hyperlink{structtstrM2mWifiscanResult_ae1d4c47f31a39e2423d5c7894022b95c}{au8BSSID}[2],
                pstrScanResult->\hyperlink{structtstrM2mWifiscanResult_ae1d4c47f31a39e2423d5c7894022b95c}{au8BSSID}[3], pstrScanResult->\hyperlink{structtstrM2mWifiscanResult_ae1d4c47f31a39e2423d5c7894022b95c}{au8BSSID}[4], pstrScanResult->
      \hyperlink{structtstrM2mWifiscanResult_ae1d4c47f31a39e2423d5c7894022b95c}{au8BSSID}[5],
                pstrScanResult->\hyperlink{structtstrM2mWifiscanResult_a9636bd1e4481cde0a1523a97a394b185}{au8SSID});
            
            \textcolor{keywordflow}{if}(u8ScanResultIdx < u8NumFoundAPs)
            \{
                \textcolor{comment}{// Read the next scan result}
                \hyperlink{group__WifiReqScanResult_ga2585ee08ee8ecac67155ec99dd4d0863}{m2m\_wifi\_req\_scan\_result}(index);
                u8ScanResultIdx ++;
            \}
        \}
        \textcolor{keywordflow}{break};
    \textcolor{keywordflow}{default}:
        \textcolor{keywordflow}{break};
    \}
\}

\textcolor{keywordtype}{int} \hyperlink{demo_2microchip_2pic32mz__ef__curiosity_2wifi__http__server__demo_2src_2main_8c_ac5a1eca594b063e0d2dbccf86f96f221}{main}()
\{
    \hyperlink{structtstrWifiInitParam}{tstrWifiInitParam}   param;
    
    param.\hyperlink{group__WifiSetCustInfoElementFn_ga13d5fa7a0c71fd59bbf36a61923835cc}{pfAppWifiCb}   = wifi\_event\_cb;
    \textcolor{keywordflow}{if}(!\hyperlink{group__WifiInitFn_ga73c734812e844d96d860c4e93e9daf35}{m2m\_wifi\_init}(&param))
    \{
        \textcolor{comment}{// Scan all channels}
        \hyperlink{group__WifiRequestScanFn_ga499dfa24a19c2e84776aeabedf897135}{m2m\_wifi\_request\_scan}(\hyperlink{group__WlanEnums_gga2a91dd671e2672dba1a7ed45230f3a99a9ab262cc4f83b59a0710ffb80134c637}{M2M\_WIFI\_CH\_ALL});
        
        \textcolor{keywordflow}{while}(1)
        \{
            \hyperlink{group__WifiHandleEventsFn_ga461a4edc057cec8c00cf124a07aa3b02}{m2m\_wifi\_handle\_events}(\hyperlink{group__BSPDefine_ga070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL});
        \}
    \}
\}
\end{DoxyCode}


\begin{DoxySeeAlso}{See also}
\hyperlink{group__WifiRequestScanFn_ga499dfa24a19c2e84776aeabedf897135}{m2m\+\_\+wifi\+\_\+request\+\_\+scan} 
\end{DoxySeeAlso}
\begin{DoxyReturn}{Returns}
Return the number of AP\textquotesingle{}s found in the last Scan Request. 
\end{DoxyReturn}
\begin{DoxyPrecond}{Precondition}
m2m\+\_\+wifi\+\_\+request\+\_\+scan need to be called first 
\end{DoxyPrecond}
\begin{DoxyWarning}{Warning}
That function need to be called in the wifi\+\_\+cb in M2\+M\+\_\+\+W\+I\+F\+I\+\_\+\+R\+E\+S\+P\+\_\+\+S\+C\+A\+N\+\_\+\+D\+O\+NE, calling that function in any other place will return undefined/undated numbers. Function used only in S\+TA mode only. 
\end{DoxyWarning}


Definition at line 728 of file m2m\+\_\+wifi.\+c.


\begin{DoxyCode}
729 \{
730     \textcolor{keywordflow}{return} \hyperlink{m2m__wifi_8c_aa88a68cf906f468b68747428aaed90e9}{gu8ChNum};
731 \}
\end{DoxyCode}
