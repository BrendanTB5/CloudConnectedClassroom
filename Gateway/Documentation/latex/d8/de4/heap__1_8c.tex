\hypertarget{heap__1_8c}{}\section{third\+\_\+party/freertos/portable/memmang/heap\+\_\+1.c File Reference}
\label{heap__1_8c}\index{third\+\_\+party/freertos/portable/memmang/heap\+\_\+1.\+c@{third\+\_\+party/freertos/portable/memmang/heap\+\_\+1.\+c}}
{\ttfamily \#include $<$stdlib.\+h$>$}\newline
{\ttfamily \#include \char`\"{}Free\+R\+T\+O\+S.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}task.\+h\char`\"{}}\newline
\subsection*{Macros}
\begin{DoxyCompactItemize}
\item 
\#define \hyperlink{heap__1_8c_ab622d8c674f2a417a666a7ed89109e79}{M\+P\+U\+\_\+\+W\+R\+A\+P\+P\+E\+R\+S\+\_\+\+I\+N\+C\+L\+U\+D\+E\+D\+\_\+\+F\+R\+O\+M\+\_\+\+A\+P\+I\+\_\+\+F\+I\+LE}
\item 
\#define \hyperlink{heap__1_8c_a3e68bebe7509a99550e1358cbca8e23f}{config\+A\+D\+J\+U\+S\+T\+E\+D\+\_\+\+H\+E\+A\+P\+\_\+\+S\+I\+ZE}~( \hyperlink{FreeRTOSConfig_8h_a9f213227674effff0122a75d94d87938}{config\+T\+O\+T\+A\+L\+\_\+\+H\+E\+A\+P\+\_\+\+S\+I\+ZE} -\/ \hyperlink{pic32mz_2portmacro_8h_ab9091ce3940d8bd93ec850122a2c6a1c}{port\+B\+Y\+T\+E\+\_\+\+A\+L\+I\+G\+N\+M\+E\+NT} )
\end{DoxyCompactItemize}
\subsection*{Functions}
\begin{DoxyCompactItemize}
\item 
void $\ast$ \hyperlink{heap__1_8c_a0379669d07d76cc81e3028123113b271}{pv\+Port\+Malloc} (size\+\_\+t x\+Wanted\+Size)
\item 
void \hyperlink{heap__1_8c_a1e7cea2fd1bc894ea3b5f5e8179d259b}{v\+Port\+Free} (void $\ast$pv)
\item 
void \hyperlink{heap__1_8c_a8bf103ce32ce8473574e9920af8b4eec}{v\+Port\+Initialise\+Blocks} (void)
\item 
size\+\_\+t \hyperlink{heap__1_8c_a0c28a12b313bc248be0cb7a37ed81bb7}{x\+Port\+Get\+Free\+Heap\+Size} (void)
\end{DoxyCompactItemize}
\subsection*{Variables}
\begin{DoxyCompactItemize}
\item 
static \hyperlink{stdint_8h_aba7bc1797add20fe3efdf37ced1182c5}{uint8\+\_\+t} \hyperlink{heap__1_8c_a286aa29b13471f0d9f5a7ce688682694}{uc\+Heap} \mbox{[}\hyperlink{FreeRTOSConfig_8h_a9f213227674effff0122a75d94d87938}{config\+T\+O\+T\+A\+L\+\_\+\+H\+E\+A\+P\+\_\+\+S\+I\+ZE}\mbox{]}
\item 
static size\+\_\+t \hyperlink{heap__1_8c_a9f84d71523e492ed69679829b2d827c4}{x\+Next\+Free\+Byte} = ( size\+\_\+t ) 0
\end{DoxyCompactItemize}


\subsection{Macro Definition Documentation}
\mbox{\Hypertarget{heap__1_8c_a3e68bebe7509a99550e1358cbca8e23f}\label{heap__1_8c_a3e68bebe7509a99550e1358cbca8e23f}} 
\index{heap\+\_\+1.\+c@{heap\+\_\+1.\+c}!config\+A\+D\+J\+U\+S\+T\+E\+D\+\_\+\+H\+E\+A\+P\+\_\+\+S\+I\+ZE@{config\+A\+D\+J\+U\+S\+T\+E\+D\+\_\+\+H\+E\+A\+P\+\_\+\+S\+I\+ZE}}
\index{config\+A\+D\+J\+U\+S\+T\+E\+D\+\_\+\+H\+E\+A\+P\+\_\+\+S\+I\+ZE@{config\+A\+D\+J\+U\+S\+T\+E\+D\+\_\+\+H\+E\+A\+P\+\_\+\+S\+I\+ZE}!heap\+\_\+1.\+c@{heap\+\_\+1.\+c}}
\subsubsection{\texorpdfstring{config\+A\+D\+J\+U\+S\+T\+E\+D\+\_\+\+H\+E\+A\+P\+\_\+\+S\+I\+ZE}{configADJUSTED\_HEAP\_SIZE}}
{\footnotesize\ttfamily \#define config\+A\+D\+J\+U\+S\+T\+E\+D\+\_\+\+H\+E\+A\+P\+\_\+\+S\+I\+ZE~( \hyperlink{FreeRTOSConfig_8h_a9f213227674effff0122a75d94d87938}{config\+T\+O\+T\+A\+L\+\_\+\+H\+E\+A\+P\+\_\+\+S\+I\+ZE} -\/ \hyperlink{pic32mz_2portmacro_8h_ab9091ce3940d8bd93ec850122a2c6a1c}{port\+B\+Y\+T\+E\+\_\+\+A\+L\+I\+G\+N\+M\+E\+NT} )}



Definition at line 53 of file heap\+\_\+1.\+c.

\mbox{\Hypertarget{heap__1_8c_ab622d8c674f2a417a666a7ed89109e79}\label{heap__1_8c_ab622d8c674f2a417a666a7ed89109e79}} 
\index{heap\+\_\+1.\+c@{heap\+\_\+1.\+c}!M\+P\+U\+\_\+\+W\+R\+A\+P\+P\+E\+R\+S\+\_\+\+I\+N\+C\+L\+U\+D\+E\+D\+\_\+\+F\+R\+O\+M\+\_\+\+A\+P\+I\+\_\+\+F\+I\+LE@{M\+P\+U\+\_\+\+W\+R\+A\+P\+P\+E\+R\+S\+\_\+\+I\+N\+C\+L\+U\+D\+E\+D\+\_\+\+F\+R\+O\+M\+\_\+\+A\+P\+I\+\_\+\+F\+I\+LE}}
\index{M\+P\+U\+\_\+\+W\+R\+A\+P\+P\+E\+R\+S\+\_\+\+I\+N\+C\+L\+U\+D\+E\+D\+\_\+\+F\+R\+O\+M\+\_\+\+A\+P\+I\+\_\+\+F\+I\+LE@{M\+P\+U\+\_\+\+W\+R\+A\+P\+P\+E\+R\+S\+\_\+\+I\+N\+C\+L\+U\+D\+E\+D\+\_\+\+F\+R\+O\+M\+\_\+\+A\+P\+I\+\_\+\+F\+I\+LE}!heap\+\_\+1.\+c@{heap\+\_\+1.\+c}}
\subsubsection{\texorpdfstring{M\+P\+U\+\_\+\+W\+R\+A\+P\+P\+E\+R\+S\+\_\+\+I\+N\+C\+L\+U\+D\+E\+D\+\_\+\+F\+R\+O\+M\+\_\+\+A\+P\+I\+\_\+\+F\+I\+LE}{MPU\_WRAPPERS\_INCLUDED\_FROM\_API\_FILE}}
{\footnotesize\ttfamily \#define M\+P\+U\+\_\+\+W\+R\+A\+P\+P\+E\+R\+S\+\_\+\+I\+N\+C\+L\+U\+D\+E\+D\+\_\+\+F\+R\+O\+M\+\_\+\+A\+P\+I\+\_\+\+F\+I\+LE}



Definition at line 41 of file heap\+\_\+1.\+c.



\subsection{Function Documentation}
\mbox{\Hypertarget{heap__1_8c_a0379669d07d76cc81e3028123113b271}\label{heap__1_8c_a0379669d07d76cc81e3028123113b271}} 
\index{heap\+\_\+1.\+c@{heap\+\_\+1.\+c}!pv\+Port\+Malloc@{pv\+Port\+Malloc}}
\index{pv\+Port\+Malloc@{pv\+Port\+Malloc}!heap\+\_\+1.\+c@{heap\+\_\+1.\+c}}
\subsubsection{\texorpdfstring{pv\+Port\+Malloc()}{pvPortMalloc()}}
{\footnotesize\ttfamily void$\ast$ pv\+Port\+Malloc (\begin{DoxyParamCaption}\item[{size\+\_\+t}]{x\+Wanted\+Size }\end{DoxyParamCaption})}



Definition at line 69 of file heap\+\_\+1.\+c.


\begin{DoxyCode}
70 \{
71 \textcolor{keywordtype}{void} *pvReturn = \hyperlink{group__BSPDefine_ga070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL};
72 \textcolor{keyword}{static} \hyperlink{stdint_8h_aba7bc1797add20fe3efdf37ced1182c5}{uint8\_t} *pucAlignedHeap = \hyperlink{group__BSPDefine_ga070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL};
73 
74     \textcolor{comment}{/* Ensure that blocks are always aligned to the required number of bytes. */}
75 \textcolor{preprocessor}{    #if( portBYTE\_ALIGNMENT != 1 )}
76     \{
77         \textcolor{keywordflow}{if}( xWantedSize & portBYTE\_ALIGNMENT\_MASK )
78         \{
79             \textcolor{comment}{/* Byte alignment required. */}
80             xWantedSize += ( \hyperlink{pic32mx_2portmacro_8h_ab9091ce3940d8bd93ec850122a2c6a1c}{portBYTE\_ALIGNMENT} - ( xWantedSize & portBYTE\_ALIGNMENT\_MASK
       ) );
81         \}
82     \}
83 \textcolor{preprocessor}{    #endif}
84 
85     \hyperlink{task_8h_a366b302eba79d10b5ee2a3756f0fcc43}{vTaskSuspendAll}();
86     \{
87         \textcolor{keywordflow}{if}( pucAlignedHeap == \hyperlink{group__BSPDefine_ga070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL} )
88         \{
89             \textcolor{comment}{/* Ensure the heap starts on a correctly aligned boundary. */}
90             pucAlignedHeap = ( \hyperlink{stdint_8h_aba7bc1797add20fe3efdf37ced1182c5}{uint8\_t} * ) ( ( ( \hyperlink{FreeRTOS_8h_a53bae25f223b7156dce0fc6e6b1b2295}{portPOINTER\_SIZE\_TYPE} ) &
      \hyperlink{heap__1_8c_a286aa29b13471f0d9f5a7ce688682694}{ucHeap}[ \hyperlink{pic32mx_2portmacro_8h_ab9091ce3940d8bd93ec850122a2c6a1c}{portBYTE\_ALIGNMENT} ] ) & ( ~( ( 
      \hyperlink{FreeRTOS_8h_a53bae25f223b7156dce0fc6e6b1b2295}{portPOINTER\_SIZE\_TYPE} ) portBYTE\_ALIGNMENT\_MASK ) ) );
91         \}
92 
93         \textcolor{comment}{/* Check there is enough room left for the allocation. */}
94         \textcolor{keywordflow}{if}( ( ( \hyperlink{heap__1_8c_a9f84d71523e492ed69679829b2d827c4}{xNextFreeByte} + xWantedSize ) < 
      \hyperlink{heap__1_8c_a3e68bebe7509a99550e1358cbca8e23f}{configADJUSTED\_HEAP\_SIZE} ) &&
95             ( ( \hyperlink{heap__1_8c_a9f84d71523e492ed69679829b2d827c4}{xNextFreeByte} + xWantedSize ) > \hyperlink{heap__1_8c_a9f84d71523e492ed69679829b2d827c4}{xNextFreeByte} )   )\textcolor{comment}{/* Check for
       overflow. */}
96         \{
97             \textcolor{comment}{/* Return the next free byte then increment the index past this}
98 \textcolor{comment}{            block. */}
99             pvReturn = pucAlignedHeap + \hyperlink{heap__1_8c_a9f84d71523e492ed69679829b2d827c4}{xNextFreeByte};
100             xNextFreeByte += xWantedSize;
101         \}
102 
103         \hyperlink{FreeRTOS_8h_af326afe922ffa6da245c98dc227a3293}{traceMALLOC}( pvReturn, xWantedSize );
104     \}
105     ( void ) \hyperlink{task_8h_a003f8ae6d649225abd030cc76e1c7d0e}{xTaskResumeAll}();
106 
107 \textcolor{preprocessor}{    #if( configUSE\_MALLOC\_FAILED\_HOOK == 1 )}
108     \{
109         \textcolor{keywordflow}{if}( pvReturn == \hyperlink{group__BSPDefine_ga070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL} )
110         \{
111             \textcolor{keyword}{extern} \textcolor{keywordtype}{void} vApplicationMallocFailedHook( \textcolor{keywordtype}{void} );
112             vApplicationMallocFailedHook();
113         \}
114     \}
115 \textcolor{preprocessor}{    #endif}
116 
117     \textcolor{keywordflow}{return} pvReturn;
118 \}
\end{DoxyCode}
\mbox{\Hypertarget{heap__1_8c_a1e7cea2fd1bc894ea3b5f5e8179d259b}\label{heap__1_8c_a1e7cea2fd1bc894ea3b5f5e8179d259b}} 
\index{heap\+\_\+1.\+c@{heap\+\_\+1.\+c}!v\+Port\+Free@{v\+Port\+Free}}
\index{v\+Port\+Free@{v\+Port\+Free}!heap\+\_\+1.\+c@{heap\+\_\+1.\+c}}
\subsubsection{\texorpdfstring{v\+Port\+Free()}{vPortFree()}}
{\footnotesize\ttfamily void v\+Port\+Free (\begin{DoxyParamCaption}\item[{void $\ast$}]{pv }\end{DoxyParamCaption})}



Definition at line 121 of file heap\+\_\+1.\+c.


\begin{DoxyCode}
122 \{
123     \textcolor{comment}{/* Memory cannot be freed using this scheme.  See heap\_2.c, heap\_3.c and}
124 \textcolor{comment}{    heap\_4.c for alternative implementations, and the memory management pages of}
125 \textcolor{comment}{    http://www.FreeRTOS.org for more information. */}
126     ( void ) pv;
127 
128     \textcolor{comment}{/* Force an assert as it is invalid to call this function. */}
129     \hyperlink{FreeRTOS_8h_a228c70cd48927d6ab730ed1a6dfbe35f}{configASSERT}( pv == \hyperlink{group__BSPDefine_ga070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL} );
130 \}
\end{DoxyCode}
\mbox{\Hypertarget{heap__1_8c_a8bf103ce32ce8473574e9920af8b4eec}\label{heap__1_8c_a8bf103ce32ce8473574e9920af8b4eec}} 
\index{heap\+\_\+1.\+c@{heap\+\_\+1.\+c}!v\+Port\+Initialise\+Blocks@{v\+Port\+Initialise\+Blocks}}
\index{v\+Port\+Initialise\+Blocks@{v\+Port\+Initialise\+Blocks}!heap\+\_\+1.\+c@{heap\+\_\+1.\+c}}
\subsubsection{\texorpdfstring{v\+Port\+Initialise\+Blocks()}{vPortInitialiseBlocks()}}
{\footnotesize\ttfamily void v\+Port\+Initialise\+Blocks (\begin{DoxyParamCaption}\item[{void}]{ }\end{DoxyParamCaption})}



Definition at line 133 of file heap\+\_\+1.\+c.


\begin{DoxyCode}
134 \{
135     \textcolor{comment}{/* Only required when static memory is not cleared. */}
136     \hyperlink{heap__1_8c_a9f84d71523e492ed69679829b2d827c4}{xNextFreeByte} = ( size\_t ) 0;
137 \}
\end{DoxyCode}
\mbox{\Hypertarget{heap__1_8c_a0c28a12b313bc248be0cb7a37ed81bb7}\label{heap__1_8c_a0c28a12b313bc248be0cb7a37ed81bb7}} 
\index{heap\+\_\+1.\+c@{heap\+\_\+1.\+c}!x\+Port\+Get\+Free\+Heap\+Size@{x\+Port\+Get\+Free\+Heap\+Size}}
\index{x\+Port\+Get\+Free\+Heap\+Size@{x\+Port\+Get\+Free\+Heap\+Size}!heap\+\_\+1.\+c@{heap\+\_\+1.\+c}}
\subsubsection{\texorpdfstring{x\+Port\+Get\+Free\+Heap\+Size()}{xPortGetFreeHeapSize()}}
{\footnotesize\ttfamily size\+\_\+t x\+Port\+Get\+Free\+Heap\+Size (\begin{DoxyParamCaption}\item[{void}]{ }\end{DoxyParamCaption})}



Definition at line 140 of file heap\+\_\+1.\+c.


\begin{DoxyCode}
141 \{
142     \textcolor{keywordflow}{return} ( \hyperlink{heap__1_8c_a3e68bebe7509a99550e1358cbca8e23f}{configADJUSTED\_HEAP\_SIZE} - \hyperlink{heap__1_8c_a9f84d71523e492ed69679829b2d827c4}{xNextFreeByte} );
143 \}
\end{DoxyCode}


\subsection{Variable Documentation}
\mbox{\Hypertarget{heap__1_8c_a286aa29b13471f0d9f5a7ce688682694}\label{heap__1_8c_a286aa29b13471f0d9f5a7ce688682694}} 
\index{heap\+\_\+1.\+c@{heap\+\_\+1.\+c}!uc\+Heap@{uc\+Heap}}
\index{uc\+Heap@{uc\+Heap}!heap\+\_\+1.\+c@{heap\+\_\+1.\+c}}
\subsubsection{\texorpdfstring{uc\+Heap}{ucHeap}}
{\footnotesize\ttfamily \hyperlink{stdint_8h_aba7bc1797add20fe3efdf37ced1182c5}{uint8\+\_\+t} uc\+Heap\mbox{[}\hyperlink{FreeRTOSConfig_8h_a9f213227674effff0122a75d94d87938}{config\+T\+O\+T\+A\+L\+\_\+\+H\+E\+A\+P\+\_\+\+S\+I\+ZE}\mbox{]}\hspace{0.3cm}{\ttfamily [static]}}



Definition at line 61 of file heap\+\_\+1.\+c.

\mbox{\Hypertarget{heap__1_8c_a9f84d71523e492ed69679829b2d827c4}\label{heap__1_8c_a9f84d71523e492ed69679829b2d827c4}} 
\index{heap\+\_\+1.\+c@{heap\+\_\+1.\+c}!x\+Next\+Free\+Byte@{x\+Next\+Free\+Byte}}
\index{x\+Next\+Free\+Byte@{x\+Next\+Free\+Byte}!heap\+\_\+1.\+c@{heap\+\_\+1.\+c}}
\subsubsection{\texorpdfstring{x\+Next\+Free\+Byte}{xNextFreeByte}}
{\footnotesize\ttfamily size\+\_\+t x\+Next\+Free\+Byte = ( size\+\_\+t ) 0\hspace{0.3cm}{\ttfamily [static]}}



Definition at line 65 of file heap\+\_\+1.\+c.

