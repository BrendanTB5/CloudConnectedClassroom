\hypertarget{mld_8c}{}\section{cyclone\+\_\+tcp/ipv6/mld.c File Reference}
\label{mld_8c}\index{cyclone\+\_\+tcp/ipv6/mld.\+c@{cyclone\+\_\+tcp/ipv6/mld.\+c}}


M\+LD (Multicast Listener Discovery for I\+Pv6)  


{\ttfamily \#include \char`\"{}core/net.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}core/ip.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}ipv6/ipv6.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}ipv6/icmpv6.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}ipv6/mld.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}mibs/ip\+\_\+mib\+\_\+module.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}debug.\+h\char`\"{}}\newline
\subsection*{Macros}
\begin{DoxyCompactItemize}
\item 
\#define \hyperlink{mld_8c_afcdf5e66fd927a7f4cc64295acd20407}{T\+R\+A\+C\+E\+\_\+\+L\+E\+V\+EL}~\hyperlink{net__config_8h_af13968f444f77e4890395a3faca3435d}{M\+L\+D\+\_\+\+T\+R\+A\+C\+E\+\_\+\+L\+E\+V\+EL}
\end{DoxyCompactItemize}
\subsection*{Functions}
\begin{DoxyCompactItemize}
\item 
\hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689c}{error\+\_\+t} \hyperlink{mld_8c_ab8edb89c9d91649e626c61553d49a909}{mld\+Init} (\hyperlink{net_8h_a2234db8911a1148c9159979d8f5e0d6b}{Net\+Interface} $\ast$interface)
\begin{DoxyCompactList}\small\item\em M\+LD initialization. \end{DoxyCompactList}\item 
\hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689c}{error\+\_\+t} \hyperlink{mld_8c_a2fc7e7ae56a7dff1efe2195c0840121b}{mld\+Start\+Listening} (\hyperlink{net_8h_a2234db8911a1148c9159979d8f5e0d6b}{Net\+Interface} $\ast$interface, \hyperlink{structIpv6FilterEntry}{Ipv6\+Filter\+Entry} $\ast$entry)
\begin{DoxyCompactList}\small\item\em Start listening to the address on the interface. \end{DoxyCompactList}\item 
\hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689c}{error\+\_\+t} \hyperlink{mld_8c_aac28272a35521c283e3e348f3de4d4f5}{mld\+Stop\+Listening} (\hyperlink{net_8h_a2234db8911a1148c9159979d8f5e0d6b}{Net\+Interface} $\ast$interface, \hyperlink{structIpv6FilterEntry}{Ipv6\+Filter\+Entry} $\ast$entry)
\begin{DoxyCompactList}\small\item\em Stop listening to the address on the interface. \end{DoxyCompactList}\item 
void \hyperlink{mld_8c_a47b1f4c15523d8f5284a92b01a57dae2}{mld\+Tick} (\hyperlink{net_8h_a2234db8911a1148c9159979d8f5e0d6b}{Net\+Interface} $\ast$interface)
\begin{DoxyCompactList}\small\item\em M\+LD timer handler. \end{DoxyCompactList}\item 
void \hyperlink{mld_8c_a375af307c65123722e97e8f36f0a6178}{mld\+Link\+Change\+Event} (\hyperlink{net_8h_a2234db8911a1148c9159979d8f5e0d6b}{Net\+Interface} $\ast$interface)
\begin{DoxyCompactList}\small\item\em Callback function for link change event. \end{DoxyCompactList}\item 
void \hyperlink{mld_8c_a07676ea80350d8532e0180d8568a9a8c}{mld\+Process\+Listener\+Query} (\hyperlink{net_8h_a2234db8911a1148c9159979d8f5e0d6b}{Net\+Interface} $\ast$interface, \hyperlink{ipv6_8h_a68061e0a0b502d880cbe60b645cfa2b7}{Ipv6\+Pseudo\+Header} $\ast$pseudo\+Header, const \hyperlink{structNetBuffer}{Net\+Buffer} $\ast$buffer, size\+\_\+t \hyperlink{pic32mz_2isr__support_8h_ac0542d92dfcd62c19170fd963f9e5052}{offset}, \hyperlink{stdint_8h_aba7bc1797add20fe3efdf37ced1182c5}{uint8\+\_\+t} hop\+Limit)
\begin{DoxyCompactList}\small\item\em Process incoming Multicast Listener Query message. \end{DoxyCompactList}\item 
void \hyperlink{mld_8c_a5420a201328802ec076b68b2d590824b}{mld\+Process\+Listener\+Report} (\hyperlink{net_8h_a2234db8911a1148c9159979d8f5e0d6b}{Net\+Interface} $\ast$interface, \hyperlink{ipv6_8h_a68061e0a0b502d880cbe60b645cfa2b7}{Ipv6\+Pseudo\+Header} $\ast$pseudo\+Header, const \hyperlink{structNetBuffer}{Net\+Buffer} $\ast$buffer, size\+\_\+t \hyperlink{pic32mz_2isr__support_8h_ac0542d92dfcd62c19170fd963f9e5052}{offset}, \hyperlink{stdint_8h_aba7bc1797add20fe3efdf37ced1182c5}{uint8\+\_\+t} hop\+Limit)
\begin{DoxyCompactList}\small\item\em Process incoming Multicast Listener Report message. \end{DoxyCompactList}\item 
\hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689c}{error\+\_\+t} \hyperlink{mld_8c_af4ece3aab725b8a1124f713098eb84ce}{mld\+Send\+Listener\+Report} (\hyperlink{net_8h_a2234db8911a1148c9159979d8f5e0d6b}{Net\+Interface} $\ast$interface, \hyperlink{ipv6_8h_aed0cbc40c61ed5b4fb681ebc55237e89}{Ipv6\+Addr} $\ast$\hyperlink{ipcp_8h_a11542dd5a4de5976a89188df3d53b42d}{ip\+Addr})
\begin{DoxyCompactList}\small\item\em Send Multicast Listener Report message. \end{DoxyCompactList}\item 
\hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689c}{error\+\_\+t} \hyperlink{mld_8c_a2f425df31b637681c782e040a80fcda1}{mld\+Send\+Listener\+Done} (\hyperlink{net_8h_a2234db8911a1148c9159979d8f5e0d6b}{Net\+Interface} $\ast$interface, \hyperlink{ipv6_8h_aed0cbc40c61ed5b4fb681ebc55237e89}{Ipv6\+Addr} $\ast$\hyperlink{ipcp_8h_a11542dd5a4de5976a89188df3d53b42d}{ip\+Addr})
\begin{DoxyCompactList}\small\item\em Send Multicast Listener Done message. \end{DoxyCompactList}\item 
\hyperlink{stdint_8h_a435d1572bf3f880d55459d9805097f62}{uint32\+\_\+t} \hyperlink{mld_8c_aac860239fc46d0a7ab6b5867643bc485}{mld\+Rand} (\hyperlink{stdint_8h_a435d1572bf3f880d55459d9805097f62}{uint32\+\_\+t} max)
\begin{DoxyCompactList}\small\item\em Get a random value in the specified range. \end{DoxyCompactList}\item 
void \hyperlink{mld_8c_ac0b22a7b22a83fb061598acfc40aa480}{mld\+Dump\+Message} (const \hyperlink{mld_8h_aac203f8533431e297d6a411e64c593af}{Mld\+Message} $\ast$\hyperlink{pap_8h_a52f19d36a71e9b8ddea38fe00c291181}{message})
\begin{DoxyCompactList}\small\item\em Dump M\+LD message for debugging purpose. \end{DoxyCompactList}\end{DoxyCompactItemize}
\subsection*{Variables}
\begin{DoxyCompactItemize}
\item 
\hyperlink{compiler__port_8h_ae3e32a98d431a02106616da3071832dd}{systime\+\_\+t} \hyperlink{mld_8c_abe446b43462e812f8106e2a5e51c86bf}{mld\+Tick\+Counter}
\end{DoxyCompactItemize}


\subsection{Detailed Description}
M\+LD (Multicast Listener Discovery for I\+Pv6) 

\hypertarget{pic32mz__ef__curiosity_8h_License}{}\subsection{License}\label{pic32mz__ef__curiosity_8h_License}
S\+P\+D\+X-\/\+License-\/\+Identifier\+: G\+P\+L-\/2.\+0-\/or-\/later

Copyright (C) 2010-\/2019 Oryx Embedded S\+A\+RL. All rights reserved.

This file is part of Cyclone\+T\+CP Open.

This program is free software; you can redistribute it and/or modify it under the terms of the G\+NU General Public License as published by the Free Software Foundation; either version 2 of the License, or (at your option) any later version.

This program is distributed in the hope that it will be useful, but W\+I\+T\+H\+O\+UT A\+NY W\+A\+R\+R\+A\+N\+TY; without even the implied warranty of M\+E\+R\+C\+H\+A\+N\+T\+A\+B\+I\+L\+I\+TY or F\+I\+T\+N\+E\+SS F\+OR A P\+A\+R\+T\+I\+C\+U\+L\+AR P\+U\+R\+P\+O\+SE. See the G\+NU General Public License for more details.

You should have received a copy of the G\+NU General Public License along with this program; if not, write to the Free Software Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-\/1301, U\+SA.\hypertarget{tftp__server_8c_Description}{}\subsection{Description}\label{tftp__server_8c_Description}
M\+LD is used by an I\+Pv6 router to discover the presence of multicast listeners on its directly attached links, and to discover specifically which multicast addresses are of interest to those neighboring nodes. Refer to the following R\+F\+Cs for complete details\+:
\begin{DoxyItemize}
\item R\+FC 2710\+: Multicast Listener Discovery (M\+LD) for I\+Pv6
\item R\+FC 3810\+: Multicast Listener Discovery Version 2 (M\+L\+Dv2) for I\+Pv6
\end{DoxyItemize}

\begin{DoxyAuthor}{Author}
Oryx Embedded S\+A\+RL (www.\+oryx-\/embedded.\+com) 
\end{DoxyAuthor}
\begin{DoxyVersion}{Version}
1.\+9.\+6 
\end{DoxyVersion}


\subsection{Macro Definition Documentation}
\mbox{\Hypertarget{mld_8c_afcdf5e66fd927a7f4cc64295acd20407}\label{mld_8c_afcdf5e66fd927a7f4cc64295acd20407}} 
\index{mld.\+c@{mld.\+c}!T\+R\+A\+C\+E\+\_\+\+L\+E\+V\+EL@{T\+R\+A\+C\+E\+\_\+\+L\+E\+V\+EL}}
\index{T\+R\+A\+C\+E\+\_\+\+L\+E\+V\+EL@{T\+R\+A\+C\+E\+\_\+\+L\+E\+V\+EL}!mld.\+c@{mld.\+c}}
\subsubsection{\texorpdfstring{T\+R\+A\+C\+E\+\_\+\+L\+E\+V\+EL}{TRACE\_LEVEL}}
{\footnotesize\ttfamily \#define T\+R\+A\+C\+E\+\_\+\+L\+E\+V\+EL~\hyperlink{net__config_8h_af13968f444f77e4890395a3faca3435d}{M\+L\+D\+\_\+\+T\+R\+A\+C\+E\+\_\+\+L\+E\+V\+EL}}



Definition at line 41 of file mld.\+c.



\subsection{Function Documentation}
\mbox{\Hypertarget{mld_8c_ac0b22a7b22a83fb061598acfc40aa480}\label{mld_8c_ac0b22a7b22a83fb061598acfc40aa480}} 
\index{mld.\+c@{mld.\+c}!mld\+Dump\+Message@{mld\+Dump\+Message}}
\index{mld\+Dump\+Message@{mld\+Dump\+Message}!mld.\+c@{mld.\+c}}
\subsubsection{\texorpdfstring{mld\+Dump\+Message()}{mldDumpMessage()}}
{\footnotesize\ttfamily void mld\+Dump\+Message (\begin{DoxyParamCaption}\item[{const \hyperlink{mld_8h_aac203f8533431e297d6a411e64c593af}{Mld\+Message} $\ast$}]{message }\end{DoxyParamCaption})}



Dump M\+LD message for debugging purpose. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em message} & Pointer to the M\+LD message \\
\hline
\end{DoxyParams}


Definition at line 597 of file mld.\+c.


\begin{DoxyCode}
598 \{
599    \textcolor{comment}{//Dump MLD message}
600    \hyperlink{debug_8h_a67a8f9bc74358aa21745a76e23768dae}{TRACE\_DEBUG}(\textcolor{stringliteral}{"  Type = %"} PRIu8 \textcolor{stringliteral}{"\(\backslash\)r\(\backslash\)n"}, \hyperlink{chap_8h_a52f19d36a71e9b8ddea38fe00c291181}{message}->type);
601    \hyperlink{debug_8h_a67a8f9bc74358aa21745a76e23768dae}{TRACE\_DEBUG}(\textcolor{stringliteral}{"  Code = %"} PRIu8 \textcolor{stringliteral}{"\(\backslash\)r\(\backslash\)n"}, \hyperlink{chap_8h_a52f19d36a71e9b8ddea38fe00c291181}{message}->code);
602    \hyperlink{debug_8h_a67a8f9bc74358aa21745a76e23768dae}{TRACE\_DEBUG}(\textcolor{stringliteral}{"  Checksum = 0x%04"} PRIX16 \textcolor{stringliteral}{"\(\backslash\)r\(\backslash\)n"}, \hyperlink{cpu__endian_8h_a9312c6eb72e64f748ae0d0e0dc3ec9b9}{ntohs}(\hyperlink{chap_8h_a52f19d36a71e9b8ddea38fe00c291181}{message}->checksum));
603    \hyperlink{debug_8h_a67a8f9bc74358aa21745a76e23768dae}{TRACE\_DEBUG}(\textcolor{stringliteral}{"  Max Resp Delay = %"} PRIu16 \textcolor{stringliteral}{"\(\backslash\)r\(\backslash\)n"}, \hyperlink{chap_8h_a52f19d36a71e9b8ddea38fe00c291181}{message}->maxRespDelay);
604    \hyperlink{debug_8h_a67a8f9bc74358aa21745a76e23768dae}{TRACE\_DEBUG}(\textcolor{stringliteral}{"  Multicast Address = %s\(\backslash\)r\(\backslash\)n"}, \hyperlink{ipv6_8c_a96e27d88ffdf1b2ca6fca448dc6b4e7e}{ipv6AddrToString}(&
      \hyperlink{chap_8h_a52f19d36a71e9b8ddea38fe00c291181}{message}->multicastAddr, \hyperlink{group__BSPDefine_ga070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL}));
605 \}
\end{DoxyCode}
\mbox{\Hypertarget{mld_8c_ab8edb89c9d91649e626c61553d49a909}\label{mld_8c_ab8edb89c9d91649e626c61553d49a909}} 
\index{mld.\+c@{mld.\+c}!mld\+Init@{mld\+Init}}
\index{mld\+Init@{mld\+Init}!mld.\+c@{mld.\+c}}
\subsubsection{\texorpdfstring{mld\+Init()}{mldInit()}}
{\footnotesize\ttfamily \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689c}{error\+\_\+t} mld\+Init (\begin{DoxyParamCaption}\item[{\hyperlink{net_8h_a2234db8911a1148c9159979d8f5e0d6b}{Net\+Interface} $\ast$}]{interface }\end{DoxyParamCaption})}



M\+LD initialization. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em interface} & Underlying network interface \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Error code 
\end{DoxyReturn}


Definition at line 65 of file mld.\+c.


\begin{DoxyCode}
66 \{
67    \textcolor{comment}{//Successful initialization}
68    \textcolor{keywordflow}{return} \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689cabf350750d0d4fabd8954c0f1e9bbae94}{NO\_ERROR};
69 \}
\end{DoxyCode}
\mbox{\Hypertarget{mld_8c_a375af307c65123722e97e8f36f0a6178}\label{mld_8c_a375af307c65123722e97e8f36f0a6178}} 
\index{mld.\+c@{mld.\+c}!mld\+Link\+Change\+Event@{mld\+Link\+Change\+Event}}
\index{mld\+Link\+Change\+Event@{mld\+Link\+Change\+Event}!mld.\+c@{mld.\+c}}
\subsubsection{\texorpdfstring{mld\+Link\+Change\+Event()}{mldLinkChangeEvent()}}
{\footnotesize\ttfamily void mld\+Link\+Change\+Event (\begin{DoxyParamCaption}\item[{\hyperlink{net_8h_a2234db8911a1148c9159979d8f5e0d6b}{Net\+Interface} $\ast$}]{interface }\end{DoxyParamCaption})}



Callback function for link change event. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em interface} & Underlying network interface \\
\hline
\end{DoxyParams}


Definition at line 198 of file mld.\+c.


\begin{DoxyCode}
199 \{
200    \hyperlink{compiler__port_8h_a12a1e9b3ce141648783a82445d02b58d}{uint\_t} i;
201    \hyperlink{compiler__port_8h_ae3e32a98d431a02106616da3071832dd}{systime\_t} \hyperlink{dhcpv6__common_8h_ae73654f333e4363463ad8c594eca1905}{time};
202    \hyperlink{structIpv6FilterEntry}{Ipv6FilterEntry} *entry;
203 
204    \textcolor{comment}{//Get current time}
205    time = \hyperlink{os__port__chibios_8c_ab66a11272d40a916fa69dd8e4dc443d4}{osGetSystemTime}();
206 
207    \textcolor{comment}{//Link up event?}
208    \textcolor{keywordflow}{if}(interface->linkState)
209    \{
210       \textcolor{comment}{//Go through the multicast filter table}
211       \textcolor{keywordflow}{for}(i = 0; i < \hyperlink{ipv6_8h_a76328e1ef9ee7a408d4fb6bcfa62b910}{IPV6\_MULTICAST\_FILTER\_SIZE}; i++)
212       \{
213          \textcolor{comment}{//Point to the current entry}
214          entry = &interface->ipv6Context.multicastFilter[i];
215 
216          \textcolor{comment}{//Valid entry?}
217          \textcolor{keywordflow}{if}(entry->\hyperlink{structIpv6FilterEntry_a1d01842023f238350bc3f6dfa99999c6}{refCount} > 0)
218          \{
219             \textcolor{comment}{//The link-scope all-nodes address (FF02::1) is handled as a special}
220             \textcolor{comment}{//case. The host starts in Idle Listener state for that address on}
221             \textcolor{comment}{//every interface and never transitions to another state}
222             \textcolor{keywordflow}{if}(!\hyperlink{ipv6_8h_ab1e93bd2152bc3f3b5642fd0216384d7}{ipv6CompAddr}(&entry->\hyperlink{structIpv6FilterEntry_ab3f4b20455a0f3d0912b2dfad354ef86}{addr}, &
      \hyperlink{ipv6_8c_a8e2b9466528a5be6596c59cf94ac56a4}{IPV6\_LINK\_LOCAL\_ALL\_NODES\_ADDR}))
223             \{
224                \textcolor{comment}{//Send an unsolicited Multicast Listener Report message for that group}
225                \hyperlink{mld_8c_af4ece3aab725b8a1124f713098eb84ce}{mldSendListenerReport}(interface, &entry->
      \hyperlink{structIpv6FilterEntry_ab3f4b20455a0f3d0912b2dfad354ef86}{addr});
226 
227                \textcolor{comment}{//Set flag}
228                entry->\hyperlink{structIpv6FilterEntry_a4ad89b0f2c7f11c673ffcf11768f5eb7}{flag} = \hyperlink{os__port_8h_aa8cecfc5c5c054d2875c03e77b7be15d}{TRUE};
229                \textcolor{comment}{//Start timer}
230                entry->\hyperlink{structIpv6FilterEntry_a31cc506fa97ca4281048443be7eb8d6a}{timer} = time + \hyperlink{mld_8h_a0a9fea724b98a5424bed6572991bc518}{MLD\_UNSOLICITED\_REPORT\_INTERVAL};
231                \textcolor{comment}{//Enter the Delaying Listener state}
232                entry->\hyperlink{structIpv6FilterEntry_a1b5076e55c13c43bdf6eb2b501a483df}{state} = \hyperlink{mld_8h_afeea890241de675ce8886f0ffee047e8a776cf374d4bb4b5d91e7ee7f7323e7ee}{MLD\_STATE\_DELAYING\_LISTENER};
233             \}
234          \}
235       \}
236    \}
237    \textcolor{comment}{//Link down event?}
238    \textcolor{keywordflow}{else}
239    \{
240       \textcolor{comment}{//Go through the multicast filter table}
241       \textcolor{keywordflow}{for}(i = 0; i < \hyperlink{ipv6_8h_a76328e1ef9ee7a408d4fb6bcfa62b910}{IPV6\_MULTICAST\_FILTER\_SIZE}; i++)
242       \{
243          \textcolor{comment}{//Point to the current entry}
244          entry = &interface->ipv6Context.multicastFilter[i];
245 
246          \textcolor{comment}{//Valid entry?}
247          \textcolor{keywordflow}{if}(entry->\hyperlink{structIpv6FilterEntry_a1d01842023f238350bc3f6dfa99999c6}{refCount} > 0)
248          \{
249             \textcolor{comment}{//Clear flag}
250             entry->\hyperlink{structIpv6FilterEntry_a4ad89b0f2c7f11c673ffcf11768f5eb7}{flag} = \hyperlink{os__port_8h_aa93f0eb578d23995850d61f7d61c55c1}{FALSE};
251             \textcolor{comment}{//Enter the Idle Listener state}
252             entry->\hyperlink{structIpv6FilterEntry_a1b5076e55c13c43bdf6eb2b501a483df}{state} = \hyperlink{mld_8h_afeea890241de675ce8886f0ffee047e8a3bc3fa8bbdb7f5f9af64469f9927da89}{MLD\_STATE\_IDLE\_LISTENER};
253          \}
254       \}
255    \}
256 \}
\end{DoxyCode}
\mbox{\Hypertarget{mld_8c_a07676ea80350d8532e0180d8568a9a8c}\label{mld_8c_a07676ea80350d8532e0180d8568a9a8c}} 
\index{mld.\+c@{mld.\+c}!mld\+Process\+Listener\+Query@{mld\+Process\+Listener\+Query}}
\index{mld\+Process\+Listener\+Query@{mld\+Process\+Listener\+Query}!mld.\+c@{mld.\+c}}
\subsubsection{\texorpdfstring{mld\+Process\+Listener\+Query()}{mldProcessListenerQuery()}}
{\footnotesize\ttfamily void mld\+Process\+Listener\+Query (\begin{DoxyParamCaption}\item[{\hyperlink{net_8h_a2234db8911a1148c9159979d8f5e0d6b}{Net\+Interface} $\ast$}]{interface,  }\item[{\hyperlink{ipv6_8h_a68061e0a0b502d880cbe60b645cfa2b7}{Ipv6\+Pseudo\+Header} $\ast$}]{pseudo\+Header,  }\item[{const \hyperlink{structNetBuffer}{Net\+Buffer} $\ast$}]{buffer,  }\item[{size\+\_\+t}]{offset,  }\item[{\hyperlink{stdint_8h_aba7bc1797add20fe3efdf37ced1182c5}{uint8\+\_\+t}}]{hop\+Limit }\end{DoxyParamCaption})}



Process incoming Multicast Listener Query message. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em interface} & Underlying network interface \\
\hline
\mbox{\tt in}  & {\em pseudo\+Header} & I\+Pv6 pseudo header \\
\hline
\mbox{\tt in}  & {\em buffer} & Multi-\/part buffer containing the incoming M\+LD message \\
\hline
\mbox{\tt in}  & {\em offset} & Offset to the first byte of the M\+LD message \\
\hline
\mbox{\tt in}  & {\em hop\+Limit} & Hop Limit field from I\+Pv6 header \\
\hline
\end{DoxyParams}


Definition at line 268 of file mld.\+c.


\begin{DoxyCode}
270 \{
271    \hyperlink{compiler__port_8h_a12a1e9b3ce141648783a82445d02b58d}{uint\_t} i;
272    \textcolor{keywordtype}{size\_t} \hyperlink{dtls__misc_8h_ab43ca82dd7fa2a0e56f941032ef324c4}{length};
273    \hyperlink{compiler__port_8h_ae3e32a98d431a02106616da3071832dd}{systime\_t} \hyperlink{dhcpv6__common_8h_ae73654f333e4363463ad8c594eca1905}{time};
274    \hyperlink{compiler__port_8h_ae3e32a98d431a02106616da3071832dd}{systime\_t} \hyperlink{mld_8h_a195c8b824cf71459ca181617064faae5}{maxRespDelay};
275    \hyperlink{mld_8h_aac203f8533431e297d6a411e64c593af}{MldMessage} *\hyperlink{chap_8h_a52f19d36a71e9b8ddea38fe00c291181}{message};
276    \hyperlink{structIpv6FilterEntry}{Ipv6FilterEntry} *entry;
277 
278    \textcolor{comment}{//Retrieve the length of the MLD message}
279    length = \hyperlink{net__mem_8c_ac9dbcd9e28e61d8f4f6d2e9af2607b68}{netBufferGetLength}(buffer) - \hyperlink{pic32mz_2isr__support_8h_a12a5aed8a193ebbf9a641104a310610d}{offset};
280 
281    \textcolor{comment}{//The message must be at least 24 octets long}
282    \textcolor{keywordflow}{if}(length < \textcolor{keyword}{sizeof}(\hyperlink{mld_8h_aac203f8533431e297d6a411e64c593af}{MldMessage}))
283       \textcolor{keywordflow}{return};
284 
285    \textcolor{comment}{//Point to the beginning of the MLD message}
286    message = \hyperlink{net__mem_8c_a20d30c9db547b3b2743368b589cf482b}{netBufferAt}(buffer, \hyperlink{pic32mz_2isr__support_8h_a12a5aed8a193ebbf9a641104a310610d}{offset});
287    \textcolor{comment}{//Sanity check}
288    \textcolor{keywordflow}{if}(message == \hyperlink{group__BSPDefine_ga070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL})
289       \textcolor{keywordflow}{return};
290 
291    \textcolor{comment}{//Debug message}
292    \hyperlink{debug_8h_a7339bfd784193a5c79efcef2eeb2d6df}{TRACE\_INFO}(\textcolor{stringliteral}{"MLD message received (%"} \hyperlink{compiler__port_8h_a2b7b0557dc6cd786df02dafbb51f5292}{PRIuSIZE} \textcolor{stringliteral}{" bytes)...\(\backslash\)r\(\backslash\)n"}, length);
293    \textcolor{comment}{//Dump message contents for debugging purpose}
294    \hyperlink{mld_8c_ac0b22a7b22a83fb061598acfc40aa480}{mldDumpMessage}(message);
295 
296    \textcolor{comment}{//Make sure the source address of the message is a valid link-local address}
297    \textcolor{keywordflow}{if}(!\hyperlink{ipv6_8h_a6f8d54c7cac75d512f6311e6f34e04ee}{ipv6IsLinkLocalUnicastAddr}(&pseudoHeader->srcAddr))
298       \textcolor{keywordflow}{return};
299 
300    \textcolor{comment}{//Check the Hop Limit field}
301    \textcolor{keywordflow}{if}(hopLimit != \hyperlink{mld_8h_a91bd60495f8a89dcfcfc80ec12ef7720}{MLD\_HOP\_LIMIT})
302       \textcolor{keywordflow}{return};
303 
304    \textcolor{comment}{//Get current time}
305    time = \hyperlink{os__port__chibios_8c_ab66a11272d40a916fa69dd8e4dc443d4}{osGetSystemTime}();
306 
307    \textcolor{comment}{//The Max Resp Delay field specifies the maximum time allowed}
308    \textcolor{comment}{//before sending a responding report}
309    maxRespDelay = message->maxRespDelay * 10;
310 
311    \textcolor{comment}{//Go through the multicast filter table}
312    \textcolor{keywordflow}{for}(i = 0; i < \hyperlink{ipv6_8h_a76328e1ef9ee7a408d4fb6bcfa62b910}{IPV6\_MULTICAST\_FILTER\_SIZE}; i++)
313    \{
314       \textcolor{comment}{//Point to the current entry}
315       entry = &interface->ipv6Context.multicastFilter[i];
316 
317       \textcolor{comment}{//Valid entry?}
318       \textcolor{keywordflow}{if}(entry->\hyperlink{structIpv6FilterEntry_a1d01842023f238350bc3f6dfa99999c6}{refCount} > 0)
319       \{
320          \textcolor{comment}{//The link-scope all-nodes address (FF02::1) is handled as a special}
321          \textcolor{comment}{//case. The host starts in Idle Listener state for that address on}
322          \textcolor{comment}{//every interface and never transitions to another state}
323          \textcolor{keywordflow}{if}(!\hyperlink{ipv6_8h_ab1e93bd2152bc3f3b5642fd0216384d7}{ipv6CompAddr}(&entry->\hyperlink{structIpv6FilterEntry_ab3f4b20455a0f3d0912b2dfad354ef86}{addr}, &
      \hyperlink{ipv6_8c_a8e2b9466528a5be6596c59cf94ac56a4}{IPV6\_LINK\_LOCAL\_ALL\_NODES\_ADDR}))
324          \{
325             \textcolor{comment}{//A General Query is used to learn which multicast addresses have listeners}
326             \textcolor{comment}{//on an attached link. A Multicast-Address-Specific Query is used to learn}
327             \textcolor{comment}{//if a particular multicast address has any listeners on an attached link}
328             \textcolor{keywordflow}{if}(\hyperlink{ipv6_8h_ab1e93bd2152bc3f3b5642fd0216384d7}{ipv6CompAddr}(&message->multicastAddr, &
      \hyperlink{ipv6_8c_aa4baeec4f7b8b166d2457787fb9eddf9}{IPV6\_UNSPECIFIED\_ADDR}) ||
329                \hyperlink{ipv6_8h_ab1e93bd2152bc3f3b5642fd0216384d7}{ipv6CompAddr}(&message->multicastAddr, &entry->\hyperlink{structIpv6FilterEntry_ab3f4b20455a0f3d0912b2dfad354ef86}{addr}))
330             \{
331                \textcolor{comment}{//Delaying Listener state?}
332                \textcolor{keywordflow}{if}(entry->\hyperlink{structIpv6FilterEntry_a1b5076e55c13c43bdf6eb2b501a483df}{state} == \hyperlink{mld_8h_afeea890241de675ce8886f0ffee047e8a776cf374d4bb4b5d91e7ee7f7323e7ee}{MLD\_STATE\_DELAYING\_LISTENER})
333                \{
334                   \textcolor{comment}{//The timer has not yet expired?}
335                   \textcolor{keywordflow}{if}(\hyperlink{os__port_8h_a25c13833ef003da02045a91b1080263a}{timeCompare}(time, entry->\hyperlink{structIpv6FilterEntry_a31cc506fa97ca4281048443be7eb8d6a}{timer}) < 0)
336                   \{
337                      \textcolor{comment}{//If a timer for the address is already running, it is reset to}
338                      \textcolor{comment}{//the new random value only if the requested Max Response Delay}
339                      \textcolor{comment}{//is less than the remaining value of the running timer}
340                      \textcolor{keywordflow}{if}(maxRespDelay < (entry->\hyperlink{structIpv6FilterEntry_a31cc506fa97ca4281048443be7eb8d6a}{timer} - time))
341                      \{
342                         \textcolor{comment}{//Restart delay timer}
343                         entry->\hyperlink{structIpv6FilterEntry_a31cc506fa97ca4281048443be7eb8d6a}{timer} = time + \hyperlink{mld_8c_aac860239fc46d0a7ab6b5867643bc485}{mldRand}(maxRespDelay);
344                      \}
345                   \}
346                \}
347                \textcolor{comment}{//Idle Listener state?}
348                \textcolor{keywordflow}{else} \textcolor{keywordflow}{if}(entry->\hyperlink{structIpv6FilterEntry_a1b5076e55c13c43bdf6eb2b501a483df}{state} == \hyperlink{mld_8h_afeea890241de675ce8886f0ffee047e8a3bc3fa8bbdb7f5f9af64469f9927da89}{MLD\_STATE\_IDLE\_LISTENER})
349                \{
350                   \textcolor{comment}{//Switch to the Delaying Listener state}
351                   entry->\hyperlink{structIpv6FilterEntry_a1b5076e55c13c43bdf6eb2b501a483df}{state} = \hyperlink{mld_8h_afeea890241de675ce8886f0ffee047e8a776cf374d4bb4b5d91e7ee7f7323e7ee}{MLD\_STATE\_DELAYING\_LISTENER};
352                   \textcolor{comment}{//Delay the response by a random amount of time}
353                   entry->\hyperlink{structIpv6FilterEntry_a31cc506fa97ca4281048443be7eb8d6a}{timer} = time + \hyperlink{mld_8c_aac860239fc46d0a7ab6b5867643bc485}{mldRand}(maxRespDelay);
354                \}
355             \}
356          \}
357       \}
358    \}
359 \}
\end{DoxyCode}
\mbox{\Hypertarget{mld_8c_a5420a201328802ec076b68b2d590824b}\label{mld_8c_a5420a201328802ec076b68b2d590824b}} 
\index{mld.\+c@{mld.\+c}!mld\+Process\+Listener\+Report@{mld\+Process\+Listener\+Report}}
\index{mld\+Process\+Listener\+Report@{mld\+Process\+Listener\+Report}!mld.\+c@{mld.\+c}}
\subsubsection{\texorpdfstring{mld\+Process\+Listener\+Report()}{mldProcessListenerReport()}}
{\footnotesize\ttfamily void mld\+Process\+Listener\+Report (\begin{DoxyParamCaption}\item[{\hyperlink{net_8h_a2234db8911a1148c9159979d8f5e0d6b}{Net\+Interface} $\ast$}]{interface,  }\item[{\hyperlink{ipv6_8h_a68061e0a0b502d880cbe60b645cfa2b7}{Ipv6\+Pseudo\+Header} $\ast$}]{pseudo\+Header,  }\item[{const \hyperlink{structNetBuffer}{Net\+Buffer} $\ast$}]{buffer,  }\item[{size\+\_\+t}]{offset,  }\item[{\hyperlink{stdint_8h_aba7bc1797add20fe3efdf37ced1182c5}{uint8\+\_\+t}}]{hop\+Limit }\end{DoxyParamCaption})}



Process incoming Multicast Listener Report message. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em interface} & Underlying network interface \\
\hline
\mbox{\tt in}  & {\em pseudo\+Header} & I\+Pv6 pseudo header \\
\hline
\mbox{\tt in}  & {\em buffer} & Multi-\/part buffer containing the incoming M\+LD message \\
\hline
\mbox{\tt in}  & {\em offset} & Offset to the first byte of the M\+LD message \\
\hline
\mbox{\tt in}  & {\em hop\+Limit} & Hop Limit field from I\+Pv6 header \\
\hline
\end{DoxyParams}


Definition at line 371 of file mld.\+c.


\begin{DoxyCode}
373 \{
374    \hyperlink{compiler__port_8h_a12a1e9b3ce141648783a82445d02b58d}{uint\_t} i;
375    \textcolor{keywordtype}{size\_t} \hyperlink{dtls__misc_8h_ab43ca82dd7fa2a0e56f941032ef324c4}{length};
376    \hyperlink{mld_8h_aac203f8533431e297d6a411e64c593af}{MldMessage} *\hyperlink{chap_8h_a52f19d36a71e9b8ddea38fe00c291181}{message};
377    \hyperlink{structIpv6FilterEntry}{Ipv6FilterEntry} *entry;
378 
379    \textcolor{comment}{//Retrieve the length of the MLD message}
380    length = \hyperlink{net__mem_8c_ac9dbcd9e28e61d8f4f6d2e9af2607b68}{netBufferGetLength}(buffer) - \hyperlink{pic32mz_2isr__support_8h_a12a5aed8a193ebbf9a641104a310610d}{offset};
381 
382    \textcolor{comment}{//The message must be at least 24 octets long}
383    \textcolor{keywordflow}{if}(length < \textcolor{keyword}{sizeof}(\hyperlink{mld_8h_aac203f8533431e297d6a411e64c593af}{MldMessage}))
384       \textcolor{keywordflow}{return};
385 
386    \textcolor{comment}{//Point to the beginning of the MLD message}
387    message = \hyperlink{net__mem_8c_a20d30c9db547b3b2743368b589cf482b}{netBufferAt}(buffer, \hyperlink{pic32mz_2isr__support_8h_a12a5aed8a193ebbf9a641104a310610d}{offset});
388    \textcolor{comment}{//Sanity check}
389    \textcolor{keywordflow}{if}(message == \hyperlink{group__BSPDefine_ga070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL})
390       \textcolor{keywordflow}{return};
391 
392    \textcolor{comment}{//Debug message}
393    \hyperlink{debug_8h_a7339bfd784193a5c79efcef2eeb2d6df}{TRACE\_INFO}(\textcolor{stringliteral}{"MLD message received (%"} \hyperlink{compiler__port_8h_a2b7b0557dc6cd786df02dafbb51f5292}{PRIuSIZE} \textcolor{stringliteral}{" bytes)...\(\backslash\)r\(\backslash\)n"}, length);
394    \textcolor{comment}{//Dump message contents for debugging purpose}
395    \hyperlink{mld_8c_ac0b22a7b22a83fb061598acfc40aa480}{mldDumpMessage}(message);
396 
397    \textcolor{comment}{//Make sure the source address of the message is a valid link-local address}
398    \textcolor{keywordflow}{if}(!\hyperlink{ipv6_8h_a6f8d54c7cac75d512f6311e6f34e04ee}{ipv6IsLinkLocalUnicastAddr}(&pseudoHeader->srcAddr))
399       \textcolor{keywordflow}{return};
400    \textcolor{comment}{//Check the Hop Limit field}
401    \textcolor{keywordflow}{if}(hopLimit != \hyperlink{mld_8h_a91bd60495f8a89dcfcfc80ec12ef7720}{MLD\_HOP\_LIMIT})
402       \textcolor{keywordflow}{return};
403 
404    \textcolor{comment}{//Go through the multicast filter table}
405    \textcolor{keywordflow}{for}(i = 0; i < \hyperlink{ipv6_8h_a76328e1ef9ee7a408d4fb6bcfa62b910}{IPV6\_MULTICAST\_FILTER\_SIZE}; i++)
406    \{
407       \textcolor{comment}{//Point to the current entry}
408       entry = &interface->ipv6Context.multicastFilter[i];
409 
410       \textcolor{comment}{//Valid entry?}
411       \textcolor{keywordflow}{if}(entry->\hyperlink{structIpv6FilterEntry_a1d01842023f238350bc3f6dfa99999c6}{refCount} > 0)
412       \{
413          \textcolor{comment}{//Report messages are ignored for multicast addresses}
414          \textcolor{comment}{//in the Non-Listener or Idle Listener state}
415          \textcolor{keywordflow}{if}(entry->\hyperlink{structIpv6FilterEntry_a1b5076e55c13c43bdf6eb2b501a483df}{state} == \hyperlink{mld_8h_afeea890241de675ce8886f0ffee047e8a776cf374d4bb4b5d91e7ee7f7323e7ee}{MLD\_STATE\_DELAYING\_LISTENER})
416          \{
417             \textcolor{comment}{//The Multicast Listener Report message matches the current entry?}
418             \textcolor{keywordflow}{if}(\hyperlink{ipv6_8h_ab1e93bd2152bc3f3b5642fd0216384d7}{ipv6CompAddr}(&message->multicastAddr, &entry->\hyperlink{structIpv6FilterEntry_ab3f4b20455a0f3d0912b2dfad354ef86}{addr}))
419             \{
420                \textcolor{comment}{//Clear flag}
421                entry->\hyperlink{structIpv6FilterEntry_a4ad89b0f2c7f11c673ffcf11768f5eb7}{flag} = \hyperlink{os__port_8h_aa93f0eb578d23995850d61f7d61c55c1}{FALSE};
422                \textcolor{comment}{//Switch to the Idle Listener state}
423                entry->\hyperlink{structIpv6FilterEntry_a1b5076e55c13c43bdf6eb2b501a483df}{state} = \hyperlink{mld_8h_afeea890241de675ce8886f0ffee047e8a3bc3fa8bbdb7f5f9af64469f9927da89}{MLD\_STATE\_IDLE\_LISTENER};
424             \}
425          \}
426       \}
427    \}
428 \}
\end{DoxyCode}
\mbox{\Hypertarget{mld_8c_aac860239fc46d0a7ab6b5867643bc485}\label{mld_8c_aac860239fc46d0a7ab6b5867643bc485}} 
\index{mld.\+c@{mld.\+c}!mld\+Rand@{mld\+Rand}}
\index{mld\+Rand@{mld\+Rand}!mld.\+c@{mld.\+c}}
\subsubsection{\texorpdfstring{mld\+Rand()}{mldRand()}}
{\footnotesize\ttfamily \hyperlink{stdint_8h_a435d1572bf3f880d55459d9805097f62}{uint32\+\_\+t} mld\+Rand (\begin{DoxyParamCaption}\item[{\hyperlink{stdint_8h_a435d1572bf3f880d55459d9805097f62}{uint32\+\_\+t}}]{max }\end{DoxyParamCaption})}



Get a random value in the specified range. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em max} & Upper bound \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Random value in the specified range 
\end{DoxyReturn}


Definition at line 585 of file mld.\+c.


\begin{DoxyCode}
586 \{
587    \textcolor{comment}{//Return a random value in the given range}
588    \textcolor{keywordflow}{return} \hyperlink{net_8c_a7bb00b31d641749ac8ce742261eb1f6d}{netGetRand}() % (max + 1);
589 \}
\end{DoxyCode}
\mbox{\Hypertarget{mld_8c_a2f425df31b637681c782e040a80fcda1}\label{mld_8c_a2f425df31b637681c782e040a80fcda1}} 
\index{mld.\+c@{mld.\+c}!mld\+Send\+Listener\+Done@{mld\+Send\+Listener\+Done}}
\index{mld\+Send\+Listener\+Done@{mld\+Send\+Listener\+Done}!mld.\+c@{mld.\+c}}
\subsubsection{\texorpdfstring{mld\+Send\+Listener\+Done()}{mldSendListenerDone()}}
{\footnotesize\ttfamily \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689c}{error\+\_\+t} mld\+Send\+Listener\+Done (\begin{DoxyParamCaption}\item[{\hyperlink{net_8h_a2234db8911a1148c9159979d8f5e0d6b}{Net\+Interface} $\ast$}]{interface,  }\item[{\hyperlink{ipv6_8h_aed0cbc40c61ed5b4fb681ebc55237e89}{Ipv6\+Addr} $\ast$}]{ip\+Addr }\end{DoxyParamCaption})}



Send Multicast Listener Done message. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em interface} & Underlying network interface \\
\hline
\mbox{\tt in}  & {\em ip\+Addr} & I\+Pv6 address specifying the multicast address being left \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Error code 
\end{DoxyReturn}


Definition at line 512 of file mld.\+c.


\begin{DoxyCode}
513 \{
514    \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689c}{error\_t} error;
515    \textcolor{keywordtype}{size\_t} \hyperlink{pic32mz_2isr__support_8h_a12a5aed8a193ebbf9a641104a310610d}{offset};
516    \hyperlink{mld_8h_aac203f8533431e297d6a411e64c593af}{MldMessage} *\hyperlink{chap_8h_a52f19d36a71e9b8ddea38fe00c291181}{message};
517    \hyperlink{structNetBuffer}{NetBuffer} *buffer;
518    \hyperlink{ipv6_8h_a68061e0a0b502d880cbe60b645cfa2b7}{Ipv6PseudoHeader} pseudoHeader;
519 
520    \textcolor{comment}{//Make sure the specified address is a valid multicast address}
521    \textcolor{keywordflow}{if}(!\hyperlink{ipv6_8h_a68fbc1145d242384c90a670196a38495}{ipv6IsMulticastAddr}(\hyperlink{mib__common_8h_a3860e959b1b7dd73686a6e11424805e2}{ipAddr}))
522       \textcolor{keywordflow}{return} \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689ca21cbabf2c791471c05a9bc2710638aec}{ERROR\_INVALID\_ADDRESS};
523 
524    \textcolor{comment}{//The link-scope all-nodes address (FF02::1) is handled as a special}
525    \textcolor{comment}{//case. The host never sends a report for that address}
526    \textcolor{keywordflow}{if}(\hyperlink{ipv6_8h_ab1e93bd2152bc3f3b5642fd0216384d7}{ipv6CompAddr}(\hyperlink{mib__common_8h_a3860e959b1b7dd73686a6e11424805e2}{ipAddr}, &\hyperlink{ipv6_8c_a8e2b9466528a5be6596c59cf94ac56a4}{IPV6\_LINK\_LOCAL\_ALL\_NODES\_ADDR})
      )
527       \textcolor{keywordflow}{return} \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689ca21cbabf2c791471c05a9bc2710638aec}{ERROR\_INVALID\_ADDRESS};
528 
529    \textcolor{comment}{//Allocate a memory buffer to hold a MLD message}
530    buffer = \hyperlink{ip_8c_a2222fb64b1b18140283119eea309c1b3}{ipAllocBuffer}(\textcolor{keyword}{sizeof}(\hyperlink{mld_8h_aac203f8533431e297d6a411e64c593af}{MldMessage}), &offset);
531    \textcolor{comment}{//Failed to allocate memory?}
532    \textcolor{keywordflow}{if}(buffer == \hyperlink{group__BSPDefine_ga070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL})
533       \textcolor{keywordflow}{return} \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689cac0a554045048d2fb61387cf735676f69}{ERROR\_OUT\_OF\_MEMORY};
534 
535    \textcolor{comment}{//Point to the beginning of the MLD message}
536    message = \hyperlink{net__mem_8c_a20d30c9db547b3b2743368b589cf482b}{netBufferAt}(buffer, offset);
537 
538    \textcolor{comment}{//Format the Multicast Listener Done message}
539    message->type = \hyperlink{icmpv6_8h_a6bd3724b797b492017d0264d1ae5c609a131108a29b7830915c2bd69b896d3917}{ICMPV6\_TYPE\_MULTICAST\_LISTENER\_DONE\_V1};
540    message->code = 0;
541    message->checksum = 0;
542    message->maxRespDelay = 0;
543    message->reserved = 0;
544    message->multicastAddr = *\hyperlink{mib__common_8h_a3860e959b1b7dd73686a6e11424805e2}{ipAddr};
545 
546    \textcolor{comment}{//Format IPv6 pseudo header}
547    pseudoHeader.srcAddr = interface->ipv6Context.addrList[0].addr;
548    pseudoHeader.destAddr = \hyperlink{ipv6_8c_aa8488194ba618b31711b0e7953af10d7}{IPV6\_LINK\_LOCAL\_ALL\_ROUTERS\_ADDR};
549    pseudoHeader.length = \hyperlink{cpu__endian_8h_a15540dbaeee98b6df80805f92e2f6759}{HTONS}(\textcolor{keyword}{sizeof}(\hyperlink{mld_8h_aac203f8533431e297d6a411e64c593af}{MldMessage}));
550    pseudoHeader.reserved = 0;
551    pseudoHeader.nextHeader = \hyperlink{ipv6_8h_a551bec2628dfcc3b67c0fff52e486fa5a1abdcf5760ff2904781383db26717c83}{IPV6\_ICMPV6\_HEADER};
552 
553    \textcolor{comment}{//Message checksum calculation}
554    message->checksum = \hyperlink{ip_8c_a9ec0593d9dbb2adf3e67894c0349cef3}{ipCalcUpperLayerChecksumEx}(&pseudoHeader,
555       \textcolor{keyword}{sizeof}(\hyperlink{ipv6_8h_a68061e0a0b502d880cbe60b645cfa2b7}{Ipv6PseudoHeader}), buffer, offset, \textcolor{keyword}{sizeof}(
      \hyperlink{mld_8h_aac203f8533431e297d6a411e64c593af}{MldMessage}));
556 
557    \textcolor{comment}{//Total number of ICMP messages which this entity attempted to send}
558    \hyperlink{ip__mib__module_8h_abbb1f41624dcbd4f21b44932e338a479}{IP\_MIB\_INC\_COUNTER32}(icmpv6Stats.icmpStatsOutMsgs, 1);
559 
560    \textcolor{comment}{//Increment per-message type ICMP counter}
561    \hyperlink{ip__mib__module_8h_abbb1f41624dcbd4f21b44932e338a479}{IP\_MIB\_INC\_COUNTER32}(icmpv6MsgStatsTable.icmpMsgStatsOutPkts[
562       \hyperlink{icmpv6_8h_a6bd3724b797b492017d0264d1ae5c609a131108a29b7830915c2bd69b896d3917}{ICMPV6\_TYPE\_MULTICAST\_LISTENER\_DONE\_V1}], 1);
563 
564    \textcolor{comment}{//Debug message}
565    \hyperlink{debug_8h_a7339bfd784193a5c79efcef2eeb2d6df}{TRACE\_INFO}(\textcolor{stringliteral}{"Sending MLD message (%"} \hyperlink{compiler__port_8h_a2b7b0557dc6cd786df02dafbb51f5292}{PRIuSIZE} \textcolor{stringliteral}{" bytes)...\(\backslash\)r\(\backslash\)n"}, \textcolor{keyword}{sizeof}(
      \hyperlink{mld_8h_aac203f8533431e297d6a411e64c593af}{MldMessage}));
566    \textcolor{comment}{//Dump message contents for debugging purpose}
567    \hyperlink{mld_8c_ac0b22a7b22a83fb061598acfc40aa480}{mldDumpMessage}(message);
568 
569    \textcolor{comment}{//The Multicast Listener Done message is sent to the all-routers multicast address}
570    error = \hyperlink{ipv6_8c_ae9edf1ac407897f91eb5caed37df7c3c}{ipv6SendDatagram}(interface, &pseudoHeader, buffer, offset, 
      \hyperlink{mld_8h_a91bd60495f8a89dcfcfc80ec12ef7720}{MLD\_HOP\_LIMIT});
571 
572    \textcolor{comment}{//Free previously allocated memory}
573    \hyperlink{net__mem_8c_aa33fc4dd2a71649194052f297c707d08}{netBufferFree}(buffer);
574    \textcolor{comment}{//Return status code}
575    \textcolor{keywordflow}{return} error;
576 \}
\end{DoxyCode}
\mbox{\Hypertarget{mld_8c_af4ece3aab725b8a1124f713098eb84ce}\label{mld_8c_af4ece3aab725b8a1124f713098eb84ce}} 
\index{mld.\+c@{mld.\+c}!mld\+Send\+Listener\+Report@{mld\+Send\+Listener\+Report}}
\index{mld\+Send\+Listener\+Report@{mld\+Send\+Listener\+Report}!mld.\+c@{mld.\+c}}
\subsubsection{\texorpdfstring{mld\+Send\+Listener\+Report()}{mldSendListenerReport()}}
{\footnotesize\ttfamily \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689c}{error\+\_\+t} mld\+Send\+Listener\+Report (\begin{DoxyParamCaption}\item[{\hyperlink{net_8h_a2234db8911a1148c9159979d8f5e0d6b}{Net\+Interface} $\ast$}]{interface,  }\item[{\hyperlink{ipv6_8h_aed0cbc40c61ed5b4fb681ebc55237e89}{Ipv6\+Addr} $\ast$}]{ip\+Addr }\end{DoxyParamCaption})}



Send Multicast Listener Report message. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em interface} & Underlying network interface \\
\hline
\mbox{\tt in}  & {\em ip\+Addr} & I\+Pv6 address specifying the multicast address \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Error code 
\end{DoxyReturn}


Definition at line 438 of file mld.\+c.


\begin{DoxyCode}
439 \{
440    \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689c}{error\_t} error;
441    \textcolor{keywordtype}{size\_t} \hyperlink{pic32mz_2isr__support_8h_a12a5aed8a193ebbf9a641104a310610d}{offset};
442    \hyperlink{mld_8h_aac203f8533431e297d6a411e64c593af}{MldMessage} *\hyperlink{chap_8h_a52f19d36a71e9b8ddea38fe00c291181}{message};
443    \hyperlink{structNetBuffer}{NetBuffer} *buffer;
444    \hyperlink{ipv6_8h_a68061e0a0b502d880cbe60b645cfa2b7}{Ipv6PseudoHeader} pseudoHeader;
445 
446    \textcolor{comment}{//Make sure the specified address is a valid multicast address}
447    \textcolor{keywordflow}{if}(!\hyperlink{ipv6_8h_a68fbc1145d242384c90a670196a38495}{ipv6IsMulticastAddr}(\hyperlink{mib__common_8h_a3860e959b1b7dd73686a6e11424805e2}{ipAddr}))
448       \textcolor{keywordflow}{return} \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689ca21cbabf2c791471c05a9bc2710638aec}{ERROR\_INVALID\_ADDRESS};
449 
450    \textcolor{comment}{//The link-scope all-nodes address (FF02::1) is handled as a special}
451    \textcolor{comment}{//case. The host never sends a report for that address}
452    \textcolor{keywordflow}{if}(\hyperlink{ipv6_8h_ab1e93bd2152bc3f3b5642fd0216384d7}{ipv6CompAddr}(\hyperlink{mib__common_8h_a3860e959b1b7dd73686a6e11424805e2}{ipAddr}, &\hyperlink{ipv6_8c_a8e2b9466528a5be6596c59cf94ac56a4}{IPV6\_LINK\_LOCAL\_ALL\_NODES\_ADDR})
      )
453       \textcolor{keywordflow}{return} \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689ca21cbabf2c791471c05a9bc2710638aec}{ERROR\_INVALID\_ADDRESS};
454 
455    \textcolor{comment}{//Allocate a memory buffer to hold a MLD message}
456    buffer = \hyperlink{ip_8c_a2222fb64b1b18140283119eea309c1b3}{ipAllocBuffer}(\textcolor{keyword}{sizeof}(\hyperlink{mld_8h_aac203f8533431e297d6a411e64c593af}{MldMessage}), &offset);
457    \textcolor{comment}{//Failed to allocate memory?}
458    \textcolor{keywordflow}{if}(buffer == \hyperlink{group__BSPDefine_ga070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL})
459       \textcolor{keywordflow}{return} \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689cac0a554045048d2fb61387cf735676f69}{ERROR\_OUT\_OF\_MEMORY};
460 
461    \textcolor{comment}{//Point to the beginning of the MLD message}
462    message = \hyperlink{net__mem_8c_a20d30c9db547b3b2743368b589cf482b}{netBufferAt}(buffer, offset);
463 
464    \textcolor{comment}{//Format the Multicast Listener Report message}
465    message->type = \hyperlink{icmpv6_8h_a6bd3724b797b492017d0264d1ae5c609aba94aea4fe42cd48467e0b61eec810f3}{ICMPV6\_TYPE\_MULTICAST\_LISTENER\_REPORT\_V1};
466    message->code = 0;
467    message->checksum = 0;
468    message->maxRespDelay = 0;
469    message->reserved = 0;
470    message->multicastAddr = *\hyperlink{mib__common_8h_a3860e959b1b7dd73686a6e11424805e2}{ipAddr};
471 
472    \textcolor{comment}{//Format IPv6 pseudo header}
473    pseudoHeader.srcAddr = interface->ipv6Context.addrList[0].addr;
474    pseudoHeader.destAddr = *\hyperlink{mib__common_8h_a3860e959b1b7dd73686a6e11424805e2}{ipAddr};
475    pseudoHeader.length = \hyperlink{cpu__endian_8h_a15540dbaeee98b6df80805f92e2f6759}{HTONS}(\textcolor{keyword}{sizeof}(\hyperlink{mld_8h_aac203f8533431e297d6a411e64c593af}{MldMessage}));
476    pseudoHeader.reserved = 0;
477    pseudoHeader.nextHeader = \hyperlink{ipv6_8h_a551bec2628dfcc3b67c0fff52e486fa5a1abdcf5760ff2904781383db26717c83}{IPV6\_ICMPV6\_HEADER};
478 
479    \textcolor{comment}{//Message checksum calculation}
480    message->checksum = \hyperlink{ip_8c_a9ec0593d9dbb2adf3e67894c0349cef3}{ipCalcUpperLayerChecksumEx}(&pseudoHeader,
481       \textcolor{keyword}{sizeof}(\hyperlink{ipv6_8h_a68061e0a0b502d880cbe60b645cfa2b7}{Ipv6PseudoHeader}), buffer, offset, \textcolor{keyword}{sizeof}(
      \hyperlink{mld_8h_aac203f8533431e297d6a411e64c593af}{MldMessage}));
482 
483    \textcolor{comment}{//Total number of ICMP messages which this entity attempted to send}
484    \hyperlink{ip__mib__module_8h_abbb1f41624dcbd4f21b44932e338a479}{IP\_MIB\_INC\_COUNTER32}(icmpv6Stats.icmpStatsOutMsgs, 1);
485 
486    \textcolor{comment}{//Increment per-message type ICMP counter}
487    \hyperlink{ip__mib__module_8h_abbb1f41624dcbd4f21b44932e338a479}{IP\_MIB\_INC\_COUNTER32}(icmpv6MsgStatsTable.icmpMsgStatsOutPkts[
488       \hyperlink{icmpv6_8h_a6bd3724b797b492017d0264d1ae5c609aba94aea4fe42cd48467e0b61eec810f3}{ICMPV6\_TYPE\_MULTICAST\_LISTENER\_REPORT\_V1}], 1);
489 
490    \textcolor{comment}{//Debug message}
491    \hyperlink{debug_8h_a7339bfd784193a5c79efcef2eeb2d6df}{TRACE\_INFO}(\textcolor{stringliteral}{"Sending MLD message (%"} \hyperlink{compiler__port_8h_a2b7b0557dc6cd786df02dafbb51f5292}{PRIuSIZE} \textcolor{stringliteral}{" bytes)...\(\backslash\)r\(\backslash\)n"}, \textcolor{keyword}{sizeof}(
      \hyperlink{mld_8h_aac203f8533431e297d6a411e64c593af}{MldMessage}));
492    \textcolor{comment}{//Dump message contents for debugging purpose}
493    \hyperlink{mld_8c_ac0b22a7b22a83fb061598acfc40aa480}{mldDumpMessage}(message);
494 
495    \textcolor{comment}{//The Multicast Listener Report message is sent to the multicast address being reported}
496    error = \hyperlink{ipv6_8c_ae9edf1ac407897f91eb5caed37df7c3c}{ipv6SendDatagram}(interface, &pseudoHeader, buffer, offset, 
      \hyperlink{mld_8h_a91bd60495f8a89dcfcfc80ec12ef7720}{MLD\_HOP\_LIMIT});
497 
498    \textcolor{comment}{//Free previously allocated memory}
499    \hyperlink{net__mem_8c_aa33fc4dd2a71649194052f297c707d08}{netBufferFree}(buffer);
500    \textcolor{comment}{//Return status code}
501    \textcolor{keywordflow}{return} error;
502 \}
\end{DoxyCode}
\mbox{\Hypertarget{mld_8c_a2fc7e7ae56a7dff1efe2195c0840121b}\label{mld_8c_a2fc7e7ae56a7dff1efe2195c0840121b}} 
\index{mld.\+c@{mld.\+c}!mld\+Start\+Listening@{mld\+Start\+Listening}}
\index{mld\+Start\+Listening@{mld\+Start\+Listening}!mld.\+c@{mld.\+c}}
\subsubsection{\texorpdfstring{mld\+Start\+Listening()}{mldStartListening()}}
{\footnotesize\ttfamily \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689c}{error\+\_\+t} mld\+Start\+Listening (\begin{DoxyParamCaption}\item[{\hyperlink{net_8h_a2234db8911a1148c9159979d8f5e0d6b}{Net\+Interface} $\ast$}]{interface,  }\item[{\hyperlink{structIpv6FilterEntry}{Ipv6\+Filter\+Entry} $\ast$}]{entry }\end{DoxyParamCaption})}



Start listening to the address on the interface. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em interface} & Underlying network interface \\
\hline
\mbox{\tt in}  & {\em entry} & I\+Pv6 filter entry identifying the address to listen to \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Error code 
\end{DoxyReturn}


Definition at line 79 of file mld.\+c.


\begin{DoxyCode}
80 \{
81    \textcolor{comment}{//The link-scope all-nodes address (FF02::1) is handled as a special}
82    \textcolor{comment}{//case. The host starts in Idle Listener state for that address on}
83    \textcolor{comment}{//every interface and never transitions to another state}
84    \textcolor{keywordflow}{if}(\hyperlink{ipv6_8h_ab1e93bd2152bc3f3b5642fd0216384d7}{ipv6CompAddr}(&entry->\hyperlink{structIpv6FilterEntry_ab3f4b20455a0f3d0912b2dfad354ef86}{addr}, &\hyperlink{ipv6_8c_a8e2b9466528a5be6596c59cf94ac56a4}{IPV6\_LINK\_LOCAL\_ALL\_NODES\_ADDR}
      ))
85    \{
86       \textcolor{comment}{//Clear flag}
87       entry->\hyperlink{structIpv6FilterEntry_a4ad89b0f2c7f11c673ffcf11768f5eb7}{flag} = \hyperlink{os__port_8h_aa93f0eb578d23995850d61f7d61c55c1}{FALSE};
88       \textcolor{comment}{//Enter the Idle Listener state}
89       entry->\hyperlink{structIpv6FilterEntry_a1b5076e55c13c43bdf6eb2b501a483df}{state} = \hyperlink{mld_8h_afeea890241de675ce8886f0ffee047e8a3bc3fa8bbdb7f5f9af64469f9927da89}{MLD\_STATE\_IDLE\_LISTENER};
90    \}
91    \textcolor{keywordflow}{else}
92    \{
93       \textcolor{comment}{//Link is up?}
94       \textcolor{keywordflow}{if}(interface->linkState)
95       \{
96          \textcolor{comment}{//Send a Multicast Listener Report message for the group on the interface}
97          \hyperlink{mld_8c_af4ece3aab725b8a1124f713098eb84ce}{mldSendListenerReport}(interface, &entry->\hyperlink{structIpv6FilterEntry_ab3f4b20455a0f3d0912b2dfad354ef86}{addr});
98 
99          \textcolor{comment}{//Set flag}
100          entry->\hyperlink{structIpv6FilterEntry_a4ad89b0f2c7f11c673ffcf11768f5eb7}{flag} = \hyperlink{os__port_8h_aa8cecfc5c5c054d2875c03e77b7be15d}{TRUE};
101          \textcolor{comment}{//Start timer}
102          entry->\hyperlink{structIpv6FilterEntry_a31cc506fa97ca4281048443be7eb8d6a}{timer} = \hyperlink{os__port__chibios_8c_ab66a11272d40a916fa69dd8e4dc443d4}{osGetSystemTime}() + 
      \hyperlink{mld_8h_a0a9fea724b98a5424bed6572991bc518}{MLD\_UNSOLICITED\_REPORT\_INTERVAL};
103          \textcolor{comment}{//Enter the Delaying Listener state}
104          entry->\hyperlink{structIpv6FilterEntry_a1b5076e55c13c43bdf6eb2b501a483df}{state} = \hyperlink{mld_8h_afeea890241de675ce8886f0ffee047e8a776cf374d4bb4b5d91e7ee7f7323e7ee}{MLD\_STATE\_DELAYING\_LISTENER};
105       \}
106       \textcolor{comment}{//Link is down?}
107       \textcolor{keywordflow}{else}
108       \{
109          \textcolor{comment}{//Clear flag}
110          entry->\hyperlink{structIpv6FilterEntry_a4ad89b0f2c7f11c673ffcf11768f5eb7}{flag} = \hyperlink{os__port_8h_aa93f0eb578d23995850d61f7d61c55c1}{FALSE};
111          \textcolor{comment}{//Enter the Idle Listener state}
112          entry->\hyperlink{structIpv6FilterEntry_a1b5076e55c13c43bdf6eb2b501a483df}{state} = \hyperlink{mld_8h_afeea890241de675ce8886f0ffee047e8a3bc3fa8bbdb7f5f9af64469f9927da89}{MLD\_STATE\_IDLE\_LISTENER};
113       \}
114    \}
115 
116    \textcolor{comment}{//Successful processing}
117    \textcolor{keywordflow}{return} \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689cabf350750d0d4fabd8954c0f1e9bbae94}{NO\_ERROR};
118 \}
\end{DoxyCode}
\mbox{\Hypertarget{mld_8c_aac28272a35521c283e3e348f3de4d4f5}\label{mld_8c_aac28272a35521c283e3e348f3de4d4f5}} 
\index{mld.\+c@{mld.\+c}!mld\+Stop\+Listening@{mld\+Stop\+Listening}}
\index{mld\+Stop\+Listening@{mld\+Stop\+Listening}!mld.\+c@{mld.\+c}}
\subsubsection{\texorpdfstring{mld\+Stop\+Listening()}{mldStopListening()}}
{\footnotesize\ttfamily \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689c}{error\+\_\+t} mld\+Stop\+Listening (\begin{DoxyParamCaption}\item[{\hyperlink{net_8h_a2234db8911a1148c9159979d8f5e0d6b}{Net\+Interface} $\ast$}]{interface,  }\item[{\hyperlink{structIpv6FilterEntry}{Ipv6\+Filter\+Entry} $\ast$}]{entry }\end{DoxyParamCaption})}



Stop listening to the address on the interface. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em interface} & Underlying network interface \\
\hline
\mbox{\tt in}  & {\em entry} & I\+Pv6 filter entry identifying the multicast address to leave \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Error code 
\end{DoxyReturn}


Definition at line 128 of file mld.\+c.


\begin{DoxyCode}
129 \{
130    \textcolor{comment}{//Check link state}
131    \textcolor{keywordflow}{if}(interface->linkState)
132    \{
133       \textcolor{comment}{//Send a Multicast Listener Done message if the flag is set}
134       \textcolor{keywordflow}{if}(entry->\hyperlink{structIpv6FilterEntry_a4ad89b0f2c7f11c673ffcf11768f5eb7}{flag})
135          \hyperlink{mld_8c_a2f425df31b637681c782e040a80fcda1}{mldSendListenerDone}(interface, &entry->\hyperlink{structIpv6FilterEntry_ab3f4b20455a0f3d0912b2dfad354ef86}{addr});
136    \}
137 
138    \textcolor{comment}{//Switch to the Non-Listener state}
139    entry->\hyperlink{structIpv6FilterEntry_a1b5076e55c13c43bdf6eb2b501a483df}{state} = \hyperlink{mld_8h_afeea890241de675ce8886f0ffee047e8aa3bf00e72f139a9371177113c16a6b8b}{MLD\_STATE\_NON\_LISTENER};
140 
141    \textcolor{comment}{//Successful processing}
142    \textcolor{keywordflow}{return} \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689cabf350750d0d4fabd8954c0f1e9bbae94}{NO\_ERROR};
143 \}
\end{DoxyCode}
\mbox{\Hypertarget{mld_8c_a47b1f4c15523d8f5284a92b01a57dae2}\label{mld_8c_a47b1f4c15523d8f5284a92b01a57dae2}} 
\index{mld.\+c@{mld.\+c}!mld\+Tick@{mld\+Tick}}
\index{mld\+Tick@{mld\+Tick}!mld.\+c@{mld.\+c}}
\subsubsection{\texorpdfstring{mld\+Tick()}{mldTick()}}
{\footnotesize\ttfamily void mld\+Tick (\begin{DoxyParamCaption}\item[{\hyperlink{net_8h_a2234db8911a1148c9159979d8f5e0d6b}{Net\+Interface} $\ast$}]{interface }\end{DoxyParamCaption})}



M\+LD timer handler. 

This routine must be periodically called by the T\+C\+P/\+IP stack to handle M\+LD related timers


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em interface} & Underlying network interface \\
\hline
\end{DoxyParams}


Definition at line 155 of file mld.\+c.


\begin{DoxyCode}
156 \{
157    \hyperlink{compiler__port_8h_a12a1e9b3ce141648783a82445d02b58d}{uint\_t} i;
158    \hyperlink{compiler__port_8h_ae3e32a98d431a02106616da3071832dd}{systime\_t} \hyperlink{dhcpv6__common_8h_ae73654f333e4363463ad8c594eca1905}{time};
159    \hyperlink{structIpv6FilterEntry}{Ipv6FilterEntry} *entry;
160 
161    \textcolor{comment}{//Get current time}
162    time = \hyperlink{os__port__chibios_8c_ab66a11272d40a916fa69dd8e4dc443d4}{osGetSystemTime}();
163 
164    \textcolor{comment}{//Go through the multicast filter table}
165    \textcolor{keywordflow}{for}(i = 0; i < \hyperlink{ipv6_8h_a76328e1ef9ee7a408d4fb6bcfa62b910}{IPV6\_MULTICAST\_FILTER\_SIZE}; i++)
166    \{
167       \textcolor{comment}{//Point to the current entry}
168       entry = &interface->ipv6Context.multicastFilter[i];
169 
170       \textcolor{comment}{//Valid entry?}
171       \textcolor{keywordflow}{if}(entry->\hyperlink{structIpv6FilterEntry_a1d01842023f238350bc3f6dfa99999c6}{refCount} > 0)
172       \{
173          \textcolor{comment}{//Delaying Listener state?}
174          \textcolor{keywordflow}{if}(entry->\hyperlink{structIpv6FilterEntry_a1b5076e55c13c43bdf6eb2b501a483df}{state} == \hyperlink{mld_8h_afeea890241de675ce8886f0ffee047e8a776cf374d4bb4b5d91e7ee7f7323e7ee}{MLD\_STATE\_DELAYING\_LISTENER})
175          \{
176             \textcolor{comment}{//Timer expired?}
177             \textcolor{keywordflow}{if}(\hyperlink{os__port_8h_a25c13833ef003da02045a91b1080263a}{timeCompare}(time, entry->\hyperlink{structIpv6FilterEntry_a31cc506fa97ca4281048443be7eb8d6a}{timer}) >= 0)
178             \{
179                \textcolor{comment}{//Send a Multicast Listener Report message}
180                \hyperlink{mld_8c_af4ece3aab725b8a1124f713098eb84ce}{mldSendListenerReport}(interface, &entry->
      \hyperlink{structIpv6FilterEntry_ab3f4b20455a0f3d0912b2dfad354ef86}{addr});
181 
182                \textcolor{comment}{//Set flag}
183                entry->\hyperlink{structIpv6FilterEntry_a4ad89b0f2c7f11c673ffcf11768f5eb7}{flag} = \hyperlink{os__port_8h_aa8cecfc5c5c054d2875c03e77b7be15d}{TRUE};
184                \textcolor{comment}{//Switch to the Idle Listener state}
185                entry->\hyperlink{structIpv6FilterEntry_a1b5076e55c13c43bdf6eb2b501a483df}{state} = \hyperlink{mld_8h_afeea890241de675ce8886f0ffee047e8a3bc3fa8bbdb7f5f9af64469f9927da89}{MLD\_STATE\_IDLE\_LISTENER};
186             \}
187          \}
188       \}
189    \}
190 \}
\end{DoxyCode}


\subsection{Variable Documentation}
\mbox{\Hypertarget{mld_8c_abe446b43462e812f8106e2a5e51c86bf}\label{mld_8c_abe446b43462e812f8106e2a5e51c86bf}} 
\index{mld.\+c@{mld.\+c}!mld\+Tick\+Counter@{mld\+Tick\+Counter}}
\index{mld\+Tick\+Counter@{mld\+Tick\+Counter}!mld.\+c@{mld.\+c}}
\subsubsection{\texorpdfstring{mld\+Tick\+Counter}{mldTickCounter}}
{\footnotesize\ttfamily \hyperlink{compiler__port_8h_ae3e32a98d431a02106616da3071832dd}{systime\+\_\+t} mld\+Tick\+Counter}



Definition at line 56 of file mld.\+c.

