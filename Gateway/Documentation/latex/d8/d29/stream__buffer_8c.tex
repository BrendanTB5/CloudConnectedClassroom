\hypertarget{stream__buffer_8c}{}\section{third\+\_\+party/freertos/stream\+\_\+buffer.c File Reference}
\label{stream__buffer_8c}\index{third\+\_\+party/freertos/stream\+\_\+buffer.\+c@{third\+\_\+party/freertos/stream\+\_\+buffer.\+c}}
{\ttfamily \#include $<$stdint.\+h$>$}\newline
{\ttfamily \#include $<$string.\+h$>$}\newline
{\ttfamily \#include \char`\"{}Free\+R\+T\+O\+S.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}task.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}stream\+\_\+buffer.\+h\char`\"{}}\newline
\subsection*{Classes}
\begin{DoxyCompactItemize}
\item 
struct \hyperlink{structStreamBufferDef__t}{Stream\+Buffer\+Def\+\_\+t}
\end{DoxyCompactItemize}
\subsection*{Macros}
\begin{DoxyCompactItemize}
\item 
\#define \hyperlink{stream__buffer_8c_ab622d8c674f2a417a666a7ed89109e79}{M\+P\+U\+\_\+\+W\+R\+A\+P\+P\+E\+R\+S\+\_\+\+I\+N\+C\+L\+U\+D\+E\+D\+\_\+\+F\+R\+O\+M\+\_\+\+A\+P\+I\+\_\+\+F\+I\+LE}
\item 
\#define \hyperlink{stream__buffer_8c_a4d6a29d283acfa2d4ef576476eedc789}{sb\+R\+E\+C\+E\+I\+V\+E\+\_\+\+C\+O\+M\+P\+L\+E\+T\+ED}(px\+Stream\+Buffer)
\item 
\#define \hyperlink{stream__buffer_8c_ab72c363566113705c021596f90c6eb5a}{sb\+R\+E\+C\+E\+I\+V\+E\+\_\+\+C\+O\+M\+P\+L\+E\+T\+E\+D\+\_\+\+F\+R\+O\+M\+\_\+\+I\+SR}(px\+Stream\+Buffer,  px\+Higher\+Priority\+Task\+Woken)
\item 
\#define \hyperlink{stream__buffer_8c_aa75273dfbcd92710254df0165ae1da5d}{sb\+S\+E\+N\+D\+\_\+\+C\+O\+M\+P\+L\+E\+T\+ED}(px\+Stream\+Buffer)
\item 
\#define \hyperlink{stream__buffer_8c_aadd3cf567c5086402552c463c55dda7c}{sb\+S\+E\+N\+D\+\_\+\+C\+O\+M\+P\+L\+E\+T\+E\+\_\+\+F\+R\+O\+M\+\_\+\+I\+SR}(px\+Stream\+Buffer,  px\+Higher\+Priority\+Task\+Woken)
\item 
\#define \hyperlink{stream__buffer_8c_aaa21967227eb06d02cdd038047b836f6}{sb\+B\+Y\+T\+E\+S\+\_\+\+T\+O\+\_\+\+S\+T\+O\+R\+E\+\_\+\+M\+E\+S\+S\+A\+G\+E\+\_\+\+L\+E\+N\+G\+TH}~( sizeof( \hyperlink{FreeRTOS_8h_a019c8bfcdd8eca676c7b9993bda95967}{config\+M\+E\+S\+S\+A\+G\+E\+\_\+\+B\+U\+F\+F\+E\+R\+\_\+\+L\+E\+N\+G\+T\+H\+\_\+\+T\+Y\+PE} ) )
\item 
\#define \hyperlink{stream__buffer_8c_a4954c04e3f9f6b0d4a98b9441b35d896}{sb\+F\+L\+A\+G\+S\+\_\+\+I\+S\+\_\+\+M\+E\+S\+S\+A\+G\+E\+\_\+\+B\+U\+F\+F\+ER}~( ( \hyperlink{stdint_8h_aba7bc1797add20fe3efdf37ced1182c5}{uint8\+\_\+t} ) 1 ) /$\ast$ Set if the stream buffer was created as \hyperlink{ndp_8h_af4007aacd75b22aee32dba9ea96082c0}{a} \hyperlink{pap_8h_a52f19d36a71e9b8ddea38fe00c291181}{message} buffer, in which case it holds discrete messages rather than \hyperlink{ndp_8h_af4007aacd75b22aee32dba9ea96082c0}{a} stream. $\ast$/
\item 
\#define \hyperlink{stream__buffer_8c_a80943e49aae8a493f02d78527b3fc01e}{sb\+F\+L\+A\+G\+S\+\_\+\+I\+S\+\_\+\+S\+T\+A\+T\+I\+C\+A\+L\+L\+Y\+\_\+\+A\+L\+L\+O\+C\+A\+T\+ED}~( ( \hyperlink{stdint_8h_aba7bc1797add20fe3efdf37ced1182c5}{uint8\+\_\+t} ) 2 ) /$\ast$ Set if the stream buffer was created using statically allocated memory. $\ast$/
\end{DoxyCompactItemize}
\subsection*{Typedefs}
\begin{DoxyCompactItemize}
\item 
typedef struct \hyperlink{structStreamBufferDef__t}{Stream\+Buffer\+Def\+\_\+t} \hyperlink{stream__buffer_8c_a6fb73c13219d9ddc8fe15f0c030cd86d}{Stream\+Buffer\+\_\+t}
\end{DoxyCompactItemize}
\subsection*{Functions}
\begin{DoxyCompactItemize}
\item 
static size\+\_\+t \hyperlink{stream__buffer_8c_ac4183c0af266bc5ffbd4f3eb4a4d07c2}{prv\+Bytes\+In\+Buffer} (const \hyperlink{stream__buffer_8c_a6fb73c13219d9ddc8fe15f0c030cd86d}{Stream\+Buffer\+\_\+t} $\ast$const px\+Stream\+Buffer) \hyperlink{mpu__wrappers_8h_a4785c4f4a8c04b835139dcc2a6682078}{P\+R\+I\+V\+I\+L\+E\+G\+E\+D\+\_\+\+F\+U\+N\+C\+T\+I\+ON}
\item 
static size\+\_\+t \hyperlink{stream__buffer_8c_ab05b79124292dd7bed33fca7a92473c0}{prv\+Write\+Bytes\+To\+Buffer} (\hyperlink{stream__buffer_8c_a6fb73c13219d9ddc8fe15f0c030cd86d}{Stream\+Buffer\+\_\+t} $\ast$const px\+Stream\+Buffer, const \hyperlink{stdint_8h_aba7bc1797add20fe3efdf37ced1182c5}{uint8\+\_\+t} $\ast$puc\+Data, size\+\_\+t x\+Count) \hyperlink{mpu__wrappers_8h_a4785c4f4a8c04b835139dcc2a6682078}{P\+R\+I\+V\+I\+L\+E\+G\+E\+D\+\_\+\+F\+U\+N\+C\+T\+I\+ON}
\item 
static size\+\_\+t \hyperlink{stream__buffer_8c_aea486f3983538e061b22cce98612d8bc}{prv\+Read\+Message\+From\+Buffer} (\hyperlink{stream__buffer_8c_a6fb73c13219d9ddc8fe15f0c030cd86d}{Stream\+Buffer\+\_\+t} $\ast$px\+Stream\+Buffer, void $\ast$pv\+Rx\+Data, size\+\_\+t x\+Buffer\+Length\+Bytes, size\+\_\+t x\+Bytes\+Available, size\+\_\+t x\+Bytes\+To\+Store\+Message\+Length) \hyperlink{mpu__wrappers_8h_a4785c4f4a8c04b835139dcc2a6682078}{P\+R\+I\+V\+I\+L\+E\+G\+E\+D\+\_\+\+F\+U\+N\+C\+T\+I\+ON}
\item 
static size\+\_\+t \hyperlink{stream__buffer_8c_a1415b7e265e106aab476023f9a6cce6c}{prv\+Write\+Message\+To\+Buffer} (\hyperlink{stream__buffer_8c_a6fb73c13219d9ddc8fe15f0c030cd86d}{Stream\+Buffer\+\_\+t} $\ast$const px\+Stream\+Buffer, const void $\ast$pv\+Tx\+Data, size\+\_\+t x\+Data\+Length\+Bytes, size\+\_\+t x\+Space, size\+\_\+t x\+Required\+Space) \hyperlink{mpu__wrappers_8h_a4785c4f4a8c04b835139dcc2a6682078}{P\+R\+I\+V\+I\+L\+E\+G\+E\+D\+\_\+\+F\+U\+N\+C\+T\+I\+ON}
\item 
static size\+\_\+t \hyperlink{stream__buffer_8c_a8ec163e54dc25c091dbff11c1b8f7a2c}{prv\+Read\+Bytes\+From\+Buffer} (\hyperlink{stream__buffer_8c_a6fb73c13219d9ddc8fe15f0c030cd86d}{Stream\+Buffer\+\_\+t} $\ast$px\+Stream\+Buffer, \hyperlink{stdint_8h_aba7bc1797add20fe3efdf37ced1182c5}{uint8\+\_\+t} $\ast$puc\+Data, size\+\_\+t x\+Max\+Count, size\+\_\+t x\+Bytes\+Available) \hyperlink{mpu__wrappers_8h_a4785c4f4a8c04b835139dcc2a6682078}{P\+R\+I\+V\+I\+L\+E\+G\+E\+D\+\_\+\+F\+U\+N\+C\+T\+I\+ON}
\item 
static void \hyperlink{stream__buffer_8c_a7f655ff13acb1a5614dbc7e7f43ecbb2}{prv\+Initialise\+New\+Stream\+Buffer} (\hyperlink{stream__buffer_8c_a6fb73c13219d9ddc8fe15f0c030cd86d}{Stream\+Buffer\+\_\+t} $\ast$const px\+Stream\+Buffer, \hyperlink{stdint_8h_aba7bc1797add20fe3efdf37ced1182c5}{uint8\+\_\+t} $\ast$const puc\+Buffer, size\+\_\+t x\+Buffer\+Size\+Bytes, size\+\_\+t x\+Trigger\+Level\+Bytes, \hyperlink{stdint_8h_aba7bc1797add20fe3efdf37ced1182c5}{uint8\+\_\+t} uc\+Flags) \hyperlink{mpu__wrappers_8h_a4785c4f4a8c04b835139dcc2a6682078}{P\+R\+I\+V\+I\+L\+E\+G\+E\+D\+\_\+\+F\+U\+N\+C\+T\+I\+ON}
\item 
void \hyperlink{stream__buffer_8c_a7e66db41c3fd13acf3b9f814d650f77d}{v\+Stream\+Buffer\+Delete} (\hyperlink{stream__buffer_8h_a8b80974e2278f073412293e6580ce56f}{Stream\+Buffer\+Handle\+\_\+t} x\+Stream\+Buffer)
\item 
\hyperlink{pic32mx_2portmacro_8h_a46fb21e00ae0729d7515c0fbf2269796}{Base\+Type\+\_\+t} \hyperlink{stream__buffer_8c_a05ed4d42963aa4aaf50e49700d44659c}{x\+Stream\+Buffer\+Reset} (\hyperlink{stream__buffer_8h_a8b80974e2278f073412293e6580ce56f}{Stream\+Buffer\+Handle\+\_\+t} x\+Stream\+Buffer)
\item 
\hyperlink{pic32mx_2portmacro_8h_a46fb21e00ae0729d7515c0fbf2269796}{Base\+Type\+\_\+t} \hyperlink{stream__buffer_8c_a375b92e87b73351a6a30c8a2ba7d2ce0}{x\+Stream\+Buffer\+Set\+Trigger\+Level} (\hyperlink{stream__buffer_8h_a8b80974e2278f073412293e6580ce56f}{Stream\+Buffer\+Handle\+\_\+t} x\+Stream\+Buffer, size\+\_\+t x\+Trigger\+Level)
\item 
size\+\_\+t \hyperlink{stream__buffer_8c_a8fb90892c74eb94fb063b2a018a10509}{x\+Stream\+Buffer\+Spaces\+Available} (\hyperlink{stream__buffer_8h_a8b80974e2278f073412293e6580ce56f}{Stream\+Buffer\+Handle\+\_\+t} x\+Stream\+Buffer)
\item 
size\+\_\+t \hyperlink{stream__buffer_8c_a5c473cb971d8a20b0528a1abc890833c}{x\+Stream\+Buffer\+Bytes\+Available} (\hyperlink{stream__buffer_8h_a8b80974e2278f073412293e6580ce56f}{Stream\+Buffer\+Handle\+\_\+t} x\+Stream\+Buffer)
\item 
size\+\_\+t \hyperlink{stream__buffer_8c_adf807ecf262fcd5df2584d5d3e6ed6c5}{x\+Stream\+Buffer\+Send} (\hyperlink{stream__buffer_8h_a8b80974e2278f073412293e6580ce56f}{Stream\+Buffer\+Handle\+\_\+t} x\+Stream\+Buffer, const void $\ast$pv\+Tx\+Data, size\+\_\+t x\+Data\+Length\+Bytes, \hyperlink{pic32mx_2portmacro_8h_aa69c48c6e902ce54f70886e6573c92a9}{Tick\+Type\+\_\+t} x\+Ticks\+To\+Wait)
\item 
size\+\_\+t \hyperlink{stream__buffer_8c_a3072d8c5cedf79a72550da051a0866b4}{x\+Stream\+Buffer\+Send\+From\+I\+SR} (\hyperlink{stream__buffer_8h_a8b80974e2278f073412293e6580ce56f}{Stream\+Buffer\+Handle\+\_\+t} x\+Stream\+Buffer, const void $\ast$pv\+Tx\+Data, size\+\_\+t x\+Data\+Length\+Bytes, \hyperlink{pic32mx_2portmacro_8h_a46fb21e00ae0729d7515c0fbf2269796}{Base\+Type\+\_\+t} $\ast$const px\+Higher\+Priority\+Task\+Woken)
\item 
size\+\_\+t \hyperlink{stream__buffer_8c_afcfcf6f4bc80ec5e31e5e1f8093cacac}{x\+Stream\+Buffer\+Receive} (\hyperlink{stream__buffer_8h_a8b80974e2278f073412293e6580ce56f}{Stream\+Buffer\+Handle\+\_\+t} x\+Stream\+Buffer, void $\ast$pv\+Rx\+Data, size\+\_\+t x\+Buffer\+Length\+Bytes, \hyperlink{pic32mx_2portmacro_8h_aa69c48c6e902ce54f70886e6573c92a9}{Tick\+Type\+\_\+t} x\+Ticks\+To\+Wait)
\item 
size\+\_\+t \hyperlink{stream__buffer_8c_afe4f32e931b684bc32189f086e5ec41c}{x\+Stream\+Buffer\+Next\+Message\+Length\+Bytes} (\hyperlink{stream__buffer_8h_a8b80974e2278f073412293e6580ce56f}{Stream\+Buffer\+Handle\+\_\+t} x\+Stream\+Buffer)
\item 
size\+\_\+t \hyperlink{stream__buffer_8c_a06c67a59495190f8359322184fe0462b}{x\+Stream\+Buffer\+Receive\+From\+I\+SR} (\hyperlink{stream__buffer_8h_a8b80974e2278f073412293e6580ce56f}{Stream\+Buffer\+Handle\+\_\+t} x\+Stream\+Buffer, void $\ast$pv\+Rx\+Data, size\+\_\+t x\+Buffer\+Length\+Bytes, \hyperlink{pic32mx_2portmacro_8h_a46fb21e00ae0729d7515c0fbf2269796}{Base\+Type\+\_\+t} $\ast$const px\+Higher\+Priority\+Task\+Woken)
\item 
\hyperlink{pic32mx_2portmacro_8h_a46fb21e00ae0729d7515c0fbf2269796}{Base\+Type\+\_\+t} \hyperlink{stream__buffer_8c_a95465cd3702e3eae08afb8e69e1c6525}{x\+Stream\+Buffer\+Is\+Empty} (\hyperlink{stream__buffer_8h_a8b80974e2278f073412293e6580ce56f}{Stream\+Buffer\+Handle\+\_\+t} x\+Stream\+Buffer)
\item 
\hyperlink{pic32mx_2portmacro_8h_a46fb21e00ae0729d7515c0fbf2269796}{Base\+Type\+\_\+t} \hyperlink{stream__buffer_8c_a77c2ae33c45c948e7af4d61fdd6cf1f1}{x\+Stream\+Buffer\+Is\+Full} (\hyperlink{stream__buffer_8h_a8b80974e2278f073412293e6580ce56f}{Stream\+Buffer\+Handle\+\_\+t} x\+Stream\+Buffer)
\item 
\hyperlink{pic32mx_2portmacro_8h_a46fb21e00ae0729d7515c0fbf2269796}{Base\+Type\+\_\+t} \hyperlink{stream__buffer_8c_a734bf1bcef16810abb6d53781b8f1f07}{x\+Stream\+Buffer\+Send\+Completed\+From\+I\+SR} (\hyperlink{stream__buffer_8h_a8b80974e2278f073412293e6580ce56f}{Stream\+Buffer\+Handle\+\_\+t} x\+Stream\+Buffer, \hyperlink{pic32mx_2portmacro_8h_a46fb21e00ae0729d7515c0fbf2269796}{Base\+Type\+\_\+t} $\ast$px\+Higher\+Priority\+Task\+Woken)
\item 
\hyperlink{pic32mx_2portmacro_8h_a46fb21e00ae0729d7515c0fbf2269796}{Base\+Type\+\_\+t} \hyperlink{stream__buffer_8c_adbcf08da91cb0b9c179d012e0c99237d}{x\+Stream\+Buffer\+Receive\+Completed\+From\+I\+SR} (\hyperlink{stream__buffer_8h_a8b80974e2278f073412293e6580ce56f}{Stream\+Buffer\+Handle\+\_\+t} x\+Stream\+Buffer, \hyperlink{pic32mx_2portmacro_8h_a46fb21e00ae0729d7515c0fbf2269796}{Base\+Type\+\_\+t} $\ast$px\+Higher\+Priority\+Task\+Woken)
\end{DoxyCompactItemize}


\subsection{Macro Definition Documentation}
\mbox{\Hypertarget{stream__buffer_8c_ab622d8c674f2a417a666a7ed89109e79}\label{stream__buffer_8c_ab622d8c674f2a417a666a7ed89109e79}} 
\index{stream\+\_\+buffer.\+c@{stream\+\_\+buffer.\+c}!M\+P\+U\+\_\+\+W\+R\+A\+P\+P\+E\+R\+S\+\_\+\+I\+N\+C\+L\+U\+D\+E\+D\+\_\+\+F\+R\+O\+M\+\_\+\+A\+P\+I\+\_\+\+F\+I\+LE@{M\+P\+U\+\_\+\+W\+R\+A\+P\+P\+E\+R\+S\+\_\+\+I\+N\+C\+L\+U\+D\+E\+D\+\_\+\+F\+R\+O\+M\+\_\+\+A\+P\+I\+\_\+\+F\+I\+LE}}
\index{M\+P\+U\+\_\+\+W\+R\+A\+P\+P\+E\+R\+S\+\_\+\+I\+N\+C\+L\+U\+D\+E\+D\+\_\+\+F\+R\+O\+M\+\_\+\+A\+P\+I\+\_\+\+F\+I\+LE@{M\+P\+U\+\_\+\+W\+R\+A\+P\+P\+E\+R\+S\+\_\+\+I\+N\+C\+L\+U\+D\+E\+D\+\_\+\+F\+R\+O\+M\+\_\+\+A\+P\+I\+\_\+\+F\+I\+LE}!stream\+\_\+buffer.\+c@{stream\+\_\+buffer.\+c}}
\subsubsection{\texorpdfstring{M\+P\+U\+\_\+\+W\+R\+A\+P\+P\+E\+R\+S\+\_\+\+I\+N\+C\+L\+U\+D\+E\+D\+\_\+\+F\+R\+O\+M\+\_\+\+A\+P\+I\+\_\+\+F\+I\+LE}{MPU\_WRAPPERS\_INCLUDED\_FROM\_API\_FILE}}
{\footnotesize\ttfamily \#define M\+P\+U\+\_\+\+W\+R\+A\+P\+P\+E\+R\+S\+\_\+\+I\+N\+C\+L\+U\+D\+E\+D\+\_\+\+F\+R\+O\+M\+\_\+\+A\+P\+I\+\_\+\+F\+I\+LE}



Definition at line 35 of file stream\+\_\+buffer.\+c.

\mbox{\Hypertarget{stream__buffer_8c_aaa21967227eb06d02cdd038047b836f6}\label{stream__buffer_8c_aaa21967227eb06d02cdd038047b836f6}} 
\index{stream\+\_\+buffer.\+c@{stream\+\_\+buffer.\+c}!sb\+B\+Y\+T\+E\+S\+\_\+\+T\+O\+\_\+\+S\+T\+O\+R\+E\+\_\+\+M\+E\+S\+S\+A\+G\+E\+\_\+\+L\+E\+N\+G\+TH@{sb\+B\+Y\+T\+E\+S\+\_\+\+T\+O\+\_\+\+S\+T\+O\+R\+E\+\_\+\+M\+E\+S\+S\+A\+G\+E\+\_\+\+L\+E\+N\+G\+TH}}
\index{sb\+B\+Y\+T\+E\+S\+\_\+\+T\+O\+\_\+\+S\+T\+O\+R\+E\+\_\+\+M\+E\+S\+S\+A\+G\+E\+\_\+\+L\+E\+N\+G\+TH@{sb\+B\+Y\+T\+E\+S\+\_\+\+T\+O\+\_\+\+S\+T\+O\+R\+E\+\_\+\+M\+E\+S\+S\+A\+G\+E\+\_\+\+L\+E\+N\+G\+TH}!stream\+\_\+buffer.\+c@{stream\+\_\+buffer.\+c}}
\subsubsection{\texorpdfstring{sb\+B\+Y\+T\+E\+S\+\_\+\+T\+O\+\_\+\+S\+T\+O\+R\+E\+\_\+\+M\+E\+S\+S\+A\+G\+E\+\_\+\+L\+E\+N\+G\+TH}{sbBYTES\_TO\_STORE\_MESSAGE\_LENGTH}}
{\footnotesize\ttfamily \#define sb\+B\+Y\+T\+E\+S\+\_\+\+T\+O\+\_\+\+S\+T\+O\+R\+E\+\_\+\+M\+E\+S\+S\+A\+G\+E\+\_\+\+L\+E\+N\+G\+TH~( sizeof( \hyperlink{FreeRTOS_8h_a019c8bfcdd8eca676c7b9993bda95967}{config\+M\+E\+S\+S\+A\+G\+E\+\_\+\+B\+U\+F\+F\+E\+R\+\_\+\+L\+E\+N\+G\+T\+H\+\_\+\+T\+Y\+PE} ) )}



Definition at line 132 of file stream\+\_\+buffer.\+c.

\mbox{\Hypertarget{stream__buffer_8c_a4954c04e3f9f6b0d4a98b9441b35d896}\label{stream__buffer_8c_a4954c04e3f9f6b0d4a98b9441b35d896}} 
\index{stream\+\_\+buffer.\+c@{stream\+\_\+buffer.\+c}!sb\+F\+L\+A\+G\+S\+\_\+\+I\+S\+\_\+\+M\+E\+S\+S\+A\+G\+E\+\_\+\+B\+U\+F\+F\+ER@{sb\+F\+L\+A\+G\+S\+\_\+\+I\+S\+\_\+\+M\+E\+S\+S\+A\+G\+E\+\_\+\+B\+U\+F\+F\+ER}}
\index{sb\+F\+L\+A\+G\+S\+\_\+\+I\+S\+\_\+\+M\+E\+S\+S\+A\+G\+E\+\_\+\+B\+U\+F\+F\+ER@{sb\+F\+L\+A\+G\+S\+\_\+\+I\+S\+\_\+\+M\+E\+S\+S\+A\+G\+E\+\_\+\+B\+U\+F\+F\+ER}!stream\+\_\+buffer.\+c@{stream\+\_\+buffer.\+c}}
\subsubsection{\texorpdfstring{sb\+F\+L\+A\+G\+S\+\_\+\+I\+S\+\_\+\+M\+E\+S\+S\+A\+G\+E\+\_\+\+B\+U\+F\+F\+ER}{sbFLAGS\_IS\_MESSAGE\_BUFFER}}
{\footnotesize\ttfamily \#define sb\+F\+L\+A\+G\+S\+\_\+\+I\+S\+\_\+\+M\+E\+S\+S\+A\+G\+E\+\_\+\+B\+U\+F\+F\+ER~( ( \hyperlink{stdint_8h_aba7bc1797add20fe3efdf37ced1182c5}{uint8\+\_\+t} ) 1 ) /$\ast$ Set if the stream buffer was created as \hyperlink{ndp_8h_af4007aacd75b22aee32dba9ea96082c0}{a} \hyperlink{pap_8h_a52f19d36a71e9b8ddea38fe00c291181}{message} buffer, in which case it holds discrete messages rather than \hyperlink{ndp_8h_af4007aacd75b22aee32dba9ea96082c0}{a} stream. $\ast$/}



Definition at line 135 of file stream\+\_\+buffer.\+c.

\mbox{\Hypertarget{stream__buffer_8c_a80943e49aae8a493f02d78527b3fc01e}\label{stream__buffer_8c_a80943e49aae8a493f02d78527b3fc01e}} 
\index{stream\+\_\+buffer.\+c@{stream\+\_\+buffer.\+c}!sb\+F\+L\+A\+G\+S\+\_\+\+I\+S\+\_\+\+S\+T\+A\+T\+I\+C\+A\+L\+L\+Y\+\_\+\+A\+L\+L\+O\+C\+A\+T\+ED@{sb\+F\+L\+A\+G\+S\+\_\+\+I\+S\+\_\+\+S\+T\+A\+T\+I\+C\+A\+L\+L\+Y\+\_\+\+A\+L\+L\+O\+C\+A\+T\+ED}}
\index{sb\+F\+L\+A\+G\+S\+\_\+\+I\+S\+\_\+\+S\+T\+A\+T\+I\+C\+A\+L\+L\+Y\+\_\+\+A\+L\+L\+O\+C\+A\+T\+ED@{sb\+F\+L\+A\+G\+S\+\_\+\+I\+S\+\_\+\+S\+T\+A\+T\+I\+C\+A\+L\+L\+Y\+\_\+\+A\+L\+L\+O\+C\+A\+T\+ED}!stream\+\_\+buffer.\+c@{stream\+\_\+buffer.\+c}}
\subsubsection{\texorpdfstring{sb\+F\+L\+A\+G\+S\+\_\+\+I\+S\+\_\+\+S\+T\+A\+T\+I\+C\+A\+L\+L\+Y\+\_\+\+A\+L\+L\+O\+C\+A\+T\+ED}{sbFLAGS\_IS\_STATICALLY\_ALLOCATED}}
{\footnotesize\ttfamily \#define sb\+F\+L\+A\+G\+S\+\_\+\+I\+S\+\_\+\+S\+T\+A\+T\+I\+C\+A\+L\+L\+Y\+\_\+\+A\+L\+L\+O\+C\+A\+T\+ED~( ( \hyperlink{stdint_8h_aba7bc1797add20fe3efdf37ced1182c5}{uint8\+\_\+t} ) 2 ) /$\ast$ Set if the stream buffer was created using statically allocated memory. $\ast$/}



Definition at line 136 of file stream\+\_\+buffer.\+c.

\mbox{\Hypertarget{stream__buffer_8c_a4d6a29d283acfa2d4ef576476eedc789}\label{stream__buffer_8c_a4d6a29d283acfa2d4ef576476eedc789}} 
\index{stream\+\_\+buffer.\+c@{stream\+\_\+buffer.\+c}!sb\+R\+E\+C\+E\+I\+V\+E\+\_\+\+C\+O\+M\+P\+L\+E\+T\+ED@{sb\+R\+E\+C\+E\+I\+V\+E\+\_\+\+C\+O\+M\+P\+L\+E\+T\+ED}}
\index{sb\+R\+E\+C\+E\+I\+V\+E\+\_\+\+C\+O\+M\+P\+L\+E\+T\+ED@{sb\+R\+E\+C\+E\+I\+V\+E\+\_\+\+C\+O\+M\+P\+L\+E\+T\+ED}!stream\+\_\+buffer.\+c@{stream\+\_\+buffer.\+c}}
\subsubsection{\texorpdfstring{sb\+R\+E\+C\+E\+I\+V\+E\+\_\+\+C\+O\+M\+P\+L\+E\+T\+ED}{sbRECEIVE\_COMPLETED}}
{\footnotesize\ttfamily \#define sb\+R\+E\+C\+E\+I\+V\+E\+\_\+\+C\+O\+M\+P\+L\+E\+T\+ED(\begin{DoxyParamCaption}\item[{}]{px\+Stream\+Buffer }\end{DoxyParamCaption})}

{\bfseries Value\+:}
\begin{DoxyCode}
\hyperlink{task_8h_a366b302eba79d10b5ee2a3756f0fcc43}{vTaskSuspendAll}();                                                               \(\backslash\)
        \{                                                                               \(\backslash\)
            if( ( pxStreamBuffer )->xTaskWaitingToSend != \hyperlink{group__BSPDefine_ga070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL} )                        \(\backslash\)
            \{                                                                           \(\backslash\)
                ( void ) \hyperlink{task_8h_a0d2d54fb8a64011dfbb54983e4ed06bd}{xTaskNotify}( ( pxStreamBuffer )->xTaskWaitingToSend,            \(\backslash\)
                                      ( \hyperlink{stdint_8h_a435d1572bf3f880d55459d9805097f62}{uint32\_t} ) 0,                                   \(\backslash\)
                                      \hyperlink{task_8h_ae8abc4f7da5b6880467daafbf19cd233abac2b17ab15444724b6f35d47cd0a64a}{eNoAction} );                                     \(\backslash\)
                ( pxStreamBuffer )->xTaskWaitingToSend = \hyperlink{group__BSPDefine_ga070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL};                          \(\backslash\)
            \}                                                                           \(\backslash\)
        \}                                                                               \(\backslash\)
        ( void ) \hyperlink{task_8h_a003f8ae6d649225abd030cc76e1c7d0e}{xTaskResumeAll}();
\end{DoxyCode}


Definition at line 57 of file stream\+\_\+buffer.\+c.

\mbox{\Hypertarget{stream__buffer_8c_ab72c363566113705c021596f90c6eb5a}\label{stream__buffer_8c_ab72c363566113705c021596f90c6eb5a}} 
\index{stream\+\_\+buffer.\+c@{stream\+\_\+buffer.\+c}!sb\+R\+E\+C\+E\+I\+V\+E\+\_\+\+C\+O\+M\+P\+L\+E\+T\+E\+D\+\_\+\+F\+R\+O\+M\+\_\+\+I\+SR@{sb\+R\+E\+C\+E\+I\+V\+E\+\_\+\+C\+O\+M\+P\+L\+E\+T\+E\+D\+\_\+\+F\+R\+O\+M\+\_\+\+I\+SR}}
\index{sb\+R\+E\+C\+E\+I\+V\+E\+\_\+\+C\+O\+M\+P\+L\+E\+T\+E\+D\+\_\+\+F\+R\+O\+M\+\_\+\+I\+SR@{sb\+R\+E\+C\+E\+I\+V\+E\+\_\+\+C\+O\+M\+P\+L\+E\+T\+E\+D\+\_\+\+F\+R\+O\+M\+\_\+\+I\+SR}!stream\+\_\+buffer.\+c@{stream\+\_\+buffer.\+c}}
\subsubsection{\texorpdfstring{sb\+R\+E\+C\+E\+I\+V\+E\+\_\+\+C\+O\+M\+P\+L\+E\+T\+E\+D\+\_\+\+F\+R\+O\+M\+\_\+\+I\+SR}{sbRECEIVE\_COMPLETED\_FROM\_ISR}}
{\footnotesize\ttfamily \#define sb\+R\+E\+C\+E\+I\+V\+E\+\_\+\+C\+O\+M\+P\+L\+E\+T\+E\+D\+\_\+\+F\+R\+O\+M\+\_\+\+I\+SR(\begin{DoxyParamCaption}\item[{}]{px\+Stream\+Buffer,  }\item[{}]{px\+Higher\+Priority\+Task\+Woken }\end{DoxyParamCaption})}

{\bfseries Value\+:}
\begin{DoxyCode}
\{                                                                                   \(\backslash\)
    UBaseType\_t uxSavedInterruptStatus;                                                 \(\backslash\)
                                                                                        \(\backslash\)
        uxSavedInterruptStatus = ( \hyperlink{pic32mx_2portmacro_8h_a646f89d4298e4f5afd522202b11cb2e6}{UBaseType\_t} ) 
      \hyperlink{FreeRTOS_8h_a31b4260dbc1823ba80b578f86eb15a98}{portSET\_INTERRUPT\_MASK\_FROM\_ISR}();       \(\backslash\)
        \{                                                                               \(\backslash\)
            if( ( pxStreamBuffer )->xTaskWaitingToSend != \hyperlink{group__BSPDefine_ga070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL} )                        \(\backslash\)
            \{                                                                           \(\backslash\)
                ( void ) \hyperlink{task_8h_a1ed9129068b96a909356bd0369c5ecb0}{xTaskNotifyFromISR}( ( pxStreamBuffer )->xTaskWaitingToSend,  \(\backslash\)
                                             ( \hyperlink{stdint_8h_a435d1572bf3f880d55459d9805097f62}{uint32\_t} ) 0,                            \(\backslash\)
                                             \hyperlink{task_8h_ae8abc4f7da5b6880467daafbf19cd233abac2b17ab15444724b6f35d47cd0a64a}{eNoAction},                                    \(\backslash\)
                                             pxHigherPriorityTaskWoken );               \(\backslash\)
                ( pxStreamBuffer )->xTaskWaitingToSend = \hyperlink{group__BSPDefine_ga070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL};                          \(\backslash\)
            \}                                                                           \(\backslash\)
        \}                                                                               \(\backslash\)
        portCLEAR\_INTERRUPT\_MASK\_FROM\_ISR( uxSavedInterruptStatus );                    \(\backslash\)
    \}
\end{DoxyCode}


Definition at line 72 of file stream\+\_\+buffer.\+c.

\mbox{\Hypertarget{stream__buffer_8c_aadd3cf567c5086402552c463c55dda7c}\label{stream__buffer_8c_aadd3cf567c5086402552c463c55dda7c}} 
\index{stream\+\_\+buffer.\+c@{stream\+\_\+buffer.\+c}!sb\+S\+E\+N\+D\+\_\+\+C\+O\+M\+P\+L\+E\+T\+E\+\_\+\+F\+R\+O\+M\+\_\+\+I\+SR@{sb\+S\+E\+N\+D\+\_\+\+C\+O\+M\+P\+L\+E\+T\+E\+\_\+\+F\+R\+O\+M\+\_\+\+I\+SR}}
\index{sb\+S\+E\+N\+D\+\_\+\+C\+O\+M\+P\+L\+E\+T\+E\+\_\+\+F\+R\+O\+M\+\_\+\+I\+SR@{sb\+S\+E\+N\+D\+\_\+\+C\+O\+M\+P\+L\+E\+T\+E\+\_\+\+F\+R\+O\+M\+\_\+\+I\+SR}!stream\+\_\+buffer.\+c@{stream\+\_\+buffer.\+c}}
\subsubsection{\texorpdfstring{sb\+S\+E\+N\+D\+\_\+\+C\+O\+M\+P\+L\+E\+T\+E\+\_\+\+F\+R\+O\+M\+\_\+\+I\+SR}{sbSEND\_COMPLETE\_FROM\_ISR}}
{\footnotesize\ttfamily \#define sb\+S\+E\+N\+D\+\_\+\+C\+O\+M\+P\+L\+E\+T\+E\+\_\+\+F\+R\+O\+M\+\_\+\+I\+SR(\begin{DoxyParamCaption}\item[{}]{px\+Stream\+Buffer,  }\item[{}]{px\+Higher\+Priority\+Task\+Woken }\end{DoxyParamCaption})}

{\bfseries Value\+:}
\begin{DoxyCode}
\{                                                                                   \(\backslash\)
    UBaseType\_t uxSavedInterruptStatus;                                                 \(\backslash\)
                                                                                        \(\backslash\)
        uxSavedInterruptStatus = ( \hyperlink{pic32mx_2portmacro_8h_a646f89d4298e4f5afd522202b11cb2e6}{UBaseType\_t} ) 
      \hyperlink{FreeRTOS_8h_a31b4260dbc1823ba80b578f86eb15a98}{portSET\_INTERRUPT\_MASK\_FROM\_ISR}();       \(\backslash\)
        \{                                                                               \(\backslash\)
            if( ( pxStreamBuffer )->xTaskWaitingToReceive != \hyperlink{group__BSPDefine_ga070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL} )                     \(\backslash\)
            \{                                                                           \(\backslash\)
                ( void ) \hyperlink{task_8h_a1ed9129068b96a909356bd0369c5ecb0}{xTaskNotifyFromISR}( ( pxStreamBuffer )->xTaskWaitingToReceive,   
      \(\backslash\)
                                             ( \hyperlink{stdint_8h_a435d1572bf3f880d55459d9805097f62}{uint32\_t} ) 0,                            \(\backslash\)
                                             \hyperlink{task_8h_ae8abc4f7da5b6880467daafbf19cd233abac2b17ab15444724b6f35d47cd0a64a}{eNoAction},                                    \(\backslash\)
                                             pxHigherPriorityTaskWoken );               \(\backslash\)
                ( pxStreamBuffer )->xTaskWaitingToReceive = \hyperlink{group__BSPDefine_ga070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL};                       \(\backslash\)
            \}                                                                           \(\backslash\)
        \}                                                                               \(\backslash\)
        portCLEAR\_INTERRUPT\_MASK\_FROM\_ISR( uxSavedInterruptStatus );                    \(\backslash\)
    \}
\end{DoxyCode}


Definition at line 111 of file stream\+\_\+buffer.\+c.

\mbox{\Hypertarget{stream__buffer_8c_aa75273dfbcd92710254df0165ae1da5d}\label{stream__buffer_8c_aa75273dfbcd92710254df0165ae1da5d}} 
\index{stream\+\_\+buffer.\+c@{stream\+\_\+buffer.\+c}!sb\+S\+E\+N\+D\+\_\+\+C\+O\+M\+P\+L\+E\+T\+ED@{sb\+S\+E\+N\+D\+\_\+\+C\+O\+M\+P\+L\+E\+T\+ED}}
\index{sb\+S\+E\+N\+D\+\_\+\+C\+O\+M\+P\+L\+E\+T\+ED@{sb\+S\+E\+N\+D\+\_\+\+C\+O\+M\+P\+L\+E\+T\+ED}!stream\+\_\+buffer.\+c@{stream\+\_\+buffer.\+c}}
\subsubsection{\texorpdfstring{sb\+S\+E\+N\+D\+\_\+\+C\+O\+M\+P\+L\+E\+T\+ED}{sbSEND\_COMPLETED}}
{\footnotesize\ttfamily \#define sb\+S\+E\+N\+D\+\_\+\+C\+O\+M\+P\+L\+E\+T\+ED(\begin{DoxyParamCaption}\item[{}]{px\+Stream\+Buffer }\end{DoxyParamCaption})}

{\bfseries Value\+:}
\begin{DoxyCode}
\hyperlink{task_8h_a366b302eba79d10b5ee2a3756f0fcc43}{vTaskSuspendAll}();                                                               \(\backslash\)
        \{                                                                               \(\backslash\)
            if( ( pxStreamBuffer )->xTaskWaitingToReceive != \hyperlink{group__BSPDefine_ga070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL} )                     \(\backslash\)
            \{                                                                           \(\backslash\)
                ( void ) \hyperlink{task_8h_a0d2d54fb8a64011dfbb54983e4ed06bd}{xTaskNotify}( ( pxStreamBuffer )->xTaskWaitingToReceive,     \(\backslash\)
                                      ( \hyperlink{stdint_8h_a435d1572bf3f880d55459d9805097f62}{uint32\_t} ) 0,                                   \(\backslash\)
                                      \hyperlink{task_8h_ae8abc4f7da5b6880467daafbf19cd233abac2b17ab15444724b6f35d47cd0a64a}{eNoAction} );                                     \(\backslash\)
                ( pxStreamBuffer )->xTaskWaitingToReceive = \hyperlink{group__BSPDefine_ga070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL};                       \(\backslash\)
            \}                                                                           \(\backslash\)
        \}                                                                               \(\backslash\)
        ( void ) \hyperlink{task_8h_a003f8ae6d649225abd030cc76e1c7d0e}{xTaskResumeAll}();
\end{DoxyCode}


Definition at line 96 of file stream\+\_\+buffer.\+c.



\subsection{Typedef Documentation}
\mbox{\Hypertarget{stream__buffer_8c_a6fb73c13219d9ddc8fe15f0c030cd86d}\label{stream__buffer_8c_a6fb73c13219d9ddc8fe15f0c030cd86d}} 
\index{stream\+\_\+buffer.\+c@{stream\+\_\+buffer.\+c}!Stream\+Buffer\+\_\+t@{Stream\+Buffer\+\_\+t}}
\index{Stream\+Buffer\+\_\+t@{Stream\+Buffer\+\_\+t}!stream\+\_\+buffer.\+c@{stream\+\_\+buffer.\+c}}
\subsubsection{\texorpdfstring{Stream\+Buffer\+\_\+t}{StreamBuffer\_t}}
{\footnotesize\ttfamily typedef struct \hyperlink{structStreamBufferDef__t}{Stream\+Buffer\+Def\+\_\+t}  \hyperlink{stream__buffer_8c_a6fb73c13219d9ddc8fe15f0c030cd86d}{Stream\+Buffer\+\_\+t}}



\subsection{Function Documentation}
\mbox{\Hypertarget{stream__buffer_8c_ac4183c0af266bc5ffbd4f3eb4a4d07c2}\label{stream__buffer_8c_ac4183c0af266bc5ffbd4f3eb4a4d07c2}} 
\index{stream\+\_\+buffer.\+c@{stream\+\_\+buffer.\+c}!prv\+Bytes\+In\+Buffer@{prv\+Bytes\+In\+Buffer}}
\index{prv\+Bytes\+In\+Buffer@{prv\+Bytes\+In\+Buffer}!stream\+\_\+buffer.\+c@{stream\+\_\+buffer.\+c}}
\subsubsection{\texorpdfstring{prv\+Bytes\+In\+Buffer()}{prvBytesInBuffer()}}
{\footnotesize\ttfamily static size\+\_\+t prv\+Bytes\+In\+Buffer (\begin{DoxyParamCaption}\item[{const \hyperlink{stream__buffer_8c_a6fb73c13219d9ddc8fe15f0c030cd86d}{Stream\+Buffer\+\_\+t} $\ast$const}]{px\+Stream\+Buffer }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [static]}}



Definition at line 1189 of file stream\+\_\+buffer.\+c.


\begin{DoxyCode}
1190 \{
1191 \textcolor{comment}{/* Returns the distance between xTail and xHead. */}
1192 \textcolor{keywordtype}{size\_t} xCount;
1193 
1194     xCount = pxStreamBuffer->\hyperlink{structStreamBufferDef__t_a6eedf41c877edd42b3b460780d1b6555}{xLength} + pxStreamBuffer->\hyperlink{structStreamBufferDef__t_a75aafb9fdee8f0666837302bd9b12341}{xHead};
1195     xCount -= pxStreamBuffer->\hyperlink{structStreamBufferDef__t_a937e441ed6c946a099d52b5955d7302c}{xTail};
1196     \textcolor{keywordflow}{if} ( xCount >= pxStreamBuffer->\hyperlink{structStreamBufferDef__t_a6eedf41c877edd42b3b460780d1b6555}{xLength} )
1197     \{
1198         xCount -= pxStreamBuffer->\hyperlink{structStreamBufferDef__t_a6eedf41c877edd42b3b460780d1b6555}{xLength};
1199     \}
1200     \textcolor{keywordflow}{else}
1201     \{
1202         \hyperlink{FreeRTOS_8h_ac77e2af1a6b0d38fbab36cf2aa96f1a8}{mtCOVERAGE\_TEST\_MARKER}();
1203     \}
1204 
1205     \textcolor{keywordflow}{return} xCount;
1206 \}
\end{DoxyCode}
\mbox{\Hypertarget{stream__buffer_8c_a7f655ff13acb1a5614dbc7e7f43ecbb2}\label{stream__buffer_8c_a7f655ff13acb1a5614dbc7e7f43ecbb2}} 
\index{stream\+\_\+buffer.\+c@{stream\+\_\+buffer.\+c}!prv\+Initialise\+New\+Stream\+Buffer@{prv\+Initialise\+New\+Stream\+Buffer}}
\index{prv\+Initialise\+New\+Stream\+Buffer@{prv\+Initialise\+New\+Stream\+Buffer}!stream\+\_\+buffer.\+c@{stream\+\_\+buffer.\+c}}
\subsubsection{\texorpdfstring{prv\+Initialise\+New\+Stream\+Buffer()}{prvInitialiseNewStreamBuffer()}}
{\footnotesize\ttfamily static void prv\+Initialise\+New\+Stream\+Buffer (\begin{DoxyParamCaption}\item[{\hyperlink{stream__buffer_8c_a6fb73c13219d9ddc8fe15f0c030cd86d}{Stream\+Buffer\+\_\+t} $\ast$const}]{px\+Stream\+Buffer,  }\item[{\hyperlink{stdint_8h_aba7bc1797add20fe3efdf37ced1182c5}{uint8\+\_\+t} $\ast$const}]{puc\+Buffer,  }\item[{size\+\_\+t}]{x\+Buffer\+Size\+Bytes,  }\item[{size\+\_\+t}]{x\+Trigger\+Level\+Bytes,  }\item[{\hyperlink{stdint_8h_aba7bc1797add20fe3efdf37ced1182c5}{uint8\+\_\+t}}]{uc\+Flags }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [static]}}



Definition at line 1209 of file stream\+\_\+buffer.\+c.


\begin{DoxyCode}
1214 \{
1215     \textcolor{comment}{/* Assert here is deliberately writing to the entire buffer to ensure it can}
1216 \textcolor{comment}{    be written to without generating exceptions, and is setting the buffer to a}
1217 \textcolor{comment}{    known value to assist in development/debugging. */}
1218 \textcolor{preprocessor}{    #if( configASSERT\_DEFINED == 1 )}
1219     \{
1220         \textcolor{comment}{/* The value written just has to be identifiable when looking at the}
1221 \textcolor{comment}{        memory.  Don't use 0xA5 as that is the stack fill value and could}
1222 \textcolor{comment}{        result in confusion as to what is actually being observed. */}
1223         \textcolor{keyword}{const} \hyperlink{pic32mx_2portmacro_8h_a46fb21e00ae0729d7515c0fbf2269796}{BaseType\_t} xWriteValue = 0x55;
1224         \hyperlink{FreeRTOS_8h_a228c70cd48927d6ab730ed1a6dfbe35f}{configASSERT}( memset( pucBuffer, ( \textcolor{keywordtype}{int} ) xWriteValue, xBufferSizeBytes ) == pucBuffer )
      ;
1225     \} \textcolor{comment}{/*lint !e529 !e438 xWriteValue is only used if configASSERT() is defined. */}
1226 \textcolor{preprocessor}{    #endif}
1227 
1228     ( void ) memset( ( \textcolor{keywordtype}{void} * ) pxStreamBuffer, 0x00, \textcolor{keyword}{sizeof}( \hyperlink{stream__buffer_8c_a6fb73c13219d9ddc8fe15f0c030cd86d}{StreamBuffer\_t} ) ); \textcolor{comment}{/*lint
       !e9087 memset() requires void *. */}
1229     pxStreamBuffer->\hyperlink{structStreamBufferDef__t_a4e05054a8a3d61a5cec0c18a70bbdb67}{pucBuffer} = pucBuffer;
1230     pxStreamBuffer->\hyperlink{structStreamBufferDef__t_a6eedf41c877edd42b3b460780d1b6555}{xLength} = xBufferSizeBytes;
1231     pxStreamBuffer->\hyperlink{structStreamBufferDef__t_a4a7ee9b374cc0b358d049811def8d595}{xTriggerLevelBytes} = xTriggerLevelBytes;
1232     pxStreamBuffer->\hyperlink{structStreamBufferDef__t_a1afd02d997a1cb3149e3cf203c681d58}{ucFlags} = ucFlags;
1233 \}
\end{DoxyCode}
\mbox{\Hypertarget{stream__buffer_8c_a8ec163e54dc25c091dbff11c1b8f7a2c}\label{stream__buffer_8c_a8ec163e54dc25c091dbff11c1b8f7a2c}} 
\index{stream\+\_\+buffer.\+c@{stream\+\_\+buffer.\+c}!prv\+Read\+Bytes\+From\+Buffer@{prv\+Read\+Bytes\+From\+Buffer}}
\index{prv\+Read\+Bytes\+From\+Buffer@{prv\+Read\+Bytes\+From\+Buffer}!stream\+\_\+buffer.\+c@{stream\+\_\+buffer.\+c}}
\subsubsection{\texorpdfstring{prv\+Read\+Bytes\+From\+Buffer()}{prvReadBytesFromBuffer()}}
{\footnotesize\ttfamily static size\+\_\+t prv\+Read\+Bytes\+From\+Buffer (\begin{DoxyParamCaption}\item[{\hyperlink{stream__buffer_8c_a6fb73c13219d9ddc8fe15f0c030cd86d}{Stream\+Buffer\+\_\+t} $\ast$}]{px\+Stream\+Buffer,  }\item[{\hyperlink{stdint_8h_aba7bc1797add20fe3efdf37ced1182c5}{uint8\+\_\+t} $\ast$}]{puc\+Data,  }\item[{size\+\_\+t}]{x\+Max\+Count,  }\item[{size\+\_\+t}]{x\+Bytes\+Available }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [static]}}



Definition at line 1134 of file stream\+\_\+buffer.\+c.


\begin{DoxyCode}
1135 \{
1136 \textcolor{keywordtype}{size\_t} xCount, xFirstLength, xNextTail;
1137 
1138     \textcolor{comment}{/* Use the minimum of the wanted bytes and the available bytes. */}
1139     xCount = \hyperlink{FreeRTOS_8h_a101a57cef3f76ec13110cec59ce49edf}{configMIN}( xBytesAvailable, xMaxCount );
1140 
1141     \textcolor{keywordflow}{if}( xCount > ( \textcolor{keywordtype}{size\_t} ) 0 )
1142     \{
1143         xNextTail = pxStreamBuffer->\hyperlink{structStreamBufferDef__t_a937e441ed6c946a099d52b5955d7302c}{xTail};
1144 
1145         \textcolor{comment}{/* Calculate the number of bytes that can be read - which may be}
1146 \textcolor{comment}{        less than the number wanted if the data wraps around to the start of}
1147 \textcolor{comment}{        the buffer. */}
1148         xFirstLength = \hyperlink{FreeRTOS_8h_a101a57cef3f76ec13110cec59ce49edf}{configMIN}( pxStreamBuffer->\hyperlink{structStreamBufferDef__t_a6eedf41c877edd42b3b460780d1b6555}{xLength} - xNextTail, xCount );
1149 
1150         \textcolor{comment}{/* Obtain the number of bytes it is possible to obtain in the first}
1151 \textcolor{comment}{        read.  Asserts check bounds of read and write. */}
1152         \hyperlink{FreeRTOS_8h_a228c70cd48927d6ab730ed1a6dfbe35f}{configASSERT}( xFirstLength <= xMaxCount );
1153         \hyperlink{FreeRTOS_8h_a228c70cd48927d6ab730ed1a6dfbe35f}{configASSERT}( ( xNextTail + xFirstLength ) <= pxStreamBuffer->
      \hyperlink{structStreamBufferDef__t_a6eedf41c877edd42b3b460780d1b6555}{xLength} );
1154         ( void ) memcpy( ( \textcolor{keywordtype}{void} * ) pucData, ( \textcolor{keyword}{const} \textcolor{keywordtype}{void} * ) &( pxStreamBuffer->
      \hyperlink{structStreamBufferDef__t_a4e05054a8a3d61a5cec0c18a70bbdb67}{pucBuffer}[ xNextTail ] ), xFirstLength ); \textcolor{comment}{/*lint !e9087 memcpy() requires void *. */}
1155 
1156         \textcolor{comment}{/* If the total number of wanted bytes is greater than the number}
1157 \textcolor{comment}{        that could be read in the first read... */}
1158         \textcolor{keywordflow}{if}( xCount > xFirstLength )
1159         \{
1160             \textcolor{comment}{/*...then read the remaining bytes from the start of the buffer. */}
1161             \hyperlink{FreeRTOS_8h_a228c70cd48927d6ab730ed1a6dfbe35f}{configASSERT}( xCount <= xMaxCount );
1162             ( void ) memcpy( ( \textcolor{keywordtype}{void} * ) &( pucData[ xFirstLength ] ), ( \textcolor{keywordtype}{void} * ) ( pxStreamBuffer->
      \hyperlink{structStreamBufferDef__t_a4e05054a8a3d61a5cec0c18a70bbdb67}{pucBuffer} ), xCount - xFirstLength ); \textcolor{comment}{/*lint !e9087 memcpy() requires void *. */}
1163         \}
1164         \textcolor{keywordflow}{else}
1165         \{
1166             \hyperlink{FreeRTOS_8h_ac77e2af1a6b0d38fbab36cf2aa96f1a8}{mtCOVERAGE\_TEST\_MARKER}();
1167         \}
1168 
1169         \textcolor{comment}{/* Move the tail pointer to effectively remove the data read from}
1170 \textcolor{comment}{        the buffer. */}
1171         xNextTail += xCount;
1172 
1173         \textcolor{keywordflow}{if}( xNextTail >= pxStreamBuffer->\hyperlink{structStreamBufferDef__t_a6eedf41c877edd42b3b460780d1b6555}{xLength} )
1174         \{
1175             xNextTail -= pxStreamBuffer->\hyperlink{structStreamBufferDef__t_a6eedf41c877edd42b3b460780d1b6555}{xLength};
1176         \}
1177 
1178         pxStreamBuffer->\hyperlink{structStreamBufferDef__t_a937e441ed6c946a099d52b5955d7302c}{xTail} = xNextTail;
1179     \}
1180     \textcolor{keywordflow}{else}
1181     \{
1182         \hyperlink{FreeRTOS_8h_ac77e2af1a6b0d38fbab36cf2aa96f1a8}{mtCOVERAGE\_TEST\_MARKER}();
1183     \}
1184 
1185     \textcolor{keywordflow}{return} xCount;
1186 \}
\end{DoxyCode}
\mbox{\Hypertarget{stream__buffer_8c_aea486f3983538e061b22cce98612d8bc}\label{stream__buffer_8c_aea486f3983538e061b22cce98612d8bc}} 
\index{stream\+\_\+buffer.\+c@{stream\+\_\+buffer.\+c}!prv\+Read\+Message\+From\+Buffer@{prv\+Read\+Message\+From\+Buffer}}
\index{prv\+Read\+Message\+From\+Buffer@{prv\+Read\+Message\+From\+Buffer}!stream\+\_\+buffer.\+c@{stream\+\_\+buffer.\+c}}
\subsubsection{\texorpdfstring{prv\+Read\+Message\+From\+Buffer()}{prvReadMessageFromBuffer()}}
{\footnotesize\ttfamily static size\+\_\+t prv\+Read\+Message\+From\+Buffer (\begin{DoxyParamCaption}\item[{\hyperlink{stream__buffer_8c_a6fb73c13219d9ddc8fe15f0c030cd86d}{Stream\+Buffer\+\_\+t} $\ast$}]{px\+Stream\+Buffer,  }\item[{void $\ast$}]{pv\+Rx\+Data,  }\item[{size\+\_\+t}]{x\+Buffer\+Length\+Bytes,  }\item[{size\+\_\+t}]{x\+Bytes\+Available,  }\item[{size\+\_\+t}]{x\+Bytes\+To\+Store\+Message\+Length }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [static]}}



Definition at line 918 of file stream\+\_\+buffer.\+c.


\begin{DoxyCode}
923 \{
924 \textcolor{keywordtype}{size\_t} xOriginalTail, xReceivedLength, xNextMessageLength;
925 \hyperlink{FreeRTOS_8h_a019c8bfcdd8eca676c7b9993bda95967}{configMESSAGE\_BUFFER\_LENGTH\_TYPE} xTempNextMessageLength;
926 
927     \textcolor{keywordflow}{if}( xBytesToStoreMessageLength != ( \textcolor{keywordtype}{size\_t} ) 0 )
928     \{
929         \textcolor{comment}{/* A discrete message is being received.  First receive the length}
930 \textcolor{comment}{        of the message.  A copy of the tail is stored so the buffer can be}
931 \textcolor{comment}{        returned to its prior state if the length of the message is too}
932 \textcolor{comment}{        large for the provided buffer. */}
933         xOriginalTail = pxStreamBuffer->\hyperlink{structStreamBufferDef__t_a937e441ed6c946a099d52b5955d7302c}{xTail};
934         ( void ) \hyperlink{stream__buffer_8c_a8ec163e54dc25c091dbff11c1b8f7a2c}{prvReadBytesFromBuffer}( pxStreamBuffer, ( 
      \hyperlink{stdint_8h_aba7bc1797add20fe3efdf37ced1182c5}{uint8\_t} * ) &xTempNextMessageLength, xBytesToStoreMessageLength, xBytesAvailable );
935         xNextMessageLength = ( size\_t ) xTempNextMessageLength;
936 
937         \textcolor{comment}{/* Reduce the number of bytes available by the number of bytes just}
938 \textcolor{comment}{        read out. */}
939         xBytesAvailable -= xBytesToStoreMessageLength;
940 
941         \textcolor{comment}{/* Check there is enough space in the buffer provided by the}
942 \textcolor{comment}{        user. */}
943         \textcolor{keywordflow}{if}( xNextMessageLength > xBufferLengthBytes )
944         \{
945             \textcolor{comment}{/* The user has provided insufficient space to read the message}
946 \textcolor{comment}{            so return the buffer to its previous state (so the length of}
947 \textcolor{comment}{            the message is in the buffer again). */}
948             pxStreamBuffer->\hyperlink{structStreamBufferDef__t_a937e441ed6c946a099d52b5955d7302c}{xTail} = xOriginalTail;
949             xNextMessageLength = 0;
950         \}
951         \textcolor{keywordflow}{else}
952         \{
953             \hyperlink{FreeRTOS_8h_ac77e2af1a6b0d38fbab36cf2aa96f1a8}{mtCOVERAGE\_TEST\_MARKER}();
954         \}
955     \}
956     \textcolor{keywordflow}{else}
957     \{
958         \textcolor{comment}{/* A stream of bytes is being received (as opposed to a discrete}
959 \textcolor{comment}{        message), so read as many bytes as possible. */}
960         xNextMessageLength = xBufferLengthBytes;
961     \}
962 
963     \textcolor{comment}{/* Read the actual data. */}
964     xReceivedLength = \hyperlink{stream__buffer_8c_a8ec163e54dc25c091dbff11c1b8f7a2c}{prvReadBytesFromBuffer}( pxStreamBuffer, ( 
      \hyperlink{stdint_8h_aba7bc1797add20fe3efdf37ced1182c5}{uint8\_t} * ) pvRxData, xNextMessageLength, xBytesAvailable ); \textcolor{comment}{/*lint !e9079 Data storage area is
       implemented as uint8\_t array for ease of sizing, indexing and alignment. */}
965 
966     \textcolor{keywordflow}{return} xReceivedLength;
967 \}
\end{DoxyCode}
\mbox{\Hypertarget{stream__buffer_8c_ab05b79124292dd7bed33fca7a92473c0}\label{stream__buffer_8c_ab05b79124292dd7bed33fca7a92473c0}} 
\index{stream\+\_\+buffer.\+c@{stream\+\_\+buffer.\+c}!prv\+Write\+Bytes\+To\+Buffer@{prv\+Write\+Bytes\+To\+Buffer}}
\index{prv\+Write\+Bytes\+To\+Buffer@{prv\+Write\+Bytes\+To\+Buffer}!stream\+\_\+buffer.\+c@{stream\+\_\+buffer.\+c}}
\subsubsection{\texorpdfstring{prv\+Write\+Bytes\+To\+Buffer()}{prvWriteBytesToBuffer()}}
{\footnotesize\ttfamily static size\+\_\+t prv\+Write\+Bytes\+To\+Buffer (\begin{DoxyParamCaption}\item[{\hyperlink{stream__buffer_8c_a6fb73c13219d9ddc8fe15f0c030cd86d}{Stream\+Buffer\+\_\+t} $\ast$const}]{px\+Stream\+Buffer,  }\item[{const \hyperlink{stdint_8h_aba7bc1797add20fe3efdf37ced1182c5}{uint8\+\_\+t} $\ast$}]{puc\+Data,  }\item[{size\+\_\+t}]{x\+Count }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [static]}}



Definition at line 1088 of file stream\+\_\+buffer.\+c.


\begin{DoxyCode}
1089 \{
1090 \textcolor{keywordtype}{size\_t} xNextHead, xFirstLength;
1091 
1092     \hyperlink{FreeRTOS_8h_a228c70cd48927d6ab730ed1a6dfbe35f}{configASSERT}( xCount > ( \textcolor{keywordtype}{size\_t} ) 0 );
1093 
1094     xNextHead = pxStreamBuffer->\hyperlink{structStreamBufferDef__t_a75aafb9fdee8f0666837302bd9b12341}{xHead};
1095 
1096     \textcolor{comment}{/* Calculate the number of bytes that can be added in the first write -}
1097 \textcolor{comment}{    which may be less than the total number of bytes that need to be added if}
1098 \textcolor{comment}{    the buffer will wrap back to the beginning. */}
1099     xFirstLength = \hyperlink{FreeRTOS_8h_a101a57cef3f76ec13110cec59ce49edf}{configMIN}( pxStreamBuffer->\hyperlink{structStreamBufferDef__t_a6eedf41c877edd42b3b460780d1b6555}{xLength} - xNextHead, xCount );
1100 
1101     \textcolor{comment}{/* Write as many bytes as can be written in the first write. */}
1102     \hyperlink{FreeRTOS_8h_a228c70cd48927d6ab730ed1a6dfbe35f}{configASSERT}( ( xNextHead + xFirstLength ) <= pxStreamBuffer->
      \hyperlink{structStreamBufferDef__t_a6eedf41c877edd42b3b460780d1b6555}{xLength} );
1103     ( void ) memcpy( ( \textcolor{keywordtype}{void}* ) ( &( pxStreamBuffer->\hyperlink{structStreamBufferDef__t_a4e05054a8a3d61a5cec0c18a70bbdb67}{pucBuffer}[ xNextHead ] ) ), ( \textcolor{keyword}{const} \textcolor{keywordtype}{void} * ) 
      pucData, xFirstLength ); \textcolor{comment}{/*lint !e9087 memcpy() requires void *. */}
1104 
1105     \textcolor{comment}{/* If the number of bytes written was less than the number that could be}
1106 \textcolor{comment}{    written in the first write... */}
1107     \textcolor{keywordflow}{if}( xCount > xFirstLength )
1108     \{
1109         \textcolor{comment}{/* ...then write the remaining bytes to the start of the buffer. */}
1110         \hyperlink{FreeRTOS_8h_a228c70cd48927d6ab730ed1a6dfbe35f}{configASSERT}( ( xCount - xFirstLength ) <= pxStreamBuffer->
      \hyperlink{structStreamBufferDef__t_a6eedf41c877edd42b3b460780d1b6555}{xLength} );
1111         ( void ) memcpy( ( \textcolor{keywordtype}{void} * ) pxStreamBuffer->\hyperlink{structStreamBufferDef__t_a4e05054a8a3d61a5cec0c18a70bbdb67}{pucBuffer}, ( \textcolor{keyword}{const} \textcolor{keywordtype}{void} * ) &( pucData[ 
      xFirstLength ] ), xCount - xFirstLength ); \textcolor{comment}{/*lint !e9087 memcpy() requires void *. */}
1112     \}
1113     \textcolor{keywordflow}{else}
1114     \{
1115         \hyperlink{FreeRTOS_8h_ac77e2af1a6b0d38fbab36cf2aa96f1a8}{mtCOVERAGE\_TEST\_MARKER}();
1116     \}
1117 
1118     xNextHead += xCount;
1119     \textcolor{keywordflow}{if}( xNextHead >= pxStreamBuffer->\hyperlink{structStreamBufferDef__t_a6eedf41c877edd42b3b460780d1b6555}{xLength} )
1120     \{
1121         xNextHead -= pxStreamBuffer->\hyperlink{structStreamBufferDef__t_a6eedf41c877edd42b3b460780d1b6555}{xLength};
1122     \}
1123     \textcolor{keywordflow}{else}
1124     \{
1125         \hyperlink{FreeRTOS_8h_ac77e2af1a6b0d38fbab36cf2aa96f1a8}{mtCOVERAGE\_TEST\_MARKER}();
1126     \}
1127 
1128     pxStreamBuffer->\hyperlink{structStreamBufferDef__t_a75aafb9fdee8f0666837302bd9b12341}{xHead} = xNextHead;
1129 
1130     \textcolor{keywordflow}{return} xCount;
1131 \}
\end{DoxyCode}
\mbox{\Hypertarget{stream__buffer_8c_a1415b7e265e106aab476023f9a6cce6c}\label{stream__buffer_8c_a1415b7e265e106aab476023f9a6cce6c}} 
\index{stream\+\_\+buffer.\+c@{stream\+\_\+buffer.\+c}!prv\+Write\+Message\+To\+Buffer@{prv\+Write\+Message\+To\+Buffer}}
\index{prv\+Write\+Message\+To\+Buffer@{prv\+Write\+Message\+To\+Buffer}!stream\+\_\+buffer.\+c@{stream\+\_\+buffer.\+c}}
\subsubsection{\texorpdfstring{prv\+Write\+Message\+To\+Buffer()}{prvWriteMessageToBuffer()}}
{\footnotesize\ttfamily static size\+\_\+t prv\+Write\+Message\+To\+Buffer (\begin{DoxyParamCaption}\item[{\hyperlink{stream__buffer_8c_a6fb73c13219d9ddc8fe15f0c030cd86d}{Stream\+Buffer\+\_\+t} $\ast$const}]{px\+Stream\+Buffer,  }\item[{const void $\ast$}]{pv\+Tx\+Data,  }\item[{size\+\_\+t}]{x\+Data\+Length\+Bytes,  }\item[{size\+\_\+t}]{x\+Space,  }\item[{size\+\_\+t}]{x\+Required\+Space }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [static]}}



Definition at line 661 of file stream\+\_\+buffer.\+c.


\begin{DoxyCode}
666 \{
667     \hyperlink{pic32mx_2portmacro_8h_a46fb21e00ae0729d7515c0fbf2269796}{BaseType\_t} xShouldWrite;
668     \textcolor{keywordtype}{size\_t} xReturn;
669 
670     \textcolor{keywordflow}{if}( xSpace == ( \textcolor{keywordtype}{size\_t} ) 0 )
671     \{
672         \textcolor{comment}{/* Doesn't matter if this is a stream buffer or a message buffer, there}
673 \textcolor{comment}{        is no space to write. */}
674         xShouldWrite = \hyperlink{projdefs_8h_aa56260e937e7e203026707e5ba944273}{pdFALSE};
675     \}
676     \textcolor{keywordflow}{else} \textcolor{keywordflow}{if}( ( pxStreamBuffer->\hyperlink{structStreamBufferDef__t_a1afd02d997a1cb3149e3cf203c681d58}{ucFlags} & \hyperlink{stream__buffer_8c_a4954c04e3f9f6b0d4a98b9441b35d896}{sbFLAGS\_IS\_MESSAGE\_BUFFER} ) == ( 
      \hyperlink{stdint_8h_aba7bc1797add20fe3efdf37ced1182c5}{uint8\_t} ) 0 )
677     \{
678         \textcolor{comment}{/* This is a stream buffer, as opposed to a message buffer, so writing a}
679 \textcolor{comment}{        stream of bytes rather than discrete messages.  Write as many bytes as}
680 \textcolor{comment}{        possible. */}
681         xShouldWrite = \hyperlink{projdefs_8h_af268cf937960eb029256bd9c4d949fbe}{pdTRUE};
682         xDataLengthBytes = \hyperlink{FreeRTOS_8h_a101a57cef3f76ec13110cec59ce49edf}{configMIN}( xDataLengthBytes, xSpace );
683     \}
684     \textcolor{keywordflow}{else} \textcolor{keywordflow}{if}( xSpace >= xRequiredSpace )
685     \{
686         \textcolor{comment}{/* This is a message buffer, as opposed to a stream buffer, and there}
687 \textcolor{comment}{        is enough space to write both the message length and the message itself}
688 \textcolor{comment}{        into the buffer.  Start by writing the length of the data, the data}
689 \textcolor{comment}{        itself will be written later in this function. */}
690         xShouldWrite = \hyperlink{projdefs_8h_af268cf937960eb029256bd9c4d949fbe}{pdTRUE};
691         ( void ) \hyperlink{stream__buffer_8c_ab05b79124292dd7bed33fca7a92473c0}{prvWriteBytesToBuffer}( pxStreamBuffer, ( \textcolor{keyword}{const} 
      \hyperlink{stdint_8h_aba7bc1797add20fe3efdf37ced1182c5}{uint8\_t} * ) &( xDataLengthBytes ), \hyperlink{stream__buffer_8c_aaa21967227eb06d02cdd038047b836f6}{sbBYTES\_TO\_STORE\_MESSAGE\_LENGTH} );
692     \}
693     \textcolor{keywordflow}{else}
694     \{
695         \textcolor{comment}{/* There is space available, but not enough space. */}
696         xShouldWrite = \hyperlink{projdefs_8h_aa56260e937e7e203026707e5ba944273}{pdFALSE};
697     \}
698 
699     \textcolor{keywordflow}{if}( xShouldWrite != \hyperlink{projdefs_8h_aa56260e937e7e203026707e5ba944273}{pdFALSE} )
700     \{
701         \textcolor{comment}{/* Writes the data itself. */}
702         xReturn = \hyperlink{stream__buffer_8c_ab05b79124292dd7bed33fca7a92473c0}{prvWriteBytesToBuffer}( pxStreamBuffer, ( \textcolor{keyword}{const} 
      \hyperlink{stdint_8h_aba7bc1797add20fe3efdf37ced1182c5}{uint8\_t} * ) pvTxData, xDataLengthBytes ); \textcolor{comment}{/*lint !e9079 Storage buffer is implemented as uint8\_t for
       ease of sizing, alighment and access. */}
703     \}
704     \textcolor{keywordflow}{else}
705     \{
706         xReturn = 0;
707     \}
708 
709     \textcolor{keywordflow}{return} xReturn;
710 \}
\end{DoxyCode}
\mbox{\Hypertarget{stream__buffer_8c_a7e66db41c3fd13acf3b9f814d650f77d}\label{stream__buffer_8c_a7e66db41c3fd13acf3b9f814d650f77d}} 
\index{stream\+\_\+buffer.\+c@{stream\+\_\+buffer.\+c}!v\+Stream\+Buffer\+Delete@{v\+Stream\+Buffer\+Delete}}
\index{v\+Stream\+Buffer\+Delete@{v\+Stream\+Buffer\+Delete}!stream\+\_\+buffer.\+c@{stream\+\_\+buffer.\+c}}
\subsubsection{\texorpdfstring{v\+Stream\+Buffer\+Delete()}{vStreamBufferDelete()}}
{\footnotesize\ttfamily void v\+Stream\+Buffer\+Delete (\begin{DoxyParamCaption}\item[{\hyperlink{stream__buffer_8h_a8b80974e2278f073412293e6580ce56f}{Stream\+Buffer\+Handle\+\_\+t}}]{x\+Stream\+Buffer }\end{DoxyParamCaption})}



Definition at line 359 of file stream\+\_\+buffer.\+c.


\begin{DoxyCode}
360 \{
361 \hyperlink{structStreamBufferDef__t}{StreamBuffer\_t} * pxStreamBuffer = xStreamBuffer;
362 
363     \hyperlink{FreeRTOS_8h_a228c70cd48927d6ab730ed1a6dfbe35f}{configASSERT}( pxStreamBuffer );
364 
365     \hyperlink{FreeRTOS_8h_ae919bd00b51b396ff237bc8ec3b6b439}{traceSTREAM\_BUFFER\_DELETE}( xStreamBuffer );
366 
367     \textcolor{keywordflow}{if}( ( pxStreamBuffer->\hyperlink{structStreamBufferDef__t_a1afd02d997a1cb3149e3cf203c681d58}{ucFlags} & \hyperlink{stream__buffer_8c_a80943e49aae8a493f02d78527b3fc01e}{sbFLAGS\_IS\_STATICALLY\_ALLOCATED} )
       == ( \hyperlink{stdint_8h_aba7bc1797add20fe3efdf37ced1182c5}{uint8\_t} ) \hyperlink{projdefs_8h_aa56260e937e7e203026707e5ba944273}{pdFALSE} )
368     \{
369 \textcolor{preprocessor}{        #if( configSUPPORT\_DYNAMIC\_ALLOCATION == 1 )}
370         \{
371             \textcolor{comment}{/* Both the structure and the buffer were allocated using a single call}
372 \textcolor{comment}{            to pvPortMalloc(), hence only one call to vPortFree() is required. */}
373             \hyperlink{portable_8h_a735cd3085bb7ba06ff8e47565bfd7016}{vPortFree}( ( \textcolor{keywordtype}{void} * ) pxStreamBuffer ); \textcolor{comment}{/*lint !e9087 Standard free() semantics
       require void *, plus pxStreamBuffer was allocated by pvPortMalloc(). */}
374         \}
375 \textcolor{preprocessor}{        #else}
376         \{
377             \textcolor{comment}{/* Should not be possible to get here, ucFlags must be corrupt.}
378 \textcolor{comment}{            Force an assert. */}
379             \hyperlink{FreeRTOS_8h_a228c70cd48927d6ab730ed1a6dfbe35f}{configASSERT}( xStreamBuffer == ( \hyperlink{structStreamBufferDef__t}{StreamBufferHandle\_t} ) ~0 );
380         \}
381 \textcolor{preprocessor}{        #endif}
382     \}
383     \textcolor{keywordflow}{else}
384     \{
385         \textcolor{comment}{/* The structure and buffer were not allocated dynamically and cannot be}
386 \textcolor{comment}{        freed - just scrub the structure so future use will assert. */}
387         ( void ) memset( pxStreamBuffer, 0x00, \textcolor{keyword}{sizeof}( \hyperlink{structStreamBufferDef__t}{StreamBuffer\_t} ) );
388     \}
389 \}
\end{DoxyCode}
\mbox{\Hypertarget{stream__buffer_8c_a5c473cb971d8a20b0528a1abc890833c}\label{stream__buffer_8c_a5c473cb971d8a20b0528a1abc890833c}} 
\index{stream\+\_\+buffer.\+c@{stream\+\_\+buffer.\+c}!x\+Stream\+Buffer\+Bytes\+Available@{x\+Stream\+Buffer\+Bytes\+Available}}
\index{x\+Stream\+Buffer\+Bytes\+Available@{x\+Stream\+Buffer\+Bytes\+Available}!stream\+\_\+buffer.\+c@{stream\+\_\+buffer.\+c}}
\subsubsection{\texorpdfstring{x\+Stream\+Buffer\+Bytes\+Available()}{xStreamBufferBytesAvailable()}}
{\footnotesize\ttfamily size\+\_\+t x\+Stream\+Buffer\+Bytes\+Available (\begin{DoxyParamCaption}\item[{\hyperlink{stream__buffer_8h_a8b80974e2278f073412293e6580ce56f}{Stream\+Buffer\+Handle\+\_\+t}}]{x\+Stream\+Buffer }\end{DoxyParamCaption})}



Definition at line 494 of file stream\+\_\+buffer.\+c.


\begin{DoxyCode}
495 \{
496 \textcolor{keyword}{const} \hyperlink{structStreamBufferDef__t}{StreamBuffer\_t} * \textcolor{keyword}{const} pxStreamBuffer = xStreamBuffer;
497 \textcolor{keywordtype}{size\_t} xReturn;
498 
499     \hyperlink{FreeRTOS_8h_a228c70cd48927d6ab730ed1a6dfbe35f}{configASSERT}( pxStreamBuffer );
500 
501     xReturn = \hyperlink{stream__buffer_8c_ac4183c0af266bc5ffbd4f3eb4a4d07c2}{prvBytesInBuffer}( pxStreamBuffer );
502     \textcolor{keywordflow}{return} xReturn;
503 \}
\end{DoxyCode}
\mbox{\Hypertarget{stream__buffer_8c_a95465cd3702e3eae08afb8e69e1c6525}\label{stream__buffer_8c_a95465cd3702e3eae08afb8e69e1c6525}} 
\index{stream\+\_\+buffer.\+c@{stream\+\_\+buffer.\+c}!x\+Stream\+Buffer\+Is\+Empty@{x\+Stream\+Buffer\+Is\+Empty}}
\index{x\+Stream\+Buffer\+Is\+Empty@{x\+Stream\+Buffer\+Is\+Empty}!stream\+\_\+buffer.\+c@{stream\+\_\+buffer.\+c}}
\subsubsection{\texorpdfstring{x\+Stream\+Buffer\+Is\+Empty()}{xStreamBufferIsEmpty()}}
{\footnotesize\ttfamily \hyperlink{pic32mx_2portmacro_8h_a46fb21e00ae0729d7515c0fbf2269796}{Base\+Type\+\_\+t} x\+Stream\+Buffer\+Is\+Empty (\begin{DoxyParamCaption}\item[{\hyperlink{stream__buffer_8h_a8b80974e2278f073412293e6580ce56f}{Stream\+Buffer\+Handle\+\_\+t}}]{x\+Stream\+Buffer }\end{DoxyParamCaption})}



Definition at line 970 of file stream\+\_\+buffer.\+c.


\begin{DoxyCode}
971 \{
972 \textcolor{keyword}{const} \hyperlink{structStreamBufferDef__t}{StreamBuffer\_t} * \textcolor{keyword}{const} pxStreamBuffer = xStreamBuffer;
973 \hyperlink{pic32mx_2portmacro_8h_a46fb21e00ae0729d7515c0fbf2269796}{BaseType\_t} xReturn;
974 \textcolor{keywordtype}{size\_t} xTail;
975 
976     \hyperlink{FreeRTOS_8h_a228c70cd48927d6ab730ed1a6dfbe35f}{configASSERT}( pxStreamBuffer );
977 
978     \textcolor{comment}{/* True if no bytes are available. */}
979     xTail = pxStreamBuffer->\hyperlink{structStreamBufferDef__t_a937e441ed6c946a099d52b5955d7302c}{xTail};
980     \textcolor{keywordflow}{if}( pxStreamBuffer->\hyperlink{structStreamBufferDef__t_a75aafb9fdee8f0666837302bd9b12341}{xHead} == xTail )
981     \{
982         xReturn = \hyperlink{projdefs_8h_af268cf937960eb029256bd9c4d949fbe}{pdTRUE};
983     \}
984     \textcolor{keywordflow}{else}
985     \{
986         xReturn = \hyperlink{projdefs_8h_aa56260e937e7e203026707e5ba944273}{pdFALSE};
987     \}
988 
989     \textcolor{keywordflow}{return} xReturn;
990 \}
\end{DoxyCode}
\mbox{\Hypertarget{stream__buffer_8c_a77c2ae33c45c948e7af4d61fdd6cf1f1}\label{stream__buffer_8c_a77c2ae33c45c948e7af4d61fdd6cf1f1}} 
\index{stream\+\_\+buffer.\+c@{stream\+\_\+buffer.\+c}!x\+Stream\+Buffer\+Is\+Full@{x\+Stream\+Buffer\+Is\+Full}}
\index{x\+Stream\+Buffer\+Is\+Full@{x\+Stream\+Buffer\+Is\+Full}!stream\+\_\+buffer.\+c@{stream\+\_\+buffer.\+c}}
\subsubsection{\texorpdfstring{x\+Stream\+Buffer\+Is\+Full()}{xStreamBufferIsFull()}}
{\footnotesize\ttfamily \hyperlink{pic32mx_2portmacro_8h_a46fb21e00ae0729d7515c0fbf2269796}{Base\+Type\+\_\+t} x\+Stream\+Buffer\+Is\+Full (\begin{DoxyParamCaption}\item[{\hyperlink{stream__buffer_8h_a8b80974e2278f073412293e6580ce56f}{Stream\+Buffer\+Handle\+\_\+t}}]{x\+Stream\+Buffer }\end{DoxyParamCaption})}



Definition at line 993 of file stream\+\_\+buffer.\+c.


\begin{DoxyCode}
994 \{
995 \hyperlink{pic32mx_2portmacro_8h_a46fb21e00ae0729d7515c0fbf2269796}{BaseType\_t} xReturn;
996 \textcolor{keywordtype}{size\_t} xBytesToStoreMessageLength;
997 \textcolor{keyword}{const} \hyperlink{structStreamBufferDef__t}{StreamBuffer\_t} * \textcolor{keyword}{const} pxStreamBuffer = xStreamBuffer;
998 
999     \hyperlink{FreeRTOS_8h_a228c70cd48927d6ab730ed1a6dfbe35f}{configASSERT}( pxStreamBuffer );
1000 
1001     \textcolor{comment}{/* This generic version of the receive function is used by both message}
1002 \textcolor{comment}{    buffers, which store discrete messages, and stream buffers, which store a}
1003 \textcolor{comment}{    continuous stream of bytes.  Discrete messages include an additional}
1004 \textcolor{comment}{    sbBYTES\_TO\_STORE\_MESSAGE\_LENGTH bytes that hold the length of the message. */}
1005     \textcolor{keywordflow}{if}( ( pxStreamBuffer->\hyperlink{structStreamBufferDef__t_a1afd02d997a1cb3149e3cf203c681d58}{ucFlags} & \hyperlink{stream__buffer_8c_a4954c04e3f9f6b0d4a98b9441b35d896}{sbFLAGS\_IS\_MESSAGE\_BUFFER} ) != ( 
      \hyperlink{stdint_8h_aba7bc1797add20fe3efdf37ced1182c5}{uint8\_t} ) 0 )
1006     \{
1007         xBytesToStoreMessageLength = \hyperlink{stream__buffer_8c_aaa21967227eb06d02cdd038047b836f6}{sbBYTES\_TO\_STORE\_MESSAGE\_LENGTH};
1008     \}
1009     \textcolor{keywordflow}{else}
1010     \{
1011         xBytesToStoreMessageLength = 0;
1012     \}
1013 
1014     \textcolor{comment}{/* True if the available space equals zero. */}
1015     \textcolor{keywordflow}{if}( \hyperlink{stream__buffer_8c_a8fb90892c74eb94fb063b2a018a10509}{xStreamBufferSpacesAvailable}( xStreamBuffer ) <= 
      xBytesToStoreMessageLength )
1016     \{
1017         xReturn = \hyperlink{projdefs_8h_af268cf937960eb029256bd9c4d949fbe}{pdTRUE};
1018     \}
1019     \textcolor{keywordflow}{else}
1020     \{
1021         xReturn = \hyperlink{projdefs_8h_aa56260e937e7e203026707e5ba944273}{pdFALSE};
1022     \}
1023 
1024     \textcolor{keywordflow}{return} xReturn;
1025 \}
\end{DoxyCode}
\mbox{\Hypertarget{stream__buffer_8c_afe4f32e931b684bc32189f086e5ec41c}\label{stream__buffer_8c_afe4f32e931b684bc32189f086e5ec41c}} 
\index{stream\+\_\+buffer.\+c@{stream\+\_\+buffer.\+c}!x\+Stream\+Buffer\+Next\+Message\+Length\+Bytes@{x\+Stream\+Buffer\+Next\+Message\+Length\+Bytes}}
\index{x\+Stream\+Buffer\+Next\+Message\+Length\+Bytes@{x\+Stream\+Buffer\+Next\+Message\+Length\+Bytes}!stream\+\_\+buffer.\+c@{stream\+\_\+buffer.\+c}}
\subsubsection{\texorpdfstring{x\+Stream\+Buffer\+Next\+Message\+Length\+Bytes()}{xStreamBufferNextMessageLengthBytes()}}
{\footnotesize\ttfamily size\+\_\+t x\+Stream\+Buffer\+Next\+Message\+Length\+Bytes (\begin{DoxyParamCaption}\item[{\hyperlink{stream__buffer_8h_a8b80974e2278f073412293e6580ce56f}{Stream\+Buffer\+Handle\+\_\+t}}]{x\+Stream\+Buffer }\end{DoxyParamCaption})}



Definition at line 817 of file stream\+\_\+buffer.\+c.


\begin{DoxyCode}
818 \{
819 \hyperlink{structStreamBufferDef__t}{StreamBuffer\_t} * \textcolor{keyword}{const} pxStreamBuffer = xStreamBuffer;
820 \textcolor{keywordtype}{size\_t} xReturn, xBytesAvailable, xOriginalTail;
821 \hyperlink{FreeRTOS_8h_a019c8bfcdd8eca676c7b9993bda95967}{configMESSAGE\_BUFFER\_LENGTH\_TYPE} xTempReturn;
822 
823     \hyperlink{FreeRTOS_8h_a228c70cd48927d6ab730ed1a6dfbe35f}{configASSERT}( pxStreamBuffer );
824 
825     \textcolor{comment}{/* Ensure the stream buffer is being used as a message buffer. */}
826     \textcolor{keywordflow}{if}( ( pxStreamBuffer->\hyperlink{structStreamBufferDef__t_a1afd02d997a1cb3149e3cf203c681d58}{ucFlags} & \hyperlink{stream__buffer_8c_a4954c04e3f9f6b0d4a98b9441b35d896}{sbFLAGS\_IS\_MESSAGE\_BUFFER} ) != ( 
      \hyperlink{stdint_8h_aba7bc1797add20fe3efdf37ced1182c5}{uint8\_t} ) 0 )
827     \{
828         xBytesAvailable = \hyperlink{stream__buffer_8c_ac4183c0af266bc5ffbd4f3eb4a4d07c2}{prvBytesInBuffer}( pxStreamBuffer );
829         \textcolor{keywordflow}{if}( xBytesAvailable > \hyperlink{stream__buffer_8c_aaa21967227eb06d02cdd038047b836f6}{sbBYTES\_TO\_STORE\_MESSAGE\_LENGTH} )
830         \{
831             \textcolor{comment}{/* The number of bytes available is greater than the number of bytes}
832 \textcolor{comment}{            required to hold the length of the next message, so another message}
833 \textcolor{comment}{            is available.  Return its length without removing the length bytes}
834 \textcolor{comment}{            from the buffer.  A copy of the tail is stored so the buffer can be}
835 \textcolor{comment}{            returned to its prior state as the message is not actually being}
836 \textcolor{comment}{            removed from the buffer. */}
837             xOriginalTail = pxStreamBuffer->\hyperlink{structStreamBufferDef__t_a937e441ed6c946a099d52b5955d7302c}{xTail};
838             ( void ) \hyperlink{stream__buffer_8c_a8ec163e54dc25c091dbff11c1b8f7a2c}{prvReadBytesFromBuffer}( pxStreamBuffer, ( 
      \hyperlink{stdint_8h_aba7bc1797add20fe3efdf37ced1182c5}{uint8\_t} * ) &xTempReturn, \hyperlink{stream__buffer_8c_aaa21967227eb06d02cdd038047b836f6}{sbBYTES\_TO\_STORE\_MESSAGE\_LENGTH}, 
      xBytesAvailable );
839             xReturn = ( size\_t ) xTempReturn;
840             pxStreamBuffer->\hyperlink{structStreamBufferDef__t_a937e441ed6c946a099d52b5955d7302c}{xTail} = xOriginalTail;
841         \}
842         \textcolor{keywordflow}{else}
843         \{
844             \textcolor{comment}{/* The minimum amount of bytes in a message buffer is}
845 \textcolor{comment}{            ( sbBYTES\_TO\_STORE\_MESSAGE\_LENGTH + 1 ), so if xBytesAvailable is}
846 \textcolor{comment}{            less than sbBYTES\_TO\_STORE\_MESSAGE\_LENGTH the only other valid}
847 \textcolor{comment}{            value is 0. */}
848             \hyperlink{FreeRTOS_8h_a228c70cd48927d6ab730ed1a6dfbe35f}{configASSERT}( xBytesAvailable == 0 );
849             xReturn = 0;
850         \}
851     \}
852     \textcolor{keywordflow}{else}
853     \{
854         xReturn = 0;
855     \}
856 
857     \textcolor{keywordflow}{return} xReturn;
858 \}
\end{DoxyCode}
\mbox{\Hypertarget{stream__buffer_8c_afcfcf6f4bc80ec5e31e5e1f8093cacac}\label{stream__buffer_8c_afcfcf6f4bc80ec5e31e5e1f8093cacac}} 
\index{stream\+\_\+buffer.\+c@{stream\+\_\+buffer.\+c}!x\+Stream\+Buffer\+Receive@{x\+Stream\+Buffer\+Receive}}
\index{x\+Stream\+Buffer\+Receive@{x\+Stream\+Buffer\+Receive}!stream\+\_\+buffer.\+c@{stream\+\_\+buffer.\+c}}
\subsubsection{\texorpdfstring{x\+Stream\+Buffer\+Receive()}{xStreamBufferReceive()}}
{\footnotesize\ttfamily size\+\_\+t x\+Stream\+Buffer\+Receive (\begin{DoxyParamCaption}\item[{\hyperlink{stream__buffer_8h_a8b80974e2278f073412293e6580ce56f}{Stream\+Buffer\+Handle\+\_\+t}}]{x\+Stream\+Buffer,  }\item[{void $\ast$}]{pv\+Rx\+Data,  }\item[{size\+\_\+t}]{x\+Buffer\+Length\+Bytes,  }\item[{\hyperlink{pic32mx_2portmacro_8h_aa69c48c6e902ce54f70886e6573c92a9}{Tick\+Type\+\_\+t}}]{x\+Ticks\+To\+Wait }\end{DoxyParamCaption})}



Definition at line 713 of file stream\+\_\+buffer.\+c.


\begin{DoxyCode}
717 \{
718 \hyperlink{structStreamBufferDef__t}{StreamBuffer\_t} * \textcolor{keyword}{const} pxStreamBuffer = xStreamBuffer;
719 \textcolor{keywordtype}{size\_t} xReceivedLength = 0, xBytesAvailable, xBytesToStoreMessageLength;
720 
721     \hyperlink{FreeRTOS_8h_a228c70cd48927d6ab730ed1a6dfbe35f}{configASSERT}( pvRxData );
722     \hyperlink{FreeRTOS_8h_a228c70cd48927d6ab730ed1a6dfbe35f}{configASSERT}( pxStreamBuffer );
723 
724     \textcolor{comment}{/* This receive function is used by both message buffers, which store}
725 \textcolor{comment}{    discrete messages, and stream buffers, which store a continuous stream of}
726 \textcolor{comment}{    bytes.  Discrete messages include an additional}
727 \textcolor{comment}{    sbBYTES\_TO\_STORE\_MESSAGE\_LENGTH bytes that hold the length of the}
728 \textcolor{comment}{    message. */}
729     \textcolor{keywordflow}{if}( ( pxStreamBuffer->\hyperlink{structStreamBufferDef__t_a1afd02d997a1cb3149e3cf203c681d58}{ucFlags} & \hyperlink{stream__buffer_8c_a4954c04e3f9f6b0d4a98b9441b35d896}{sbFLAGS\_IS\_MESSAGE\_BUFFER} ) != ( 
      \hyperlink{stdint_8h_aba7bc1797add20fe3efdf37ced1182c5}{uint8\_t} ) 0 )
730     \{
731         xBytesToStoreMessageLength = \hyperlink{stream__buffer_8c_aaa21967227eb06d02cdd038047b836f6}{sbBYTES\_TO\_STORE\_MESSAGE\_LENGTH};
732     \}
733     \textcolor{keywordflow}{else}
734     \{
735         xBytesToStoreMessageLength = 0;
736     \}
737 
738     \textcolor{keywordflow}{if}( xTicksToWait != ( \hyperlink{pic32mx_2portmacro_8h_aa69c48c6e902ce54f70886e6573c92a9}{TickType\_t} ) 0 )
739     \{
740         \textcolor{comment}{/* Checking if there is data and clearing the notification state must be}
741 \textcolor{comment}{        performed atomically. */}
742         \hyperlink{task_8h_ab7bf0ae866292ba8296091a9d5209689}{taskENTER\_CRITICAL}();
743         \{
744             xBytesAvailable = \hyperlink{stream__buffer_8c_ac4183c0af266bc5ffbd4f3eb4a4d07c2}{prvBytesInBuffer}( pxStreamBuffer );
745 
746             \textcolor{comment}{/* If this function was invoked by a message buffer read then}
747 \textcolor{comment}{            xBytesToStoreMessageLength holds the number of bytes used to hold}
748 \textcolor{comment}{            the length of the next discrete message.  If this function was}
749 \textcolor{comment}{            invoked by a stream buffer read then xBytesToStoreMessageLength will}
750 \textcolor{comment}{            be 0. */}
751             \textcolor{keywordflow}{if}( xBytesAvailable <= xBytesToStoreMessageLength )
752             \{
753                 \textcolor{comment}{/* Clear notification state as going to wait for data. */}
754                 ( void ) \hyperlink{task_8h_a4cb6c908a9d2d733e9d519d7dc27bb34}{xTaskNotifyStateClear}( \hyperlink{group__BSPDefine_ga070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL} );
755 
756                 \textcolor{comment}{/* Should only be one reader. */}
757                 \hyperlink{FreeRTOS_8h_a228c70cd48927d6ab730ed1a6dfbe35f}{configASSERT}( pxStreamBuffer->\hyperlink{structStreamBufferDef__t_a8377ae8625121efa22d66e678add4057}{xTaskWaitingToReceive} == 
      \hyperlink{group__BSPDefine_ga070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL} );
758                 pxStreamBuffer->\hyperlink{structStreamBufferDef__t_a8377ae8625121efa22d66e678add4057}{xTaskWaitingToReceive} = 
      \hyperlink{task_8h_a85a0f9c9f817b18686efbf8f37c72dfc}{xTaskGetCurrentTaskHandle}();
759             \}
760             \textcolor{keywordflow}{else}
761             \{
762                 \hyperlink{FreeRTOS_8h_ac77e2af1a6b0d38fbab36cf2aa96f1a8}{mtCOVERAGE\_TEST\_MARKER}();
763             \}
764         \}
765         \hyperlink{task_8h_aac8f36abc45ac4ee714bd6b81e3b1643}{taskEXIT\_CRITICAL}();
766 
767         \textcolor{keywordflow}{if}( xBytesAvailable <= xBytesToStoreMessageLength )
768         \{
769             \textcolor{comment}{/* Wait for data to be available. */}
770             \hyperlink{FreeRTOS_8h_a80419264672cb0ddd2b865048483b537}{traceBLOCKING\_ON\_STREAM\_BUFFER\_RECEIVE}( xStreamBuffer );
771             ( void ) \hyperlink{task_8h_a0475fcda9718f403521c270a7270ff93}{xTaskNotifyWait}( ( \hyperlink{stdint_8h_a435d1572bf3f880d55459d9805097f62}{uint32\_t} ) 0, ( 
      \hyperlink{stdint_8h_a435d1572bf3f880d55459d9805097f62}{uint32\_t} ) 0, \hyperlink{group__BSPDefine_ga070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL}, xTicksToWait );
772             pxStreamBuffer->\hyperlink{structStreamBufferDef__t_a8377ae8625121efa22d66e678add4057}{xTaskWaitingToReceive} = \hyperlink{group__BSPDefine_ga070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL};
773 
774             \textcolor{comment}{/* Recheck the data available after blocking. */}
775             xBytesAvailable = \hyperlink{stream__buffer_8c_ac4183c0af266bc5ffbd4f3eb4a4d07c2}{prvBytesInBuffer}( pxStreamBuffer );
776         \}
777         \textcolor{keywordflow}{else}
778         \{
779             \hyperlink{FreeRTOS_8h_ac77e2af1a6b0d38fbab36cf2aa96f1a8}{mtCOVERAGE\_TEST\_MARKER}();
780         \}
781     \}
782     \textcolor{keywordflow}{else}
783     \{
784         xBytesAvailable = \hyperlink{stream__buffer_8c_ac4183c0af266bc5ffbd4f3eb4a4d07c2}{prvBytesInBuffer}( pxStreamBuffer );
785     \}
786 
787     \textcolor{comment}{/* Whether receiving a discrete message (where xBytesToStoreMessageLength}
788 \textcolor{comment}{    holds the number of bytes used to store the message length) or a stream of}
789 \textcolor{comment}{    bytes (where xBytesToStoreMessageLength is zero), the number of bytes}
790 \textcolor{comment}{    available must be greater than xBytesToStoreMessageLength to be able to}
791 \textcolor{comment}{    read bytes from the buffer. */}
792     \textcolor{keywordflow}{if}( xBytesAvailable > xBytesToStoreMessageLength )
793     \{
794         xReceivedLength = \hyperlink{stream__buffer_8c_aea486f3983538e061b22cce98612d8bc}{prvReadMessageFromBuffer}( pxStreamBuffer, pvRxData, 
      xBufferLengthBytes, xBytesAvailable, xBytesToStoreMessageLength );
795 
796         \textcolor{comment}{/* Was a task waiting for space in the buffer? */}
797         \textcolor{keywordflow}{if}( xReceivedLength != ( \textcolor{keywordtype}{size\_t} ) 0 )
798         \{
799             \hyperlink{FreeRTOS_8h_a6ecefd3df93cb11986cca1b41f215138}{traceSTREAM\_BUFFER\_RECEIVE}( xStreamBuffer, xReceivedLength );
800             \hyperlink{stream__buffer_8c_a4d6a29d283acfa2d4ef576476eedc789}{sbRECEIVE\_COMPLETED}( pxStreamBuffer );
801         \}
802         \textcolor{keywordflow}{else}
803         \{
804             \hyperlink{FreeRTOS_8h_ac77e2af1a6b0d38fbab36cf2aa96f1a8}{mtCOVERAGE\_TEST\_MARKER}();
805         \}
806     \}
807     \textcolor{keywordflow}{else}
808     \{
809         \hyperlink{FreeRTOS_8h_a57e5d8ccc74dd8e04bd3a8534de79bb4}{traceSTREAM\_BUFFER\_RECEIVE\_FAILED}( xStreamBuffer );
810         \hyperlink{FreeRTOS_8h_ac77e2af1a6b0d38fbab36cf2aa96f1a8}{mtCOVERAGE\_TEST\_MARKER}();
811     \}
812 
813     \textcolor{keywordflow}{return} xReceivedLength;
814 \}
\end{DoxyCode}
\mbox{\Hypertarget{stream__buffer_8c_adbcf08da91cb0b9c179d012e0c99237d}\label{stream__buffer_8c_adbcf08da91cb0b9c179d012e0c99237d}} 
\index{stream\+\_\+buffer.\+c@{stream\+\_\+buffer.\+c}!x\+Stream\+Buffer\+Receive\+Completed\+From\+I\+SR@{x\+Stream\+Buffer\+Receive\+Completed\+From\+I\+SR}}
\index{x\+Stream\+Buffer\+Receive\+Completed\+From\+I\+SR@{x\+Stream\+Buffer\+Receive\+Completed\+From\+I\+SR}!stream\+\_\+buffer.\+c@{stream\+\_\+buffer.\+c}}
\subsubsection{\texorpdfstring{x\+Stream\+Buffer\+Receive\+Completed\+From\+I\+S\+R()}{xStreamBufferReceiveCompletedFromISR()}}
{\footnotesize\ttfamily \hyperlink{pic32mx_2portmacro_8h_a46fb21e00ae0729d7515c0fbf2269796}{Base\+Type\+\_\+t} x\+Stream\+Buffer\+Receive\+Completed\+From\+I\+SR (\begin{DoxyParamCaption}\item[{\hyperlink{stream__buffer_8h_a8b80974e2278f073412293e6580ce56f}{Stream\+Buffer\+Handle\+\_\+t}}]{x\+Stream\+Buffer,  }\item[{\hyperlink{pic32mx_2portmacro_8h_a46fb21e00ae0729d7515c0fbf2269796}{Base\+Type\+\_\+t} $\ast$}]{px\+Higher\+Priority\+Task\+Woken }\end{DoxyParamCaption})}



Definition at line 1058 of file stream\+\_\+buffer.\+c.


\begin{DoxyCode}
1059 \{
1060 \hyperlink{structStreamBufferDef__t}{StreamBuffer\_t} * \textcolor{keyword}{const} pxStreamBuffer = xStreamBuffer;
1061 \hyperlink{pic32mx_2portmacro_8h_a46fb21e00ae0729d7515c0fbf2269796}{BaseType\_t} xReturn;
1062 \hyperlink{pic32mx_2portmacro_8h_a646f89d4298e4f5afd522202b11cb2e6}{UBaseType\_t} uxSavedInterruptStatus;
1063 
1064     \hyperlink{FreeRTOS_8h_a228c70cd48927d6ab730ed1a6dfbe35f}{configASSERT}( pxStreamBuffer );
1065 
1066     uxSavedInterruptStatus = ( \hyperlink{pic32mx_2portmacro_8h_a646f89d4298e4f5afd522202b11cb2e6}{UBaseType\_t} ) 
      \hyperlink{FreeRTOS_8h_a31b4260dbc1823ba80b578f86eb15a98}{portSET\_INTERRUPT\_MASK\_FROM\_ISR}();
1067     \{
1068         \textcolor{keywordflow}{if}( ( pxStreamBuffer )->xTaskWaitingToSend != \hyperlink{group__BSPDefine_ga070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL} )
1069         \{
1070             ( void ) \hyperlink{task_8h_a1ed9129068b96a909356bd0369c5ecb0}{xTaskNotifyFromISR}( ( pxStreamBuffer )->xTaskWaitingToSend,
1071                                          ( \hyperlink{stdint_8h_a435d1572bf3f880d55459d9805097f62}{uint32\_t} ) 0,
1072                                          \hyperlink{task_8h_ae8abc4f7da5b6880467daafbf19cd233abac2b17ab15444724b6f35d47cd0a64a}{eNoAction},
1073                                          pxHigherPriorityTaskWoken );
1074             ( pxStreamBuffer )->xTaskWaitingToSend = \hyperlink{group__BSPDefine_ga070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL};
1075             xReturn = \hyperlink{projdefs_8h_af268cf937960eb029256bd9c4d949fbe}{pdTRUE};
1076         \}
1077         \textcolor{keywordflow}{else}
1078         \{
1079             xReturn = \hyperlink{projdefs_8h_aa56260e937e7e203026707e5ba944273}{pdFALSE};
1080         \}
1081     \}
1082     \hyperlink{FreeRTOS_8h_a2661e2c5a4e4afe5bef2ebe9872e28b3}{portCLEAR\_INTERRUPT\_MASK\_FROM\_ISR}( uxSavedInterruptStatus );
1083 
1084     \textcolor{keywordflow}{return} xReturn;
1085 \}
\end{DoxyCode}
\mbox{\Hypertarget{stream__buffer_8c_a06c67a59495190f8359322184fe0462b}\label{stream__buffer_8c_a06c67a59495190f8359322184fe0462b}} 
\index{stream\+\_\+buffer.\+c@{stream\+\_\+buffer.\+c}!x\+Stream\+Buffer\+Receive\+From\+I\+SR@{x\+Stream\+Buffer\+Receive\+From\+I\+SR}}
\index{x\+Stream\+Buffer\+Receive\+From\+I\+SR@{x\+Stream\+Buffer\+Receive\+From\+I\+SR}!stream\+\_\+buffer.\+c@{stream\+\_\+buffer.\+c}}
\subsubsection{\texorpdfstring{x\+Stream\+Buffer\+Receive\+From\+I\+S\+R()}{xStreamBufferReceiveFromISR()}}
{\footnotesize\ttfamily size\+\_\+t x\+Stream\+Buffer\+Receive\+From\+I\+SR (\begin{DoxyParamCaption}\item[{\hyperlink{stream__buffer_8h_a8b80974e2278f073412293e6580ce56f}{Stream\+Buffer\+Handle\+\_\+t}}]{x\+Stream\+Buffer,  }\item[{void $\ast$}]{pv\+Rx\+Data,  }\item[{size\+\_\+t}]{x\+Buffer\+Length\+Bytes,  }\item[{\hyperlink{pic32mx_2portmacro_8h_a46fb21e00ae0729d7515c0fbf2269796}{Base\+Type\+\_\+t} $\ast$const}]{px\+Higher\+Priority\+Task\+Woken }\end{DoxyParamCaption})}



Definition at line 861 of file stream\+\_\+buffer.\+c.


\begin{DoxyCode}
865 \{
866 \hyperlink{structStreamBufferDef__t}{StreamBuffer\_t} * \textcolor{keyword}{const} pxStreamBuffer = xStreamBuffer;
867 \textcolor{keywordtype}{size\_t} xReceivedLength = 0, xBytesAvailable, xBytesToStoreMessageLength;
868 
869     \hyperlink{FreeRTOS_8h_a228c70cd48927d6ab730ed1a6dfbe35f}{configASSERT}( pvRxData );
870     \hyperlink{FreeRTOS_8h_a228c70cd48927d6ab730ed1a6dfbe35f}{configASSERT}( pxStreamBuffer );
871 
872     \textcolor{comment}{/* This receive function is used by both message buffers, which store}
873 \textcolor{comment}{    discrete messages, and stream buffers, which store a continuous stream of}
874 \textcolor{comment}{    bytes.  Discrete messages include an additional}
875 \textcolor{comment}{    sbBYTES\_TO\_STORE\_MESSAGE\_LENGTH bytes that hold the length of the}
876 \textcolor{comment}{    message. */}
877     \textcolor{keywordflow}{if}( ( pxStreamBuffer->\hyperlink{structStreamBufferDef__t_a1afd02d997a1cb3149e3cf203c681d58}{ucFlags} & \hyperlink{stream__buffer_8c_a4954c04e3f9f6b0d4a98b9441b35d896}{sbFLAGS\_IS\_MESSAGE\_BUFFER} ) != ( 
      \hyperlink{stdint_8h_aba7bc1797add20fe3efdf37ced1182c5}{uint8\_t} ) 0 )
878     \{
879         xBytesToStoreMessageLength = \hyperlink{stream__buffer_8c_aaa21967227eb06d02cdd038047b836f6}{sbBYTES\_TO\_STORE\_MESSAGE\_LENGTH};
880     \}
881     \textcolor{keywordflow}{else}
882     \{
883         xBytesToStoreMessageLength = 0;
884     \}
885 
886     xBytesAvailable = \hyperlink{stream__buffer_8c_ac4183c0af266bc5ffbd4f3eb4a4d07c2}{prvBytesInBuffer}( pxStreamBuffer );
887 
888     \textcolor{comment}{/* Whether receiving a discrete message (where xBytesToStoreMessageLength}
889 \textcolor{comment}{    holds the number of bytes used to store the message length) or a stream of}
890 \textcolor{comment}{    bytes (where xBytesToStoreMessageLength is zero), the number of bytes}
891 \textcolor{comment}{    available must be greater than xBytesToStoreMessageLength to be able to}
892 \textcolor{comment}{    read bytes from the buffer. */}
893     \textcolor{keywordflow}{if}( xBytesAvailable > xBytesToStoreMessageLength )
894     \{
895         xReceivedLength = \hyperlink{stream__buffer_8c_aea486f3983538e061b22cce98612d8bc}{prvReadMessageFromBuffer}( pxStreamBuffer, pvRxData, 
      xBufferLengthBytes, xBytesAvailable, xBytesToStoreMessageLength );
896 
897         \textcolor{comment}{/* Was a task waiting for space in the buffer? */}
898         \textcolor{keywordflow}{if}( xReceivedLength != ( \textcolor{keywordtype}{size\_t} ) 0 )
899         \{
900             \hyperlink{stream__buffer_8c_ab72c363566113705c021596f90c6eb5a}{sbRECEIVE\_COMPLETED\_FROM\_ISR}( pxStreamBuffer, 
      pxHigherPriorityTaskWoken );
901         \}
902         \textcolor{keywordflow}{else}
903         \{
904             \hyperlink{FreeRTOS_8h_ac77e2af1a6b0d38fbab36cf2aa96f1a8}{mtCOVERAGE\_TEST\_MARKER}();
905         \}
906     \}
907     \textcolor{keywordflow}{else}
908     \{
909         \hyperlink{FreeRTOS_8h_ac77e2af1a6b0d38fbab36cf2aa96f1a8}{mtCOVERAGE\_TEST\_MARKER}();
910     \}
911 
912     \hyperlink{FreeRTOS_8h_a30fe3a49605cf2c232d190e4f6565a0d}{traceSTREAM\_BUFFER\_RECEIVE\_FROM\_ISR}( xStreamBuffer, xReceivedLength 
      );
913 
914     \textcolor{keywordflow}{return} xReceivedLength;
915 \}
\end{DoxyCode}
\mbox{\Hypertarget{stream__buffer_8c_a05ed4d42963aa4aaf50e49700d44659c}\label{stream__buffer_8c_a05ed4d42963aa4aaf50e49700d44659c}} 
\index{stream\+\_\+buffer.\+c@{stream\+\_\+buffer.\+c}!x\+Stream\+Buffer\+Reset@{x\+Stream\+Buffer\+Reset}}
\index{x\+Stream\+Buffer\+Reset@{x\+Stream\+Buffer\+Reset}!stream\+\_\+buffer.\+c@{stream\+\_\+buffer.\+c}}
\subsubsection{\texorpdfstring{x\+Stream\+Buffer\+Reset()}{xStreamBufferReset()}}
{\footnotesize\ttfamily \hyperlink{pic32mx_2portmacro_8h_a46fb21e00ae0729d7515c0fbf2269796}{Base\+Type\+\_\+t} x\+Stream\+Buffer\+Reset (\begin{DoxyParamCaption}\item[{\hyperlink{stream__buffer_8h_a8b80974e2278f073412293e6580ce56f}{Stream\+Buffer\+Handle\+\_\+t}}]{x\+Stream\+Buffer }\end{DoxyParamCaption})}



Definition at line 392 of file stream\+\_\+buffer.\+c.


\begin{DoxyCode}
393 \{
394 \hyperlink{structStreamBufferDef__t}{StreamBuffer\_t} * \textcolor{keyword}{const} pxStreamBuffer = xStreamBuffer;
395 \hyperlink{pic32mx_2portmacro_8h_a46fb21e00ae0729d7515c0fbf2269796}{BaseType\_t} xReturn = \hyperlink{projdefs_8h_a99e2866c8cf4fe86db87dab62e7d6aa6}{pdFAIL};
396 
397 \textcolor{preprocessor}{#if( configUSE\_TRACE\_FACILITY == 1 )}
398     \hyperlink{pic32mx_2portmacro_8h_a646f89d4298e4f5afd522202b11cb2e6}{UBaseType\_t} uxStreamBufferNumber;
399 \textcolor{preprocessor}{#endif}
400 
401     \hyperlink{FreeRTOS_8h_a228c70cd48927d6ab730ed1a6dfbe35f}{configASSERT}( pxStreamBuffer );
402 
403 \textcolor{preprocessor}{    #if( configUSE\_TRACE\_FACILITY == 1 )}
404     \{
405         \textcolor{comment}{/* Store the stream buffer number so it can be restored after the}
406 \textcolor{comment}{        reset. */}
407         uxStreamBufferNumber = pxStreamBuffer->uxStreamBufferNumber;
408     \}
409 \textcolor{preprocessor}{    #endif}
410 
411     \textcolor{comment}{/* Can only reset a message buffer if there are no tasks blocked on it. */}
412     \hyperlink{task_8h_ab7bf0ae866292ba8296091a9d5209689}{taskENTER\_CRITICAL}();
413     \{
414         \textcolor{keywordflow}{if}( pxStreamBuffer->\hyperlink{structStreamBufferDef__t_a8377ae8625121efa22d66e678add4057}{xTaskWaitingToReceive} == \hyperlink{group__BSPDefine_ga070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL} )
415         \{
416             \textcolor{keywordflow}{if}( pxStreamBuffer->\hyperlink{structStreamBufferDef__t_a85b1cf05c0222f8d67a64f7d01722e52}{xTaskWaitingToSend} == \hyperlink{group__BSPDefine_ga070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL} )
417             \{
418                 \hyperlink{stream__buffer_8c_a7f655ff13acb1a5614dbc7e7f43ecbb2}{prvInitialiseNewStreamBuffer}( pxStreamBuffer,
419                                               pxStreamBuffer->\hyperlink{structStreamBufferDef__t_a4e05054a8a3d61a5cec0c18a70bbdb67}{pucBuffer},
420                                               pxStreamBuffer->\hyperlink{structStreamBufferDef__t_a6eedf41c877edd42b3b460780d1b6555}{xLength},
421                                               pxStreamBuffer->\hyperlink{structStreamBufferDef__t_a4a7ee9b374cc0b358d049811def8d595}{xTriggerLevelBytes},
422                                               pxStreamBuffer->\hyperlink{structStreamBufferDef__t_a1afd02d997a1cb3149e3cf203c681d58}{ucFlags} );
423                 xReturn = \hyperlink{projdefs_8h_a07848d3078849bd32353c69d30a479b3}{pdPASS};
424 
425 \textcolor{preprocessor}{                #if( configUSE\_TRACE\_FACILITY == 1 )}
426                 \{
427                     pxStreamBuffer->uxStreamBufferNumber = uxStreamBufferNumber;
428                 \}
429 \textcolor{preprocessor}{                #endif}
430 
431                 \hyperlink{FreeRTOS_8h_a2ef92acbaa66efdb85be7f8256fe91ba}{traceSTREAM\_BUFFER\_RESET}( xStreamBuffer );
432             \}
433         \}
434     \}
435     \hyperlink{task_8h_aac8f36abc45ac4ee714bd6b81e3b1643}{taskEXIT\_CRITICAL}();
436 
437     \textcolor{keywordflow}{return} xReturn;
438 \}
\end{DoxyCode}
\mbox{\Hypertarget{stream__buffer_8c_adf807ecf262fcd5df2584d5d3e6ed6c5}\label{stream__buffer_8c_adf807ecf262fcd5df2584d5d3e6ed6c5}} 
\index{stream\+\_\+buffer.\+c@{stream\+\_\+buffer.\+c}!x\+Stream\+Buffer\+Send@{x\+Stream\+Buffer\+Send}}
\index{x\+Stream\+Buffer\+Send@{x\+Stream\+Buffer\+Send}!stream\+\_\+buffer.\+c@{stream\+\_\+buffer.\+c}}
\subsubsection{\texorpdfstring{x\+Stream\+Buffer\+Send()}{xStreamBufferSend()}}
{\footnotesize\ttfamily size\+\_\+t x\+Stream\+Buffer\+Send (\begin{DoxyParamCaption}\item[{\hyperlink{stream__buffer_8h_a8b80974e2278f073412293e6580ce56f}{Stream\+Buffer\+Handle\+\_\+t}}]{x\+Stream\+Buffer,  }\item[{const void $\ast$}]{pv\+Tx\+Data,  }\item[{size\+\_\+t}]{x\+Data\+Length\+Bytes,  }\item[{\hyperlink{pic32mx_2portmacro_8h_aa69c48c6e902ce54f70886e6573c92a9}{Tick\+Type\+\_\+t}}]{x\+Ticks\+To\+Wait }\end{DoxyParamCaption})}



Definition at line 506 of file stream\+\_\+buffer.\+c.


\begin{DoxyCode}
510 \{
511 \hyperlink{structStreamBufferDef__t}{StreamBuffer\_t} * \textcolor{keyword}{const} pxStreamBuffer = xStreamBuffer;
512 \textcolor{keywordtype}{size\_t} xReturn, xSpace = 0;
513 \textcolor{keywordtype}{size\_t} xRequiredSpace = xDataLengthBytes;
514 \hyperlink{structxTIME__OUT}{TimeOut\_t} xTimeOut;
515 
516     \hyperlink{FreeRTOS_8h_a228c70cd48927d6ab730ed1a6dfbe35f}{configASSERT}( pvTxData );
517     \hyperlink{FreeRTOS_8h_a228c70cd48927d6ab730ed1a6dfbe35f}{configASSERT}( pxStreamBuffer );
518 
519     \textcolor{comment}{/* This send function is used to write to both message buffers and stream}
520 \textcolor{comment}{    buffers.  If this is a message buffer then the space needed must be}
521 \textcolor{comment}{    increased by the amount of bytes needed to store the length of the}
522 \textcolor{comment}{    message. */}
523     \textcolor{keywordflow}{if}( ( pxStreamBuffer->\hyperlink{structStreamBufferDef__t_a1afd02d997a1cb3149e3cf203c681d58}{ucFlags} & \hyperlink{stream__buffer_8c_a4954c04e3f9f6b0d4a98b9441b35d896}{sbFLAGS\_IS\_MESSAGE\_BUFFER} ) != ( 
      \hyperlink{stdint_8h_aba7bc1797add20fe3efdf37ced1182c5}{uint8\_t} ) 0 )
524     \{
525         xRequiredSpace += \hyperlink{stream__buffer_8c_aaa21967227eb06d02cdd038047b836f6}{sbBYTES\_TO\_STORE\_MESSAGE\_LENGTH};
526 
527         \textcolor{comment}{/* Overflow? */}
528         \hyperlink{FreeRTOS_8h_a228c70cd48927d6ab730ed1a6dfbe35f}{configASSERT}( xRequiredSpace > xDataLengthBytes );
529     \}
530     \textcolor{keywordflow}{else}
531     \{
532         \hyperlink{FreeRTOS_8h_ac77e2af1a6b0d38fbab36cf2aa96f1a8}{mtCOVERAGE\_TEST\_MARKER}();
533     \}
534 
535     \textcolor{keywordflow}{if}( xTicksToWait != ( \hyperlink{pic32mx_2portmacro_8h_aa69c48c6e902ce54f70886e6573c92a9}{TickType\_t} ) 0 )
536     \{
537         \hyperlink{task_8h_a67155ad4ea2482b5f4597a69f2152be0}{vTaskSetTimeOutState}( &xTimeOut );
538 
539         \textcolor{keywordflow}{do}
540         \{
541             \textcolor{comment}{/* Wait until the required number of bytes are free in the message}
542 \textcolor{comment}{            buffer. */}
543             \hyperlink{task_8h_ab7bf0ae866292ba8296091a9d5209689}{taskENTER\_CRITICAL}();
544             \{
545                 xSpace = \hyperlink{stream__buffer_8c_a8fb90892c74eb94fb063b2a018a10509}{xStreamBufferSpacesAvailable}( pxStreamBuffer );
546 
547                 \textcolor{keywordflow}{if}( xSpace < xRequiredSpace )
548                 \{
549                     \textcolor{comment}{/* Clear notification state as going to wait for space. */}
550                     ( void ) \hyperlink{task_8h_a4cb6c908a9d2d733e9d519d7dc27bb34}{xTaskNotifyStateClear}( \hyperlink{group__BSPDefine_ga070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL} );
551 
552                     \textcolor{comment}{/* Should only be one writer. */}
553                     \hyperlink{FreeRTOS_8h_a228c70cd48927d6ab730ed1a6dfbe35f}{configASSERT}( pxStreamBuffer->\hyperlink{structStreamBufferDef__t_a85b1cf05c0222f8d67a64f7d01722e52}{xTaskWaitingToSend} == 
      \hyperlink{group__BSPDefine_ga070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL} );
554                     pxStreamBuffer->\hyperlink{structStreamBufferDef__t_a85b1cf05c0222f8d67a64f7d01722e52}{xTaskWaitingToSend} = 
      \hyperlink{task_8h_a85a0f9c9f817b18686efbf8f37c72dfc}{xTaskGetCurrentTaskHandle}();
555                 \}
556                 \textcolor{keywordflow}{else}
557                 \{
558                     \hyperlink{task_8h_aac8f36abc45ac4ee714bd6b81e3b1643}{taskEXIT\_CRITICAL}();
559                     \textcolor{keywordflow}{break};
560                 \}
561             \}
562             \hyperlink{task_8h_aac8f36abc45ac4ee714bd6b81e3b1643}{taskEXIT\_CRITICAL}();
563 
564             \hyperlink{FreeRTOS_8h_a5788bf0db92eda90675aa5f3caa42eeb}{traceBLOCKING\_ON\_STREAM\_BUFFER\_SEND}( xStreamBuffer );
565             ( void ) \hyperlink{task_8h_a0475fcda9718f403521c270a7270ff93}{xTaskNotifyWait}( ( \hyperlink{stdint_8h_a435d1572bf3f880d55459d9805097f62}{uint32\_t} ) 0, ( 
      \hyperlink{stdint_8h_a435d1572bf3f880d55459d9805097f62}{uint32\_t} ) 0, \hyperlink{group__BSPDefine_ga070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL}, xTicksToWait );
566             pxStreamBuffer->\hyperlink{structStreamBufferDef__t_a85b1cf05c0222f8d67a64f7d01722e52}{xTaskWaitingToSend} = \hyperlink{group__BSPDefine_ga070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL};
567 
568         \} \textcolor{keywordflow}{while}( \hyperlink{task_8h_a3b018a85d339e536a6c05748dd666a3a}{xTaskCheckForTimeOut}( &xTimeOut, &xTicksToWait ) == 
      \hyperlink{projdefs_8h_aa56260e937e7e203026707e5ba944273}{pdFALSE} );
569     \}
570     \textcolor{keywordflow}{else}
571     \{
572         \hyperlink{FreeRTOS_8h_ac77e2af1a6b0d38fbab36cf2aa96f1a8}{mtCOVERAGE\_TEST\_MARKER}();
573     \}
574 
575     \textcolor{keywordflow}{if}( xSpace == ( \textcolor{keywordtype}{size\_t} ) 0 )
576     \{
577         xSpace = \hyperlink{stream__buffer_8c_a8fb90892c74eb94fb063b2a018a10509}{xStreamBufferSpacesAvailable}( pxStreamBuffer );
578     \}
579     \textcolor{keywordflow}{else}
580     \{
581         \hyperlink{FreeRTOS_8h_ac77e2af1a6b0d38fbab36cf2aa96f1a8}{mtCOVERAGE\_TEST\_MARKER}();
582     \}
583 
584     xReturn = \hyperlink{stream__buffer_8c_a1415b7e265e106aab476023f9a6cce6c}{prvWriteMessageToBuffer}( pxStreamBuffer, pvTxData, xDataLengthBytes, 
      xSpace, xRequiredSpace );
585 
586     \textcolor{keywordflow}{if}( xReturn > ( \textcolor{keywordtype}{size\_t} ) 0 )
587     \{
588         \hyperlink{FreeRTOS_8h_a4f4fc6954ae7c5b8a4819f70afd37c1f}{traceSTREAM\_BUFFER\_SEND}( xStreamBuffer, xReturn );
589 
590         \textcolor{comment}{/* Was a task waiting for the data? */}
591         \textcolor{keywordflow}{if}( \hyperlink{stream__buffer_8c_ac4183c0af266bc5ffbd4f3eb4a4d07c2}{prvBytesInBuffer}( pxStreamBuffer ) >= pxStreamBuffer->
      \hyperlink{structStreamBufferDef__t_a4a7ee9b374cc0b358d049811def8d595}{xTriggerLevelBytes} )
592         \{
593             \hyperlink{stream__buffer_8c_aa75273dfbcd92710254df0165ae1da5d}{sbSEND\_COMPLETED}( pxStreamBuffer );
594         \}
595         \textcolor{keywordflow}{else}
596         \{
597             \hyperlink{FreeRTOS_8h_ac77e2af1a6b0d38fbab36cf2aa96f1a8}{mtCOVERAGE\_TEST\_MARKER}();
598         \}
599     \}
600     \textcolor{keywordflow}{else}
601     \{
602         \hyperlink{FreeRTOS_8h_ac77e2af1a6b0d38fbab36cf2aa96f1a8}{mtCOVERAGE\_TEST\_MARKER}();
603         \hyperlink{FreeRTOS_8h_a527e8f19c9b9b339985c2b8e47bff02a}{traceSTREAM\_BUFFER\_SEND\_FAILED}( xStreamBuffer );
604     \}
605 
606     \textcolor{keywordflow}{return} xReturn;
607 \}
\end{DoxyCode}
\mbox{\Hypertarget{stream__buffer_8c_a734bf1bcef16810abb6d53781b8f1f07}\label{stream__buffer_8c_a734bf1bcef16810abb6d53781b8f1f07}} 
\index{stream\+\_\+buffer.\+c@{stream\+\_\+buffer.\+c}!x\+Stream\+Buffer\+Send\+Completed\+From\+I\+SR@{x\+Stream\+Buffer\+Send\+Completed\+From\+I\+SR}}
\index{x\+Stream\+Buffer\+Send\+Completed\+From\+I\+SR@{x\+Stream\+Buffer\+Send\+Completed\+From\+I\+SR}!stream\+\_\+buffer.\+c@{stream\+\_\+buffer.\+c}}
\subsubsection{\texorpdfstring{x\+Stream\+Buffer\+Send\+Completed\+From\+I\+S\+R()}{xStreamBufferSendCompletedFromISR()}}
{\footnotesize\ttfamily \hyperlink{pic32mx_2portmacro_8h_a46fb21e00ae0729d7515c0fbf2269796}{Base\+Type\+\_\+t} x\+Stream\+Buffer\+Send\+Completed\+From\+I\+SR (\begin{DoxyParamCaption}\item[{\hyperlink{stream__buffer_8h_a8b80974e2278f073412293e6580ce56f}{Stream\+Buffer\+Handle\+\_\+t}}]{x\+Stream\+Buffer,  }\item[{\hyperlink{pic32mx_2portmacro_8h_a46fb21e00ae0729d7515c0fbf2269796}{Base\+Type\+\_\+t} $\ast$}]{px\+Higher\+Priority\+Task\+Woken }\end{DoxyParamCaption})}



Definition at line 1028 of file stream\+\_\+buffer.\+c.


\begin{DoxyCode}
1029 \{
1030 \hyperlink{structStreamBufferDef__t}{StreamBuffer\_t} * \textcolor{keyword}{const} pxStreamBuffer = xStreamBuffer;
1031 \hyperlink{pic32mx_2portmacro_8h_a46fb21e00ae0729d7515c0fbf2269796}{BaseType\_t} xReturn;
1032 \hyperlink{pic32mx_2portmacro_8h_a646f89d4298e4f5afd522202b11cb2e6}{UBaseType\_t} uxSavedInterruptStatus;
1033 
1034     \hyperlink{FreeRTOS_8h_a228c70cd48927d6ab730ed1a6dfbe35f}{configASSERT}( pxStreamBuffer );
1035 
1036     uxSavedInterruptStatus = ( \hyperlink{pic32mx_2portmacro_8h_a646f89d4298e4f5afd522202b11cb2e6}{UBaseType\_t} ) 
      \hyperlink{FreeRTOS_8h_a31b4260dbc1823ba80b578f86eb15a98}{portSET\_INTERRUPT\_MASK\_FROM\_ISR}();
1037     \{
1038         \textcolor{keywordflow}{if}( ( pxStreamBuffer )->xTaskWaitingToReceive != \hyperlink{group__BSPDefine_ga070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL} )
1039         \{
1040             ( void ) \hyperlink{task_8h_a1ed9129068b96a909356bd0369c5ecb0}{xTaskNotifyFromISR}( ( pxStreamBuffer )->xTaskWaitingToReceive,
1041                                          ( \hyperlink{stdint_8h_a435d1572bf3f880d55459d9805097f62}{uint32\_t} ) 0,
1042                                          \hyperlink{task_8h_ae8abc4f7da5b6880467daafbf19cd233abac2b17ab15444724b6f35d47cd0a64a}{eNoAction},
1043                                          pxHigherPriorityTaskWoken );
1044             ( pxStreamBuffer )->xTaskWaitingToReceive = \hyperlink{group__BSPDefine_ga070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL};
1045             xReturn = \hyperlink{projdefs_8h_af268cf937960eb029256bd9c4d949fbe}{pdTRUE};
1046         \}
1047         \textcolor{keywordflow}{else}
1048         \{
1049             xReturn = \hyperlink{projdefs_8h_aa56260e937e7e203026707e5ba944273}{pdFALSE};
1050         \}
1051     \}
1052     \hyperlink{FreeRTOS_8h_a2661e2c5a4e4afe5bef2ebe9872e28b3}{portCLEAR\_INTERRUPT\_MASK\_FROM\_ISR}( uxSavedInterruptStatus );
1053 
1054     \textcolor{keywordflow}{return} xReturn;
1055 \}
\end{DoxyCode}
\mbox{\Hypertarget{stream__buffer_8c_a3072d8c5cedf79a72550da051a0866b4}\label{stream__buffer_8c_a3072d8c5cedf79a72550da051a0866b4}} 
\index{stream\+\_\+buffer.\+c@{stream\+\_\+buffer.\+c}!x\+Stream\+Buffer\+Send\+From\+I\+SR@{x\+Stream\+Buffer\+Send\+From\+I\+SR}}
\index{x\+Stream\+Buffer\+Send\+From\+I\+SR@{x\+Stream\+Buffer\+Send\+From\+I\+SR}!stream\+\_\+buffer.\+c@{stream\+\_\+buffer.\+c}}
\subsubsection{\texorpdfstring{x\+Stream\+Buffer\+Send\+From\+I\+S\+R()}{xStreamBufferSendFromISR()}}
{\footnotesize\ttfamily size\+\_\+t x\+Stream\+Buffer\+Send\+From\+I\+SR (\begin{DoxyParamCaption}\item[{\hyperlink{stream__buffer_8h_a8b80974e2278f073412293e6580ce56f}{Stream\+Buffer\+Handle\+\_\+t}}]{x\+Stream\+Buffer,  }\item[{const void $\ast$}]{pv\+Tx\+Data,  }\item[{size\+\_\+t}]{x\+Data\+Length\+Bytes,  }\item[{\hyperlink{pic32mx_2portmacro_8h_a46fb21e00ae0729d7515c0fbf2269796}{Base\+Type\+\_\+t} $\ast$const}]{px\+Higher\+Priority\+Task\+Woken }\end{DoxyParamCaption})}



Definition at line 610 of file stream\+\_\+buffer.\+c.


\begin{DoxyCode}
614 \{
615 \hyperlink{structStreamBufferDef__t}{StreamBuffer\_t} * \textcolor{keyword}{const} pxStreamBuffer = xStreamBuffer;
616 \textcolor{keywordtype}{size\_t} xReturn, xSpace;
617 \textcolor{keywordtype}{size\_t} xRequiredSpace = xDataLengthBytes;
618 
619     \hyperlink{FreeRTOS_8h_a228c70cd48927d6ab730ed1a6dfbe35f}{configASSERT}( pvTxData );
620     \hyperlink{FreeRTOS_8h_a228c70cd48927d6ab730ed1a6dfbe35f}{configASSERT}( pxStreamBuffer );
621 
622     \textcolor{comment}{/* This send function is used to write to both message buffers and stream}
623 \textcolor{comment}{    buffers.  If this is a message buffer then the space needed must be}
624 \textcolor{comment}{    increased by the amount of bytes needed to store the length of the}
625 \textcolor{comment}{    message. */}
626     \textcolor{keywordflow}{if}( ( pxStreamBuffer->\hyperlink{structStreamBufferDef__t_a1afd02d997a1cb3149e3cf203c681d58}{ucFlags} & \hyperlink{stream__buffer_8c_a4954c04e3f9f6b0d4a98b9441b35d896}{sbFLAGS\_IS\_MESSAGE\_BUFFER} ) != ( 
      \hyperlink{stdint_8h_aba7bc1797add20fe3efdf37ced1182c5}{uint8\_t} ) 0 )
627     \{
628         xRequiredSpace += \hyperlink{stream__buffer_8c_aaa21967227eb06d02cdd038047b836f6}{sbBYTES\_TO\_STORE\_MESSAGE\_LENGTH};
629     \}
630     \textcolor{keywordflow}{else}
631     \{
632         \hyperlink{FreeRTOS_8h_ac77e2af1a6b0d38fbab36cf2aa96f1a8}{mtCOVERAGE\_TEST\_MARKER}();
633     \}
634 
635     xSpace = \hyperlink{stream__buffer_8c_a8fb90892c74eb94fb063b2a018a10509}{xStreamBufferSpacesAvailable}( pxStreamBuffer );
636     xReturn = \hyperlink{stream__buffer_8c_a1415b7e265e106aab476023f9a6cce6c}{prvWriteMessageToBuffer}( pxStreamBuffer, pvTxData, xDataLengthBytes, 
      xSpace, xRequiredSpace );
637 
638     \textcolor{keywordflow}{if}( xReturn > ( \textcolor{keywordtype}{size\_t} ) 0 )
639     \{
640         \textcolor{comment}{/* Was a task waiting for the data? */}
641         \textcolor{keywordflow}{if}( \hyperlink{stream__buffer_8c_ac4183c0af266bc5ffbd4f3eb4a4d07c2}{prvBytesInBuffer}( pxStreamBuffer ) >= pxStreamBuffer->
      \hyperlink{structStreamBufferDef__t_a4a7ee9b374cc0b358d049811def8d595}{xTriggerLevelBytes} )
642         \{
643             \hyperlink{stream__buffer_8c_aadd3cf567c5086402552c463c55dda7c}{sbSEND\_COMPLETE\_FROM\_ISR}( pxStreamBuffer, pxHigherPriorityTaskWoken );
644         \}
645         \textcolor{keywordflow}{else}
646         \{
647             \hyperlink{FreeRTOS_8h_ac77e2af1a6b0d38fbab36cf2aa96f1a8}{mtCOVERAGE\_TEST\_MARKER}();
648         \}
649     \}
650     \textcolor{keywordflow}{else}
651     \{
652         \hyperlink{FreeRTOS_8h_ac77e2af1a6b0d38fbab36cf2aa96f1a8}{mtCOVERAGE\_TEST\_MARKER}();
653     \}
654 
655     \hyperlink{FreeRTOS_8h_ab79a8d87f1c865b1a76af02932b3dda6}{traceSTREAM\_BUFFER\_SEND\_FROM\_ISR}( xStreamBuffer, xReturn );
656 
657     \textcolor{keywordflow}{return} xReturn;
658 \}
\end{DoxyCode}
\mbox{\Hypertarget{stream__buffer_8c_a375b92e87b73351a6a30c8a2ba7d2ce0}\label{stream__buffer_8c_a375b92e87b73351a6a30c8a2ba7d2ce0}} 
\index{stream\+\_\+buffer.\+c@{stream\+\_\+buffer.\+c}!x\+Stream\+Buffer\+Set\+Trigger\+Level@{x\+Stream\+Buffer\+Set\+Trigger\+Level}}
\index{x\+Stream\+Buffer\+Set\+Trigger\+Level@{x\+Stream\+Buffer\+Set\+Trigger\+Level}!stream\+\_\+buffer.\+c@{stream\+\_\+buffer.\+c}}
\subsubsection{\texorpdfstring{x\+Stream\+Buffer\+Set\+Trigger\+Level()}{xStreamBufferSetTriggerLevel()}}
{\footnotesize\ttfamily \hyperlink{pic32mx_2portmacro_8h_a46fb21e00ae0729d7515c0fbf2269796}{Base\+Type\+\_\+t} x\+Stream\+Buffer\+Set\+Trigger\+Level (\begin{DoxyParamCaption}\item[{\hyperlink{stream__buffer_8h_a8b80974e2278f073412293e6580ce56f}{Stream\+Buffer\+Handle\+\_\+t}}]{x\+Stream\+Buffer,  }\item[{size\+\_\+t}]{x\+Trigger\+Level }\end{DoxyParamCaption})}



Definition at line 441 of file stream\+\_\+buffer.\+c.


\begin{DoxyCode}
442 \{
443 \hyperlink{structStreamBufferDef__t}{StreamBuffer\_t} * \textcolor{keyword}{const} pxStreamBuffer = xStreamBuffer;
444 \hyperlink{pic32mx_2portmacro_8h_a46fb21e00ae0729d7515c0fbf2269796}{BaseType\_t} xReturn;
445 
446     \hyperlink{FreeRTOS_8h_a228c70cd48927d6ab730ed1a6dfbe35f}{configASSERT}( pxStreamBuffer );
447 
448     \textcolor{comment}{/* It is not valid for the trigger level to be 0. */}
449     \textcolor{keywordflow}{if}( xTriggerLevel == ( \textcolor{keywordtype}{size\_t} ) 0 )
450     \{
451         xTriggerLevel = ( size\_t ) 1;
452     \}
453 
454     \textcolor{comment}{/* The trigger level is the number of bytes that must be in the stream}
455 \textcolor{comment}{    buffer before a task that is waiting for data is unblocked. */}
456     \textcolor{keywordflow}{if}( xTriggerLevel <= pxStreamBuffer->xLength )
457     \{
458         pxStreamBuffer->\hyperlink{structStreamBufferDef__t_a4a7ee9b374cc0b358d049811def8d595}{xTriggerLevelBytes} = xTriggerLevel;
459         xReturn = \hyperlink{projdefs_8h_a07848d3078849bd32353c69d30a479b3}{pdPASS};
460     \}
461     \textcolor{keywordflow}{else}
462     \{
463         xReturn = \hyperlink{projdefs_8h_aa56260e937e7e203026707e5ba944273}{pdFALSE};
464     \}
465 
466     \textcolor{keywordflow}{return} xReturn;
467 \}
\end{DoxyCode}
\mbox{\Hypertarget{stream__buffer_8c_a8fb90892c74eb94fb063b2a018a10509}\label{stream__buffer_8c_a8fb90892c74eb94fb063b2a018a10509}} 
\index{stream\+\_\+buffer.\+c@{stream\+\_\+buffer.\+c}!x\+Stream\+Buffer\+Spaces\+Available@{x\+Stream\+Buffer\+Spaces\+Available}}
\index{x\+Stream\+Buffer\+Spaces\+Available@{x\+Stream\+Buffer\+Spaces\+Available}!stream\+\_\+buffer.\+c@{stream\+\_\+buffer.\+c}}
\subsubsection{\texorpdfstring{x\+Stream\+Buffer\+Spaces\+Available()}{xStreamBufferSpacesAvailable()}}
{\footnotesize\ttfamily size\+\_\+t x\+Stream\+Buffer\+Spaces\+Available (\begin{DoxyParamCaption}\item[{\hyperlink{stream__buffer_8h_a8b80974e2278f073412293e6580ce56f}{Stream\+Buffer\+Handle\+\_\+t}}]{x\+Stream\+Buffer }\end{DoxyParamCaption})}



Definition at line 470 of file stream\+\_\+buffer.\+c.


\begin{DoxyCode}
471 \{
472 \textcolor{keyword}{const} \hyperlink{structStreamBufferDef__t}{StreamBuffer\_t} * \textcolor{keyword}{const} pxStreamBuffer = xStreamBuffer;
473 \textcolor{keywordtype}{size\_t} xSpace;
474 
475     \hyperlink{FreeRTOS_8h_a228c70cd48927d6ab730ed1a6dfbe35f}{configASSERT}( pxStreamBuffer );
476 
477     xSpace = pxStreamBuffer->\hyperlink{structStreamBufferDef__t_a6eedf41c877edd42b3b460780d1b6555}{xLength} + pxStreamBuffer->\hyperlink{structStreamBufferDef__t_a937e441ed6c946a099d52b5955d7302c}{xTail};
478     xSpace -= pxStreamBuffer->\hyperlink{structStreamBufferDef__t_a75aafb9fdee8f0666837302bd9b12341}{xHead};
479     xSpace -= ( size\_t ) 1;
480 
481     \textcolor{keywordflow}{if}( xSpace >= pxStreamBuffer->\hyperlink{structStreamBufferDef__t_a6eedf41c877edd42b3b460780d1b6555}{xLength} )
482     \{
483         xSpace -= pxStreamBuffer->\hyperlink{structStreamBufferDef__t_a6eedf41c877edd42b3b460780d1b6555}{xLength};
484     \}
485     \textcolor{keywordflow}{else}
486     \{
487         \hyperlink{FreeRTOS_8h_ac77e2af1a6b0d38fbab36cf2aa96f1a8}{mtCOVERAGE\_TEST\_MARKER}();
488     \}
489 
490     \textcolor{keywordflow}{return} xSpace;
491 \}
\end{DoxyCode}
