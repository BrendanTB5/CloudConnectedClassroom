\hypertarget{udp_8h}{}\section{cyclone\+\_\+tcp/core/udp.h File Reference}
\label{udp_8h}\index{cyclone\+\_\+tcp/core/udp.\+h@{cyclone\+\_\+tcp/core/udp.\+h}}


U\+DP (User Datagram Protocol)  


{\ttfamily \#include \char`\"{}core/net.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}core/tcp.\+h\char`\"{}}\newline
\subsection*{Classes}
\begin{DoxyCompactItemize}
\item 
struct \hyperlink{structUdpRxCallbackDesc}{Udp\+Rx\+Callback\+Desc}
\begin{DoxyCompactList}\small\item\em Entry describing a user callback. \end{DoxyCompactList}\end{DoxyCompactItemize}
\subsection*{Macros}
\begin{DoxyCompactItemize}
\item 
\#define \hyperlink{udp_8h_a49b46b1659162721bdc75997692d46f5}{U\+D\+P\+\_\+\+S\+U\+P\+P\+O\+RT}~\hyperlink{os__port_8h_a73c228f87e038e8295ee8ea8eceaa5ac}{E\+N\+A\+B\+L\+ED}
\item 
\#define \hyperlink{udp_8h_ac8ac25da0395f880ccb2af76bf8bf88e}{U\+D\+P\+\_\+\+C\+A\+L\+L\+B\+A\+C\+K\+\_\+\+T\+A\+B\+L\+E\+\_\+\+S\+I\+ZE}~10
\item 
\#define \hyperlink{udp_8h_aac8bfe94fda661261c0c5144012d7ab0}{U\+D\+P\+\_\+\+R\+X\+\_\+\+Q\+U\+E\+U\+E\+\_\+\+S\+I\+ZE}~4
\end{DoxyCompactItemize}
\subsection*{Typedefs}
\begin{DoxyCompactItemize}
\item 
\begin{tabbing}
xx\=xx\=xx\=xx\=xx\=xx\=xx\=xx\=xx\=\kill
struct \{\\
\>\hyperlink{stdint_8h_a273cf69d639a59973b6019625df33e30}{uint16\_t} \hyperlink{udp_8h_a26ebbf4f65c3f6fd9959d9cecef5c9d8}{srcPort}\\
\>\hyperlink{stdint_8h_a273cf69d639a59973b6019625df33e30}{uint16\_t} \hyperlink{udp_8h_af15d713ad2bc92686abfa6ab012b5039}{destPort}\\
\>\hyperlink{stdint_8h_a273cf69d639a59973b6019625df33e30}{uint16\_t} \hyperlink{udp_8h_a1892eba2086d12ac2b09005aeb09ea3b}{length}\\
\>\hyperlink{stdint_8h_a273cf69d639a59973b6019625df33e30}{uint16\_t} \hyperlink{udp_8h_a6796c847bbd16253ce2538754c250bd6}{checksum}\\
\>\hyperlink{stdint_8h_aba7bc1797add20fe3efdf37ced1182c5}{uint8\_t} \hyperlink{udp_8h_a5c239a1bb87b52b0f1d6d68c4749cd2a}{data} \mbox{[}$\,$\mbox{]}\\
\} \hyperlink{udp_8h_a6877bae1da8326482f5e311875e52bce}{UdpHeader}\\

\end{tabbing}\begin{DoxyCompactList}\small\item\em U\+DP header. \end{DoxyCompactList}\item 
typedef void($\ast$ \hyperlink{udp_8h_a44f4479a46efe22380138b8afca8413c}{Udp\+Rx\+Callback}) (\hyperlink{net_8h_a2234db8911a1148c9159979d8f5e0d6b}{Net\+Interface} $\ast$interface, const \hyperlink{structIpPseudoHeader}{Ip\+Pseudo\+Header} $\ast$pseudo\+Header, const \hyperlink{udp_8h_a6877bae1da8326482f5e311875e52bce}{Udp\+Header} $\ast$header, const \hyperlink{structNetBuffer}{Net\+Buffer} $\ast$buffer, size\+\_\+t \hyperlink{pic32mz_2isr__support_8h_ac0542d92dfcd62c19170fd963f9e5052}{offset}, void $\ast$param)
\begin{DoxyCompactList}\small\item\em Data received callback. \end{DoxyCompactList}\end{DoxyCompactItemize}
\subsection*{Functions}
\begin{DoxyCompactItemize}
\item 
\hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689c}{error\+\_\+t} \hyperlink{udp_8h_a211158b9656e3594bd076b2a3104c185}{udp\+Init} (void)
\begin{DoxyCompactList}\small\item\em U\+DP related initialization. \end{DoxyCompactList}\item 
\hyperlink{stdint_8h_a273cf69d639a59973b6019625df33e30}{uint16\+\_\+t} \hyperlink{udp_8h_a9c0d754bee24d4408903597b0fd57fea}{udp\+Get\+Dynamic\+Port} (void)
\begin{DoxyCompactList}\small\item\em Get an ephemeral port number. \end{DoxyCompactList}\item 
\hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689c}{error\+\_\+t} \hyperlink{udp_8h_af33fdd31170a2a788bbeb05279c4036a}{udp\+Process\+Datagram} (\hyperlink{net_8h_a2234db8911a1148c9159979d8f5e0d6b}{Net\+Interface} $\ast$interface, \hyperlink{structIpPseudoHeader}{Ip\+Pseudo\+Header} $\ast$pseudo\+Header, const \hyperlink{structNetBuffer}{Net\+Buffer} $\ast$buffer, size\+\_\+t \hyperlink{pic32mz_2isr__support_8h_ac0542d92dfcd62c19170fd963f9e5052}{offset})
\begin{DoxyCompactList}\small\item\em Incoming U\+DP datagram processing. \end{DoxyCompactList}\item 
\hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689c}{error\+\_\+t} \hyperlink{udp_8h_a5db98abd9950a468a297a45640a6ba52}{udp\+Send\+Datagram} (\hyperlink{socket_8h_aa85acfb0fa336ef495e6ba87fb88fc48}{Socket} $\ast$\hyperlink{bsd__socket_8h_a3f8f3a2707fbc87fc30aa70f31f53218}{socket}, const \hyperlink{structIpAddr}{Ip\+Addr} $\ast$\hyperlink{ipcp_8h_a752e1719cf65f78dfec6274352cb56df}{dest\+Ip\+Addr}, \hyperlink{stdint_8h_a273cf69d639a59973b6019625df33e30}{uint16\+\_\+t} \hyperlink{udp_8h_af15d713ad2bc92686abfa6ab012b5039}{dest\+Port}, const void $\ast$\hyperlink{tftp__common_8h_a5c239a1bb87b52b0f1d6d68c4749cd2a}{data}, size\+\_\+t \hyperlink{ppp_8h_ab2b3adeb2a67e656ff030b56727fd0ac}{length}, size\+\_\+t $\ast$written, \hyperlink{compiler__port_8h_a12a1e9b3ce141648783a82445d02b58d}{uint\+\_\+t} \hyperlink{nbns__common_8h_a1e87af3c18a2fd36c61faf89949bdc3f}{flags})
\begin{DoxyCompactList}\small\item\em Send a U\+DP datagram. \end{DoxyCompactList}\item 
\hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689c}{error\+\_\+t} \hyperlink{udp_8h_a72a529f723ed1b75bfe98d0708f28eb1}{udp\+Send\+Datagram\+Ex} (\hyperlink{net_8h_a2234db8911a1148c9159979d8f5e0d6b}{Net\+Interface} $\ast$interface, const \hyperlink{structIpAddr}{Ip\+Addr} $\ast$\hyperlink{ipcp_8h_a8ddffb4d02fcd8ad856313d3e208c34f}{src\+Ip\+Addr}, \hyperlink{stdint_8h_a273cf69d639a59973b6019625df33e30}{uint16\+\_\+t} \hyperlink{udp_8h_a26ebbf4f65c3f6fd9959d9cecef5c9d8}{src\+Port}, const \hyperlink{structIpAddr}{Ip\+Addr} $\ast$\hyperlink{ipcp_8h_a752e1719cf65f78dfec6274352cb56df}{dest\+Ip\+Addr}, \hyperlink{stdint_8h_a273cf69d639a59973b6019625df33e30}{uint16\+\_\+t} \hyperlink{udp_8h_af15d713ad2bc92686abfa6ab012b5039}{dest\+Port}, \hyperlink{structNetBuffer}{Net\+Buffer} $\ast$buffer, size\+\_\+t \hyperlink{pic32mz_2isr__support_8h_ac0542d92dfcd62c19170fd963f9e5052}{offset}, \hyperlink{compiler__port_8h_a12a1e9b3ce141648783a82445d02b58d}{uint\+\_\+t} \hyperlink{nbns__common_8h_a1e87af3c18a2fd36c61faf89949bdc3f}{flags})
\begin{DoxyCompactList}\small\item\em Send a U\+DP datagram (raw interface) \end{DoxyCompactList}\item 
\hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689c}{error\+\_\+t} \hyperlink{udp_8h_ad04884594577e99c5f724e2929286ede}{udp\+Receive\+Datagram} (\hyperlink{socket_8h_aa85acfb0fa336ef495e6ba87fb88fc48}{Socket} $\ast$\hyperlink{bsd__socket_8h_a3f8f3a2707fbc87fc30aa70f31f53218}{socket}, \hyperlink{structIpAddr}{Ip\+Addr} $\ast$\hyperlink{ipcp_8h_a8ddffb4d02fcd8ad856313d3e208c34f}{src\+Ip\+Addr}, \hyperlink{stdint_8h_a273cf69d639a59973b6019625df33e30}{uint16\+\_\+t} $\ast$\hyperlink{udp_8h_a26ebbf4f65c3f6fd9959d9cecef5c9d8}{src\+Port}, \hyperlink{structIpAddr}{Ip\+Addr} $\ast$\hyperlink{ipcp_8h_a752e1719cf65f78dfec6274352cb56df}{dest\+Ip\+Addr}, void $\ast$\hyperlink{tftp__common_8h_a5c239a1bb87b52b0f1d6d68c4749cd2a}{data}, size\+\_\+t size, size\+\_\+t $\ast$received, \hyperlink{compiler__port_8h_a12a1e9b3ce141648783a82445d02b58d}{uint\+\_\+t} \hyperlink{nbns__common_8h_a1e87af3c18a2fd36c61faf89949bdc3f}{flags})
\begin{DoxyCompactList}\small\item\em Receive data from a U\+DP socket. \end{DoxyCompactList}\item 
\hyperlink{structNetBuffer}{Net\+Buffer} $\ast$ \hyperlink{udp_8h_a2c65cad7c5665fe03f94364e7e52b2be}{udp\+Alloc\+Buffer} (size\+\_\+t \hyperlink{ppp_8h_ab2b3adeb2a67e656ff030b56727fd0ac}{length}, size\+\_\+t $\ast$\hyperlink{pic32mz_2isr__support_8h_ac0542d92dfcd62c19170fd963f9e5052}{offset})
\begin{DoxyCompactList}\small\item\em Allocate a buffer to hold a U\+DP packet. \end{DoxyCompactList}\item 
void \hyperlink{udp_8h_a9602ce39b27bfab384388170f1a25eab}{udp\+Update\+Events} (\hyperlink{socket_8h_aa85acfb0fa336ef495e6ba87fb88fc48}{Socket} $\ast$\hyperlink{bsd__socket_8h_a3f8f3a2707fbc87fc30aa70f31f53218}{socket})
\begin{DoxyCompactList}\small\item\em Update U\+DP related events. \end{DoxyCompactList}\item 
\hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689c}{error\+\_\+t} \hyperlink{udp_8h_a38370e246c2908c710db4773a6423cee}{udp\+Attach\+Rx\+Callback} (\hyperlink{net_8h_a2234db8911a1148c9159979d8f5e0d6b}{Net\+Interface} $\ast$interface, \hyperlink{stdint_8h_a273cf69d639a59973b6019625df33e30}{uint16\+\_\+t} \hyperlink{dns__common_8h_a8e0798404bf2cf5dabb84c5ba9a4f236}{port}, \hyperlink{udp_8h_a44f4479a46efe22380138b8afca8413c}{Udp\+Rx\+Callback} callback, void $\ast$param)
\begin{DoxyCompactList}\small\item\em Register user callback. \end{DoxyCompactList}\item 
\hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689c}{error\+\_\+t} \hyperlink{udp_8h_a1d915e0747de1926d096062048111e66}{udp\+Detach\+Rx\+Callback} (\hyperlink{net_8h_a2234db8911a1148c9159979d8f5e0d6b}{Net\+Interface} $\ast$interface, \hyperlink{stdint_8h_a273cf69d639a59973b6019625df33e30}{uint16\+\_\+t} \hyperlink{dns__common_8h_a8e0798404bf2cf5dabb84c5ba9a4f236}{port})
\begin{DoxyCompactList}\small\item\em Unregister user callback. \end{DoxyCompactList}\item 
\hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689c}{error\+\_\+t} \hyperlink{udp_8h_a5391253100c67ceaa67759e907c3c85a}{udp\+Invoke\+Rx\+Callback} (\hyperlink{net_8h_a2234db8911a1148c9159979d8f5e0d6b}{Net\+Interface} $\ast$interface, const \hyperlink{structIpPseudoHeader}{Ip\+Pseudo\+Header} $\ast$pseudo\+Header, const \hyperlink{udp_8h_a6877bae1da8326482f5e311875e52bce}{Udp\+Header} $\ast$header, const \hyperlink{structNetBuffer}{Net\+Buffer} $\ast$buffer, size\+\_\+t \hyperlink{pic32mz_2isr__support_8h_ac0542d92dfcd62c19170fd963f9e5052}{offset})
\begin{DoxyCompactList}\small\item\em Invoke user callback. \end{DoxyCompactList}\item 
void \hyperlink{udp_8h_a377b3fa5757c72f4d7efe1c43027b02e}{udp\+Dump\+Header} (const \hyperlink{udp_8h_a6877bae1da8326482f5e311875e52bce}{Udp\+Header} $\ast$datagram)
\begin{DoxyCompactList}\small\item\em Dump U\+DP header for debugging purpose. \end{DoxyCompactList}\end{DoxyCompactItemize}
\subsection*{Variables}
\begin{DoxyCompactItemize}
\item 
\hyperlink{structOsMutex}{Os\+Mutex} \hyperlink{udp_8h_a34b300a8e9e83b714eb8304370c619b1}{udp\+Callback\+Mutex}
\item 
\hyperlink{structUdpRxCallbackDesc}{Udp\+Rx\+Callback\+Desc} \hyperlink{udp_8h_abb1f00a80979f87b4f05fc69b3a439a8}{udp\+Callback\+Table} \mbox{[}\hyperlink{udp_8h_ac8ac25da0395f880ccb2af76bf8bf88e}{U\+D\+P\+\_\+\+C\+A\+L\+L\+B\+A\+C\+K\+\_\+\+T\+A\+B\+L\+E\+\_\+\+S\+I\+ZE}\mbox{]}
\end{DoxyCompactItemize}


\subsection{Detailed Description}
U\+DP (User Datagram Protocol) 

\hypertarget{pic32mz__ef__curiosity_8h_License}{}\subsection{License}\label{pic32mz__ef__curiosity_8h_License}
S\+P\+D\+X-\/\+License-\/\+Identifier\+: G\+P\+L-\/2.\+0-\/or-\/later

Copyright (C) 2010-\/2019 Oryx Embedded S\+A\+RL. All rights reserved.

This file is part of Cyclone\+T\+CP Open.

This program is free software; you can redistribute it and/or modify it under the terms of the G\+NU General Public License as published by the Free Software Foundation; either version 2 of the License, or (at your option) any later version.

This program is distributed in the hope that it will be useful, but W\+I\+T\+H\+O\+UT A\+NY W\+A\+R\+R\+A\+N\+TY; without even the implied warranty of M\+E\+R\+C\+H\+A\+N\+T\+A\+B\+I\+L\+I\+TY or F\+I\+T\+N\+E\+SS F\+OR A P\+A\+R\+T\+I\+C\+U\+L\+AR P\+U\+R\+P\+O\+SE. See the G\+NU General Public License for more details.

You should have received a copy of the G\+NU General Public License along with this program; if not, write to the Free Software Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-\/1301, U\+SA.

\begin{DoxyAuthor}{Author}
Oryx Embedded S\+A\+RL (www.\+oryx-\/embedded.\+com) 
\end{DoxyAuthor}
\begin{DoxyVersion}{Version}
1.\+9.\+6 
\end{DoxyVersion}


\subsection{Macro Definition Documentation}
\mbox{\Hypertarget{udp_8h_ac8ac25da0395f880ccb2af76bf8bf88e}\label{udp_8h_ac8ac25da0395f880ccb2af76bf8bf88e}} 
\index{udp.\+h@{udp.\+h}!U\+D\+P\+\_\+\+C\+A\+L\+L\+B\+A\+C\+K\+\_\+\+T\+A\+B\+L\+E\+\_\+\+S\+I\+ZE@{U\+D\+P\+\_\+\+C\+A\+L\+L\+B\+A\+C\+K\+\_\+\+T\+A\+B\+L\+E\+\_\+\+S\+I\+ZE}}
\index{U\+D\+P\+\_\+\+C\+A\+L\+L\+B\+A\+C\+K\+\_\+\+T\+A\+B\+L\+E\+\_\+\+S\+I\+ZE@{U\+D\+P\+\_\+\+C\+A\+L\+L\+B\+A\+C\+K\+\_\+\+T\+A\+B\+L\+E\+\_\+\+S\+I\+ZE}!udp.\+h@{udp.\+h}}
\subsubsection{\texorpdfstring{U\+D\+P\+\_\+\+C\+A\+L\+L\+B\+A\+C\+K\+\_\+\+T\+A\+B\+L\+E\+\_\+\+S\+I\+ZE}{UDP\_CALLBACK\_TABLE\_SIZE}}
{\footnotesize\ttfamily \#define U\+D\+P\+\_\+\+C\+A\+L\+L\+B\+A\+C\+K\+\_\+\+T\+A\+B\+L\+E\+\_\+\+S\+I\+ZE~10}



Definition at line 48 of file udp.\+h.

\mbox{\Hypertarget{udp_8h_aac8bfe94fda661261c0c5144012d7ab0}\label{udp_8h_aac8bfe94fda661261c0c5144012d7ab0}} 
\index{udp.\+h@{udp.\+h}!U\+D\+P\+\_\+\+R\+X\+\_\+\+Q\+U\+E\+U\+E\+\_\+\+S\+I\+ZE@{U\+D\+P\+\_\+\+R\+X\+\_\+\+Q\+U\+E\+U\+E\+\_\+\+S\+I\+ZE}}
\index{U\+D\+P\+\_\+\+R\+X\+\_\+\+Q\+U\+E\+U\+E\+\_\+\+S\+I\+ZE@{U\+D\+P\+\_\+\+R\+X\+\_\+\+Q\+U\+E\+U\+E\+\_\+\+S\+I\+ZE}!udp.\+h@{udp.\+h}}
\subsubsection{\texorpdfstring{U\+D\+P\+\_\+\+R\+X\+\_\+\+Q\+U\+E\+U\+E\+\_\+\+S\+I\+ZE}{UDP\_RX\_QUEUE\_SIZE}}
{\footnotesize\ttfamily \#define U\+D\+P\+\_\+\+R\+X\+\_\+\+Q\+U\+E\+U\+E\+\_\+\+S\+I\+ZE~4}



Definition at line 55 of file udp.\+h.

\mbox{\Hypertarget{udp_8h_a49b46b1659162721bdc75997692d46f5}\label{udp_8h_a49b46b1659162721bdc75997692d46f5}} 
\index{udp.\+h@{udp.\+h}!U\+D\+P\+\_\+\+S\+U\+P\+P\+O\+RT@{U\+D\+P\+\_\+\+S\+U\+P\+P\+O\+RT}}
\index{U\+D\+P\+\_\+\+S\+U\+P\+P\+O\+RT@{U\+D\+P\+\_\+\+S\+U\+P\+P\+O\+RT}!udp.\+h@{udp.\+h}}
\subsubsection{\texorpdfstring{U\+D\+P\+\_\+\+S\+U\+P\+P\+O\+RT}{UDP\_SUPPORT}}
{\footnotesize\ttfamily \#define U\+D\+P\+\_\+\+S\+U\+P\+P\+O\+RT~\hyperlink{os__port_8h_a73c228f87e038e8295ee8ea8eceaa5ac}{E\+N\+A\+B\+L\+ED}}



Definition at line 40 of file udp.\+h.



\subsection{Typedef Documentation}
\mbox{\Hypertarget{udp_8h_a6877bae1da8326482f5e311875e52bce}\label{udp_8h_a6877bae1da8326482f5e311875e52bce}} 
\index{udp.\+h@{udp.\+h}!Udp\+Header@{Udp\+Header}}
\index{Udp\+Header@{Udp\+Header}!udp.\+h@{udp.\+h}}
\subsubsection{\texorpdfstring{Udp\+Header}{UdpHeader}}
{\footnotesize\ttfamily typedef \{ ... \}  \hyperlink{udp_8h_a6877bae1da8326482f5e311875e52bce}{Udp\+Header}}



U\+DP header. 

\mbox{\Hypertarget{udp_8h_a44f4479a46efe22380138b8afca8413c}\label{udp_8h_a44f4479a46efe22380138b8afca8413c}} 
\index{udp.\+h@{udp.\+h}!Udp\+Rx\+Callback@{Udp\+Rx\+Callback}}
\index{Udp\+Rx\+Callback@{Udp\+Rx\+Callback}!udp.\+h@{udp.\+h}}
\subsubsection{\texorpdfstring{Udp\+Rx\+Callback}{UdpRxCallback}}
{\footnotesize\ttfamily typedef void($\ast$ Udp\+Rx\+Callback) (\hyperlink{net_8h_a2234db8911a1148c9159979d8f5e0d6b}{Net\+Interface} $\ast$interface, const \hyperlink{structIpPseudoHeader}{Ip\+Pseudo\+Header} $\ast$pseudo\+Header, const \hyperlink{udp_8h_a6877bae1da8326482f5e311875e52bce}{Udp\+Header} $\ast$header, const \hyperlink{structNetBuffer}{Net\+Buffer} $\ast$buffer, size\+\_\+t \hyperlink{pic32mz_2isr__support_8h_ac0542d92dfcd62c19170fd963f9e5052}{offset}, void $\ast$param)}



Data received callback. 



Definition at line 96 of file udp.\+h.



\subsection{Function Documentation}
\mbox{\Hypertarget{udp_8h_a2c65cad7c5665fe03f94364e7e52b2be}\label{udp_8h_a2c65cad7c5665fe03f94364e7e52b2be}} 
\index{udp.\+h@{udp.\+h}!udp\+Alloc\+Buffer@{udp\+Alloc\+Buffer}}
\index{udp\+Alloc\+Buffer@{udp\+Alloc\+Buffer}!udp.\+h@{udp.\+h}}
\subsubsection{\texorpdfstring{udp\+Alloc\+Buffer()}{udpAllocBuffer()}}
{\footnotesize\ttfamily \hyperlink{structNetBuffer}{Net\+Buffer}$\ast$ udp\+Alloc\+Buffer (\begin{DoxyParamCaption}\item[{size\+\_\+t}]{length,  }\item[{size\+\_\+t $\ast$}]{offset }\end{DoxyParamCaption})}



Allocate a buffer to hold a U\+DP packet. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em length} & Desired payload length \\
\hline
\mbox{\tt out}  & {\em offset} & Offset to the first byte of the payload \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
The function returns a pointer to the newly allocated buffer. If the system is out of resources, N\+U\+LL is returned 
\end{DoxyReturn}


Definition at line 697 of file udp.\+c.


\begin{DoxyCode}
698 \{
699    \hyperlink{structNetBuffer}{NetBuffer} *buffer;
700 
701    \textcolor{comment}{//Allocate a buffer to hold the UDP header and the payload}
702    buffer = \hyperlink{ip_8c_a2222fb64b1b18140283119eea309c1b3}{ipAllocBuffer}(\hyperlink{dtls__misc_8h_ab43ca82dd7fa2a0e56f941032ef324c4}{length} + \textcolor{keyword}{sizeof}(\hyperlink{udp_8h_a6877bae1da8326482f5e311875e52bce}{UdpHeader}), 
      \hyperlink{pic32mz_2isr__support_8h_a12a5aed8a193ebbf9a641104a310610d}{offset});
703    \textcolor{comment}{//Failed to allocate buffer?}
704    \textcolor{keywordflow}{if}(buffer == \hyperlink{group__BSPDefine_ga070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL})
705       \textcolor{keywordflow}{return} \hyperlink{group__BSPDefine_ga070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL};
706 
707    \textcolor{comment}{//Offset to the first byte of the payload}
708    *\hyperlink{pic32mz_2isr__support_8h_a12a5aed8a193ebbf9a641104a310610d}{offset} += \textcolor{keyword}{sizeof}(\hyperlink{udp_8h_a6877bae1da8326482f5e311875e52bce}{UdpHeader});
709 
710    \textcolor{comment}{//Return a pointer to the freshly allocated buffer}
711    \textcolor{keywordflow}{return} buffer;
712 \}
\end{DoxyCode}
\mbox{\Hypertarget{udp_8h_a38370e246c2908c710db4773a6423cee}\label{udp_8h_a38370e246c2908c710db4773a6423cee}} 
\index{udp.\+h@{udp.\+h}!udp\+Attach\+Rx\+Callback@{udp\+Attach\+Rx\+Callback}}
\index{udp\+Attach\+Rx\+Callback@{udp\+Attach\+Rx\+Callback}!udp.\+h@{udp.\+h}}
\subsubsection{\texorpdfstring{udp\+Attach\+Rx\+Callback()}{udpAttachRxCallback()}}
{\footnotesize\ttfamily \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689c}{error\+\_\+t} udp\+Attach\+Rx\+Callback (\begin{DoxyParamCaption}\item[{\hyperlink{net_8h_a2234db8911a1148c9159979d8f5e0d6b}{Net\+Interface} $\ast$}]{interface,  }\item[{\hyperlink{stdint_8h_a273cf69d639a59973b6019625df33e30}{uint16\+\_\+t}}]{port,  }\item[{\hyperlink{udp_8h_a44f4479a46efe22380138b8afca8413c}{Udp\+Rx\+Callback}}]{callback,  }\item[{void $\ast$}]{param }\end{DoxyParamCaption})}



Register user callback. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em interface} & Underlying network interface \\
\hline
\mbox{\tt in}  & {\em port} & U\+DP port number \\
\hline
\mbox{\tt in}  & {\em callback} & Callback function to be called when a datagram is received \\
\hline
\mbox{\tt in}  & {\em param} & Callback function parameter (optional) \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Error code 
\end{DoxyReturn}


Definition at line 764 of file udp.\+c.


\begin{DoxyCode}
766 \{
767    \hyperlink{compiler__port_8h_a12a1e9b3ce141648783a82445d02b58d}{uint\_t} i;
768    \hyperlink{structUdpRxCallbackDesc}{UdpRxCallbackDesc} *entry;
769 
770    \textcolor{comment}{//Acquire exclusive access to the callback table}
771    \hyperlink{os__port__chibios_8c_a58485224df4bfa522246d55b35bbd83a}{osAcquireMutex}(&\hyperlink{udp_8c_a34b300a8e9e83b714eb8304370c619b1}{udpCallbackMutex});
772 
773    \textcolor{comment}{//Loop through the table}
774    \textcolor{keywordflow}{for}(i = 0; i < \hyperlink{udp_8h_ac8ac25da0395f880ccb2af76bf8bf88e}{UDP\_CALLBACK\_TABLE\_SIZE}; i++)
775    \{
776       \textcolor{comment}{//Point to the current entry}
777       entry = &\hyperlink{udp_8c_abb1f00a80979f87b4f05fc69b3a439a8}{udpCallbackTable}[i];
778 
779       \textcolor{comment}{//Check whether the entry is currently in used}
780       \textcolor{keywordflow}{if}(entry->\hyperlink{structUdpRxCallbackDesc_ad50e5f2634cd97ee825310fa484ed345}{callback} == \hyperlink{group__BSPDefine_ga070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL})
781       \{
782          \textcolor{comment}{//Create a new entry}
783          entry->\hyperlink{structUdpRxCallbackDesc_a686b2abba991578f9841a3cd6e75ca10}{interface} = interface;
784          entry->\hyperlink{structUdpRxCallbackDesc_a4c9f42715adbf7832647d1950846e61d}{port} = \hyperlink{dns__common_8h_a8e0798404bf2cf5dabb84c5ba9a4f236}{port};
785          entry->\hyperlink{structUdpRxCallbackDesc_ad50e5f2634cd97ee825310fa484ed345}{callback} = callback;
786          entry->\hyperlink{structUdpRxCallbackDesc_ab7ba8c4493339f103e1621aa28cbcf7d}{param} = param;
787          \textcolor{comment}{//We are done}
788          \textcolor{keywordflow}{break};
789       \}
790    \}
791 
792    \textcolor{comment}{//Release exclusive access to the callback table}
793    \hyperlink{os__port__chibios_8c_a8e10e5b2c6d3877b5ba60e375ac45d79}{osReleaseMutex}(&\hyperlink{udp_8c_a34b300a8e9e83b714eb8304370c619b1}{udpCallbackMutex});
794 
795    \textcolor{comment}{//Failed to attach the specified user callback?}
796    \textcolor{keywordflow}{if}(i >= UDP\_CALLBACK\_TABLE\_SIZE)
797       \textcolor{keywordflow}{return} \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689ca528efe91b7a7e4bcc9a6de7d4b778c67}{ERROR\_OUT\_OF\_RESOURCES};
798 
799    \textcolor{comment}{//Successful processing}
800    \textcolor{keywordflow}{return} \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689cabf350750d0d4fabd8954c0f1e9bbae94}{NO\_ERROR};
801 \}
\end{DoxyCode}
\mbox{\Hypertarget{udp_8h_a1d915e0747de1926d096062048111e66}\label{udp_8h_a1d915e0747de1926d096062048111e66}} 
\index{udp.\+h@{udp.\+h}!udp\+Detach\+Rx\+Callback@{udp\+Detach\+Rx\+Callback}}
\index{udp\+Detach\+Rx\+Callback@{udp\+Detach\+Rx\+Callback}!udp.\+h@{udp.\+h}}
\subsubsection{\texorpdfstring{udp\+Detach\+Rx\+Callback()}{udpDetachRxCallback()}}
{\footnotesize\ttfamily \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689c}{error\+\_\+t} udp\+Detach\+Rx\+Callback (\begin{DoxyParamCaption}\item[{\hyperlink{net_8h_a2234db8911a1148c9159979d8f5e0d6b}{Net\+Interface} $\ast$}]{interface,  }\item[{\hyperlink{stdint_8h_a273cf69d639a59973b6019625df33e30}{uint16\+\_\+t}}]{port }\end{DoxyParamCaption})}



Unregister user callback. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em interface} & Underlying network interface \\
\hline
\mbox{\tt in}  & {\em port} & U\+DP port number \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Error code 
\end{DoxyReturn}


Definition at line 811 of file udp.\+c.


\begin{DoxyCode}
812 \{
813    \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689c}{error\_t} error;
814    \hyperlink{compiler__port_8h_a12a1e9b3ce141648783a82445d02b58d}{uint\_t} i;
815    \hyperlink{structUdpRxCallbackDesc}{UdpRxCallbackDesc} *entry;
816 
817    \textcolor{comment}{//Initialize status code}
818    error = \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689cae9be6449970fca5714ab9957b16562a5}{ERROR\_FAILURE};
819 
820    \textcolor{comment}{//Acquire exclusive access to the callback table}
821    \hyperlink{os__port__chibios_8c_a58485224df4bfa522246d55b35bbd83a}{osAcquireMutex}(&\hyperlink{udp_8c_a34b300a8e9e83b714eb8304370c619b1}{udpCallbackMutex});
822 
823    \textcolor{comment}{//Loop through the table}
824    \textcolor{keywordflow}{for}(i = 0; i < \hyperlink{udp_8h_ac8ac25da0395f880ccb2af76bf8bf88e}{UDP\_CALLBACK\_TABLE\_SIZE}; i++)
825    \{
826       \textcolor{comment}{//Point to the current entry}
827       entry = &\hyperlink{udp_8c_abb1f00a80979f87b4f05fc69b3a439a8}{udpCallbackTable}[i];
828 
829       \textcolor{comment}{//Check whether the entry is currently in used}
830       \textcolor{keywordflow}{if}(entry->\hyperlink{structUdpRxCallbackDesc_ad50e5f2634cd97ee825310fa484ed345}{callback} != \hyperlink{group__BSPDefine_ga070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL})
831       \{
832          \textcolor{comment}{//Does the specified port number match the current entry?}
833          \textcolor{keywordflow}{if}(entry->\hyperlink{structUdpRxCallbackDesc_a4c9f42715adbf7832647d1950846e61d}{port} == \hyperlink{dns__common_8h_a8e0798404bf2cf5dabb84c5ba9a4f236}{port} && entry->\hyperlink{structUdpRxCallbackDesc_a686b2abba991578f9841a3cd6e75ca10}{interface} == interface)
834          \{
835             \textcolor{comment}{//Unregister user callback}
836             entry->\hyperlink{structUdpRxCallbackDesc_ad50e5f2634cd97ee825310fa484ed345}{callback} = \hyperlink{group__BSPDefine_ga070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL};
837             \textcolor{comment}{//A matching entry has been found}
838             error = \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689cabf350750d0d4fabd8954c0f1e9bbae94}{NO\_ERROR};
839          \}
840       \}
841    \}
842 
843    \textcolor{comment}{//Release exclusive access to the callback table}
844    \hyperlink{os__port__chibios_8c_a8e10e5b2c6d3877b5ba60e375ac45d79}{osReleaseMutex}(&\hyperlink{udp_8c_a34b300a8e9e83b714eb8304370c619b1}{udpCallbackMutex});
845 
846    \textcolor{comment}{//Return status code}
847    \textcolor{keywordflow}{return} error;
848 \}
\end{DoxyCode}
\mbox{\Hypertarget{udp_8h_a377b3fa5757c72f4d7efe1c43027b02e}\label{udp_8h_a377b3fa5757c72f4d7efe1c43027b02e}} 
\index{udp.\+h@{udp.\+h}!udp\+Dump\+Header@{udp\+Dump\+Header}}
\index{udp\+Dump\+Header@{udp\+Dump\+Header}!udp.\+h@{udp.\+h}}
\subsubsection{\texorpdfstring{udp\+Dump\+Header()}{udpDumpHeader()}}
{\footnotesize\ttfamily void udp\+Dump\+Header (\begin{DoxyParamCaption}\item[{const \hyperlink{udp_8h_a6877bae1da8326482f5e311875e52bce}{Udp\+Header} $\ast$}]{datagram }\end{DoxyParamCaption})}



Dump U\+DP header for debugging purpose. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em datagram} & Pointer to the U\+DP header \\
\hline
\end{DoxyParams}


Definition at line 941 of file udp.\+c.


\begin{DoxyCode}
942 \{
943    \textcolor{comment}{//Dump UDP header contents}
944    \hyperlink{debug_8h_a67a8f9bc74358aa21745a76e23768dae}{TRACE\_DEBUG}(\textcolor{stringliteral}{"  Source Port = %"} PRIu16 \textcolor{stringliteral}{"\(\backslash\)r\(\backslash\)n"}, \hyperlink{cpu__endian_8h_a9312c6eb72e64f748ae0d0e0dc3ec9b9}{ntohs}(datagram->srcPort));
945    \hyperlink{debug_8h_a67a8f9bc74358aa21745a76e23768dae}{TRACE\_DEBUG}(\textcolor{stringliteral}{"  Destination Port = %"} PRIu16 \textcolor{stringliteral}{"\(\backslash\)r\(\backslash\)n"}, \hyperlink{cpu__endian_8h_a9312c6eb72e64f748ae0d0e0dc3ec9b9}{ntohs}(datagram->destPort));
946    \hyperlink{debug_8h_a67a8f9bc74358aa21745a76e23768dae}{TRACE\_DEBUG}(\textcolor{stringliteral}{"  Length = %"} PRIu16 \textcolor{stringliteral}{"\(\backslash\)r\(\backslash\)n"}, \hyperlink{cpu__endian_8h_a9312c6eb72e64f748ae0d0e0dc3ec9b9}{ntohs}(datagram->length));
947    \hyperlink{debug_8h_a67a8f9bc74358aa21745a76e23768dae}{TRACE\_DEBUG}(\textcolor{stringliteral}{"  Checksum = 0x%04"} PRIX16 \textcolor{stringliteral}{"\(\backslash\)r\(\backslash\)n"}, \hyperlink{cpu__endian_8h_a9312c6eb72e64f748ae0d0e0dc3ec9b9}{ntohs}(datagram->checksum));
948 \}
\end{DoxyCode}
\mbox{\Hypertarget{udp_8h_a9c0d754bee24d4408903597b0fd57fea}\label{udp_8h_a9c0d754bee24d4408903597b0fd57fea}} 
\index{udp.\+h@{udp.\+h}!udp\+Get\+Dynamic\+Port@{udp\+Get\+Dynamic\+Port}}
\index{udp\+Get\+Dynamic\+Port@{udp\+Get\+Dynamic\+Port}!udp.\+h@{udp.\+h}}
\subsubsection{\texorpdfstring{udp\+Get\+Dynamic\+Port()}{udpGetDynamicPort()}}
{\footnotesize\ttfamily \hyperlink{stdint_8h_a273cf69d639a59973b6019625df33e30}{uint16\+\_\+t} udp\+Get\+Dynamic\+Port (\begin{DoxyParamCaption}\item[{void}]{ }\end{DoxyParamCaption})}



Get an ephemeral port number. 

\begin{DoxyReturn}{Returns}
Ephemeral port 
\end{DoxyReturn}


Definition at line 89 of file udp.\+c.


\begin{DoxyCode}
90 \{
91    \hyperlink{compiler__port_8h_a12a1e9b3ce141648783a82445d02b58d}{uint\_t} \hyperlink{dns__common_8h_a8e0798404bf2cf5dabb84c5ba9a4f236}{port};
92 
93    \textcolor{comment}{//Retrieve current port number}
94    port = \hyperlink{udp_8c_aa385ff306d44b81adedfec03cb7802f8}{udpDynamicPort};
95 
96    \textcolor{comment}{//Invalid port number?}
97    \textcolor{keywordflow}{if}(port < SOCKET\_EPHEMERAL\_PORT\_MIN || port > \hyperlink{socket_8h_ac78b12932199df1d3a2804a6fb57e148}{SOCKET\_EPHEMERAL\_PORT\_MAX})
98    \{
99       \textcolor{comment}{//Generate a random port number}
100       port = \hyperlink{socket_8h_aea871a62e4a6f91fc96870da3faf703c}{SOCKET\_EPHEMERAL\_PORT\_MIN} + \hyperlink{net_8c_a7bb00b31d641749ac8ce742261eb1f6d}{netGetRand}() %
101          (SOCKET\_EPHEMERAL\_PORT\_MAX - \hyperlink{socket_8h_aea871a62e4a6f91fc96870da3faf703c}{SOCKET\_EPHEMERAL\_PORT\_MIN} + 1);
102    \}
103 
104    \textcolor{comment}{//Next dynamic port to use}
105    \textcolor{keywordflow}{if}(port < SOCKET\_EPHEMERAL\_PORT\_MAX)
106    \{
107       \textcolor{comment}{//Increment port number}
108       \hyperlink{udp_8c_aa385ff306d44b81adedfec03cb7802f8}{udpDynamicPort} = port + 1;
109    \}
110    \textcolor{keywordflow}{else}
111    \{
112       \textcolor{comment}{//Wrap around if necessary}
113       \hyperlink{udp_8c_aa385ff306d44b81adedfec03cb7802f8}{udpDynamicPort} = \hyperlink{socket_8h_aea871a62e4a6f91fc96870da3faf703c}{SOCKET\_EPHEMERAL\_PORT\_MIN};
114    \}
115 
116    \textcolor{comment}{//Return an ephemeral port number}
117    \textcolor{keywordflow}{return} \hyperlink{dns__common_8h_a8e0798404bf2cf5dabb84c5ba9a4f236}{port};
118 \}
\end{DoxyCode}
\mbox{\Hypertarget{udp_8h_a211158b9656e3594bd076b2a3104c185}\label{udp_8h_a211158b9656e3594bd076b2a3104c185}} 
\index{udp.\+h@{udp.\+h}!udp\+Init@{udp\+Init}}
\index{udp\+Init@{udp\+Init}!udp.\+h@{udp.\+h}}
\subsubsection{\texorpdfstring{udp\+Init()}{udpInit()}}
{\footnotesize\ttfamily \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689c}{error\+\_\+t} udp\+Init (\begin{DoxyParamCaption}\item[{void}]{ }\end{DoxyParamCaption})}



U\+DP related initialization. 

\begin{DoxyReturn}{Returns}
Error code 
\end{DoxyReturn}


Definition at line 64 of file udp.\+c.


\begin{DoxyCode}
65 \{
66    \textcolor{comment}{//Reset ephemeral port number}
67    \hyperlink{udp_8c_aa385ff306d44b81adedfec03cb7802f8}{udpDynamicPort} = 0;
68 
69    \textcolor{comment}{//Create a mutex to prevent simultaneous access to the callback table}
70    \textcolor{keywordflow}{if}(!\hyperlink{os__port__chibios_8c_a16627f901c807c29adf29a38fb1af16a}{osCreateMutex}(&\hyperlink{udp_8c_a34b300a8e9e83b714eb8304370c619b1}{udpCallbackMutex}))
71    \{
72       \textcolor{comment}{//Failed to create mutex}
73       \textcolor{keywordflow}{return} \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689ca528efe91b7a7e4bcc9a6de7d4b778c67}{ERROR\_OUT\_OF\_RESOURCES};
74    \}
75 
76    \textcolor{comment}{//Initialize callback table}
77    memset(\hyperlink{udp_8c_abb1f00a80979f87b4f05fc69b3a439a8}{udpCallbackTable}, 0, \textcolor{keyword}{sizeof}(\hyperlink{udp_8c_abb1f00a80979f87b4f05fc69b3a439a8}{udpCallbackTable}));
78 
79    \textcolor{comment}{//Successful initialization}
80    \textcolor{keywordflow}{return} \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689cabf350750d0d4fabd8954c0f1e9bbae94}{NO\_ERROR};
81 \}
\end{DoxyCode}
\mbox{\Hypertarget{udp_8h_a5391253100c67ceaa67759e907c3c85a}\label{udp_8h_a5391253100c67ceaa67759e907c3c85a}} 
\index{udp.\+h@{udp.\+h}!udp\+Invoke\+Rx\+Callback@{udp\+Invoke\+Rx\+Callback}}
\index{udp\+Invoke\+Rx\+Callback@{udp\+Invoke\+Rx\+Callback}!udp.\+h@{udp.\+h}}
\subsubsection{\texorpdfstring{udp\+Invoke\+Rx\+Callback()}{udpInvokeRxCallback()}}
{\footnotesize\ttfamily \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689c}{error\+\_\+t} udp\+Invoke\+Rx\+Callback (\begin{DoxyParamCaption}\item[{\hyperlink{net_8h_a2234db8911a1148c9159979d8f5e0d6b}{Net\+Interface} $\ast$}]{interface,  }\item[{const \hyperlink{structIpPseudoHeader}{Ip\+Pseudo\+Header} $\ast$}]{pseudo\+Header,  }\item[{const \hyperlink{udp_8h_a6877bae1da8326482f5e311875e52bce}{Udp\+Header} $\ast$}]{header,  }\item[{const \hyperlink{structNetBuffer}{Net\+Buffer} $\ast$}]{buffer,  }\item[{size\+\_\+t}]{offset }\end{DoxyParamCaption})}



Invoke user callback. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em interface} & Underlying network interface \\
\hline
\mbox{\tt in}  & {\em pseudo\+Header} & U\+DP pseudo header \\
\hline
\mbox{\tt in}  & {\em header} & U\+DP header \\
\hline
\mbox{\tt in}  & {\em buffer} & Multi-\/part buffer containing the payload \\
\hline
\mbox{\tt in}  & {\em offset} & Offset to the first byte of the payload \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Error code 
\end{DoxyReturn}


Definition at line 861 of file udp.\+c.


\begin{DoxyCode}
863 \{
864    \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689c}{error\_t} error;
865    \hyperlink{compiler__port_8h_a12a1e9b3ce141648783a82445d02b58d}{uint\_t} i;
866    \textcolor{keywordtype}{void} *param;
867    \hyperlink{structUdpRxCallbackDesc}{UdpRxCallbackDesc} *entry;
868 
869    \textcolor{comment}{//Initialize status code}
870    error = \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689ca5acea867ad70b841818e19b32cc026b3}{ERROR\_PORT\_UNREACHABLE};
871 
872    \textcolor{comment}{//Acquire exclusive access to the callback table}
873    \hyperlink{os__port__chibios_8c_a58485224df4bfa522246d55b35bbd83a}{osAcquireMutex}(&\hyperlink{udp_8c_a34b300a8e9e83b714eb8304370c619b1}{udpCallbackMutex});
874 
875    \textcolor{comment}{//Loop through the table}
876    \textcolor{keywordflow}{for}(i = 0; i < \hyperlink{udp_8h_ac8ac25da0395f880ccb2af76bf8bf88e}{UDP\_CALLBACK\_TABLE\_SIZE}; i++)
877    \{
878       \textcolor{comment}{//Point to the current entry}
879       entry = &\hyperlink{udp_8c_abb1f00a80979f87b4f05fc69b3a439a8}{udpCallbackTable}[i];
880 
881       \textcolor{comment}{//Check whether the entry is currently in used}
882       \textcolor{keywordflow}{if}(entry->\hyperlink{structUdpRxCallbackDesc_ad50e5f2634cd97ee825310fa484ed345}{callback} != \hyperlink{group__BSPDefine_ga070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL})
883       \{
884          \textcolor{comment}{//Bound to a particular interface?}
885          \textcolor{keywordflow}{if}(entry->\hyperlink{structUdpRxCallbackDesc_a686b2abba991578f9841a3cd6e75ca10}{interface} == \hyperlink{group__BSPDefine_ga070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL} || entry->\hyperlink{structUdpRxCallbackDesc_a686b2abba991578f9841a3cd6e75ca10}{interface} == interface)
886          \{
887             \textcolor{comment}{//Does the specified port number match the current entry?}
888             \textcolor{keywordflow}{if}(entry->\hyperlink{structUdpRxCallbackDesc_a4c9f42715adbf7832647d1950846e61d}{port} == \hyperlink{cpu__endian_8h_a9312c6eb72e64f748ae0d0e0dc3ec9b9}{ntohs}(header->destPort))
889             \{
890                \textcolor{comment}{//Retrieve callback parameter}
891                param = entry->\hyperlink{structUdpRxCallbackDesc_ab7ba8c4493339f103e1621aa28cbcf7d}{param};
892 
893                \textcolor{comment}{//Release mutex to prevent any deadlock}
894                \textcolor{keywordflow}{if}(param == \hyperlink{group__BSPDefine_ga070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL})
895                   \hyperlink{os__port__chibios_8c_a8e10e5b2c6d3877b5ba60e375ac45d79}{osReleaseMutex}(&\hyperlink{udp_8c_a34b300a8e9e83b714eb8304370c619b1}{udpCallbackMutex});
896 
897                \textcolor{comment}{//Invoke user callback function}
898                entry->\hyperlink{structUdpRxCallbackDesc_ad50e5f2634cd97ee825310fa484ed345}{callback}(interface, pseudoHeader,
899                   header, buffer, \hyperlink{pic32mz_2isr__support_8h_a12a5aed8a193ebbf9a641104a310610d}{offset}, param);
900 
901                \textcolor{comment}{//Acquire mutex}
902                \textcolor{keywordflow}{if}(param == \hyperlink{group__BSPDefine_ga070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL})
903                   \hyperlink{os__port__chibios_8c_a58485224df4bfa522246d55b35bbd83a}{osAcquireMutex}(&\hyperlink{udp_8c_a34b300a8e9e83b714eb8304370c619b1}{udpCallbackMutex});
904 
905                \textcolor{comment}{//A matching entry has been found}
906                error = \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689cabf350750d0d4fabd8954c0f1e9bbae94}{NO\_ERROR};
907             \}
908          \}
909       \}
910    \}
911 
912    \textcolor{comment}{//Release exclusive access to the callback table}
913    \hyperlink{os__port__chibios_8c_a8e10e5b2c6d3877b5ba60e375ac45d79}{osReleaseMutex}(&\hyperlink{udp_8c_a34b300a8e9e83b714eb8304370c619b1}{udpCallbackMutex});
914 
915    \textcolor{comment}{//Check status code}
916    \textcolor{keywordflow}{if}(error)
917    \{
918       \textcolor{comment}{//Total number of received UDP datagrams for which there was}
919       \textcolor{comment}{//no application at the destination port}
920       \hyperlink{mib2__module_8h_abac73a39224e47d597f3b461620d2119}{MIB2\_INC\_COUNTER32}(udpGroup.udpNoPorts, 1);
921       \hyperlink{udp__mib__module_8h_a0b5fb70f36fbcc38256b934321dbfa46}{UDP\_MIB\_INC\_COUNTER32}(udpNoPorts, 1);
922    \}
923    \textcolor{keywordflow}{else}
924    \{
925       \textcolor{comment}{//Total number of UDP datagrams delivered to UDP users}
926       \hyperlink{mib2__module_8h_abac73a39224e47d597f3b461620d2119}{MIB2\_INC\_COUNTER32}(udpGroup.udpInDatagrams, 1);
927       \hyperlink{udp__mib__module_8h_a0b5fb70f36fbcc38256b934321dbfa46}{UDP\_MIB\_INC\_COUNTER32}(udpInDatagrams, 1);
928       \hyperlink{udp__mib__module_8h_aaf0c37c39883fffd2c1114448cc852df}{UDP\_MIB\_INC\_COUNTER64}(udpHCInDatagrams, 1);
929    \}
930 
931    \textcolor{comment}{//Return status code}
932    \textcolor{keywordflow}{return} error;
933 \}
\end{DoxyCode}
\mbox{\Hypertarget{udp_8h_af33fdd31170a2a788bbeb05279c4036a}\label{udp_8h_af33fdd31170a2a788bbeb05279c4036a}} 
\index{udp.\+h@{udp.\+h}!udp\+Process\+Datagram@{udp\+Process\+Datagram}}
\index{udp\+Process\+Datagram@{udp\+Process\+Datagram}!udp.\+h@{udp.\+h}}
\subsubsection{\texorpdfstring{udp\+Process\+Datagram()}{udpProcessDatagram()}}
{\footnotesize\ttfamily \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689c}{error\+\_\+t} udp\+Process\+Datagram (\begin{DoxyParamCaption}\item[{\hyperlink{net_8h_a2234db8911a1148c9159979d8f5e0d6b}{Net\+Interface} $\ast$}]{interface,  }\item[{\hyperlink{structIpPseudoHeader}{Ip\+Pseudo\+Header} $\ast$}]{pseudo\+Header,  }\item[{const \hyperlink{structNetBuffer}{Net\+Buffer} $\ast$}]{buffer,  }\item[{size\+\_\+t}]{offset }\end{DoxyParamCaption})}



Incoming U\+DP datagram processing. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em interface} & Underlying network interface \\
\hline
\mbox{\tt in}  & {\em pseudo\+Header} & U\+DP pseudo header \\
\hline
\mbox{\tt in}  & {\em buffer} & Multi-\/part buffer containing the incoming U\+DP datagram \\
\hline
\mbox{\tt in}  & {\em offset} & Offset to the first byte of the U\+DP header \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Error code 
\end{DoxyReturn}


Definition at line 130 of file udp.\+c.


\begin{DoxyCode}
132 \{
133    \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689c}{error\_t} error;
134    \hyperlink{compiler__port_8h_a12a1e9b3ce141648783a82445d02b58d}{uint\_t} i;
135    \textcolor{keywordtype}{size\_t} \hyperlink{dtls__misc_8h_ab43ca82dd7fa2a0e56f941032ef324c4}{length};
136    \hyperlink{udp_8h_a6877bae1da8326482f5e311875e52bce}{UdpHeader} *header;
137    \hyperlink{socket_8h_aa85acfb0fa336ef495e6ba87fb88fc48}{Socket} *\hyperlink{bsd__socket_8c_a3f8f3a2707fbc87fc30aa70f31f53218}{socket};
138    \hyperlink{struct__SocketQueueItem}{SocketQueueItem} *queueItem;
139    \hyperlink{structNetBuffer}{NetBuffer} *\hyperlink{ndp_8h_a6519522ad9a6f45e7a8d25d31392a977}{p};
140 
141    \textcolor{comment}{//Retrieve the length of the UDP datagram}
142    length = \hyperlink{net__mem_8c_ac9dbcd9e28e61d8f4f6d2e9af2607b68}{netBufferGetLength}(buffer) - \hyperlink{pic32mz_2isr__support_8h_a12a5aed8a193ebbf9a641104a310610d}{offset};
143 
144    \textcolor{comment}{//Ensure the UDP header is valid}
145    \textcolor{keywordflow}{if}(length < \textcolor{keyword}{sizeof}(\hyperlink{udp_8h_a6877bae1da8326482f5e311875e52bce}{UdpHeader}))
146    \{
147       \textcolor{comment}{//Number of received UDP datagrams that could not be delivered for}
148       \textcolor{comment}{//reasons other than the lack of an application at the destination port}
149       \hyperlink{mib2__module_8h_abac73a39224e47d597f3b461620d2119}{MIB2\_INC\_COUNTER32}(udpGroup.udpInErrors, 1);
150       \hyperlink{udp__mib__module_8h_a0b5fb70f36fbcc38256b934321dbfa46}{UDP\_MIB\_INC\_COUNTER32}(udpInErrors, 1);
151 
152       \textcolor{comment}{//Report an error}
153       \textcolor{keywordflow}{return} \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689ca9c63715d51ce91f67e4962b3f4da8435}{ERROR\_INVALID\_HEADER};
154    \}
155 
156    \textcolor{comment}{//Point to the UDP header}
157    header = \hyperlink{net__mem_8c_a20d30c9db547b3b2743368b589cf482b}{netBufferAt}(buffer, \hyperlink{pic32mz_2isr__support_8h_a12a5aed8a193ebbf9a641104a310610d}{offset});
158    \textcolor{comment}{//Sanity check}
159    \textcolor{keywordflow}{if}(header == \hyperlink{group__BSPDefine_ga070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL})
160       \textcolor{keywordflow}{return} \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689cae9be6449970fca5714ab9957b16562a5}{ERROR\_FAILURE};
161 
162    \textcolor{comment}{//Debug message}
163    \hyperlink{debug_8h_a7339bfd784193a5c79efcef2eeb2d6df}{TRACE\_INFO}(\textcolor{stringliteral}{"UDP datagram received (%"} \hyperlink{compiler__port_8h_a2b7b0557dc6cd786df02dafbb51f5292}{PRIuSIZE} \textcolor{stringliteral}{" bytes)...\(\backslash\)r\(\backslash\)n"}, length);
164    \textcolor{comment}{//Dump UDP header contents for debugging purpose}
165    \hyperlink{udp_8c_a377b3fa5757c72f4d7efe1c43027b02e}{udpDumpHeader}(header);
166 
167    \textcolor{comment}{//When UDP runs over IPv6, the checksum is mandatory}
168    \textcolor{keywordflow}{if}(header->checksum != 0x0000 || pseudoHeader->\hyperlink{structIpPseudoHeader_aeff06b8d9c3e7e2ef3cdb8a3a14e8ad2}{length} == \textcolor{keyword}{sizeof}(
      \hyperlink{ipv6_8h_a68061e0a0b502d880cbe60b645cfa2b7}{Ipv6PseudoHeader}))
169    \{
170       \textcolor{comment}{//Verify UDP checksum}
171       \textcolor{keywordflow}{if}(\hyperlink{ip_8c_a9ec0593d9dbb2adf3e67894c0349cef3}{ipCalcUpperLayerChecksumEx}(pseudoHeader->\hyperlink{structIpPseudoHeader_a87fecad80b6124a9af4a955525f1d39d}{data},
172          pseudoHeader->\hyperlink{structIpPseudoHeader_aeff06b8d9c3e7e2ef3cdb8a3a14e8ad2}{length}, buffer, \hyperlink{pic32mz_2isr__support_8h_a12a5aed8a193ebbf9a641104a310610d}{offset}, length) != 0x0000)
173       \{
174          \textcolor{comment}{//Debug message}
175          \hyperlink{debug_8h_a72b9761add7486364dba449091cd2579}{TRACE\_WARNING}(\textcolor{stringliteral}{"Wrong UDP header checksum!\(\backslash\)r\(\backslash\)n"});
176 
177          \textcolor{comment}{//Number of received UDP datagrams that could not be delivered for}
178          \textcolor{comment}{//reasons other than the lack of an application at the destination port}
179          \hyperlink{mib2__module_8h_abac73a39224e47d597f3b461620d2119}{MIB2\_INC\_COUNTER32}(udpGroup.udpInErrors, 1);
180          \hyperlink{udp__mib__module_8h_a0b5fb70f36fbcc38256b934321dbfa46}{UDP\_MIB\_INC\_COUNTER32}(udpInErrors, 1);
181 
182          \textcolor{comment}{//Report an error}
183          \textcolor{keywordflow}{return} \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689ca15c9ff8d015de6399f5862746f6656e2}{ERROR\_WRONG\_CHECKSUM};
184       \}
185    \}
186 
187    \textcolor{comment}{//Loop through opened sockets}
188    \textcolor{keywordflow}{for}(i = 0; i < \hyperlink{socket_8h_ab793a8c76592a00fa3ea0510cd2ffe3a}{SOCKET\_MAX\_COUNT}; i++)
189    \{
190       \textcolor{comment}{//Point to the current socket}
191       socket = \hyperlink{socket_8c_acdd76d8e01b4715c774c404b10f958da}{socketTable} + i;
192 
193       \textcolor{comment}{//UDP socket found?}
194       \textcolor{keywordflow}{if}(socket->type != \hyperlink{socket_8h_aa78c7398fa81f7f62aa233159d4d8d97a26963b01dac3a99a930779035d3796a7}{SOCKET\_TYPE\_DGRAM})
195          \textcolor{keywordflow}{continue};
196       \textcolor{comment}{//Check whether the socket is bound to a particular interface}
197       \textcolor{keywordflow}{if}(socket->interface && socket->interface != interface)
198          \textcolor{keywordflow}{continue};
199       \textcolor{comment}{//Check destination port number}
200       \textcolor{keywordflow}{if}(socket->localPort == 0 || socket->localPort != \hyperlink{cpu__endian_8h_a9312c6eb72e64f748ae0d0e0dc3ec9b9}{ntohs}(header->destPort))
201          \textcolor{keywordflow}{continue};
202       \textcolor{comment}{//Source port number filtering}
203       \textcolor{keywordflow}{if}(socket->remotePort != 0 && socket->remotePort != \hyperlink{cpu__endian_8h_a9312c6eb72e64f748ae0d0e0dc3ec9b9}{ntohs}(header->srcPort))
204          \textcolor{keywordflow}{continue};
205 
206 \textcolor{preprocessor}{#if (IPV4\_SUPPORT == ENABLED)}
207       \textcolor{comment}{//IPv4 packet received?}
208       \textcolor{keywordflow}{if}(pseudoHeader->\hyperlink{structIpPseudoHeader_aeff06b8d9c3e7e2ef3cdb8a3a14e8ad2}{length} == \textcolor{keyword}{sizeof}(\hyperlink{ipv4_8h_a0e92b64e038199f1bb6383f2a76f30b6}{Ipv4PseudoHeader}))
209       \{
210          \textcolor{comment}{//Destination IP address filtering}
211          \textcolor{keywordflow}{if}(socket->localIpAddr.length != 0)
212          \{
213             \textcolor{comment}{//An IPv4 address is expected}
214             \textcolor{keywordflow}{if}(socket->localIpAddr.length != \textcolor{keyword}{sizeof}(\hyperlink{ipv4_8h_a411debb3d770caa0c06d3f73367da37f}{Ipv4Addr}))
215                \textcolor{keywordflow}{continue};
216             \textcolor{comment}{//Filter out non-matching addresses}
217             \textcolor{keywordflow}{if}(socket->localIpAddr.ipv4Addr != pseudoHeader->\hyperlink{structIpPseudoHeader_a4dd0d91580f30918dc7b5d5a430dba6a}{ipv4Data}.destAddr)
218                \textcolor{keywordflow}{continue};
219          \}
220 
221          \textcolor{comment}{//Source IP address filtering}
222          \textcolor{keywordflow}{if}(socket->remoteIpAddr.length != 0)
223          \{
224             \textcolor{comment}{//An IPv4 address is expected}
225             \textcolor{keywordflow}{if}(socket->remoteIpAddr.length != \textcolor{keyword}{sizeof}(\hyperlink{ipv4_8h_a411debb3d770caa0c06d3f73367da37f}{Ipv4Addr}))
226                \textcolor{keywordflow}{continue};
227             \textcolor{comment}{//Filter out non-matching addresses}
228             \textcolor{keywordflow}{if}(socket->remoteIpAddr.ipv4Addr != pseudoHeader->\hyperlink{structIpPseudoHeader_a4dd0d91580f30918dc7b5d5a430dba6a}{ipv4Data}.srcAddr)
229                \textcolor{keywordflow}{continue};
230          \}
231       \}
232       \textcolor{keywordflow}{else}
233 \textcolor{preprocessor}{#endif}
234 \textcolor{preprocessor}{#if (IPV6\_SUPPORT == ENABLED)}
235       \textcolor{comment}{//IPv6 packet received?}
236       \textcolor{keywordflow}{if}(pseudoHeader->\hyperlink{structIpPseudoHeader_aeff06b8d9c3e7e2ef3cdb8a3a14e8ad2}{length} == \textcolor{keyword}{sizeof}(\hyperlink{ipv6_8h_a68061e0a0b502d880cbe60b645cfa2b7}{Ipv6PseudoHeader}))
237       \{
238          \textcolor{comment}{//Destination IP address filtering}
239          \textcolor{keywordflow}{if}(socket->localIpAddr.length != 0)
240          \{
241             \textcolor{comment}{//An IPv6 address is expected}
242             \textcolor{keywordflow}{if}(socket->localIpAddr.length != \textcolor{keyword}{sizeof}(\hyperlink{ipv6_8h_aed0cbc40c61ed5b4fb681ebc55237e89}{Ipv6Addr}))
243                \textcolor{keywordflow}{continue};
244             \textcolor{comment}{//Filter out non-matching addresses}
245             \textcolor{keywordflow}{if}(!\hyperlink{ipv6_8h_ab1e93bd2152bc3f3b5642fd0216384d7}{ipv6CompAddr}(&socket->localIpAddr.ipv6Addr, &pseudoHeader->
      \hyperlink{structIpPseudoHeader_a5155846ca7e85218407a8374d035aab7}{ipv6Data}.destAddr))
246                \textcolor{keywordflow}{continue};
247          \}
248 
249          \textcolor{comment}{//Source IP address filtering}
250          \textcolor{keywordflow}{if}(socket->remoteIpAddr.length != 0)
251          \{
252             \textcolor{comment}{//An IPv6 address is expected}
253             \textcolor{keywordflow}{if}(socket->remoteIpAddr.length != \textcolor{keyword}{sizeof}(\hyperlink{ipv6_8h_aed0cbc40c61ed5b4fb681ebc55237e89}{Ipv6Addr}))
254                \textcolor{keywordflow}{continue};
255             \textcolor{comment}{//Filter out non-matching addresses}
256             \textcolor{keywordflow}{if}(!\hyperlink{ipv6_8h_ab1e93bd2152bc3f3b5642fd0216384d7}{ipv6CompAddr}(&socket->remoteIpAddr.ipv6Addr, &pseudoHeader->
      \hyperlink{structIpPseudoHeader_a5155846ca7e85218407a8374d035aab7}{ipv6Data}.srcAddr))
257                \textcolor{keywordflow}{continue};
258          \}
259       \}
260       \textcolor{keywordflow}{else}
261 \textcolor{preprocessor}{#endif}
262       \textcolor{comment}{//Invalid packet received?}
263       \{
264          \textcolor{comment}{//This should never occur...}
265          \textcolor{keywordflow}{continue};
266       \}
267 
268       \textcolor{comment}{//The current socket meets all the criteria}
269       \textcolor{keywordflow}{break};
270    \}
271 
272    \textcolor{comment}{//Point to the payload}
273    \hyperlink{pic32mz_2isr__support_8h_a12a5aed8a193ebbf9a641104a310610d}{offset} += \textcolor{keyword}{sizeof}(\hyperlink{udp_8h_a6877bae1da8326482f5e311875e52bce}{UdpHeader});
274    length -= \textcolor{keyword}{sizeof}(\hyperlink{udp_8h_a6877bae1da8326482f5e311875e52bce}{UdpHeader});
275 
276    \textcolor{comment}{//No matching socket found?}
277    \textcolor{keywordflow}{if}(i >= SOCKET\_MAX\_COUNT)
278    \{
279       \textcolor{comment}{//Invoke user callback, if any}
280       error = \hyperlink{udp_8c_a5391253100c67ceaa67759e907c3c85a}{udpInvokeRxCallback}(interface, pseudoHeader, header, buffer, 
      \hyperlink{pic32mz_2isr__support_8h_a12a5aed8a193ebbf9a641104a310610d}{offset});
281       \textcolor{comment}{//Return status code}
282       \textcolor{keywordflow}{return} error;
283    \}
284 
285    \textcolor{comment}{//Empty receive queue?}
286    \textcolor{keywordflow}{if}(!socket->receiveQueue)
287    \{
288       \textcolor{comment}{//Allocate a memory buffer to hold the data and the associated descriptor}
289       p = \hyperlink{net__mem_8c_a986c9991e530e99528faa4c43efadc6f}{netBufferAlloc}(\textcolor{keyword}{sizeof}(\hyperlink{struct__SocketQueueItem}{SocketQueueItem}) + length);
290 
291       \textcolor{comment}{//Successful memory allocation?}
292       \textcolor{keywordflow}{if}(p != \hyperlink{group__BSPDefine_ga070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL})
293       \{
294          \textcolor{comment}{//Point to the newly created item}
295          queueItem = \hyperlink{net__mem_8c_a20d30c9db547b3b2743368b589cf482b}{netBufferAt}(p, 0);
296          queueItem->\hyperlink{struct__SocketQueueItem_a31b5c1ca345095021d7af269deefdb42}{buffer} = \hyperlink{ndp_8h_a6519522ad9a6f45e7a8d25d31392a977}{p};
297          \textcolor{comment}{//Add the newly created item to the queue}
298          socket->receiveQueue = queueItem;
299       \}
300       \textcolor{keywordflow}{else}
301       \{
302          \textcolor{comment}{//Memory allocation failed}
303          queueItem = \hyperlink{group__BSPDefine_ga070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL};
304       \}
305    \}
306    \textcolor{keywordflow}{else}
307    \{
308       \textcolor{comment}{//Point to the very first item}
309       queueItem = socket->receiveQueue;
310       \textcolor{comment}{//Reach the last item in the receive queue}
311       \textcolor{keywordflow}{for}(i = 1; queueItem->\hyperlink{struct__SocketQueueItem_a1160810dc2a18cd5fe63d9fc9dbf5f26}{next}; i++)
312          queueItem = queueItem->\hyperlink{struct__SocketQueueItem_a1160810dc2a18cd5fe63d9fc9dbf5f26}{next};
313 
314       \textcolor{comment}{//Make sure the receive queue is not full}
315       \textcolor{keywordflow}{if}(i >= \hyperlink{udp_8h_aac8bfe94fda661261c0c5144012d7ab0}{UDP\_RX\_QUEUE\_SIZE})
316          \textcolor{keywordflow}{return} \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689ca9403fdb452694b8129df4baf3b899da9}{ERROR\_RECEIVE\_QUEUE\_FULL};
317 
318       \textcolor{comment}{//Allocate a memory buffer to hold the data and the associated descriptor}
319       p = \hyperlink{net__mem_8c_a986c9991e530e99528faa4c43efadc6f}{netBufferAlloc}(\textcolor{keyword}{sizeof}(\hyperlink{struct__SocketQueueItem}{SocketQueueItem}) + length);
320 
321       \textcolor{comment}{//Successful memory allocation?}
322       \textcolor{keywordflow}{if}(p != \hyperlink{group__BSPDefine_ga070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL})
323       \{
324          \textcolor{comment}{//Add the newly created item to the queue}
325          queueItem->\hyperlink{struct__SocketQueueItem_a1160810dc2a18cd5fe63d9fc9dbf5f26}{next} = \hyperlink{net__mem_8c_a20d30c9db547b3b2743368b589cf482b}{netBufferAt}(p, 0);
326          \textcolor{comment}{//Point to the newly created item}
327          queueItem = queueItem->\hyperlink{struct__SocketQueueItem_a1160810dc2a18cd5fe63d9fc9dbf5f26}{next};
328          queueItem->\hyperlink{struct__SocketQueueItem_a31b5c1ca345095021d7af269deefdb42}{buffer} = \hyperlink{ndp_8h_a6519522ad9a6f45e7a8d25d31392a977}{p};
329       \}
330       \textcolor{keywordflow}{else}
331       \{
332          \textcolor{comment}{//Memory allocation failed}
333          queueItem = \hyperlink{group__BSPDefine_ga070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL};
334       \}
335    \}
336 
337    \textcolor{comment}{//Failed to allocate memory?}
338    \textcolor{keywordflow}{if}(queueItem == \hyperlink{group__BSPDefine_ga070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL})
339       \textcolor{keywordflow}{return} \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689cac0a554045048d2fb61387cf735676f69}{ERROR\_OUT\_OF\_MEMORY};
340 
341    \textcolor{comment}{//Initialize next field}
342    queueItem->\hyperlink{struct__SocketQueueItem_a1160810dc2a18cd5fe63d9fc9dbf5f26}{next} = \hyperlink{group__BSPDefine_ga070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL};
343    \textcolor{comment}{//Record the source port number}
344    queueItem->\hyperlink{struct__SocketQueueItem_aae5da9b297543edc1b28914115ee928b}{srcPort} = \hyperlink{cpu__endian_8h_a9312c6eb72e64f748ae0d0e0dc3ec9b9}{ntohs}(header->srcPort);
345 
346 \textcolor{preprocessor}{#if (IPV4\_SUPPORT == ENABLED)}
347    \textcolor{comment}{//IPv4 remote address?}
348    \textcolor{keywordflow}{if}(pseudoHeader->\hyperlink{structIpPseudoHeader_aeff06b8d9c3e7e2ef3cdb8a3a14e8ad2}{length} == \textcolor{keyword}{sizeof}(\hyperlink{ipv4_8h_a0e92b64e038199f1bb6383f2a76f30b6}{Ipv4PseudoHeader}))
349    \{
350       \textcolor{comment}{//Save the source IPv4 address}
351       queueItem->\hyperlink{struct__SocketQueueItem_a35f1157ded7017ef108d8875d2cedfa7}{srcIpAddr}.\hyperlink{structIpAddr_ae61478bd1e79361fca7dd04a21aeb2f8}{length} = \textcolor{keyword}{sizeof}(\hyperlink{ipv4_8h_a411debb3d770caa0c06d3f73367da37f}{Ipv4Addr});
352       queueItem->\hyperlink{struct__SocketQueueItem_a35f1157ded7017ef108d8875d2cedfa7}{srcIpAddr}.\hyperlink{structIpAddr_a8de6f49cb0461f57c1eda49bb1088916}{ipv4Addr} = pseudoHeader->\hyperlink{structIpPseudoHeader_a4dd0d91580f30918dc7b5d5a430dba6a}{ipv4Data}.srcAddr;
353       \textcolor{comment}{//Save the destination IPv4 address}
354       queueItem->\hyperlink{struct__SocketQueueItem_a208025c884c682cf54c95b0d12f76962}{destIpAddr}.\hyperlink{structIpAddr_ae61478bd1e79361fca7dd04a21aeb2f8}{length} = \textcolor{keyword}{sizeof}(\hyperlink{ipv4_8h_a411debb3d770caa0c06d3f73367da37f}{Ipv4Addr});
355       queueItem->\hyperlink{struct__SocketQueueItem_a208025c884c682cf54c95b0d12f76962}{destIpAddr}.\hyperlink{structIpAddr_a8de6f49cb0461f57c1eda49bb1088916}{ipv4Addr} = pseudoHeader->\hyperlink{structIpPseudoHeader_a4dd0d91580f30918dc7b5d5a430dba6a}{ipv4Data}.destAddr;
356    \}
357 \textcolor{preprocessor}{#endif}
358 \textcolor{preprocessor}{#if (IPV6\_SUPPORT == ENABLED)}
359    \textcolor{comment}{//IPv6 remote address?}
360    \textcolor{keywordflow}{if}(pseudoHeader->\hyperlink{structIpPseudoHeader_aeff06b8d9c3e7e2ef3cdb8a3a14e8ad2}{length} == \textcolor{keyword}{sizeof}(\hyperlink{ipv6_8h_a68061e0a0b502d880cbe60b645cfa2b7}{Ipv6PseudoHeader}))
361    \{
362       \textcolor{comment}{//Save the source IPv6 address}
363       queueItem->\hyperlink{struct__SocketQueueItem_a35f1157ded7017ef108d8875d2cedfa7}{srcIpAddr}.\hyperlink{structIpAddr_ae61478bd1e79361fca7dd04a21aeb2f8}{length} = \textcolor{keyword}{sizeof}(\hyperlink{ipv6_8h_aed0cbc40c61ed5b4fb681ebc55237e89}{Ipv6Addr});
364       queueItem->\hyperlink{struct__SocketQueueItem_a35f1157ded7017ef108d8875d2cedfa7}{srcIpAddr}.\hyperlink{structIpAddr_a9bc2340a9c0bc5a0b8aa9695b74e2ee6}{ipv6Addr} = pseudoHeader->\hyperlink{structIpPseudoHeader_a5155846ca7e85218407a8374d035aab7}{ipv6Data}.srcAddr;
365       \textcolor{comment}{//Save the destination IPv6 address}
366       queueItem->\hyperlink{struct__SocketQueueItem_a208025c884c682cf54c95b0d12f76962}{destIpAddr}.\hyperlink{structIpAddr_ae61478bd1e79361fca7dd04a21aeb2f8}{length} = \textcolor{keyword}{sizeof}(\hyperlink{ipv6_8h_aed0cbc40c61ed5b4fb681ebc55237e89}{Ipv6Addr});
367       queueItem->\hyperlink{struct__SocketQueueItem_a208025c884c682cf54c95b0d12f76962}{destIpAddr}.\hyperlink{structIpAddr_a9bc2340a9c0bc5a0b8aa9695b74e2ee6}{ipv6Addr} = pseudoHeader->\hyperlink{structIpPseudoHeader_a5155846ca7e85218407a8374d035aab7}{ipv6Data}.destAddr;
368    \}
369 \textcolor{preprocessor}{#endif}
370 
371    \textcolor{comment}{//Offset to the payload}
372    queueItem->\hyperlink{struct__SocketQueueItem_a059508c5f38241e226e5d713c0fa98a1}{offset} = \textcolor{keyword}{sizeof}(\hyperlink{socket_8h_a3de9721a15d5f4c878df4e2dfccc078f}{SocketQueueItem});
373    \textcolor{comment}{//Copy the payload}
374    \hyperlink{net__mem_8c_a553a02631efd217192800ad3cdf9bbba}{netBufferCopy}(queueItem->\hyperlink{struct__SocketQueueItem_a31b5c1ca345095021d7af269deefdb42}{buffer}, queueItem->\hyperlink{struct__SocketQueueItem_a059508c5f38241e226e5d713c0fa98a1}{offset}, buffer, 
      \hyperlink{pic32mz_2isr__support_8h_a12a5aed8a193ebbf9a641104a310610d}{offset}, length);
375 
376    \textcolor{comment}{//Notify user that data is available}
377    \hyperlink{udp_8c_a9602ce39b27bfab384388170f1a25eab}{udpUpdateEvents}(socket);
378 
379    \textcolor{comment}{//Total number of UDP datagrams delivered to UDP users}
380    \hyperlink{mib2__module_8h_abac73a39224e47d597f3b461620d2119}{MIB2\_INC\_COUNTER32}(udpGroup.udpInDatagrams, 1);
381    \hyperlink{udp__mib__module_8h_a0b5fb70f36fbcc38256b934321dbfa46}{UDP\_MIB\_INC\_COUNTER32}(udpInDatagrams, 1);
382    \hyperlink{udp__mib__module_8h_aaf0c37c39883fffd2c1114448cc852df}{UDP\_MIB\_INC\_COUNTER64}(udpHCInDatagrams, 1);
383 
384    \textcolor{comment}{//Successful processing}
385    \textcolor{keywordflow}{return} \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689cabf350750d0d4fabd8954c0f1e9bbae94}{NO\_ERROR};
386 \}
\end{DoxyCode}
\mbox{\Hypertarget{udp_8h_ad04884594577e99c5f724e2929286ede}\label{udp_8h_ad04884594577e99c5f724e2929286ede}} 
\index{udp.\+h@{udp.\+h}!udp\+Receive\+Datagram@{udp\+Receive\+Datagram}}
\index{udp\+Receive\+Datagram@{udp\+Receive\+Datagram}!udp.\+h@{udp.\+h}}
\subsubsection{\texorpdfstring{udp\+Receive\+Datagram()}{udpReceiveDatagram()}}
{\footnotesize\ttfamily \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689c}{error\+\_\+t} udp\+Receive\+Datagram (\begin{DoxyParamCaption}\item[{\hyperlink{socket_8h_aa85acfb0fa336ef495e6ba87fb88fc48}{Socket} $\ast$}]{socket,  }\item[{\hyperlink{structIpAddr}{Ip\+Addr} $\ast$}]{src\+Ip\+Addr,  }\item[{\hyperlink{stdint_8h_a273cf69d639a59973b6019625df33e30}{uint16\+\_\+t} $\ast$}]{src\+Port,  }\item[{\hyperlink{structIpAddr}{Ip\+Addr} $\ast$}]{dest\+Ip\+Addr,  }\item[{void $\ast$}]{data,  }\item[{size\+\_\+t}]{size,  }\item[{size\+\_\+t $\ast$}]{received,  }\item[{\hyperlink{compiler__port_8h_a12a1e9b3ce141648783a82445d02b58d}{uint\+\_\+t}}]{flags }\end{DoxyParamCaption})}



Receive data from a U\+DP socket. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em socket} & Handle referencing the socket \\
\hline
\mbox{\tt out}  & {\em src\+Ip\+Addr} & Source IP address (optional) \\
\hline
\mbox{\tt out}  & {\em src\+Port} & Source port number (optional) \\
\hline
\mbox{\tt out}  & {\em dest\+Ip\+Addr} & Destination IP address (optional) \\
\hline
\mbox{\tt out}  & {\em data} & Buffer where to store the incoming data \\
\hline
\mbox{\tt in}  & {\em size} & Maximum number of bytes that can be received \\
\hline
\mbox{\tt out}  & {\em received} & Number of bytes that have been received \\
\hline
\mbox{\tt in}  & {\em flags} & Set of flags that influences the behavior of this function \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Error code 
\end{DoxyReturn}


Definition at line 622 of file udp.\+c.


\begin{DoxyCode}
624 \{
625    \hyperlink{struct__SocketQueueItem}{SocketQueueItem} *queueItem;
626 
627    \textcolor{comment}{//The SOCKET\_FLAG\_DONT\_WAIT enables non-blocking operation}
628    \textcolor{keywordflow}{if}(!(\hyperlink{tcp_8h_aa2585d779da0ab21273a8d92de9a0ebe}{flags} & \hyperlink{socket_8h_a36c1d45d435e2f0ebe609c31d0c2da16abbdb82a09cc4206db646e1b31ac3224e}{SOCKET\_FLAG\_DONT\_WAIT}))
629    \{
630       \textcolor{comment}{//The receive queue is empty?}
631       \textcolor{keywordflow}{if}(!\hyperlink{bsd__socket_8c_a3f8f3a2707fbc87fc30aa70f31f53218}{socket}->receiveQueue)
632       \{
633          \textcolor{comment}{//Set the events the application is interested in}
634          \hyperlink{bsd__socket_8c_a3f8f3a2707fbc87fc30aa70f31f53218}{socket}->eventMask = \hyperlink{socket_8h_add8a4c36456f478ab23bd4372aebde6ea72985d7e82625f037ca8a6734f49996c}{SOCKET\_EVENT\_RX\_READY};
635          \textcolor{comment}{//Reset the event object}
636          \hyperlink{os__port__chibios_8c_a9122a1cf258caef553a6b224ef8ef6bf}{osResetEvent}(&\hyperlink{bsd__socket_8c_a3f8f3a2707fbc87fc30aa70f31f53218}{socket}->event);
637 
638          \textcolor{comment}{//Release exclusive access}
639          \hyperlink{os__port__chibios_8c_a8e10e5b2c6d3877b5ba60e375ac45d79}{osReleaseMutex}(&\hyperlink{net_8c_afe31551ad26115fae8e575654346d441}{netMutex});
640          \textcolor{comment}{//Wait until an event is triggered}
641          \hyperlink{os__port__chibios_8c_a1dc707247e44dfefae5bec4a322fc78a}{osWaitForEvent}(&\hyperlink{bsd__socket_8c_a3f8f3a2707fbc87fc30aa70f31f53218}{socket}->event, \hyperlink{bsd__socket_8c_a3f8f3a2707fbc87fc30aa70f31f53218}{socket}->timeout);
642          \textcolor{comment}{//Get exclusive access}
643          \hyperlink{os__port__chibios_8c_a58485224df4bfa522246d55b35bbd83a}{osAcquireMutex}(&\hyperlink{net_8c_afe31551ad26115fae8e575654346d441}{netMutex});
644       \}
645    \}
646 
647    \textcolor{comment}{//Check whether the read operation timed out}
648    \textcolor{keywordflow}{if}(!\hyperlink{bsd__socket_8c_a3f8f3a2707fbc87fc30aa70f31f53218}{socket}->receiveQueue)
649    \{
650       \textcolor{comment}{//No data can be read}
651       *received = 0;
652       \textcolor{comment}{//Report a timeout error}
653       \textcolor{keywordflow}{return} \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689ca4d0f7be53b837f004379ac6bbd56f1e2}{ERROR\_TIMEOUT};
654    \}
655 
656    \textcolor{comment}{//Point to the first item in the receive queue}
657    queueItem = \hyperlink{bsd__socket_8c_a3f8f3a2707fbc87fc30aa70f31f53218}{socket}->receiveQueue;
658    \textcolor{comment}{//Copy data to user buffer}
659    *received = \hyperlink{net__mem_8c_af3ed1bc3f7d55f830cbbe6aa12e61af0}{netBufferRead}(\hyperlink{dtls__misc_8h_a5c239a1bb87b52b0f1d6d68c4749cd2a}{data}, queueItem->\hyperlink{struct__SocketQueueItem_a31b5c1ca345095021d7af269deefdb42}{buffer}, queueItem->
      \hyperlink{struct__SocketQueueItem_a059508c5f38241e226e5d713c0fa98a1}{offset}, size);
660 
661    \textcolor{comment}{//Save the source IP address}
662    \textcolor{keywordflow}{if}(srcIpAddr)
663       *srcIpAddr = queueItem->\hyperlink{struct__SocketQueueItem_a35f1157ded7017ef108d8875d2cedfa7}{srcIpAddr};
664    \textcolor{comment}{//Save the source port number}
665    \textcolor{keywordflow}{if}(\hyperlink{tcp_8h_a26ebbf4f65c3f6fd9959d9cecef5c9d8}{srcPort})
666       *\hyperlink{tcp_8h_a26ebbf4f65c3f6fd9959d9cecef5c9d8}{srcPort} = queueItem->\hyperlink{struct__SocketQueueItem_aae5da9b297543edc1b28914115ee928b}{srcPort};
667    \textcolor{comment}{//Save the destination IP address}
668    \textcolor{keywordflow}{if}(destIpAddr)
669       *destIpAddr = queueItem->\hyperlink{struct__SocketQueueItem_a208025c884c682cf54c95b0d12f76962}{destIpAddr};
670 
671    \textcolor{comment}{//If the SOCKET\_FLAG\_PEEK flag is set, the data is copied}
672    \textcolor{comment}{//into the buffer but is not removed from the input queue}
673    \textcolor{keywordflow}{if}(!(\hyperlink{tcp_8h_aa2585d779da0ab21273a8d92de9a0ebe}{flags} & \hyperlink{socket_8h_a36c1d45d435e2f0ebe609c31d0c2da16a46bda9fd028af8bdb3f0daa9e8a806f6}{SOCKET\_FLAG\_PEEK}))
674    \{
675       \textcolor{comment}{//Remove the item from the receive queue}
676       \hyperlink{bsd__socket_8c_a3f8f3a2707fbc87fc30aa70f31f53218}{socket}->receiveQueue = queueItem->\hyperlink{struct__SocketQueueItem_a1160810dc2a18cd5fe63d9fc9dbf5f26}{next};
677       \textcolor{comment}{//Deallocate memory buffer}
678       \hyperlink{net__mem_8c_aa33fc4dd2a71649194052f297c707d08}{netBufferFree}(queueItem->\hyperlink{struct__SocketQueueItem_a31b5c1ca345095021d7af269deefdb42}{buffer});
679    \}
680 
681    \textcolor{comment}{//Update the state of events}
682    \hyperlink{udp_8c_a9602ce39b27bfab384388170f1a25eab}{udpUpdateEvents}(\hyperlink{bsd__socket_8c_a3f8f3a2707fbc87fc30aa70f31f53218}{socket});
683 
684    \textcolor{comment}{//Successful read operation}
685    \textcolor{keywordflow}{return} \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689cabf350750d0d4fabd8954c0f1e9bbae94}{NO\_ERROR};
686 \}
\end{DoxyCode}
\mbox{\Hypertarget{udp_8h_a5db98abd9950a468a297a45640a6ba52}\label{udp_8h_a5db98abd9950a468a297a45640a6ba52}} 
\index{udp.\+h@{udp.\+h}!udp\+Send\+Datagram@{udp\+Send\+Datagram}}
\index{udp\+Send\+Datagram@{udp\+Send\+Datagram}!udp.\+h@{udp.\+h}}
\subsubsection{\texorpdfstring{udp\+Send\+Datagram()}{udpSendDatagram()}}
{\footnotesize\ttfamily \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689c}{error\+\_\+t} udp\+Send\+Datagram (\begin{DoxyParamCaption}\item[{\hyperlink{socket_8h_aa85acfb0fa336ef495e6ba87fb88fc48}{Socket} $\ast$}]{socket,  }\item[{const \hyperlink{structIpAddr}{Ip\+Addr} $\ast$}]{dest\+Ip\+Addr,  }\item[{\hyperlink{stdint_8h_a273cf69d639a59973b6019625df33e30}{uint16\+\_\+t}}]{dest\+Port,  }\item[{const void $\ast$}]{data,  }\item[{size\+\_\+t}]{length,  }\item[{size\+\_\+t $\ast$}]{written,  }\item[{\hyperlink{compiler__port_8h_a12a1e9b3ce141648783a82445d02b58d}{uint\+\_\+t}}]{flags }\end{DoxyParamCaption})}



Send a U\+DP datagram. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em socket} & Handle referencing the socket \\
\hline
\mbox{\tt in}  & {\em dest\+Ip\+Addr} & IP address of the target host \\
\hline
\mbox{\tt in}  & {\em dest\+Port} & Target port number \\
\hline
\mbox{\tt in}  & {\em data} & Pointer to data payload \\
\hline
\mbox{\tt in}  & {\em length} & Length of the payload data \\
\hline
\mbox{\tt out}  & {\em written} & Actual number of bytes written (optional parameter) \\
\hline
\mbox{\tt in}  & {\em flags} & Set of flags that influences the behavior of this function \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Error code 
\end{DoxyReturn}


Definition at line 401 of file udp.\+c.


\begin{DoxyCode}
404 \{
405    \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689c}{error\_t} error;
406    \textcolor{keywordtype}{size\_t} \hyperlink{pic32mz_2isr__support_8h_a12a5aed8a193ebbf9a641104a310610d}{offset};
407    \hyperlink{structNetBuffer}{NetBuffer} *buffer;
408 
409    \textcolor{comment}{//Ignore unused flags}
410    \hyperlink{tcp_8h_aa2585d779da0ab21273a8d92de9a0ebe}{flags} &= \hyperlink{socket_8h_a36c1d45d435e2f0ebe609c31d0c2da16a93ad8a933525cd2643183ec07e107236}{SOCKET\_FLAG\_DONT\_ROUTE};
411 
412    \textcolor{comment}{//Check whether the destination IP address is a multicast address}
413    \textcolor{keywordflow}{if}(\hyperlink{ip_8c_a8e993fccc7e63d23280530d3c263dea8}{ipIsMulticastAddr}(destIpAddr))
414       \hyperlink{tcp_8h_aa2585d779da0ab21273a8d92de9a0ebe}{flags} |= \hyperlink{bsd__socket_8c_a3f8f3a2707fbc87fc30aa70f31f53218}{socket}->multicastTtl;
415    \textcolor{keywordflow}{else}
416       \hyperlink{tcp_8h_aa2585d779da0ab21273a8d92de9a0ebe}{flags} |= \hyperlink{bsd__socket_8c_a3f8f3a2707fbc87fc30aa70f31f53218}{socket}->ttl;
417 
418    \textcolor{comment}{//Allocate a memory buffer to hold the UDP datagram}
419    buffer = \hyperlink{udp_8c_a2c65cad7c5665fe03f94364e7e52b2be}{udpAllocBuffer}(0, &offset);
420    \textcolor{comment}{//Failed to allocate buffer?}
421    \textcolor{keywordflow}{if}(buffer == \hyperlink{group__BSPDefine_ga070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL})
422       \textcolor{keywordflow}{return} \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689cac0a554045048d2fb61387cf735676f69}{ERROR\_OUT\_OF\_MEMORY};
423 
424    \textcolor{comment}{//Copy data payload}
425    error = \hyperlink{net__mem_8c_aceae1188a93321e1d4daed11bb8005df}{netBufferAppend}(buffer, \hyperlink{dtls__misc_8h_a5c239a1bb87b52b0f1d6d68c4749cd2a}{data}, \hyperlink{dtls__misc_8h_ab43ca82dd7fa2a0e56f941032ef324c4}{length});
426 
427    \textcolor{comment}{//Successful processing?}
428    \textcolor{keywordflow}{if}(!error)
429    \{
430       \textcolor{comment}{//Send UDP datagram}
431       error = \hyperlink{udp_8c_a72a529f723ed1b75bfe98d0708f28eb1}{udpSendDatagramEx}(\hyperlink{bsd__socket_8c_a3f8f3a2707fbc87fc30aa70f31f53218}{socket}->interface, \hyperlink{group__BSPDefine_ga070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL}, 
      \hyperlink{bsd__socket_8c_a3f8f3a2707fbc87fc30aa70f31f53218}{socket}->localPort,
432          destIpAddr, \hyperlink{tcp_8h_af15d713ad2bc92686abfa6ab012b5039}{destPort}, buffer, offset, \hyperlink{tcp_8h_aa2585d779da0ab21273a8d92de9a0ebe}{flags});
433    \}
434 
435    \textcolor{comment}{//Successful processing?}
436    \textcolor{keywordflow}{if}(!error)
437    \{
438       \textcolor{comment}{//Total number of data bytes successfully transmitted}
439       \textcolor{keywordflow}{if}(written != \hyperlink{group__BSPDefine_ga070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL})
440          *written = \hyperlink{dtls__misc_8h_ab43ca82dd7fa2a0e56f941032ef324c4}{length};
441    \}
442 
443    \textcolor{comment}{//Free previously allocated memory}
444    \hyperlink{net__mem_8c_aa33fc4dd2a71649194052f297c707d08}{netBufferFree}(buffer);
445    \textcolor{comment}{//Return status code}
446    \textcolor{keywordflow}{return} error;
447 \}
\end{DoxyCode}
\mbox{\Hypertarget{udp_8h_a72a529f723ed1b75bfe98d0708f28eb1}\label{udp_8h_a72a529f723ed1b75bfe98d0708f28eb1}} 
\index{udp.\+h@{udp.\+h}!udp\+Send\+Datagram\+Ex@{udp\+Send\+Datagram\+Ex}}
\index{udp\+Send\+Datagram\+Ex@{udp\+Send\+Datagram\+Ex}!udp.\+h@{udp.\+h}}
\subsubsection{\texorpdfstring{udp\+Send\+Datagram\+Ex()}{udpSendDatagramEx()}}
{\footnotesize\ttfamily \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689c}{error\+\_\+t} udp\+Send\+Datagram\+Ex (\begin{DoxyParamCaption}\item[{\hyperlink{net_8h_a2234db8911a1148c9159979d8f5e0d6b}{Net\+Interface} $\ast$}]{interface,  }\item[{const \hyperlink{structIpAddr}{Ip\+Addr} $\ast$}]{src\+Ip\+Addr,  }\item[{\hyperlink{stdint_8h_a273cf69d639a59973b6019625df33e30}{uint16\+\_\+t}}]{src\+Port,  }\item[{const \hyperlink{structIpAddr}{Ip\+Addr} $\ast$}]{dest\+Ip\+Addr,  }\item[{\hyperlink{stdint_8h_a273cf69d639a59973b6019625df33e30}{uint16\+\_\+t}}]{dest\+Port,  }\item[{\hyperlink{structNetBuffer}{Net\+Buffer} $\ast$}]{buffer,  }\item[{size\+\_\+t}]{offset,  }\item[{\hyperlink{compiler__port_8h_a12a1e9b3ce141648783a82445d02b58d}{uint\+\_\+t}}]{flags }\end{DoxyParamCaption})}



Send a U\+DP datagram (raw interface) 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em interface} & Underlying network interface \\
\hline
\mbox{\tt in}  & {\em src\+Ip\+Addr} & Source IP address (optional parameter) \\
\hline
\mbox{\tt in}  & {\em src\+Port} & Source port \\
\hline
\mbox{\tt in}  & {\em dest\+Ip\+Addr} & IP address of the target host \\
\hline
\mbox{\tt in}  & {\em dest\+Port} & Target port number \\
\hline
\mbox{\tt in}  & {\em buffer} & Multi-\/part buffer containing the payload \\
\hline
\mbox{\tt in}  & {\em offset} & Offset to the first payload byte \\
\hline
\mbox{\tt in}  & {\em flags} & Set of flags that influences the behavior of this function \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Error code 
\end{DoxyReturn}


Definition at line 463 of file udp.\+c.


\begin{DoxyCode}
466 \{
467    \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689c}{error\_t} error;
468    \textcolor{keywordtype}{size\_t} \hyperlink{dtls__misc_8h_ab43ca82dd7fa2a0e56f941032ef324c4}{length};
469    \hyperlink{udp_8h_a6877bae1da8326482f5e311875e52bce}{UdpHeader} *header;
470    \hyperlink{structIpPseudoHeader}{IpPseudoHeader} pseudoHeader;
471 
472    \textcolor{comment}{//Make room for the UDP header}
473    \hyperlink{pic32mz_2isr__support_8h_a12a5aed8a193ebbf9a641104a310610d}{offset} -= \textcolor{keyword}{sizeof}(\hyperlink{udp_8h_a6877bae1da8326482f5e311875e52bce}{UdpHeader});
474    \textcolor{comment}{//Retrieve the length of the datagram}
475    length = \hyperlink{net__mem_8c_ac9dbcd9e28e61d8f4f6d2e9af2607b68}{netBufferGetLength}(buffer) - \hyperlink{pic32mz_2isr__support_8h_a12a5aed8a193ebbf9a641104a310610d}{offset};
476 
477    \textcolor{comment}{//Point to the UDP header}
478    header = \hyperlink{net__mem_8c_a20d30c9db547b3b2743368b589cf482b}{netBufferAt}(buffer, \hyperlink{pic32mz_2isr__support_8h_a12a5aed8a193ebbf9a641104a310610d}{offset});
479    \textcolor{comment}{//Sanity check}
480    \textcolor{keywordflow}{if}(header == \hyperlink{group__BSPDefine_ga070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL})
481       \textcolor{keywordflow}{return} \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689cae9be6449970fca5714ab9957b16562a5}{ERROR\_FAILURE};
482 
483    \textcolor{comment}{//Format UDP header}
484    header->srcPort = \hyperlink{cpu__endian_8h_a800cdbf435a85a9b3ad4f0edc518472a}{htons}(\hyperlink{tcp_8h_a26ebbf4f65c3f6fd9959d9cecef5c9d8}{srcPort});
485    header->destPort = \hyperlink{cpu__endian_8h_a800cdbf435a85a9b3ad4f0edc518472a}{htons}(\hyperlink{tcp_8h_af15d713ad2bc92686abfa6ab012b5039}{destPort});
486    header->length = \hyperlink{cpu__endian_8h_a800cdbf435a85a9b3ad4f0edc518472a}{htons}(length);
487    header->checksum = 0;
488 
489 \textcolor{preprocessor}{#if (IPV4\_SUPPORT == ENABLED)}
490    \textcolor{comment}{//Destination address is an IPv4 address?}
491    \textcolor{keywordflow}{if}(destIpAddr->\hyperlink{structIpAddr_ae61478bd1e79361fca7dd04a21aeb2f8}{length} == \textcolor{keyword}{sizeof}(\hyperlink{ipv4_8h_a411debb3d770caa0c06d3f73367da37f}{Ipv4Addr}))
492    \{
493       \textcolor{comment}{//Valid source IP address?}
494       \textcolor{keywordflow}{if}(srcIpAddr != \hyperlink{group__BSPDefine_ga070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL} && srcIpAddr->\hyperlink{structIpAddr_ae61478bd1e79361fca7dd04a21aeb2f8}{length} == \textcolor{keyword}{sizeof}(\hyperlink{ipv4_8h_a411debb3d770caa0c06d3f73367da37f}{Ipv4Addr}))
495       \{
496          \textcolor{comment}{//Copy the source IP address}
497          pseudoHeader.\hyperlink{structIpPseudoHeader_a4dd0d91580f30918dc7b5d5a430dba6a}{ipv4Data}.srcAddr = srcIpAddr->\hyperlink{structIpAddr_a8de6f49cb0461f57c1eda49bb1088916}{ipv4Addr};
498       \}
499       \textcolor{keywordflow}{else}
500       \{
501          \hyperlink{ipv4_8h_a411debb3d770caa0c06d3f73367da37f}{Ipv4Addr} \hyperlink{mib__common_8h_a3860e959b1b7dd73686a6e11424805e2}{ipAddr};
502 
503          \textcolor{comment}{//Select the source IPv4 address and the relevant network interface}
504          \textcolor{comment}{//to use when sending data to the specified destination host}
505          error = \hyperlink{ipv4__misc_8c_af1ec532996ca54986f87e67a354e03e1}{ipv4SelectSourceAddr}(&interface, destIpAddr->
      \hyperlink{structIpAddr_a8de6f49cb0461f57c1eda49bb1088916}{ipv4Addr},
506             &ipAddr);
507 
508          \textcolor{comment}{//Check status code}
509          \textcolor{keywordflow}{if}(!error)
510          \{
511             \textcolor{comment}{//Copy the resulting source IP address}
512             pseudoHeader.\hyperlink{structIpPseudoHeader_a4dd0d91580f30918dc7b5d5a430dba6a}{ipv4Data}.srcAddr = \hyperlink{mib__common_8h_a3860e959b1b7dd73686a6e11424805e2}{ipAddr};
513          \}
514          \textcolor{keywordflow}{else}
515          \{
516             \textcolor{comment}{//Handle the special case where the destination address is the}
517             \textcolor{comment}{//broadcast address}
518             \textcolor{keywordflow}{if}(destIpAddr->\hyperlink{structIpAddr_a8de6f49cb0461f57c1eda49bb1088916}{ipv4Addr} == \hyperlink{ipv4_8h_a1b7329007670c2e728ddaa434a01c992}{IPV4\_BROADCAST\_ADDR} && interface != 
      \hyperlink{group__BSPDefine_ga070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL})
519             \{
520                \textcolor{comment}{//Use the unspecified address as source address}
521                pseudoHeader.\hyperlink{structIpPseudoHeader_a4dd0d91580f30918dc7b5d5a430dba6a}{ipv4Data}.srcAddr = \hyperlink{ipv4_8h_aa9d277a6ff68d361eaf48d6af73e78e8}{IPV4\_UNSPECIFIED\_ADDR};
522             \}
523             \textcolor{keywordflow}{else}
524             \{
525                \textcolor{comment}{//Source address selection failed}
526                \textcolor{keywordflow}{return} error;
527             \}
528          \}
529       \}
530 
531       \textcolor{comment}{//Format IPv4 pseudo header}
532       pseudoHeader.\hyperlink{structIpPseudoHeader_aeff06b8d9c3e7e2ef3cdb8a3a14e8ad2}{length} = \textcolor{keyword}{sizeof}(\hyperlink{ipv4_8h_a0e92b64e038199f1bb6383f2a76f30b6}{Ipv4PseudoHeader});
533       pseudoHeader.\hyperlink{structIpPseudoHeader_a4dd0d91580f30918dc7b5d5a430dba6a}{ipv4Data}.destAddr = destIpAddr->\hyperlink{structIpAddr_a8de6f49cb0461f57c1eda49bb1088916}{ipv4Addr};
534       pseudoHeader.\hyperlink{structIpPseudoHeader_a4dd0d91580f30918dc7b5d5a430dba6a}{ipv4Data}.reserved = 0;
535       pseudoHeader.\hyperlink{structIpPseudoHeader_a4dd0d91580f30918dc7b5d5a430dba6a}{ipv4Data}.protocol = \hyperlink{ipv4_8h_a113cd13f7321e81a3f55491fa3b7db23ab63073e81b0f3079339586add9183417}{IPV4\_PROTOCOL\_UDP};
536       pseudoHeader.\hyperlink{structIpPseudoHeader_a4dd0d91580f30918dc7b5d5a430dba6a}{ipv4Data}.length = \hyperlink{cpu__endian_8h_a800cdbf435a85a9b3ad4f0edc518472a}{htons}(length);
537 
538       \textcolor{comment}{//Calculate UDP header checksum}
539       header->checksum = \hyperlink{ip_8c_a9ec0593d9dbb2adf3e67894c0349cef3}{ipCalcUpperLayerChecksumEx}(&pseudoHeader.
      \hyperlink{structIpPseudoHeader_a4dd0d91580f30918dc7b5d5a430dba6a}{ipv4Data},
540          \textcolor{keyword}{sizeof}(\hyperlink{ipv4_8h_a0e92b64e038199f1bb6383f2a76f30b6}{Ipv4PseudoHeader}), buffer, \hyperlink{pic32mz_2isr__support_8h_a12a5aed8a193ebbf9a641104a310610d}{offset}, length);
541    \}
542    \textcolor{keywordflow}{else}
543 \textcolor{preprocessor}{#endif}
544 \textcolor{preprocessor}{#if (IPV6\_SUPPORT == ENABLED)}
545    \textcolor{comment}{//Destination address is an IPv6 address?}
546    \textcolor{keywordflow}{if}(destIpAddr->\hyperlink{structIpAddr_ae61478bd1e79361fca7dd04a21aeb2f8}{length} == \textcolor{keyword}{sizeof}(\hyperlink{ipv6_8h_aed0cbc40c61ed5b4fb681ebc55237e89}{Ipv6Addr}))
547    \{
548       \textcolor{comment}{//Valid source IP address?}
549       \textcolor{keywordflow}{if}(srcIpAddr != \hyperlink{group__BSPDefine_ga070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL} && srcIpAddr->\hyperlink{structIpAddr_ae61478bd1e79361fca7dd04a21aeb2f8}{length} == \textcolor{keyword}{sizeof}(\hyperlink{ipv6_8h_aed0cbc40c61ed5b4fb681ebc55237e89}{Ipv6Addr}))
550       \{
551          \textcolor{comment}{//Copy the source IP address}
552          pseudoHeader.\hyperlink{structIpPseudoHeader_a5155846ca7e85218407a8374d035aab7}{ipv6Data}.srcAddr = srcIpAddr->\hyperlink{structIpAddr_a9bc2340a9c0bc5a0b8aa9695b74e2ee6}{ipv6Addr};
553       \}
554       \textcolor{keywordflow}{else}
555       \{
556          \textcolor{comment}{//Select the source IPv6 address and the relevant network interface}
557          \textcolor{comment}{//to use when sending data to the specified destination host}
558          error = \hyperlink{ipv6__misc_8c_a1d69e11a455ee8895ec67061f554a174}{ipv6SelectSourceAddr}(&interface, &destIpAddr->
      \hyperlink{structIpAddr_a9bc2340a9c0bc5a0b8aa9695b74e2ee6}{ipv6Addr},
559             &pseudoHeader.\hyperlink{structIpPseudoHeader_a5155846ca7e85218407a8374d035aab7}{ipv6Data}.srcAddr);
560          \textcolor{comment}{//Any error to report?}
561          \textcolor{keywordflow}{if}(error)
562             \textcolor{keywordflow}{return} error;
563       \}
564 
565       \textcolor{comment}{//Format IPv6 pseudo header}
566       pseudoHeader.\hyperlink{structIpPseudoHeader_aeff06b8d9c3e7e2ef3cdb8a3a14e8ad2}{length} = \textcolor{keyword}{sizeof}(\hyperlink{ipv6_8h_a68061e0a0b502d880cbe60b645cfa2b7}{Ipv6PseudoHeader});
567       pseudoHeader.\hyperlink{structIpPseudoHeader_a5155846ca7e85218407a8374d035aab7}{ipv6Data}.destAddr = destIpAddr->\hyperlink{structIpAddr_a9bc2340a9c0bc5a0b8aa9695b74e2ee6}{ipv6Addr};
568       pseudoHeader.\hyperlink{structIpPseudoHeader_a5155846ca7e85218407a8374d035aab7}{ipv6Data}.length = \hyperlink{cpu__endian_8h_a63baf217625b15caa7246af75b027380}{htonl}(length);
569       pseudoHeader.\hyperlink{structIpPseudoHeader_a5155846ca7e85218407a8374d035aab7}{ipv6Data}.reserved = 0;
570       pseudoHeader.\hyperlink{structIpPseudoHeader_a5155846ca7e85218407a8374d035aab7}{ipv6Data}.nextHeader = \hyperlink{ipv6_8h_a551bec2628dfcc3b67c0fff52e486fa5a539b1f56e5b25e0a567e668d1c8ed5a9}{IPV6\_UDP\_HEADER};
571 
572       \textcolor{comment}{//Calculate UDP header checksum}
573       header->checksum = \hyperlink{ip_8c_a9ec0593d9dbb2adf3e67894c0349cef3}{ipCalcUpperLayerChecksumEx}(&pseudoHeader.
      \hyperlink{structIpPseudoHeader_a5155846ca7e85218407a8374d035aab7}{ipv6Data},
574          \textcolor{keyword}{sizeof}(\hyperlink{ipv6_8h_a68061e0a0b502d880cbe60b645cfa2b7}{Ipv6PseudoHeader}), buffer, \hyperlink{pic32mz_2isr__support_8h_a12a5aed8a193ebbf9a641104a310610d}{offset}, length);
575    \}
576    \textcolor{keywordflow}{else}
577 \textcolor{preprocessor}{#endif}
578    \textcolor{comment}{//Invalid destination address?}
579    \{
580       \textcolor{comment}{//An internal error has occurred}
581       \textcolor{keywordflow}{return} \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689cae9be6449970fca5714ab9957b16562a5}{ERROR\_FAILURE};
582    \}
583 
584    \textcolor{comment}{//If the computed checksum is zero, it is transmitted as all ones. An all}
585    \textcolor{comment}{//zero transmitted checksum value means that the transmitter generated no}
586    \textcolor{comment}{//checksum}
587    \textcolor{keywordflow}{if}(header->checksum == 0x0000)
588    \{
589       header->checksum = 0xFFFF;
590    \}
591 
592    \textcolor{comment}{//Total number of UDP datagrams sent from this entity}
593    \hyperlink{mib2__module_8h_abac73a39224e47d597f3b461620d2119}{MIB2\_INC\_COUNTER32}(udpGroup.udpOutDatagrams, 1);
594    \hyperlink{udp__mib__module_8h_a0b5fb70f36fbcc38256b934321dbfa46}{UDP\_MIB\_INC\_COUNTER32}(udpOutDatagrams, 1);
595    \hyperlink{udp__mib__module_8h_aaf0c37c39883fffd2c1114448cc852df}{UDP\_MIB\_INC\_COUNTER64}(udpHCOutDatagrams, 1);
596 
597    \textcolor{comment}{//Debug message}
598    \hyperlink{debug_8h_a7339bfd784193a5c79efcef2eeb2d6df}{TRACE\_INFO}(\textcolor{stringliteral}{"Sending UDP datagram (%"} \hyperlink{compiler__port_8h_a2b7b0557dc6cd786df02dafbb51f5292}{PRIuSIZE} \textcolor{stringliteral}{" bytes)\(\backslash\)r\(\backslash\)n"}, length);
599    \textcolor{comment}{//Dump UDP header contents for debugging purpose}
600    \hyperlink{udp_8c_a377b3fa5757c72f4d7efe1c43027b02e}{udpDumpHeader}(header);
601 
602    \textcolor{comment}{//Send UDP datagram}
603    error = \hyperlink{ip_8c_ac39710faa96e88364ef7007fee711c5e}{ipSendDatagram}(interface, &pseudoHeader, buffer, \hyperlink{pic32mz_2isr__support_8h_a12a5aed8a193ebbf9a641104a310610d}{offset}, 
      \hyperlink{tcp_8h_aa2585d779da0ab21273a8d92de9a0ebe}{flags});
604    \textcolor{comment}{//Return status code}
605    \textcolor{keywordflow}{return} error;
606 \}
\end{DoxyCode}
\mbox{\Hypertarget{udp_8h_a9602ce39b27bfab384388170f1a25eab}\label{udp_8h_a9602ce39b27bfab384388170f1a25eab}} 
\index{udp.\+h@{udp.\+h}!udp\+Update\+Events@{udp\+Update\+Events}}
\index{udp\+Update\+Events@{udp\+Update\+Events}!udp.\+h@{udp.\+h}}
\subsubsection{\texorpdfstring{udp\+Update\+Events()}{udpUpdateEvents()}}
{\footnotesize\ttfamily void udp\+Update\+Events (\begin{DoxyParamCaption}\item[{\hyperlink{socket_8h_aa85acfb0fa336ef495e6ba87fb88fc48}{Socket} $\ast$}]{socket }\end{DoxyParamCaption})}



Update U\+DP related events. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em socket} & Handle referencing the socket \\
\hline
\end{DoxyParams}


Definition at line 720 of file udp.\+c.


\begin{DoxyCode}
721 \{
722    \textcolor{comment}{//Clear event flags}
723    \hyperlink{bsd__socket_8c_a3f8f3a2707fbc87fc30aa70f31f53218}{socket}->eventFlags = 0;
724 
725    \textcolor{comment}{//The socket is marked as readable if a datagram is pending in the queue}
726    \textcolor{keywordflow}{if}(\hyperlink{bsd__socket_8c_a3f8f3a2707fbc87fc30aa70f31f53218}{socket}->receiveQueue)
727       \hyperlink{bsd__socket_8c_a3f8f3a2707fbc87fc30aa70f31f53218}{socket}->eventFlags |= \hyperlink{socket_8h_add8a4c36456f478ab23bd4372aebde6ea72985d7e82625f037ca8a6734f49996c}{SOCKET\_EVENT\_RX\_READY};
728 
729    \textcolor{comment}{//Check whether the socket is bound to a particular network interface}
730    \textcolor{keywordflow}{if}(\hyperlink{bsd__socket_8c_a3f8f3a2707fbc87fc30aa70f31f53218}{socket}->interface != \hyperlink{group__BSPDefine_ga070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL})
731    \{
732       \textcolor{comment}{//Handle link up and link down events}
733       \textcolor{keywordflow}{if}(\hyperlink{bsd__socket_8c_a3f8f3a2707fbc87fc30aa70f31f53218}{socket}->interface->linkState)
734          \hyperlink{bsd__socket_8c_a3f8f3a2707fbc87fc30aa70f31f53218}{socket}->eventFlags |= \hyperlink{socket_8h_add8a4c36456f478ab23bd4372aebde6eafe461e492995403ea5964dd740210c2e}{SOCKET\_EVENT\_LINK\_UP};
735       \textcolor{keywordflow}{else}
736          \hyperlink{bsd__socket_8c_a3f8f3a2707fbc87fc30aa70f31f53218}{socket}->eventFlags |= \hyperlink{socket_8h_add8a4c36456f478ab23bd4372aebde6eab971918883e240c24d301f7eb44f08cd}{SOCKET\_EVENT\_LINK\_DOWN};
737    \}
738 
739    \textcolor{comment}{//Mask unused events}
740    \hyperlink{bsd__socket_8c_a3f8f3a2707fbc87fc30aa70f31f53218}{socket}->eventFlags &= \hyperlink{bsd__socket_8c_a3f8f3a2707fbc87fc30aa70f31f53218}{socket}->eventMask;
741 
742    \textcolor{comment}{//Any event to signal?}
743    \textcolor{keywordflow}{if}(\hyperlink{bsd__socket_8c_a3f8f3a2707fbc87fc30aa70f31f53218}{socket}->eventFlags)
744    \{
745       \textcolor{comment}{//Unblock I/O operations currently in waiting state}
746       \hyperlink{os__port__chibios_8c_afc1d64fc90afbf03baecfa636bb99ff7}{osSetEvent}(&\hyperlink{bsd__socket_8c_a3f8f3a2707fbc87fc30aa70f31f53218}{socket}->event);
747 
748       \textcolor{comment}{//Set user event to signaled state if necessary}
749       \textcolor{keywordflow}{if}(\hyperlink{bsd__socket_8c_a3f8f3a2707fbc87fc30aa70f31f53218}{socket}->userEvent != \hyperlink{group__BSPDefine_ga070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL})
750          \hyperlink{os__port__chibios_8c_afc1d64fc90afbf03baecfa636bb99ff7}{osSetEvent}(\hyperlink{bsd__socket_8c_a3f8f3a2707fbc87fc30aa70f31f53218}{socket}->userEvent);
751    \}
752 \}
\end{DoxyCode}


\subsection{Variable Documentation}
\mbox{\Hypertarget{udp_8h_a6796c847bbd16253ce2538754c250bd6}\label{udp_8h_a6796c847bbd16253ce2538754c250bd6}} 
\index{udp.\+h@{udp.\+h}!checksum@{checksum}}
\index{checksum@{checksum}!udp.\+h@{udp.\+h}}
\subsubsection{\texorpdfstring{checksum}{checksum}}
{\footnotesize\ttfamily \hyperlink{stdint_8h_a273cf69d639a59973b6019625df33e30}{uint16\+\_\+t} checksum}



Definition at line 81 of file udp.\+h.

\mbox{\Hypertarget{udp_8h_a5c239a1bb87b52b0f1d6d68c4749cd2a}\label{udp_8h_a5c239a1bb87b52b0f1d6d68c4749cd2a}} 
\index{udp.\+h@{udp.\+h}!data@{data}}
\index{data@{data}!udp.\+h@{udp.\+h}}
\subsubsection{\texorpdfstring{data}{data}}
{\footnotesize\ttfamily \hyperlink{stdint_8h_aba7bc1797add20fe3efdf37ced1182c5}{uint8\+\_\+t} data\mbox{[}$\,$\mbox{]}}



Definition at line 82 of file udp.\+h.

\mbox{\Hypertarget{udp_8h_af15d713ad2bc92686abfa6ab012b5039}\label{udp_8h_af15d713ad2bc92686abfa6ab012b5039}} 
\index{udp.\+h@{udp.\+h}!dest\+Port@{dest\+Port}}
\index{dest\+Port@{dest\+Port}!udp.\+h@{udp.\+h}}
\subsubsection{\texorpdfstring{dest\+Port}{destPort}}
{\footnotesize\ttfamily \hyperlink{stdint_8h_a273cf69d639a59973b6019625df33e30}{uint16\+\_\+t} dest\+Port}



Definition at line 79 of file udp.\+h.

\mbox{\Hypertarget{udp_8h_a1892eba2086d12ac2b09005aeb09ea3b}\label{udp_8h_a1892eba2086d12ac2b09005aeb09ea3b}} 
\index{udp.\+h@{udp.\+h}!length@{length}}
\index{length@{length}!udp.\+h@{udp.\+h}}
\subsubsection{\texorpdfstring{length}{length}}
{\footnotesize\ttfamily \hyperlink{stdint_8h_a273cf69d639a59973b6019625df33e30}{uint16\+\_\+t} length}



Definition at line 80 of file udp.\+h.

\mbox{\Hypertarget{udp_8h_a26ebbf4f65c3f6fd9959d9cecef5c9d8}\label{udp_8h_a26ebbf4f65c3f6fd9959d9cecef5c9d8}} 
\index{udp.\+h@{udp.\+h}!src\+Port@{src\+Port}}
\index{src\+Port@{src\+Port}!udp.\+h@{udp.\+h}}
\subsubsection{\texorpdfstring{src\+Port}{srcPort}}
{\footnotesize\ttfamily \hyperlink{stdint_8h_a273cf69d639a59973b6019625df33e30}{uint16\+\_\+t} src\+Port}



Definition at line 78 of file udp.\+h.

\mbox{\Hypertarget{udp_8h_a34b300a8e9e83b714eb8304370c619b1}\label{udp_8h_a34b300a8e9e83b714eb8304370c619b1}} 
\index{udp.\+h@{udp.\+h}!udp\+Callback\+Mutex@{udp\+Callback\+Mutex}}
\index{udp\+Callback\+Mutex@{udp\+Callback\+Mutex}!udp.\+h@{udp.\+h}}
\subsubsection{\texorpdfstring{udp\+Callback\+Mutex}{udpCallbackMutex}}
{\footnotesize\ttfamily \hyperlink{structOsMutex}{Os\+Mutex} udp\+Callback\+Mutex}



Definition at line 54 of file udp.\+c.

\mbox{\Hypertarget{udp_8h_abb1f00a80979f87b4f05fc69b3a439a8}\label{udp_8h_abb1f00a80979f87b4f05fc69b3a439a8}} 
\index{udp.\+h@{udp.\+h}!udp\+Callback\+Table@{udp\+Callback\+Table}}
\index{udp\+Callback\+Table@{udp\+Callback\+Table}!udp.\+h@{udp.\+h}}
\subsubsection{\texorpdfstring{udp\+Callback\+Table}{udpCallbackTable}}
{\footnotesize\ttfamily \hyperlink{structUdpRxCallbackDesc}{Udp\+Rx\+Callback\+Desc} udp\+Callback\+Table\mbox{[}\hyperlink{udp_8h_ac8ac25da0395f880ccb2af76bf8bf88e}{U\+D\+P\+\_\+\+C\+A\+L\+L\+B\+A\+C\+K\+\_\+\+T\+A\+B\+L\+E\+\_\+\+S\+I\+ZE}\mbox{]}}



Definition at line 56 of file udp.\+c.

