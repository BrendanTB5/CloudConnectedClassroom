\hypertarget{date__time_8c}{}\section{common/date\+\_\+time.c File Reference}
\label{date__time_8c}\index{common/date\+\_\+time.\+c@{common/date\+\_\+time.\+c}}


Date and time management.  


{\ttfamily \#include $<$stdio.\+h$>$}\newline
{\ttfamily \#include $<$string.\+h$>$}\newline
{\ttfamily \#include \char`\"{}date\+\_\+time.\+h\char`\"{}}\newline
\subsection*{Functions}
\begin{DoxyCompactItemize}
\item 
const \hyperlink{compiler__port_8h_a40bb5262bf908c328fbcfbe5d29d0201}{char\+\_\+t} $\ast$ \hyperlink{date__time_8c_ae15b3e664208ca7e4d6983921865cd74}{format\+System\+Time} (\hyperlink{compiler__port_8h_ae3e32a98d431a02106616da3071832dd}{systime\+\_\+t} \hyperlink{dhcpv6__common_8h_ae73654f333e4363463ad8c594eca1905}{time}, \hyperlink{compiler__port_8h_a40bb5262bf908c328fbcfbe5d29d0201}{char\+\_\+t} $\ast$str)
\begin{DoxyCompactList}\small\item\em Format system time. \end{DoxyCompactList}\item 
const \hyperlink{compiler__port_8h_a40bb5262bf908c328fbcfbe5d29d0201}{char\+\_\+t} $\ast$ \hyperlink{date__time_8c_ae3ad6a6f57fc1b212ef368cdfe95a7f0}{format\+Date} (const \hyperlink{structDateTime}{Date\+Time} $\ast$date, \hyperlink{compiler__port_8h_a40bb5262bf908c328fbcfbe5d29d0201}{char\+\_\+t} $\ast$str)
\begin{DoxyCompactList}\small\item\em Format date. \end{DoxyCompactList}\item 
void \hyperlink{date__time_8c_ababa139473966337e89aff65e484e7e2}{get\+Current\+Date} (\hyperlink{structDateTime}{Date\+Time} $\ast$date)
\begin{DoxyCompactList}\small\item\em Get current date and time. \end{DoxyCompactList}\item 
time\+\_\+t \hyperlink{date__time_8c_a5ea5d60e1fafcd89917ee76d57981aae}{get\+Current\+Unix\+Time} (void)
\begin{DoxyCompactList}\small\item\em Get current time. \end{DoxyCompactList}\item 
void \hyperlink{date__time_8c_adf6672c66ed1b93ea8bba616ae630a4b}{convert\+Unix\+Time\+To\+Date} (time\+\_\+t \hyperlink{llmnr__common_8h_a2d03918f4f9edabaf3c9f43abcc2d85b}{t}, \hyperlink{structDateTime}{Date\+Time} $\ast$date)
\begin{DoxyCompactList}\small\item\em Convert Unix timestamp to date. \end{DoxyCompactList}\item 
time\+\_\+t \hyperlink{date__time_8c_a399c87076e1ac03c9542ba1544c06f21}{convert\+Date\+To\+Unix\+Time} (const \hyperlink{structDateTime}{Date\+Time} $\ast$date)
\begin{DoxyCompactList}\small\item\em Convert date to Unix timestamp. \end{DoxyCompactList}\item 
\hyperlink{compiler__port_8h_a022c65af7f6c8d3947e8a37d64db6ad6}{int\+\_\+t} \hyperlink{date__time_8c_a2ed68acb2c0d1aa6d43a1f2ad835ee87}{compare\+Date\+Time} (const \hyperlink{structDateTime}{Date\+Time} $\ast$date1, const \hyperlink{structDateTime}{Date\+Time} $\ast$date2)
\begin{DoxyCompactList}\small\item\em Compare dates. \end{DoxyCompactList}\item 
\hyperlink{stdint_8h_aba7bc1797add20fe3efdf37ced1182c5}{uint8\+\_\+t} \hyperlink{date__time_8c_a06b62b5d18f2877000392ea33718676e}{compute\+Day\+Of\+Week} (\hyperlink{stdint_8h_a273cf69d639a59973b6019625df33e30}{uint16\+\_\+t} y, \hyperlink{stdint_8h_aba7bc1797add20fe3efdf37ced1182c5}{uint8\+\_\+t} \hyperlink{ndp_8h_a6b3284d8492267a77ca46948daf5545e}{m}, \hyperlink{stdint_8h_aba7bc1797add20fe3efdf37ced1182c5}{uint8\+\_\+t} d)
\begin{DoxyCompactList}\small\item\em Calculate day of week. \end{DoxyCompactList}\end{DoxyCompactItemize}
\subsection*{Variables}
\begin{DoxyCompactItemize}
\item 
static const char \hyperlink{date__time_8c_a8a438c8c7610170104d5b48b90f3ada1}{days} \mbox{[}8\mbox{]}\mbox{[}10\mbox{]}
\item 
static const char \hyperlink{date__time_8c_a28e16ae8240a8338b89ff5929f9b274f}{months} \mbox{[}13\mbox{]}\mbox{[}10\mbox{]}
\end{DoxyCompactItemize}


\subsection{Detailed Description}
Date and time management. 

\hypertarget{pic32mz__ef__curiosity_8h_License}{}\subsection{License}\label{pic32mz__ef__curiosity_8h_License}
S\+P\+D\+X-\/\+License-\/\+Identifier\+: G\+P\+L-\/2.\+0-\/or-\/later

Copyright (C) 2010-\/2019 Oryx Embedded S\+A\+RL. All rights reserved.

This program is free software; you can redistribute it and/or modify it under the terms of the G\+NU General Public License as published by the Free Software Foundation; either version 2 of the License, or (at your option) any later version.

This program is distributed in the hope that it will be useful, but W\+I\+T\+H\+O\+UT A\+NY W\+A\+R\+R\+A\+N\+TY; without even the implied warranty of M\+E\+R\+C\+H\+A\+N\+T\+A\+B\+I\+L\+I\+TY or F\+I\+T\+N\+E\+SS F\+OR A P\+A\+R\+T\+I\+C\+U\+L\+AR P\+U\+R\+P\+O\+SE. See the G\+NU General Public License for more details.

You should have received a copy of the G\+NU General Public License along with this program; if not, write to the Free Software Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-\/1301, U\+SA.

\begin{DoxyAuthor}{Author}
Oryx Embedded S\+A\+RL (www.\+oryx-\/embedded.\+com) 
\end{DoxyAuthor}
\begin{DoxyVersion}{Version}
1.\+9.\+6 
\end{DoxyVersion}


\subsection{Function Documentation}
\mbox{\Hypertarget{date__time_8c_a2ed68acb2c0d1aa6d43a1f2ad835ee87}\label{date__time_8c_a2ed68acb2c0d1aa6d43a1f2ad835ee87}} 
\index{date\+\_\+time.\+c@{date\+\_\+time.\+c}!compare\+Date\+Time@{compare\+Date\+Time}}
\index{compare\+Date\+Time@{compare\+Date\+Time}!date\+\_\+time.\+c@{date\+\_\+time.\+c}}
\subsubsection{\texorpdfstring{compare\+Date\+Time()}{compareDateTime()}}
{\footnotesize\ttfamily \hyperlink{compiler__port_8h_a022c65af7f6c8d3947e8a37d64db6ad6}{int\+\_\+t} compare\+Date\+Time (\begin{DoxyParamCaption}\item[{const \hyperlink{structDateTime}{Date\+Time} $\ast$}]{date1,  }\item[{const \hyperlink{structDateTime}{Date\+Time} $\ast$}]{date2 }\end{DoxyParamCaption})}



Compare dates. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em date1} & Pointer to the first date \\
\hline
\mbox{\tt in}  & {\em date2} & Pointer to the second date \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Comparison result 
\end{DoxyReturn}


Definition at line 302 of file date\+\_\+time.\+c.


\begin{DoxyCode}
303 \{
304    \hyperlink{compiler__port_8h_a022c65af7f6c8d3947e8a37d64db6ad6}{int\_t} \hyperlink{resource__manager_8c_a369fab9cf831846ad1a1d6bd33a86fa1}{res};
305 
306    \textcolor{comment}{//Perform comparison}
307    \textcolor{keywordflow}{if}(date1->\hyperlink{structDateTime_a0a61d60280541502e47f9a7fd6e1c8d2}{year} < date2->\hyperlink{structDateTime_a0a61d60280541502e47f9a7fd6e1c8d2}{year})
308       res = -1;
309    \textcolor{keywordflow}{else} \textcolor{keywordflow}{if}(date1->\hyperlink{structDateTime_a0a61d60280541502e47f9a7fd6e1c8d2}{year} > date2->\hyperlink{structDateTime_a0a61d60280541502e47f9a7fd6e1c8d2}{year})
310       res = 1;
311    \textcolor{keywordflow}{else} \textcolor{keywordflow}{if}(date1->\hyperlink{structDateTime_ac895afb51c74941c50205f746b709148}{month} < date2->\hyperlink{structDateTime_ac895afb51c74941c50205f746b709148}{month})
312       res = -1;
313    \textcolor{keywordflow}{else} \textcolor{keywordflow}{if}(date1->\hyperlink{structDateTime_ac895afb51c74941c50205f746b709148}{month} > date2->\hyperlink{structDateTime_ac895afb51c74941c50205f746b709148}{month})
314       res = 1;
315    \textcolor{keywordflow}{else} \textcolor{keywordflow}{if}(date1->\hyperlink{structDateTime_a727866b5ecdfda1edf946efe86aa74af}{day} < date2->\hyperlink{structDateTime_a727866b5ecdfda1edf946efe86aa74af}{day})
316       res = -1;
317    \textcolor{keywordflow}{else} \textcolor{keywordflow}{if}(date1->\hyperlink{structDateTime_a727866b5ecdfda1edf946efe86aa74af}{day} > date2->\hyperlink{structDateTime_a727866b5ecdfda1edf946efe86aa74af}{day})
318       res = 1;
319    \textcolor{keywordflow}{else} \textcolor{keywordflow}{if}(date1->\hyperlink{structDateTime_a46fa4e0c13c7fc19c8ae97a5642c4a15}{hours} < date2->\hyperlink{structDateTime_a46fa4e0c13c7fc19c8ae97a5642c4a15}{hours})
320       res = -1;
321    \textcolor{keywordflow}{else} \textcolor{keywordflow}{if}(date1->\hyperlink{structDateTime_a46fa4e0c13c7fc19c8ae97a5642c4a15}{hours} > date2->\hyperlink{structDateTime_a46fa4e0c13c7fc19c8ae97a5642c4a15}{hours})
322       res = 1;
323    \textcolor{keywordflow}{else} \textcolor{keywordflow}{if}(date1->\hyperlink{structDateTime_a9e705a28fc51e333616553313107d579}{minutes} < date2->\hyperlink{structDateTime_a9e705a28fc51e333616553313107d579}{minutes})
324       res = -1;
325    \textcolor{keywordflow}{else} \textcolor{keywordflow}{if}(date1->\hyperlink{structDateTime_a9e705a28fc51e333616553313107d579}{minutes} > date2->\hyperlink{structDateTime_a9e705a28fc51e333616553313107d579}{minutes})
326       res = 1;
327    \textcolor{keywordflow}{else} \textcolor{keywordflow}{if}(date1->\hyperlink{structDateTime_a428828f757146b36432b4669e8b27eeb}{seconds} < date2->\hyperlink{structDateTime_a428828f757146b36432b4669e8b27eeb}{seconds})
328       res = -1;
329    \textcolor{keywordflow}{else} \textcolor{keywordflow}{if}(date1->\hyperlink{structDateTime_a428828f757146b36432b4669e8b27eeb}{seconds} > date2->\hyperlink{structDateTime_a428828f757146b36432b4669e8b27eeb}{seconds})
330       res = 1;
331    \textcolor{keywordflow}{else} \textcolor{keywordflow}{if}(date1->\hyperlink{structDateTime_a8b3982e7347da9a62c2bfc6c273da909}{milliseconds} < date2->\hyperlink{structDateTime_a8b3982e7347da9a62c2bfc6c273da909}{milliseconds})
332       res = -1;
333    \textcolor{keywordflow}{else} \textcolor{keywordflow}{if}(date1->\hyperlink{structDateTime_a8b3982e7347da9a62c2bfc6c273da909}{milliseconds} > date2->\hyperlink{structDateTime_a8b3982e7347da9a62c2bfc6c273da909}{milliseconds})
334       res = 1;
335    \textcolor{keywordflow}{else}
336       res = 0;
337 
338    \textcolor{comment}{//Return comparison result}
339    \textcolor{keywordflow}{return} \hyperlink{resource__manager_8c_a369fab9cf831846ad1a1d6bd33a86fa1}{res};
340 \}
\end{DoxyCode}
\mbox{\Hypertarget{date__time_8c_a06b62b5d18f2877000392ea33718676e}\label{date__time_8c_a06b62b5d18f2877000392ea33718676e}} 
\index{date\+\_\+time.\+c@{date\+\_\+time.\+c}!compute\+Day\+Of\+Week@{compute\+Day\+Of\+Week}}
\index{compute\+Day\+Of\+Week@{compute\+Day\+Of\+Week}!date\+\_\+time.\+c@{date\+\_\+time.\+c}}
\subsubsection{\texorpdfstring{compute\+Day\+Of\+Week()}{computeDayOfWeek()}}
{\footnotesize\ttfamily \hyperlink{stdint_8h_aba7bc1797add20fe3efdf37ced1182c5}{uint8\+\_\+t} compute\+Day\+Of\+Week (\begin{DoxyParamCaption}\item[{\hyperlink{stdint_8h_a273cf69d639a59973b6019625df33e30}{uint16\+\_\+t}}]{y,  }\item[{\hyperlink{stdint_8h_aba7bc1797add20fe3efdf37ced1182c5}{uint8\+\_\+t}}]{m,  }\item[{\hyperlink{stdint_8h_aba7bc1797add20fe3efdf37ced1182c5}{uint8\+\_\+t}}]{d }\end{DoxyParamCaption})}



Calculate day of week. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em y} & Year \\
\hline
\mbox{\tt in}  & {\em m} & Month of year (in range 1 to 12) \\
\hline
\mbox{\tt in}  & {\em d} & Day of month (in range 1 to 31) \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Day of week (in range 1 to 7) 
\end{DoxyReturn}


Definition at line 351 of file date\+\_\+time.\+c.


\begin{DoxyCode}
352 \{
353    \hyperlink{compiler__port_8h_a12a1e9b3ce141648783a82445d02b58d}{uint\_t} \hyperlink{ndp_8h_a1f1dfeb2f802fe99f37fe91867b84456}{h};
354    \hyperlink{compiler__port_8h_a12a1e9b3ce141648783a82445d02b58d}{uint\_t} j;
355    \hyperlink{compiler__port_8h_a12a1e9b3ce141648783a82445d02b58d}{uint\_t} \hyperlink{md5_8c_af11ea3cdbca7345eb6a4a8ac5ce0434d}{k};
356 
357    \textcolor{comment}{//January and February are counted as months 13 and 14 of the previous year}
358    \textcolor{keywordflow}{if}(\hyperlink{ndp_8h_a6b3284d8492267a77ca46948daf5545e}{m} <= 2)
359    \{
360       \hyperlink{ndp_8h_a6b3284d8492267a77ca46948daf5545e}{m} += 12;
361       y -= 1;
362    \}
363 
364    \textcolor{comment}{//J is the century}
365    j = y / 100;
366    \textcolor{comment}{//K the year of the century}
367    k = y % 100;
368 
369    \textcolor{comment}{//Compute H using Zeller's congruence}
370    h = d + (26 * (\hyperlink{ndp_8h_a6b3284d8492267a77ca46948daf5545e}{m} + 1) / 10) + k + (k / 4) + (5 * j) + (j / 4);
371 
372    \textcolor{comment}{//Return the day of the week}
373    \textcolor{keywordflow}{return} ((h + 5) % 7) + 1;
374 \}
\end{DoxyCode}
\mbox{\Hypertarget{date__time_8c_a399c87076e1ac03c9542ba1544c06f21}\label{date__time_8c_a399c87076e1ac03c9542ba1544c06f21}} 
\index{date\+\_\+time.\+c@{date\+\_\+time.\+c}!convert\+Date\+To\+Unix\+Time@{convert\+Date\+To\+Unix\+Time}}
\index{convert\+Date\+To\+Unix\+Time@{convert\+Date\+To\+Unix\+Time}!date\+\_\+time.\+c@{date\+\_\+time.\+c}}
\subsubsection{\texorpdfstring{convert\+Date\+To\+Unix\+Time()}{convertDateToUnixTime()}}
{\footnotesize\ttfamily time\+\_\+t convert\+Date\+To\+Unix\+Time (\begin{DoxyParamCaption}\item[{const \hyperlink{structDateTime}{Date\+Time} $\ast$}]{date }\end{DoxyParamCaption})}



Convert date to Unix timestamp. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em date} & Pointer to a structure representing the date and time \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Unix timestamp 
\end{DoxyReturn}


Definition at line 258 of file date\+\_\+time.\+c.


\begin{DoxyCode}
259 \{
260    \hyperlink{compiler__port_8h_a12a1e9b3ce141648783a82445d02b58d}{uint\_t} y;
261    \hyperlink{compiler__port_8h_a12a1e9b3ce141648783a82445d02b58d}{uint\_t} \hyperlink{ndp_8h_a6b3284d8492267a77ca46948daf5545e}{m};
262    \hyperlink{compiler__port_8h_a12a1e9b3ce141648783a82445d02b58d}{uint\_t} d;
263    \hyperlink{stdint_8h_a435d1572bf3f880d55459d9805097f62}{uint32\_t} \hyperlink{llmnr__common_8h_a2d03918f4f9edabaf3c9f43abcc2d85b}{t};
264 
265    \textcolor{comment}{//Year}
266    y = date->\hyperlink{structDateTime_a0a61d60280541502e47f9a7fd6e1c8d2}{year};
267    \textcolor{comment}{//Month of year}
268    m = date->\hyperlink{structDateTime_ac895afb51c74941c50205f746b709148}{month};
269    \textcolor{comment}{//Day of month}
270    d = date->\hyperlink{structDateTime_a727866b5ecdfda1edf946efe86aa74af}{day};
271 
272    \textcolor{comment}{//January and February are counted as months 13 and 14 of the previous year}
273    \textcolor{keywordflow}{if}(m <= 2)
274    \{
275       m += 12;
276       y -= 1;
277    \}
278 
279    \textcolor{comment}{//Convert years to days}
280    t = (365 * y) + (y / 4) - (y / 100) + (y / 400);
281    \textcolor{comment}{//Convert months to days}
282    t += (30 * \hyperlink{ndp_8h_a6b3284d8492267a77ca46948daf5545e}{m}) + (3 * (m + 1) / 5) + d;
283    \textcolor{comment}{//Unix time starts on January 1st, 1970}
284    t -= 719561;
285    \textcolor{comment}{//Convert days to seconds}
286    t *= 86400;
287    \textcolor{comment}{//Add hours, minutes and seconds}
288    t += (3600 * date->\hyperlink{structDateTime_a46fa4e0c13c7fc19c8ae97a5642c4a15}{hours}) + (60 * date->\hyperlink{structDateTime_a9e705a28fc51e333616553313107d579}{minutes}) + date->\hyperlink{structDateTime_a428828f757146b36432b4669e8b27eeb}{seconds};
289 
290    \textcolor{comment}{//Return Unix time}
291    \textcolor{keywordflow}{return} \hyperlink{llmnr__common_8h_a2d03918f4f9edabaf3c9f43abcc2d85b}{t};
292 \}
\end{DoxyCode}
\mbox{\Hypertarget{date__time_8c_adf6672c66ed1b93ea8bba616ae630a4b}\label{date__time_8c_adf6672c66ed1b93ea8bba616ae630a4b}} 
\index{date\+\_\+time.\+c@{date\+\_\+time.\+c}!convert\+Unix\+Time\+To\+Date@{convert\+Unix\+Time\+To\+Date}}
\index{convert\+Unix\+Time\+To\+Date@{convert\+Unix\+Time\+To\+Date}!date\+\_\+time.\+c@{date\+\_\+time.\+c}}
\subsubsection{\texorpdfstring{convert\+Unix\+Time\+To\+Date()}{convertUnixTimeToDate()}}
{\footnotesize\ttfamily void convert\+Unix\+Time\+To\+Date (\begin{DoxyParamCaption}\item[{time\+\_\+t}]{t,  }\item[{\hyperlink{structDateTime}{Date\+Time} $\ast$}]{date }\end{DoxyParamCaption})}



Convert Unix timestamp to date. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em t} & Unix timestamp \\
\hline
\mbox{\tt out}  & {\em date} & Pointer to a structure representing the date and time \\
\hline
\end{DoxyParams}


Definition at line 198 of file date\+\_\+time.\+c.


\begin{DoxyCode}
199 \{
200    \hyperlink{stdint_8h_a435d1572bf3f880d55459d9805097f62}{uint32\_t} \hyperlink{ndp_8h_af4007aacd75b22aee32dba9ea96082c0}{a};
201    \hyperlink{stdint_8h_a435d1572bf3f880d55459d9805097f62}{uint32\_t} \hyperlink{dtls__misc_8h_ab590318ac859d0e57e15c3dd6c62a605}{b};
202    \hyperlink{stdint_8h_a435d1572bf3f880d55459d9805097f62}{uint32\_t} \hyperlink{aria_8c_a5dadc28804036d1b82e1dc027e95c9a6}{c};
203    \hyperlink{stdint_8h_a435d1572bf3f880d55459d9805097f62}{uint32\_t} d;
204    \hyperlink{stdint_8h_a435d1572bf3f880d55459d9805097f62}{uint32\_t} e;
205    \hyperlink{stdint_8h_a435d1572bf3f880d55459d9805097f62}{uint32\_t} f;
206 
207    \textcolor{comment}{//Negative Unix time values are not supported}
208    \textcolor{keywordflow}{if}(\hyperlink{llmnr__common_8h_a2d03918f4f9edabaf3c9f43abcc2d85b}{t} < 1)
209       \hyperlink{llmnr__common_8h_a2d03918f4f9edabaf3c9f43abcc2d85b}{t} = 0;
210 
211    \textcolor{comment}{//Clear milliseconds}
212    date->\hyperlink{structDateTime_a8b3982e7347da9a62c2bfc6c273da909}{milliseconds} = 0;
213 
214    \textcolor{comment}{//Retrieve hours, minutes and seconds}
215    date->\hyperlink{structDateTime_a428828f757146b36432b4669e8b27eeb}{seconds} = \hyperlink{llmnr__common_8h_a2d03918f4f9edabaf3c9f43abcc2d85b}{t} % 60;
216    \hyperlink{llmnr__common_8h_a2d03918f4f9edabaf3c9f43abcc2d85b}{t} /= 60;
217    date->\hyperlink{structDateTime_a9e705a28fc51e333616553313107d579}{minutes} = \hyperlink{llmnr__common_8h_a2d03918f4f9edabaf3c9f43abcc2d85b}{t} % 60;
218    \hyperlink{llmnr__common_8h_a2d03918f4f9edabaf3c9f43abcc2d85b}{t} /= 60;
219    date->\hyperlink{structDateTime_a46fa4e0c13c7fc19c8ae97a5642c4a15}{hours} = \hyperlink{llmnr__common_8h_a2d03918f4f9edabaf3c9f43abcc2d85b}{t} % 24;
220    \hyperlink{llmnr__common_8h_a2d03918f4f9edabaf3c9f43abcc2d85b}{t} /= 24;
221 
222    \textcolor{comment}{//Convert Unix time to date}
223    a = (\hyperlink{stdint_8h_a435d1572bf3f880d55459d9805097f62}{uint32\_t}) ((4 * \hyperlink{llmnr__common_8h_a2d03918f4f9edabaf3c9f43abcc2d85b}{t} + 102032) / 146097 + 15);
224    b = (\hyperlink{stdint_8h_a435d1572bf3f880d55459d9805097f62}{uint32\_t}) (\hyperlink{llmnr__common_8h_a2d03918f4f9edabaf3c9f43abcc2d85b}{t} + 2442113 + a - (a / 4));
225    c = (20 * b - 2442) / 7305;
226    d = b - 365 * c - (c / 4);
227    e = d * 1000 / 30601;
228    f = d - e * 30 - e * 601 / 1000;
229 
230    \textcolor{comment}{//January and February are counted as months 13 and 14 of the previous year}
231    \textcolor{keywordflow}{if}(e <= 13)
232    \{
233       c -= 4716;
234       e -= 1;
235    \}
236    \textcolor{keywordflow}{else}
237    \{
238       c -= 4715;
239       e -= 13;
240    \}
241 
242    \textcolor{comment}{//Retrieve year, month and day}
243    date->\hyperlink{structDateTime_a0a61d60280541502e47f9a7fd6e1c8d2}{year} = \hyperlink{aria_8c_a5dadc28804036d1b82e1dc027e95c9a6}{c};
244    date->\hyperlink{structDateTime_ac895afb51c74941c50205f746b709148}{month} = e;
245    date->\hyperlink{structDateTime_a727866b5ecdfda1edf946efe86aa74af}{day} = f;
246 
247    \textcolor{comment}{//Calculate day of week}
248    date->\hyperlink{structDateTime_a4bcfa5ccbae6858247fce0ddc0fbc47c}{dayOfWeek} = \hyperlink{date__time_8c_a06b62b5d18f2877000392ea33718676e}{computeDayOfWeek}(c, e, f);
249 \}
\end{DoxyCode}
\mbox{\Hypertarget{date__time_8c_ae3ad6a6f57fc1b212ef368cdfe95a7f0}\label{date__time_8c_ae3ad6a6f57fc1b212ef368cdfe95a7f0}} 
\index{date\+\_\+time.\+c@{date\+\_\+time.\+c}!format\+Date@{format\+Date}}
\index{format\+Date@{format\+Date}!date\+\_\+time.\+c@{date\+\_\+time.\+c}}
\subsubsection{\texorpdfstring{format\+Date()}{formatDate()}}
{\footnotesize\ttfamily const \hyperlink{compiler__port_8h_a40bb5262bf908c328fbcfbe5d29d0201}{char\+\_\+t}$\ast$ format\+Date (\begin{DoxyParamCaption}\item[{const \hyperlink{structDateTime}{Date\+Time} $\ast$}]{date,  }\item[{\hyperlink{compiler__port_8h_a40bb5262bf908c328fbcfbe5d29d0201}{char\+\_\+t} $\ast$}]{str }\end{DoxyParamCaption})}



Format date. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em date} & Pointer to a structure representing the date \\
\hline
\mbox{\tt out}  & {\em str} & N\+U\+L\+L-\/terminated string representing the specified date \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Pointer to the formatted string 
\end{DoxyReturn}


Definition at line 133 of file date\+\_\+time.\+c.


\begin{DoxyCode}
134 \{
135    \textcolor{keyword}{static} \hyperlink{compiler__port_8h_a40bb5262bf908c328fbcfbe5d29d0201}{char\_t} buffer[40];
136 
137    \textcolor{comment}{//The str parameter is optional}
138    \textcolor{keywordflow}{if}(!str)
139       str = buffer;
140 
141    \textcolor{comment}{//Format date}
142    \textcolor{keywordflow}{if}(date->\hyperlink{structDateTime_a4bcfa5ccbae6858247fce0ddc0fbc47c}{dayOfWeek})
143    \{
144       sprintf(str, \textcolor{stringliteral}{"%s, %s %"} PRIu8 \textcolor{stringliteral}{", %"} PRIu16 \textcolor{stringliteral}{" %02"} PRIu8 \textcolor{stringliteral}{":%02"} PRIu8 \textcolor{stringliteral}{":%02"} PRIu8,
145          \hyperlink{date__time_8c_a8a438c8c7610170104d5b48b90f3ada1}{days}[\hyperlink{os__port_8h_a3acffbd305ee72dcd4593c0d8af64a4f}{MIN}(date->\hyperlink{structDateTime_a4bcfa5ccbae6858247fce0ddc0fbc47c}{dayOfWeek}, 7)], \hyperlink{date__time_8c_a28e16ae8240a8338b89ff5929f9b274f}{months}[\hyperlink{os__port_8h_a3acffbd305ee72dcd4593c0d8af64a4f}{MIN}(date->
      \hyperlink{structDateTime_ac895afb51c74941c50205f746b709148}{month}, 12)], date->\hyperlink{structDateTime_a727866b5ecdfda1edf946efe86aa74af}{day},
146          date->\hyperlink{structDateTime_a0a61d60280541502e47f9a7fd6e1c8d2}{year}, date->\hyperlink{structDateTime_a46fa4e0c13c7fc19c8ae97a5642c4a15}{hours}, date->\hyperlink{structDateTime_a9e705a28fc51e333616553313107d579}{minutes}, date->\hyperlink{structDateTime_a428828f757146b36432b4669e8b27eeb}{seconds});
147    \}
148    \textcolor{keywordflow}{else}
149    \{
150       sprintf(str, \textcolor{stringliteral}{"%s %"} PRIu8 \textcolor{stringliteral}{", %"} PRIu16 \textcolor{stringliteral}{" %02"} PRIu8 \textcolor{stringliteral}{":%02"} PRIu8 \textcolor{stringliteral}{":%02"} PRIu8,
151          \hyperlink{date__time_8c_a28e16ae8240a8338b89ff5929f9b274f}{months}[\hyperlink{os__port_8h_a3acffbd305ee72dcd4593c0d8af64a4f}{MIN}(date->\hyperlink{structDateTime_ac895afb51c74941c50205f746b709148}{month}, 12)], date->\hyperlink{structDateTime_a727866b5ecdfda1edf946efe86aa74af}{day}, date->\hyperlink{structDateTime_a0a61d60280541502e47f9a7fd6e1c8d2}{year},
152          date->\hyperlink{structDateTime_a46fa4e0c13c7fc19c8ae97a5642c4a15}{hours}, date->\hyperlink{structDateTime_a9e705a28fc51e333616553313107d579}{minutes}, date->\hyperlink{structDateTime_a428828f757146b36432b4669e8b27eeb}{seconds});
153    \}
154 
155    \textcolor{comment}{//Return a pointer to the formatted string}
156    \textcolor{keywordflow}{return} str;
157 \}
\end{DoxyCode}
\mbox{\Hypertarget{date__time_8c_ae15b3e664208ca7e4d6983921865cd74}\label{date__time_8c_ae15b3e664208ca7e4d6983921865cd74}} 
\index{date\+\_\+time.\+c@{date\+\_\+time.\+c}!format\+System\+Time@{format\+System\+Time}}
\index{format\+System\+Time@{format\+System\+Time}!date\+\_\+time.\+c@{date\+\_\+time.\+c}}
\subsubsection{\texorpdfstring{format\+System\+Time()}{formatSystemTime()}}
{\footnotesize\ttfamily const \hyperlink{compiler__port_8h_a40bb5262bf908c328fbcfbe5d29d0201}{char\+\_\+t}$\ast$ format\+System\+Time (\begin{DoxyParamCaption}\item[{\hyperlink{compiler__port_8h_ae3e32a98d431a02106616da3071832dd}{systime\+\_\+t}}]{time,  }\item[{\hyperlink{compiler__port_8h_a40bb5262bf908c328fbcfbe5d29d0201}{char\+\_\+t} $\ast$}]{str }\end{DoxyParamCaption})}



Format system time. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em time} & System time \\
\hline
\mbox{\tt out}  & {\em str} & N\+U\+L\+L-\/terminated string representing the specified time \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Pointer to the formatted string 
\end{DoxyReturn}


Definition at line 77 of file date\+\_\+time.\+c.


\begin{DoxyCode}
78 \{
79    \hyperlink{stdint_8h_a273cf69d639a59973b6019625df33e30}{uint16\_t} hours;
80    \hyperlink{stdint_8h_aba7bc1797add20fe3efdf37ced1182c5}{uint8\_t} minutes;
81    \hyperlink{stdint_8h_aba7bc1797add20fe3efdf37ced1182c5}{uint8\_t} \hyperlink{ntp__common_8h_a6d5694839ec935781627e5c52de21fda}{seconds};
82    \hyperlink{stdint_8h_a273cf69d639a59973b6019625df33e30}{uint16\_t} milliseconds;
83    \textcolor{keyword}{static} \hyperlink{compiler__port_8h_a40bb5262bf908c328fbcfbe5d29d0201}{char\_t} buffer[24];
84 
85    \textcolor{comment}{//Retrieve milliseconds}
86    milliseconds = \hyperlink{dhcpv6__common_8h_ae73654f333e4363463ad8c594eca1905}{time} % 1000;
87    \hyperlink{dhcpv6__common_8h_ae73654f333e4363463ad8c594eca1905}{time} /= 1000;
88    \textcolor{comment}{//Retrieve seconds}
89    seconds = \hyperlink{dhcpv6__common_8h_ae73654f333e4363463ad8c594eca1905}{time} % 60;
90    \hyperlink{dhcpv6__common_8h_ae73654f333e4363463ad8c594eca1905}{time} /= 60;
91    \textcolor{comment}{//Retrieve minutes}
92    minutes = \hyperlink{dhcpv6__common_8h_ae73654f333e4363463ad8c594eca1905}{time} % 60;
93    \hyperlink{dhcpv6__common_8h_ae73654f333e4363463ad8c594eca1905}{time} /= 60;
94    \textcolor{comment}{//Retrieve hours}
95    hours = \hyperlink{dhcpv6__common_8h_ae73654f333e4363463ad8c594eca1905}{time};
96 
97    \textcolor{comment}{//The str parameter is optional}
98    \textcolor{keywordflow}{if}(!str)
99       str = buffer;
100 
101    \textcolor{comment}{//Format system time}
102    \textcolor{keywordflow}{if}(hours > 0)
103    \{
104       sprintf(str, \textcolor{stringliteral}{"%"} PRIu16 \textcolor{stringliteral}{"h %02"} PRIu8 \textcolor{stringliteral}{"min %02"} PRIu8 \textcolor{stringliteral}{"s %03"} PRIu16 \textcolor{stringliteral}{"ms"},
105          hours, minutes, seconds, milliseconds);
106    \}
107    \textcolor{keywordflow}{else} \textcolor{keywordflow}{if}(minutes > 0)
108    \{
109       sprintf(str, \textcolor{stringliteral}{"%"} PRIu8 \textcolor{stringliteral}{"min %02"} PRIu8 \textcolor{stringliteral}{"s %03"} PRIu16 \textcolor{stringliteral}{"ms"},
110          minutes, seconds, milliseconds);
111    \}
112    \textcolor{keywordflow}{else} \textcolor{keywordflow}{if}(seconds > 0)
113    \{
114       sprintf(str, \textcolor{stringliteral}{"%"} PRIu8 \textcolor{stringliteral}{"s %03"} PRIu16 \textcolor{stringliteral}{"ms"}, seconds, milliseconds);
115    \}
116    \textcolor{keywordflow}{else}
117    \{
118       sprintf(str, \textcolor{stringliteral}{"%"} PRIu16 \textcolor{stringliteral}{"ms"}, milliseconds);
119    \}
120 
121    \textcolor{comment}{//Return a pointer to the formatted string}
122    \textcolor{keywordflow}{return} str;
123 \}
\end{DoxyCode}
\mbox{\Hypertarget{date__time_8c_ababa139473966337e89aff65e484e7e2}\label{date__time_8c_ababa139473966337e89aff65e484e7e2}} 
\index{date\+\_\+time.\+c@{date\+\_\+time.\+c}!get\+Current\+Date@{get\+Current\+Date}}
\index{get\+Current\+Date@{get\+Current\+Date}!date\+\_\+time.\+c@{date\+\_\+time.\+c}}
\subsubsection{\texorpdfstring{get\+Current\+Date()}{getCurrentDate()}}
{\footnotesize\ttfamily void get\+Current\+Date (\begin{DoxyParamCaption}\item[{\hyperlink{structDateTime}{Date\+Time} $\ast$}]{date }\end{DoxyParamCaption})}



Get current date and time. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt out}  & {\em date} & Pointer to a structure representing the date and time \\
\hline
\end{DoxyParams}


Definition at line 165 of file date\+\_\+time.\+c.


\begin{DoxyCode}
166 \{
167    \textcolor{comment}{//Retrieve current time}
168    time\_t \hyperlink{dhcpv6__common_8h_ae73654f333e4363463ad8c594eca1905}{time} = \hyperlink{date__time_8c_a5ea5d60e1fafcd89917ee76d57981aae}{getCurrentUnixTime}();
169 
170    \textcolor{comment}{//Convert Unix timestamp to date}
171    \hyperlink{date__time_8c_adf6672c66ed1b93ea8bba616ae630a4b}{convertUnixTimeToDate}(time, date);
172 \}
\end{DoxyCode}
\mbox{\Hypertarget{date__time_8c_a5ea5d60e1fafcd89917ee76d57981aae}\label{date__time_8c_a5ea5d60e1fafcd89917ee76d57981aae}} 
\index{date\+\_\+time.\+c@{date\+\_\+time.\+c}!get\+Current\+Unix\+Time@{get\+Current\+Unix\+Time}}
\index{get\+Current\+Unix\+Time@{get\+Current\+Unix\+Time}!date\+\_\+time.\+c@{date\+\_\+time.\+c}}
\subsubsection{\texorpdfstring{get\+Current\+Unix\+Time()}{getCurrentUnixTime()}}
{\footnotesize\ttfamily time\+\_\+t get\+Current\+Unix\+Time (\begin{DoxyParamCaption}\item[{void}]{ }\end{DoxyParamCaption})}



Get current time. 

\begin{DoxyReturn}{Returns}
Unix timestamp 
\end{DoxyReturn}


Definition at line 180 of file date\+\_\+time.\+c.


\begin{DoxyCode}
181 \{
182 \textcolor{preprocessor}{#if defined(\_WIN32)}
183    \textcolor{comment}{//Retrieve current time}
184    \textcolor{keywordflow}{return} \hyperlink{dhcpv6__common_8h_ae73654f333e4363463ad8c594eca1905}{time}(\hyperlink{group__BSPDefine_ga070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL});
185 \textcolor{preprocessor}{#else}
186    \textcolor{comment}{//Not implemented}
187    \textcolor{keywordflow}{return} 0;
188 \textcolor{preprocessor}{#endif}
189 \}
\end{DoxyCode}


\subsection{Variable Documentation}
\mbox{\Hypertarget{date__time_8c_a8a438c8c7610170104d5b48b90f3ada1}\label{date__time_8c_a8a438c8c7610170104d5b48b90f3ada1}} 
\index{date\+\_\+time.\+c@{date\+\_\+time.\+c}!days@{days}}
\index{days@{days}!date\+\_\+time.\+c@{date\+\_\+time.\+c}}
\subsubsection{\texorpdfstring{days}{days}}
{\footnotesize\ttfamily const char days\mbox{[}8\mbox{]}\mbox{[}10\mbox{]}\hspace{0.3cm}{\ttfamily [static]}}

{\bfseries Initial value\+:}
\begin{DoxyCode}
=
\{
   \textcolor{stringliteral}{""},
   \textcolor{stringliteral}{"Monday"},
   \textcolor{stringliteral}{"Tuesday"},
   \textcolor{stringliteral}{"Wednesday"},
   \textcolor{stringliteral}{"Thursday"},
   \textcolor{stringliteral}{"Friday"},
   \textcolor{stringliteral}{"Saturday"},
   \textcolor{stringliteral}{"Sunday"}
\}
\end{DoxyCode}


Definition at line 39 of file date\+\_\+time.\+c.

\mbox{\Hypertarget{date__time_8c_a28e16ae8240a8338b89ff5929f9b274f}\label{date__time_8c_a28e16ae8240a8338b89ff5929f9b274f}} 
\index{date\+\_\+time.\+c@{date\+\_\+time.\+c}!months@{months}}
\index{months@{months}!date\+\_\+time.\+c@{date\+\_\+time.\+c}}
\subsubsection{\texorpdfstring{months}{months}}
{\footnotesize\ttfamily const char months\mbox{[}13\mbox{]}\mbox{[}10\mbox{]}\hspace{0.3cm}{\ttfamily [static]}}

{\bfseries Initial value\+:}
\begin{DoxyCode}
=
\{
   \textcolor{stringliteral}{""},
   \textcolor{stringliteral}{"January"},
   \textcolor{stringliteral}{"February"},
   \textcolor{stringliteral}{"March"},
   \textcolor{stringliteral}{"April"},
   \textcolor{stringliteral}{"May"},
   \textcolor{stringliteral}{"June"},
   \textcolor{stringliteral}{"July"},
   \textcolor{stringliteral}{"August"},
   \textcolor{stringliteral}{"September"},
   \textcolor{stringliteral}{"October"},
   \textcolor{stringliteral}{"November"},
   \textcolor{stringliteral}{"December"}
\}
\end{DoxyCode}


Definition at line 52 of file date\+\_\+time.\+c.

