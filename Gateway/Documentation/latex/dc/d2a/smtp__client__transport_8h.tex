\hypertarget{smtp__client__transport_8h}{}\section{cyclone\+\_\+tcp/smtp/smtp\+\_\+client\+\_\+transport.h File Reference}
\label{smtp__client__transport_8h}\index{cyclone\+\_\+tcp/smtp/smtp\+\_\+client\+\_\+transport.\+h@{cyclone\+\_\+tcp/smtp/smtp\+\_\+client\+\_\+transport.\+h}}


Transport protocol abstraction layer.  


{\ttfamily \#include \char`\"{}core/net.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}smtp/smtp\+\_\+client.\+h\char`\"{}}\newline
\subsection*{Functions}
\begin{DoxyCompactItemize}
\item 
\hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689c}{error\+\_\+t} \hyperlink{smtp__client__transport_8h_a17f5548caec52ff70c9ca76d23542677}{smtp\+Client\+Open\+Connection} (\hyperlink{smtp__client_8h_a1d51e1986667e1138d72dec48c441c89}{Smtp\+Client\+Context} $\ast$context)
\begin{DoxyCompactList}\small\item\em Open network connection. \end{DoxyCompactList}\item 
\hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689c}{error\+\_\+t} \hyperlink{smtp__client__transport_8h_aa8bed5f500111dbc51b5f3a4c4913d52}{smtp\+Client\+Establish\+Connection} (\hyperlink{smtp__client_8h_a1d51e1986667e1138d72dec48c441c89}{Smtp\+Client\+Context} $\ast$context, const \hyperlink{structIpAddr}{Ip\+Addr} $\ast$server\+Ip\+Addr, \hyperlink{stdint_8h_a273cf69d639a59973b6019625df33e30}{uint16\+\_\+t} server\+Port)
\begin{DoxyCompactList}\small\item\em Establish network connection. \end{DoxyCompactList}\item 
\hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689c}{error\+\_\+t} \hyperlink{smtp__client__transport_8h_a518275c381b7fa028674afa5d1e78d3c}{smtp\+Client\+Open\+Secure\+Connection} (\hyperlink{smtp__client_8h_a1d51e1986667e1138d72dec48c441c89}{Smtp\+Client\+Context} $\ast$context)
\begin{DoxyCompactList}\small\item\em Open secure connection. \end{DoxyCompactList}\item 
\hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689c}{error\+\_\+t} \hyperlink{smtp__client__transport_8h_aa17b363154efc6e0ea1ac960030a20fb}{smtp\+Client\+Establish\+Secure\+Connection} (\hyperlink{smtp__client_8h_a1d51e1986667e1138d72dec48c441c89}{Smtp\+Client\+Context} $\ast$context)
\begin{DoxyCompactList}\small\item\em Establish secure connection. \end{DoxyCompactList}\item 
\hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689c}{error\+\_\+t} \hyperlink{smtp__client__transport_8h_aee0810f79bbc85eae3174ce8aed74035}{smtp\+Client\+Shutdown\+Connection} (\hyperlink{smtp__client_8h_a1d51e1986667e1138d72dec48c441c89}{Smtp\+Client\+Context} $\ast$context)
\begin{DoxyCompactList}\small\item\em Shutdown network connection. \end{DoxyCompactList}\item 
void \hyperlink{smtp__client__transport_8h_a2cdce599b57f2627c3f422830acaf475}{smtp\+Client\+Close\+Connection} (\hyperlink{smtp__client_8h_a1d51e1986667e1138d72dec48c441c89}{Smtp\+Client\+Context} $\ast$context)
\begin{DoxyCompactList}\small\item\em Close network connection. \end{DoxyCompactList}\item 
\hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689c}{error\+\_\+t} \hyperlink{smtp__client__transport_8h_a85898809e400ef6197582909b7534d65}{smtp\+Client\+Send\+Data} (\hyperlink{smtp__client_8h_a1d51e1986667e1138d72dec48c441c89}{Smtp\+Client\+Context} $\ast$context, const void $\ast$\hyperlink{tftp__common_8h_a5c239a1bb87b52b0f1d6d68c4749cd2a}{data}, size\+\_\+t \hyperlink{ppp_8h_ab2b3adeb2a67e656ff030b56727fd0ac}{length}, size\+\_\+t $\ast$written, \hyperlink{compiler__port_8h_a12a1e9b3ce141648783a82445d02b58d}{uint\+\_\+t} \hyperlink{nbns__common_8h_a1e87af3c18a2fd36c61faf89949bdc3f}{flags})
\begin{DoxyCompactList}\small\item\em Send data using the relevant transport protocol. \end{DoxyCompactList}\item 
\hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689c}{error\+\_\+t} \hyperlink{smtp__client__transport_8h_a29ef0dfcee4f5d9435c78ae120617fd5}{smtp\+Client\+Receive\+Data} (\hyperlink{smtp__client_8h_a1d51e1986667e1138d72dec48c441c89}{Smtp\+Client\+Context} $\ast$context, void $\ast$\hyperlink{tftp__common_8h_a5c239a1bb87b52b0f1d6d68c4749cd2a}{data}, size\+\_\+t size, size\+\_\+t $\ast$received, \hyperlink{compiler__port_8h_a12a1e9b3ce141648783a82445d02b58d}{uint\+\_\+t} \hyperlink{nbns__common_8h_a1e87af3c18a2fd36c61faf89949bdc3f}{flags})
\begin{DoxyCompactList}\small\item\em Receive data using the relevant transport protocol. \end{DoxyCompactList}\end{DoxyCompactItemize}


\subsection{Detailed Description}
Transport protocol abstraction layer. 

\hypertarget{pic32mz__ef__curiosity_8h_License}{}\subsection{License}\label{pic32mz__ef__curiosity_8h_License}
S\+P\+D\+X-\/\+License-\/\+Identifier\+: G\+P\+L-\/2.\+0-\/or-\/later

Copyright (C) 2010-\/2019 Oryx Embedded S\+A\+RL. All rights reserved.

This file is part of Cyclone\+T\+CP Open.

This program is free software; you can redistribute it and/or modify it under the terms of the G\+NU General Public License as published by the Free Software Foundation; either version 2 of the License, or (at your option) any later version.

This program is distributed in the hope that it will be useful, but W\+I\+T\+H\+O\+UT A\+NY W\+A\+R\+R\+A\+N\+TY; without even the implied warranty of M\+E\+R\+C\+H\+A\+N\+T\+A\+B\+I\+L\+I\+TY or F\+I\+T\+N\+E\+SS F\+OR A P\+A\+R\+T\+I\+C\+U\+L\+AR P\+U\+R\+P\+O\+SE. See the G\+NU General Public License for more details.

You should have received a copy of the G\+NU General Public License along with this program; if not, write to the Free Software Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-\/1301, U\+SA.

\begin{DoxyAuthor}{Author}
Oryx Embedded S\+A\+RL (www.\+oryx-\/embedded.\+com) 
\end{DoxyAuthor}
\begin{DoxyVersion}{Version}
1.\+9.\+6 
\end{DoxyVersion}


\subsection{Function Documentation}
\mbox{\Hypertarget{smtp__client__transport_8h_a2cdce599b57f2627c3f422830acaf475}\label{smtp__client__transport_8h_a2cdce599b57f2627c3f422830acaf475}} 
\index{smtp\+\_\+client\+\_\+transport.\+h@{smtp\+\_\+client\+\_\+transport.\+h}!smtp\+Client\+Close\+Connection@{smtp\+Client\+Close\+Connection}}
\index{smtp\+Client\+Close\+Connection@{smtp\+Client\+Close\+Connection}!smtp\+\_\+client\+\_\+transport.\+h@{smtp\+\_\+client\+\_\+transport.\+h}}
\subsubsection{\texorpdfstring{smtp\+Client\+Close\+Connection()}{smtpClientCloseConnection()}}
{\footnotesize\ttfamily void smtp\+Client\+Close\+Connection (\begin{DoxyParamCaption}\item[{\hyperlink{smtp__client_8h_a1d51e1986667e1138d72dec48c441c89}{Smtp\+Client\+Context} $\ast$}]{context }\end{DoxyParamCaption})}



Close network connection. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em context} & Pointer to the S\+M\+TP client context \\
\hline
\end{DoxyParams}


Definition at line 228 of file smtp\+\_\+client\+\_\+transport.\+c.


\begin{DoxyCode}
229 \{
230 \textcolor{preprocessor}{#if (SMTP\_CLIENT\_TLS\_SUPPORT == ENABLED)}
231    \textcolor{comment}{//Release TLS context}
232    \textcolor{keywordflow}{if}(context->tlsContext != \hyperlink{group__BSPDefine_ga070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL})
233    \{
234       \hyperlink{tls_8c_aec8c1957ad13f5ad67d07a872d5fe66b}{tlsFree}(context->tlsContext);
235       context->tlsContext = \hyperlink{group__BSPDefine_ga070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL};
236    \}
237 \textcolor{preprocessor}{#endif}
238 
239    \textcolor{comment}{//Close TCP connection}
240    \textcolor{keywordflow}{if}(context->socket != \hyperlink{group__BSPDefine_ga070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL})
241    \{
242       \hyperlink{socket_8c_ac5012e9f71c97e2ea0410f2c5baccb0e}{socketClose}(context->socket);
243       context->socket = \hyperlink{group__BSPDefine_ga070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL};
244    \}
245 \}
\end{DoxyCode}
\mbox{\Hypertarget{smtp__client__transport_8h_aa8bed5f500111dbc51b5f3a4c4913d52}\label{smtp__client__transport_8h_aa8bed5f500111dbc51b5f3a4c4913d52}} 
\index{smtp\+\_\+client\+\_\+transport.\+h@{smtp\+\_\+client\+\_\+transport.\+h}!smtp\+Client\+Establish\+Connection@{smtp\+Client\+Establish\+Connection}}
\index{smtp\+Client\+Establish\+Connection@{smtp\+Client\+Establish\+Connection}!smtp\+\_\+client\+\_\+transport.\+h@{smtp\+\_\+client\+\_\+transport.\+h}}
\subsubsection{\texorpdfstring{smtp\+Client\+Establish\+Connection()}{smtpClientEstablishConnection()}}
{\footnotesize\ttfamily \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689c}{error\+\_\+t} smtp\+Client\+Establish\+Connection (\begin{DoxyParamCaption}\item[{\hyperlink{smtp__client_8h_a1d51e1986667e1138d72dec48c441c89}{Smtp\+Client\+Context} $\ast$}]{context,  }\item[{const \hyperlink{structIpAddr}{Ip\+Addr} $\ast$}]{server\+Ip\+Addr,  }\item[{\hyperlink{stdint_8h_a273cf69d639a59973b6019625df33e30}{uint16\+\_\+t}}]{server\+Port }\end{DoxyParamCaption})}



Establish network connection. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em context} & Pointer to the S\+M\+TP client context \\
\hline
\mbox{\tt in}  & {\em server\+Ip\+Addr} & IP address of the S\+M\+TP server to connect to \\
\hline
\mbox{\tt in}  & {\em server\+Port} & T\+CP port number that will be used to establish the connection \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Error code 
\end{DoxyReturn}


Definition at line 86 of file smtp\+\_\+client\+\_\+transport.\+c.


\begin{DoxyCode}
88 \{
89    \textcolor{comment}{//Establish TCP connection}
90    \textcolor{keywordflow}{return} \hyperlink{socket_8c_aff3e3c0abc332f42189fce8f362fbd63}{socketConnect}(context->socket, serverIpAddr, serverPort);
91 \}
\end{DoxyCode}
\mbox{\Hypertarget{smtp__client__transport_8h_aa17b363154efc6e0ea1ac960030a20fb}\label{smtp__client__transport_8h_aa17b363154efc6e0ea1ac960030a20fb}} 
\index{smtp\+\_\+client\+\_\+transport.\+h@{smtp\+\_\+client\+\_\+transport.\+h}!smtp\+Client\+Establish\+Secure\+Connection@{smtp\+Client\+Establish\+Secure\+Connection}}
\index{smtp\+Client\+Establish\+Secure\+Connection@{smtp\+Client\+Establish\+Secure\+Connection}!smtp\+\_\+client\+\_\+transport.\+h@{smtp\+\_\+client\+\_\+transport.\+h}}
\subsubsection{\texorpdfstring{smtp\+Client\+Establish\+Secure\+Connection()}{smtpClientEstablishSecureConnection()}}
{\footnotesize\ttfamily \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689c}{error\+\_\+t} smtp\+Client\+Establish\+Secure\+Connection (\begin{DoxyParamCaption}\item[{\hyperlink{smtp__client_8h_a1d51e1986667e1138d72dec48c441c89}{Smtp\+Client\+Context} $\ast$}]{context }\end{DoxyParamCaption})}



Establish secure connection. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em context} & Pointer to the S\+M\+TP client context \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Error code 
\end{DoxyReturn}


Definition at line 161 of file smtp\+\_\+client\+\_\+transport.\+c.


\begin{DoxyCode}
162 \{
163 \textcolor{preprocessor}{#if (SMTP\_CLIENT\_TLS\_SUPPORT == ENABLED)}
164    \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689c}{error\_t} error;
165 
166    \textcolor{comment}{//Establish TLS connection}
167    error = \hyperlink{tls_8c_a09ea66af9332cc10296020164428224e}{tlsConnect}(context->tlsContext);
168 
169    \textcolor{comment}{//Check status code}
170    \textcolor{keywordflow}{if}(!error)
171    \{
172       \textcolor{comment}{//Save TLS session}
173       error = \hyperlink{tls_8c_a1685cfa2e5cd4b4d9a212201de0336f4}{tlsSaveSessionState}(context->tlsContext, &context->tlsSession);
174    \}
175 
176    \textcolor{comment}{//Return status code}
177    \textcolor{keywordflow}{return} error;
178 \textcolor{preprocessor}{#else}
179    \textcolor{comment}{//Not implemented}
180    \textcolor{keywordflow}{return} \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689cab61c5ef368fbf03fdc1fb566c63f2f9a}{ERROR\_NOT\_IMPLEMENTED};
181 \textcolor{preprocessor}{#endif}
182 \}
\end{DoxyCode}
\mbox{\Hypertarget{smtp__client__transport_8h_a17f5548caec52ff70c9ca76d23542677}\label{smtp__client__transport_8h_a17f5548caec52ff70c9ca76d23542677}} 
\index{smtp\+\_\+client\+\_\+transport.\+h@{smtp\+\_\+client\+\_\+transport.\+h}!smtp\+Client\+Open\+Connection@{smtp\+Client\+Open\+Connection}}
\index{smtp\+Client\+Open\+Connection@{smtp\+Client\+Open\+Connection}!smtp\+\_\+client\+\_\+transport.\+h@{smtp\+\_\+client\+\_\+transport.\+h}}
\subsubsection{\texorpdfstring{smtp\+Client\+Open\+Connection()}{smtpClientOpenConnection()}}
{\footnotesize\ttfamily \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689c}{error\+\_\+t} smtp\+Client\+Open\+Connection (\begin{DoxyParamCaption}\item[{\hyperlink{smtp__client_8h_a1d51e1986667e1138d72dec48c441c89}{Smtp\+Client\+Context} $\ast$}]{context }\end{DoxyParamCaption})}



Open network connection. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em context} & Pointer to the S\+M\+TP client context \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Error code 
\end{DoxyReturn}


Definition at line 50 of file smtp\+\_\+client\+\_\+transport.\+c.


\begin{DoxyCode}
51 \{
52    \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689c}{error\_t} error;
53 
54    \textcolor{comment}{//Open a TCP socket}
55    context->socket = \hyperlink{socket_8c_aa139bbf42b326b52eb08cf52771ac337}{socketOpen}(\hyperlink{socket_8h_aa78c7398fa81f7f62aa233159d4d8d97a9dab003c4dc9f7279e806241534d4859}{SOCKET\_TYPE\_STREAM}, 
      \hyperlink{socket_8h_a56eb0e60bda5d1d8a2e702228405d969ae0f38a6f025bce7700b3cf0ddd04bb2a}{SOCKET\_IP\_PROTO\_TCP});
56    \textcolor{comment}{//Failed to open socket?}
57    \textcolor{keywordflow}{if}(context->socket == \hyperlink{group__BSPDefine_ga070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL})
58       \textcolor{keywordflow}{return} \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689cab721230e985e398cc0977dd729a12c61}{ERROR\_OPEN\_FAILED};
59 
60    \textcolor{comment}{//Associate the socket with the relevant interface}
61    error = \hyperlink{net__legacy_8h_a80bc49fa99e5654d8c345cd5c70d36d3}{socketBindToInterface}(context->socket, context->interface);
62    \textcolor{comment}{//Any error to report?}
63    \textcolor{keywordflow}{if}(error)
64       \textcolor{keywordflow}{return} error;
65 
66    \textcolor{comment}{//Set timeout}
67    error = \hyperlink{socket_8c_abdd29ac0ba4a644c726f5b1280680099}{socketSetTimeout}(context->socket, context->timeout);
68    \textcolor{comment}{//Any error to report?}
69    \textcolor{keywordflow}{if}(error)
70       \textcolor{keywordflow}{return} error;
71 
72    \textcolor{comment}{//Successful processing}
73    \textcolor{keywordflow}{return} \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689cabf350750d0d4fabd8954c0f1e9bbae94}{NO\_ERROR};
74 \}
\end{DoxyCode}
\mbox{\Hypertarget{smtp__client__transport_8h_a518275c381b7fa028674afa5d1e78d3c}\label{smtp__client__transport_8h_a518275c381b7fa028674afa5d1e78d3c}} 
\index{smtp\+\_\+client\+\_\+transport.\+h@{smtp\+\_\+client\+\_\+transport.\+h}!smtp\+Client\+Open\+Secure\+Connection@{smtp\+Client\+Open\+Secure\+Connection}}
\index{smtp\+Client\+Open\+Secure\+Connection@{smtp\+Client\+Open\+Secure\+Connection}!smtp\+\_\+client\+\_\+transport.\+h@{smtp\+\_\+client\+\_\+transport.\+h}}
\subsubsection{\texorpdfstring{smtp\+Client\+Open\+Secure\+Connection()}{smtpClientOpenSecureConnection()}}
{\footnotesize\ttfamily \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689c}{error\+\_\+t} smtp\+Client\+Open\+Secure\+Connection (\begin{DoxyParamCaption}\item[{\hyperlink{smtp__client_8h_a1d51e1986667e1138d72dec48c441c89}{Smtp\+Client\+Context} $\ast$}]{context }\end{DoxyParamCaption})}



Open secure connection. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em context} & Pointer to the S\+M\+TP client context \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Error code 
\end{DoxyReturn}


Definition at line 100 of file smtp\+\_\+client\+\_\+transport.\+c.


\begin{DoxyCode}
101 \{
102 \textcolor{preprocessor}{#if (SMTP\_CLIENT\_TLS\_SUPPORT == ENABLED)}
103    \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689c}{error\_t} error;
104 
105    \textcolor{comment}{//Allocate TLS context}
106    context->tlsContext = \hyperlink{tls_8c_a5d34d9c0613c57d32b35692a86d5b04f}{tlsInit}();
107    \textcolor{comment}{//Failed to allocate TLS context?}
108    \textcolor{keywordflow}{if}(context->tlsContext == \hyperlink{group__BSPDefine_ga070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL})
109       \textcolor{keywordflow}{return} \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689cab721230e985e398cc0977dd729a12c61}{ERROR\_OPEN\_FAILED};
110 
111    \textcolor{comment}{//Select client operation mode}
112    error = \hyperlink{tls_8c_a8713543db673ee5a36b2fda92e082c6b}{tlsSetConnectionEnd}(context->tlsContext, 
      \hyperlink{tls_8h_acb21bc158664d823d899d760edd8135ba7f216418b2d898ed01cf9376fd9b3d6d}{TLS\_CONNECTION\_END\_CLIENT});
113    \textcolor{comment}{//Any error to report?}
114    \textcolor{keywordflow}{if}(error)
115       \textcolor{keywordflow}{return} error;
116 
117    \textcolor{comment}{//Bind TLS to the relevant socket}
118    error = \hyperlink{tls_8h_af918bec8cc034c91ae7cb14a4ab24103}{tlsSetSocket}(context->tlsContext, context->socket);
119    \textcolor{comment}{//Any error to report?}
120    \textcolor{keywordflow}{if}(error)
121       \textcolor{keywordflow}{return} error;
122 
123    \textcolor{comment}{//Set TX and RX buffer size}
124    error = \hyperlink{tls_8c_ac23d9d1f7d44e34b91e0dc56ee8cb95d}{tlsSetBufferSize}(context->tlsContext,
125       \hyperlink{smtp__client_8h_aecc8aae6a9cde14d17b1209ccbd779aa}{SMTP\_CLIENT\_TLS\_TX\_BUFFER\_SIZE}, 
      \hyperlink{smtp__client_8h_a82e2a01eb32c60ce8cda46221a5f9e49}{SMTP\_CLIENT\_TLS\_RX\_BUFFER\_SIZE});
126    \textcolor{comment}{//Any error to report?}
127    \textcolor{keywordflow}{if}(error)
128       \textcolor{keywordflow}{return} error;
129 
130    \textcolor{comment}{//Restore TLS session}
131    error = \hyperlink{tls_8c_a04094e358f18adc2d7ad8686e3258b93}{tlsRestoreSessionState}(context->tlsContext, &context->tlsSession);
132    \textcolor{comment}{//Any error to report?}
133    \textcolor{keywordflow}{if}(error)
134       \textcolor{keywordflow}{return} error;
135 
136    \textcolor{comment}{//Invoke user-defined callback, if any}
137    \textcolor{keywordflow}{if}(context->tlsInitCallback != \hyperlink{group__BSPDefine_ga070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL})
138    \{
139       \textcolor{comment}{//Perform TLS related initialization}
140       error = context->tlsInitCallback(context, context->tlsContext);
141       \textcolor{comment}{//Any error to report?}
142       \textcolor{keywordflow}{if}(error)
143          \textcolor{keywordflow}{return} error;
144    \}
145 
146    \textcolor{comment}{//Successful processing}
147    \textcolor{keywordflow}{return} \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689cabf350750d0d4fabd8954c0f1e9bbae94}{NO\_ERROR};
148 \textcolor{preprocessor}{#else}
149    \textcolor{comment}{//Not implemented}
150    \textcolor{keywordflow}{return} \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689cab61c5ef368fbf03fdc1fb566c63f2f9a}{ERROR\_NOT\_IMPLEMENTED};
151 \textcolor{preprocessor}{#endif}
152 \}
\end{DoxyCode}
\mbox{\Hypertarget{smtp__client__transport_8h_a29ef0dfcee4f5d9435c78ae120617fd5}\label{smtp__client__transport_8h_a29ef0dfcee4f5d9435c78ae120617fd5}} 
\index{smtp\+\_\+client\+\_\+transport.\+h@{smtp\+\_\+client\+\_\+transport.\+h}!smtp\+Client\+Receive\+Data@{smtp\+Client\+Receive\+Data}}
\index{smtp\+Client\+Receive\+Data@{smtp\+Client\+Receive\+Data}!smtp\+\_\+client\+\_\+transport.\+h@{smtp\+\_\+client\+\_\+transport.\+h}}
\subsubsection{\texorpdfstring{smtp\+Client\+Receive\+Data()}{smtpClientReceiveData()}}
{\footnotesize\ttfamily \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689c}{error\+\_\+t} smtp\+Client\+Receive\+Data (\begin{DoxyParamCaption}\item[{\hyperlink{smtp__client_8h_a1d51e1986667e1138d72dec48c441c89}{Smtp\+Client\+Context} $\ast$}]{context,  }\item[{void $\ast$}]{data,  }\item[{size\+\_\+t}]{size,  }\item[{size\+\_\+t $\ast$}]{received,  }\item[{\hyperlink{compiler__port_8h_a12a1e9b3ce141648783a82445d02b58d}{uint\+\_\+t}}]{flags }\end{DoxyParamCaption})}



Receive data using the relevant transport protocol. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em context} & Pointer to the S\+M\+TP client context \\
\hline
\mbox{\tt out}  & {\em data} & Buffer into which received data will be placed \\
\hline
\mbox{\tt in}  & {\em size} & Maximum number of bytes that can be received \\
\hline
\mbox{\tt out}  & {\em received} & Number of bytes that have been received \\
\hline
\mbox{\tt in}  & {\em flags} & Set of flags that influences the behavior of this function \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Error code 
\end{DoxyReturn}


Definition at line 292 of file smtp\+\_\+client\+\_\+transport.\+c.


\begin{DoxyCode}
294 \{
295    \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689c}{error\_t} error;
296 
297 \textcolor{preprocessor}{#if (SMTP\_CLIENT\_TLS\_SUPPORT == ENABLED)}
298    \textcolor{comment}{//TLS-secured connection?}
299    \textcolor{keywordflow}{if}(context->tlsContext != \hyperlink{group__BSPDefine_ga070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL})
300    \{
301       \textcolor{comment}{//Receive TLS-encrypted data}
302       error = \hyperlink{tls_8c_a6aa09693d0cdc6e93d9b88a6331bc247}{tlsRead}(context->tlsContext, \hyperlink{dtls__misc_8h_a5c239a1bb87b52b0f1d6d68c4749cd2a}{data}, size, received, 
      \hyperlink{tcp_8h_aa2585d779da0ab21273a8d92de9a0ebe}{flags});
303    \}
304    \textcolor{keywordflow}{else}
305 \textcolor{preprocessor}{#endif}
306    \{
307       \textcolor{comment}{//Receive data}
308       error = \hyperlink{socket_8c_a894c7bf0bfd4e3886fc584ed7ebbb087}{socketReceive}(context->socket, \hyperlink{dtls__misc_8h_a5c239a1bb87b52b0f1d6d68c4749cd2a}{data}, size, received, 
      \hyperlink{tcp_8h_aa2585d779da0ab21273a8d92de9a0ebe}{flags});
309    \}
310 
311    \textcolor{comment}{//Return status code}
312    \textcolor{keywordflow}{return} error;
313 \}
\end{DoxyCode}
\mbox{\Hypertarget{smtp__client__transport_8h_a85898809e400ef6197582909b7534d65}\label{smtp__client__transport_8h_a85898809e400ef6197582909b7534d65}} 
\index{smtp\+\_\+client\+\_\+transport.\+h@{smtp\+\_\+client\+\_\+transport.\+h}!smtp\+Client\+Send\+Data@{smtp\+Client\+Send\+Data}}
\index{smtp\+Client\+Send\+Data@{smtp\+Client\+Send\+Data}!smtp\+\_\+client\+\_\+transport.\+h@{smtp\+\_\+client\+\_\+transport.\+h}}
\subsubsection{\texorpdfstring{smtp\+Client\+Send\+Data()}{smtpClientSendData()}}
{\footnotesize\ttfamily \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689c}{error\+\_\+t} smtp\+Client\+Send\+Data (\begin{DoxyParamCaption}\item[{\hyperlink{smtp__client_8h_a1d51e1986667e1138d72dec48c441c89}{Smtp\+Client\+Context} $\ast$}]{context,  }\item[{const void $\ast$}]{data,  }\item[{size\+\_\+t}]{length,  }\item[{size\+\_\+t $\ast$}]{written,  }\item[{\hyperlink{compiler__port_8h_a12a1e9b3ce141648783a82445d02b58d}{uint\+\_\+t}}]{flags }\end{DoxyParamCaption})}



Send data using the relevant transport protocol. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em context} & Pointer to the S\+M\+TP client context \\
\hline
\mbox{\tt in}  & {\em data} & Pointer to a buffer containing the data to be transmitted \\
\hline
\mbox{\tt in}  & {\em length} & Number of bytes to be transmitted \\
\hline
\mbox{\tt out}  & {\em written} & Actual number of bytes written (optional parameter) \\
\hline
\mbox{\tt in}  & {\em flags} & Set of flags that influences the behavior of this function \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Error code 
\end{DoxyReturn}


Definition at line 258 of file smtp\+\_\+client\+\_\+transport.\+c.


\begin{DoxyCode}
260 \{
261    \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689c}{error\_t} error;
262 
263 \textcolor{preprocessor}{#if (SMTP\_CLIENT\_TLS\_SUPPORT == ENABLED)}
264    \textcolor{comment}{//TLS-secured connection?}
265    \textcolor{keywordflow}{if}(context->tlsContext != \hyperlink{group__BSPDefine_ga070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL})
266    \{
267       \textcolor{comment}{//Send TLS-encrypted data}
268       error = \hyperlink{tls_8c_a1b4b22502217a601f7f094403e700b4b}{tlsWrite}(context->tlsContext, \hyperlink{dtls__misc_8h_a5c239a1bb87b52b0f1d6d68c4749cd2a}{data}, \hyperlink{dtls__misc_8h_ab43ca82dd7fa2a0e56f941032ef324c4}{length}, written, 
      \hyperlink{tcp_8h_aa2585d779da0ab21273a8d92de9a0ebe}{flags});
269    \}
270    \textcolor{keywordflow}{else}
271 \textcolor{preprocessor}{#endif}
272    \{
273       \textcolor{comment}{//Transmit data}
274       error = \hyperlink{socket_8c_aa4eeb3a3294d14d681675ba9f0d3e568}{socketSend}(context->socket, \hyperlink{dtls__misc_8h_a5c239a1bb87b52b0f1d6d68c4749cd2a}{data}, \hyperlink{dtls__misc_8h_ab43ca82dd7fa2a0e56f941032ef324c4}{length}, written, 
      \hyperlink{tcp_8h_aa2585d779da0ab21273a8d92de9a0ebe}{flags});
275    \}
276 
277    \textcolor{comment}{//Return status code}
278    \textcolor{keywordflow}{return} error;
279 \}
\end{DoxyCode}
\mbox{\Hypertarget{smtp__client__transport_8h_aee0810f79bbc85eae3174ce8aed74035}\label{smtp__client__transport_8h_aee0810f79bbc85eae3174ce8aed74035}} 
\index{smtp\+\_\+client\+\_\+transport.\+h@{smtp\+\_\+client\+\_\+transport.\+h}!smtp\+Client\+Shutdown\+Connection@{smtp\+Client\+Shutdown\+Connection}}
\index{smtp\+Client\+Shutdown\+Connection@{smtp\+Client\+Shutdown\+Connection}!smtp\+\_\+client\+\_\+transport.\+h@{smtp\+\_\+client\+\_\+transport.\+h}}
\subsubsection{\texorpdfstring{smtp\+Client\+Shutdown\+Connection()}{smtpClientShutdownConnection()}}
{\footnotesize\ttfamily \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689c}{error\+\_\+t} smtp\+Client\+Shutdown\+Connection (\begin{DoxyParamCaption}\item[{\hyperlink{smtp__client_8h_a1d51e1986667e1138d72dec48c441c89}{Smtp\+Client\+Context} $\ast$}]{context }\end{DoxyParamCaption})}



Shutdown network connection. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em context} & Pointer to the S\+M\+TP client context \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Error code 
\end{DoxyReturn}


Definition at line 191 of file smtp\+\_\+client\+\_\+transport.\+c.


\begin{DoxyCode}
192 \{
193    \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689c}{error\_t} error;
194 
195    \textcolor{comment}{//Initialize status code}
196    error = \hyperlink{error_8h_ac7659d73a8cdedc08e9f566bb406689cabf350750d0d4fabd8954c0f1e9bbae94}{NO\_ERROR};
197 
198 \textcolor{preprocessor}{#if (SMTP\_CLIENT\_TLS\_SUPPORT == ENABLED)}
199    \textcolor{comment}{//Valid TLS context?}
200    \textcolor{keywordflow}{if}(context->tlsContext != \hyperlink{group__BSPDefine_ga070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL})
201    \{
202       \textcolor{comment}{//Shutdown TLS session}
203       error = \hyperlink{tls_8c_ae6a631703510008537d2cd97ab3425ef}{tlsShutdown}(context->tlsContext);
204    \}
205 \textcolor{preprocessor}{#endif}
206 
207    \textcolor{comment}{//Check status code}
208    \textcolor{keywordflow}{if}(!error)
209    \{
210       \textcolor{comment}{//Valid TCP socket?}
211       \textcolor{keywordflow}{if}(context->socket != \hyperlink{group__BSPDefine_ga070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL})
212       \{
213          \textcolor{comment}{//Shutdown TCP connection}
214          error = \hyperlink{socket_8c_acc736b53dba4a0d3b11b63f75cdcfffb}{socketShutdown}(context->socket, \hyperlink{socket_8h_a36ee33c18de64f549a6336d1aa7333b7a4c533f4b86ea89dfd6a508bb4262c76d}{SOCKET\_SD\_BOTH});
215       \}
216    \}
217 
218    \textcolor{comment}{//Return status code}
219    \textcolor{keywordflow}{return} error;
220 \}
\end{DoxyCode}
